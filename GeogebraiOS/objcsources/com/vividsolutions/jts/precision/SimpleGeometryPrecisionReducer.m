//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/com/vividsolutions/jts/precision/SimpleGeometryPrecisionReducer.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "com/vividsolutions/jts/geom/Coordinate.h"
#include "com/vividsolutions/jts/geom/CoordinateList.h"
#include "com/vividsolutions/jts/geom/Geometry.h"
#include "com/vividsolutions/jts/geom/GeometryFactory.h"
#include "com/vividsolutions/jts/geom/LineString.h"
#include "com/vividsolutions/jts/geom/LinearRing.h"
#include "com/vividsolutions/jts/geom/PrecisionModel.h"
#include "com/vividsolutions/jts/geom/util/GeometryEditor.h"
#include "com/vividsolutions/jts/precision/SimpleGeometryPrecisionReducer.h"

@interface ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer () {
 @public
  ComVividsolutionsJtsGeomPrecisionModel *newPrecisionModel_;
  jboolean removeCollapsed_;
  jboolean changePrecisionModel_;
}

@end

J2OBJC_FIELD_SETTER(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer, newPrecisionModel_, ComVividsolutionsJtsGeomPrecisionModel *)

@interface ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation : ComVividsolutionsJtsGeomUtilGeometryEditor_CoordinateOperation {
 @public
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *this$0_;
}

- (IOSObjectArray *)editWithComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)coordinates
                               withComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)geom;

- (instancetype)initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer:(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation)

J2OBJC_FIELD_SETTER(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation, this$0_, ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *)

__attribute__((unused)) static void ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation_initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation *self, ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *outer$);

__attribute__((unused)) static ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation *new_ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation_initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation)

@implementation ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer

+ (ComVividsolutionsJtsGeomGeometry *)reduceWithComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)g
                                      withComVividsolutionsJtsGeomPrecisionModel:(ComVividsolutionsJtsGeomPrecisionModel *)precModel {
  return ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_reduceWithComVividsolutionsJtsGeomGeometry_withComVividsolutionsJtsGeomPrecisionModel_(g, precModel);
}

- (instancetype)initWithComVividsolutionsJtsGeomPrecisionModel:(ComVividsolutionsJtsGeomPrecisionModel *)pm {
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_initWithComVividsolutionsJtsGeomPrecisionModel_(self, pm);
  return self;
}

- (void)setRemoveCollapsedComponentsWithBoolean:(jboolean)removeCollapsed {
  self->removeCollapsed_ = removeCollapsed;
}

- (void)setChangePrecisionModelWithBoolean:(jboolean)changePrecisionModel {
  self->changePrecisionModel_ = changePrecisionModel;
}

- (ComVividsolutionsJtsGeomGeometry *)reduceWithComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)geom {
  ComVividsolutionsJtsGeomUtilGeometryEditor *geomEdit;
  if (changePrecisionModel_) {
    ComVividsolutionsJtsGeomGeometryFactory *newFactory = [new_ComVividsolutionsJtsGeomGeometryFactory_initWithComVividsolutionsJtsGeomPrecisionModel_withInt_(newPrecisionModel_, [((ComVividsolutionsJtsGeomGeometryFactory *) nil_chk([((ComVividsolutionsJtsGeomGeometry *) nil_chk(geom)) getFactory])) getSRID]) autorelease];
    geomEdit = [new_ComVividsolutionsJtsGeomUtilGeometryEditor_initWithComVividsolutionsJtsGeomGeometryFactory_(newFactory) autorelease];
  }
  else geomEdit = [new_ComVividsolutionsJtsGeomUtilGeometryEditor_init() autorelease];
  return [((ComVividsolutionsJtsGeomUtilGeometryEditor *) nil_chk(geomEdit)) editWithComVividsolutionsJtsGeomGeometry:geom withComVividsolutionsJtsGeomUtilGeometryEditor_GeometryEditorOperation:[new_ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation_initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_(self) autorelease]];
}

- (void)dealloc {
  RELEASE_(newPrecisionModel_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "reduceWithComVividsolutionsJtsGeomGeometry:withComVividsolutionsJtsGeomPrecisionModel:", "reduce", "Lcom.vividsolutions.jts.geom.Geometry;", 0x9, NULL, NULL },
    { "initWithComVividsolutionsJtsGeomPrecisionModel:", "SimpleGeometryPrecisionReducer", NULL, 0x1, NULL, NULL },
    { "setRemoveCollapsedComponentsWithBoolean:", "setRemoveCollapsedComponents", "V", 0x1, NULL, NULL },
    { "setChangePrecisionModelWithBoolean:", "setChangePrecisionModel", "V", 0x1, NULL, NULL },
    { "reduceWithComVividsolutionsJtsGeomGeometry:", "reduce", "Lcom.vividsolutions.jts.geom.Geometry;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "newPrecisionModel_", NULL, 0x2, "Lcom.vividsolutions.jts.geom.PrecisionModel;", NULL, NULL,  },
    { "removeCollapsed_", NULL, 0x2, "Z", NULL, NULL,  },
    { "changePrecisionModel_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lcom.vividsolutions.jts.precision.SimpleGeometryPrecisionReducer$PrecisionReducerCoordinateOperation;"};
  static const J2ObjcClassInfo _ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer = { 2, "SimpleGeometryPrecisionReducer", "com.vividsolutions.jts.precision", NULL, 0x1, 5, methods, 3, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer;
}

@end

ComVividsolutionsJtsGeomGeometry *ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_reduceWithComVividsolutionsJtsGeomGeometry_withComVividsolutionsJtsGeomPrecisionModel_(ComVividsolutionsJtsGeomGeometry *g, ComVividsolutionsJtsGeomPrecisionModel *precModel) {
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_initialize();
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *reducer = [new_ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_initWithComVividsolutionsJtsGeomPrecisionModel_(precModel) autorelease];
  return [reducer reduceWithComVividsolutionsJtsGeomGeometry:g];
}

void ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_initWithComVividsolutionsJtsGeomPrecisionModel_(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *self, ComVividsolutionsJtsGeomPrecisionModel *pm) {
  NSObject_init(self);
  self->removeCollapsed_ = YES;
  self->changePrecisionModel_ = NO;
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_set_newPrecisionModel_(self, pm);
}

ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *new_ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_initWithComVividsolutionsJtsGeomPrecisionModel_(ComVividsolutionsJtsGeomPrecisionModel *pm) {
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *self = [ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer alloc];
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_initWithComVividsolutionsJtsGeomPrecisionModel_(self, pm);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer)

@implementation ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation

- (IOSObjectArray *)editWithComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)coordinates
                               withComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)geom {
  if (((IOSObjectArray *) nil_chk(coordinates))->size_ == 0) return nil;
  IOSObjectArray *reducedCoords = [IOSObjectArray arrayWithLength:coordinates->size_ type:ComVividsolutionsJtsGeomCoordinate_class_()];
  for (jint i = 0; i < coordinates->size_; i++) {
    ComVividsolutionsJtsGeomCoordinate *coord = [new_ComVividsolutionsJtsGeomCoordinate_initWithComVividsolutionsJtsGeomCoordinate_(IOSObjectArray_Get(coordinates, i)) autorelease];
    [((ComVividsolutionsJtsGeomPrecisionModel *) nil_chk(this$0_->newPrecisionModel_)) makePreciseWithComVividsolutionsJtsGeomCoordinate:coord];
    IOSObjectArray_Set(reducedCoords, i, coord);
  }
  ComVividsolutionsJtsGeomCoordinateList *noRepeatedCoordList = [new_ComVividsolutionsJtsGeomCoordinateList_initWithComVividsolutionsJtsGeomCoordinateArray_withBoolean_(reducedCoords, NO) autorelease];
  IOSObjectArray *noRepeatedCoords = [noRepeatedCoordList toCoordinateArray];
  jint minLength = 0;
  if ([geom isKindOfClass:[ComVividsolutionsJtsGeomLineString class]]) minLength = 2;
  if ([geom isKindOfClass:[ComVividsolutionsJtsGeomLinearRing class]]) minLength = 4;
  IOSObjectArray *collapsedCoords = reducedCoords;
  if (this$0_->removeCollapsed_) collapsedCoords = nil;
  if (((IOSObjectArray *) nil_chk(noRepeatedCoords))->size_ < minLength) {
    return collapsedCoords;
  }
  return noRepeatedCoords;
}

- (instancetype)initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer:(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *)outer$ {
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation_initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_(self, outer$);
  return self;
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "editWithComVividsolutionsJtsGeomCoordinateArray:withComVividsolutionsJtsGeomGeometry:", "edit", "[Lcom.vividsolutions.jts.geom.Coordinate;", 0x1, NULL, NULL },
    { "initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer:", "init", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lcom.vividsolutions.jts.precision.SimpleGeometryPrecisionReducer;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation = { 2, "PrecisionReducerCoordinateOperation", "com.vividsolutions.jts.precision", "SimpleGeometryPrecisionReducer", 0x2, 2, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation;
}

@end

void ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation_initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation *self, ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *outer$) {
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation_set_this$0_(self, outer$);
  ComVividsolutionsJtsGeomUtilGeometryEditor_CoordinateOperation_init(self);
}

ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation *new_ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation_initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer *outer$) {
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation *self = [ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation alloc];
  ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation_initWithComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComVividsolutionsJtsPrecisionSimpleGeometryPrecisionReducer_PrecisionReducerCoordinateOperation)
