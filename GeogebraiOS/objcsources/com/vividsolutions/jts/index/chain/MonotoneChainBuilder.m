//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/com/vividsolutions/jts/index/chain/MonotoneChainBuilder.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "com/vividsolutions/jts/geom/Coordinate.h"
#include "com/vividsolutions/jts/geomgraph/Quadrant.h"
#include "com/vividsolutions/jts/index/chain/MonotoneChain.h"
#include "com/vividsolutions/jts/index/chain/MonotoneChainBuilder.h"
#include "java/lang/Integer.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"

@interface ComVividsolutionsJtsIndexChainMonotoneChainBuilder ()

+ (jint)findChainEndWithComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)pts
                                                        withInt:(jint)start;

@end

__attribute__((unused)) static jint ComVividsolutionsJtsIndexChainMonotoneChainBuilder_findChainEndWithComVividsolutionsJtsGeomCoordinateArray_withInt_(IOSObjectArray *pts, jint start);

@implementation ComVividsolutionsJtsIndexChainMonotoneChainBuilder

+ (IOSIntArray *)toIntArrayWithJavaUtilList:(id<JavaUtilList>)list {
  return ComVividsolutionsJtsIndexChainMonotoneChainBuilder_toIntArrayWithJavaUtilList_(list);
}

+ (id<JavaUtilList>)getChainsWithComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)pts {
  return ComVividsolutionsJtsIndexChainMonotoneChainBuilder_getChainsWithComVividsolutionsJtsGeomCoordinateArray_(pts);
}

+ (id<JavaUtilList>)getChainsWithComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)pts
                                                                  withId:(id)context {
  return ComVividsolutionsJtsIndexChainMonotoneChainBuilder_getChainsWithComVividsolutionsJtsGeomCoordinateArray_withId_(pts, context);
}

+ (IOSIntArray *)getChainStartIndicesWithComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)pts {
  return ComVividsolutionsJtsIndexChainMonotoneChainBuilder_getChainStartIndicesWithComVividsolutionsJtsGeomCoordinateArray_(pts);
}

+ (jint)findChainEndWithComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)pts
                                                        withInt:(jint)start {
  return ComVividsolutionsJtsIndexChainMonotoneChainBuilder_findChainEndWithComVividsolutionsJtsGeomCoordinateArray_withInt_(pts, start);
}

- (instancetype)init {
  ComVividsolutionsJtsIndexChainMonotoneChainBuilder_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "toIntArrayWithJavaUtilList:", "toIntArray", "[I", 0x9, NULL, NULL },
    { "getChainsWithComVividsolutionsJtsGeomCoordinateArray:", "getChains", "Ljava.util.List;", 0x9, NULL, NULL },
    { "getChainsWithComVividsolutionsJtsGeomCoordinateArray:withId:", "getChains", "Ljava.util.List;", 0x9, NULL, NULL },
    { "getChainStartIndicesWithComVividsolutionsJtsGeomCoordinateArray:", "getChainStartIndices", "[I", 0x9, NULL, NULL },
    { "findChainEndWithComVividsolutionsJtsGeomCoordinateArray:withInt:", "findChainEnd", "I", 0xa, NULL, NULL },
    { "init", "MonotoneChainBuilder", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcClassInfo _ComVividsolutionsJtsIndexChainMonotoneChainBuilder = { 2, "MonotoneChainBuilder", "com.vividsolutions.jts.index.chain", NULL, 0x1, 6, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComVividsolutionsJtsIndexChainMonotoneChainBuilder;
}

@end

IOSIntArray *ComVividsolutionsJtsIndexChainMonotoneChainBuilder_toIntArrayWithJavaUtilList_(id<JavaUtilList> list) {
  ComVividsolutionsJtsIndexChainMonotoneChainBuilder_initialize();
  IOSIntArray *array = [IOSIntArray newArrayWithLength:[((id<JavaUtilList>) nil_chk(list)) size]];
  for (jint i = 0; i < array->size_; i++) {
    *IOSIntArray_GetRef(array, i) = [((JavaLangInteger *) nil_chk(((JavaLangInteger *) check_class_cast([list getWithInt:i], [JavaLangInteger class])))) intValue];
  }
  return array;
}

id<JavaUtilList> ComVividsolutionsJtsIndexChainMonotoneChainBuilder_getChainsWithComVividsolutionsJtsGeomCoordinateArray_(IOSObjectArray *pts) {
  ComVividsolutionsJtsIndexChainMonotoneChainBuilder_initialize();
  return ComVividsolutionsJtsIndexChainMonotoneChainBuilder_getChainsWithComVividsolutionsJtsGeomCoordinateArray_withId_(pts, nil);
}

id<JavaUtilList> ComVividsolutionsJtsIndexChainMonotoneChainBuilder_getChainsWithComVividsolutionsJtsGeomCoordinateArray_withId_(IOSObjectArray *pts, id context) {
  ComVividsolutionsJtsIndexChainMonotoneChainBuilder_initialize();
  id<JavaUtilList> mcList = new_JavaUtilArrayList_init();
  IOSIntArray *startIndex = ComVividsolutionsJtsIndexChainMonotoneChainBuilder_getChainStartIndicesWithComVividsolutionsJtsGeomCoordinateArray_(pts);
  for (jint i = 0; i < ((IOSIntArray *) nil_chk(startIndex))->size_ - 1; i++) {
    ComVividsolutionsJtsIndexChainMonotoneChain *mc = new_ComVividsolutionsJtsIndexChainMonotoneChain_initWithComVividsolutionsJtsGeomCoordinateArray_withInt_withInt_withId_(pts, IOSIntArray_Get(startIndex, i), IOSIntArray_Get(startIndex, i + 1), context);
    [mcList addWithId:mc];
  }
  return mcList;
}

IOSIntArray *ComVividsolutionsJtsIndexChainMonotoneChainBuilder_getChainStartIndicesWithComVividsolutionsJtsGeomCoordinateArray_(IOSObjectArray *pts) {
  ComVividsolutionsJtsIndexChainMonotoneChainBuilder_initialize();
  jint start = 0;
  id<JavaUtilList> startIndexList = new_JavaUtilArrayList_init();
  [startIndexList addWithId:new_JavaLangInteger_initWithInt_(start)];
  do {
    jint last = ComVividsolutionsJtsIndexChainMonotoneChainBuilder_findChainEndWithComVividsolutionsJtsGeomCoordinateArray_withInt_(pts, start);
    [startIndexList addWithId:new_JavaLangInteger_initWithInt_(last)];
    start = last;
  }
  while (start < ((IOSObjectArray *) nil_chk(pts))->size_ - 1);
  IOSIntArray *startIndex = ComVividsolutionsJtsIndexChainMonotoneChainBuilder_toIntArrayWithJavaUtilList_(startIndexList);
  return startIndex;
}

jint ComVividsolutionsJtsIndexChainMonotoneChainBuilder_findChainEndWithComVividsolutionsJtsGeomCoordinateArray_withInt_(IOSObjectArray *pts, jint start) {
  ComVividsolutionsJtsIndexChainMonotoneChainBuilder_initialize();
  jint safeStart = start;
  while (safeStart < ((IOSObjectArray *) nil_chk(pts))->size_ - 1 && [((ComVividsolutionsJtsGeomCoordinate *) nil_chk(IOSObjectArray_Get(pts, safeStart))) equals2DWithComVividsolutionsJtsGeomCoordinate:IOSObjectArray_Get(pts, safeStart + 1)]) {
    safeStart++;
  }
  if (safeStart >= pts->size_ - 1) {
    return pts->size_ - 1;
  }
  jint chainQuad = ComVividsolutionsJtsGeomgraphQuadrant_quadrantWithComVividsolutionsJtsGeomCoordinate_withComVividsolutionsJtsGeomCoordinate_(IOSObjectArray_Get(pts, safeStart), IOSObjectArray_Get(pts, safeStart + 1));
  jint last = start + 1;
  while (last < pts->size_) {
    if (![((ComVividsolutionsJtsGeomCoordinate *) nil_chk(IOSObjectArray_Get(pts, last - 1))) equals2DWithComVividsolutionsJtsGeomCoordinate:IOSObjectArray_Get(pts, last)]) {
      jint quad = ComVividsolutionsJtsGeomgraphQuadrant_quadrantWithComVividsolutionsJtsGeomCoordinate_withComVividsolutionsJtsGeomCoordinate_(IOSObjectArray_Get(pts, last - 1), IOSObjectArray_Get(pts, last));
      if (quad != chainQuad) break;
    }
    last++;
  }
  return last - 1;
}

void ComVividsolutionsJtsIndexChainMonotoneChainBuilder_init(ComVividsolutionsJtsIndexChainMonotoneChainBuilder *self) {
  (void) NSObject_init(self);
}

ComVividsolutionsJtsIndexChainMonotoneChainBuilder *new_ComVividsolutionsJtsIndexChainMonotoneChainBuilder_init() {
  ComVividsolutionsJtsIndexChainMonotoneChainBuilder *self = [ComVividsolutionsJtsIndexChainMonotoneChainBuilder alloc];
  ComVividsolutionsJtsIndexChainMonotoneChainBuilder_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComVividsolutionsJtsIndexChainMonotoneChainBuilder)
