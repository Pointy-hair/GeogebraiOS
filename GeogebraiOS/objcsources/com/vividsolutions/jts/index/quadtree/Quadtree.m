//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/com/vividsolutions/jts/index/quadtree/Quadtree.java
//


#include "J2ObjC_source.h"
#include "com/vividsolutions/jts/geom/Envelope.h"
#include "com/vividsolutions/jts/index/ArrayListVisitor.h"
#include "com/vividsolutions/jts/index/ItemVisitor.h"
#include "com/vividsolutions/jts/index/quadtree/Quadtree.h"
#include "com/vividsolutions/jts/index/quadtree/Root.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"

@interface ComVividsolutionsJtsIndexQuadtreeQuadtree () {
 @public
  ComVividsolutionsJtsIndexQuadtreeRoot *root_;
  jdouble minExtent_;
}

- (void)collectStatsWithComVividsolutionsJtsGeomEnvelope:(ComVividsolutionsJtsGeomEnvelope *)itemEnv;

@end

J2OBJC_FIELD_SETTER(ComVividsolutionsJtsIndexQuadtreeQuadtree, root_, ComVividsolutionsJtsIndexQuadtreeRoot *)

__attribute__((unused)) static void ComVividsolutionsJtsIndexQuadtreeQuadtree_collectStatsWithComVividsolutionsJtsGeomEnvelope_(ComVividsolutionsJtsIndexQuadtreeQuadtree *self, ComVividsolutionsJtsGeomEnvelope *itemEnv);

@implementation ComVividsolutionsJtsIndexQuadtreeQuadtree

+ (ComVividsolutionsJtsGeomEnvelope *)ensureExtentWithComVividsolutionsJtsGeomEnvelope:(ComVividsolutionsJtsGeomEnvelope *)itemEnv
                                                                            withDouble:(jdouble)minExtent {
  return ComVividsolutionsJtsIndexQuadtreeQuadtree_ensureExtentWithComVividsolutionsJtsGeomEnvelope_withDouble_(itemEnv, minExtent);
}

- (instancetype)init {
  ComVividsolutionsJtsIndexQuadtreeQuadtree_init(self);
  return self;
}

- (jint)depth {
  if (root_ != nil) return [root_ depth];
  return 0;
}

- (jint)size {
  if (root_ != nil) return [root_ size];
  return 0;
}

- (void)insertWithComVividsolutionsJtsGeomEnvelope:(ComVividsolutionsJtsGeomEnvelope *)itemEnv
                                            withId:(id)item {
  ComVividsolutionsJtsIndexQuadtreeQuadtree_collectStatsWithComVividsolutionsJtsGeomEnvelope_(self, itemEnv);
  ComVividsolutionsJtsGeomEnvelope *insertEnv = ComVividsolutionsJtsIndexQuadtreeQuadtree_ensureExtentWithComVividsolutionsJtsGeomEnvelope_withDouble_(itemEnv, minExtent_);
  [((ComVividsolutionsJtsIndexQuadtreeRoot *) nil_chk(root_)) insertWithComVividsolutionsJtsGeomEnvelope:insertEnv withId:item];
}

- (jboolean)removeWithComVividsolutionsJtsGeomEnvelope:(ComVividsolutionsJtsGeomEnvelope *)itemEnv
                                                withId:(id)item {
  ComVividsolutionsJtsGeomEnvelope *posEnv = ComVividsolutionsJtsIndexQuadtreeQuadtree_ensureExtentWithComVividsolutionsJtsGeomEnvelope_withDouble_(itemEnv, minExtent_);
  return [((ComVividsolutionsJtsIndexQuadtreeRoot *) nil_chk(root_)) removeWithComVividsolutionsJtsGeomEnvelope:posEnv withId:item];
}

- (id<JavaUtilList>)queryWithComVividsolutionsJtsGeomEnvelope:(ComVividsolutionsJtsGeomEnvelope *)searchEnv {
  ComVividsolutionsJtsIndexArrayListVisitor *visitor = [new_ComVividsolutionsJtsIndexArrayListVisitor_init() autorelease];
  [self queryWithComVividsolutionsJtsGeomEnvelope:searchEnv withComVividsolutionsJtsIndexItemVisitor:visitor];
  return [visitor getItems];
}

- (void)queryWithComVividsolutionsJtsGeomEnvelope:(ComVividsolutionsJtsGeomEnvelope *)searchEnv
         withComVividsolutionsJtsIndexItemVisitor:(id<ComVividsolutionsJtsIndexItemVisitor>)visitor {
  [((ComVividsolutionsJtsIndexQuadtreeRoot *) nil_chk(root_)) visitWithComVividsolutionsJtsGeomEnvelope:searchEnv withComVividsolutionsJtsIndexItemVisitor:visitor];
}

- (id<JavaUtilList>)queryAll {
  id<JavaUtilList> foundItems = [new_JavaUtilArrayList_init() autorelease];
  [((ComVividsolutionsJtsIndexQuadtreeRoot *) nil_chk(root_)) addAllItemsWithJavaUtilList:foundItems];
  return foundItems;
}

- (void)collectStatsWithComVividsolutionsJtsGeomEnvelope:(ComVividsolutionsJtsGeomEnvelope *)itemEnv {
  ComVividsolutionsJtsIndexQuadtreeQuadtree_collectStatsWithComVividsolutionsJtsGeomEnvelope_(self, itemEnv);
}

- (void)dealloc {
  RELEASE_(root_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "ensureExtentWithComVividsolutionsJtsGeomEnvelope:withDouble:", "ensureExtent", "Lcom.vividsolutions.jts.geom.Envelope;", 0x9, NULL, NULL },
    { "init", "Quadtree", NULL, 0x1, NULL, NULL },
    { "depth", NULL, "I", 0x1, NULL, NULL },
    { "size", NULL, "I", 0x1, NULL, NULL },
    { "insertWithComVividsolutionsJtsGeomEnvelope:withId:", "insert", "V", 0x1, NULL, NULL },
    { "removeWithComVividsolutionsJtsGeomEnvelope:withId:", "remove", "Z", 0x1, NULL, NULL },
    { "queryWithComVividsolutionsJtsGeomEnvelope:", "query", "Ljava.util.List;", 0x1, NULL, NULL },
    { "queryWithComVividsolutionsJtsGeomEnvelope:withComVividsolutionsJtsIndexItemVisitor:", "query", "V", 0x1, NULL, NULL },
    { "queryAll", NULL, "Ljava.util.List;", 0x1, NULL, NULL },
    { "collectStatsWithComVividsolutionsJtsGeomEnvelope:", "collectStats", "V", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "root_", NULL, 0x2, "Lcom.vividsolutions.jts.index.quadtree.Root;", NULL, NULL,  },
    { "minExtent_", NULL, 0x2, "D", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _ComVividsolutionsJtsIndexQuadtreeQuadtree = { 2, "Quadtree", "com.vividsolutions.jts.index.quadtree", NULL, 0x1, 10, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComVividsolutionsJtsIndexQuadtreeQuadtree;
}

@end

ComVividsolutionsJtsGeomEnvelope *ComVividsolutionsJtsIndexQuadtreeQuadtree_ensureExtentWithComVividsolutionsJtsGeomEnvelope_withDouble_(ComVividsolutionsJtsGeomEnvelope *itemEnv, jdouble minExtent) {
  ComVividsolutionsJtsIndexQuadtreeQuadtree_initialize();
  jdouble minx = [((ComVividsolutionsJtsGeomEnvelope *) nil_chk(itemEnv)) getMinX];
  jdouble maxx = [itemEnv getMaxX];
  jdouble miny = [itemEnv getMinY];
  jdouble maxy = [itemEnv getMaxY];
  if (minx != maxx && miny != maxy) return itemEnv;
  if (minx == maxx) {
    minx = minx - minExtent / 2.0;
    maxx = minx + minExtent / 2.0;
  }
  if (miny == maxy) {
    miny = miny - minExtent / 2.0;
    maxy = miny + minExtent / 2.0;
  }
  return [new_ComVividsolutionsJtsGeomEnvelope_initWithDouble_withDouble_withDouble_withDouble_(minx, maxx, miny, maxy) autorelease];
}

void ComVividsolutionsJtsIndexQuadtreeQuadtree_init(ComVividsolutionsJtsIndexQuadtreeQuadtree *self) {
  NSObject_init(self);
  self->minExtent_ = 1.0;
  ComVividsolutionsJtsIndexQuadtreeQuadtree_setAndConsume_root_(self, new_ComVividsolutionsJtsIndexQuadtreeRoot_init());
}

ComVividsolutionsJtsIndexQuadtreeQuadtree *new_ComVividsolutionsJtsIndexQuadtreeQuadtree_init() {
  ComVividsolutionsJtsIndexQuadtreeQuadtree *self = [ComVividsolutionsJtsIndexQuadtreeQuadtree alloc];
  ComVividsolutionsJtsIndexQuadtreeQuadtree_init(self);
  return self;
}

void ComVividsolutionsJtsIndexQuadtreeQuadtree_collectStatsWithComVividsolutionsJtsGeomEnvelope_(ComVividsolutionsJtsIndexQuadtreeQuadtree *self, ComVividsolutionsJtsGeomEnvelope *itemEnv) {
  jdouble delX = [((ComVividsolutionsJtsGeomEnvelope *) nil_chk(itemEnv)) getWidth];
  if (delX < self->minExtent_ && delX > 0.0) self->minExtent_ = delX;
  jdouble delY = [itemEnv getHeight];
  if (delY < self->minExtent_ && delY > 0.0) self->minExtent_ = delY;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComVividsolutionsJtsIndexQuadtreeQuadtree)
