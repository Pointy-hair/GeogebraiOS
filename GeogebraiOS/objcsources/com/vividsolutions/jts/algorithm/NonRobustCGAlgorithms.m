//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/com/vividsolutions/jts/algorithm/NonRobustCGAlgorithms.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "com/vividsolutions/jts/algorithm/CGAlgorithms.h"
#include "com/vividsolutions/jts/algorithm/NonRobustCGAlgorithms.h"
#include "com/vividsolutions/jts/geom/Coordinate.h"
#include "java/lang/IllegalArgumentException.h"

@implementation ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms

- (instancetype)init {
  ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_init(self);
  return self;
}

+ (jboolean)isPointInRingWithComVividsolutionsJtsGeomCoordinate:(ComVividsolutionsJtsGeomCoordinate *)p
                    withComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)ring {
  return ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_isPointInRingWithComVividsolutionsJtsGeomCoordinate_withComVividsolutionsJtsGeomCoordinateArray_(p, ring);
}

+ (jboolean)isCCWWithComVividsolutionsJtsGeomCoordinateArray:(IOSObjectArray *)ring {
  return ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_isCCWWithComVividsolutionsJtsGeomCoordinateArray_(ring);
}

+ (jint)computeOrientationWithComVividsolutionsJtsGeomCoordinate:(ComVividsolutionsJtsGeomCoordinate *)p1
                          withComVividsolutionsJtsGeomCoordinate:(ComVividsolutionsJtsGeomCoordinate *)p2
                          withComVividsolutionsJtsGeomCoordinate:(ComVividsolutionsJtsGeomCoordinate *)q {
  return ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_computeOrientationWithComVividsolutionsJtsGeomCoordinate_withComVividsolutionsJtsGeomCoordinate_withComVividsolutionsJtsGeomCoordinate_(p1, p2, q);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "NonRobustCGAlgorithms", NULL, 0x1, NULL, NULL },
    { "isPointInRingWithComVividsolutionsJtsGeomCoordinate:withComVividsolutionsJtsGeomCoordinateArray:", "isPointInRing", "Z", 0x9, NULL, NULL },
    { "isCCWWithComVividsolutionsJtsGeomCoordinateArray:", "isCCW", "Z", 0x9, NULL, NULL },
    { "computeOrientationWithComVividsolutionsJtsGeomCoordinate:withComVividsolutionsJtsGeomCoordinate:withComVividsolutionsJtsGeomCoordinate:", "computeOrientation", "I", 0x9, NULL, NULL },
  };
  static const J2ObjcClassInfo _ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms = { 2, "NonRobustCGAlgorithms", "com.vividsolutions.jts.algorithm", NULL, 0x1, 4, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms;
}

@end

void ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_init(ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms *self) {
  (void) ComVividsolutionsJtsAlgorithmCGAlgorithms_init(self);
}

ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms *new_ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_init() {
  ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms *self = [ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms alloc];
  ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_init(self);
  return self;
}

jboolean ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_isPointInRingWithComVividsolutionsJtsGeomCoordinate_withComVividsolutionsJtsGeomCoordinateArray_(ComVividsolutionsJtsGeomCoordinate *p, IOSObjectArray *ring) {
  ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_initialize();
  jint i, i1;
  jdouble xInt;
  jint crossings = 0;
  jdouble x1, y1, x2, y2;
  jint nPts = ((IOSObjectArray *) nil_chk(ring))->size_;
  for (i = 1; i < nPts; i++) {
    i1 = i - 1;
    ComVividsolutionsJtsGeomCoordinate *p1 = IOSObjectArray_Get(ring, i);
    ComVividsolutionsJtsGeomCoordinate *p2 = IOSObjectArray_Get(ring, i1);
    x1 = ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(p1))->x_ - ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(p))->x_;
    y1 = p1->y_ - p->y_;
    x2 = ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(p2))->x_ - p->x_;
    y2 = p2->y_ - p->y_;
    if (((y1 > 0) && (y2 <= 0)) || ((y2 > 0) && (y1 <= 0))) {
      xInt = (x1 * y2 - x2 * y1) / (y2 - y1);
      if (0.0 < xInt) crossings++;
    }
  }
  if ((crossings % 2) == 1) return YES;
  else return NO;
}

jboolean ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_isCCWWithComVividsolutionsJtsGeomCoordinateArray_(IOSObjectArray *ring) {
  ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_initialize();
  jint nPts = ((IOSObjectArray *) nil_chk(ring))->size_ - 1;
  if (nPts < 4) return NO;
  ComVividsolutionsJtsGeomCoordinate *hip = IOSObjectArray_Get(ring, 0);
  jint hii = 0;
  for (jint i = 1; i <= nPts; i++) {
    ComVividsolutionsJtsGeomCoordinate *p = IOSObjectArray_Get(ring, i);
    if (((ComVividsolutionsJtsGeomCoordinate *) nil_chk(p))->y_ > ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(hip))->y_) {
      hip = p;
      hii = i;
    }
  }
  jint iPrev = hii;
  do {
    iPrev = (iPrev - 1) % nPts;
  }
  while ([((ComVividsolutionsJtsGeomCoordinate *) nil_chk(IOSObjectArray_Get(ring, iPrev))) isEqual:hip] && iPrev != hii);
  jint iNext = hii;
  do {
    iNext = (iNext + 1) % nPts;
  }
  while ([((ComVividsolutionsJtsGeomCoordinate *) nil_chk(IOSObjectArray_Get(ring, iNext))) isEqual:hip] && iNext != hii);
  ComVividsolutionsJtsGeomCoordinate *prev = IOSObjectArray_Get(ring, iPrev);
  ComVividsolutionsJtsGeomCoordinate *next = IOSObjectArray_Get(ring, iNext);
  if ([((ComVividsolutionsJtsGeomCoordinate *) nil_chk(prev)) isEqual:hip] || [((ComVividsolutionsJtsGeomCoordinate *) nil_chk(next)) isEqual:hip] || [prev isEqual:next]) @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"degenerate ring (does not contain 3 different points)");
  jdouble prev2x = prev->x_ - ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(hip))->x_;
  jdouble prev2y = prev->y_ - hip->y_;
  jdouble next2x = ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(next))->x_ - hip->x_;
  jdouble next2y = next->y_ - hip->y_;
  jdouble disc = next2x * prev2y - next2y * prev2x;
  if (disc == 0.0) {
    return (prev->x_ > next->x_);
  }
  else {
    return (disc > 0.0);
  }
}

jint ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_computeOrientationWithComVividsolutionsJtsGeomCoordinate_withComVividsolutionsJtsGeomCoordinate_withComVividsolutionsJtsGeomCoordinate_(ComVividsolutionsJtsGeomCoordinate *p1, ComVividsolutionsJtsGeomCoordinate *p2, ComVividsolutionsJtsGeomCoordinate *q) {
  ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms_initialize();
  jdouble dx1 = ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(p2))->x_ - ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(p1))->x_;
  jdouble dy1 = p2->y_ - p1->y_;
  jdouble dx2 = ((ComVividsolutionsJtsGeomCoordinate *) nil_chk(q))->x_ - p2->x_;
  jdouble dy2 = q->y_ - p2->y_;
  jdouble det = dx1 * dy2 - dx2 * dy1;
  if (det > 0.0) return 1;
  if (det < 0.0) return -1;
  return 0;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComVividsolutionsJtsAlgorithmNonRobustCGAlgorithms)
