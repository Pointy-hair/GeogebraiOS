//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/com/vividsolutions/jts/algorithm/InteriorPointArea.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "com/vividsolutions/jts/algorithm/InteriorPointArea.h"
#include "com/vividsolutions/jts/geom/Coordinate.h"
#include "com/vividsolutions/jts/geom/Envelope.h"
#include "com/vividsolutions/jts/geom/Geometry.h"
#include "com/vividsolutions/jts/geom/GeometryCollection.h"
#include "com/vividsolutions/jts/geom/GeometryFactory.h"
#include "com/vividsolutions/jts/geom/LineString.h"
#include "com/vividsolutions/jts/geom/Polygon.h"

@interface ComVividsolutionsJtsAlgorithmInteriorPointArea () {
 @public
  ComVividsolutionsJtsGeomGeometryFactory *factory_;
  ComVividsolutionsJtsGeomCoordinate *interiorPoint_;
  jdouble maxWidth_;
}

+ (jdouble)avgWithDouble:(jdouble)a
              withDouble:(jdouble)b;

- (void)addWithComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)geom;

- (ComVividsolutionsJtsGeomGeometry *)widestGeometryWithComVividsolutionsJtsGeomGeometryCollection:(ComVividsolutionsJtsGeomGeometryCollection *)gc;

@end

J2OBJC_FIELD_SETTER(ComVividsolutionsJtsAlgorithmInteriorPointArea, factory_, ComVividsolutionsJtsGeomGeometryFactory *)
J2OBJC_FIELD_SETTER(ComVividsolutionsJtsAlgorithmInteriorPointArea, interiorPoint_, ComVividsolutionsJtsGeomCoordinate *)

__attribute__((unused)) static jdouble ComVividsolutionsJtsAlgorithmInteriorPointArea_avgWithDouble_withDouble_(jdouble a, jdouble b);

__attribute__((unused)) static void ComVividsolutionsJtsAlgorithmInteriorPointArea_addWithComVividsolutionsJtsGeomGeometry_(ComVividsolutionsJtsAlgorithmInteriorPointArea *self, ComVividsolutionsJtsGeomGeometry *geom);

__attribute__((unused)) static ComVividsolutionsJtsGeomGeometry *ComVividsolutionsJtsAlgorithmInteriorPointArea_widestGeometryWithComVividsolutionsJtsGeomGeometryCollection_(ComVividsolutionsJtsAlgorithmInteriorPointArea *self, ComVividsolutionsJtsGeomGeometryCollection *gc);

@implementation ComVividsolutionsJtsAlgorithmInteriorPointArea

+ (jdouble)avgWithDouble:(jdouble)a
              withDouble:(jdouble)b {
  return ComVividsolutionsJtsAlgorithmInteriorPointArea_avgWithDouble_withDouble_(a, b);
}

- (instancetype)initWithComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)g {
  ComVividsolutionsJtsAlgorithmInteriorPointArea_initWithComVividsolutionsJtsGeomGeometry_(self, g);
  return self;
}

- (ComVividsolutionsJtsGeomCoordinate *)getInteriorPoint {
  return interiorPoint_;
}

- (void)addWithComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)geom {
  ComVividsolutionsJtsAlgorithmInteriorPointArea_addWithComVividsolutionsJtsGeomGeometry_(self, geom);
}

- (void)addPolygonWithComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)geometry {
  ComVividsolutionsJtsGeomLineString *bisector = [self horizontalBisectorWithComVividsolutionsJtsGeomGeometry:geometry];
  ComVividsolutionsJtsGeomGeometry *intersections = [((ComVividsolutionsJtsGeomLineString *) nil_chk(bisector)) intersectionWithComVividsolutionsJtsGeomGeometry:geometry];
  ComVividsolutionsJtsGeomGeometry *widestIntersection = [self widestGeometryWithComVividsolutionsJtsGeomGeometry:intersections];
  jdouble width = [((ComVividsolutionsJtsGeomEnvelope *) nil_chk([((ComVividsolutionsJtsGeomGeometry *) nil_chk(widestIntersection)) getEnvelopeInternal])) getWidth];
  if (interiorPoint_ == nil || width > maxWidth_) {
    interiorPoint_ = [self centreWithComVividsolutionsJtsGeomEnvelope:[widestIntersection getEnvelopeInternal]];
    maxWidth_ = width;
  }
}

- (ComVividsolutionsJtsGeomGeometry *)widestGeometryWithComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)geometry {
  if (!([geometry isKindOfClass:[ComVividsolutionsJtsGeomGeometryCollection class]])) {
    return geometry;
  }
  return ComVividsolutionsJtsAlgorithmInteriorPointArea_widestGeometryWithComVividsolutionsJtsGeomGeometryCollection_(self, (ComVividsolutionsJtsGeomGeometryCollection *) check_class_cast(geometry, [ComVividsolutionsJtsGeomGeometryCollection class]));
}

- (ComVividsolutionsJtsGeomGeometry *)widestGeometryWithComVividsolutionsJtsGeomGeometryCollection:(ComVividsolutionsJtsGeomGeometryCollection *)gc {
  return ComVividsolutionsJtsAlgorithmInteriorPointArea_widestGeometryWithComVividsolutionsJtsGeomGeometryCollection_(self, gc);
}

- (ComVividsolutionsJtsGeomLineString *)horizontalBisectorWithComVividsolutionsJtsGeomGeometry:(ComVividsolutionsJtsGeomGeometry *)geometry {
  ComVividsolutionsJtsGeomEnvelope *envelope = [((ComVividsolutionsJtsGeomGeometry *) nil_chk(geometry)) getEnvelopeInternal];
  jdouble avgY = ComVividsolutionsJtsAlgorithmInteriorPointArea_avgWithDouble_withDouble_([((ComVividsolutionsJtsGeomEnvelope *) nil_chk(envelope)) getMinY], [envelope getMaxY]);
  return [((ComVividsolutionsJtsGeomGeometryFactory *) nil_chk(factory_)) createLineStringWithComVividsolutionsJtsGeomCoordinateArray:[IOSObjectArray newArrayWithObjects:(id[]){ new_ComVividsolutionsJtsGeomCoordinate_initWithDouble_withDouble_([envelope getMinX], avgY), new_ComVividsolutionsJtsGeomCoordinate_initWithDouble_withDouble_([envelope getMaxX], avgY) } count:2 type:ComVividsolutionsJtsGeomCoordinate_class_()]];
}

- (ComVividsolutionsJtsGeomCoordinate *)centreWithComVividsolutionsJtsGeomEnvelope:(ComVividsolutionsJtsGeomEnvelope *)envelope {
  return new_ComVividsolutionsJtsGeomCoordinate_initWithDouble_withDouble_(ComVividsolutionsJtsAlgorithmInteriorPointArea_avgWithDouble_withDouble_([((ComVividsolutionsJtsGeomEnvelope *) nil_chk(envelope)) getMinX], [envelope getMaxX]), ComVividsolutionsJtsAlgorithmInteriorPointArea_avgWithDouble_withDouble_([envelope getMinY], [envelope getMaxY]));
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "avgWithDouble:withDouble:", "avg", "D", 0xa, NULL, NULL },
    { "initWithComVividsolutionsJtsGeomGeometry:", "InteriorPointArea", NULL, 0x1, NULL, NULL },
    { "getInteriorPoint", NULL, "Lcom.vividsolutions.jts.geom.Coordinate;", 0x1, NULL, NULL },
    { "addWithComVividsolutionsJtsGeomGeometry:", "add", "V", 0x2, NULL, NULL },
    { "addPolygonWithComVividsolutionsJtsGeomGeometry:", "addPolygon", "V", 0x1, NULL, NULL },
    { "widestGeometryWithComVividsolutionsJtsGeomGeometry:", "widestGeometry", "Lcom.vividsolutions.jts.geom.Geometry;", 0x4, NULL, NULL },
    { "widestGeometryWithComVividsolutionsJtsGeomGeometryCollection:", "widestGeometry", "Lcom.vividsolutions.jts.geom.Geometry;", 0x2, NULL, NULL },
    { "horizontalBisectorWithComVividsolutionsJtsGeomGeometry:", "horizontalBisector", "Lcom.vividsolutions.jts.geom.LineString;", 0x4, NULL, NULL },
    { "centreWithComVividsolutionsJtsGeomEnvelope:", "centre", "Lcom.vividsolutions.jts.geom.Coordinate;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "factory_", NULL, 0x2, "Lcom.vividsolutions.jts.geom.GeometryFactory;", NULL, NULL,  },
    { "interiorPoint_", NULL, 0x2, "Lcom.vividsolutions.jts.geom.Coordinate;", NULL, NULL,  },
    { "maxWidth_", NULL, 0x2, "D", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _ComVividsolutionsJtsAlgorithmInteriorPointArea = { 2, "InteriorPointArea", "com.vividsolutions.jts.algorithm", NULL, 0x1, 9, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComVividsolutionsJtsAlgorithmInteriorPointArea;
}

@end

jdouble ComVividsolutionsJtsAlgorithmInteriorPointArea_avgWithDouble_withDouble_(jdouble a, jdouble b) {
  ComVividsolutionsJtsAlgorithmInteriorPointArea_initialize();
  return (a + b) / 2.0;
}

void ComVividsolutionsJtsAlgorithmInteriorPointArea_initWithComVividsolutionsJtsGeomGeometry_(ComVividsolutionsJtsAlgorithmInteriorPointArea *self, ComVividsolutionsJtsGeomGeometry *g) {
  (void) NSObject_init(self);
  self->interiorPoint_ = nil;
  self->maxWidth_ = 0.0;
  self->factory_ = [((ComVividsolutionsJtsGeomGeometry *) nil_chk(g)) getFactory];
  ComVividsolutionsJtsAlgorithmInteriorPointArea_addWithComVividsolutionsJtsGeomGeometry_(self, g);
}

ComVividsolutionsJtsAlgorithmInteriorPointArea *new_ComVividsolutionsJtsAlgorithmInteriorPointArea_initWithComVividsolutionsJtsGeomGeometry_(ComVividsolutionsJtsGeomGeometry *g) {
  ComVividsolutionsJtsAlgorithmInteriorPointArea *self = [ComVividsolutionsJtsAlgorithmInteriorPointArea alloc];
  ComVividsolutionsJtsAlgorithmInteriorPointArea_initWithComVividsolutionsJtsGeomGeometry_(self, g);
  return self;
}

void ComVividsolutionsJtsAlgorithmInteriorPointArea_addWithComVividsolutionsJtsGeomGeometry_(ComVividsolutionsJtsAlgorithmInteriorPointArea *self, ComVividsolutionsJtsGeomGeometry *geom) {
  if ([geom isKindOfClass:[ComVividsolutionsJtsGeomPolygon class]]) {
    [self addPolygonWithComVividsolutionsJtsGeomGeometry:geom];
  }
  else if ([geom isKindOfClass:[ComVividsolutionsJtsGeomGeometryCollection class]]) {
    ComVividsolutionsJtsGeomGeometryCollection *gc = (ComVividsolutionsJtsGeomGeometryCollection *) check_class_cast(geom, [ComVividsolutionsJtsGeomGeometryCollection class]);
    for (jint i = 0; i < [((ComVividsolutionsJtsGeomGeometryCollection *) nil_chk(gc)) getNumGeometries]; i++) {
      ComVividsolutionsJtsAlgorithmInteriorPointArea_addWithComVividsolutionsJtsGeomGeometry_(self, [gc getGeometryNWithInt:i]);
    }
  }
}

ComVividsolutionsJtsGeomGeometry *ComVividsolutionsJtsAlgorithmInteriorPointArea_widestGeometryWithComVividsolutionsJtsGeomGeometryCollection_(ComVividsolutionsJtsAlgorithmInteriorPointArea *self, ComVividsolutionsJtsGeomGeometryCollection *gc) {
  if ([((ComVividsolutionsJtsGeomGeometryCollection *) nil_chk(gc)) isEmpty]) {
    return gc;
  }
  ComVividsolutionsJtsGeomGeometry *widestGeometry = [gc getGeometryNWithInt:0];
  for (jint i = 1; i < [gc getNumGeometries]; i++) {
    if ([((ComVividsolutionsJtsGeomEnvelope *) nil_chk([((ComVividsolutionsJtsGeomGeometry *) nil_chk([gc getGeometryNWithInt:i])) getEnvelopeInternal])) getWidth] > [((ComVividsolutionsJtsGeomEnvelope *) nil_chk([((ComVividsolutionsJtsGeomGeometry *) nil_chk(widestGeometry)) getEnvelopeInternal])) getWidth]) {
      widestGeometry = [gc getGeometryNWithInt:i];
    }
  }
  return widestGeometry;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComVividsolutionsJtsAlgorithmInteriorPointArea)
