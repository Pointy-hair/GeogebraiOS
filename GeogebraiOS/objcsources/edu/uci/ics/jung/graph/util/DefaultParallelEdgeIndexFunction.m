//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/edu/uci/ics/jung/graph/util/DefaultParallelEdgeIndexFunction.java
//


#include "J2ObjC_source.h"
#include "edu/uci/ics/jung/graph/Graph.h"
#include "edu/uci/ics/jung/graph/util/Context.h"
#include "edu/uci/ics/jung/graph/util/DefaultParallelEdgeIndexFunction.h"
#include "edu/uci/ics/jung/graph/util/Pair.h"
#include "java/lang/Integer.h"
#include "java/util/Collection.h"
#include "java/util/HashMap.h"
#include "java/util/HashSet.h"
#include "java/util/Iterator.h"
#include "java/util/Map.h"

@interface EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction ()

- (instancetype)init;

@end

__attribute__((unused)) static void EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_init(EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction *self);

__attribute__((unused)) static EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction *new_EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_init() NS_RETURNS_RETAINED;

@implementation EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction

- (instancetype)init {
  EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_init(self);
  return self;
}

+ (EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction *)getInstance {
  return EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_getInstance();
}

- (jint)getIndexWithEduUciIcsJungGraphGraph:(id<EduUciIcsJungGraphGraph>)graph
                                     withId:(id)e {
  JavaLangInteger *index = [((id<JavaUtilMap>) nil_chk(edge_index_)) getWithId:EduUciIcsJungGraphUtilContext_getInstanceWithId_withId_(graph, e)];
  if (index == nil) {
    EduUciIcsJungGraphUtilPair *endpoints = [((id<EduUciIcsJungGraphGraph>) nil_chk(graph)) getEndpointsWithId:e];
    id u = [((EduUciIcsJungGraphUtilPair *) nil_chk(endpoints)) getFirst];
    id v = [endpoints getSecond];
    if ([nil_chk(u) isEqual:v]) {
      index = JavaLangInteger_valueOfWithInt_([self getIndexWithEduUciIcsJungGraphGraph:graph withId:e withId:v]);
    }
    else {
      index = JavaLangInteger_valueOfWithInt_([self getIndexWithEduUciIcsJungGraphGraph:graph withId:e withId:u withId:v]);
    }
  }
  return [((JavaLangInteger *) nil_chk(index)) intValue];
}

- (jint)getIndexWithEduUciIcsJungGraphGraph:(id<EduUciIcsJungGraphGraph>)graph
                                     withId:(id)e
                                     withId:(id)v
                                     withId:(id)u {
  id<JavaUtilCollection> commonEdgeSet = new_JavaUtilHashSet_initWithJavaUtilCollection_([((id<EduUciIcsJungGraphGraph>) nil_chk(graph)) getIncidentEdgesWithId:u]);
  [commonEdgeSet retainAllWithJavaUtilCollection:[graph getIncidentEdgesWithId:v]];
  for (id<JavaUtilIterator> iterator = [commonEdgeSet iterator]; [((id<JavaUtilIterator>) nil_chk(iterator)) hasNext]; ) {
    id edge = [iterator next];
    EduUciIcsJungGraphUtilPair *ep = [graph getEndpointsWithId:edge];
    id first = [((EduUciIcsJungGraphUtilPair *) nil_chk(ep)) getFirst];
    id second = [ep getSecond];
    if ([nil_chk(first) isEqual:second] == YES) {
      [iterator remove];
    }
    if ([first isEqual:v] == NO) {
      [iterator remove];
    }
  }
  jint count = 0;
  for (id __strong other in commonEdgeSet) {
    if ([nil_chk(e) isEqual:other] == NO) {
      (void) [((id<JavaUtilMap>) nil_chk(edge_index_)) putWithId:EduUciIcsJungGraphUtilContext_getInstanceWithId_withId_(graph, other) withId:JavaLangInteger_valueOfWithInt_(count)];
      count++;
    }
  }
  (void) [((id<JavaUtilMap>) nil_chk(edge_index_)) putWithId:EduUciIcsJungGraphUtilContext_getInstanceWithId_withId_(graph, e) withId:JavaLangInteger_valueOfWithInt_(count)];
  return count;
}

- (jint)getIndexWithEduUciIcsJungGraphGraph:(id<EduUciIcsJungGraphGraph>)graph
                                     withId:(id)e
                                     withId:(id)v {
  id<JavaUtilCollection> commonEdgeSet = new_JavaUtilHashSet_init();
  for (id __strong another in nil_chk([((id<EduUciIcsJungGraphGraph>) nil_chk(graph)) getIncidentEdgesWithId:v])) {
    id u = [graph getOppositeWithId:v withId:another];
    if ([nil_chk(u) isEqual:v]) {
      [commonEdgeSet addWithId:another];
    }
  }
  jint count = 0;
  for (id __strong other in commonEdgeSet) {
    if ([nil_chk(e) isEqual:other] == NO) {
      (void) [((id<JavaUtilMap>) nil_chk(edge_index_)) putWithId:EduUciIcsJungGraphUtilContext_getInstanceWithId_withId_(graph, other) withId:JavaLangInteger_valueOfWithInt_(count)];
      count++;
    }
  }
  (void) [((id<JavaUtilMap>) nil_chk(edge_index_)) putWithId:EduUciIcsJungGraphUtilContext_getInstanceWithId_withId_(graph, e) withId:JavaLangInteger_valueOfWithInt_(count)];
  return count;
}

- (void)resetWithEduUciIcsJungGraphGraph:(id<EduUciIcsJungGraphGraph>)graph
                                  withId:(id)e {
  EduUciIcsJungGraphUtilPair *endpoints = [((id<EduUciIcsJungGraphGraph>) nil_chk(graph)) getEndpointsWithId:e];
  [self getIndexWithEduUciIcsJungGraphGraph:graph withId:e withId:[((EduUciIcsJungGraphUtilPair *) nil_chk(endpoints)) getFirst]];
  [self getIndexWithEduUciIcsJungGraphGraph:graph withId:e withId:[endpoints getFirst] withId:[endpoints getSecond]];
}

- (void)reset {
  [((id<JavaUtilMap>) nil_chk(edge_index_)) clear];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "DefaultParallelEdgeIndexFunction", NULL, 0x2, NULL, NULL },
    { "getInstance", NULL, "Ledu.uci.ics.jung.graph.util.DefaultParallelEdgeIndexFunction;", 0x9, NULL, "<V:Ljava/lang/Object;E:Ljava/lang/Object;>()Ledu/uci/ics/jung/graph/util/DefaultParallelEdgeIndexFunction<TV;TE;>;" },
    { "getIndexWithEduUciIcsJungGraphGraph:withId:", "getIndex", "I", 0x1, NULL, "(Ledu/uci/ics/jung/graph/Graph<TV;TE;>;TE;)I" },
    { "getIndexWithEduUciIcsJungGraphGraph:withId:withId:withId:", "getIndex", "I", 0x4, NULL, "(Ledu/uci/ics/jung/graph/Graph<TV;TE;>;TE;TV;TV;)I" },
    { "getIndexWithEduUciIcsJungGraphGraph:withId:withId:", "getIndex", "I", 0x4, NULL, "(Ledu/uci/ics/jung/graph/Graph<TV;TE;>;TE;TV;)I" },
    { "resetWithEduUciIcsJungGraphGraph:withId:", "reset", "V", 0x1, NULL, "(Ledu/uci/ics/jung/graph/Graph<TV;TE;>;TE;)V" },
    { "reset", NULL, "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "edge_index_", NULL, 0x4, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ledu/uci/ics/jung/graph/util/Context<Ledu/uci/ics/jung/graph/Graph<TV;TE;>;TE;>;Ljava/lang/Integer;>;",  },
  };
  static const J2ObjcClassInfo _EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction = { 2, "DefaultParallelEdgeIndexFunction", "edu.uci.ics.jung.graph.util", NULL, 0x1, 7, methods, 1, fields, 0, NULL, 0, NULL, NULL, "<V:Ljava/lang/Object;E:Ljava/lang/Object;>Ljava/lang/Object;Ledu/uci/ics/jung/graph/util/EdgeIndexFunction<TV;TE;>;" };
  return &_EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction;
}

@end

void EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_init(EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction *self) {
  (void) NSObject_init(self);
  self->edge_index_ = new_JavaUtilHashMap_init();
}

EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction *new_EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_init() {
  EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction *self = [EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction alloc];
  EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_init(self);
  return self;
}

EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction *EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_getInstance() {
  EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_initialize();
  return new_EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(EduUciIcsJungGraphUtilDefaultParallelEdgeIndexFunction)
