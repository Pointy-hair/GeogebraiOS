//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/geogebra/common/euclidian/EuclidianPen.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Double.h"
#include "java/lang/Exception.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuffer.h"
#include "java/lang/Throwable.h"
#include "java/util/ArrayList.h"
#include "java/util/Iterator.h"
#include "org/apache/commons/math/linear/Array2DRowRealMatrix.h"
#include "org/apache/commons/math/linear/RealMatrix.h"
#include "org/apache/commons/math/linear/RealVector.h"
#include "org/apache/commons/math/linear/SingularValueDecomposition.h"
#include "org/apache/commons/math/linear/SingularValueDecompositionImpl.h"
#include "org/geogebra/common/awt/GBasicStroke.h"
#include "org/geogebra/common/awt/GColor.h"
#include "org/geogebra/common/awt/GGraphics2D.h"
#include "org/geogebra/common/awt/GLine2D.h"
#include "org/geogebra/common/awt/GPoint.h"
#include "org/geogebra/common/euclidian/EuclidianConstants.h"
#include "org/geogebra/common/euclidian/EuclidianController.h"
#include "org/geogebra/common/euclidian/EuclidianPen.h"
#include "org/geogebra/common/euclidian/EuclidianView.h"
#include "org/geogebra/common/euclidian/EuclidianViewInterfaceCommon.h"
#include "org/geogebra/common/euclidian/Hits.h"
#include "org/geogebra/common/euclidian/event/AbstractEvent.h"
#include "org/geogebra/common/euclidian/modes/ModeDelete.h"
#include "org/geogebra/common/factories/AwtFactory.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/StringTemplate.h"
#include "org/geogebra/common/kernel/algos/AlgoAttachCopyToView.h"
#include "org/geogebra/common/kernel/algos/AlgoCircleThreePoints.h"
#include "org/geogebra/common/kernel/algos/AlgoDispatcher.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/algos/AlgoFocus.h"
#include "org/geogebra/common/kernel/algos/AlgoFunctionFreehand.h"
#include "org/geogebra/common/kernel/algos/AlgoJoinPointsSegment.h"
#include "org/geogebra/common/kernel/algos/AlgoPolyLine.h"
#include "org/geogebra/common/kernel/algos/AlgoPolygon.h"
#include "org/geogebra/common/kernel/arithmetic/MyDouble.h"
#include "org/geogebra/common/kernel/commands/AlgebraProcessor.h"
#include "org/geogebra/common/kernel/geos/GeoConic.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoList.h"
#include "org/geogebra/common/kernel/geos/GeoNumeric.h"
#include "org/geogebra/common/kernel/geos/GeoPoint.h"
#include "org/geogebra/common/kernel/geos/GeoPolyLine.h"
#include "org/geogebra/common/kernel/kernelND/GeoConicND.h"
#include "org/geogebra/common/kernel/kernelND/GeoPointND.h"
#include "org/geogebra/common/kernel/statistics/AlgoFitImplicit.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/main/SelectionManager.h"
#include "org/geogebra/common/plugin/EuclidianStyleConstants.h"

@class OrgGeogebraCommonEuclidianEuclidianPen_Inertia;
@class OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment;

#define OrgGeogebraCommonEuclidianEuclidianPen_PEN_SIZE_FACTOR 2
#define OrgGeogebraCommonEuclidianEuclidianPen_CONIC_AXIS_ERROR_RATIO 10.0

@interface OrgGeogebraCommonEuclidianEuclidianPen () {
 @public
  OrgGeogebraCommonKernelAlgosAlgoElement *lastAlgo_;
  JavaUtilArrayList *temp_;
  jint minX_, maxX_;
  jdouble score_;
  jdouble ARROW_MAXSIZE_;
  jdouble ARROW_ANGLE_MIN_;
  jdouble ARROW_ANGLE_MAX_;
  jdouble ARROW_ASYMMETRY_MAX_ANGLE_;
  jdouble ARROW_ASYMMETRY_MAX_LINEAR_;
  jdouble ARROW_TIP_LINEAR_TOLERANCE_;
  jdouble ARROW_SIDEWAYS_GAP_TOLERANCE_;
  jdouble ARROW_MAIN_LINEAR_GAP_MIN_;
  jdouble ARROW_MAIN_LINEAR_GAP_MAX_;
  IOSIntArray *brk_;
  jint count_;
  jint recognizer_queue_length_;
  jint MAX_POLYGON_SIDES_;
  jdouble LINE_MAX_DET_;
  jdouble SLANT_TOLERANCE_;
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *a_;
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *b_;
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *c_;
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *d_;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *reco_queue_a_;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *reco_queue_b_;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *reco_queue_c_;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *reco_queue_d_;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *reco_queue_e_;
  jint gridSize_;
  OrgGeogebraCommonAwtGPoint *startPoint_;
  JavaLangStringBuffer *gesture_;
  jint deltaX_;
  jint deltaY_;
  jint absDeltaX_;
  jint absDeltaY_;
  jfloat absTangent_;
  jboolean startNewStroke_;
  jint penSize_;
  jint eraserSize_;
  jint penLineStyle_;
  OrgGeogebraCommonAwtGColor *penColor_;
  jboolean freehand_;
  jboolean absoluteScreenPosition_;
}

- (void)drawPenPreviewLineWithOrgGeogebraCommonAwtGGraphics2D:(id<OrgGeogebraCommonAwtGGraphics2D>)g2D
                               withOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)point1
                               withOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)point2;

- (void)addPointsToPolyLineWithJavaUtilArrayList:(JavaUtilArrayList *)penPoints2;

+ (OrgGeogebraCommonKernelAlgosAlgoPolyLine *)getAlgoPolylineWithOrgGeogebraCommonKernelAlgosAlgoElement:(OrgGeogebraCommonKernelAlgosAlgoElement *)al;

- (void)mouseReleasedFreehandWithInt:(jint)x
                             withInt:(jint)y;

- (jint)findPolygonalWithInt:(jint)start
                     withInt:(jint)end
                     withInt:(jint)n
                     withInt:(jint)offset1
                     withInt:(jint)offset2;

- (void)calc_inertiaWithInt:(jint)start
                    withInt:(jint)end
withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

+ (jdouble)I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

+ (jdouble)I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

+ (jdouble)I_xyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

+ (jdouble)I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

- (jdouble)score_circleWithInt:(jint)start
                       withInt:(jint)end
withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

+ (jdouble)center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

+ (jdouble)center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

+ (jdouble)I_radWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s;

- (OrgGeogebraCommonKernelGeosGeoConic *)makeACircleWithDouble:(jdouble)x
                                                    withDouble:(jdouble)y
                                                    withDouble:(jdouble)r;

- (OrgGeogebraCommonKernelGeosGeoConic *)makeAConic;

+ (jint)getDeltaXWithOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)startPoint2
                 withOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)point;

+ (jint)getDeltaYWithOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)startPoint2
                 withOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)point;

- (void)saveMoveWithNSString:(NSString *)move;

- (NSString *)getGesture;

- (void)clearTemporaryInfo;

- (void)optimize_polygonalWithInt:(jint)nsides;

- (void)incr_inertiaWithInt:(jint)start
withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s
                    withInt:(jint)coeff;

- (void)get_segment_geometryWithInt:(jint)begin
                            withInt:(jint)end
withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s
withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)r;

- (OrgGeogebraCommonKernelGeosGeoElement *)try_rectangle;

- (OrgGeogebraCommonKernelGeosGeoElement *)try_arrow;

- (OrgGeogebraCommonKernelGeosGeoElement *)try_closed_polygonWithInt:(jint)nsides;

+ (void)calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)r1
                       withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)r2
                                                              withDoubleArray:(IOSDoubleArray *)pt;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, lastAlgo_, OrgGeogebraCommonKernelAlgosAlgoElement *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, temp_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, brk_, IOSIntArray *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, a_, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, b_, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, c_, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, d_, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, reco_queue_a_, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, reco_queue_b_, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, reco_queue_c_, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, reco_queue_d_, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, reco_queue_e_, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, startPoint_, OrgGeogebraCommonAwtGPoint *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, gesture_, JavaLangStringBuffer *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen, penColor_, OrgGeogebraCommonAwtGColor *)

static NSString *OrgGeogebraCommonEuclidianEuclidianPen_LEFT_UP_ = @"Q";
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, LEFT_UP_, NSString *)

static NSString *OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_UP_ = @"W";
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, RIGHT_UP_, NSString *)

static NSString *OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_DOWN_ = @"E";
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, RIGHT_DOWN_, NSString *)

static NSString *OrgGeogebraCommonEuclidianEuclidianPen_LEFT_DOWN_ = @"T";
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, LEFT_DOWN_, NSString *)

static NSString *OrgGeogebraCommonEuclidianEuclidianPen_LEFT_MOVE_ = @"L";
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, LEFT_MOVE_, NSString *)

static NSString *OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_MOVE_ = @"R";
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, RIGHT_MOVE_, NSString *)

static NSString *OrgGeogebraCommonEuclidianEuclidianPen_UP_MOVE_ = @"U";
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, UP_MOVE_, NSString *)

static NSString *OrgGeogebraCommonEuclidianEuclidianPen_DOWN_MOVE_ = @"D";
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, DOWN_MOVE_, NSString *)

J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, PEN_SIZE_FACTOR, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonEuclidianEuclidianPen, CONIC_AXIS_ERROR_RATIO, jdouble)

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_drawPenPreviewLineWithOrgGeogebraCommonAwtGGraphics2D_withOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(OrgGeogebraCommonEuclidianEuclidianPen *self, id<OrgGeogebraCommonAwtGGraphics2D> g2D, OrgGeogebraCommonAwtGPoint *point1, OrgGeogebraCommonAwtGPoint *point2);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_addPointsToPolyLineWithJavaUtilArrayList_(OrgGeogebraCommonEuclidianEuclidianPen *self, JavaUtilArrayList *penPoints2);

__attribute__((unused)) static OrgGeogebraCommonKernelAlgosAlgoPolyLine *OrgGeogebraCommonEuclidianEuclidianPen_getAlgoPolylineWithOrgGeogebraCommonKernelAlgosAlgoElement_(OrgGeogebraCommonKernelAlgosAlgoElement *al);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_mouseReleasedFreehandWithInt_withInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint x, jint y);

__attribute__((unused)) static jint OrgGeogebraCommonEuclidianEuclidianPen_findPolygonalWithInt_withInt_withInt_withInt_withInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint start, jint end, jint n, jint offset1, jint offset2);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_calc_inertiaWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint start, jint end, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_xyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static jdouble OrgGeogebraCommonEuclidianEuclidianPen_score_circleWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint start, jint end, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static jdouble OrgGeogebraCommonEuclidianEuclidianPen_center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static jdouble OrgGeogebraCommonEuclidianEuclidianPen_center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_radWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s);

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoConic *OrgGeogebraCommonEuclidianEuclidianPen_makeACircleWithDouble_withDouble_withDouble_(OrgGeogebraCommonEuclidianEuclidianPen *self, jdouble x, jdouble y, jdouble r);

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoConic *OrgGeogebraCommonEuclidianEuclidianPen_makeAConic(OrgGeogebraCommonEuclidianEuclidianPen *self);

__attribute__((unused)) static jint OrgGeogebraCommonEuclidianEuclidianPen_getDeltaXWithOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(OrgGeogebraCommonAwtGPoint *startPoint2, OrgGeogebraCommonAwtGPoint *point);

__attribute__((unused)) static jint OrgGeogebraCommonEuclidianEuclidianPen_getDeltaYWithOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(OrgGeogebraCommonAwtGPoint *startPoint2, OrgGeogebraCommonAwtGPoint *point);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(OrgGeogebraCommonEuclidianEuclidianPen *self, NSString *move);

__attribute__((unused)) static NSString *OrgGeogebraCommonEuclidianEuclidianPen_getGesture(OrgGeogebraCommonEuclidianEuclidianPen *self);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_clearTemporaryInfo(OrgGeogebraCommonEuclidianEuclidianPen *self);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_optimize_polygonalWithInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint nsides);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint start, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s, jint coeff);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_get_segment_geometryWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint begin, jint end, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r);

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonEuclidianEuclidianPen_try_rectangle(OrgGeogebraCommonEuclidianEuclidianPen *self);

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonEuclidianEuclidianPen_try_arrow(OrgGeogebraCommonEuclidianEuclidianPen *self);

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonEuclidianEuclidianPen_try_closed_polygonWithInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint nsides);

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withDoubleArray_(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r1, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r2, IOSDoubleArray *pt);

@interface OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment : NSObject {
 @public
  jint startpt_, endpt_;
  jdouble xcenter_, ycenter_, angle_, radius_;
  jdouble x1_, y1_, x2_, y2_;
  jboolean reversed_;
}

- (instancetype)initWithOrgGeogebraCommonEuclidianEuclidianPen:(OrgGeogebraCommonEuclidianEuclidianPen *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment)

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *self, OrgGeogebraCommonEuclidianEuclidianPen *outer$);

__attribute__((unused)) static OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *new_OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(OrgGeogebraCommonEuclidianEuclidianPen *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment)

@interface OrgGeogebraCommonEuclidianEuclidianPen_Inertia : NSObject {
 @public
  jdouble mass_;
  jdouble sx_;
  jdouble sxx_;
  jdouble sy_;
  jdouble sxy_;
  jdouble syy_;
}

- (instancetype)initWithOrgGeogebraCommonEuclidianEuclidianPen:(OrgGeogebraCommonEuclidianEuclidianPen *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgGeogebraCommonEuclidianEuclidianPen_Inertia)

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *self, OrgGeogebraCommonEuclidianEuclidianPen *outer$);

__attribute__((unused)) static OrgGeogebraCommonEuclidianEuclidianPen_Inertia *new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(OrgGeogebraCommonEuclidianEuclidianPen *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgGeogebraCommonEuclidianEuclidianPen_Inertia)

@interface OrgGeogebraCommonEuclidianEuclidianPen_$1 : OrgGeogebraCommonKernelGeosGeoPolyLine {
 @public
  OrgGeogebraCommonEuclidianEuclidianPen *this$0_;
}

- (void)setObjColorWithOrgGeogebraCommonAwtGColor:(OrgGeogebraCommonAwtGColor *)color;

- (void)setLineThicknessWithInt:(jint)th;

- (void)setLineTypeWithInt:(jint)i;

- (instancetype)initWithOrgGeogebraCommonEuclidianEuclidianPen:(OrgGeogebraCommonEuclidianEuclidianPen *)outer$
                       withOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)arg$0;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgGeogebraCommonEuclidianEuclidianPen_$1)

J2OBJC_FIELD_SETTER(OrgGeogebraCommonEuclidianEuclidianPen_$1, this$0_, OrgGeogebraCommonEuclidianEuclidianPen *)

__attribute__((unused)) static void OrgGeogebraCommonEuclidianEuclidianPen_$1_initWithOrgGeogebraCommonEuclidianEuclidianPen_withOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonEuclidianEuclidianPen_$1 *self, OrgGeogebraCommonEuclidianEuclidianPen *outer$, OrgGeogebraCommonKernelConstruction *arg$0);

__attribute__((unused)) static OrgGeogebraCommonEuclidianEuclidianPen_$1 *new_OrgGeogebraCommonEuclidianEuclidianPen_$1_initWithOrgGeogebraCommonEuclidianEuclidianPen_withOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonEuclidianEuclidianPen *outer$, OrgGeogebraCommonKernelConstruction *arg$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgGeogebraCommonEuclidianEuclidianPen_$1)

@implementation OrgGeogebraCommonEuclidianEuclidianPen

- (jint)getPenSize {
  return penSize_;
}

- (void)setPenSizeWithInt:(jint)penSize {
  if (self->penSize_ != penSize) {
    startNewStroke_ = YES;
  }
  self->penSize_ = penSize;
}

- (jint)getPenLineStyle {
  return penLineStyle_;
}

- (void)setPenLineStyleWithInt:(jint)penLineStyle {
  if (self->penLineStyle_ != penLineStyle) {
    startNewStroke_ = YES;
  }
  self->penLineStyle_ = penLineStyle;
}

- (OrgGeogebraCommonAwtGColor *)getPenColor {
  return penColor_;
}

- (void)setInitialPointWithOrgGeogebraCommonKernelGeosGeoPoint:(OrgGeogebraCommonKernelGeosGeoPoint *)point
                                                   withBoolean:(jboolean)deletePoint {
  OrgGeogebraCommonEuclidianEuclidianPen_set_initialPoint_(self, point);
  self->deleteInitialPoint_ = deletePoint;
}

- (instancetype)initWithOrgGeogebraCommonMainApp:(OrgGeogebraCommonMainApp *)app
     withOrgGeogebraCommonEuclidianEuclidianView:(OrgGeogebraCommonEuclidianEuclidianView *)view {
  OrgGeogebraCommonEuclidianEuclidianPen_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonEuclidianEuclidianView_(self, app, view);
  return self;
}

- (void)setDefaults {
  penSize_ = 3;
  eraserSize_ = OrgGeogebraCommonEuclidianEuclidianConstants_DEFAULT_ERASER_SIZE;
  penLineStyle_ = OrgGeogebraCommonPluginEuclidianStyleConstants_LINE_TYPE_FULL;
  OrgGeogebraCommonEuclidianEuclidianPen_set_penColor_(self, OrgGeogebraCommonAwtGColor_get_BLACK_());
  [self setAbsoluteScreenPositionWithBoolean:YES];
}

- (jboolean)isErasingEventWithOrgGeogebraCommonEuclidianEventAbstractEvent:(OrgGeogebraCommonEuclidianEventAbstractEvent *)e {
  return [((OrgGeogebraCommonMainApp *) nil_chk(app_)) isRightClickWithOrgGeogebraCommonEuclidianEventAbstractEvent:e] && !freehand_;
}

- (void)setPenGeoWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)penGeo {
  if (penGeo == nil) {
    OrgGeogebraCommonEuclidianEuclidianPen_set_lastAlgo_(self, nil);
  }
  else if ([[penGeo getParentAlgorithm] isKindOfClass:[OrgGeogebraCommonKernelAlgosAlgoPolyLine class]]) {
    OrgGeogebraCommonEuclidianEuclidianPen_set_lastAlgo_(self, [penGeo getParentAlgorithm]);
  }
}

- (void)resetPenOffsets {
  OrgGeogebraCommonEuclidianEuclidianPen_set_lastAlgo_(self, nil);
}

- (void)handleMouseDraggedForPenModeWithOrgGeogebraCommonEuclidianEventAbstractEvent:(OrgGeogebraCommonEuclidianEventAbstractEvent *)e {
  [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(view_)) setTransparentCursor];
  if ([self isErasingEventWithOrgGeogebraCommonEuclidianEventAbstractEvent:e]) {
    [((OrgGeogebraCommonEuclidianModesModeDelete *) nil_chk([((OrgGeogebraCommonEuclidianEuclidianController *) nil_chk([view_ getEuclidianController])) getDeleteMode])) handleMouseDraggedForDeleteWithOrgGeogebraCommonEuclidianEventAbstractEvent:e withInt:eraserSize_ withBoolean:YES];
    [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getKernel])) notifyRepaint];
  }
  else {
    [self addPointPenModeWithOrgGeogebraCommonEuclidianEventAbstractEvent:e withOrgGeogebraCommonEuclidianHits:nil];
  }
}

- (void)handleMousePressedForPenModeWithOrgGeogebraCommonEuclidianEventAbstractEvent:(OrgGeogebraCommonEuclidianEventAbstractEvent *)e
                                                  withOrgGeogebraCommonEuclidianHits:(OrgGeogebraCommonEuclidianHits *)hits {
  if (![self isErasingEventWithOrgGeogebraCommonEuclidianEventAbstractEvent:e]) {
    [((JavaUtilArrayList *) nil_chk(penPoints_)) clear];
    [self addPointPenModeWithOrgGeogebraCommonEuclidianEventAbstractEvent:e withOrgGeogebraCommonEuclidianHits:hits];
  }
}

- (void)addPointPenModeWithOrgGeogebraCommonEuclidianEventAbstractEvent:(OrgGeogebraCommonEuclidianEventAbstractEvent *)e
                                     withOrgGeogebraCommonEuclidianHits:(OrgGeogebraCommonEuclidianHits *)h {
  JavaUtilArrayList *selGeos = [((OrgGeogebraCommonMainSelectionManager *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getSelectionManager])) getSelectedGeos];
  if ([((JavaUtilArrayList *) nil_chk(selGeos)) size] == 1 && [[selGeos getWithInt:0] isKindOfClass:[OrgGeogebraCommonKernelGeosGeoPolyLine class]]) {
    OrgGeogebraCommonEuclidianEuclidianPen_set_lastAlgo_(self, [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([selGeos getWithInt:0])) getParentAlgorithm]);
  }
  [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(view_)) setTransparentCursor];
  OrgGeogebraCommonAwtGPoint *newPoint = [new_OrgGeogebraCommonAwtGPoint_initWithInt_withInt_([((OrgGeogebraCommonEuclidianEventAbstractEvent *) nil_chk(e)) getX], [e getY]) autorelease];
  id<OrgGeogebraCommonAwtGGraphics2D> g2D = [view_ getGraphicsForPen];
  if (minX_ > [e getX]) minX_ = [e getX];
  if (maxX_ < [e getX]) maxX_ = [e getX];
  if ([((JavaUtilArrayList *) nil_chk(penPoints_)) size] == 0) [penPoints_ addWithId:newPoint];
  else {
    OrgGeogebraCommonAwtGPoint *lastPoint = [penPoints_ getWithInt:[penPoints_ size] - 1];
    OrgGeogebraCommonEuclidianEuclidianPen_drawPenPreviewLineWithOrgGeogebraCommonAwtGGraphics2D_withOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(self, g2D, newPoint, lastPoint);
    if ([((OrgGeogebraCommonAwtGPoint *) nil_chk(lastPoint)) distanceWithOrgGeogebraCommonAwtGPoint:newPoint] > 3) [penPoints_ addWithId:newPoint];
  }
  OrgGeogebraCommonAwtGPoint *point = [e getPoint];
  if (startPoint_ == nil) OrgGeogebraCommonEuclidianEuclidianPen_set_startPoint_(self, [e getPoint]);
  deltaX_ = OrgGeogebraCommonEuclidianEuclidianPen_getDeltaXWithOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(startPoint_, point);
  deltaY_ = OrgGeogebraCommonEuclidianEuclidianPen_getDeltaYWithOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(startPoint_, point);
  absDeltaX_ = JavaLangMath_absWithInt_(deltaX_);
  absDeltaY_ = JavaLangMath_absWithInt_(deltaY_);
  absTangent_ = ((jfloat) absDeltaX_) / absDeltaY_;
  if (!((absDeltaX_ < gridSize_) && (absDeltaY_ < gridSize_))) {
    if (absTangent_ < 0.5) {
      if (deltaY_ < 0) OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, OrgGeogebraCommonEuclidianEuclidianPen_UP_MOVE_);
      else OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, OrgGeogebraCommonEuclidianEuclidianPen_DOWN_MOVE_);
      OrgGeogebraCommonEuclidianEuclidianPen_set_startPoint_(self, point);
    }
    if (absTangent_ >= 0.5 && absTangent_ <= 2) {
      if (deltaX_ > 0 && deltaY_ < 0) OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, OrgGeogebraCommonEuclidianEuclidianPen_LEFT_UP_);
      if (deltaX_ < 0 && deltaY_ < 0) OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_UP_);
      if (deltaX_ < 0 && deltaY_ > 0) OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_DOWN_);
      if (deltaX_ > 0 && deltaY_ > 0) OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, OrgGeogebraCommonEuclidianEuclidianPen_LEFT_DOWN_);
      OrgGeogebraCommonEuclidianEuclidianPen_set_startPoint_(self, point);
    }
    if (absTangent_ > 2) {
      if (deltaX_ < 0) OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, OrgGeogebraCommonEuclidianEuclidianPen_LEFT_MOVE_);
      else OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_MOVE_);
      OrgGeogebraCommonEuclidianEuclidianPen_set_startPoint_(self, point);
    }
  }
}

- (void)drawPenPreviewLineWithOrgGeogebraCommonAwtGGraphics2D:(id<OrgGeogebraCommonAwtGGraphics2D>)g2D
                               withOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)point1
                               withOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)point2 {
  OrgGeogebraCommonEuclidianEuclidianPen_drawPenPreviewLineWithOrgGeogebraCommonAwtGGraphics2D_withOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(self, g2D, point1, point2);
}

- (void)handleMouseReleasedForPenModeWithBoolean:(jboolean)right
                                         withInt:(jint)x
                                         withInt:(jint)y {
  if (right && !freehand_) {
    return;
  }
  if (freehand_) {
    OrgGeogebraCommonEuclidianEuclidianPen_mouseReleasedFreehandWithInt_withInt_(self, x, y);
    [((JavaUtilArrayList *) nil_chk(penPoints_)) clear];
    [((OrgGeogebraCommonMainApp *) nil_chk(app_)) refreshViews];
    minX_ = JavaLangInteger_MAX_VALUE;
    maxX_ = JavaLangInteger_MIN_VALUE;
    return;
  }
  [((OrgGeogebraCommonMainApp *) nil_chk(app_)) setDefaultCursor];
  OrgGeogebraCommonEuclidianEuclidianPen_addPointsToPolyLineWithJavaUtilArrayList_(self, penPoints_);
  [((JavaUtilArrayList *) nil_chk(penPoints_)) clear];
}

- (OrgGeogebraCommonKernelGeosGeoElement *)checkShapesWithInt:(jint)x
                                                      withInt:(jint)y {
  count_ = 0;
  OrgGeogebraCommonMainApp_debugWithNSString_(OrgGeogebraCommonEuclidianEuclidianPen_getGesture(self));
  OrgGeogebraCommonEuclidianEuclidianPen_clearTemporaryInfo(self);
  OrgGeogebraCommonAwtGPoint *newPoint = [new_OrgGeogebraCommonAwtGPoint_initWithInt_withInt_(x, y) autorelease];
  [((JavaUtilArrayList *) nil_chk(penPoints_)) addWithId:newPoint];
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_brk_(self, [IOSIntArray newArrayWithLength:5]);
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_a_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_b_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_c_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_d_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  jint j = 0;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *rs = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *ss = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *temp1 = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s = [new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self) autorelease];
  OrgGeogebraCommonEuclidianEuclidianPen_calc_inertiaWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(self, 0, [penPoints_ size] - 1, s);
  jint n = OrgGeogebraCommonEuclidianEuclidianPen_findPolygonalWithInt_withInt_withInt_withInt_withInt_(self, 0, [penPoints_ size] - 1, MAX_POLYGON_SIDES_, 0, 0);
  if (n > 0) {
    OrgGeogebraCommonEuclidianEuclidianPen_optimize_polygonalWithInt_(self, n);
    while (n + recognizer_queue_length_ > MAX_POLYGON_SIDES_) {
      j = 1;
      temp1 = reco_queue_b_;
      while (j < recognizer_queue_length_ && ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(temp1))->startpt_ != 0) {
        j++;
        if (j == 2) temp1 = reco_queue_c_;
        if (j == 3) temp1 = reco_queue_d_;
        if (j == 4) temp1 = reco_queue_e_;
      }
      recognizer_queue_length_ = recognizer_queue_length_ - j;
      jint te1 = 0;
      jint te2 = j;
      OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *t1 = nil;
      OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *t2 = nil;
      for (jint k = 0; k < recognizer_queue_length_; ++k) {
        if (te1 == 0) t1 = reco_queue_a_;
        if (te1 == 1) t1 = reco_queue_b_;
        if (te1 == 2) t1 = reco_queue_c_;
        if (te1 == 3) t1 = reco_queue_d_;
        if (te1 == 4) t1 = reco_queue_e_;
        if (te2 == 0) t2 = reco_queue_a_;
        if (te2 == 1) t2 = reco_queue_b_;
        if (te2 == 2) t2 = reco_queue_c_;
        if (te2 == 3) t2 = reco_queue_d_;
        if (te2 == 4) t2 = reco_queue_e_;
        ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(t1))->startpt_ = ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(t2))->startpt_;
        t1->endpt_ = t2->endpt_;
        t1->xcenter_ = t2->xcenter_;
        t1->ycenter_ = t2->ycenter_;
        t1->angle_ = t2->angle_;
        t1->radius_ = t2->radius_;
        t1->x1_ = t2->x1_;
        t1->x2_ = t2->x2_;
        t1->y1_ = t2->y2_;
        t1->y2_ = t2->y2_;
        t1->reversed_ = t2->reversed_;
        te1++;
        te2++;
      }
    }
    jint temp_reco = recognizer_queue_length_;
    recognizer_queue_length_ = recognizer_queue_length_ + n;
    for (j = 0; j < n; ++j) {
      if (temp_reco + j == 0) rs = reco_queue_a_;
      if (temp_reco + j == 1) rs = reco_queue_b_;
      if (temp_reco + j == 2) rs = reco_queue_c_;
      if (temp_reco + j == 3) rs = reco_queue_d_;
      if (temp_reco + j == 4) rs = reco_queue_e_;
      if (j == 0) ss = a_;
      if (j == 1) ss = b_;
      if (j == 2) ss = c_;
      if (j == 3) ss = d_;
      ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(rs))->startpt_ = IOSIntArray_Get(brk_, j);
      rs->endpt_ = IOSIntArray_Get(brk_, j + 1);
      OrgGeogebraCommonEuclidianEuclidianPen_get_segment_geometryWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_(self, IOSIntArray_Get(brk_, j), IOSIntArray_Get(brk_, j + 1), ss, rs);
    }
    OrgGeogebraCommonKernelGeosGeoElement *geo = OrgGeogebraCommonEuclidianEuclidianPen_try_rectangle(self);
    if (geo != nil) {
      recognizer_queue_length_ = 0;
      OrgGeogebraCommonMainApp_debugWithNSString_(@"Rectangle Recognized");
      return geo;
    }
    geo = OrgGeogebraCommonEuclidianEuclidianPen_try_arrow(self);
    if (geo != nil) {
      recognizer_queue_length_ = 0;
      OrgGeogebraCommonMainApp_debugWithNSString_(@"Arrow Recognized");
      return geo;
    }
    geo = OrgGeogebraCommonEuclidianEuclidianPen_try_closed_polygonWithInt_(self, 3);
    if (geo != nil) {
      recognizer_queue_length_ = 0;
      OrgGeogebraCommonMainApp_debugWithNSString_(@"Triangle Recognized");
      return geo;
    }
    geo = OrgGeogebraCommonEuclidianEuclidianPen_try_closed_polygonWithInt_(self, 4);
    if (geo != nil) {
      recognizer_queue_length_ = 0;
      OrgGeogebraCommonMainApp_debugWithNSString_(@"Quadrilateral Recognized");
      return geo;
    }
    if (n == 1) {
      OrgGeogebraCommonMainApp_debugWithNSString_(@"Current stroke is a line");
      if (JavaLangMath_absWithDouble_(((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(rs))->angle_) < SLANT_TOLERANCE_) {
        rs->angle_ = 0;
        rs->y1_ = rs->y2_ = rs->ycenter_;
      }
      if (JavaLangMath_absWithDouble_(rs->angle_) > JavaLangMath_PI / 2 - SLANT_TOLERANCE_) {
        rs->angle_ = (rs->angle_ > 0) ? (JavaLangMath_PI / 2) : (-JavaLangMath_PI / 2);
        rs->x1_ = rs->x2_ = rs->xcenter_;
      }
      jdouble x_first = [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(view_)) toRealWorldCoordXWithDouble:rs->x1_];
      jdouble y_first = [view_ toRealWorldCoordYWithDouble:rs->y1_];
      jdouble x_last = [view_ toRealWorldCoordXWithDouble:rs->x2_];
      jdouble y_last = [view_ toRealWorldCoordYWithDouble:rs->y2_];
      OrgGeogebraCommonKernelAlgosAlgoJoinPointsSegment *algo = nil;
      OrgGeogebraCommonKernelGeosGeoPoint *p;
      if (self->initialPoint_ != nil) {
        p = initialPoint_;
      }
      else {
        p = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_([((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getKernel])) getConstruction], nil, x_first, y_first, 1.0) autorelease];
      }
      OrgGeogebraCommonKernelGeosGeoPoint *q = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_([((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getKernel])) getConstruction], nil, x_last, y_last, 1.0) autorelease];
      algo = [new_OrgGeogebraCommonKernelAlgosAlgoJoinPointsSegment_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelGeosGeoPoint_withOrgGeogebraCommonKernelGeosGeoPoint_([((OrgGeogebraCommonKernelKernel *) nil_chk([app_ getKernel])) getConstruction], nil, p, q) autorelease];
      OrgGeogebraCommonKernelGeosGeoElement *line = IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0);
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(line)) updateRepaint];
      return line;
    }
  }
  if (OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s) > CIRCLE_MIN_DET_) {
    score_ = OrgGeogebraCommonEuclidianEuclidianPen_score_circleWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(self, 0, [penPoints_ size] - 1, s);
    if (score_ < CIRCLE_MAX_SCORE_) {
      return OrgGeogebraCommonEuclidianEuclidianPen_makeACircleWithDouble_withDouble_withDouble_(self, OrgGeogebraCommonEuclidianEuclidianPen_center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s), OrgGeogebraCommonEuclidianEuclidianPen_center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s), OrgGeogebraCommonEuclidianEuclidianPen_I_radWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s));
    }
  }
  if (self->deleteInitialPoint_ && self->initialPoint_ != nil) {
    [self->initialPoint_ remove];
  }
  OrgGeogebraCommonEuclidianEuclidianPen_set_initialPoint_(self, nil);
  return OrgGeogebraCommonEuclidianEuclidianPen_makeAConic(self);
}

- (void)addPointsToPolyLineWithJavaUtilArrayList:(JavaUtilArrayList *)penPoints2 {
  OrgGeogebraCommonEuclidianEuclidianPen_addPointsToPolyLineWithJavaUtilArrayList_(self, penPoints2);
}

+ (OrgGeogebraCommonKernelAlgosAlgoPolyLine *)getAlgoPolylineWithOrgGeogebraCommonKernelAlgosAlgoElement:(OrgGeogebraCommonKernelAlgosAlgoElement *)al {
  return OrgGeogebraCommonEuclidianEuclidianPen_getAlgoPolylineWithOrgGeogebraCommonKernelAlgosAlgoElement_(al);
}

- (void)mouseReleasedFreehandWithInt:(jint)x
                             withInt:(jint)y {
  OrgGeogebraCommonEuclidianEuclidianPen_mouseReleasedFreehandWithInt_withInt_(self, x, y);
}

- (void)setFreehandWithBoolean:(jboolean)b {
  freehand_ = b;
}

- (jint)findPolygonalWithInt:(jint)start
                     withInt:(jint)end
                     withInt:(jint)n
                     withInt:(jint)offset1
                     withInt:(jint)offset2 {
  return OrgGeogebraCommonEuclidianEuclidianPen_findPolygonalWithInt_withInt_withInt_withInt_withInt_(self, start, end, n, offset1, offset2);
}

- (void)calc_inertiaWithInt:(jint)start
                    withInt:(jint)end
withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  OrgGeogebraCommonEuclidianEuclidianPen_calc_inertiaWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(self, start, end, s);
}

+ (jdouble)I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  return OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
}

+ (jdouble)I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  return OrgGeogebraCommonEuclidianEuclidianPen_I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
}

+ (jdouble)I_xyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  return OrgGeogebraCommonEuclidianEuclidianPen_I_xyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
}

+ (jdouble)I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  return OrgGeogebraCommonEuclidianEuclidianPen_I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
}

- (jdouble)score_circleWithInt:(jint)start
                       withInt:(jint)end
withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  return OrgGeogebraCommonEuclidianEuclidianPen_score_circleWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(self, start, end, s);
}

+ (jdouble)center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  return OrgGeogebraCommonEuclidianEuclidianPen_center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
}

+ (jdouble)center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  return OrgGeogebraCommonEuclidianEuclidianPen_center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
}

+ (jdouble)I_radWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s {
  return OrgGeogebraCommonEuclidianEuclidianPen_I_radWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
}

- (OrgGeogebraCommonKernelGeosGeoConic *)makeACircleWithDouble:(jdouble)x
                                                    withDouble:(jdouble)y
                                                    withDouble:(jdouble)r {
  return OrgGeogebraCommonEuclidianEuclidianPen_makeACircleWithDouble_withDouble_withDouble_(self, x, y, r);
}

- (OrgGeogebraCommonKernelGeosGeoConic *)makeAConic {
  return OrgGeogebraCommonEuclidianEuclidianPen_makeAConic(self);
}

+ (jint)getDeltaXWithOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)startPoint2
                 withOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)point {
  return OrgGeogebraCommonEuclidianEuclidianPen_getDeltaXWithOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(startPoint2, point);
}

+ (jint)getDeltaYWithOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)startPoint2
                 withOrgGeogebraCommonAwtGPoint:(OrgGeogebraCommonAwtGPoint *)point {
  return OrgGeogebraCommonEuclidianEuclidianPen_getDeltaYWithOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(startPoint2, point);
}

- (void)saveMoveWithNSString:(NSString *)move {
  OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(self, move);
}

- (NSString *)getGesture {
  return OrgGeogebraCommonEuclidianEuclidianPen_getGesture(self);
}

- (void)clearTemporaryInfo {
  OrgGeogebraCommonEuclidianEuclidianPen_clearTemporaryInfo(self);
}

- (void)optimize_polygonalWithInt:(jint)nsides {
  OrgGeogebraCommonEuclidianEuclidianPen_optimize_polygonalWithInt_(self, nsides);
}

- (void)incr_inertiaWithInt:(jint)start
withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s
                    withInt:(jint)coeff {
  OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(self, start, s, coeff);
}

- (void)get_segment_geometryWithInt:(jint)begin
                            withInt:(jint)end
withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *)s
withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)r {
  OrgGeogebraCommonEuclidianEuclidianPen_get_segment_geometryWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_(self, begin, end, s, r);
}

- (OrgGeogebraCommonKernelGeosGeoElement *)try_rectangle {
  return OrgGeogebraCommonEuclidianEuclidianPen_try_rectangle(self);
}

- (OrgGeogebraCommonKernelGeosGeoElement *)try_arrow {
  return OrgGeogebraCommonEuclidianEuclidianPen_try_arrow(self);
}

- (OrgGeogebraCommonKernelGeosGeoElement *)try_closed_polygonWithInt:(jint)nsides {
  return OrgGeogebraCommonEuclidianEuclidianPen_try_closed_polygonWithInt_(self, nsides);
}

+ (void)calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)r1
                       withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *)r2
                                                              withDoubleArray:(IOSDoubleArray *)pt {
  OrgGeogebraCommonEuclidianEuclidianPen_calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withDoubleArray_(r1, r2, pt);
}

- (void)setPenColorWithOrgGeogebraCommonAwtGColor:(OrgGeogebraCommonAwtGColor *)color {
  if (![((OrgGeogebraCommonAwtGColor *) nil_chk(self->penColor_)) isEqual:color]) {
    startNewStroke_ = YES;
  }
  OrgGeogebraCommonEuclidianEuclidianPen_set_penColor_(self, color);
}

- (void)setAbsoluteScreenPositionWithBoolean:(jboolean)b {
  absoluteScreenPosition_ = b;
}

- (OrgGeogebraCommonKernelGeosGeoElement *)getCreatedShape {
  return nil;
}

- (void)dealloc {
  RELEASE_(app_);
  RELEASE_(view_);
  RELEASE_(DEFAULT_PEN_LINE_);
  RELEASE_(lastAlgo_);
  RELEASE_(penPoints_);
  RELEASE_(temp_);
  RELEASE_(brk_);
  RELEASE_(a_);
  RELEASE_(b_);
  RELEASE_(c_);
  RELEASE_(d_);
  RELEASE_(reco_queue_a_);
  RELEASE_(reco_queue_b_);
  RELEASE_(reco_queue_c_);
  RELEASE_(reco_queue_d_);
  RELEASE_(reco_queue_e_);
  RELEASE_(startPoint_);
  RELEASE_(gesture_);
  RELEASE_(initialPoint_);
  RELEASE_(penColor_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "getPenSize", NULL, "I", 0x1, NULL, NULL },
    { "setPenSizeWithInt:", "setPenSize", "V", 0x1, NULL, NULL },
    { "getPenLineStyle", NULL, "I", 0x1, NULL, NULL },
    { "setPenLineStyleWithInt:", "setPenLineStyle", "V", 0x1, NULL, NULL },
    { "getPenColor", NULL, "Lorg.geogebra.common.awt.GColor;", 0x1, NULL, NULL },
    { "setInitialPointWithOrgGeogebraCommonKernelGeosGeoPoint:withBoolean:", "setInitialPoint", "V", 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonMainApp:withOrgGeogebraCommonEuclidianEuclidianView:", "EuclidianPen", NULL, 0x1, NULL, NULL },
    { "setDefaults", NULL, "V", 0x1, NULL, NULL },
    { "isErasingEventWithOrgGeogebraCommonEuclidianEventAbstractEvent:", "isErasingEvent", "Z", 0x1, NULL, NULL },
    { "setPenGeoWithOrgGeogebraCommonKernelGeosGeoElement:", "setPenGeo", "V", 0x1, NULL, NULL },
    { "resetPenOffsets", NULL, "V", 0x1, NULL, NULL },
    { "handleMouseDraggedForPenModeWithOrgGeogebraCommonEuclidianEventAbstractEvent:", "handleMouseDraggedForPenMode", "V", 0x1, NULL, NULL },
    { "handleMousePressedForPenModeWithOrgGeogebraCommonEuclidianEventAbstractEvent:withOrgGeogebraCommonEuclidianHits:", "handleMousePressedForPenMode", "V", 0x1, NULL, NULL },
    { "addPointPenModeWithOrgGeogebraCommonEuclidianEventAbstractEvent:withOrgGeogebraCommonEuclidianHits:", "addPointPenMode", "V", 0x1, NULL, NULL },
    { "drawPenPreviewLineWithOrgGeogebraCommonAwtGGraphics2D:withOrgGeogebraCommonAwtGPoint:withOrgGeogebraCommonAwtGPoint:", "drawPenPreviewLine", "V", 0x2, NULL, NULL },
    { "handleMouseReleasedForPenModeWithBoolean:withInt:withInt:", "handleMouseReleasedForPenMode", "V", 0x1, NULL, NULL },
    { "checkShapesWithInt:withInt:", "checkShapes", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x4, NULL, NULL },
    { "addPointsToPolyLineWithJavaUtilArrayList:", "addPointsToPolyLine", "V", 0x2, NULL, NULL },
    { "getAlgoPolylineWithOrgGeogebraCommonKernelAlgosAlgoElement:", "getAlgoPolyline", "Lorg.geogebra.common.kernel.algos.AlgoPolyLine;", 0xa, NULL, NULL },
    { "mouseReleasedFreehandWithInt:withInt:", "mouseReleasedFreehand", "V", 0x2, NULL, NULL },
    { "setFreehandWithBoolean:", "setFreehand", "V", 0x1, NULL, NULL },
    { "findPolygonalWithInt:withInt:withInt:withInt:withInt:", "findPolygonal", "I", 0x2, NULL, NULL },
    { "calc_inertiaWithInt:withInt:withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "calc_inertia", "V", 0x2, NULL, NULL },
    { "I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "I_det", "D", 0x1a, NULL, NULL },
    { "I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "I_xx", "D", 0xa, NULL, NULL },
    { "I_xyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "I_xy", "D", 0xa, NULL, NULL },
    { "I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "I_yy", "D", 0xa, NULL, NULL },
    { "score_circleWithInt:withInt:withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "score_circle", "D", 0x2, NULL, NULL },
    { "center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "center_x", "D", 0xa, NULL, NULL },
    { "center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "center_y", "D", 0xa, NULL, NULL },
    { "I_radWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia:", "I_rad", "D", 0xa, NULL, NULL },
    { "makeACircleWithDouble:withDouble:withDouble:", "makeACircle", "Lorg.geogebra.common.kernel.geos.GeoConic;", 0x2, NULL, NULL },
    { "makeAConic", NULL, "Lorg.geogebra.common.kernel.geos.GeoConic;", 0x2, NULL, NULL },
    { "getDeltaXWithOrgGeogebraCommonAwtGPoint:withOrgGeogebraCommonAwtGPoint:", "getDeltaX", "I", 0xa, NULL, NULL },
    { "getDeltaYWithOrgGeogebraCommonAwtGPoint:withOrgGeogebraCommonAwtGPoint:", "getDeltaY", "I", 0xa, NULL, NULL },
    { "saveMoveWithNSString:", "saveMove", "V", 0x2, NULL, NULL },
    { "getGesture", NULL, "Ljava.lang.String;", 0x2, NULL, NULL },
    { "clearTemporaryInfo", NULL, "V", 0x2, NULL, NULL },
    { "optimize_polygonalWithInt:", "optimize_polygonal", "V", 0x2, NULL, NULL },
    { "incr_inertiaWithInt:withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:withInt:", "incr_inertia", "V", 0x2, NULL, NULL },
    { "get_segment_geometryWithInt:withInt:withOrgGeogebraCommonEuclidianEuclidianPen_Inertia:withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:", "get_segment_geometry", "V", 0x2, NULL, NULL },
    { "try_rectangle", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x2, NULL, NULL },
    { "try_arrow", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x2, NULL, NULL },
    { "try_closed_polygonWithInt:", "try_closed_polygon", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x2, NULL, NULL },
    { "calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment:withDoubleArray:", "calc_edge_isect", "V", 0xa, NULL, NULL },
    { "setPenColorWithOrgGeogebraCommonAwtGColor:", "setPenColor", "V", 0x1, NULL, NULL },
    { "setAbsoluteScreenPositionWithBoolean:", "setAbsoluteScreenPosition", "V", 0x1, NULL, NULL },
    { "getCreatedShape", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "app_", NULL, 0x4, "Lorg.geogebra.common.main.App;", NULL, NULL,  },
    { "view_", NULL, 0x4, "Lorg.geogebra.common.euclidian.EuclidianView;", NULL, NULL,  },
    { "CIRCLE_MIN_DET_", NULL, 0x4, "D", NULL, NULL,  },
    { "CIRCLE_MAX_SCORE_", NULL, 0x4, "D", NULL, NULL,  },
    { "RECTANGLE_LINEAR_TOLERANCE_", NULL, 0x4, "D", NULL, NULL,  },
    { "POLYGON_LINEAR_TOLERANCE_", NULL, 0x4, "D", NULL, NULL,  },
    { "RECTANGLE_ANGLE_TOLERANCE_", NULL, 0x4, "D", NULL, NULL,  },
    { "DEFAULT_PEN_LINE_", NULL, 0x11, "Lorg.geogebra.common.kernel.geos.GeoPolyLine;", NULL, NULL,  },
    { "lastAlgo_", NULL, 0x2, "Lorg.geogebra.common.kernel.algos.AlgoElement;", NULL, NULL,  },
    { "penPoints_", NULL, 0x4, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/awt/GPoint;>;",  },
    { "temp_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/awt/GPoint;>;",  },
    { "minX_", NULL, 0x2, "I", NULL, NULL,  },
    { "maxX_", NULL, 0x2, "I", NULL, NULL,  },
    { "score_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_MAXSIZE_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_ANGLE_MIN_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_ANGLE_MAX_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_ASYMMETRY_MAX_ANGLE_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_ASYMMETRY_MAX_LINEAR_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_TIP_LINEAR_TOLERANCE_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_SIDEWAYS_GAP_TOLERANCE_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_MAIN_LINEAR_GAP_MIN_", NULL, 0x2, "D", NULL, NULL,  },
    { "ARROW_MAIN_LINEAR_GAP_MAX_", NULL, 0x2, "D", NULL, NULL,  },
    { "brk_", NULL, 0x2, "[I", NULL, NULL,  },
    { "count_", NULL, 0x2, "I", NULL, NULL,  },
    { "recognizer_queue_length_", NULL, 0x2, "I", NULL, NULL,  },
    { "MAX_POLYGON_SIDES_", NULL, 0x2, "I", NULL, NULL,  },
    { "LINE_MAX_DET_", NULL, 0x2, "D", NULL, NULL,  },
    { "SLANT_TOLERANCE_", NULL, 0x2, "D", NULL, NULL,  },
    { "a_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$Inertia;", NULL, NULL,  },
    { "b_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$Inertia;", NULL, NULL,  },
    { "c_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$Inertia;", NULL, NULL,  },
    { "d_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$Inertia;", NULL, NULL,  },
    { "reco_queue_a_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$RecoSegment;", NULL, NULL,  },
    { "reco_queue_b_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$RecoSegment;", NULL, NULL,  },
    { "reco_queue_c_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$RecoSegment;", NULL, NULL,  },
    { "reco_queue_d_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$RecoSegment;", NULL, NULL,  },
    { "reco_queue_e_", NULL, 0x2, "Lorg.geogebra.common.euclidian.EuclidianPen$RecoSegment;", NULL, NULL,  },
    { "LEFT_UP_", NULL, 0x1a, "Ljava.lang.String;", &OrgGeogebraCommonEuclidianEuclidianPen_LEFT_UP_, NULL,  },
    { "RIGHT_UP_", NULL, 0x1a, "Ljava.lang.String;", &OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_UP_, NULL,  },
    { "RIGHT_DOWN_", NULL, 0x1a, "Ljava.lang.String;", &OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_DOWN_, NULL,  },
    { "LEFT_DOWN_", NULL, 0x1a, "Ljava.lang.String;", &OrgGeogebraCommonEuclidianEuclidianPen_LEFT_DOWN_, NULL,  },
    { "LEFT_MOVE_", NULL, 0x1a, "Ljava.lang.String;", &OrgGeogebraCommonEuclidianEuclidianPen_LEFT_MOVE_, NULL,  },
    { "RIGHT_MOVE_", NULL, 0x1a, "Ljava.lang.String;", &OrgGeogebraCommonEuclidianEuclidianPen_RIGHT_MOVE_, NULL,  },
    { "UP_MOVE_", NULL, 0x1a, "Ljava.lang.String;", &OrgGeogebraCommonEuclidianEuclidianPen_UP_MOVE_, NULL,  },
    { "DOWN_MOVE_", NULL, 0x1a, "Ljava.lang.String;", &OrgGeogebraCommonEuclidianEuclidianPen_DOWN_MOVE_, NULL,  },
    { "gridSize_", NULL, 0x2, "I", NULL, NULL,  },
    { "startPoint_", NULL, 0x2, "Lorg.geogebra.common.awt.GPoint;", NULL, NULL,  },
    { "gesture_", NULL, 0x2, "Ljava.lang.StringBuffer;", NULL, NULL,  },
    { "deltaX_", NULL, 0x2, "I", NULL, NULL,  },
    { "deltaY_", NULL, 0x2, "I", NULL, NULL,  },
    { "absDeltaX_", NULL, 0x2, "I", NULL, NULL,  },
    { "absDeltaY_", NULL, 0x2, "I", NULL, NULL,  },
    { "absTangent_", NULL, 0x2, "F", NULL, NULL,  },
    { "PEN_SIZE_FACTOR_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonEuclidianEuclidianPen_PEN_SIZE_FACTOR },
    { "CONIC_AXIS_ERROR_RATIO_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgGeogebraCommonEuclidianEuclidianPen_CONIC_AXIS_ERROR_RATIO },
    { "startNewStroke_", NULL, 0x2, "Z", NULL, NULL,  },
    { "penSize_", NULL, 0x2, "I", NULL, NULL,  },
    { "initialPoint_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "deleteInitialPoint_", NULL, 0x4, "Z", NULL, NULL,  },
    { "eraserSize_", NULL, 0x2, "I", NULL, NULL,  },
    { "penLineStyle_", NULL, 0x2, "I", NULL, NULL,  },
    { "penColor_", NULL, 0x2, "Lorg.geogebra.common.awt.GColor;", NULL, NULL,  },
    { "freehand_", NULL, 0x2, "Z", NULL, NULL,  },
    { "absoluteScreenPosition_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lorg.geogebra.common.euclidian.EuclidianPen$RecoSegment;", "Lorg.geogebra.common.euclidian.EuclidianPen$Inertia;"};
  static const J2ObjcClassInfo _OrgGeogebraCommonEuclidianEuclidianPen = { 2, "EuclidianPen", "org.geogebra.common.euclidian", NULL, 0x1, 48, methods, 65, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_OrgGeogebraCommonEuclidianEuclidianPen;
}

@end

void OrgGeogebraCommonEuclidianEuclidianPen_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonEuclidianEuclidianView_(OrgGeogebraCommonEuclidianEuclidianPen *self, OrgGeogebraCommonMainApp *app, OrgGeogebraCommonEuclidianEuclidianView *view) {
  NSObject_init(self);
  self->CIRCLE_MIN_DET_ = 0.95;
  self->CIRCLE_MAX_SCORE_ = 0.10;
  self->RECTANGLE_LINEAR_TOLERANCE_ = 0.20;
  self->POLYGON_LINEAR_TOLERANCE_ = 0.20;
  self->RECTANGLE_ANGLE_TOLERANCE_ = 15 * JavaLangMath_PI / 180;
  OrgGeogebraCommonEuclidianEuclidianPen_set_lastAlgo_(self, nil);
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_penPoints_(self, new_JavaUtilArrayList_init());
  OrgGeogebraCommonEuclidianEuclidianPen_set_temp_(self, nil);
  self->minX_ = JavaLangInteger_MAX_VALUE;
  self->maxX_ = JavaLangInteger_MIN_VALUE;
  self->score_ = 0;
  self->ARROW_MAXSIZE_ = 0.8;
  self->ARROW_ANGLE_MIN_ = (5 * JavaLangMath_PI / 180);
  self->ARROW_ANGLE_MAX_ = (50 * JavaLangMath_PI / 180);
  self->ARROW_ASYMMETRY_MAX_ANGLE_ = (30 * JavaLangMath_PI / 180);
  self->ARROW_ASYMMETRY_MAX_LINEAR_ = 1.0;
  self->ARROW_TIP_LINEAR_TOLERANCE_ = 0.30;
  self->ARROW_SIDEWAYS_GAP_TOLERANCE_ = 0.25;
  self->ARROW_MAIN_LINEAR_GAP_MIN_ = -0.3;
  self->ARROW_MAIN_LINEAR_GAP_MAX_ = 0.7;
  self->count_ = 0;
  self->recognizer_queue_length_ = 0;
  self->MAX_POLYGON_SIDES_ = 4;
  self->LINE_MAX_DET_ = 0.015;
  self->SLANT_TOLERANCE_ = 5 * JavaLangMath_PI / 180;
  OrgGeogebraCommonEuclidianEuclidianPen_set_a_(self, nil);
  OrgGeogebraCommonEuclidianEuclidianPen_set_b_(self, nil);
  OrgGeogebraCommonEuclidianEuclidianPen_set_c_(self, nil);
  OrgGeogebraCommonEuclidianEuclidianPen_set_d_(self, nil);
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_reco_queue_a_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_reco_queue_b_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_reco_queue_c_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_reco_queue_d_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_reco_queue_e_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self));
  self->gridSize_ = 15;
  OrgGeogebraCommonEuclidianEuclidianPen_set_startPoint_(self, nil);
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_gesture_(self, new_JavaLangStringBuffer_init());
  self->deltaX_ = 0;
  self->deltaY_ = 0;
  self->absDeltaX_ = 0;
  self->absDeltaY_ = 0;
  self->absTangent_ = 0;
  self->startNewStroke_ = NO;
  OrgGeogebraCommonEuclidianEuclidianPen_set_initialPoint_(self, nil);
  self->deleteInitialPoint_ = NO;
  self->freehand_ = NO;
  OrgGeogebraCommonEuclidianEuclidianPen_set_view_(self, view);
  OrgGeogebraCommonEuclidianEuclidianPen_set_app_(self, app);
  [self setDefaults];
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_DEFAULT_PEN_LINE_(self, new_OrgGeogebraCommonEuclidianEuclidianPen_$1_initWithOrgGeogebraCommonEuclidianEuclidianPen_withOrgGeogebraCommonKernelConstruction_(self, [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app)) getKernel])) getConstruction]));
  [self->DEFAULT_PEN_LINE_ setObjColorWithOrgGeogebraCommonAwtGColor:self->penColor_];
  [self->DEFAULT_PEN_LINE_ setLineThicknessWithInt:self->penSize_];
}

OrgGeogebraCommonEuclidianEuclidianPen *new_OrgGeogebraCommonEuclidianEuclidianPen_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonEuclidianEuclidianView_(OrgGeogebraCommonMainApp *app, OrgGeogebraCommonEuclidianEuclidianView *view) {
  OrgGeogebraCommonEuclidianEuclidianPen *self = [OrgGeogebraCommonEuclidianEuclidianPen alloc];
  OrgGeogebraCommonEuclidianEuclidianPen_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonEuclidianEuclidianView_(self, app, view);
  return self;
}

void OrgGeogebraCommonEuclidianEuclidianPen_drawPenPreviewLineWithOrgGeogebraCommonAwtGGraphics2D_withOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(OrgGeogebraCommonEuclidianEuclidianPen *self, id<OrgGeogebraCommonAwtGGraphics2D> g2D, OrgGeogebraCommonAwtGPoint *point1, OrgGeogebraCommonAwtGPoint *point2) {
  id<OrgGeogebraCommonAwtGLine2D> line = [((OrgGeogebraCommonFactoriesAwtFactory *) nil_chk(OrgGeogebraCommonFactoriesAwtFactory_get_prototype_())) newLine2D];
  [((id<OrgGeogebraCommonAwtGLine2D>) nil_chk(line)) setLineWithDouble:[((OrgGeogebraCommonAwtGPoint *) nil_chk(point1)) getX] withDouble:[point1 getY] withDouble:[((OrgGeogebraCommonAwtGPoint *) nil_chk(point2)) getX] withDouble:[point2 getY]];
  [((id<OrgGeogebraCommonAwtGGraphics2D>) nil_chk(g2D)) setStrokeWithOrgGeogebraCommonAwtGBasicStroke:[OrgGeogebraCommonFactoriesAwtFactory_get_prototype_() newBasicStrokeWithFloat:12 withInt:OrgGeogebraCommonAwtGBasicStroke_CAP_ROUND withInt:OrgGeogebraCommonAwtGBasicStroke_JOIN_ROUND]];
  [g2D setColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonAwtGColor_get_GRAY_()];
  [g2D fillWithOrgGeogebraCommonAwtGShape:line];
  [g2D drawWithOrgGeogebraCommonAwtGShape:line];
}

void OrgGeogebraCommonEuclidianEuclidianPen_addPointsToPolyLineWithJavaUtilArrayList_(OrgGeogebraCommonEuclidianEuclidianPen *self, JavaUtilArrayList *penPoints2) {
  OrgGeogebraCommonKernelConstruction *cons = [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getKernel])) getConstruction];
  IOSObjectArray *newPts;
  jint offset;
  if (self->startNewStroke_) {
    OrgGeogebraCommonEuclidianEuclidianPen_set_lastAlgo_(self, nil);
    self->startNewStroke_ = NO;
  }
  if (self->lastAlgo_ == nil) {
    newPts = [IOSObjectArray arrayWithLength:[((JavaUtilArrayList *) nil_chk(penPoints2)) size] type:OrgGeogebraCommonKernelGeosGeoPoint_class_()];
    offset = 0;
  }
  else {
    IOSObjectArray *pts = [((OrgGeogebraCommonKernelAlgosAlgoPolyLine *) nil_chk(OrgGeogebraCommonEuclidianEuclidianPen_getAlgoPolylineWithOrgGeogebraCommonKernelAlgosAlgoElement_(self->lastAlgo_))) getPoints];
    newPts = [IOSObjectArray arrayWithLength:[((JavaUtilArrayList *) nil_chk(penPoints2)) size] + 1 + ((IOSObjectArray *) nil_chk(pts))->size_ type:OrgGeogebraCommonKernelGeosGeoPoint_class_()];
    for (jint i = 0; i < pts->size_; i++) {
      IOSObjectArray_Set(newPts, i, (OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast([((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(pts, i))) copyInternalWithOrgGeogebraCommonKernelConstruction:cons], [OrgGeogebraCommonKernelGeosGeoPoint class]));
    }
    IOSObjectArray_SetAndConsume(newPts, pts->size_, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons, JavaLangDouble_NaN, JavaLangDouble_NaN, 1));
    offset = pts->size_ + 1;
  }
  id<JavaUtilIterator> it = [((JavaUtilArrayList *) nil_chk(penPoints2)) iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    OrgGeogebraCommonAwtGPoint *p = [it next];
    IOSObjectArray_SetAndConsume(nil_chk(newPts), offset++, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons, [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordXWithDouble:[((OrgGeogebraCommonAwtGPoint *) nil_chk(p)) getX]], [self->view_ toRealWorldCoordYWithDouble:[p getY]], 1));
  }
  OrgGeogebraCommonKernelAlgosAlgoElement *algo;
  OrgGeogebraCommonKernelAlgosAlgoPolyLine *newPolyLine;
  if (!self->absoluteScreenPosition_) {
    newPolyLine = [new_OrgGeogebraCommonKernelAlgosAlgoPolyLine_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoList_withBoolean_(cons, nil, newPts, nil, YES) autorelease];
    algo = newPolyLine;
  }
  else {
    newPolyLine = [new_OrgGeogebraCommonKernelAlgosAlgoPolyLine_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoList_withBoolean_(cons, newPts, nil, YES) autorelease];
    id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon> ev = [self->app_ getActiveEuclidianView];
    OrgGeogebraCommonKernelKernel *kernelA = [self->app_ getKernel];
    OrgGeogebraCommonKernelGeosGeoPoint *corner1 = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_([((OrgGeogebraCommonKernelKernel *) nil_chk(kernelA)) getConstruction]) autorelease];
    OrgGeogebraCommonKernelGeosGeoPoint *corner3 = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_([kernelA getConstruction]) autorelease];
    OrgGeogebraCommonKernelGeosGeoPoint *screenCorner1 = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_([kernelA getConstruction]) autorelease];
    OrgGeogebraCommonKernelGeosGeoPoint *screenCorner3 = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_([kernelA getConstruction]) autorelease];
    if (ev != nil) {
      [corner1 setCoordsWithDouble:[ev getXmin] withDouble:[ev getYmin] withDouble:1];
      [corner3 setCoordsWithDouble:[ev getXmax] withDouble:[ev getYmax] withDouble:1];
      [screenCorner1 setCoordsWithDouble:0 withDouble:[ev getHeight] withDouble:1];
      [screenCorner3 setCoordsWithDouble:[ev getWidth] withDouble:0 withDouble:1];
    }
    OrgGeogebraCommonKernelArithmeticMyDouble *evNo = [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernelA, [((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(ev)) getEuclidianViewNo]) autorelease];
    [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:newPolyLine];
    algo = [new_OrgGeogebraCommonKernelAlgosAlgoAttachCopyToView_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelKernelNDGeoPointND_withOrgGeogebraCommonKernelKernelNDGeoPointND_withOrgGeogebraCommonKernelKernelNDGeoPointND_withOrgGeogebraCommonKernelKernelNDGeoPointND_(cons, nil, IOSObjectArray_Get(nil_chk([newPolyLine getGeoElements]), 0), evNo, corner1, corner3, screenCorner1, screenCorner3) autorelease];
  }
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(nil_chk([((OrgGeogebraCommonKernelAlgosAlgoPolyLine *) nil_chk(newPolyLine)) getGeoElements]), 0))) setTooltipModeWithInt:OrgGeogebraCommonKernelGeosGeoElement_TOOLTIP_OFF];
  if (self->lastAlgo_ == nil) {
  }
  else {
    @try {
      [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons)) replaceWithOrgGeogebraCommonKernelGeosGeoElement:[self->lastAlgo_ getOutputWithInt:0] withOrgGeogebraCommonKernelGeosGeoElement:[((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) getOutputWithInt:0]];
    }
    @catch (JavaLangException *e) {
      [((JavaLangException *) nil_chk(e)) printStackTrace];
    }
  }
  OrgGeogebraCommonEuclidianEuclidianPen_set_lastAlgo_(self, algo);
  OrgGeogebraCommonKernelGeosGeoPolyLine *poly = (OrgGeogebraCommonKernelGeosGeoPolyLine *) check_class_cast([((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) getOutputWithInt:0], [OrgGeogebraCommonKernelGeosGeoPolyLine class]);
  [((OrgGeogebraCommonKernelGeosGeoPolyLine *) nil_chk(poly)) setLineThicknessWithInt:self->penSize_ * OrgGeogebraCommonEuclidianEuclidianPen_PEN_SIZE_FACTOR];
  [poly setLineTypeWithInt:self->penLineStyle_];
  [poly setObjColorWithOrgGeogebraCommonAwtGColor:self->penColor_];
  [((OrgGeogebraCommonMainSelectionManager *) nil_chk([self->app_ getSelectionManager])) clearSelectedGeosWithBoolean:NO];
  [((OrgGeogebraCommonMainSelectionManager *) nil_chk([self->app_ getSelectionManager])) addSelectedGeoWithOrgGeogebraCommonKernelGeosGeoElement:poly];
  [poly updateRepaint];
  [self->app_ storeUndoInfo];
}

OrgGeogebraCommonKernelAlgosAlgoPolyLine *OrgGeogebraCommonEuclidianEuclidianPen_getAlgoPolylineWithOrgGeogebraCommonKernelAlgosAlgoElement_(OrgGeogebraCommonKernelAlgosAlgoElement *al) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  if ([al isKindOfClass:[OrgGeogebraCommonKernelAlgosAlgoPolyLine class]]) return (OrgGeogebraCommonKernelAlgosAlgoPolyLine *) check_class_cast(al, [OrgGeogebraCommonKernelAlgosAlgoPolyLine class]);
  return (OrgGeogebraCommonKernelAlgosAlgoPolyLine *) check_class_cast([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(nil_chk([((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(al)) getInput]), 0))) getParentAlgorithm], [OrgGeogebraCommonKernelAlgosAlgoPolyLine class]);
}

void OrgGeogebraCommonEuclidianEuclidianPen_mouseReleasedFreehandWithInt_withInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint x, jint y) {
  jint n = self->maxX_ - self->minX_ + 1;
  IOSDoubleArray *freehand1 = [IOSDoubleArray arrayWithLength:n];
  OrgGeogebraCommonKernelGeosGeoElement *shape = [self checkShapesWithInt:x withInt:y];
  if (shape != nil && [shape isGeoLine]) {
    [((JavaUtilArrayList *) nil_chk(self->penPoints_)) clear];
    return;
  }
  if ([shape isKindOfClass:[OrgGeogebraCommonKernelGeosGeoConic class]] && [((OrgGeogebraCommonKernelGeosGeoConic *) nil_chk(((OrgGeogebraCommonKernelGeosGeoConic *) check_class_cast(shape, [OrgGeogebraCommonKernelGeosGeoConic class])))) isCircle]) {
    NSString *equation = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(shape)) getAlgebraDescriptionWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_defaultTemplate_()];
    @try {
      [((OrgGeogebraCommonKernelCommandsAlgebraProcessor *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getKernel])) getAlgebraProcessor])) processAlgebraCommandNoExceptionHandlingWithNSString:equation withBoolean:YES withBoolean:NO withBoolean:YES withBoolean:YES];
    }
    @catch (JavaLangException *e) {
      [((JavaLangException *) nil_chk(e)) printStackTrace];
    }
    [((JavaUtilArrayList *) nil_chk(self->penPoints_)) clear];
    return;
  }
  jdouble monotonicTest = 0;
  for (jint i = 0; i < [((JavaUtilArrayList *) nil_chk(self->penPoints_)) size] - 1; i++) {
    OrgGeogebraCommonAwtGPoint *p1 = [self->penPoints_ getWithInt:i];
    OrgGeogebraCommonAwtGPoint *p2 = [self->penPoints_ getWithInt:i + 1];
    if (JavaLangMath_signumWithFloat_(((OrgGeogebraCommonAwtGPoint *) nil_chk(p2))->x_ - ((OrgGeogebraCommonAwtGPoint *) nil_chk(p1))->x_) != 1) {
      monotonicTest++;
    }
  }
  OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("$DCD", @"mono", monotonicTest, ' ', monotonicTest / [self->penPoints_ size]));
  monotonicTest = monotonicTest / [self->penPoints_ size];
  jboolean monotonic = monotonicTest > 0.9 || monotonicTest < 0.1;
  if (!monotonic) {
    [self->penPoints_ clear];
    return;
  }
  if (shape != nil) {
    {
      IOSObjectArray *a__ = [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk([shape getParentAlgorithm])) getInput];
      OrgGeogebraCommonKernelGeosGeoElement * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      OrgGeogebraCommonKernelGeosGeoElement * const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        OrgGeogebraCommonKernelGeosGeoElement *geo = *b__++;
        [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) remove];
      }
    }
    [shape remove];
  }
  for (jint i = 0; i < n; i++) {
    *IOSDoubleArray_GetRef(freehand1, i) = JavaLangDouble_NaN;
  }
  for (jint i = 0; i < [self->penPoints_ size]; i++) {
    OrgGeogebraCommonAwtGPoint *p = [self->penPoints_ getWithInt:i];
    if (JavaLangDouble_isNaNWithDouble_(IOSDoubleArray_Get(freehand1, ((OrgGeogebraCommonAwtGPoint *) nil_chk(p))->x_ - self->minX_))) {
      *IOSDoubleArray_GetRef(freehand1, p->x_ - self->minX_) = [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordYWithDouble:p->y_];
    }
  }
  jdouble val = IOSDoubleArray_Get(freehand1, 0);
  jint valIndex = 0;
  jdouble nextVal = JavaLangDouble_NaN;
  jint nextValIndex = -1;
  for (jint i = 0; i < n; i++) {
    if (JavaLangDouble_isNaNWithDouble_(IOSDoubleArray_Get(freehand1, i))) {
      if (i > nextValIndex) {
        nextValIndex = i;
        while (nextValIndex < n && JavaLangDouble_isNaNWithDouble_(IOSDoubleArray_Get(freehand1, nextValIndex))) nextValIndex++;
      }
      if (nextValIndex >= n) *IOSDoubleArray_GetRef(freehand1, i) = val;
      else {
        nextVal = IOSDoubleArray_Get(freehand1, nextValIndex);
        *IOSDoubleArray_GetRef(freehand1, i) = (val * (nextValIndex - i) + nextVal * (i - valIndex)) / (nextValIndex - valIndex);
      }
    }
    else {
      val = IOSDoubleArray_Get(freehand1, i);
      valIndex = i;
    }
  }
  OrgGeogebraCommonKernelConstruction *cons = [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getKernel])) getConstruction];
  OrgGeogebraCommonKernelGeosGeoList *list = [new_OrgGeogebraCommonKernelGeosGeoList_initWithOrgGeogebraCommonKernelConstruction_(cons) autorelease];
  [list addWithOrgGeogebraCommonKernelGeosGeoElement:[new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons, OrgGeogebraCommonKernelKernel_checkDecimalFractionWithDouble_([((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordXWithDouble:self->minX_])) autorelease]];
  [list addWithOrgGeogebraCommonKernelGeosGeoElement:[new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons, OrgGeogebraCommonKernelKernel_checkDecimalFractionWithDouble_([self->view_ toRealWorldCoordXWithDouble:self->maxX_])) autorelease]];
  for (jint i = 0; i < n; i++) {
    [list addWithOrgGeogebraCommonKernelGeosGeoElement:[new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons, OrgGeogebraCommonKernelKernel_checkDecimalFractionWithDouble_(IOSDoubleArray_Get(freehand1, i))) autorelease]];
  }
  [((OrgGeogebraCommonKernelAlgosAlgoFunctionFreehand *) [new_OrgGeogebraCommonKernelAlgosAlgoFunctionFreehand_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelGeosGeoList_(cons, nil, list) autorelease]) getGeoElements];
  self->minX_ = JavaLangInteger_MAX_VALUE;
  self->maxX_ = JavaLangInteger_MIN_VALUE;
}

jint OrgGeogebraCommonEuclidianEuclidianPen_findPolygonalWithInt_withInt_withInt_withInt_withInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint start, jint end, jint n, jint offset1, jint offset2) {
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s = [new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self) autorelease];
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s1 = [new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self) autorelease];
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s2 = [new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self) autorelease];
  jint k, i1 = 0, i2 = 0, n1 = 0, n2;
  jdouble det1, det2;
  jint nsides = n;
  if (end == start) return 0;
  if (nsides <= 0) return 0;
  if (end - start < 5) nsides = 1;
  for (k = 0; k < nsides; ++k) {
    i1 = start + (k * (end - start)) / nsides;
    i2 = start + ((k + 1) * (end - start)) / nsides;
    OrgGeogebraCommonEuclidianEuclidianPen_calc_inertiaWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(self, i1, i2, s);
    if (OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s) < self->LINE_MAX_DET_) break;
  }
  if (k == nsides) return 0;
  while (YES) {
    if (i1 > start) {
      s1->mass_ = s->mass_;
      s1->sx_ = s->sx_;
      s1->sxx_ = s->sxx_;
      s1->sxy_ = s->sxy_;
      s1->syy_ = s->syy_;
      s1->sy_ = s->sy_;
      OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(self, i1 - 1, s1, 1);
      det1 = OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s1);
    }
    else det1 = 1;
    if (i2 < end) {
      s2->mass_ = s->mass_;
      s2->sx_ = s->sx_;
      s2->sxx_ = s->sxx_;
      s2->sxy_ = s->sxy_;
      s2->syy_ = s->syy_;
      s2->sy_ = s->sy_;
      OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(self, i2, s2, 1);
      det2 = OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s2);
    }
    else det2 = 1;
    if (det1 < det2 && det1 < self->LINE_MAX_DET_) {
      i1--;
      s->mass_ = s1->mass_;
      s->sx_ = s1->sx_;
      s->sxx_ = s1->sxx_;
      s->sxy_ = s1->sxy_;
      s->syy_ = s1->syy_;
      s->sy_ = s1->sy_;
    }
    else if (det2 < det1 && det2 < self->LINE_MAX_DET_) {
      i2++;
      s->mass_ = s2->mass_;
      s->sx_ = s2->sx_;
      s->sxx_ = s2->sxx_;
      s->sxy_ = s2->sxy_;
      s->syy_ = s2->syy_;
      s->sy_ = s2->sy_;
    }
    else break;
  }
  if (i1 > start) {
    n1 = OrgGeogebraCommonEuclidianEuclidianPen_findPolygonalWithInt_withInt_withInt_withInt_withInt_(self, start, i1, (i2 == end) ? (nsides - 1) : (nsides - 2), offset1, offset2);
    if (n1 == 0) return 0;
  }
  else n1 = 0;
  *IOSIntArray_GetRef(nil_chk(self->brk_), n1 + offset1) = i1;
  *IOSIntArray_GetRef(self->brk_, n1 + 1 + offset1) = i2;
  if (offset2 + n1 == 0) {
    ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->a_))->mass_ = s->mass_;
    self->a_->sx_ = s->sx_;
    self->a_->sxx_ = s->sxx_;
    self->a_->sxy_ = s->sxy_;
    self->a_->syy_ = s->syy_;
    self->a_->sy_ = s->sy_;
  }
  if (offset2 + n1 == 1) {
    ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_ = s->mass_;
    self->b_->sx_ = s->sx_;
    self->b_->sxx_ = s->sxx_;
    self->b_->sxy_ = s->sxy_;
    self->b_->syy_ = s->syy_;
    self->b_->sy_ = s->sy_;
  }
  if (offset2 + n1 == 2) {
    ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_ = s->mass_;
    self->c_->sx_ = s->sx_;
    self->c_->sxx_ = s->sxx_;
    self->c_->sxy_ = s->sxy_;
    self->c_->syy_ = s->syy_;
    self->c_->sy_ = s->sy_;
  }
  if (offset2 + n1 == 3) {
    ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->d_))->mass_ = s->mass_;
    self->d_->sx_ = s->sx_;
    self->d_->sxx_ = s->sxx_;
    self->d_->sxy_ = s->sxy_;
    self->d_->syy_ = s->syy_;
    self->d_->sy_ = s->sy_;
  }
  if (i2 < end) {
    n2 = OrgGeogebraCommonEuclidianEuclidianPen_findPolygonalWithInt_withInt_withInt_withInt_withInt_(self, i2, end, nsides - n1 - 1, offset1 + n1 + 1, offset2 + n1 + 1);
    if (n2 == 0.) return 0;
  }
  else n2 = 0;
  return n1 + n2 + 1;
}

void OrgGeogebraCommonEuclidianEuclidianPen_calc_inertiaWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint start, jint end, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  jint i;
  jint coeff = 1;
  IOSIntArray *temp1 = [IOSIntArray arrayWithLength:4];
  jdouble dm = 0;
  ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->mass_ = 0.;
  s->sx_ = 0.;
  s->sxx_ = 0.;
  s->sxy_ = 0.;
  s->sy_ = 0.;
  s->syy_ = 0.;
  *IOSIntArray_GetRef(temp1, 0) = ((OrgGeogebraCommonAwtGPoint *) nil_chk([((JavaUtilArrayList *) nil_chk(self->penPoints_)) getWithInt:start]))->x_;
  *IOSIntArray_GetRef(temp1, 1) = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:start]))->y_;
  *IOSIntArray_GetRef(temp1, 2) = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:start + 1]))->x_;
  *IOSIntArray_GetRef(temp1, 3) = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:start + 1]))->y_;
  dm = coeff * JavaLangMath_hypotWithDouble_withDouble_(IOSIntArray_Get(temp1, 2) - IOSIntArray_Get(temp1, 0), IOSIntArray_Get(temp1, 3) - IOSIntArray_Get(temp1, 1));
  s->mass_ = s->mass_ + dm;
  s->sx_ = s->sx_ + (dm * IOSIntArray_Get(temp1, 0));
  s->sxx_ = s->sxx_ + (dm * IOSIntArray_Get(temp1, 0) * IOSIntArray_Get(temp1, 0));
  s->sxy_ = s->sxy_ + (dm * IOSIntArray_Get(temp1, 0) * IOSIntArray_Get(temp1, 1));
  s->sy_ = s->sy_ + (dm * IOSIntArray_Get(temp1, 1));
  s->syy_ = s->syy_ + (dm * IOSIntArray_Get(temp1, 1) * IOSIntArray_Get(temp1, 1));
  for (i = start + 1; i < end; ++i) {
    *IOSIntArray_GetRef(temp1, 0) = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i]))->x_;
    *IOSIntArray_GetRef(temp1, 1) = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i]))->y_;
    *IOSIntArray_GetRef(temp1, 2) = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i + 1]))->x_;
    *IOSIntArray_GetRef(temp1, 3) = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i + 1]))->y_;
    dm = coeff * JavaLangMath_hypotWithDouble_withDouble_(IOSIntArray_Get(temp1, 2) - IOSIntArray_Get(temp1, 0), IOSIntArray_Get(temp1, 3) - IOSIntArray_Get(temp1, 1));
    s->mass_ = s->mass_ + dm;
    s->sx_ = s->sx_ + (dm * IOSIntArray_Get(temp1, 0));
    s->sxx_ = s->sxx_ + (dm * IOSIntArray_Get(temp1, 0) * IOSIntArray_Get(temp1, 0));
    s->sxy_ = s->sxy_ + (dm * IOSIntArray_Get(temp1, 0) * IOSIntArray_Get(temp1, 1));
    s->sy_ = s->sy_ + (dm * IOSIntArray_Get(temp1, 1));
    s->syy_ = s->syy_ + (dm * IOSIntArray_Get(temp1, 1) * IOSIntArray_Get(temp1, 1));
  }
}

jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  jdouble ixx = OrgGeogebraCommonEuclidianEuclidianPen_I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  jdouble iyy = OrgGeogebraCommonEuclidianEuclidianPen_I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  jdouble ixy = OrgGeogebraCommonEuclidianEuclidianPen_I_xyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  if (((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->mass_ <= 0.) return 0.;
  if (ixx + iyy <= 0.) return 0.;
  return 4 * (ixx * iyy - ixy * ixy) / (ixx + iyy) / (ixx + iyy);
}

jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  if (((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->mass_ <= 0.) return 0.;
  return (s->sxx_ - s->sx_ * s->sx_ / s->mass_) / s->mass_;
}

jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_xyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  if (((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->mass_ <= 0.) return 0.;
  return (s->sxy_ - s->sx_ * s->sy_ / s->mass_) / s->mass_;
}

jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  if (((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->mass_ <= 0.) return 0.;
  return (s->syy_ - s->sy_ * s->sy_ / s->mass_) / s->mass_;
}

jdouble OrgGeogebraCommonEuclidianEuclidianPen_score_circleWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint start, jint end, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  jdouble sum, x0, y0, r0, dm, deltar;
  jint i;
  if (((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->mass_ == 0.) return 0;
  sum = 0.;
  x0 = OrgGeogebraCommonEuclidianEuclidianPen_center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  y0 = OrgGeogebraCommonEuclidianEuclidianPen_center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  r0 = OrgGeogebraCommonEuclidianEuclidianPen_I_radWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  for (i = start; i < end; ++i) {
    dm = JavaLangMath_hypotWithDouble_withDouble_(((OrgGeogebraCommonAwtGPoint *) nil_chk([((JavaUtilArrayList *) nil_chk(self->penPoints_)) getWithInt:i + 1]))->x_ - ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i]))->x_, ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i + 1]))->y_ - ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i]))->y_);
    deltar = JavaLangMath_hypotWithDouble_withDouble_(((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i]))->x_ - x0, ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:i]))->y_ - y0) - r0;
    sum = sum + (dm * JavaLangMath_absWithDouble_(deltar));
  }
  return sum / (s->mass_ * r0);
}

jdouble OrgGeogebraCommonEuclidianEuclidianPen_center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  return ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->sx_ / s->mass_;
}

jdouble OrgGeogebraCommonEuclidianEuclidianPen_center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  return ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->sy_ / s->mass_;
}

jdouble OrgGeogebraCommonEuclidianEuclidianPen_I_radWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  jdouble ixx = OrgGeogebraCommonEuclidianEuclidianPen_I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  jdouble iyy = OrgGeogebraCommonEuclidianEuclidianPen_I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  if (ixx + iyy <= 0.) return 0.;
  return JavaLangMath_sqrtWithDouble_(ixx + iyy);
}

OrgGeogebraCommonKernelGeosGeoConic *OrgGeogebraCommonEuclidianEuclidianPen_makeACircleWithDouble_withDouble_withDouble_(OrgGeogebraCommonEuclidianEuclidianPen *self, jdouble x, jdouble y, jdouble r) {
  OrgGeogebraCommonEuclidianEuclidianPen_setAndConsume_temp_(self, new_JavaUtilArrayList_init());
  jint npts, i = 0;
  npts = J2ObjCFpToInt((2 * r));
  if (npts < 12) npts = 12;
  OrgGeogebraCommonAwtGPoint *p;
  for (i = 0; i <= npts; i++) {
    p = [new_OrgGeogebraCommonAwtGPoint_init() autorelease];
    p->x_ = J2ObjCFpToInt((x + r * JavaLangMath_cosWithDouble_((2 * i * JavaLangMath_PI) / npts)));
    p->y_ = J2ObjCFpToInt((y + r * JavaLangMath_sinWithDouble_((2 * i * JavaLangMath_PI) / npts)));
    [self->temp_ addWithId:p];
  }
  jint size = [self->temp_ size];
  jdouble x1 = [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordXWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:0]))->x_];
  jdouble y1 = [self->view_ toRealWorldCoordYWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:0]))->y_];
  jdouble x2 = [self->view_ toRealWorldCoordXWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:size / 3]))->x_];
  jdouble y2 = [self->view_ toRealWorldCoordYWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:size / 3]))->y_];
  jdouble x3 = [self->view_ toRealWorldCoordXWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:2 * size / 3]))->x_];
  jdouble y3 = [self->view_ toRealWorldCoordYWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:2 * size / 3]))->y_];
  if (x2 == x1) {
    x1 = [self->view_ toRealWorldCoordXWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:size / 4]))->x_];
    y1 = [self->view_ toRealWorldCoordYWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:size / 4]))->y_];
  }
  if (x2 == x3) {
    x3 = [self->view_ toRealWorldCoordXWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:11 * size / 12]))->x_];
    y3 = [self->view_ toRealWorldCoordYWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk([self->temp_ getWithInt:11 * size / 12]))->y_];
  }
  OrgGeogebraCommonKernelGeosGeoPoint *p1 = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_([((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getKernel])) getConstruction], x1, y1, 1.0) autorelease];
  OrgGeogebraCommonKernelGeosGeoPoint *q = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_([((OrgGeogebraCommonKernelKernel *) nil_chk([self->app_ getKernel])) getConstruction], x2, y2, 1.0) autorelease];
  OrgGeogebraCommonKernelGeosGeoPoint *z = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_([((OrgGeogebraCommonKernelKernel *) nil_chk([self->app_ getKernel])) getConstruction], x3, y3, 1.0) autorelease];
  OrgGeogebraCommonKernelAlgosAlgoCircleThreePoints *algo = [new_OrgGeogebraCommonKernelAlgosAlgoCircleThreePoints_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelKernelNDGeoPointND_withOrgGeogebraCommonKernelKernelNDGeoPointND_withOrgGeogebraCommonKernelKernelNDGeoPointND_([((OrgGeogebraCommonKernelKernel *) nil_chk([self->app_ getKernel])) getConstruction], nil, p1, q, z) autorelease];
  OrgGeogebraCommonKernelGeosGeoConic *circle = (OrgGeogebraCommonKernelGeosGeoConic *) check_class_cast([algo getCircle], [OrgGeogebraCommonKernelGeosGeoConic class]);
  [((OrgGeogebraCommonKernelGeosGeoConic *) nil_chk(circle)) updateRepaint];
  return circle;
}

OrgGeogebraCommonKernelGeosGeoConic *OrgGeogebraCommonEuclidianEuclidianPen_makeAConic(OrgGeogebraCommonEuclidianEuclidianPen *self) {
  jdouble px, py;
  OrgGeogebraCommonKernelConstruction *cons = [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getKernel])) getConstruction];
  jint order = 2;
  jint datasize = 10;
  if ([((JavaUtilArrayList *) nil_chk(self->penPoints_)) size] < datasize) {
    return nil;
  }
  jint step = [self->penPoints_ size] / datasize;
  OrgApacheCommonsMathLinearArray2DRowRealMatrix *M = [new_OrgApacheCommonsMathLinearArray2DRowRealMatrix_initWithInt_withInt_(datasize, order * (order + 1)) autorelease];
  IOSDoubleArray *coeffs = [IOSDoubleArray arrayWithLength:6];
  @try {
    jint r = 0;
    for (jint j = 0; j < datasize; j++) {
      OrgGeogebraCommonAwtGPoint *point = [self->penPoints_ getWithInt:r];
      r += step;
      px = [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordXWithDouble:[((OrgGeogebraCommonAwtGPoint *) nil_chk(point)) getX]];
      py = [self->view_ toRealWorldCoordYWithDouble:[point getY]];
      jint c1 = 0;
      for (jint i = 0; i <= order; i++) {
        for (jint xpower = 0; xpower <= i; xpower++) {
          jint ypower = i - xpower;
          jdouble val = OrgGeogebraCommonKernelStatisticsAlgoFitImplicit_powerWithDouble_withInt_(px, xpower) * OrgGeogebraCommonKernelStatisticsAlgoFitImplicit_powerWithDouble_withInt_(py, ypower);
          [M setEntryWithInt:j withInt:c1++ withDouble:val];
        }
      }
    }
    id<OrgApacheCommonsMathLinearSingularValueDecomposition> svd = [new_OrgApacheCommonsMathLinearSingularValueDecompositionImpl_initWithOrgApacheCommonsMathLinearRealMatrix_(M) autorelease];
    id<OrgApacheCommonsMathLinearRealMatrix> V = [svd getV];
    id<OrgApacheCommonsMathLinearRealVector> coeffsRV = [((id<OrgApacheCommonsMathLinearRealMatrix>) nil_chk(V)) getColumnVectorWithInt:5];
    for (jint i = 0; i < 6; i++) {
      *IOSDoubleArray_GetRef(coeffs, 5 - i) = [((id<OrgApacheCommonsMathLinearRealVector>) nil_chk(coeffsRV)) getEntryWithInt:i];
    }
  }
  @catch (JavaLangThrowable *t) {
    [((JavaLangThrowable *) nil_chk(t)) printStackTrace];
    return nil;
  }
  OrgGeogebraCommonKernelGeosGeoConic *conic = [new_OrgGeogebraCommonKernelGeosGeoConic_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDoubleArray_([((OrgGeogebraCommonKernelKernel *) nil_chk([self->app_ getKernel])) getConstruction], nil, coeffs) autorelease];
  OrgGeogebraCommonKernelGeosGeoPoint *point = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_([((OrgGeogebraCommonKernelKernel *) nil_chk([self->app_ getKernel])) getConstruction], 0, 0, 1) autorelease];
  jdouble error = 0;
  for (OrgGeogebraCommonAwtGPoint * __strong p in self->penPoints_) {
    [point setCoordsWithDouble:[((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordXWithDouble:((OrgGeogebraCommonAwtGPoint *) nil_chk(p))->x_] withDouble:[self->view_ toRealWorldCoordYWithDouble:p->y_] withDouble:1];
    error += [conic distanceWithOrgGeogebraCommonKernelGeosGeoPoint:point];
  }
  error /= [self->penPoints_ size];
  if ([conic isDefined] && [conic getHalfAxisWithInt:0] / error > OrgGeogebraCommonEuclidianEuclidianPen_CONIC_AXIS_ERROR_RATIO && [conic getHalfAxisWithInt:1] / error > OrgGeogebraCommonEuclidianEuclidianPen_CONIC_AXIS_ERROR_RATIO) {
    OrgGeogebraCommonKernelAlgosAlgoFocus *algo = [new_OrgGeogebraCommonKernelAlgosAlgoFocus_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelKernelNDGeoConicND_(cons, [IOSObjectArray arrayWithObjects:(id[]){ nil, nil } count:2 type:NSString_class_()], conic) autorelease];
    IOSObjectArray *focus = [algo getFocus];
    jint type = [conic getType];
    OrgGeogebraCommonKernelGeosGeoPoint *pointOnConic = [((OrgGeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk([self->app_ getKernel])) getAlgoDispatcher])) PointWithNSString:nil withOrgGeogebraCommonKernelPath:conic withOrgGeogebraCommonKernelArithmeticNumberValue:nil];
    [conic remove];
    OrgGeogebraCommonKernelGeosGeoPoint *f0 = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_(cons, nil, [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(nil_chk(focus), 0))) getInhomX], [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(focus, 0))) getInhomY], 1) autorelease];
    OrgGeogebraCommonKernelGeosGeoPoint *f1 = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_(cons, nil, [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(focus, 1))) getInhomX], [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(focus, 1))) getInhomY], 1) autorelease];
    OrgGeogebraCommonKernelGeosGeoPoint *additionalPoint = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_(cons, nil, [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(pointOnConic)) getInhomX], [pointOnConic getInhomY], 1) autorelease];
    conic = (OrgGeogebraCommonKernelGeosGeoConic *) check_class_cast([((OrgGeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk([self->app_ getKernel])) getAlgoDispatcher])) EllipseHyperbolaWithNSString:nil withOrgGeogebraCommonKernelKernelNDGeoPointND:f0 withOrgGeogebraCommonKernelKernelNDGeoPointND:f1 withOrgGeogebraCommonKernelKernelNDGeoPointND:additionalPoint withInt:type], [OrgGeogebraCommonKernelGeosGeoConic class]);
  }
  else {
    [conic remove];
    conic = nil;
  }
  return conic;
}

jint OrgGeogebraCommonEuclidianEuclidianPen_getDeltaXWithOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(OrgGeogebraCommonAwtGPoint *startPoint2, OrgGeogebraCommonAwtGPoint *point) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  return ((OrgGeogebraCommonAwtGPoint *) nil_chk(point))->x_ - ((OrgGeogebraCommonAwtGPoint *) nil_chk(startPoint2))->x_;
}

jint OrgGeogebraCommonEuclidianEuclidianPen_getDeltaYWithOrgGeogebraCommonAwtGPoint_withOrgGeogebraCommonAwtGPoint_(OrgGeogebraCommonAwtGPoint *startPoint2, OrgGeogebraCommonAwtGPoint *point) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  return ((OrgGeogebraCommonAwtGPoint *) nil_chk(point))->y_ - ((OrgGeogebraCommonAwtGPoint *) nil_chk(startPoint2))->y_;
}

void OrgGeogebraCommonEuclidianEuclidianPen_saveMoveWithNSString_(OrgGeogebraCommonEuclidianEuclidianPen *self, NSString *move) {
  if (([((JavaLangStringBuffer *) nil_chk(self->gesture_)) length] == 0) || ([self->gesture_ charAtWithInt:[self->gesture_ length] - 1] == [((NSString *) nil_chk(move)) charAtWithInt:0]) || self->count_ == 1) self->count_++;
  else self->count_ = 1;
  if (([self->gesture_ length] > 0) && (([self->gesture_ charAtWithInt:[self->gesture_ length] - 1] == [((NSString *) nil_chk(move)) charAtWithInt:0]) || self->count_ != 2)) return;
  [self->gesture_ appendWithNSString:move];
}

NSString *OrgGeogebraCommonEuclidianEuclidianPen_getGesture(OrgGeogebraCommonEuclidianEuclidianPen *self) {
  return [((JavaLangStringBuffer *) nil_chk(self->gesture_)) description];
}

void OrgGeogebraCommonEuclidianEuclidianPen_clearTemporaryInfo(OrgGeogebraCommonEuclidianEuclidianPen *self) {
  OrgGeogebraCommonEuclidianEuclidianPen_set_startPoint_(self, nil);
  [self->gesture_ delete__WithInt:0 withInt:[((JavaLangStringBuffer *) nil_chk(self->gesture_)) length]];
}

void OrgGeogebraCommonEuclidianEuclidianPen_optimize_polygonalWithInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint nsides) {
  jint i;
  jdouble cost, newcost;
  jboolean improved;
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *temp1 = [new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self) autorelease];
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *temp2 = [new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self) autorelease];
  for (i = 1; i < nsides; ++i) {
    if ((i - 1) == 0) {
      temp1->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->a_))->mass_;
      temp1->sx_ = self->a_->sx_;
      temp1->sxx_ = self->a_->sxx_;
      temp1->sxy_ = self->a_->sxy_;
      temp1->sy_ = self->a_->sy_;
      temp1->syy_ = self->a_->syy_;
      temp2->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_;
      temp2->sx_ = self->b_->sx_;
      temp2->sxx_ = self->b_->sxx_;
      temp2->sxy_ = self->b_->sxy_;
      temp2->sy_ = self->b_->sy_;
      temp2->syy_ = self->b_->syy_;
    }
    if ((i - 1) == 1) {
      temp1->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_;
      temp1->sx_ = self->b_->sx_;
      temp1->sxx_ = self->b_->sxx_;
      temp1->sxy_ = self->b_->sxy_;
      temp1->sy_ = self->b_->sy_;
      temp1->syy_ = self->b_->syy_;
      temp2->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_;
      temp2->sx_ = self->c_->sx_;
      temp2->sxx_ = self->c_->sxx_;
      temp2->sxy_ = self->c_->sxy_;
      temp2->sy_ = self->c_->sy_;
      temp2->syy_ = self->c_->syy_;
    }
    if ((i - 1) == 2) {
      temp1->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_;
      temp1->sx_ = self->c_->sx_;
      temp1->sxx_ = self->c_->sxx_;
      temp1->sxy_ = self->c_->sxy_;
      temp1->sy_ = self->c_->sy_;
      temp1->syy_ = self->c_->syy_;
      temp2->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->d_))->mass_;
      temp2->sx_ = self->d_->sx_;
      temp2->sxx_ = self->d_->sxx_;
      temp2->sxy_ = self->d_->sxy_;
      temp2->sy_ = self->d_->sy_;
      temp2->syy_ = self->d_->syy_;
    }
    cost = OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp1) * OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp1) + OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp2) * OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp2);
    improved = NO;
    while (IOSIntArray_Get(nil_chk(self->brk_), i) > IOSIntArray_Get(self->brk_, i - 1) + 1) {
      OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(self, IOSIntArray_Get(self->brk_, i) - 1, temp1, -1);
      OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(self, IOSIntArray_Get(self->brk_, i) - 1, temp2, 1);
      newcost = OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp1) * OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp1) + OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp2) * OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp2);
      if (newcost >= cost) break;
      improved = YES;
      cost = newcost;
      (*IOSIntArray_GetRef(self->brk_, i))--;
      if (i - 1 == 0) {
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->a_))->mass_ = temp1->mass_;
        self->a_->sx_ = temp1->sx_;
        self->a_->sy_ = temp1->sy_;
        self->a_->sxx_ = temp1->sxx_;
        self->a_->sxy_ = temp1->sxy_;
        self->a_->syy_ = temp1->syy_;
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_ = temp2->mass_;
        self->b_->sx_ = temp2->sx_;
        self->b_->sy_ = temp2->sy_;
        self->b_->sxx_ = temp2->sxx_;
        self->b_->sxy_ = temp2->sxy_;
        self->b_->syy_ = temp2->syy_;
      }
      if (i - 1 == 1) {
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_ = temp1->mass_;
        self->b_->sx_ = temp1->sx_;
        self->b_->sy_ = temp1->sy_;
        self->b_->sxx_ = temp1->sxx_;
        self->b_->sxy_ = temp1->sxy_;
        self->b_->syy_ = temp1->syy_;
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_ = temp2->mass_;
        self->c_->sx_ = temp2->sx_;
        self->c_->sy_ = temp2->sy_;
        self->c_->sxx_ = temp2->sxx_;
        self->c_->sxy_ = temp2->sxy_;
        self->c_->syy_ = temp2->syy_;
      }
      if (i - 1 == 2) {
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_ = temp1->mass_;
        self->c_->sx_ = temp1->sx_;
        self->c_->sy_ = temp1->sy_;
        self->c_->sxx_ = temp1->sxx_;
        self->c_->sxy_ = temp1->sxy_;
        self->c_->syy_ = temp1->syy_;
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->d_))->mass_ = temp2->mass_;
        self->d_->sx_ = temp2->sx_;
        self->d_->sy_ = temp2->sy_;
        self->d_->sxx_ = temp2->sxx_;
        self->d_->sxy_ = temp2->sxy_;
        self->d_->syy_ = temp2->syy_;
      }
    }
    if (improved) continue;
    if ((i - 1) == 0) {
      temp1->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->a_))->mass_;
      temp1->sx_ = self->a_->sx_;
      temp1->sxx_ = self->a_->sxx_;
      temp1->sxy_ = self->a_->sxy_;
      temp1->sy_ = self->a_->sy_;
      temp1->syy_ = self->a_->syy_;
      temp2->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_;
      temp2->sx_ = self->b_->sx_;
      temp2->sxx_ = self->b_->sxx_;
      temp2->sxy_ = self->b_->sxy_;
      temp2->sy_ = self->b_->sy_;
      temp2->syy_ = self->b_->syy_;
    }
    if ((i - 1) == 1) {
      temp1->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_;
      temp1->sx_ = self->b_->sx_;
      temp1->sxx_ = self->b_->sxx_;
      temp1->sxy_ = self->b_->sxy_;
      temp1->sy_ = self->b_->sy_;
      temp1->syy_ = self->b_->syy_;
      temp2->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_;
      temp2->sx_ = self->c_->sx_;
      temp2->sxx_ = self->c_->sxx_;
      temp2->sxy_ = self->c_->sxy_;
      temp2->sy_ = self->c_->sy_;
      temp2->syy_ = self->c_->syy_;
    }
    if ((i - 1) == 2) {
      temp1->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_;
      temp1->sx_ = self->c_->sx_;
      temp1->sxx_ = self->c_->sxx_;
      temp1->sxy_ = self->c_->sxy_;
      temp1->sy_ = self->c_->sy_;
      temp1->syy_ = self->c_->syy_;
      temp2->mass_ = ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->d_))->mass_;
      temp2->sx_ = self->d_->sx_;
      temp2->sxx_ = self->d_->sxx_;
      temp2->sxy_ = self->d_->sxy_;
      temp2->sy_ = self->d_->sy_;
      temp2->syy_ = self->d_->syy_;
    }
    while (IOSIntArray_Get(self->brk_, i) < IOSIntArray_Get(self->brk_, i + 1) - 1) {
      OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(self, IOSIntArray_Get(self->brk_, i), temp1, 1);
      OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(self, IOSIntArray_Get(self->brk_, i), temp2, -1);
      newcost = (OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp1) * OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp1)) + (OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp2) * OrgGeogebraCommonEuclidianEuclidianPen_I_detWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(temp2));
      if (newcost >= cost) break;
      cost = newcost;
      (*IOSIntArray_GetRef(self->brk_, i))++;
      if (i - 1 == 0) {
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->a_))->mass_ = temp1->mass_;
        self->a_->sx_ = temp1->sx_;
        self->a_->sy_ = temp1->sy_;
        self->a_->sxx_ = temp1->sxx_;
        self->a_->sxy_ = temp1->sxy_;
        self->a_->syy_ = temp1->syy_;
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_ = temp2->mass_;
        self->b_->sx_ = temp2->sx_;
        self->b_->sy_ = temp2->sy_;
        self->b_->sxx_ = temp2->sxx_;
        self->b_->sxy_ = temp2->sxy_;
        self->b_->syy_ = temp2->syy_;
      }
      if (i - 1 == 1) {
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->b_))->mass_ = temp1->mass_;
        self->b_->sx_ = temp1->sx_;
        self->b_->sy_ = temp1->sy_;
        self->b_->sxx_ = temp1->sxx_;
        self->b_->sxy_ = temp1->sxy_;
        self->b_->syy_ = temp1->syy_;
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_ = temp2->mass_;
        self->c_->sx_ = temp2->sx_;
        self->c_->sy_ = temp2->sy_;
        self->c_->sxx_ = temp2->sxx_;
        self->c_->sxy_ = temp2->sxy_;
        self->c_->syy_ = temp2->syy_;
      }
      if (i - 1 == 2) {
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->c_))->mass_ = temp1->mass_;
        self->c_->sx_ = temp1->sx_;
        self->c_->sy_ = temp1->sy_;
        self->c_->sxx_ = temp1->sxx_;
        self->c_->sxy_ = temp1->sxy_;
        self->c_->syy_ = temp1->syy_;
        ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(self->d_))->mass_ = temp2->mass_;
        self->d_->sx_ = temp2->sx_;
        self->d_->sy_ = temp2->sy_;
        self->d_->sxx_ = temp2->sxx_;
        self->d_->sxy_ = temp2->sxy_;
        self->d_->syy_ = temp2->syy_;
      }
    }
  }
}

void OrgGeogebraCommonEuclidianEuclidianPen_incr_inertiaWithInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint start, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s, jint coeff) {
  jdouble pt1_x = ((OrgGeogebraCommonAwtGPoint *) nil_chk([((JavaUtilArrayList *) nil_chk(self->penPoints_)) getWithInt:start]))->x_;
  jdouble pt1_y = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:start]))->y_;
  jdouble pt2_x = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:start + 1]))->x_;
  jdouble pt2_y = ((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:start + 1]))->y_;
  jdouble dm = 0;
  dm = coeff * JavaLangMath_hypotWithDouble_withDouble_(pt2_x - pt1_x, pt2_y - pt1_y);
  ((OrgGeogebraCommonEuclidianEuclidianPen_Inertia *) nil_chk(s))->mass_ = s->mass_ + dm;
  s->sx_ = s->sx_ + (dm * pt1_x);
  s->sy_ = s->sy_ + (dm * pt1_y);
  s->sxx_ = s->sxx_ + (dm * pt1_x * pt1_x);
  s->syy_ = s->syy_ + (dm * pt1_y * pt1_y);
  s->sxy_ = s->sxy_ + (dm * pt1_x * pt1_y);
}

void OrgGeogebraCommonEuclidianEuclidianPen_get_segment_geometryWithInt_withInt_withOrgGeogebraCommonEuclidianEuclidianPen_Inertia_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint begin, jint end, OrgGeogebraCommonEuclidianEuclidianPen_Inertia *s, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r) {
  jdouble a1, b1, c1, lmin, lmax, l;
  jint i;
  jint start = begin;
  ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r))->xcenter_ = OrgGeogebraCommonEuclidianEuclidianPen_center_xWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  r->ycenter_ = OrgGeogebraCommonEuclidianEuclidianPen_center_yWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  a1 = OrgGeogebraCommonEuclidianEuclidianPen_I_xxWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  b1 = OrgGeogebraCommonEuclidianEuclidianPen_I_xyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  c1 = OrgGeogebraCommonEuclidianEuclidianPen_I_yyWithOrgGeogebraCommonEuclidianEuclidianPen_Inertia_(s);
  r->angle_ = JavaLangMath_atan2WithDouble_withDouble_(2 * b1, a1 - c1) / 2;
  r->radius_ = JavaLangMath_sqrtWithDouble_(3 * (a1 + c1));
  lmin = lmax = 0;
  for (i = start; i <= end; ++i) {
    l = (((OrgGeogebraCommonAwtGPoint *) nil_chk([((JavaUtilArrayList *) nil_chk(self->penPoints_)) getWithInt:start]))->x_ - r->xcenter_) * JavaLangMath_cosWithDouble_(r->angle_) + (((OrgGeogebraCommonAwtGPoint *) nil_chk([self->penPoints_ getWithInt:start]))->y_ - r->ycenter_) * JavaLangMath_sinWithDouble_(r->angle_);
    if (l < lmin) lmin = l;
    if (l > lmax) lmax = l;
    start++;
  }
  r->x1_ = r->xcenter_ + lmin * JavaLangMath_cosWithDouble_(r->angle_);
  r->y1_ = r->ycenter_ + lmin * JavaLangMath_sinWithDouble_(r->angle_);
  r->x2_ = r->xcenter_ + lmax * JavaLangMath_cosWithDouble_(r->angle_);
  r->y2_ = r->ycenter_ + lmax * JavaLangMath_sinWithDouble_(r->angle_);
}

OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonEuclidianEuclidianPen_try_rectangle(OrgGeogebraCommonEuclidianEuclidianPen *self) {
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *rs = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r1 = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r2 = nil;
  jint i;
  jdouble dist, avg_angle = 0;
  IOSDoubleArray *pt = [IOSDoubleArray arrayWithLength:2];
  OrgGeogebraCommonKernelConstruction *cons = [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getKernel])) getConstruction];
  OrgGeogebraCommonKernelAlgosAlgoPolygon *algo = nil;
  jdouble x_first = 0;
  jdouble y_first = 0;
  IOSDoubleArray *points = [IOSDoubleArray arrayWithLength:10];
  if (self->recognizer_queue_length_ < 4) return nil;
  if (self->recognizer_queue_length_ - 4 == 0) rs = self->reco_queue_a_;
  if (self->recognizer_queue_length_ - 4 == 1) rs = self->reco_queue_b_;
  if (self->recognizer_queue_length_ - 4 == 2) rs = self->reco_queue_c_;
  if (self->recognizer_queue_length_ - 4 == 3) rs = self->reco_queue_d_;
  if (self->recognizer_queue_length_ - 4 == 4) rs = self->reco_queue_e_;
  if (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(rs))->startpt_ != 0) return nil;
  for (i = 0; i <= 3; ++i) {
    if (self->recognizer_queue_length_ - 4 + i == 0) r1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 4 + i == 1) r1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 4 + i == 2) r1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 4 + i == 3) r1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 4 + i == 4) r1 = self->reco_queue_e_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 0) r2 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 1) r2 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 2) r2 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 3) r2 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 4) r2 = self->reco_queue_e_;
    if (JavaLangMath_absWithDouble_(JavaLangMath_absWithDouble_(((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r1))->angle_ - ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r2))->angle_) - JavaLangMath_PI / 2) > self->RECTANGLE_ANGLE_TOLERANCE_) return nil;
    avg_angle = avg_angle + r1->angle_;
    if (r2->angle_ > r1->angle_) avg_angle = avg_angle + ((i + 1) * JavaLangMath_PI / 2);
    else avg_angle = avg_angle - ((i + 1) * JavaLangMath_PI / 2);
    r1->reversed_ = (((r1->x2_ - r1->x1_) * (r2->xcenter_ - r1->xcenter_) + (r1->y2_ - r1->y1_) * (r2->ycenter_ - r1->ycenter_)) < 0);
  }
  for (i = 0; i <= 3; ++i) {
    if (self->recognizer_queue_length_ - 4 + i == 0) r1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 4 + i == 1) r1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 4 + i == 2) r1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 4 + i == 3) r1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 4 + i == 4) r1 = self->reco_queue_e_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 0) r2 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 1) r2 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 2) r2 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 3) r2 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 4 + ((i + 1) % 4) == 4) r2 = self->reco_queue_e_;
    dist = JavaLangMath_hypotWithDouble_withDouble_((((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r1))->reversed_ ? r1->x1_ : r1->x2_) - (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r2))->reversed_ ? r2->x2_ : r2->x1_), (r1->reversed_ ? r1->y1_ : r1->y2_) - (r2->reversed_ ? r2->y2_ : r2->y1_));
    if (dist > self->RECTANGLE_LINEAR_TOLERANCE_ * (r1->radius_ + r2->radius_)) return nil;
  }
  avg_angle = avg_angle / 4;
  if (JavaLangMath_absWithDouble_(avg_angle) < self->SLANT_TOLERANCE_) avg_angle = 0;
  if (JavaLangMath_absWithDouble_(avg_angle) > JavaLangMath_PI / 2 - self->SLANT_TOLERANCE_) avg_angle = JavaLangMath_PI / 2;
  for (i = 0; i <= 3; ++i) {
    if (self->recognizer_queue_length_ - 4 + i == 0) r1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 4 + i == 1) r1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 4 + i == 2) r1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 4 + i == 3) r1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 4 + i == 4) r1 = self->reco_queue_e_;
    ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r1))->angle_ = avg_angle + i * JavaLangMath_PI / 2;
  }
  for (i = 0; i <= 3; ++i) {
    if (self->recognizer_queue_length_ - 4 + i == 0) r1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 4 + i == 1) r1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 4 + i == 2) r1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 4 + i == 3) r1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 4 + i == 4) r1 = self->reco_queue_e_;
    if (self->recognizer_queue_length_ - 4 + (i + 1) % 4 == 0) r2 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 4 + (i + 1) % 4 == 1) r2 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 4 + (i + 1) % 4 == 2) r2 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 4 + (i + 1) % 4 == 3) r2 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 4 + (i + 1) % 4 == 4) r2 = self->reco_queue_e_;
    OrgGeogebraCommonEuclidianEuclidianPen_calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withDoubleArray_(r1, r2, pt);
    *IOSDoubleArray_GetRef(points, 2 * i + 2) = IOSDoubleArray_Get(pt, 0);
    *IOSDoubleArray_GetRef(points, 2 * i + 3) = IOSDoubleArray_Get(pt, 1);
  }
  *IOSDoubleArray_GetRef(points, 0) = IOSDoubleArray_Get(points, 8);
  *IOSDoubleArray_GetRef(points, 1) = IOSDoubleArray_Get(points, 9);
  IOSObjectArray *pts = [IOSObjectArray arrayWithLength:4 type:OrgGeogebraCommonKernelKernelNDGeoPointND_class_()];
  jdouble offsetInitialPointX = 0;
  jdouble offsetInitialPointY = 0;
  for (i = 0; i < 4; ++i) {
    x_first = [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordXWithDouble:IOSDoubleArray_Get(points, 2 * i)] + offsetInitialPointX;
    y_first = [self->view_ toRealWorldCoordYWithDouble:IOSDoubleArray_Get(points, 2 * i + 1)] + offsetInitialPointY;
    if (i == 0 && self->initialPoint_ != nil && [self->initialPoint_ isIndependent]) {
      offsetInitialPointX = self->initialPoint_->x_ - x_first;
      offsetInitialPointY = self->initialPoint_->y_ - y_first;
      IOSObjectArray_Set(pts, 0, self->initialPoint_);
    }
    else {
      IOSObjectArray_SetAndConsume(pts, i, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_(cons, nil, x_first, y_first, 1.0));
    }
  }
  algo = [new_OrgGeogebraCommonKernelAlgosAlgoPolygon_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_(cons, nil, pts) autorelease];
  OrgGeogebraCommonKernelGeosGeoElement *poly = IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0);
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(poly)) updateRepaint];
  return poly;
}

OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonEuclidianEuclidianPen_try_arrow(OrgGeogebraCommonEuclidianEuclidianPen *self) {
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *rs = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *temp1 = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *temp2 = nil;
  jint i, j;
  IOSDoubleArray *alpha = [IOSDoubleArray arrayWithLength:3];
  IOSDoubleArray *pt = [IOSDoubleArray arrayWithLength:2];
  jdouble dist, delta;
  jdouble x1, y1, x2, y2, angle;
  IOSBooleanArray *rev = [IOSBooleanArray arrayWithLength:3];
  OrgGeogebraCommonKernelConstruction *cons = [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getKernel])) getConstruction];
  OrgGeogebraCommonKernelGeosGeoPoint *p = nil;
  OrgGeogebraCommonKernelGeosGeoPoint *q = nil;
  OrgGeogebraCommonKernelAlgosAlgoJoinPointsSegment *algo = nil;
  jdouble x_first = 0;
  jdouble y_first = 0;
  jdouble x_last = 0;
  jdouble y_last = 0;
  if (self->recognizer_queue_length_ < 3) return nil;
  if (self->recognizer_queue_length_ - 3 == 0) rs = self->reco_queue_a_;
  if (self->recognizer_queue_length_ - 3 == 1) rs = self->reco_queue_b_;
  if (self->recognizer_queue_length_ - 3 == 2) rs = self->reco_queue_c_;
  if (self->recognizer_queue_length_ - 3 == 3) rs = self->reco_queue_d_;
  if (self->recognizer_queue_length_ - 3 == 4) rs = self->reco_queue_e_;
  if (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(rs))->startpt_ != 0) return nil;
  for (i = 1; i <= 2; ++i) {
    if (self->recognizer_queue_length_ - 3 + i == 0) temp1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 3 + i == 1) temp1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 3 + i == 2) temp1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 3 + i == 3) temp1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 3 + i == 4) temp1 = self->reco_queue_e_;
    if (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(temp1))->radius_ > self->ARROW_MAXSIZE_ * rs->radius_) return nil;
    *IOSBooleanArray_GetRef(rev, i) = ((JavaLangMath_hypotWithDouble_withDouble_(temp1->xcenter_ - rs->x1_, temp1->ycenter_ - rs->y1_)) < (JavaLangMath_hypotWithDouble_withDouble_(temp1->xcenter_ - rs->x2_, temp1->ycenter_ - rs->y2_)));
  }
  if (IOSBooleanArray_Get(rev, 1) != IOSBooleanArray_Get(rev, 2)) return nil;
  if (IOSBooleanArray_Get(rev, 1)) {
    x1 = rs->x2_;
    y1 = rs->y2_;
    x2 = rs->x1_;
    y2 = rs->y1_;
    angle = rs->angle_ + JavaLangMath_PI;
  }
  else {
    x1 = rs->x1_;
    y1 = rs->y1_;
    x2 = rs->x2_;
    y2 = rs->y2_;
    angle = rs->angle_;
  }
  for (i = 1; i <= 2; ++i) {
    if (self->recognizer_queue_length_ - 3 + i == 0) temp1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 3 + i == 1) temp1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 3 + i == 2) temp1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 3 + i == 3) temp1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 3 + i == 4) temp1 = self->reco_queue_e_;
    ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(temp1))->reversed_ = NO;
    *IOSDoubleArray_GetRef(alpha, i) = temp1->angle_ - angle;
    while (IOSDoubleArray_Get(alpha, i) < -JavaLangMath_PI / 2) {
      *IOSDoubleArray_GetRef(alpha, i) = IOSDoubleArray_Get(alpha, i) + JavaLangMath_PI;
      temp1->reversed_ = !temp1->reversed_;
    }
    while (IOSDoubleArray_Get(alpha, i) > JavaLangMath_PI / 2) {
      *IOSDoubleArray_GetRef(alpha, i) = IOSDoubleArray_Get(alpha, i) - JavaLangMath_PI;
      temp1->reversed_ = !temp1->reversed_;
    }
    if (JavaLangMath_absWithDouble_(IOSDoubleArray_Get(alpha, i)) < self->ARROW_ANGLE_MIN_ || JavaLangMath_absWithDouble_(IOSDoubleArray_Get(alpha, i)) > self->ARROW_ANGLE_MAX_) return nil;
  }
  if (IOSDoubleArray_Get(alpha, 1) * IOSDoubleArray_Get(alpha, 2) > 0 || JavaLangMath_absWithDouble_(IOSDoubleArray_Get(alpha, 1) + IOSDoubleArray_Get(alpha, 2)) > self->ARROW_ASYMMETRY_MAX_ANGLE_) return nil;
  if (self->recognizer_queue_length_ - 2 == 0) temp1 = self->reco_queue_a_;
  if (self->recognizer_queue_length_ - 2 == 1) temp1 = self->reco_queue_b_;
  if (self->recognizer_queue_length_ - 2 == 2) temp1 = self->reco_queue_c_;
  if (self->recognizer_queue_length_ - 2 == 3) temp1 = self->reco_queue_d_;
  if (self->recognizer_queue_length_ - 2 == 4) temp1 = self->reco_queue_e_;
  if (self->recognizer_queue_length_ - 1 == 0) temp2 = self->reco_queue_a_;
  if (self->recognizer_queue_length_ - 1 == 1) temp2 = self->reco_queue_b_;
  if (self->recognizer_queue_length_ - 1 == 2) temp2 = self->reco_queue_c_;
  if (self->recognizer_queue_length_ - 1 == 3) temp2 = self->reco_queue_d_;
  if (self->recognizer_queue_length_ - 1 == 4) temp2 = self->reco_queue_e_;
  if (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(temp1))->radius_ / ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(temp2))->radius_ > 1 + self->ARROW_ASYMMETRY_MAX_LINEAR_) return nil;
  if (temp2->radius_ / temp1->radius_ > 1 + self->ARROW_ASYMMETRY_MAX_LINEAR_) return nil;
  OrgGeogebraCommonEuclidianEuclidianPen_calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withDoubleArray_(temp1, temp2, pt);
  for (j = 1; j <= 2; ++j) {
    if (self->recognizer_queue_length_ - 3 + j == 0) temp1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - 3 + j == 1) temp1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - 3 + j == 2) temp1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - 3 + j == 3) temp1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - 3 + j == 4) temp1 = self->reco_queue_e_;
    dist = JavaLangMath_hypotWithDouble_withDouble_(IOSDoubleArray_Get(pt, 0) - (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(temp1))->reversed_ ? temp1->x1_ : temp1->x2_), IOSDoubleArray_Get(pt, 1) - (temp1->reversed_ ? temp1->y1_ : temp1->y2_));
    if (dist > self->ARROW_TIP_LINEAR_TOLERANCE_ * temp1->radius_) return nil;
  }
  dist = (IOSDoubleArray_Get(pt, 0) - x2) * JavaLangMath_sinWithDouble_(angle) - (IOSDoubleArray_Get(pt, 1) - y2) * JavaLangMath_cosWithDouble_(angle);
  if (self->recognizer_queue_length_ - 3 + 1 == 0) temp1 = self->reco_queue_a_;
  if (self->recognizer_queue_length_ - 3 + 1 == 1) temp1 = self->reco_queue_b_;
  if (self->recognizer_queue_length_ - 3 + 1 == 2) temp1 = self->reco_queue_c_;
  if (self->recognizer_queue_length_ - 3 + 1 == 3) temp1 = self->reco_queue_d_;
  if (self->recognizer_queue_length_ - 3 + 1 == 4) temp1 = self->reco_queue_e_;
  if (self->recognizer_queue_length_ - 3 + 2 == 0) temp2 = self->reco_queue_a_;
  if (self->recognizer_queue_length_ - 3 + 2 == 1) temp2 = self->reco_queue_b_;
  if (self->recognizer_queue_length_ - 3 + 2 == 2) temp2 = self->reco_queue_c_;
  if (self->recognizer_queue_length_ - 3 + 2 == 3) temp2 = self->reco_queue_d_;
  if (self->recognizer_queue_length_ - 3 + 2 == 4) temp2 = self->reco_queue_e_;
  dist = dist / (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(temp1))->radius_ + ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(temp2))->radius_);
  if (JavaLangMath_absWithDouble_(dist) > self->ARROW_SIDEWAYS_GAP_TOLERANCE_) return nil;
  dist = (IOSDoubleArray_Get(pt, 0) - x2) * JavaLangMath_cosWithDouble_(angle) + (IOSDoubleArray_Get(pt, 1) - y2) * JavaLangMath_sinWithDouble_(angle);
  dist = dist / (temp1->radius_ + temp2->radius_);
  if (dist < self->ARROW_MAIN_LINEAR_GAP_MIN_ || dist > self->ARROW_MAIN_LINEAR_GAP_MAX_) return nil;
  if (JavaLangMath_absWithDouble_(rs->angle_) < self->SLANT_TOLERANCE_) {
    angle = angle - rs->angle_;
    y1 = y2 = rs->ycenter_;
  }
  if (rs->angle_ > JavaLangMath_PI / 2 - self->SLANT_TOLERANCE_) {
    angle = angle - (rs->angle_ - JavaLangMath_PI / 2);
    x1 = x2 = rs->xcenter_;
  }
  if (rs->angle_ < -JavaLangMath_PI / 2 + self->SLANT_TOLERANCE_) {
    angle = angle - (rs->angle_ + JavaLangMath_PI / 2);
    x1 = x2 = rs->xcenter_;
  }
  delta = JavaLangMath_absWithDouble_(IOSDoubleArray_Get(alpha, 1) - IOSDoubleArray_Get(alpha, 2)) / 2;
  dist = (JavaLangMath_hypotWithDouble_withDouble_(temp1->x1_ - temp1->x2_, temp1->y1_ - temp1->y2_) + JavaLangMath_hypotWithDouble_withDouble_(temp2->x1_ - temp2->x2_, temp2->y1_ - temp2->y2_)) / 2;
  x_first = [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordXWithDouble:x1];
  y_first = [self->view_ toRealWorldCoordYWithDouble:y1];
  x_last = [self->view_ toRealWorldCoordXWithDouble:x2];
  y_last = [self->view_ toRealWorldCoordYWithDouble:y2];
  p = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons, x_first, y_first, 1.0) autorelease];
  q = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons, x_last, y_last, 1.0) autorelease];
  algo = [new_OrgGeogebraCommonKernelAlgosAlgoJoinPointsSegment_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelGeosGeoPoint_withOrgGeogebraCommonKernelGeosGeoPoint_(cons, nil, p, q) autorelease];
  OrgGeogebraCommonKernelGeosGeoElement *line = IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0);
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(line)) updateRepaint];
  x_first = [self->view_ toRealWorldCoordXWithDouble:(x2 - dist * JavaLangMath_cosWithDouble_(angle + delta))];
  y_first = [self->view_ toRealWorldCoordYWithDouble:(y2 - dist * JavaLangMath_sinWithDouble_(angle + delta))];
  p = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons, x_first, y_first, 1.0) autorelease];
  algo = [new_OrgGeogebraCommonKernelAlgosAlgoJoinPointsSegment_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelGeosGeoPoint_withOrgGeogebraCommonKernelGeosGeoPoint_(cons, nil, p, q) autorelease];
  line = IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0);
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(line)) updateRepaint];
  x_first = [self->view_ toRealWorldCoordXWithDouble:(x2 - dist * JavaLangMath_cosWithDouble_(angle - delta))];
  y_first = [self->view_ toRealWorldCoordYWithDouble:(y2 - dist * JavaLangMath_sinWithDouble_(angle - delta))];
  p = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons, x_first, y_first, 1.0) autorelease];
  algo = [new_OrgGeogebraCommonKernelAlgosAlgoJoinPointsSegment_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelGeosGeoPoint_withOrgGeogebraCommonKernelGeosGeoPoint_(cons, nil, p, q) autorelease];
  line = IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0);
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(line)) updateRepaint];
  return line;
}

OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonEuclidianEuclidianPen_try_closed_polygonWithInt_(OrgGeogebraCommonEuclidianEuclidianPen *self, jint nsides) {
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *rs = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r1 = nil;
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r2 = nil;
  jint i;
  jdouble dist = 0;
  IOSDoubleArray *pt = [IOSDoubleArray arrayWithLength:2];
  OrgGeogebraCommonKernelConstruction *cons = [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getKernel])) getConstruction];
  OrgGeogebraCommonKernelAlgosAlgoPolygon *algo = nil;
  jdouble x_first = 0;
  jdouble y_first = 0;
  IOSDoubleArray *points = [IOSDoubleArray arrayWithLength:nsides * 2 + 2];
  if (self->recognizer_queue_length_ < nsides) return nil;
  if (self->recognizer_queue_length_ - nsides == 0) rs = self->reco_queue_a_;
  if (self->recognizer_queue_length_ - nsides == 1) rs = self->reco_queue_b_;
  if (self->recognizer_queue_length_ - nsides == 2) rs = self->reco_queue_c_;
  if (self->recognizer_queue_length_ - nsides == 3) rs = self->reco_queue_d_;
  if (self->recognizer_queue_length_ - nsides == 4) rs = self->reco_queue_e_;
  if (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(rs))->startpt_ != 0) return nil;
  for (i = 0; i < nsides; ++i) {
    if (self->recognizer_queue_length_ - nsides + i == 0) r1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - nsides + i == 1) r1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - nsides + i == 2) r1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - nsides + i == 3) r1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - nsides + i == 4) r1 = self->reco_queue_e_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 0) r2 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 1) r2 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 2) r2 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 3) r2 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 4) r2 = self->reco_queue_e_;
    OrgGeogebraCommonEuclidianEuclidianPen_calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withDoubleArray_(r1, r2, pt);
    ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r1))->reversed_ = ((JavaLangMath_hypotWithDouble_withDouble_(IOSDoubleArray_Get(pt, 0) - r1->x1_, IOSDoubleArray_Get(pt, 1) - r1->y1_)) < (JavaLangMath_hypotWithDouble_withDouble_(IOSDoubleArray_Get(pt, 0) - r1->x2_, IOSDoubleArray_Get(pt, 1) - r1->y2_)));
  }
  for (i = 0; i < nsides; ++i) {
    if (self->recognizer_queue_length_ - nsides + i == 0) r1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - nsides + i == 1) r1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - nsides + i == 2) r1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - nsides + i == 3) r1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - nsides + i == 4) r1 = self->reco_queue_e_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 0) r2 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 1) r2 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 2) r2 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 3) r2 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 4) r2 = self->reco_queue_e_;
    OrgGeogebraCommonEuclidianEuclidianPen_calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withDoubleArray_(r1, r2, pt);
    dist = JavaLangMath_hypotWithDouble_withDouble_((((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r1))->reversed_ ? r1->x1_ : r1->x2_) - IOSDoubleArray_Get(pt, 0), (r1->reversed_ ? r1->y1_ : r1->y2_) - IOSDoubleArray_Get(pt, 1)) + JavaLangMath_hypotWithDouble_withDouble_((((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r2))->reversed_ ? r2->x2_ : r2->x1_) - IOSDoubleArray_Get(pt, 0), (r2->reversed_ ? r2->y2_ : r2->y1_) - IOSDoubleArray_Get(pt, 1));
    if (dist > self->POLYGON_LINEAR_TOLERANCE_ * (r1->radius_ + r2->radius_)) return nil;
  }
  for (i = 0; i < nsides; ++i) {
    if (self->recognizer_queue_length_ - nsides + i == 0) r1 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - nsides + i == 1) r1 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - nsides + i == 2) r1 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - nsides + i == 3) r1 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - nsides + i == 4) r1 = self->reco_queue_e_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 0) r2 = self->reco_queue_a_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 1) r2 = self->reco_queue_b_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 2) r2 = self->reco_queue_c_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 3) r2 = self->reco_queue_d_;
    if (self->recognizer_queue_length_ - nsides + (i + 1) % nsides == 4) r2 = self->reco_queue_e_;
    OrgGeogebraCommonEuclidianEuclidianPen_calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withDoubleArray_(r1, r2, pt);
    *IOSDoubleArray_GetRef(points, 2 * i + 2) = IOSDoubleArray_Get(pt, 0);
    *IOSDoubleArray_GetRef(points, 2 * i + 3) = IOSDoubleArray_Get(pt, 1);
  }
  *IOSDoubleArray_GetRef(points, 0) = IOSDoubleArray_Get(points, 2 * nsides);
  *IOSDoubleArray_GetRef(points, 1) = IOSDoubleArray_Get(points, 2 * nsides + 1);
  IOSObjectArray *pts = [IOSObjectArray arrayWithLength:nsides type:OrgGeogebraCommonKernelKernelNDGeoPointND_class_()];
  for (i = 0; i < nsides; ++i) {
    x_first = [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) toRealWorldCoordXWithDouble:IOSDoubleArray_Get(points, 2 * i)];
    y_first = [self->view_ toRealWorldCoordYWithDouble:IOSDoubleArray_Get(points, 2 * i + 1)];
    if (i == 0 && self->initialPoint_ != nil) {
      IOSObjectArray_Set(pts, 0, self->initialPoint_);
      OrgGeogebraCommonEuclidianEuclidianPen_set_initialPoint_(self, nil);
    }
    else {
      IOSObjectArray_SetAndConsume(pts, i, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_(cons, nil, x_first, y_first, 1.0));
    }
  }
  algo = [new_OrgGeogebraCommonKernelAlgosAlgoPolygon_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_(cons, nil, pts) autorelease];
  OrgGeogebraCommonKernelGeosGeoElement *poly = IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0);
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(poly)) updateRepaint];
  return poly;
}

void OrgGeogebraCommonEuclidianEuclidianPen_calc_edge_isectWithOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withOrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_withDoubleArray_(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r1, OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *r2, IOSDoubleArray *pt) {
  OrgGeogebraCommonEuclidianEuclidianPen_initialize();
  jdouble t;
  t = (((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r2))->xcenter_ - ((OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *) nil_chk(r1))->xcenter_) * JavaLangMath_sinWithDouble_(r2->angle_) - (r2->ycenter_ - r1->ycenter_) * JavaLangMath_cosWithDouble_(r2->angle_);
  t = t / JavaLangMath_sinWithDouble_(r2->angle_ - r1->angle_);
  *IOSDoubleArray_GetRef(nil_chk(pt), 0) = r1->xcenter_ + t * JavaLangMath_cosWithDouble_(r1->angle_);
  *IOSDoubleArray_GetRef(pt, 1) = r1->ycenter_ + t * JavaLangMath_sinWithDouble_(r1->angle_);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonEuclidianEuclidianPen)

@implementation OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment

- (instancetype)initWithOrgGeogebraCommonEuclidianEuclidianPen:(OrgGeogebraCommonEuclidianEuclidianPen *)outer$ {
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonEuclidianEuclidianPen:", "RecoSegment", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "startpt_", NULL, 0x0, "I", NULL, NULL,  },
    { "endpt_", NULL, 0x0, "I", NULL, NULL,  },
    { "xcenter_", NULL, 0x0, "D", NULL, NULL,  },
    { "ycenter_", NULL, 0x0, "D", NULL, NULL,  },
    { "angle_", NULL, 0x0, "D", NULL, NULL,  },
    { "radius_", NULL, 0x0, "D", NULL, NULL,  },
    { "x1_", NULL, 0x0, "D", NULL, NULL,  },
    { "y1_", NULL, 0x0, "D", NULL, NULL,  },
    { "x2_", NULL, 0x0, "D", NULL, NULL,  },
    { "y2_", NULL, 0x0, "D", NULL, NULL,  },
    { "reversed_", NULL, 0x0, "Z", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment = { 2, "RecoSegment", "org.geogebra.common.euclidian", "EuclidianPen", 0x2, 1, methods, 11, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment;
}

@end

void OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *self, OrgGeogebraCommonEuclidianEuclidianPen *outer$) {
  NSObject_init(self);
  self->startpt_ = 0;
  self->endpt_ = 0;
  self->xcenter_ = 0;
  self->ycenter_ = 0;
  self->angle_ = 0;
  self->radius_ = 0;
  self->x1_ = 0;
  self->y1_ = 0;
  self->x2_ = 0;
  self->y2_ = 0;
}

OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *new_OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(OrgGeogebraCommonEuclidianEuclidianPen *outer$) {
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment *self = [OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment alloc];
  OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonEuclidianEuclidianPen_RecoSegment)

@implementation OrgGeogebraCommonEuclidianEuclidianPen_Inertia

- (instancetype)initWithOrgGeogebraCommonEuclidianEuclidianPen:(OrgGeogebraCommonEuclidianEuclidianPen *)outer$ {
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonEuclidianEuclidianPen:", "Inertia", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "mass_", NULL, 0x0, "D", NULL, NULL,  },
    { "sx_", NULL, 0x0, "D", NULL, NULL,  },
    { "sxx_", NULL, 0x0, "D", NULL, NULL,  },
    { "sy_", NULL, 0x0, "D", NULL, NULL,  },
    { "sxy_", NULL, 0x0, "D", NULL, NULL,  },
    { "syy_", NULL, 0x0, "D", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonEuclidianEuclidianPen_Inertia = { 2, "Inertia", "org.geogebra.common.euclidian", "EuclidianPen", 0x2, 1, methods, 6, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonEuclidianEuclidianPen_Inertia;
}

@end

void OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(OrgGeogebraCommonEuclidianEuclidianPen_Inertia *self, OrgGeogebraCommonEuclidianEuclidianPen *outer$) {
  NSObject_init(self);
  self->mass_ = 0;
  self->sx_ = 0;
  self->sxx_ = 0;
  self->sy_ = 0;
  self->sxy_ = 0;
  self->syy_ = 0;
}

OrgGeogebraCommonEuclidianEuclidianPen_Inertia *new_OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(OrgGeogebraCommonEuclidianEuclidianPen *outer$) {
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia *self = [OrgGeogebraCommonEuclidianEuclidianPen_Inertia alloc];
  OrgGeogebraCommonEuclidianEuclidianPen_Inertia_initWithOrgGeogebraCommonEuclidianEuclidianPen_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonEuclidianEuclidianPen_Inertia)

@implementation OrgGeogebraCommonEuclidianEuclidianPen_$1

- (void)setObjColorWithOrgGeogebraCommonAwtGColor:(OrgGeogebraCommonAwtGColor *)color {
  [super setObjColorWithOrgGeogebraCommonAwtGColor:color];
  [this$0_ setPenColorWithOrgGeogebraCommonAwtGColor:color];
}

- (void)setLineThicknessWithInt:(jint)th {
  [super setLineThicknessWithInt:th];
  [this$0_ setPenSizeWithInt:th];
}

- (void)setLineTypeWithInt:(jint)i {
  [super setLineTypeWithInt:i];
  [this$0_ setPenLineStyleWithInt:i];
}

- (instancetype)initWithOrgGeogebraCommonEuclidianEuclidianPen:(OrgGeogebraCommonEuclidianEuclidianPen *)outer$
                       withOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)arg$0 {
  OrgGeogebraCommonEuclidianEuclidianPen_$1_initWithOrgGeogebraCommonEuclidianEuclidianPen_withOrgGeogebraCommonKernelConstruction_(self, outer$, arg$0);
  return self;
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "setObjColorWithOrgGeogebraCommonAwtGColor:", "setObjColor", "V", 0x1, NULL, NULL },
    { "setLineThicknessWithInt:", "setLineThickness", "V", 0x1, NULL, NULL },
    { "setLineTypeWithInt:", "setLineType", "V", 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonEuclidianEuclidianPen:withOrgGeogebraCommonKernelConstruction:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.geogebra.common.euclidian.EuclidianPen;", NULL, NULL,  },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgGeogebraCommonEuclidianEuclidianPen", "initWithOrgGeogebraCommonMainApp:withOrgGeogebraCommonEuclidianEuclidianView:" };
  static const J2ObjcClassInfo _OrgGeogebraCommonEuclidianEuclidianPen_$1 = { 2, "", "org.geogebra.common.euclidian", "EuclidianPen", 0x8008, 4, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_OrgGeogebraCommonEuclidianEuclidianPen_$1;
}

@end

void OrgGeogebraCommonEuclidianEuclidianPen_$1_initWithOrgGeogebraCommonEuclidianEuclidianPen_withOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonEuclidianEuclidianPen_$1 *self, OrgGeogebraCommonEuclidianEuclidianPen *outer$, OrgGeogebraCommonKernelConstruction *arg$0) {
  OrgGeogebraCommonEuclidianEuclidianPen_$1_set_this$0_(self, outer$);
  OrgGeogebraCommonKernelGeosGeoPolyLine_initWithOrgGeogebraCommonKernelConstruction_(self, arg$0);
}

OrgGeogebraCommonEuclidianEuclidianPen_$1 *new_OrgGeogebraCommonEuclidianEuclidianPen_$1_initWithOrgGeogebraCommonEuclidianEuclidianPen_withOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonEuclidianEuclidianPen *outer$, OrgGeogebraCommonKernelConstruction *arg$0) {
  OrgGeogebraCommonEuclidianEuclidianPen_$1 *self = [OrgGeogebraCommonEuclidianEuclidianPen_$1 alloc];
  OrgGeogebraCommonEuclidianEuclidianPen_$1_initWithOrgGeogebraCommonEuclidianEuclidianPen_withOrgGeogebraCommonKernelConstruction_(self, outer$, arg$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonEuclidianEuclidianPen_$1)
