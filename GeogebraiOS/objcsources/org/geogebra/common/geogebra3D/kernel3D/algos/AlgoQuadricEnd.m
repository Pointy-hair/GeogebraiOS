//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/javasources/org/geogebra/common/geogebra3D/kernel3D/algos/AlgoQuadricEnd.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "org/geogebra/common/geogebra3D/kernel3D/algos/AlgoElement3D.h"
#include "org/geogebra/common/geogebra3D/kernel3D/algos/AlgoQuadricEnd.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoConic3D.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoQuadric3DLimited.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Matrix/CoordMatrix.h"
#include "org/geogebra/common/kernel/Matrix/CoordSys.h"
#include "org/geogebra/common/kernel/Matrix/Coords.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"

@interface OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd () {
 @public
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *quadric_;
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *section_;
  OrgGeogebraCommonKernelMatrixCoordSys *coordsys_;
  OrgGeogebraCommonKernelMatrixCoordMatrix *pm_;
  OrgGeogebraCommonKernelMatrixCoordMatrix *pmt_;
  jboolean isHelperAlgo_;
}

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, quadric_, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, section_, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, coordsys_, OrgGeogebraCommonKernelMatrixCoordSys *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, pm_, OrgGeogebraCommonKernelMatrixCoordMatrix *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, pmt_, OrgGeogebraCommonKernelMatrixCoordMatrix *)

__attribute__((unused)) static void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_compute(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd *self);

@implementation OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *)quadric {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(self, cons, quadric);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                                               withNSString:(NSString *)label
withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *)quadric {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(self, cons, label, quadric);
  return self;
}

- (OrgGeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *)getSection {
  return section_;
}

- (void)compute {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_compute(self);
}

- (void)setIsHelperAlgo {
  isHelperAlgo_ = YES;
}

- (void)remove {
  if (removed_) return;
  [super remove];
  if (isHelperAlgo_) [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk(quadric_)) remove];
}

- (OrgGeogebraCommonKernelMatrixCoords *)getOriginWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)o1
                                                  withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)o2 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (OrgGeogebraCommonKernelMatrixCoords *)getV1WithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v1 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)dealloc {
  RELEASE_(quadric_);
  RELEASE_(section_);
  RELEASE_(coordsys_);
  RELEASE_(pm_);
  RELEASE_(pmt_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelConstruction:withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited:", "AlgoQuadricEnd", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withNSString:withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited:", "AlgoQuadricEnd", NULL, 0x1, NULL, NULL },
    { "getSection", NULL, "Lorg.geogebra.common.geogebra3D.kernel3D.geos.GeoConic3D;", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "setIsHelperAlgo", NULL, "V", 0x1, NULL, NULL },
    { "remove", NULL, "V", 0x1, NULL, NULL },
    { "getOriginWithOrgGeogebraCommonKernelMatrixCoords:withOrgGeogebraCommonKernelMatrixCoords:", "getOrigin", "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x404, NULL, NULL },
    { "getV1WithOrgGeogebraCommonKernelMatrixCoords:", "getV1", "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x404, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "quadric_", NULL, 0x2, "Lorg.geogebra.common.geogebra3D.kernel3D.geos.GeoQuadric3DLimited;", NULL, NULL,  },
    { "section_", NULL, 0x2, "Lorg.geogebra.common.geogebra3D.kernel3D.geos.GeoConic3D;", NULL, NULL,  },
    { "coordsys_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.CoordSys;", NULL, NULL,  },
    { "pm_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", NULL, NULL,  },
    { "pmt_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", NULL, NULL,  },
    { "isHelperAlgo_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd = { 2, "AlgoQuadricEnd", "org.geogebra.common.geogebra3D.kernel3D.algos", NULL, 0x401, 8, methods, 6, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd;
}

@end

void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd *self, OrgGeogebraCommonKernelConstruction *cons, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *quadric) {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoElement3D_initWithOrgGeogebraCommonKernelConstruction_(self, cons);
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_setAndConsume_pm_(self, new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(4, 3));
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_setAndConsume_pmt_(self, new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(3, 4));
  self->isHelperAlgo_ = NO;
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_set_quadric_(self, quadric);
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_setAndConsume_section_(self, new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoConic3D_initWithOrgGeogebraCommonKernelConstruction_(cons));
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_setAndConsume_coordsys_(self, new_OrgGeogebraCommonKernelMatrixCoordSys_initWithInt_(2));
  [self->section_ setCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys:self->coordsys_];
  [self->section_ setIsEndOfQuadricWithBoolean:YES];
  [self setInputOutputWithOrgGeogebraCommonKernelGeosGeoElementArray:[IOSObjectArray arrayWithObjects:(id[]){ quadric } count:1 type:OrgGeogebraCommonKernelGeosGeoElement_class_()] withOrgGeogebraCommonKernelGeosGeoElementArray:[IOSObjectArray arrayWithObjects:(id[]){ self->section_ } count:1 type:OrgGeogebraCommonKernelGeosGeoElement_class_()]];
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_compute(self);
}

void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd *self, OrgGeogebraCommonKernelConstruction *cons, NSString *label, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *quadric) {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(self, cons, quadric);
  [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk(self->section_)) setLabelWithNSString:label];
}

void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_compute(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd *self) {
  if (![((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk(self->quadric_)) isDefined]) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk(self->section_)) setUndefined];
    return;
  }
  [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk(self->section_)) setDefined];
  OrgGeogebraCommonKernelMatrixCoordMatrix *qm = [self->quadric_ getSymetricMatrix];
  OrgGeogebraCommonKernelMatrixCoords *d = [self->quadric_ getEigenvec3DWithInt:2];
  OrgGeogebraCommonKernelMatrixCoords *o1 = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([self->quadric_ getMidpoint3D])) addWithOrgGeogebraCommonKernelMatrixCoords:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(d)) mulWithDouble:[self->quadric_ getBottomParameter]]];
  OrgGeogebraCommonKernelMatrixCoords *o2 = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([self->quadric_ getMidpoint3D])) addWithOrgGeogebraCommonKernelMatrixCoords:[d mulWithDouble:[self->quadric_ getTopParameter]]];
  [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(self->pm_)) setOriginWithOrgGeogebraCommonKernelMatrixCoords:[self getOriginWithOrgGeogebraCommonKernelMatrixCoords:o1 withOrgGeogebraCommonKernelMatrixCoords:o2]];
  IOSObjectArray *v = [d completeOrthonormal];
  [self->pm_ setVxWithOrgGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(nil_chk(v), 0)];
  [self->pm_ setVyWithOrgGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(v, 1)];
  [self->pm_ transposeCopyWithOrgGeogebraCommonKernelMatrixCoordMatrix:self->pmt_];
  OrgGeogebraCommonKernelMatrixCoordMatrix *cm = [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk([((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(self->pmt_)) mulWithOrgGeogebraCommonKernelMatrixCoordMatrix:qm])) mulWithOrgGeogebraCommonKernelMatrixCoordMatrix:self->pm_];
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk(self->coordsys_)) resetCoordSys];
  [self->coordsys_ addPointWithOrgGeogebraCommonKernelMatrixCoords:[self getOriginWithOrgGeogebraCommonKernelMatrixCoords:o1 withOrgGeogebraCommonKernelMatrixCoords:o2]];
  [self->coordsys_ addVectorWithOrgGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(v, 0)];
  [self->coordsys_ addVectorWithOrgGeogebraCommonKernelMatrixCoords:[self getV1WithOrgGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(v, 1)]];
  [self->coordsys_ makeOrthoMatrixWithBoolean:NO withBoolean:NO];
  [self->section_ setMatrixWithOrgGeogebraCommonKernelMatrixCoordMatrix:cm];
  [self->section_ calcArea];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd)
