//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/geogebra3D/kernel3D/algos/AlgoPolyhedronNetPrism.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "org/geogebra/common/geogebra3D/kernel3D/algos/AlgoPolyhedronNet.h"
#include "org/geogebra/common/geogebra3D/kernel3D/algos/AlgoPolyhedronNetPrism.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoPoint3D.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoPolygon3D.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoPolyhedron.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoPolyhedronNet.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoSegment3D.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Matrix/CoordMatrix4x4.h"
#include "org/geogebra/common/kernel/Matrix/CoordSys.h"
#include "org/geogebra/common/kernel/Matrix/Coords.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/arithmetic/NumberValue.h"
#include "org/geogebra/common/kernel/geos/GeoPolygon.h"
#include "org/geogebra/common/kernel/kernelND/GeoPointND.h"
#include "org/geogebra/common/kernel/kernelND/GeoSegmentND.h"

@interface OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism () {
 @public
  OrgGeogebraCommonKernelMatrixCoords *pp1_;
}

- (void)setOutputSideWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *)polygon;

- (void)updateSideWithInt:(jint)index
                  withInt:(jint)newBottomPointsLength;

- (void)createSideFaceWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *)net
                                                                          withInt:(jint)index
                                                                          withInt:(jint)newBottomPointsLength;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism, pp1_, OrgGeogebraCommonKernelMatrixCoords *)

__attribute__((unused)) static void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_setOutputSideWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *self, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *polygon);

__attribute__((unused)) static void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_updateSideWithInt_withInt_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *self, jint index, jint newBottomPointsLength);

__attribute__((unused)) static void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_createSideFaceWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet_withInt_withInt_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *self, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *net, jint index, jint newBottomPointsLength);

@implementation OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)c
                                          withNSStringArray:(IOSObjectArray *)labels
   withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron *)p
           withOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)v {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, c, labels, p, v);
  return self;
}

- (jint)getPointLengthFromLabelsLengthWithInt:(jint)length {
  return length / 10;
}

- (void)createNetWithInt:(jint)n {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *net = [self getNet];
  [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsBottom_)) adjustOutputSizeWithInt:n withBoolean:NO];
  [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsSide_)) adjustOutputSizeWithInt:2 * n withBoolean:NO];
  [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) adjustOutputSizeWithInt:n - 2 withBoolean:NO];
  [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *) nil_chk(net)) startNewFace];
  for (jint i = 0; i < n; i++) {
    [net addPointToCurrentFaceWithOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsBottom_ getElementWithInt:i]];
  }
  [net endCurrentFace];
  for (jint i = 0; i < n; i++) {
    OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_createSideFaceWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet_withInt_withInt_(self, net, i, n);
  }
  [net startNewFace];
  [net addPointToCurrentFaceWithOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsSide_ getElementWithInt:0]];
  [net addPointToCurrentFaceWithOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsSide_ getElementWithInt:1]];
  for (jint i = 0; i < n - 2; i++) {
    [net addPointToCurrentFaceWithOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsTop_ getElementWithInt:i]];
  }
  [net endCurrentFace];
}

- (void)setOutputSideTopWithInt:(jint)n
withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *)polygon
                        withInt:(jint)step
withOrgGeogebraCommonKernelKernelNDGeoSegmentNDArray:(IOSObjectArray *)segments {
  if (step == n + 2) {
    [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPolygonsTop_)) addOutputWithOrgGeogebraCommonKernelGeosGeoElement:polygon withBoolean:NO];
    for (jint i = 1; i < ((IOSObjectArray *) nil_chk(segments))->size_; i++) {
      [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsTop_)) addOutputWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(IOSObjectArray_Get(segments, i), [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class]) withBoolean:NO];
    }
  }
  else {
    OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_setOutputSideWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_(self, polygon);
  }
}

- (void)setOutputSideWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *)polygon {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_setOutputSideWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_(self, polygon);
}

- (void)computeWithDouble:(jdouble)f
withOrgGeogebraCommonKernelGeosGeoPolygon:(OrgGeogebraCommonKernelGeosGeoPolygon *)bottomPolygon
withOrgGeogebraCommonKernelMatrixCoordsArray:(IOSObjectArray *)points {
  if (pp1_ == nil) {
    pp1_ = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(4);
  }
  jint sz = ((IOSObjectArray *) nil_chk(points))->size_;
  IOSObjectArray *topP = OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNet_getPointsCoordsWithOrgGeogebraCommonKernelGeosGeoPolygon_([((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron *) nil_chk(p_)) getTopFace]);
  OrgGeogebraCommonKernelMatrixCoords *topCo = IOSObjectArray_Get(nil_chk(topP), 0);
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(topCo)) projectPlaneWithOrgGeogebraCommonKernelMatrixCoordMatrix:[((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([((OrgGeogebraCommonKernelGeosGeoPolygon *) nil_chk(bottomPolygon)) getCoordSys])) getMatrixOrthonormal] withOrgGeogebraCommonKernelMatrixCoords:pp1_];
  jdouble dd1 = [p_ getOrientedHeight];
  if (dd1 < 0) {
    f *= -1;
    dd1 *= -1;
  }
  OrgGeogebraCommonKernelMatrixCoords *faceDirection = [bottomPolygon getDirectionInD3];
  if ([bottomPolygon isConvexInverseDirection]) {
    f *= -1;
    faceDirection = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(faceDirection)) mulWithDouble:-1];
  }
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *wpoint1 = nil;
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *wpoint2 = nil;
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *wpoint3 = nil;
  OrgGeogebraCommonKernelMatrixCoords *cCoord = nil;
  for (jint i = 0; i < sz; i++) {
    wpoint1 = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsSide_)) getElementWithInt:2 * i];
    jint j = 2 * i - 1;
    if (j < 0) {
      j = 2 * sz - 1;
    }
    wpoint2 = [outputPointsSide_ getElementWithInt:j];
    cCoord = IOSObjectArray_Get(topP, i);
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(wpoint1)) setCoordsWithOrgGeogebraCommonKernelMatrixCoords:cCoord];
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(wpoint2)) setCoordsWithOrgGeogebraCommonKernelMatrixCoords:cCoord];
    if (i > 1) {
      wpoint3 = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) getElementWithInt:i - 2];
      [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(wpoint3)) setCoordsWithOrgGeogebraCommonKernelMatrixCoords:cCoord];
    }
  }
  IOSObjectArray *bottomSegsDirections = [IOSObjectArray newArrayWithLength:sz type:OrgGeogebraCommonKernelMatrixCoords_class_()];
  OrgGeogebraCommonKernelMatrixCoords *p1 = IOSObjectArray_Get(points, sz - 1);
  OrgGeogebraCommonKernelMatrixCoords *p2 = IOSObjectArray_Get(points, 0);
  (void) IOSObjectArray_Set(bottomSegsDirections, sz - 1, [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(p2)) subWithOrgGeogebraCommonKernelMatrixCoords:p1])) normalized]);
  for (jint i = 0; i < sz - 1; i++) {
    p1 = p2;
    p2 = IOSObjectArray_Get(points, i + 1);
    (void) IOSObjectArray_Set(bottomSegsDirections, i, [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(p2)) subWithOrgGeogebraCommonKernelMatrixCoords:p1])) normalized]);
  }
  OrgGeogebraCommonKernelMatrixCoords *o = IOSObjectArray_Get(topP, 1);
  OrgGeogebraCommonKernelMatrixCoords *vs = IOSObjectArray_Get(bottomSegsDirections, 0);
  OrgGeogebraCommonKernelGeosGeoPolygon *side0 = [p_ getFirstSideFace];
  for (jint i = 0; i < sz - 2; i++) {
    wpoint3 = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) getElementWithInt:i];
    cCoord = [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(wpoint3)) getInhomCoordsInD3];
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(cCoord)) projectPlaneWithOrgGeogebraCommonKernelMatrixCoordMatrix:[((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([((OrgGeogebraCommonKernelGeosGeoPolygon *) nil_chk(side0)) getCoordSys])) getMatrixOrthonormal] withOrgGeogebraCommonKernelMatrixCoords:pp1_];
    jdouble dist = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(pp1_)) distanceWithOrgGeogebraCommonKernelMatrixCoords:cCoord];
    [self rotateWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D:wpoint3 withOrgGeogebraCommonKernelMatrixCoords:cCoord withOrgGeogebraCommonKernelMatrixCoords:pp1_ withOrgGeogebraCommonKernelMatrixCoords:o withOrgGeogebraCommonKernelMatrixCoords:vs withDouble:f withOrgGeogebraCommonKernelMatrixCoords:[side0 getDirectionInD3] withDouble:dist withBoolean:YES];
  }
  for (jint i = 0; i < 2 * sz; i += 2) {
    o = IOSObjectArray_Get(points, i / 2);
    vs = IOSObjectArray_Get(bottomSegsDirections, i / 2);
    wpoint1 = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsSide_)) getElementWithInt:i];
    cCoord = [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(wpoint1)) getInhomCoordsInD3];
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(cCoord)) projectPlaneWithOrgGeogebraCommonKernelMatrixCoordMatrix:[((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([bottomPolygon getCoordSys])) getMatrixOrthonormal] withOrgGeogebraCommonKernelMatrixCoords:pp1_];
    [self rotateWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D:wpoint1 withOrgGeogebraCommonKernelMatrixCoords:cCoord withOrgGeogebraCommonKernelMatrixCoords:pp1_ withOrgGeogebraCommonKernelMatrixCoords:o withOrgGeogebraCommonKernelMatrixCoords:vs withDouble:f withOrgGeogebraCommonKernelMatrixCoords:faceDirection withDouble:dd1 withBoolean:NO];
    wpoint2 = [outputPointsSide_ getElementWithInt:i + 1];
    cCoord = [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(wpoint2)) getInhomCoordsInD3];
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(cCoord)) projectPlaneWithOrgGeogebraCommonKernelMatrixCoordMatrix:[((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([bottomPolygon getCoordSys])) getMatrixOrthonormal] withOrgGeogebraCommonKernelMatrixCoords:pp1_];
    [self rotateWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D:wpoint2 withOrgGeogebraCommonKernelMatrixCoords:cCoord withOrgGeogebraCommonKernelMatrixCoords:pp1_ withOrgGeogebraCommonKernelMatrixCoords:o withOrgGeogebraCommonKernelMatrixCoords:vs withDouble:f withOrgGeogebraCommonKernelMatrixCoords:faceDirection withDouble:dd1 withBoolean:NO];
    if (i == 0) {
      for (jint j = 0; j < sz - 2; j++) {
        wpoint3 = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) getElementWithInt:j];
        [self rotateWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D:wpoint3 withOrgGeogebraCommonKernelMatrixCoords:cCoord withOrgGeogebraCommonKernelMatrixCoords:pp1_ withOrgGeogebraCommonKernelMatrixCoords:o withOrgGeogebraCommonKernelMatrixCoords:vs withDouble:f withOrgGeogebraCommonKernelMatrixCoords:faceDirection withDouble:dd1 withBoolean:NO];
      }
    }
  }
  [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *) nil_chk([self getNet])) setAreaWithDouble:[p_ getArea]];
}

- (void)adjustOutputSizeWithInt:(jint)newBottomPointsLength {
  [super adjustOutputSizeWithInt:newBottomPointsLength];
  jint nOld = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsSide_)) size] / 2;
  if (newBottomPointsLength > nOld) {
    [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) adjustOutputSizeWithInt:newBottomPointsLength - 2 withBoolean:NO];
    [outputPointsTop_ setLabelsWithNSStringArray:nil];
    OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *net = [self getNet];
    for (jint i = nOld; i < newBottomPointsLength - 1; i++) {
      OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *segmentTop = (OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast([((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *) nil_chk(net)) createSegmentWithOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsTop_ getElementWithInt:i - 2] withOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsTop_ getElementWithInt:i - 1]], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class]);
      [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsTop_)) addOutputWithOrgGeogebraCommonKernelGeosGeoElement:segmentTop withBoolean:NO];
    }
    OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *segmentTop = (OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast([((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *) nil_chk(net)) createSegmentWithOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsTop_ getElementWithInt:newBottomPointsLength - 3] withOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsSide_ getElementWithInt:0]], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class]);
    [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsTop_)) addOutputWithOrgGeogebraCommonKernelGeosGeoElement:segmentTop withBoolean:NO];
    [outputSegmentsTop_ setLabelsWithNSStringArray:nil];
  }
  if (newBottomPointsLength > bottomPointsLength_) {
    for (jint i = bottomPointsLength_; i < newBottomPointsLength && i <= nOld; i++) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> segmentBottom = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsBottom_)) getElementWithInt:i - 1];
      [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(segmentBottom)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointND:[((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsBottom_)) getElementWithInt:i - 1] withOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsBottom_ getElementWithInt:i]];
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> segmenTop = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsTop_)) getElementWithInt:i - 2];
      [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(segmenTop)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointND:[((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) getElementWithInt:i - 3] withOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsTop_ getElementWithInt:i - 2]];
    }
    for (jint i = bottomPointsLength_ - 1; i < newBottomPointsLength && i < nOld; i++) {
      OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_updateSideWithInt_withInt_(self, i, newBottomPointsLength);
    }
  }
  if (newBottomPointsLength > nOld) {
    [outputPointsSide_ adjustOutputSizeWithInt:newBottomPointsLength * 2 withBoolean:NO];
    [outputPointsSide_ setLabelsWithNSStringArray:nil];
    OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *net = [self getNet];
    for (jint i = nOld; i < newBottomPointsLength; i++) {
      OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_createSideFaceWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet_withInt_withInt_(self, net, i, newBottomPointsLength);
      OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *polygon = [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *) nil_chk(net)) createPolygonWithInt:i + 2];
      OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_setOutputSideWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_(self, polygon);
      [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsBottom_)) addOutputWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(IOSObjectArray_Get(nil_chk([((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *) nil_chk(polygon)) getSegments]), 0), [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class]) withBoolean:NO];
    }
    [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsBottom_)) setLabelsWithNSStringArray:nil];
    [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsSide_)) setLabelsWithNSStringArray:nil];
    [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPolygonsSide_)) setLabelsWithNSStringArray:nil];
    [self refreshOutput];
  }
  if (newBottomPointsLength > bottomPointsLength_) {
    [self updateBottomWithInt:newBottomPointsLength];
    [self updateTopWithInt:newBottomPointsLength];
  }
  else if (newBottomPointsLength < bottomPointsLength_) {
    for (jint i = newBottomPointsLength; i < bottomPointsLength_; i++) {
      [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk([((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsBottom_)) getElementWithInt:i])) setUndefined];
      [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk([outputPointsSide_ getElementWithInt:2 * i])) setUndefined];
      [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk([outputPointsSide_ getElementWithInt:2 * i + 1])) setUndefined];
      [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk([((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) getElementWithInt:i - 2])) setUndefined];
    }
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> segmentBottom = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsBottom_)) getElementWithInt:newBottomPointsLength - 1];
    [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(segmentBottom)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointND:[((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsBottom_)) getElementWithInt:newBottomPointsLength - 1] withOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsBottom_ getElementWithInt:0]];
    [self updateBottomWithInt:newBottomPointsLength];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> segmentTop = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsTop_)) getElementWithInt:newBottomPointsLength - 2];
    [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(segmentTop)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointND:[((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) getElementWithInt:newBottomPointsLength - 3] withOrgGeogebraCommonKernelKernelNDGeoPointND:[outputPointsSide_ getElementWithInt:0]];
    [self updateTopWithInt:newBottomPointsLength];
    OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_updateSideWithInt_withInt_(self, newBottomPointsLength - 1, newBottomPointsLength);
  }
  bottomPointsLength_ = newBottomPointsLength;
}

- (void)updateSideWithInt:(jint)index
                  withInt:(jint)newBottomPointsLength {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_updateSideWithInt_withInt_(self, index, newBottomPointsLength);
}

- (void)createSideFaceWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *)net
                                                                          withInt:(jint)index
                                                                          withInt:(jint)newBottomPointsLength {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_createSideFaceWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet_withInt_withInt_(self, net, index, newBottomPointsLength);
}

- (void)updateTopWithInt:(jint)newBottomPointsLength {
  OrgGeogebraCommonKernelGeosGeoPolygon *polygon = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPolygonsTop_)) getElementWithInt:0];
  IOSObjectArray *points = [IOSObjectArray newArrayWithLength:newBottomPointsLength type:OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D_class_()];
  IOSObjectArray *segments = [IOSObjectArray newArrayWithLength:newBottomPointsLength type:OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D_class_()];
  (void) IOSObjectArray_Set(points, 0, [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsSide_)) getElementWithInt:0]);
  (void) IOSObjectArray_Set(points, 1, [outputPointsSide_ getElementWithInt:1]);
  for (jint i = 2; i < newBottomPointsLength; i++) {
    (void) IOSObjectArray_Set(points, i, [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputPointsTop_)) getElementWithInt:i - 2]);
  }
  (void) IOSObjectArray_Set(segments, 0, [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsSide_)) getElementWithInt:0]);
  for (jint i = 1; i < newBottomPointsLength; i++) {
    (void) IOSObjectArray_Set(segments, i, [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(outputSegmentsTop_)) getElementWithInt:i - 1]);
  }
  [((OrgGeogebraCommonKernelGeosGeoPolygon *) nil_chk(polygon)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointNDArray:points];
  [polygon setSegmentsWithOrgGeogebraCommonKernelKernelNDGeoSegmentNDArray:segments];
  [polygon calcArea];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelConstruction:withNSStringArray:withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron:withOrgGeogebraCommonKernelArithmeticNumberValue:", "AlgoPolyhedronNetPrism", NULL, 0x1, NULL, NULL },
    { "getPointLengthFromLabelsLengthWithInt:", "getPointLengthFromLabelsLength", "I", 0x4, NULL, NULL },
    { "createNetWithInt:", "createNet", "V", 0x4, NULL, NULL },
    { "setOutputSideTopWithInt:withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D:withInt:withOrgGeogebraCommonKernelKernelNDGeoSegmentNDArray:", "setOutputSideTop", "V", 0x4, NULL, NULL },
    { "setOutputSideWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D:", "setOutputSide", "V", 0x2, NULL, NULL },
    { "computeWithDouble:withOrgGeogebraCommonKernelGeosGeoPolygon:withOrgGeogebraCommonKernelMatrixCoordsArray:", "compute", "V", 0x1, NULL, NULL },
    { "adjustOutputSizeWithInt:", "adjustOutputSize", "V", 0x4, NULL, NULL },
    { "updateSideWithInt:withInt:", "updateSide", "V", 0x2, NULL, NULL },
    { "createSideFaceWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet:withInt:withInt:", "createSideFace", "V", 0x2, NULL, NULL },
    { "updateTopWithInt:", "updateTop", "V", 0x4, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "pp1_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism = { 2, "AlgoPolyhedronNetPrism", "org.geogebra.common.geogebra3D.kernel3D.algos", NULL, 0x1, 10, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism;
}

@end

void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron_withOrgGeogebraCommonKernelArithmeticNumberValue_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *self, OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *labels, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron *p, id<OrgGeogebraCommonKernelArithmeticNumberValue> v) {
  (void) OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNet_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, c, labels, p, v);
}

OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *new_OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron_withOrgGeogebraCommonKernelArithmeticNumberValue_(OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *labels, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron *p, id<OrgGeogebraCommonKernelArithmeticNumberValue> v) {
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *self = [OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism alloc];
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedron_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, c, labels, p, v);
  return self;
}

void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_setOutputSideWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *self, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *polygon) {
  [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputPolygonsSide_)) addOutputWithOrgGeogebraCommonKernelGeosGeoElement:polygon withBoolean:NO];
  [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputSegmentsSide_)) addOutputWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(IOSObjectArray_Get(nil_chk([((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *) nil_chk(polygon)) getSegments]), 3), [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class]) withBoolean:NO];
  [self->outputSegmentsSide_ addOutputWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(IOSObjectArray_Get(nil_chk([polygon getSegments]), 2), [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class]) withBoolean:NO];
  [self->outputSegmentsSide_ addOutputWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(IOSObjectArray_Get(nil_chk([polygon getSegments]), 1), [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class]) withBoolean:NO];
}

void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_updateSideWithInt_withInt_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *self, jint index, jint newBottomPointsLength) {
  id<OrgGeogebraCommonKernelKernelNDGeoPointND> pointBottom1 = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputPointsBottom_)) getElementWithInt:index];
  id<OrgGeogebraCommonKernelKernelNDGeoPointND> pointBottom2 = [self->outputPointsBottom_ getElementWithInt:(index + 1) % newBottomPointsLength];
  id<OrgGeogebraCommonKernelKernelNDGeoPointND> pointSide2 = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputPointsSide_)) getElementWithInt:2 * index];
  id<OrgGeogebraCommonKernelKernelNDGeoPointND> pointSide1 = [self->outputPointsSide_ getElementWithInt:(2 * index + 1) % (2 * newBottomPointsLength)];
  id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> segmentBottom = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputSegmentsBottom_)) getElementWithInt:index];
  id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> segmentSide3 = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputSegmentsSide_)) getElementWithInt:3 * index];
  id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> segmentSide2 = [self->outputSegmentsSide_ getElementWithInt:3 * index + 1];
  id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> segmentSide1 = [self->outputSegmentsSide_ getElementWithInt:(3 * index + 2) % (3 * newBottomPointsLength)];
  [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(segmentSide1)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointND:pointBottom2 withOrgGeogebraCommonKernelKernelNDGeoPointND:pointSide1];
  [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(segmentSide2)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointND:pointSide1 withOrgGeogebraCommonKernelKernelNDGeoPointND:pointSide2];
  [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(segmentSide3)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointND:pointSide2 withOrgGeogebraCommonKernelKernelNDGeoPointND:pointBottom1];
  OrgGeogebraCommonKernelGeosGeoPolygon *polygon = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputPolygonsSide_)) getElementWithInt:index];
  IOSObjectArray *points = [IOSObjectArray newArrayWithLength:4 type:OrgGeogebraCommonKernelKernelNDGeoPointND_class_()];
  (void) IOSObjectArray_Set(points, 0, pointBottom1);
  (void) IOSObjectArray_Set(points, 1, pointBottom2);
  (void) IOSObjectArray_Set(points, 2, pointSide1);
  (void) IOSObjectArray_Set(points, 3, pointSide2);
  [((OrgGeogebraCommonKernelGeosGeoPolygon *) nil_chk(polygon)) modifyInputPointsWithOrgGeogebraCommonKernelKernelNDGeoPointNDArray:points];
  IOSObjectArray *s = [IOSObjectArray newArrayWithLength:4 type:OrgGeogebraCommonKernelKernelNDGeoSegmentND_class_()];
  (void) IOSObjectArray_Set(s, 0, segmentBottom);
  (void) IOSObjectArray_Set(s, 1, segmentSide1);
  (void) IOSObjectArray_Set(s, 2, segmentSide2);
  (void) IOSObjectArray_Set(s, 2, segmentSide3);
  [polygon setSegmentsWithOrgGeogebraCommonKernelKernelNDGeoSegmentNDArray:s];
  [polygon calcArea];
}

void OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism_createSideFaceWithOrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet_withInt_withInt_(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism *self, OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *net, jint index, jint newBottomPointsLength) {
  [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolyhedronNet *) nil_chk(net)) startNewFace];
  [net addPointToCurrentFaceWithOrgGeogebraCommonKernelKernelNDGeoPointND:[((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputPointsBottom_)) getElementWithInt:index]];
  [net addPointToCurrentFaceWithOrgGeogebraCommonKernelKernelNDGeoPointND:[self->outputPointsBottom_ getElementWithInt:(index + 1) % newBottomPointsLength]];
  [net addPointToCurrentFaceWithOrgGeogebraCommonKernelKernelNDGeoPointND:[((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->outputPointsSide_)) getElementWithInt:(2 * index + 1) % (2 * newBottomPointsLength)]];
  [net addPointToCurrentFaceWithOrgGeogebraCommonKernelKernelNDGeoPointND:[self->outputPointsSide_ getElementWithInt:2 * index]];
  [net endCurrentFace];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoPolyhedronNetPrism)
