//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/geogebra3D/kernel3D/geos/GeoPolygon3D.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Double.h"
#include "java/util/ArrayList.h"
#include "org/geogebra/common/euclidian/EuclidianViewCompanion.h"
#include "org/geogebra/common/geogebra3D/euclidianForPlane/EuclidianViewForPlaneCompanion.h"
#include "org/geogebra/common/geogebra3D/kernel3D/algos/AlgoJoinPoints3D.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoCoordSys1D.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoPoint3D.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoPolygon3D.h"
#include "org/geogebra/common/geogebra3D/kernel3D/geos/GeoSegment3D.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/Matrix/CoordMatrix4x4.h"
#include "org/geogebra/common/kernel/Matrix/CoordSys.h"
#include "org/geogebra/common/kernel/Matrix/Coords.h"
#include "org/geogebra/common/kernel/PathParameter.h"
#include "org/geogebra/common/kernel/Region.h"
#include "org/geogebra/common/kernel/algos/AlgoPolygon.h"
#include "org/geogebra/common/kernel/algos/ConstructionElement.h"
#include "org/geogebra/common/kernel/arithmetic/NumberValue.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoPoint.h"
#include "org/geogebra/common/kernel/geos/GeoPolygon.h"
#include "org/geogebra/common/kernel/kernelND/GeoCoordSys2D.h"
#include "org/geogebra/common/kernel/kernelND/GeoDirectionND.h"
#include "org/geogebra/common/kernel/kernelND/GeoLineND.h"
#include "org/geogebra/common/kernel/kernelND/GeoPointND.h"
#include "org/geogebra/common/kernel/kernelND/GeoSegmentND.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/main/AppCompanion.h"
#include "org/geogebra/common/main/GuiManagerInterface.h"
#include "org/geogebra/common/plugin/GeoClass.h"

@interface OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D () {
 @public
  OrgGeogebraCommonKernelMatrixCoordSys *coordSys_;
  IOSObjectArray *points2D_;
  jboolean isPartOfClosedSurface__;
  jboolean createSegments_GeoPolygon3D_;
  JavaUtilArrayList *points3DArray_;
  OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion *euclidianViewForPlane_;
  OrgGeogebraCommonKernelMatrixCoordMatrix4x4 *tmpMatrix4x4_;
  jboolean reverseNormal_;
  IOSDoubleArray *tmp3_GeoPolygon3D_;
}

- (void)rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)phiVal
                       withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)center
                       withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)direction;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D, coordSys_, OrgGeogebraCommonKernelMatrixCoordSys *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D, points2D_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D, points3DArray_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D, euclidianViewForPlane_, OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D, tmpMatrix4x4_, OrgGeogebraCommonKernelMatrixCoordMatrix4x4 *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D, tmp3_GeoPolygon3D_, IOSDoubleArray *)

__attribute__((unused)) static void OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_rotateWithOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoords_(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self, id<OrgGeogebraCommonKernelArithmeticNumberValue> phiVal, OrgGeogebraCommonKernelMatrixCoords *center, OrgGeogebraCommonKernelMatrixCoords *direction);

@implementation OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)c
         withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)points
                  withOrgGeogebraCommonKernelMatrixCoordSys:(OrgGeogebraCommonKernelMatrixCoordSys *)cs2D
                                                withBoolean:(jboolean)createSegments {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelMatrixCoordSys_withBoolean_(self, c, points, cs2D, createSegments);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)c
         withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)points {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_(self, c, points);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_(self, cons);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                                                withBoolean:(jboolean)isIntersection {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self, cons, isIntersection);
  return self;
}

- (jboolean)isIntersection {
  return isIntersection_;
}

- (OrgGeogebraCommonPluginGeoClassEnum *)getGeoClassType {
  return OrgGeogebraCommonPluginGeoClassEnum_get_POLYGON3D();
}

- (jboolean)isGeoElement3D {
  return YES;
}

- (id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>)createSegmentWithOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)startPoint
                                                                withOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)endPoint
                                                                                                  withBoolean:(jboolean)euclidianVisible {
  if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(((OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(startPoint, [OrgGeogebraCommonKernelGeosGeoElement class])))) isGeoElement3D] && ![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(((OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(endPoint, [OrgGeogebraCommonKernelGeosGeoElement class])))) isGeoElement3D]) return [super createSegmentWithOrgGeogebraCommonKernelKernelNDGeoPointND:startPoint withOrgGeogebraCommonKernelKernelNDGeoPointND:endPoint withBoolean:euclidianVisible];
  OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoJoinPoints3D *algoSegment = new_OrgGeogebraCommonGeogebra3DKernel3DAlgosAlgoJoinPoints3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointND_withOrgGeogebraCommonKernelKernelNDGeoPointND_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonPluginGeoClassEnum_(cons_, startPoint, endPoint, self, OrgGeogebraCommonPluginGeoClassEnum_get_SEGMENT3D());
  [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoSegment];
  return [self createSegmentWithOrgGeogebraCommonKernelKernelNDGeoSegmentND:(id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) check_protocol_cast([algoSegment getCS], @protocol(OrgGeogebraCommonKernelKernelNDGeoSegmentND)) withBoolean:euclidianVisible];
}

- (OrgGeogebraCommonKernelGeosGeoPoint *)getPointWithInt:(jint)i {
  return IOSObjectArray_Get(nil_chk(points2D_), i);
}

- (OrgGeogebraCommonKernelMatrixCoords *)getPoint3DWithInt:(jint)i {
  OrgGeogebraCommonKernelMatrixCoords *v = [super getPoint3DWithInt:i];
  return [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk(coordSys_)) getPointWithDouble:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(v)) getX] withDouble:[v getY]];
}

- (OrgGeogebraCommonKernelMatrixCoords *)getMainDirection {
  if (reverseNormal_) {
    return [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk(coordSys_)) getNormal])) mulWithDouble:-1];
  }
  return [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk(coordSys_)) getNormal];
}

- (IOSObjectArray *)getPoints {
  return points2D_;
}

- (void)setPoints2DWithOrgGeogebraCommonKernelGeosGeoPointArray:(IOSObjectArray *)points {
  points2D_ = points;
}

- (void)setEuclidianVisibleWithBoolean:(jboolean)visible {
  [self setEuclidianVisibleWithBoolean:visible withBoolean:createSegments_GeoPolygon3D_];
}

- (void)setCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys:(OrgGeogebraCommonKernelMatrixCoordSys *)cs {
  if (points_ == nil) return;
  [self setDefined];
  coordSys_ = cs;
  points2D_ = [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(points_))->size_ type:OrgGeogebraCommonKernelGeosGeoPoint_class_()];
  for (jint i = 0; i < points_->size_; i++) {
    (void) IOSObjectArray_Set(points2D_, i, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withBoolean_([self getConstruction], YES));
  }
  if (coordSys_ == nil) {
    coordSys_ = new_OrgGeogebraCommonKernelMatrixCoordSys_initWithInt_(2);
    [self updateCoordSys];
  }
}

- (void)setCoordSysWithOrgGeogebraCommonKernelGeosGeoPolygon:(OrgGeogebraCommonKernelGeosGeoPolygon *)poly {
  if (coordSys_ == nil) {
    coordSys_ = new_OrgGeogebraCommonKernelMatrixCoordSys_initWithInt_(2);
  }
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk(coordSys_)) setWithOrgGeogebraCommonKernelMatrixCoordSys:[((OrgGeogebraCommonKernelGeosGeoPolygon *) nil_chk(poly)) getCoordSys]];
}

- (void)setCoordSysAndPoints3DWithOrgGeogebraCommonKernelGeosGeoPolygon:(OrgGeogebraCommonKernelGeosGeoPolygon *)poly {
  [self setCoordSysWithOrgGeogebraCommonKernelGeosGeoPolygon:poly];
  [self setPoints3DLength];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(points2D_))->size_; i++) {
    OrgGeogebraCommonKernelMatrixCoords *v = [super getPoint3DWithInt:i];
    OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *point = [((JavaUtilArrayList *) nil_chk(points3DArray_)) getWithInt:i];
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(point)) setCoordsWithOrgGeogebraCommonKernelMatrixCoords:[((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk(coordSys_)) getPointWithDouble:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(v)) getX] withDouble:[v getY]]];
  }
  for (jint i = points2D_->size_; i < [((JavaUtilArrayList *) nil_chk(points3DArray_)) size]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk([points3DArray_ getWithInt:i])) setUndefined];
  }
}

- (void)setPoints3DLength {
  if (points3DArray_ == nil) {
    points3DArray_ = new_JavaUtilArrayList_init();
  }
  for (jint i = [((JavaUtilArrayList *) nil_chk(points3DArray_)) size]; i < ((IOSObjectArray *) nil_chk(points2D_))->size_; i++) {
    OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *point = new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D_initWithOrgGeogebraCommonKernelConstruction_(cons_);
    [points3DArray_ addWithId:point];
    [point setCanBeRemovedAsInputWithBoolean:NO];
  }
  points_ = [IOSObjectArray newArrayWithLength:points2D_->size_ type:OrgGeogebraCommonKernelKernelNDGeoPointND_class_()];
  for (jint i = 0; i < points2D_->size_; i++) {
    (void) IOSObjectArray_Set(points_, i, [points3DArray_ getWithInt:i]);
  }
}

- (void)setPointsAndSegmentsLengthWithInt:(jint)polyLength {
  [self setPointsLengthWithInt:polyLength withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:nil];
  [self setPoints3DLength];
  [self updateSegments];
}

- (jboolean)checkPointsAreOnCoordSys {
  OrgGeogebraCommonKernelMatrixCoords *tmpCoords = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(4);
  return OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_checkPointsAreOnCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoPointArray_withOrgGeogebraCommonKernelMatrixCoords_(coordSys_, points_, points2D_, tmpCoords);
}

+ (jboolean)checkPointsAreOnCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys:(OrgGeogebraCommonKernelMatrixCoordSys *)coordSys
                           withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)points
                                 withOrgGeogebraCommonKernelGeosGeoPointArray:(IOSObjectArray *)points2D
                                      withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)tmpCoords {
  return OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_checkPointsAreOnCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoPointArray_withOrgGeogebraCommonKernelMatrixCoords_(coordSys, points, points2D, tmpCoords);
}

- (jboolean)updateCoordSys {
  OrgGeogebraCommonKernelMatrixCoords *tmpCoords = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(4);
  return OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_updateCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoPointArray_withOrgGeogebraCommonKernelMatrixCoords_(coordSys_, points_, points2D_, tmpCoords);
}

+ (jboolean)updateCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys:(OrgGeogebraCommonKernelMatrixCoordSys *)coordSys
                 withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)points
                       withOrgGeogebraCommonKernelGeosGeoPointArray:(IOSObjectArray *)points2D
                            withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)tmpCoords {
  return OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_updateCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoPointArray_withOrgGeogebraCommonKernelMatrixCoords_(coordSys, points, points2D, tmpCoords);
}

- (void)setOrthoNormalRegionCS {
  [self updateRegionCSWithOrgGeogebraCommonKernelGeosGeoPoint:new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons_, 0, 0, 1) withOrgGeogebraCommonKernelGeosGeoPoint:new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons_, 1, 0, 1) withOrgGeogebraCommonKernelGeosGeoPoint:new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(cons_, 0, 1, 1)];
}

- (OrgGeogebraCommonKernelMatrixCoordSys *)getCoordSys {
  return coordSys_;
}

- (jboolean)isDefined {
  if (coordSys_ == nil) return NO;
  else return [super isDefined] && [coordSys_ isDefined];
}

- (void)setIsPartOfClosedSurfaceWithBoolean:(jboolean)v {
  isPartOfClosedSurface__ = v;
}

- (jboolean)isPartOfClosedSurface {
  return isPartOfClosedSurface__;
}

- (void)pathChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)PI {
  if (![((OrgGeogebraCommonKernelKernel *) nil_chk([self getKernel])) usePathAndRegionParametersWithOrgGeogebraCommonKernelKernelNDGeoPointND:PI]) {
    [self pointChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:PI];
    return;
  }
  if (!([PI isKindOfClass:[OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class]])) return;
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *P = (OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast(PI, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class]);
  OrgGeogebraCommonKernelPathParameter *pp = [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(P)) getPathParameter];
  jdouble oldT = [((OrgGeogebraCommonKernelPathParameter *) nil_chk(pp)) getT];
  jint index = J2ObjCFpToInt([pp getT]);
  id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg;
  if (segments_ == nil) {
    seg = new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D_initWithOrgGeogebraCommonKernelConstruction_(cons_);
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) setCoordFromPointsWithOrgGeogebraCommonKernelMatrixCoords:[self getPoint3DWithInt:index] withOrgGeogebraCommonKernelMatrixCoords:[self getPoint3DWithInt:(index + 1) % [self getPointsLength]]];
  }
  else {
    seg = IOSObjectArray_Get(segments_, index);
  }
  [pp setTWithDouble:[pp getT] - index];
  [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) pathChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:P];
  [pp setTWithDouble:oldT];
}

- (void)pointChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)PI {
  if (!([PI isKindOfClass:[OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class]])) return;
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *P = (OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast(PI, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class]);
  OrgGeogebraCommonKernelMatrixCoords *coordsOld = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(P)) getInhomCoords])) copyVector];
  id<OrgGeogebraCommonKernelRegion> region = [P getRegion];
  [P setRegionWithOrgGeogebraCommonKernelRegion:nil];
  jdouble minDist = JavaLangDouble_POSITIVE_INFINITY;
  OrgGeogebraCommonKernelMatrixCoords *res = nil;
  jdouble param = 0;
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *segment = nil;
  if (segments_ == nil) {
    segment = new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D_initWithOrgGeogebraCommonKernelConstruction_(cons_);
  }
  OrgGeogebraCommonKernelPathParameter *pp = [P getPathParameter];
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [P setCoordsWithOrgGeogebraCommonKernelMatrixCoords:coordsOld withBoolean:NO];
    if (segment == nil) {
      [((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(IOSObjectArray_Get(nil_chk(segments_), i))) pointChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:P];
    }
    else {
      [segment setCoordFromPointsWithOrgGeogebraCommonKernelMatrixCoords:[self getPoint3DWithInt:i] withOrgGeogebraCommonKernelMatrixCoords:[self getPoint3DWithInt:(i + 1) % [self getPointsLength]]];
      [segment pointChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:P];
    }
    jdouble dist;
    if ([P hasWillingCoords] && [P hasWillingDirection]) {
      dist = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([P getInhomCoords])) distLineWithOrgGeogebraCommonKernelMatrixCoords:[P getWillingCoords] withOrgGeogebraCommonKernelMatrixCoords:[P getWillingDirection]];
    }
    else {
      dist = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([P getInhomCoords])) subWithOrgGeogebraCommonKernelMatrixCoords:coordsOld])) squareNorm];
    }
    if (dist < minDist) {
      minDist = dist;
      res = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([P getInhomCoords])) copyVector];
      param = i + [((OrgGeogebraCommonKernelPathParameter *) nil_chk(pp)) getT];
    }
  }
  [P setCoordsWithOrgGeogebraCommonKernelMatrixCoords:res withBoolean:NO];
  [((OrgGeogebraCommonKernelPathParameter *) nil_chk(pp)) setTWithDouble:param];
  [P setRegionWithOrgGeogebraCommonKernelRegion:region];
}

- (void)setRegionChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)PI
                                                           withDouble:(jdouble)x
                                                           withDouble:(jdouble)y {
  [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(PI)) setCoords2DWithDouble:x withDouble:y withDouble:1];
  [PI updateCoordsFrom2DWithBoolean:NO withOrgGeogebraCommonKernelMatrixCoordSys:nil];
}

- (jboolean)isInRegionWithOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)PI
                                                        withBoolean:(jboolean)update {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *P = (OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast(PI, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class]);
  [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(P)) updateCoords2DWithOrgGeogebraCommonKernelRegion:self withBoolean:NO];
  return [self isInRegionWithDouble:[P getX2D] withDouble:[P getY2D]];
}

- (OrgGeogebraCommonKernelGeosGeoPolygon *)newGeoPolygonWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons {
  return new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_(cons, nil);
}

- (OrgGeogebraCommonKernelMatrixCoords *)getDirectionInD3 {
  return [self getMainDirection];
}

- (void)createView2D {
  euclidianViewForPlane_ = (OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion *) check_class_cast([((OrgGeogebraCommonMainAppCompanion *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getApplication])) getCompanion])) createEuclidianViewForPlaneWithOrgGeogebraCommonKernelKernelNDViewCreator:self withBoolean:YES], [OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion class]);
  [((OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion *) nil_chk(euclidianViewForPlane_)) setTransformRegardingView];
}

- (void)removeView2D {
  [((OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion *) nil_chk(euclidianViewForPlane_)) doRemove];
}

- (void)setEuclidianViewForPlaneWithOrgGeogebraCommonEuclidianEuclidianViewCompanion:(OrgGeogebraCommonEuclidianEuclidianViewCompanion *)view {
  euclidianViewForPlane_ = (OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion *) check_class_cast(view, [OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion class]);
}

- (jboolean)hasView2DVisible {
  return euclidianViewForPlane_ != nil && [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getApplication])) getGuiManager])) showViewWithInt:[euclidianViewForPlane_ getId]];
}

- (void)setView2DVisibleWithBoolean:(jboolean)flag {
  if (euclidianViewForPlane_ == nil) {
    if (flag) [self createView2D];
    return;
  }
  [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getApplication])) getGuiManager])) setShowViewWithBoolean:flag withInt:[((OrgGeogebraCommonGeogebra3DEuclidianForPlaneEuclidianViewForPlaneCompanion *) nil_chk(euclidianViewForPlane_)) getId]];
}

- (void)update {
  [super update];
  if (euclidianViewForPlane_ != nil) {
    [euclidianViewForPlane_ updateForPlane];
  }
}

- (void)doRemove {
  if (euclidianViewForPlane_ != nil) {
    [self removeView2D];
  }
  [super doRemove];
}

- (void)matrixTransformWithDouble:(jdouble)a00
                       withDouble:(jdouble)a01
                       withDouble:(jdouble)a10
                       withDouble:(jdouble)a11 {
  if (tmpMatrix4x4_ == nil) {
    tmpMatrix4x4_ = OrgGeogebraCommonKernelMatrixCoordMatrix4x4_Identity();
  }
  else {
    [tmpMatrix4x4_ setWithInt:1 withInt:3 withDouble:0];
    [tmpMatrix4x4_ setWithInt:1 withInt:4 withDouble:0];
    [tmpMatrix4x4_ setWithInt:2 withInt:3 withDouble:0];
    [tmpMatrix4x4_ setWithInt:2 withInt:4 withDouble:0];
    [tmpMatrix4x4_ setWithInt:3 withInt:1 withDouble:0];
    [tmpMatrix4x4_ setWithInt:3 withInt:2 withDouble:0];
    [tmpMatrix4x4_ setWithInt:3 withInt:3 withDouble:0];
    [tmpMatrix4x4_ setWithInt:3 withInt:4 withDouble:0];
    [tmpMatrix4x4_ setWithInt:4 withInt:1 withDouble:0];
    [tmpMatrix4x4_ setWithInt:4 withInt:2 withDouble:0];
    [tmpMatrix4x4_ setWithInt:4 withInt:3 withDouble:0];
    [tmpMatrix4x4_ setWithInt:4 withInt:4 withDouble:1];
  }
  [((OrgGeogebraCommonKernelMatrixCoordMatrix4x4 *) nil_chk(tmpMatrix4x4_)) setWithInt:1 withInt:1 withDouble:a00];
  [tmpMatrix4x4_ setWithInt:1 withInt:2 withDouble:a01];
  [tmpMatrix4x4_ setWithInt:2 withInt:1 withDouble:a10];
  [tmpMatrix4x4_ setWithInt:2 withInt:2 withDouble:a11];
  IOSDoubleArray *ret = [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) matrixTransformWithOrgGeogebraCommonKernelMatrixCoordMatrix4x4:tmpMatrix4x4_];
  [super matrixTransformWithDouble:IOSDoubleArray_Get(nil_chk(ret), 0) withDouble:IOSDoubleArray_Get(ret, 1) withDouble:0 withDouble:IOSDoubleArray_Get(ret, 2)];
}

- (void)matrixTransformWithDouble:(jdouble)a00
                       withDouble:(jdouble)a01
                       withDouble:(jdouble)a02
                       withDouble:(jdouble)a10
                       withDouble:(jdouble)a11
                       withDouble:(jdouble)a12
                       withDouble:(jdouble)a20
                       withDouble:(jdouble)a21
                       withDouble:(jdouble)a22 {
  if (tmpMatrix4x4_ == nil) {
    tmpMatrix4x4_ = OrgGeogebraCommonKernelMatrixCoordMatrix4x4_Identity();
  }
  else {
    [tmpMatrix4x4_ setWithInt:1 withInt:4 withDouble:0];
    [tmpMatrix4x4_ setWithInt:2 withInt:4 withDouble:0];
    [tmpMatrix4x4_ setWithInt:3 withInt:4 withDouble:0];
    [tmpMatrix4x4_ setWithInt:4 withInt:1 withDouble:0];
    [tmpMatrix4x4_ setWithInt:4 withInt:2 withDouble:0];
    [tmpMatrix4x4_ setWithInt:4 withInt:3 withDouble:0];
    [tmpMatrix4x4_ setWithInt:4 withInt:4 withDouble:1];
  }
  [((OrgGeogebraCommonKernelMatrixCoordMatrix4x4 *) nil_chk(tmpMatrix4x4_)) setWithInt:1 withInt:1 withDouble:a00];
  [tmpMatrix4x4_ setWithInt:1 withInt:2 withDouble:a01];
  [tmpMatrix4x4_ setWithInt:1 withInt:3 withDouble:a02];
  [tmpMatrix4x4_ setWithInt:2 withInt:1 withDouble:a10];
  [tmpMatrix4x4_ setWithInt:2 withInt:2 withDouble:a11];
  [tmpMatrix4x4_ setWithInt:2 withInt:3 withDouble:a12];
  [tmpMatrix4x4_ setWithInt:3 withInt:1 withDouble:a20];
  [tmpMatrix4x4_ setWithInt:3 withInt:2 withDouble:a21];
  [tmpMatrix4x4_ setWithInt:3 withInt:3 withDouble:a22];
  IOSDoubleArray *ret = [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) matrixTransformWithOrgGeogebraCommonKernelMatrixCoordMatrix4x4:tmpMatrix4x4_];
  [super matrixTransformWithDouble:IOSDoubleArray_Get(nil_chk(ret), 0) withDouble:IOSDoubleArray_Get(ret, 1) withDouble:0 withDouble:IOSDoubleArray_Get(ret, 2)];
}

- (void)setInitLabelsCalledWithBoolean:(jboolean)flag {
  initLabelsCalled_ = flag;
}

- (void)rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)r {
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) rotateWithDouble:[((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(r)) getDouble] withOrgGeogebraCommonKernelMatrixCoords:OrgGeogebraCommonKernelMatrixCoords_get_O_()];
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast([super getPointNDWithInt:i], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class])))) rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:r];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:r];
      }
    }
  }
}

- (void)rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)r
                 withOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)S {
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) rotateWithDouble:[((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(r)) getDouble] withOrgGeogebraCommonKernelMatrixCoords:[((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(S)) getInhomCoordsInD3]];
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast([super getPointNDWithInt:i], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class])))) rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:r withOrgGeogebraCommonKernelKernelNDGeoPointND:S];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:r withOrgGeogebraCommonKernelKernelNDGeoPointND:S];
      }
    }
  }
}

- (void)rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)phiVal
                 withOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)Q
             withOrgGeogebraCommonKernelKernelNDGeoDirectionND:(id<OrgGeogebraCommonKernelKernelNDGeoDirectionND>)orientation {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_rotateWithOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoords_(self, phiVal, [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(Q)) getInhomCoordsInD3], [((id<OrgGeogebraCommonKernelKernelNDGeoDirectionND>) nil_chk(orientation)) getDirectionInD3]);
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast([super getPointNDWithInt:i], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class])))) rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:phiVal withOrgGeogebraCommonKernelKernelNDGeoPointND:Q withOrgGeogebraCommonKernelKernelNDGeoDirectionND:orientation];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:phiVal withOrgGeogebraCommonKernelKernelNDGeoPointND:Q withOrgGeogebraCommonKernelKernelNDGeoDirectionND:orientation];
      }
    }
  }
}

- (void)rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)phiVal
                  withOrgGeogebraCommonKernelKernelNDGeoLineND:(id<OrgGeogebraCommonKernelKernelNDGeoLineND>)line {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_rotateWithOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoords_(self, phiVal, [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(line)) getStartInhomCoords], [line getDirectionInD3]);
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast([super getPointNDWithInt:i], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class])))) rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:phiVal withOrgGeogebraCommonKernelKernelNDGeoLineND:line];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:phiVal withOrgGeogebraCommonKernelKernelNDGeoLineND:line];
      }
    }
  }
}

- (void)rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)phiVal
                       withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)center
                       withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)direction {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_rotateWithOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoords_(self, phiVal, center, direction);
}

- (void)translateWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) translateWithOrgGeogebraCommonKernelMatrixCoords:v];
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk([super getPointNDWithInt:i])) translateWithOrgGeogebraCommonKernelMatrixCoords:v];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) translateWithOrgGeogebraCommonKernelMatrixCoords:v];
      }
    }
  }
}

- (void)mirrorWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)Q {
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) mirrorWithOrgGeogebraCommonKernelMatrixCoords:Q];
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast([super getPointNDWithInt:i], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class])))) mirrorWithOrgGeogebraCommonKernelMatrixCoords:Q];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) mirrorWithOrgGeogebraCommonKernelMatrixCoords:Q];
      }
    }
  }
}

- (void)mirrorWithOrgGeogebraCommonKernelKernelNDGeoLineND:(id<OrgGeogebraCommonKernelKernelNDGeoLineND>)line {
  OrgGeogebraCommonKernelMatrixCoords *point = [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(line)) getStartInhomCoords];
  OrgGeogebraCommonKernelMatrixCoords *direction = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([line getDirectionInD3])) normalized];
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) mirrorWithOrgGeogebraCommonKernelMatrixCoords:point withOrgGeogebraCommonKernelMatrixCoords:direction];
  reverseNormal_ = !reverseNormal_;
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast([super getPointNDWithInt:i], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class])))) mirrorWithOrgGeogebraCommonKernelKernelNDGeoLineND:line];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) mirrorWithOrgGeogebraCommonKernelKernelNDGeoLineND:line];
      }
    }
  }
}

- (void)mirrorWithOrgGeogebraCommonKernelKernelNDGeoCoordSys2D:(id<OrgGeogebraCommonKernelKernelNDGeoCoordSys2D>)plane {
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) mirrorWithOrgGeogebraCommonKernelMatrixCoordSys:[((id<OrgGeogebraCommonKernelKernelNDGeoCoordSys2D>) nil_chk(plane)) getCoordSys]];
  reverseNormal_ = !reverseNormal_;
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast([super getPointNDWithInt:i], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class])))) mirrorWithOrgGeogebraCommonKernelKernelNDGeoCoordSys2D:plane];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) mirrorWithOrgGeogebraCommonKernelKernelNDGeoCoordSys2D:plane];
      }
    }
  }
}

- (void)dilateWithOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)rval
                       withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)S {
  jdouble r = [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(rval)) getDouble];
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) dilateWithDouble:r withOrgGeogebraCommonKernelMatrixCoords:S];
  if (r < 0) {
    r = -r;
  }
  for (jint i = 0; i < [self getPointsLength]; i++) [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk([self getPointWithInt:i])) dilateWithDouble:r];
  [self calcArea];
  for (jint i = 0; i < [self getPointsLength]; i++) {
    [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) nil_chk(((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D *) check_class_cast([super getPointNDWithInt:i], [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D class])))) dilateWithOrgGeogebraCommonKernelArithmeticNumberValue:rval withOrgGeogebraCommonKernelMatrixCoords:S];
  }
  {
    IOSObjectArray *a__ = [self getSegments];
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      id<OrgGeogebraCommonKernelKernelNDGeoSegmentND> seg = *b__++;
      if ([((id<OrgGeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(seg)) isGeoElement3D]) {
        [((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D *) check_class_cast(seg, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoSegment3D class])) dilateWithOrgGeogebraCommonKernelArithmeticNumberValue:rval withOrgGeogebraCommonKernelMatrixCoords:S];
      }
    }
  }
}

- (void)setReverseNormal {
  reverseNormal_ = YES;
}

- (void)setWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoPolygon] && [geo isGeoElement3D]) {
    reverseNormal_ = ((OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *) check_class_cast(geo, [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D class]))->reverseNormal_;
  }
  [super setWithOrgGeogebraCommonKernelGeosGeoElement:geo];
}

- (jboolean)isEqualWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoPolygon]) {
    OrgGeogebraCommonKernelGeosGeoPolygon *g = (OrgGeogebraCommonKernelGeosGeoPolygon *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoPolygon class]);
    jint gLength = [g getPointsLength];
    if (gLength == [self getPointsLength]) {
      OrgGeogebraCommonKernelMatrixCoords *firstPoint = [self getPoint3DWithInt:0];
      jboolean fPointFound = NO;
      jint iFirstPoint = 0;
      while ((!fPointFound) && (iFirstPoint < gLength)) {
        if ([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(firstPoint)) equalsForKernelWithOrgGeogebraCommonKernelMatrixCoords:[g getPoint3DWithInt:iFirstPoint]]) {
          fPointFound = YES;
        }
        else {
          iFirstPoint++;
        }
      }
      if (fPointFound) {
        jboolean sPointFound = NO;
        jint step = 1;
        if ([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([self getPoint3DWithInt:1])) equalsForKernelWithOrgGeogebraCommonKernelMatrixCoords:[g getPoint3DWithInt:(iFirstPoint + step) % gLength]]) {
          sPointFound = YES;
        }
        else {
          step = -1;
          jint j = iFirstPoint + step;
          if (j < 0) j = gLength - 1;
          if ([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([self getPoint3DWithInt:1])) equalsForKernelWithOrgGeogebraCommonKernelMatrixCoords:[g getPoint3DWithInt:j]]) {
            sPointFound = YES;
          }
        }
        if (sPointFound) {
          jint i = 2;
          jint j = iFirstPoint + step + step;
          if (j < 0) j = j + gLength;
          j = j % gLength;
          jboolean pointOK = YES;
          while ((pointOK) && (i < gLength)) {
            pointOK = ([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk([self getPoint3DWithInt:i])) equalsForKernelWithOrgGeogebraCommonKernelMatrixCoords:[g getPoint3DWithInt:j]]);
            j = j + step;
            if (j < 0) j = gLength - 1;
            j = j % gLength;
            i++;
          }
          return pointOK;
        }
      }
    }
  }
  return NO;
}

- (jboolean)isConvexInverseDirection {
  return reverseNormal_;
}

- (void)calcCentroidWithOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)p {
  if (tmp3_GeoPolygon3D_ == nil) {
    tmp3_GeoPolygon3D_ = [IOSDoubleArray newArrayWithLength:3];
  }
  OrgGeogebraCommonKernelAlgosAlgoPolygon_calcCentroidWithDoubleArray_withDouble_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_(tmp3_GeoPolygon3D_, area_, [self getPoints]);
  if (JavaLangDouble_isNaNWithDouble_(IOSDoubleArray_Get(nil_chk(tmp3_GeoPolygon3D_), 0))) {
    [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(p)) setUndefined];
  }
  else {
    OrgGeogebraCommonKernelMatrixCoords *c = [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) getPointWithDouble:IOSDoubleArray_Get(tmp3_GeoPolygon3D_, 0) withDouble:IOSDoubleArray_Get(tmp3_GeoPolygon3D_, 1) withDouble:IOSDoubleArray_Get(tmp3_GeoPolygon3D_, 2)];
    [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(p)) setCoordsWithOrgGeogebraCommonKernelMatrixCoords:c withBoolean:NO];
  }
}

- (id<OrgGeogebraCommonKernelKernelNDGeoPointND>)newGeoPointWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons {
  return new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPoint3D_initWithOrgGeogebraCommonKernelConstruction_(cons);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelConstruction:withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:withOrgGeogebraCommonKernelMatrixCoordSys:withBoolean:", "GeoPolygon3D", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:", "GeoPolygon3D", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:", "GeoPolygon3D", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withBoolean:", "GeoPolygon3D", NULL, 0x1, NULL, NULL },
    { "isIntersection", NULL, "Z", 0x1, NULL, NULL },
    { "getGeoClassType", NULL, "Lorg.geogebra.common.plugin.GeoClass;", 0x1, NULL, NULL },
    { "isGeoElement3D", NULL, "Z", 0x1, NULL, NULL },
    { "createSegmentWithOrgGeogebraCommonKernelKernelNDGeoPointND:withOrgGeogebraCommonKernelKernelNDGeoPointND:withBoolean:", "createSegment", "Lorg.geogebra.common.kernel.kernelND.GeoSegmentND;", 0x1, NULL, NULL },
    { "getPointWithInt:", "getPoint", "Lorg.geogebra.common.kernel.geos.GeoPoint;", 0x1, NULL, NULL },
    { "getPoint3DWithInt:", "getPoint3D", "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "getMainDirection", NULL, "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "getPoints", NULL, "[Lorg.geogebra.common.kernel.kernelND.GeoPointND;", 0x1, NULL, NULL },
    { "setPoints2DWithOrgGeogebraCommonKernelGeosGeoPointArray:", "setPoints2D", "V", 0x1, NULL, NULL },
    { "setEuclidianVisibleWithBoolean:", "setEuclidianVisible", "V", 0x1, NULL, NULL },
    { "setCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys:", "setCoordSys", "V", 0x1, NULL, NULL },
    { "setCoordSysWithOrgGeogebraCommonKernelGeosGeoPolygon:", "setCoordSys", "V", 0x1, NULL, NULL },
    { "setCoordSysAndPoints3DWithOrgGeogebraCommonKernelGeosGeoPolygon:", "setCoordSysAndPoints3D", "V", 0x1, NULL, NULL },
    { "setPoints3DLength", NULL, "V", 0x1, NULL, NULL },
    { "setPointsAndSegmentsLengthWithInt:", "setPointsAndSegmentsLength", "V", 0x1, NULL, NULL },
    { "checkPointsAreOnCoordSys", NULL, "Z", 0x1, NULL, NULL },
    { "checkPointsAreOnCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys:withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:withOrgGeogebraCommonKernelGeosGeoPointArray:withOrgGeogebraCommonKernelMatrixCoords:", "checkPointsAreOnCoordSys", "Z", 0x19, NULL, NULL },
    { "updateCoordSys", NULL, "Z", 0x1, NULL, NULL },
    { "updateCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys:withOrgGeogebraCommonKernelKernelNDGeoPointNDArray:withOrgGeogebraCommonKernelGeosGeoPointArray:withOrgGeogebraCommonKernelMatrixCoords:", "updateCoordSys", "Z", 0x19, NULL, NULL },
    { "setOrthoNormalRegionCS", NULL, "V", 0x11, NULL, NULL },
    { "getCoordSys", NULL, "Lorg.geogebra.common.kernel.Matrix.CoordSys;", 0x1, NULL, NULL },
    { "isDefined", NULL, "Z", 0x1, NULL, NULL },
    { "setIsPartOfClosedSurfaceWithBoolean:", "setIsPartOfClosedSurface", "V", 0x1, NULL, NULL },
    { "isPartOfClosedSurface", NULL, "Z", 0x1, NULL, NULL },
    { "pathChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:", "pathChanged", "V", 0x1, NULL, NULL },
    { "pointChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:", "pointChanged", "V", 0x1, NULL, NULL },
    { "setRegionChangedWithOrgGeogebraCommonKernelKernelNDGeoPointND:withDouble:withDouble:", "setRegionChanged", "V", 0x1, NULL, NULL },
    { "isInRegionWithOrgGeogebraCommonKernelKernelNDGeoPointND:withBoolean:", "isInRegion", "Z", 0x1, NULL, NULL },
    { "newGeoPolygonWithOrgGeogebraCommonKernelConstruction:", "newGeoPolygon", "Lorg.geogebra.common.kernel.geos.GeoPolygon;", 0x4, NULL, NULL },
    { "getDirectionInD3", NULL, "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "createView2D", NULL, "V", 0x1, NULL, NULL },
    { "removeView2D", NULL, "V", 0x1, NULL, NULL },
    { "setEuclidianViewForPlaneWithOrgGeogebraCommonEuclidianEuclidianViewCompanion:", "setEuclidianViewForPlane", "V", 0x1, NULL, NULL },
    { "hasView2DVisible", NULL, "Z", 0x1, NULL, NULL },
    { "setView2DVisibleWithBoolean:", "setView2DVisible", "V", 0x1, NULL, NULL },
    { "update", NULL, "V", 0x1, NULL, NULL },
    { "doRemove", NULL, "V", 0x1, NULL, NULL },
    { "matrixTransformWithDouble:withDouble:withDouble:withDouble:", "matrixTransform", "V", 0x1, NULL, NULL },
    { "matrixTransformWithDouble:withDouble:withDouble:withDouble:withDouble:withDouble:withDouble:withDouble:withDouble:", "matrixTransform", "V", 0x1, NULL, NULL },
    { "setInitLabelsCalledWithBoolean:", "setInitLabelsCalled", "V", 0x1, NULL, NULL },
    { "rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:", "rotate", "V", 0x1, NULL, NULL },
    { "rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:withOrgGeogebraCommonKernelKernelNDGeoPointND:", "rotate", "V", 0x1, NULL, NULL },
    { "rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:withOrgGeogebraCommonKernelKernelNDGeoPointND:withOrgGeogebraCommonKernelKernelNDGeoDirectionND:", "rotate", "V", 0x1, NULL, NULL },
    { "rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:withOrgGeogebraCommonKernelKernelNDGeoLineND:", "rotate", "V", 0x1, NULL, NULL },
    { "rotateWithOrgGeogebraCommonKernelArithmeticNumberValue:withOrgGeogebraCommonKernelMatrixCoords:withOrgGeogebraCommonKernelMatrixCoords:", "rotate", "V", 0x12, NULL, NULL },
    { "translateWithOrgGeogebraCommonKernelMatrixCoords:", "translate", "V", 0x1, NULL, NULL },
    { "mirrorWithOrgGeogebraCommonKernelMatrixCoords:", "mirror", "V", 0x1, NULL, NULL },
    { "mirrorWithOrgGeogebraCommonKernelKernelNDGeoLineND:", "mirror", "V", 0x1, NULL, NULL },
    { "mirrorWithOrgGeogebraCommonKernelKernelNDGeoCoordSys2D:", "mirror", "V", 0x1, NULL, NULL },
    { "dilateWithOrgGeogebraCommonKernelArithmeticNumberValue:withOrgGeogebraCommonKernelMatrixCoords:", "dilate", "V", 0x1, NULL, NULL },
    { "setReverseNormal", NULL, "V", 0x1, NULL, NULL },
    { "setWithOrgGeogebraCommonKernelGeosGeoElement:", "set", "V", 0x1, NULL, NULL },
    { "isEqualWithOrgGeogebraCommonKernelGeosGeoElement:", "isEqual", "Z", 0x11, NULL, NULL },
    { "isConvexInverseDirection", NULL, "Z", 0x1, NULL, NULL },
    { "calcCentroidWithOrgGeogebraCommonKernelKernelNDGeoPointND:", "calcCentroid", "V", 0x1, NULL, NULL },
    { "newGeoPointWithOrgGeogebraCommonKernelConstruction:", "newGeoPoint", "Lorg.geogebra.common.kernel.kernelND.GeoPointND;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "coordSys_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.CoordSys;", NULL, NULL,  },
    { "points2D_", NULL, 0x2, "[Lorg.geogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "isPartOfClosedSurface__", "isPartOfClosedSurface", 0x2, "Z", NULL, NULL,  },
    { "createSegments_GeoPolygon3D_", "createSegments", 0x2, "Z", NULL, NULL,  },
    { "points3DArray_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/geogebra3D/kernel3D/geos/GeoPoint3D;>;",  },
    { "euclidianViewForPlane_", NULL, 0x2, "Lorg.geogebra.common.geogebra3D.euclidianForPlane.EuclidianViewForPlaneCompanion;", NULL, NULL,  },
    { "tmpMatrix4x4_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.CoordMatrix4x4;", NULL, NULL,  },
    { "reverseNormal_", NULL, 0x2, "Z", NULL, NULL,  },
    { "tmp3_GeoPolygon3D_", "tmp3", 0x2, "[D", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D = { 2, "GeoPolygon3D", "org.geogebra.common.geogebra3D.kernel3D.geos", NULL, 0x1, 60, methods, 9, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D;
}

@end

void OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelMatrixCoordSys_withBoolean_(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self, OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *points, OrgGeogebraCommonKernelMatrixCoordSys *cs2D, jboolean createSegments) {
  (void) OrgGeogebraCommonKernelGeosGeoPolygon_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelMatrixCoordSys_withBoolean_(self, c, points, cs2D, createSegments);
  self->isPartOfClosedSurface__ = NO;
  self->createSegments_GeoPolygon3D_ = YES;
  self->reverseNormal_ = NO;
  self->createSegments_GeoPolygon3D_ = createSegments;
}

OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelMatrixCoordSys_withBoolean_(OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *points, OrgGeogebraCommonKernelMatrixCoordSys *cs2D, jboolean createSegments) {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self = [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D alloc];
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelMatrixCoordSys_withBoolean_(self, c, points, cs2D, createSegments);
  return self;
}

void OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self, OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *points) {
  (void) OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelMatrixCoordSys_withBoolean_(self, c, points, nil, YES);
}

OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_(OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *points) {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self = [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D alloc];
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_(self, c, points);
  return self;
}

void OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self, OrgGeogebraCommonKernelConstruction *cons) {
  (void) OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self, cons, NO);
}

OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonKernelConstruction *cons) {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self = [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D alloc];
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_(self, cons);
  return self;
}

void OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self, OrgGeogebraCommonKernelConstruction *cons, jboolean isIntersection) {
  (void) OrgGeogebraCommonKernelGeosGeoPolygon_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self, cons, isIntersection);
  self->isPartOfClosedSurface__ = NO;
  self->createSegments_GeoPolygon3D_ = YES;
  self->reverseNormal_ = NO;
}

OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *new_OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(OrgGeogebraCommonKernelConstruction *cons, jboolean isIntersection) {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self = [OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D alloc];
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self, cons, isIntersection);
  return self;
}

jboolean OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_checkPointsAreOnCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoPointArray_withOrgGeogebraCommonKernelMatrixCoords_(OrgGeogebraCommonKernelMatrixCoordSys *coordSys, IOSObjectArray *points, IOSObjectArray *points2D, OrgGeogebraCommonKernelMatrixCoords *tmpCoords) {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initialize();
  OrgGeogebraCommonKernelMatrixCoords *o = [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk(coordSys)) getOrigin];
  OrgGeogebraCommonKernelMatrixCoords *vn = [coordSys getVz];
  OrgGeogebraCommonKernelMatrixCoordMatrix4x4 *matrix = [coordSys getMatrixOrthonormal];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(points))->size_; i++) {
    if (![((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) isDefined] || ![((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) isFinite]) {
      [coordSys setUndefined];
      return NO;
    }
    OrgGeogebraCommonKernelMatrixCoords *p = [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) getInhomCoordsInD3];
    if (!OrgGeogebraCommonKernelKernel_isZeroWithDouble_([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(vn)) dotproductWithOrgGeogebraCommonKernelMatrixCoords:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(p)) subWithOrgGeogebraCommonKernelMatrixCoords:o]])) {
      [coordSys setUndefined];
      return NO;
    }
    [p projectPlaneInPlaneCoordsWithOrgGeogebraCommonKernelMatrixCoordMatrix:matrix withOrgGeogebraCommonKernelMatrixCoords:tmpCoords];
    [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(points2D), i))) setCoordsWithDouble:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords)) getX] withDouble:[tmpCoords getY] withDouble:[tmpCoords getW]];
  }
  return YES;
}

jboolean OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_updateCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoPointArray_withOrgGeogebraCommonKernelMatrixCoords_(OrgGeogebraCommonKernelMatrixCoordSys *coordSys, IOSObjectArray *points, IOSObjectArray *points2D, OrgGeogebraCommonKernelMatrixCoords *tmpCoords) {
  OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_initialize();
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk(coordSys)) resetCoordSys];
  for (jint i = 0; (![coordSys isMadeCoordSys]) && (i < ((IOSObjectArray *) nil_chk(points))->size_); i++) {
    if (![((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(nil_chk(points), i))) isDefined] || ![((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) isFinite]) {
      [coordSys setUndefined];
      return NO;
    }
    [coordSys addPointWithOrgGeogebraCommonKernelMatrixCoords:[((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) getInhomCoordsInD3]];
  }
  if ([coordSys getMadeCoordSys] != 2) {
    [coordSys completeCoordSys2D];
  }
  if ([coordSys makeOrthoMatrixWithBoolean:NO withBoolean:NO]) {
    return OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_checkPointsAreOnCoordSysWithOrgGeogebraCommonKernelMatrixCoordSys_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withOrgGeogebraCommonKernelGeosGeoPointArray_withOrgGeogebraCommonKernelMatrixCoords_(coordSys, points, points2D, tmpCoords);
  }
  return YES;
}

void OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D_rotateWithOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoords_(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D *self, id<OrgGeogebraCommonKernelArithmeticNumberValue> phiVal, OrgGeogebraCommonKernelMatrixCoords *center, OrgGeogebraCommonKernelMatrixCoords *direction) {
  [((OrgGeogebraCommonKernelMatrixCoordSys *) nil_chk([self getCoordSys])) rotateWithDouble:[((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(phiVal)) getDouble] withOrgGeogebraCommonKernelMatrixCoords:center withOrgGeogebraCommonKernelMatrixCoords:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(direction)) normalized]];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGeogebra3DKernel3DGeosGeoPolygon3D)
