//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/geogebra3D/euclidian3D/openGL/PlotterBrushSection.java
//


#include "J2ObjC_source.h"
#include "java/lang/Math.h"
#include "org/geogebra/common/geogebra3D/euclidian3D/openGL/PlotterBrushSection.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/Matrix/Coords.h"

@interface OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection () {
 @public
  OrgGeogebraCommonKernelMatrixCoords *clockU_;
  OrgGeogebraCommonKernelMatrixCoords *clockV_;
  OrgGeogebraCommonKernelMatrixCoords *direction_;
  OrgGeogebraCommonKernelMatrixCoords *normal_;
  jdouble normalDevD_;
  jdouble normalDevN_;
  jfloat thickness_;
  OrgGeogebraCommonKernelMatrixCoords *tmpCoords_;
}

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection, clockU_, OrgGeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection, clockV_, OrgGeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection, direction_, OrgGeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection, normal_, OrgGeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection, tmpCoords_, OrgGeogebraCommonKernelMatrixCoords *)

@implementation OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection

- (instancetype)init {
  OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection_init(self);
  return self;
}

- (void)setWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)point
                                         withFloat:(jfloat)thickness
           withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)clockU
           withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)clockV {
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(self->center_)) setWithOrgGeogebraCommonKernelMatrixCoords:point];
  self->thickness_ = thickness;
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(self->clockU_)) setWithOrgGeogebraCommonKernelMatrixCoords:clockU];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(self->clockV_)) setWithOrgGeogebraCommonKernelMatrixCoords:clockV];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(direction_)) setUndefined];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(normal_)) setUndefined];
  normalDevD_ = 0;
}

- (void)setWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)point
                                         withFloat:(jfloat)thickness {
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(self->center_)) setWithOrgGeogebraCommonKernelMatrixCoords:point];
  self->thickness_ = thickness;
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(clockU_)) setUndefined];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(clockV_)) setUndefined];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(direction_)) setUndefined];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(normal_)) setUndefined];
  normalDevD_ = 0;
}

- (void)setWithOrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection:(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection *)s
                                       withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)point
                                                                     withFloat:(jfloat)thickness
                                                                   withBoolean:(jboolean)updateClock {
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(self->center_)) setWithOrgGeogebraCommonKernelMatrixCoords:point];
  self->thickness_ = thickness;
  (void) [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(direction_)) setSubWithOrgGeogebraCommonKernelMatrixCoords:center_ withOrgGeogebraCommonKernelMatrixCoords:((OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection *) nil_chk(s))->center_];
  if ([center_ equalsForKernelWithOrgGeogebraCommonKernelMatrixCoords:s->center_ withDouble:OrgGeogebraCommonKernelKernel_STANDARD_PRECISION]) {
    if (self->thickness_ < s->thickness_) {
      [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(normal_)) setWithOrgGeogebraCommonKernelMatrixCoords:s->direction_];
    }
    else {
      (void) [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(normal_)) setMulWithOrgGeogebraCommonKernelMatrixCoords:s->direction_ withDouble:-1];
    }
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(s->normal_)) setWithOrgGeogebraCommonKernelMatrixCoords:normal_];
    [direction_ setWithOrgGeogebraCommonKernelMatrixCoords:s->direction_];
    normalDevD_ = 0;
  }
  else {
    jdouble dt = self->thickness_ - s->thickness_;
    if (dt != 0) {
      [direction_ calcNorm];
      jdouble l = [direction_ getNorm];
      jdouble h = JavaLangMath_sqrtWithDouble_(l * l + dt * dt);
      normalDevD_ = -dt / h;
      normalDevN_ = l / h;
      s->normalDevD_ = normalDevD_;
      s->normalDevN_ = normalDevN_;
    }
    else {
      normalDevD_ = 0;
    }
    (void) [direction_ normalize];
    [s->direction_ setWithOrgGeogebraCommonKernelMatrixCoords:direction_];
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(normal_)) setUndefined];
    [s->normal_ setUndefined];
    if (updateClock) {
      [direction_ completeOrthonormalWithOrgGeogebraCommonKernelMatrixCoords:s->clockU_ withOrgGeogebraCommonKernelMatrixCoords:s->clockV_];
    }
  }
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(clockU_)) setWithOrgGeogebraCommonKernelMatrixCoords:s->clockU_];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(clockV_)) setWithOrgGeogebraCommonKernelMatrixCoords:s->clockV_];
}

- (void)getNormalAndPositionWithDouble:(jdouble)u
                            withDouble:(jdouble)v
withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)vn
withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)pos {
  (void) [vn setAddWithOrgGeogebraCommonKernelMatrixCoords:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(vn)) setMulWithOrgGeogebraCommonKernelMatrixCoords:clockU_ withDouble:u] withOrgGeogebraCommonKernelMatrixCoords:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords_)) setMulWithOrgGeogebraCommonKernelMatrixCoords:clockV_ withDouble:v]];
  (void) [pos setAddWithOrgGeogebraCommonKernelMatrixCoords:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(pos)) setMulWithOrgGeogebraCommonKernelMatrixCoords:vn withDouble:thickness_] withOrgGeogebraCommonKernelMatrixCoords:center_];
  if ([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(normal_)) isDefined]) {
    [vn setValuesWithOrgGeogebraCommonKernelMatrixCoords:normal_ withInt:3];
  }
  else if (normalDevD_ != 0) {
    (void) [vn setAddWithOrgGeogebraCommonKernelMatrixCoords:[vn setMulWithOrgGeogebraCommonKernelMatrixCoords:vn withDouble:normalDevN_] withOrgGeogebraCommonKernelMatrixCoords:[tmpCoords_ setMulWithOrgGeogebraCommonKernelMatrixCoords:direction_ withDouble:normalDevD_]];
  }
}

- (OrgGeogebraCommonKernelMatrixCoords *)getCenter {
  return center_;
}

- (void)setWithOrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection:(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection *)s
                                       withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)point
                                                                     withFloat:(jfloat)thickness {
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(self->center_)) setWithOrgGeogebraCommonKernelMatrixCoords:point];
  self->thickness_ = thickness;
  (void) [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(self->direction_)) setSubWithOrgGeogebraCommonKernelMatrixCoords:center_ withOrgGeogebraCommonKernelMatrixCoords:[((OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection *) nil_chk(s)) getCenter]];
  [direction_ calcNorm];
  length_ = [direction_ getNorm];
  (void) [direction_ mulInsideWithDouble:1 / length_];
  if (![((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(s->clockU_)) isDefined]) {
    [direction_ completeOrthonormalWithOrgGeogebraCommonKernelMatrixCoords:s->clockU_ withOrgGeogebraCommonKernelMatrixCoords:s->clockV_];
  }
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(clockV_)) setCrossProductWithOrgGeogebraCommonKernelMatrixCoords:direction_ withOrgGeogebraCommonKernelMatrixCoords:s->clockU_];
  (void) [clockV_ normalize];
  [clockU_ setCrossProductWithOrgGeogebraCommonKernelMatrixCoords:clockV_ withOrgGeogebraCommonKernelMatrixCoords:direction_];
  (void) [clockU_ normalize];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(normal_)) setUndefined];
  normalDevD_ = 0;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "PlotterBrushSection", NULL, 0x1, NULL, NULL },
    { "setWithOrgGeogebraCommonKernelMatrixCoords:withFloat:withOrgGeogebraCommonKernelMatrixCoords:withOrgGeogebraCommonKernelMatrixCoords:", "set", "V", 0x1, NULL, NULL },
    { "setWithOrgGeogebraCommonKernelMatrixCoords:withFloat:", "set", "V", 0x1, NULL, NULL },
    { "setWithOrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection:withOrgGeogebraCommonKernelMatrixCoords:withFloat:withBoolean:", "set", "V", 0x1, NULL, NULL },
    { "getNormalAndPositionWithDouble:withDouble:withOrgGeogebraCommonKernelMatrixCoords:withOrgGeogebraCommonKernelMatrixCoords:", "getNormalAndPosition", "V", 0x1, NULL, NULL },
    { "getCenter", NULL, "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "setWithOrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection:withOrgGeogebraCommonKernelMatrixCoords:withFloat:", "set", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "center_", NULL, 0x0, "Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "clockU_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "clockV_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "direction_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "length_", NULL, 0x0, "D", NULL, NULL,  },
    { "normal_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "normalDevD_", NULL, 0x2, "D", NULL, NULL,  },
    { "normalDevN_", NULL, 0x2, "D", NULL, NULL,  },
    { "thickness_", NULL, 0x2, "F", NULL, NULL,  },
    { "tmpCoords_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection = { 2, "PlotterBrushSection", "org.geogebra.common.geogebra3D.euclidian3D.openGL", NULL, 0x1, 7, methods, 10, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection;
}

@end

void OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection_init(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection *self) {
  (void) NSObject_init(self);
  self->normal_ = nil;
  self->normalDevD_ = 0;
  self->normalDevN_ = 1;
  self->tmpCoords_ = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(3);
  self->center_ = OrgGeogebraCommonKernelMatrixCoords_createInhomCoorsInD3();
  self->clockU_ = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(4);
  [self->clockU_ setUndefined];
  self->clockV_ = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(4);
  [self->clockV_ setUndefined];
  self->direction_ = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(4);
  [self->direction_ setUndefined];
  self->normal_ = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(4);
  [self->normal_ setUndefined];
  self->normalDevD_ = 0;
}

OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection *new_OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection_init() {
  OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection *self = [OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection alloc];
  OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterBrushSection)
