//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/geogebra/common/kernel/Construction.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/io/PrintStream.h"
#include "java/lang/Enum.h"
#include "java/lang/Exception.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/lang/NumberFormatException.h"
#include "java/lang/StringBuilder.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/HashSet.h"
#include "java/util/Iterator.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "java/util/TreeMap.h"
#include "java/util/TreeSet.h"
#include "org/geogebra/common/euclidian/EuclidianConstants.h"
#include "org/geogebra/common/euclidian/EuclidianController.h"
#include "org/geogebra/common/euclidian/EuclidianViewInterfaceCommon.h"
#include "org/geogebra/common/euclidian/event/PointerEventType.h"
#include "org/geogebra/common/io/MyXMLio.h"
#include "org/geogebra/common/kernel/AlgoCasCellInterface.h"
#include "org/geogebra/common/kernel/CASException.h"
#include "org/geogebra/common/kernel/CircularDefinitionException.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/ConstructionDefaults.h"
#include "org/geogebra/common/kernel/EuclidianViewCE.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/Macro.h"
#include "org/geogebra/common/kernel/NameDescriptionComparator.h"
#include "org/geogebra/common/kernel/StringTemplate.h"
#include "org/geogebra/common/kernel/UndoManager.h"
#include "org/geogebra/common/kernel/algos/AlgoCasBase.h"
#include "org/geogebra/common/kernel/algos/AlgoDependentNumber.h"
#include "org/geogebra/common/kernel/algos/AlgoDistancePoints.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/algos/AlgorithmSet.h"
#include "org/geogebra/common/kernel/algos/ConstructionElement.h"
#include "org/geogebra/common/kernel/arithmetic/ExpressionNode.h"
#include "org/geogebra/common/kernel/arithmetic/ExpressionNodeConstants.h"
#include "org/geogebra/common/kernel/arithmetic/NumberValue.h"
#include "org/geogebra/common/kernel/cas/AlgoUsingTempCASalgo.h"
#include "org/geogebra/common/kernel/cas/UsesCAS.h"
#include "org/geogebra/common/kernel/geos/GeoAxis.h"
#include "org/geogebra/common/kernel/geos/GeoBoolean.h"
#include "org/geogebra/common/kernel/geos/GeoCasCell.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoElementSpreadsheet.h"
#include "org/geogebra/common/kernel/geos/GeoNumeric.h"
#include "org/geogebra/common/kernel/geos/GeoPoint.h"
#include "org/geogebra/common/kernel/geos/GeoVector.h"
#include "org/geogebra/common/kernel/kernelND/GeoAxisND.h"
#include "org/geogebra/common/kernel/kernelND/GeoPointND.h"
#include "org/geogebra/common/kernel/optimization/ExtremumFinder.h"
#include "org/geogebra/common/kernel/parser/cashandlers/ParserFunctions.h"
#include "org/geogebra/common/kernel/prover/AlgoProve.h"
#include "org/geogebra/common/kernel/prover/AlgoProveDetails.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/main/AppCompanion.h"
#include "org/geogebra/common/main/GuiManagerInterface.h"
#include "org/geogebra/common/main/Localization.h"
#include "org/geogebra/common/main/MyError.h"
#include "org/geogebra/common/main/SelectionManager.h"
#include "org/geogebra/common/plugin/GeoClass.h"
#include "org/geogebra/common/plugin/Operation.h"
#include "org/geogebra/common/util/StringUtil.h"
#include "org/geogebra/common/util/debug/Log.h"

@interface OrgGeogebraCommonKernelConstruction () {
 @public
  JavaUtilArrayList *usedMacros_;
  NSString *title_, *author_, *date_;
  IOSObjectArray *worksheetText_;
  jboolean showOnlyBreakpoints__;
  jint step_;
  jboolean supressLabelCreation_;
  JavaUtilHashMap *geoSetsTypeMap_;
  JavaUtilArrayList *ceList_;
  JavaUtilArrayList *algoList_;
  JavaUtilArrayList *euclidianViewCE_;
  JavaUtilArrayList *corner5Algos_;
  JavaUtilTreeSet *geoSetConsOrder_;
  JavaUtilTreeSet *geoSetLabelOrder_;
  JavaUtilTreeSet *geoSetWithCasCells_;
  JavaUtilTreeSet *randomElements_;
  jboolean collectRedefineCalls_;
  JavaUtilHashMap *redefineMap_;
  OrgGeogebraCommonKernelGeosGeoElement *keepGeo_;
  JavaUtilArrayList *latexGeos_;
  OrgGeogebraCommonKernelGeosGeoAxis *xAxis_, *yAxis_;
  NSString *xAxisLocalName_, *yAxisLocalName_;
  OrgGeogebraCommonKernelGeosGeoPoint *origin_;
  jboolean undoEnabled_;
  jboolean isGettingXMLForReplace__;
  jboolean isRemovingGeoToReplaceIt__;
  OrgGeogebraCommonIoMyXMLio *xmlio_;
  OrgGeogebraCommonKernelGeosGeoElement *outputGeo_;
  JavaUtilTreeSet *registredFV_;
  jboolean fileLoading_;
  jboolean updateConstructionRunning_;
  JavaUtilTreeSet *casDummies_;
  OrgGeogebraCommonKernelAlgosAlgorithmSet *algoSetCurrentlyUpdated_;
  jboolean spreadsheetTraces_;
  jboolean allowUnboundedAngles_;
  JavaUtilArrayList *casAlgos_;
}

- (void)addToGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo;

- (JavaUtilTreeSet *)createTypeSetWithOrgGeogebraCommonPluginGeoClassEnum:(OrgGeogebraCommonPluginGeoClassEnum *)type;

- (void)removeFromGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo;

- (OrgGeogebraCommonKernelGeosGeoElement *)checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo;

- (void)updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)oldGeo
                               withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)newGeo;

- (OrgGeogebraCommonKernelGeosGeoElement *)distanceOrProductWithNSString:(NSString *)string
                                                            withNSString:(NSString *)string2;

- (void)buildConstructionWithJavaLangStringBuilder:(JavaLangStringBuilder *)consXML;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, usedMacros_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, title_, NSString *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, author_, NSString *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, date_, NSString *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, worksheetText_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, geoSetsTypeMap_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, ceList_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, algoList_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, euclidianViewCE_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, corner5Algos_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, geoSetConsOrder_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, geoSetLabelOrder_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, geoSetWithCasCells_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, randomElements_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, redefineMap_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, keepGeo_, OrgGeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, latexGeos_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, xAxis_, OrgGeogebraCommonKernelGeosGeoAxis *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, yAxis_, OrgGeogebraCommonKernelGeosGeoAxis *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, xAxisLocalName_, NSString *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, yAxisLocalName_, NSString *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, origin_, OrgGeogebraCommonKernelGeosGeoPoint *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, xmlio_, OrgGeogebraCommonIoMyXMLio *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, outputGeo_, OrgGeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, registredFV_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, casDummies_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, algoSetCurrentlyUpdated_, OrgGeogebraCommonKernelAlgosAlgorithmSet *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelConstruction, casAlgos_, JavaUtilArrayList *)

__attribute__((unused)) static OrgGeogebraCommonKernelConstructionDefaults *OrgGeogebraCommonKernelConstruction_getConstructionDefaults(OrgGeogebraCommonKernelConstruction *self);

__attribute__((unused)) static jboolean OrgGeogebraCommonKernelConstruction_updateAllConstructionProtocolAlgorithms(OrgGeogebraCommonKernelConstruction *self);

__attribute__((unused)) static void OrgGeogebraCommonKernelConstruction_updateAllFreeRandomGeosNoCascade(OrgGeogebraCommonKernelConstruction *self);

__attribute__((unused)) static void OrgGeogebraCommonKernelConstruction_addToGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelGeosGeoElement *geo);

__attribute__((unused)) static JavaUtilTreeSet *OrgGeogebraCommonKernelConstruction_createTypeSetWithOrgGeogebraCommonPluginGeoClassEnum_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonPluginGeoClassEnum *type);

__attribute__((unused)) static void OrgGeogebraCommonKernelConstruction_removeFromGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelGeosGeoElement *geo);

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonKernelConstruction_checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelGeosGeoElement *geo);

__attribute__((unused)) static void OrgGeogebraCommonKernelConstruction_updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelGeosGeoElement *oldGeo, OrgGeogebraCommonKernelGeosGeoElement *newGeo);

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonKernelConstruction_distanceOrProductWithNSString_withNSString_(OrgGeogebraCommonKernelConstruction *self, NSString *string, NSString *string2);

__attribute__((unused)) static void OrgGeogebraCommonKernelConstruction_buildConstructionWithJavaLangStringBuilder_(OrgGeogebraCommonKernelConstruction *self, JavaLangStringBuilder *consXML);

__attribute__((unused)) static void OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(OrgGeogebraCommonKernelConstruction_ConstantsEnum *self, NSString *__name, jint __ordinal);

__attribute__((unused)) static OrgGeogebraCommonKernelConstruction_ConstantsEnum *new_OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(NSString *__name, jint __ordinal) NS_RETURNS_RETAINED;

@implementation OrgGeogebraCommonKernelConstruction

- (instancetype)initWithOrgGeogebraCommonKernelKernel:(OrgGeogebraCommonKernelKernel *)k {
  OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_(self, k);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelKernel:(OrgGeogebraCommonKernelKernel *)k
              withOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)parentConstruction {
  OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelConstruction_(self, k, parentConstruction);
  return self;
}

- (void)newConstructionDefaults {
  OrgGeogebraCommonKernelConstruction_setAndConsume_consDefaults_(self, new_OrgGeogebraCommonKernelConstructionDefaults_initWithOrgGeogebraCommonKernelConstruction_(self));
}

- (OrgGeogebraCommonKernelGeosGeoElement *)getKeepGeo {
  return keepGeo_;
}

- (OrgGeogebraCommonKernelGeosGeoPoint *)getOrigin {
  if (origin_ == nil) {
    OrgGeogebraCommonKernelConstruction_setAndConsume_origin_(self, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_(self));
    [origin_ setCoordsWithDouble:0.0 withDouble:0.0 withDouble:1.0];
  }
  return origin_;
}

- (OrgGeogebraCommonKernelGeosGeoAxis *)getXAxis {
  return xAxis_;
}

- (OrgGeogebraCommonKernelGeosGeoAxis *)getYAxis {
  return yAxis_;
}

- (void)initAxis {
  OrgGeogebraCommonKernelConstruction_setAndConsume_xAxis_(self, new_OrgGeogebraCommonKernelGeosGeoAxis_initWithOrgGeogebraCommonKernelConstruction_withInt_(self, OrgGeogebraCommonKernelKernelNDGeoAxisND_X_AXIS));
  OrgGeogebraCommonKernelConstruction_setAndConsume_yAxis_(self, new_OrgGeogebraCommonKernelGeosGeoAxis_initWithOrgGeogebraCommonKernelConstruction_withInt_(self, OrgGeogebraCommonKernelKernelNDGeoAxisND_Y_AXIS));
}

- (OrgGeogebraCommonKernelConstruction_ConstantsEnum *)isConstantElementWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  if (geo == xAxis_) return OrgGeogebraCommonKernelConstruction_ConstantsEnum_get_X_AXIS();
  if (geo == yAxis_) return OrgGeogebraCommonKernelConstruction_ConstantsEnum_get_Y_AXIS();
  return OrgGeogebraCommonKernelConstruction_ConstantsEnum_get_NOT();
}

- (void)updateLocalAxesNames {
  [((JavaUtilHashMap *) nil_chk(geoTable_)) removeWithId:xAxisLocalName_];
  [geoTable_ removeWithId:yAxisLocalName_];
  OrgGeogebraCommonMainApp *app = [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getApplication];
  OrgGeogebraCommonKernelConstruction_set_xAxisLocalName_(self, [((OrgGeogebraCommonMainApp *) nil_chk(app)) getPlainWithNSString:@"xAxis"]);
  OrgGeogebraCommonKernelConstruction_set_yAxisLocalName_(self, [app getPlainWithNSString:@"yAxis"]);
  [geoTable_ putWithId:xAxisLocalName_ withId:xAxis_];
  [geoTable_ putWithId:yAxisLocalName_ withId:yAxis_];
}

- (OrgGeogebraCommonKernelConstructionDefaults *)getConstructionDefaults {
  return OrgGeogebraCommonKernelConstruction_getConstructionDefaults(self);
}

- (NSString *)getAuthor {
  return (author_ != nil) ? author_ : @"";
}

- (NSString *)getDate {
  return (date_ != nil) ? date_ : @"";
}

- (NSString *)getTitle {
  return (title_ != nil) ? title_ : @"";
}

- (void)setAuthorWithNSString:(NSString *)string {
  OrgGeogebraCommonKernelConstruction_set_author_(self, string);
}

- (void)setDateWithNSString:(NSString *)string {
  OrgGeogebraCommonKernelConstruction_set_date_(self, string);
}

- (void)setTitleWithNSString:(NSString *)string {
  OrgGeogebraCommonKernelConstruction_set_title_(self, string);
}

- (NSString *)getWorksheetTextWithInt:(jint)i {
  return (IOSObjectArray_Get(nil_chk(worksheetText_), i) != nil) ? IOSObjectArray_Get(worksheetText_, i) : @"";
}

- (void)setWorksheetTextWithNSString:(NSString *)text
                             withInt:(jint)i {
  IOSObjectArray_Set(nil_chk(worksheetText_), i, text);
}

- (jboolean)worksheetTextDefined {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(worksheetText_))->size_; i++) {
    if (IOSObjectArray_Get(worksheetText_, i) != nil && ((jint) [((NSString *) nil_chk(IOSObjectArray_Get(worksheetText_, i))) length]) > 0) return YES;
  }
  return NO;
}

- (OrgGeogebraCommonKernelKernel *)getKernel {
  return kernel_;
}

- (void)setSuppressLabelCreationWithBoolean:(jboolean)flag {
  supressLabelCreation_ = flag;
}

- (jboolean)isSuppressLabelsActive {
  return supressLabelCreation_;
}

- (OrgGeogebraCommonMainApp *)getApplication {
  return [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getApplication];
}

- (jboolean)isEmpty {
  return [((JavaUtilArrayList *) nil_chk(ceList_)) isEmpty];
}

- (jint)steps {
  return [((JavaUtilArrayList *) nil_chk(ceList_)) size];
}

- (OrgGeogebraCommonKernelGeosGeoElement *)getLastGeoElement {
  if ([((JavaUtilTreeSet *) nil_chk(geoSetWithCasCells_)) size] > 0) {
    return [geoSetWithCasCells_ last];
  }
  return nil;
}

- (OrgGeogebraCommonKernelGeosGeoCasCell *)getCasCellWithInt:(jint)row {
  if (row < 0) {
    return nil;
  }
  jint counter = 0;
  for (OrgGeogebraCommonKernelAlgosConstructionElement * __strong ce in nil_chk(ceList_)) {
    if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoCasCell class]]) {
      if (counter == row) {
        return (OrgGeogebraCommonKernelGeosGeoCasCell *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoCasCell class]);
      }
      ++counter;
    }
    else if ([OrgGeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:ce]) {
      if (counter == row) {
        return [((id<OrgGeogebraCommonKernelAlgoCasCellInterface>) nil_chk(((id<OrgGeogebraCommonKernelAlgoCasCellInterface>) check_protocol_cast(ce, @protocol(OrgGeogebraCommonKernelAlgoCasCellInterface))))) getCasCell];
      }
      ++counter;
    }
  }
  return nil;
}

- (OrgGeogebraCommonKernelGeosGeoCasCell *)getLastCasCell {
  OrgGeogebraCommonKernelGeosGeoCasCell *lastCell = nil;
  for (OrgGeogebraCommonKernelAlgosConstructionElement * __strong ce in nil_chk(ceList_)) {
    if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoCasCell class]]) {
      lastCell = (OrgGeogebraCommonKernelGeosGeoCasCell *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoCasCell class]);
    }
    else if ([OrgGeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:ce]) {
      lastCell = [((id<OrgGeogebraCommonKernelAlgoCasCellInterface>) nil_chk(((id<OrgGeogebraCommonKernelAlgoCasCellInterface>) check_protocol_cast(ce, @protocol(OrgGeogebraCommonKernelAlgoCasCellInterface))))) getCasCell];
    }
  }
  return lastCell;
}

- (void)setCasCellRowWithOrgGeogebraCommonKernelGeosGeoCasCell:(OrgGeogebraCommonKernelGeosGeoCasCell *)casCell
                                                       withInt:(jint)n {
  OrgGeogebraCommonKernelGeosGeoCasCell *nthCasCell = [self getCasCellWithInt:n];
  if (nthCasCell == nil) {
    [self addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:casCell withBoolean:NO];
  }
  else {
    [self addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:casCell withInt:[nthCasCell getConstructionIndex]];
  }
  [self addToGeoSetWithCasCellsWithOrgGeogebraCommonKernelGeosGeoCasCell:casCell];
}

- (void)addLocalVariableWithNSString:(NSString *)varname
withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  if (localVariableTable_ == nil) OrgGeogebraCommonKernelConstruction_setAndConsume_localVariableTable_(self, new_JavaUtilHashMap_init());
  [((JavaUtilHashMap *) nil_chk(localVariableTable_)) putWithId:varname withId:geo];
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) setLocalVariableLabelWithNSString:varname];
}

- (void)removeLocalVariableWithNSString:(NSString *)varname {
  if (localVariableTable_ != nil) {
    OrgGeogebraCommonKernelGeosGeoElement *geo = [localVariableTable_ removeWithId:varname];
    if (geo != nil) [geo undoLocalVariableLabel];
  }
}

- (OrgGeogebraCommonKernelGeosGeoElement *)geoTableVarLookupWithNSString:(NSString *)label {
  OrgGeogebraCommonKernelGeosGeoElement *ret = [((JavaUtilHashMap *) nil_chk(geoTable_)) getWithId:label];
  return ret;
}

- (void)setShowOnlyBreakpointsWithBoolean:(jboolean)flag {
  showOnlyBreakpoints__ = flag;
}

- (jboolean)showOnlyBreakpoints {
  return showOnlyBreakpoints__;
}

- (void)updateConstructionIndexWithInt:(jint)pos {
  if (pos < 0) return;
  jint size = [((JavaUtilArrayList *) nil_chk(ceList_)) size];
  for (jint i = pos; i < size; ++i) {
    [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk([ceList_ getWithInt:i])) setConstructionIndexWithInt:i];
  }
}

- (jboolean)updateAllConstructionProtocolAlgorithms {
  return OrgGeogebraCommonKernelConstruction_updateAllConstructionProtocolAlgorithms(self);
}

- (void)addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:(OrgGeogebraCommonKernelAlgosConstructionElement *)ce
                                                                         withInt:(jint)index {
  ++step_;
  [((JavaUtilArrayList *) nil_chk(ceList_)) addWithInt:index withId:ce];
  [self updateConstructionIndexWithInt:index];
  if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoCasCell class]]) [self updateCasCellRows];
  OrgGeogebraCommonKernelConstruction_updateAllConstructionProtocolAlgorithms(self);
}

- (void)updateCasCellRows {
  jint counter = 0;
  for (OrgGeogebraCommonKernelAlgosConstructionElement * __strong ce in nil_chk(ceList_)) {
    if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoCasCell class]]) {
      [((OrgGeogebraCommonKernelGeosGeoCasCell *) nil_chk(((OrgGeogebraCommonKernelGeosGeoCasCell *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoCasCell class])))) setRowNumberWithInt:counter];
      counter++;
    }
    else if ([OrgGeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:ce]) {
      [((OrgGeogebraCommonKernelGeosGeoCasCell *) nil_chk([((id<OrgGeogebraCommonKernelAlgoCasCellInterface>) nil_chk(((id<OrgGeogebraCommonKernelAlgoCasCellInterface>) check_protocol_cast(ce, @protocol(OrgGeogebraCommonKernelAlgoCasCellInterface))))) getCasCell])) setRowNumberWithInt:counter];
      counter++;
    }
  }
  for (OrgGeogebraCommonKernelAlgosConstructionElement * __strong ce in ceList_) {
    if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoCasCell class]]) {
      [((OrgGeogebraCommonKernelGeosGeoCasCell *) nil_chk(((OrgGeogebraCommonKernelGeosGeoCasCell *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoCasCell class])))) updateInputStringWithRowReferences];
    }
    else if ([OrgGeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:ce]) {
      [((OrgGeogebraCommonKernelGeosGeoCasCell *) nil_chk([((id<OrgGeogebraCommonKernelAlgoCasCellInterface>) nil_chk(((id<OrgGeogebraCommonKernelAlgoCasCellInterface>) check_protocol_cast(ce, @protocol(OrgGeogebraCommonKernelAlgoCasCellInterface))))) getCasCell])) updateInputStringWithRowReferences];
    }
  }
}

- (jboolean)moveInConstructionListWithInt:(jint)fromIndex
                                  withInt:(jint)toIndex {
  OrgGeogebraCommonKernelAlgosConstructionElement *ce = [((JavaUtilArrayList *) nil_chk(ceList_)) getWithInt:fromIndex];
  jboolean change = fromIndex != toIndex && [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) getMinConstructionIndex] <= toIndex && toIndex <= [ce getMaxConstructionIndex];
  if (change) {
    if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoElement class]]) {
      OrgGeogebraCommonMainApp_debugWithNSString_(@"TODO: update Algebra View");
    }
    [ceList_ removeWithInt:fromIndex];
    [ceList_ addWithInt:toIndex withId:ce];
    [self updateConstructionIndexWithInt:JavaLangMath_minWithInt_withInt_(toIndex, fromIndex)];
    if (fromIndex <= step_ && step_ < toIndex) {
      --step_;
      [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) notifyRemove];
    }
    else if (toIndex <= step_ && step_ < fromIndex) {
      ++step_;
      [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) notifyAdd];
    }
    if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoCasCell class]] || [OrgGeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:ce]) [self updateCasCellRows];
    OrgGeogebraCommonKernelConstruction_updateAllConstructionProtocolAlgorithms(self);
  }
  return change;
}

- (void)addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:(OrgGeogebraCommonKernelAlgosConstructionElement *)ce
                                                                     withBoolean:(jboolean)checkContains {
  if (supressLabelCreation_) return;
  if (checkContains && [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) isInConstructionList]) return;
  [self addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:ce withInt:step_ + 1];
}

- (void)removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:(OrgGeogebraCommonKernelAlgosConstructionElement *)ce {
  jint pos = [((JavaUtilArrayList *) nil_chk(ceList_)) indexOfWithId:ce];
  if (pos == -1) return;
  else if (pos <= step_) {
    [ceList_ removeWithId:ce];
    [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) setConstructionIndexWithInt:-1];
    --step_;
  }
  else {
    [ceList_ removeWithId:ce];
    [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) setConstructionIndexWithInt:-1];
  }
  [self updateConstructionIndexWithInt:pos];
  if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoCasCell class]] || ([OrgGeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:ce])) [self updateCasCellRows];
  OrgGeogebraCommonKernelConstruction_updateAllConstructionProtocolAlgorithms(self);
}

- (void)addToAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement:(OrgGeogebraCommonKernelAlgosAlgoElement *)algo {
  [((JavaUtilArrayList *) nil_chk(algoList_)) addWithId:algo];
}

- (void)removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement:(OrgGeogebraCommonKernelAlgosAlgoElement *)algo {
  [((JavaUtilArrayList *) nil_chk(algoList_)) removeWithId:algo];
}

- (jboolean)moveInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo
                                                                    withInt:(jint)toIndex {
  OrgGeogebraCommonKernelAlgosAlgoElement *algoParent = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getParentAlgorithm];
  jint fromIndex = (algoParent == nil) ? [((JavaUtilArrayList *) nil_chk(ceList_)) indexOfWithId:geo] : [((JavaUtilArrayList *) nil_chk(ceList_)) indexOfWithId:algoParent];
  if (fromIndex >= 0) {
    return [self moveInConstructionListWithInt:fromIndex withInt:toIndex];
  }
  return NO;
}

- (jboolean)isInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isIndependent]) {
    return [geo isInConstructionList];
  }
  return [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk([geo getParentAlgorithm])) isInConstructionList];
}

- (void)updateAllAlgorithms {
  for (jint i = 0; i < [((JavaUtilArrayList *) nil_chk(algoList_)) size]; ++i) {
    OrgGeogebraCommonKernelAlgosAlgoElement *algo = [algoList_ getWithInt:i];
    [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) update];
  }
}

- (void)registerEuclidianViewCEWithOrgGeogebraCommonKernelEuclidianViewCE:(id<OrgGeogebraCommonKernelEuclidianViewCE>)elem {
  if (![((JavaUtilArrayList *) nil_chk(euclidianViewCE_)) containsWithId:elem]) [euclidianViewCE_ addWithId:elem];
}

- (void)unregisterEuclidianViewCEWithOrgGeogebraCommonKernelEuclidianViewCE:(id<OrgGeogebraCommonKernelEuclidianViewCE>)elem {
  [((JavaUtilArrayList *) nil_chk(euclidianViewCE_)) removeWithId:elem];
  if (self->corner5Algos_ != nil) {
    [self->corner5Algos_ removeWithId:elem];
  }
}

- (jboolean)notifyEuclidianViewCEWithBoolean:(jboolean)onlyCorner5 {
  jboolean didUpdate = NO;
  JavaUtilArrayList *toUpdate = onlyCorner5 ? self->corner5Algos_ : self->euclidianViewCE_;
  if (toUpdate == nil) {
    return NO;
  }
  jint size = [toUpdate size];
  OrgGeogebraCommonKernelAlgosAlgorithmSet *updateSet = nil;
  for (jint i = 0; i < size; i++) {
    didUpdate = YES;
    jboolean needsUpdateCascade = [((id<OrgGeogebraCommonKernelEuclidianViewCE>) nil_chk([toUpdate getWithInt:i])) euclidianViewUpdate];
    if (needsUpdateCascade) {
      if (updateSet == nil) updateSet = [new_OrgGeogebraCommonKernelAlgosAlgorithmSet_init() autorelease];
      if ([[toUpdate getWithInt:i] isKindOfClass:[OrgGeogebraCommonKernelGeosGeoElement class]]) {
        OrgGeogebraCommonKernelGeosGeoElement *geo = (OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast([toUpdate getWithInt:i], [OrgGeogebraCommonKernelGeosGeoElement class]);
        [((OrgGeogebraCommonKernelAlgosAlgorithmSet *) nil_chk(updateSet)) addAllWithOrgGeogebraCommonKernelAlgosAlgorithmSet:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getAlgoUpdateSet]];
      }
      else if ([[toUpdate getWithInt:i] isKindOfClass:[OrgGeogebraCommonKernelAlgosAlgoElement class]]) {
        OrgGeogebraCommonKernelAlgosAlgoElement *algo = (OrgGeogebraCommonKernelAlgosAlgoElement *) check_class_cast([toUpdate getWithInt:i], [OrgGeogebraCommonKernelAlgosAlgoElement class]);
        IOSObjectArray *geos = [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) getOutput];
        {
          IOSObjectArray *a__ = geos;
          OrgGeogebraCommonKernelGeosGeoElement * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
          OrgGeogebraCommonKernelGeosGeoElement * const *e__ = b__ + a__->size_;
          while (b__ < e__) {
            OrgGeogebraCommonKernelGeosGeoElement *geo = *b__++;
            [((OrgGeogebraCommonKernelAlgosAlgorithmSet *) nil_chk(updateSet)) addAllWithOrgGeogebraCommonKernelAlgosAlgorithmSet:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getAlgoUpdateSet]];
          }
        }
      }
    }
  }
  if (updateSet != nil) [updateSet updateAll];
  return didUpdate;
}

- (jboolean)hasEuclidianViewCE {
  return [((JavaUtilArrayList *) nil_chk(euclidianViewCE_)) size] > 0;
}

- (void)updateAllRandomGeos {
  if (randomElements_ == nil) return;
  id<JavaUtilIterator> it = [((JavaUtilTreeSet *) nil_chk(randomElements_)) iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    OrgGeogebraCommonKernelGeosGeoElement *num = [it next];
    [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(num)) updateRandomGeo];
  }
}

- (void)updateAllFreeRandomGeosNoCascade {
  OrgGeogebraCommonKernelConstruction_updateAllFreeRandomGeosNoCascade(self);
}

- (void)addRandomGeoWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)num {
  if (randomElements_ == nil) OrgGeogebraCommonKernelConstruction_setAndConsume_randomElements_(self, new_JavaUtilTreeSet_init());
  [((JavaUtilTreeSet *) nil_chk(randomElements_)) addWithId:num];
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(num)) setRandomGeoWithBoolean:YES];
}

- (void)removeRandomGeoWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)num {
  if (randomElements_ != nil) [randomElements_ removeWithId:num];
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(num)) setRandomGeoWithBoolean:NO];
}

- (void)updateConstruction {
  updateConstructionRunning_ = YES;
  @try {
    jint size = [((JavaUtilArrayList *) nil_chk(ceList_)) size];
    for (jint i = 0; i < size; ++i) {
      OrgGeogebraCommonKernelAlgosConstructionElement *ce = [ceList_ getWithInt:i];
      if ([((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) isIndependent]) {
        [ce update];
      }
    }
    OrgGeogebraCommonKernelConstruction_updateAllFreeRandomGeosNoCascade(self);
    size = [((JavaUtilArrayList *) nil_chk(algoList_)) size];
    for (jint i = 0; i < size; ++i) {
      OrgGeogebraCommonKernelAlgosAlgoElement *algo = [algoList_ getWithInt:i];
      [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) initForNearToRelationship];
    }
    JavaUtilArrayList *tempList = [new_JavaUtilArrayList_initWithJavaUtilCollection_(algoList_) autorelease];
    for (jint i = 0; i < size; ++i) {
      OrgGeogebraCommonKernelAlgosAlgoElement *algo = [tempList getWithInt:i];
      [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) initForNearToRelationship];
      [algo update];
    }
  }
  @finally {
    updateConstructionRunning_ = NO;
  }
}

- (void)updateCasCells {
  updateConstructionRunning_ = YES;
  @try {
    for (jint i = 0; i < [((JavaUtilArrayList *) nil_chk(ceList_)) size]; ++i) {
      OrgGeogebraCommonKernelAlgosConstructionElement *ce = [ceList_ getWithInt:i];
      if (([((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) isGeoElement] && [((OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoElement class])) isGeoCasCell]) || (([ce isKindOfClass:[OrgGeogebraCommonKernelAlgosAlgoElement class]]) && [OrgGeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:ce])) {
        [ce update];
      }
    }
  }
  @finally {
    updateConstructionRunning_ = NO;
  }
}

- (void)getConstructionXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                                        withBoolean:(jboolean)getListenersToo {
  @try {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"<construction title=\""];
    OrgGeogebraCommonUtilStringUtil_encodeXMLWithJavaLangStringBuilder_withNSString_(sb, [self getTitle]);
    [sb appendWithNSString:@"\" author=\""];
    OrgGeogebraCommonUtilStringUtil_encodeXMLWithJavaLangStringBuilder_withNSString_(sb, [self getAuthor]);
    [sb appendWithNSString:@"\" date=\""];
    OrgGeogebraCommonUtilStringUtil_encodeXMLWithJavaLangStringBuilder_withNSString_(sb, [self getDate]);
    [sb appendWithNSString:@"\">\n"];
    if ([self worksheetTextDefined]) {
      [sb appendWithNSString:@"\t<worksheetText above=\""];
      OrgGeogebraCommonUtilStringUtil_encodeXMLWithJavaLangStringBuilder_withNSString_(sb, [self getWorksheetTextWithInt:0]);
      [sb appendWithNSString:@"\" below=\""];
      OrgGeogebraCommonUtilStringUtil_encodeXMLWithJavaLangStringBuilder_withNSString_(sb, [self getWorksheetTextWithInt:1]);
      [sb appendWithNSString:@"\"/>\n"];
    }
    [self getConstructionElementsXMLWithJavaLangStringBuilder:sb withBoolean:getListenersToo];
    [sb appendWithNSString:@"</construction>\n"];
  }
  @catch (JavaLangException *e) {
    [((JavaLangException *) nil_chk(e)) printStackTrace];
  }
}

- (void)getConstructionElementsXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                                                withBoolean:(jboolean)getListenersToo {
  OrgGeogebraCommonKernelAlgosConstructionElement *ce;
  jint size = [((JavaUtilArrayList *) nil_chk(ceList_)) size];
  for (jint i = 0; i < size; ++i) {
    ce = [ceList_ getWithInt:i];
    [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) getXMLWithBoolean:getListenersToo withJavaLangStringBuilder:sb];
  }
}

- (void)getConstructionElementsXML_OGPWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                      withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)statement {
  OrgGeogebraCommonKernelAlgosConstructionElement *ce;
  jint size = [((JavaUtilArrayList *) nil_chk(ceList_)) size];
  for (jint i = 0; i < size; ++i) {
    ce = [ceList_ getWithInt:i];
    if (!([ce isKindOfClass:[OrgGeogebraCommonKernelProverAlgoProve class]]) && !([ce isKindOfClass:[OrgGeogebraCommonKernelProverAlgoProveDetails class]])) {
      [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) getXML_OGPWithJavaLangStringBuilder:sb];
    }
  }
  [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk([((JavaUtilArrayList *) nil_chk([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(statement)) getAlgorithmList])) getWithInt:0])) getXML_OGPWithJavaLangStringBuilder:sb];
}

- (void)getConstructionRegressionOutWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb {
  OrgGeogebraCommonKernelStringTemplate *tpl = OrgGeogebraCommonKernelStringTemplate_get_regression_();
  @try {
    OrgGeogebraCommonKernelAlgosConstructionElement *ce;
    jint size = [((JavaUtilArrayList *) nil_chk(ceList_)) size];
    for (jint i = 0; i < size; ++i) {
      ce = [ceList_ getWithInt:i];
      [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:JreStrcat("$$", [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) getNameDescription], @" = ")];
      if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoElement class]]) {
        [((OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoElement class])) getXMLtagsMinimalWithJavaLangStringBuilder:sb withOrgGeogebraCommonKernelStringTemplate:tpl];
      }
      else if ([ce isKindOfClass:[OrgGeogebraCommonKernelAlgosAlgoElement class]]) {
        [sb appendWithNSString:[((OrgGeogebraCommonKernelAlgosAlgoElement *) check_class_cast(ce, [OrgGeogebraCommonKernelAlgosAlgoElement class])) getCommandDescriptionWithOrgGeogebraCommonKernelStringTemplate:tpl]];
        [sb appendWithNSString:@" == "];
        [sb appendWithNSString:[((OrgGeogebraCommonKernelAlgosAlgoElement *) check_class_cast(ce, [OrgGeogebraCommonKernelAlgosAlgoElement class])) getAlgebraDescriptionRegrOutWithOrgGeogebraCommonKernelStringTemplate:tpl]];
      }
      [sb appendWithNSString:@"\n"];
    }
  }
  @catch (JavaLangException *e) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:[((JavaLangException *) nil_chk(e)) getMessage]];
  }
}

- (jboolean)isUndoEnabled {
  return undoEnabled_;
}

- (void)setUndoEnabledWithBoolean:(jboolean)b {
  undoEnabled_ = b;
}

- (OrgGeogebraCommonKernelAlgosConstructionElement *)getConstructionElementWithInt:(jint)index {
  if (index < 0 || index >= [((JavaUtilArrayList *) nil_chk(ceList_)) size]) return nil;
  return [((JavaUtilArrayList *) nil_chk(ceList_)) getWithInt:index];
}

- (OrgGeogebraCommonKernelGeosGeoElement *)getFirstGeo {
  OrgGeogebraCommonKernelAlgosConstructionElement *ce = nil;
  OrgGeogebraCommonKernelGeosGeoElement *geo = nil;
  jint index = 0;
  while (index < [((JavaUtilArrayList *) nil_chk(ceList_)) size] && geo == nil) {
    ce = [ceList_ getWithInt:index];
    if ([ce isKindOfClass:[OrgGeogebraCommonKernelGeosGeoElement class]]) geo = (OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoElement class]);
    index++;
  }
  return geo;
}

- (JavaUtilTreeSet *)getGeoSetConstructionOrder {
  return geoSetConsOrder_;
}

- (JavaUtilTreeSet *)getGeoSetWithCasCellsConstructionOrder {
  return geoSetWithCasCells_;
}

- (JavaUtilTreeSet *)getGeoSetLabelOrder {
  return geoSetLabelOrder_;
}

- (void)startCollectingRedefineCalls {
  collectRedefineCalls_ = YES;
  if (redefineMap_ == nil) OrgGeogebraCommonKernelConstruction_setAndConsume_redefineMap_(self, new_JavaUtilHashMap_init());
  [((JavaUtilHashMap *) nil_chk(redefineMap_)) clear];
}

- (void)stopCollectingRedefineCalls {
  collectRedefineCalls_ = NO;
  if (redefineMap_ != nil) [redefineMap_ clear];
}

- (void)replaceWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)oldGeo
               withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)newGeo {
  if (oldGeo == nil || newGeo == nil || oldGeo == newGeo) return;
  if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(oldGeo)) isIndependent] && [newGeo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoNumeric class]] && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(newGeo)) isIndependent] && ![newGeo isDefined]) {
    [oldGeo setUndefined];
    [oldGeo updateRepaint];
    return;
  }
  if ([((NSString *) nil_chk([oldGeo getCommandDescriptionWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_maxPrecision_()])) isEqual:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(newGeo)) getCommandDescriptionWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_maxPrecision_()]] && [oldGeo getParentAlgorithm] != nil) {
    JavaUtilArrayList *ae = [new_JavaUtilArrayList_init() autorelease];
    [ae addWithId:[oldGeo getParentAlgorithm]];
    [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk([oldGeo getParentAlgorithm])) updateUnlabeledRandomGeos];
    OrgGeogebraCommonKernelAlgosAlgoElement_updateCascadeAlgosWithJavaUtilArrayList_(ae);
    [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) notifyRepaint];
    return;
  }
  if (![oldGeo hasChildren]) {
    NSString *oldGeoLabel = [oldGeo getLabelSimple];
    [newGeo moveDependenciesWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo];
    isRemovingGeoToReplaceIt__ = YES;
    [oldGeo remove];
    isRemovingGeoToReplaceIt__ = NO;
    [newGeo setAllVisualPropertiesWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo withBoolean:NO];
    if ([newGeo isIndependent]) [self addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:newGeo withBoolean:YES];
    else {
      OrgGeogebraCommonKernelAlgosAlgoElement *parentAlgo = [newGeo getParentAlgorithm];
      [self addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:parentAlgo withBoolean:YES];
      OrgGeogebraCommonKernelGeosGeoElement_setLabelsWithNSString_withOrgGeogebraCommonKernelGeosGeoElementArray_(oldGeoLabel, [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(parentAlgo)) getOutput]);
    }
    [newGeo setLoadedLabelWithNSString:oldGeoLabel];
    if ([newGeo isGeoText]) [newGeo updateRepaint];
    return;
  }
  if ([newGeo isChildOfWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo]) {
    if ([oldGeo isIndependent] && [oldGeo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoNumeric class]]) {
      [((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(oldGeo, [OrgGeogebraCommonKernelGeosGeoNumeric class])) setValueWithDouble:[((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(newGeo, [OrgGeogebraCommonKernelGeosGeoNumeric class])) getDouble]];
      [oldGeo updateRepaint];
      [newGeo remove];
      return;
    }
    else if ([oldGeo isIndependent] && [oldGeo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoPoint class]]) {
      [((OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast(oldGeo, [OrgGeogebraCommonKernelGeosGeoPoint class])) setWithOrgGeogebraCommonKernelGeosGeoElement:newGeo];
      [oldGeo updateRepaint];
      [newGeo remove];
      return;
    }
    else if ([oldGeo isIndependent] && [oldGeo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoVector class]]) {
      [((OrgGeogebraCommonKernelGeosGeoVector *) check_class_cast(oldGeo, [OrgGeogebraCommonKernelGeosGeoVector class])) setWithOrgGeogebraCommonKernelGeosGeoElement:newGeo];
      [oldGeo updateRepaint];
      [newGeo remove];
      return;
    }
    else if ([oldGeo isIndependent] && [oldGeo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoBoolean class]]) {
      [((OrgGeogebraCommonKernelGeosGeoBoolean *) check_class_cast(oldGeo, [OrgGeogebraCommonKernelGeosGeoBoolean class])) setWithOrgGeogebraCommonKernelGeosGeoElement:newGeo];
      [oldGeo updateRepaint];
      [newGeo remove];
      return;
    }
    else if ([oldGeo isIndependent] && [oldGeo isGeoPoint] && [oldGeo isGeoElement3D]) {
      [oldGeo setWithOrgGeogebraCommonKernelGeosGeoElement:newGeo];
      [oldGeo updateRepaint];
      [newGeo remove];
      return;
    }
    else {
      [self restoreCurrentUndoInfo];
      @throw [new_OrgGeogebraCommonKernelCircularDefinitionException_init() autorelease];
    }
  }
  [self prepareReplaceWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo withOrgGeogebraCommonKernelGeosGeoElement:newGeo];
  if (collectRedefineCalls_) {
    [((JavaUtilHashMap *) nil_chk(redefineMap_)) putWithId:oldGeo withId:newGeo];
    return;
  }
  OrgGeogebraCommonMainApp *app = [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getApplication];
  [((OrgGeogebraCommonMainAppCompanion *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app)) getCompanion])) storeViewCreators];
  OrgGeogebraCommonMainSelectionManager *selection = [((OrgGeogebraCommonMainApp *) nil_chk([kernel_ getApplication])) getSelectionManager];
  jboolean moveMode = [app getMode] == OrgGeogebraCommonEuclidianEuclidianConstants_MODE_MOVE && [((JavaUtilArrayList *) nil_chk([((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection)) getSelectedGeos])) size] > 0;
  NSString *oldSelection = nil;
  if (moveMode) {
    oldSelection = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([((JavaUtilArrayList *) nil_chk([((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection)) getSelectedGeos])) getWithInt:0])) getLabelWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_defaultTemplate_()];
  }
  isGettingXMLForReplace__ = YES;
  JavaLangStringBuilder *consXML = [self getCurrentUndoXMLWithBoolean:NO];
  isGettingXMLForReplace__ = NO;
  consXML = [self doReplaceInXMLWithJavaLangStringBuilder:consXML withOrgGeogebraCommonKernelGeosGeoElement:oldGeo withOrgGeogebraCommonKernelGeosGeoElement:newGeo];
  OrgGeogebraCommonKernelConstruction_buildConstructionWithJavaLangStringBuilder_(self, consXML);
  if (moveMode) {
    OrgGeogebraCommonKernelGeosGeoElement *selGeo = [kernel_ lookupLabelWithNSString:oldSelection];
    [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection)) addSelectedGeoWithOrgGeogebraCommonKernelGeosGeoElement:selGeo withBoolean:NO withBoolean:YES];
    [((OrgGeogebraCommonEuclidianEuclidianController *) nil_chk([((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([app getActiveEuclidianView])) getEuclidianController])) handleMovedElementWithOrgGeogebraCommonKernelGeosGeoElement:selGeo withBoolean:NO withOrgGeogebraCommonEuclidianEventPointerEventTypeEnum:OrgGeogebraCommonEuclidianEventPointerEventTypeEnum_get_MOUSE()];
  }
  [((OrgGeogebraCommonMainAppCompanion *) nil_chk([app getCompanion])) recallViewCreators];
}

- (jboolean)isGettingXMLForReplace {
  return isGettingXMLForReplace__;
}

- (jboolean)isRemovingGeoToReplaceIt {
  return isRemovingGeoToReplaceIt__;
}

- (void)processCollectedRedefineCalls {
  collectRedefineCalls_ = NO;
  if (redefineMap_ == nil || [redefineMap_ size] == 0) return;
  JavaLangStringBuilder *consXML = [self getCurrentUndoXMLWithBoolean:NO];
  id<JavaUtilIterator> it = [((id<JavaUtilSet>) nil_chk([((JavaUtilHashMap *) nil_chk(redefineMap_)) keySet])) iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    OrgGeogebraCommonKernelGeosGeoElement *oldGeo = [it next];
    OrgGeogebraCommonKernelGeosGeoElement *newGeo = [redefineMap_ getWithId:oldGeo];
    consXML = [self doReplaceInXMLWithJavaLangStringBuilder:consXML withOrgGeogebraCommonKernelGeosGeoElement:oldGeo withOrgGeogebraCommonKernelGeosGeoElement:newGeo];
  }
  @try {
    OrgGeogebraCommonKernelConstruction_buildConstructionWithJavaLangStringBuilder_(self, consXML);
  }
  @catch (JavaLangException *e) {
    @throw e;
  }
  @finally {
    [self stopCollectingRedefineCalls];
    [((JavaLangStringBuilder *) nil_chk(consXML)) setLengthWithInt:0];
    consXML = nil;
  }
}

- (void)changeCasCellWithOrgGeogebraCommonKernelGeosGeoCasCell:(OrgGeogebraCommonKernelGeosGeoCasCell *)casCell {
  [self setUpdateConstructionRunningWithBoolean:YES];
  [self updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoCasCell:casCell];
  JavaLangStringBuilder *consXML = [self getCurrentUndoXMLWithBoolean:NO];
  OrgGeogebraCommonKernelConstruction_buildConstructionWithJavaLangStringBuilder_(self, consXML);
  [self setUpdateConstructionRunningWithBoolean:NO];
}

- (JavaLangStringBuilder *)doReplaceInXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)consXML
                         withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)oldGeo
                         withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)newGeo {
  NSString *oldXML, *newXML;
  OrgGeogebraCommonKernelAlgosAlgoElement *oldGeoAlgo = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(oldGeo)) getParentAlgorithm];
  OrgGeogebraCommonKernelAlgosAlgoElement *newGeoAlgo = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(newGeo)) getParentAlgorithm];
  IOSObjectArray *newGeoInputs = nil;
  if ([newGeo isLabelSet]) {
    if (![((NSString *) nil_chk([oldGeo getLabelSimple])) isEqual:[newGeo getLabelSimple]]) {
      [oldGeo setLabelSimpleWithNSString:[newGeo getLabelSimple]];
      isGettingXMLForReplace__ = YES;
      consXML = [self getCurrentUndoXMLWithBoolean:NO];
      isGettingXMLForReplace__ = NO;
    }
    oldXML = (oldGeoAlgo == nil) ? [oldGeo getXML] : [oldGeoAlgo getXML];
    newXML = @"";
  }
  else {
    [newGeo setLabelSimpleWithNSString:[oldGeo getLabelSimple]];
    newGeo->labelSet_ = YES;
    [newGeo setAllVisualPropertiesWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo withBoolean:NO];
    [newGeo setScriptingWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo];
    if (newGeoAlgo != nil && [newGeoAlgo isNearToAlgorithm]) {
      @try {
        [newGeo setWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo];
      }
      @catch (JavaLangException *e) {
      }
    }
    isGettingXMLForReplace__ = YES;
    oldXML = (oldGeoAlgo == nil) ? [oldGeo getXML] : [oldGeoAlgo getXML];
    if (newGeoAlgo == nil) {
      newXML = [newGeo getXML];
    }
    else {
      newXML = [newGeoAlgo getXML];
      newGeoInputs = [newGeoAlgo getInput];
    }
    isGettingXMLForReplace__ = NO;
  }
  jint pos = [((JavaLangStringBuilder *) nil_chk(consXML)) indexOfWithNSString:oldXML];
  if (pos < 0) {
    [self restoreCurrentUndoInfo];
    OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("$$", @"replace failed: oldXML string not found:\n", oldXML));
    @throw [new_OrgGeogebraCommonMainMyError_initWithOrgGeogebraCommonMainLocalization_withNSString_([((OrgGeogebraCommonMainApp *) nil_chk([self getApplication])) getLocalization], @"ReplaceFailed") autorelease];
  }
  jint inputEndPos = -1;
  if (newGeoInputs != nil && newGeoInputs->size_ > 0) {
    jint labelPos = 0;
    for (jint i = 0; i < newGeoInputs->size_; i++) {
      NSString *label = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(newGeoInputs, i))) getLabelSimple];
      if (label != nil) {
        jint labelPos0 = [consXML indexOfWithNSString:JreStrcat("$$C", @"label=\"", label, '"')];
        if (labelPos0 > labelPos) {
          labelPos = labelPos0;
          inputEndPos = [consXML indexOfWithNSString:@"</element>" withInt:labelPos] + 11;
        }
      }
    }
  }
  if (pos >= inputEndPos) {
    [consXML replaceWithInt:pos withInt:pos + ((jint) [((NSString *) nil_chk(oldXML)) length]) withNSString:newXML];
  }
  else {
    [consXML insertWithInt:inputEndPos withNSString:newXML];
    [consXML replaceWithInt:pos withInt:pos + ((jint) [((NSString *) nil_chk(oldXML)) length]) withNSString:@""];
  }
  return consXML;
}

- (void)setStepWithInt:(jint)s {
  if (s == step_ || s < -1 || s >= [((JavaUtilArrayList *) nil_chk(ceList_)) size]) return;
  [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) setAllowVisibilitySideEffectsWithBoolean:NO];
  jboolean cpara = [kernel_ isNotifyConstructionProtocolViewAboutAddRemoveActive];
  [kernel_ setNotifyConstructionProtocolViewAboutAddRemoveActiveWithBoolean:NO];
  if (s < step_) {
    for (jint i = step_; i >= s + 1; i--) {
      [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk([((JavaUtilArrayList *) nil_chk(ceList_)) getWithInt:i])) notifyRemove];
    }
  }
  else {
    for (jint i = step_ + 1; i <= s; ++i) {
      [((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk([((JavaUtilArrayList *) nil_chk(ceList_)) getWithInt:i])) notifyAdd];
    }
  }
  [kernel_ setNotifyConstructionProtocolViewAboutAddRemoveActiveWithBoolean:cpara];
  step_ = s;
  [kernel_ setAllowVisibilitySideEffectsWithBoolean:YES];
  OrgGeogebraCommonKernelConstruction_updateAllConstructionProtocolAlgorithms(self);
}

- (jint)getStep {
  return step_;
}

- (void)putLabelWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  if (supressLabelCreation_ || [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getLabelSimple] == nil) return;
  [((JavaUtilHashMap *) nil_chk(geoTable_)) putWithId:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getLabelSimple] withId:geo];
  OrgGeogebraCommonKernelConstruction_addToGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
}

- (void)removeLabelWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  [((JavaUtilHashMap *) nil_chk(geoTable_)) removeWithId:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getLabelSimple]];
  OrgGeogebraCommonKernelConstruction_removeFromGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
}

- (void)addToGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  OrgGeogebraCommonKernelConstruction_addToGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
}

- (JavaUtilTreeSet *)getGeoSetLabelOrderWithOrgGeogebraCommonPluginGeoClassEnum:(OrgGeogebraCommonPluginGeoClassEnum *)geoClassType {
  JavaUtilTreeSet *typeSet = [((JavaUtilHashMap *) nil_chk(geoSetsTypeMap_)) getWithId:geoClassType];
  if (typeSet == nil) {
    typeSet = OrgGeogebraCommonKernelConstruction_createTypeSetWithOrgGeogebraCommonPluginGeoClassEnum_(self, geoClassType);
  }
  return typeSet;
}

- (JavaUtilTreeSet *)createTypeSetWithOrgGeogebraCommonPluginGeoClassEnum:(OrgGeogebraCommonPluginGeoClassEnum *)type {
  return OrgGeogebraCommonKernelConstruction_createTypeSetWithOrgGeogebraCommonPluginGeoClassEnum_(self, type);
}

- (void)removeFromGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  OrgGeogebraCommonKernelConstruction_removeFromGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
}

- (void)putCasCellLabelWithOrgGeogebraCommonKernelGeosGeoCasCell:(OrgGeogebraCommonKernelGeosGeoCasCell *)geoCasCell
                                                    withNSString:(NSString *)label {
  if (label == nil) return;
  if (geoCasCellTable_ == nil) OrgGeogebraCommonKernelConstruction_setAndConsume_geoCasCellTable_(self, new_JavaUtilHashMap_init());
  [((JavaUtilHashMap *) nil_chk(geoCasCellTable_)) putWithId:label withId:geoCasCell];
}

- (void)removeCasCellLabelWithNSString:(NSString *)variable {
  if (geoCasCellTable_ != nil) {
    [geoCasCellTable_ removeWithId:variable];
  }
}

- (OrgGeogebraCommonKernelGeosGeoElement *)lookupLabelWithNSString:(NSString *)label {
  return [self lookupLabelWithNSString:label withBoolean:NO];
}

- (OrgGeogebraCommonKernelGeosGeoCasCell *)lookupCasCellLabelWithNSString:(NSString *)label {
  OrgGeogebraCommonKernelGeosGeoCasCell *geoCasCell = nil;
  if (geoCasCellTable_ != nil) {
    geoCasCell = [geoCasCellTable_ getWithId:label];
  }
  return geoCasCell;
}

- (OrgGeogebraCommonKernelGeosGeoCasCell *)lookupCasRowReferenceWithNSString:(NSString *)label {
  if (![((NSString *) nil_chk(label)) hasPrefix:OrgGeogebraCommonKernelArithmeticExpressionNodeConstants_get_CAS_ROW_REFERENCE_PREFIX_()]) {
    return nil;
  }
  jint rowRef = -1;
  @try {
    rowRef = JavaLangInteger_parseIntWithNSString_([label substring:1]);
  }
  @catch (JavaLangNumberFormatException *e) {
    OrgGeogebraCommonUtilDebugLog_errorWithNSString_(JreStrcat("$$", @"Malformed CAS row reference: ", label));
    OrgGeogebraCommonKernelCASException *ex = [new_OrgGeogebraCommonKernelCASException_initWithNSString_(@"CAS.InvalidReferenceError") autorelease];
    [ex setKeyWithNSString:@"CAS.InvalidReferenceError"];
    @throw ex;
  }
  OrgGeogebraCommonKernelGeosGeoCasCell *ret = [self getCasCellWithInt:rowRef - 1];
  if (ret == nil) {
    OrgGeogebraCommonUtilDebugLog_errorWithNSString_(JreStrcat("$$", @"invalid CAS row reference: ", label));
    OrgGeogebraCommonKernelCASException *ex = [new_OrgGeogebraCommonKernelCASException_initWithNSString_(@"CAS.InvalidReferenceError") autorelease];
    [ex setKeyWithNSString:@"CAS.InvalidReferenceError"];
    @throw ex;
  }
  return ret;
}

- (OrgGeogebraCommonKernelGeosGeoElement *)lookupLabelWithNSString:(NSString *)label
                                                       withBoolean:(jboolean)allowAutoCreate {
  NSString *label1 = label;
  if (label1 == nil) {
    return nil;
  }
  if (localVariableTable_ != nil) {
    OrgGeogebraCommonKernelGeosGeoElement *localGeo = [localVariableTable_ getWithId:label1];
    if (localGeo != nil) {
      return localGeo;
    }
  }
  OrgGeogebraCommonKernelGeosGeoElement *geo = [self geoTableVarLookupWithNSString:label1];
  if (geo != nil) {
    return OrgGeogebraCommonKernelConstruction_checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
  }
  label1 = OrgGeogebraCommonKernelKernel_removeCASVariablePrefixWithNSString_(label1);
  geo = [self geoTableVarLookupWithNSString:label1];
  if (geo != nil) {
    return OrgGeogebraCommonKernelConstruction_checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
  }
  if ([((NSString *) nil_chk(label1)) indexOf:'$'] > -1) {
    JavaLangStringBuilder *labelWithout$ = [new_JavaLangStringBuilder_initWithInt_(((jint) [label1 length]) - 1) autorelease];
    for (jint i = 0; i < ((jint) [label1 length]); i++) {
      jchar ch = [label1 charAtWithInt:i];
      if (ch != '$') {
        [labelWithout$ appendWithChar:ch];
      }
    }
    NSString *labelString = [labelWithout$ description];
    geo = [self lookupLabelWithNSString:labelString withBoolean:allowAutoCreate];
    if (geo != nil) {
      return OrgGeogebraCommonKernelConstruction_checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
    }
    if ([((NSString *) nil_chk(labelString)) charAtWithInt:0] >= '0' && [labelString charAtWithInt:0] <= '9') {
      jint cell = 0;
      @try {
        cell = JavaLangInteger_parseIntWithNSString_([labelWithout$ description]);
      }
      @catch (JavaLangException *e) {
        [((JavaLangException *) nil_chk(e)) printStackTrace];
      }
      if (cell > 0) {
        return [self getCasCellWithInt:cell - 1];
      }
    }
  }
  if (allowAutoCreate) {
    if (OrgGeogebraCommonUtilStringUtil_isLetterWithChar_([label1 charAtWithInt:0]) && OrgGeogebraCommonUtilStringUtil_isDigitWithChar_([label1 charAtWithInt:((jint) [label1 length]) - 1])) {
      NSString *upperCaseLabel = [label1 uppercaseString];
      geo = [self geoTableVarLookupWithNSString:upperCaseLabel];
      if (geo != nil) {
        return OrgGeogebraCommonKernelConstruction_checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
      }
    }
  }
  if (allowAutoCreate) {
    return [self autoCreateGeoElementWithNSString:label1];
  }
  return nil;
}

- (OrgGeogebraCommonKernelGeosGeoElement *)checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  return OrgGeogebraCommonKernelConstruction_checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
}

- (jboolean)isFreeLabelWithNSString:(NSString *)label {
  return [self isFreeLabelWithNSString:label withBoolean:YES withBoolean:NO];
}

- (jboolean)isFreeLabelWithNSString:(NSString *)label
                        withBoolean:(jboolean)includeCASvariables
                        withBoolean:(jboolean)includeDummies {
  if (label == nil) {
    return NO;
  }
  if (!fileLoading_ && [((OrgGeogebraCommonKernelParserCashandlersParserFunctions *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk([self getKernel])) getApplication])) getParserFunctions])) isReservedWithNSString:label]) return NO;
  if ([((JavaUtilHashMap *) nil_chk(geoTable_)) containsKeyWithId:label]) return NO;
  if (includeCASvariables && geoCasCellTable_ != nil && [geoCasCellTable_ containsKeyWithId:label]) {
    return NO;
  }
  if (includeDummies && [((JavaUtilTreeSet *) nil_chk(casDummies_)) containsWithId:label]) {
    return NO;
  }
  return YES;
}

- (void)updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)oldGeo
                               withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)newGeo {
  OrgGeogebraCommonKernelConstruction_updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoElement_(self, oldGeo, newGeo);
}

- (jboolean)updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoCasCell:(OrgGeogebraCommonKernelGeosGeoCasCell *)casCell {
  JavaUtilTreeSet *allPred = [new_JavaUtilTreeSet_init() autorelease];
  if ([((OrgGeogebraCommonKernelGeosGeoCasCell *) nil_chk(casCell)) getGeoElementVariables] != nil) {
    for (OrgGeogebraCommonKernelGeosGeoElement * __strong directInput in nil_chk([casCell getGeoElementVariables])) {
      [allPred addAllWithJavaUtilCollection:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(directInput)) getAllPredecessors]];
      [allPred addWithId:directInput];
    }
  }
  if ([allPred size] == 0) {
    return NO;
  }
  jint maxPredIndex = 0;
  for (OrgGeogebraCommonKernelGeosGeoElement * __strong pred in allPred) {
    jint predIndex = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(pred)) getConstructionIndex];
    if (predIndex > maxPredIndex) maxPredIndex = predIndex;
  }
  if ([casCell getConstructionIndex] > maxPredIndex) return NO;
  jint maxCellIndex = [casCell getMaxConstructionIndex];
  if (maxCellIndex >= maxPredIndex) {
    [self moveInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:casCell withInt:maxPredIndex + (maxCellIndex > maxPredIndex ? 1 : 0)];
    return YES;
  }
  maxPredIndex = 0;
  for (OrgGeogebraCommonKernelGeosGeoElement * __strong pred in allPred) {
    [self moveInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:pred withInt:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(pred)) getMinConstructionIndex]];
    maxPredIndex = JavaLangMath_maxWithInt_withInt_(maxPredIndex, [pred getConstructionIndex]);
  }
  if ([casCell getConstructionIndex] < maxPredIndex) {
    return YES;
  }
  if ([casCell getMaxConstructionIndex] > maxPredIndex) {
    [self moveInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:casCell withInt:maxPredIndex + 1];
    return YES;
  }
  [((JavaIoPrintStream *) nil_chk(JavaLangSystem_get_err_())) printlnWithNSString:JreStrcat("$@", @"Construction.updateConstructionOrder(GeoCasCell) failed: ", casCell)];
  return NO;
}

- (void)prepareReplaceWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)oldGeo
                      withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)newGeo {
  OrgGeogebraCommonKernelAlgosAlgoElement *oldGeoAlgo = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(oldGeo)) getParentAlgorithm];
  OrgGeogebraCommonKernelAlgosAlgoElement *newGeoAlgo = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(newGeo)) getParentAlgorithm];
  if (oldGeoAlgo != nil) {
    OrgGeogebraCommonKernelConstruction_set_keepGeo_(self, oldGeo);
    [oldGeoAlgo removeOutputExceptWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo];
    OrgGeogebraCommonKernelConstruction_set_keepGeo_(self, nil);
  }
  if ([newGeo getConstructionIndex] == -1) {
    jint ind = [((JavaUtilArrayList *) nil_chk(ceList_)) size];
    if (newGeoAlgo == nil) [newGeo setConstructionIndexWithInt:ind];
    else [newGeoAlgo setConstructionIndexWithInt:ind];
  }
  if (newGeoAlgo != nil) {
    for (jint i = 0; i < [newGeoAlgo getOutputLength]; i++) {
      OrgGeogebraCommonKernelGeosGeoElement *geo = [newGeoAlgo getOutputWithInt:i];
      if (geo != newGeo && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isDefined] && ![geo isLabelSet]) {
        [geo setLabelWithNSString:nil];
      }
    }
  }
  OrgGeogebraCommonKernelConstruction_updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoElement_(self, oldGeo, newGeo);
}

- (void)addToGeoSetWithCasCellsWithOrgGeogebraCommonKernelGeosGeoCasCell:(OrgGeogebraCommonKernelGeosGeoCasCell *)geoCasCell {
  [((JavaUtilTreeSet *) nil_chk(geoSetWithCasCells_)) addWithId:geoCasCell];
}

- (void)removeFromGeoSetWithCasCellsWithOrgGeogebraCommonKernelGeosGeoCasCell:(OrgGeogebraCommonKernelGeosGeoCasCell *)geoCasCell {
  [((JavaUtilTreeSet *) nil_chk(geoSetWithCasCells_)) removeWithId:geoCasCell];
}

- (OrgGeogebraCommonKernelGeosGeoElement *)createSpreadsheetGeoElementWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)neighbourCell
                                                                                                   withNSString:(NSString *)label {
  OrgGeogebraCommonKernelGeosGeoElement *result;
  if (neighbourCell != nil) {
    result = [neighbourCell copy__];
  }
  else {
    result = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self) autorelease];
  }
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(result)) setUndefined];
  [result setEmptySpreadsheetCellWithBoolean:YES];
  jboolean oldSuppressLabelsActive = [self isSuppressLabelsActive];
  [self setSuppressLabelCreationWithBoolean:NO];
  [result setAuxiliaryObjectWithBoolean:YES];
  [result setLabelWithNSString:label];
  [self setSuppressLabelCreationWithBoolean:oldSuppressLabelsActive];
  return result;
}

- (NSString *)getIndexLabelWithNSString:(NSString *)prefix
                                withInt:(jint)startIndex {
  NSString *pref;
  jint pos = [((NSString *) nil_chk(prefix)) indexOf:'_'];
  if (pos == -1) pref = prefix;
  else pref = [prefix substring:0 endIndex:pos];
  JavaLangStringBuilder *sbIndexLabel = [new_JavaLangStringBuilder_init() autorelease];
  jint n = startIndex;
  do {
    [sbIndexLabel setLengthWithInt:0];
    [sbIndexLabel appendWithNSString:pref];
    if (n < 10) {
      [sbIndexLabel appendWithChar:'_'];
      [sbIndexLabel appendWithInt:n];
    }
    else {
      [sbIndexLabel appendWithNSString:@"_{"];
      [sbIndexLabel appendWithInt:n];
      [sbIndexLabel appendWithChar:'}'];
    }
    n++;
  }
  while (![self isFreeLabelWithNSString:[sbIndexLabel description]]);
  return [sbIndexLabel description];
}

- (NSString *)getIndexLabelWithNSString:(NSString *)prefix {
  return [self getIndexLabelWithNSString:prefix withInt:1];
}

- (OrgGeogebraCommonKernelGeosGeoElement *)autoCreateGeoElementWithNSString:(NSString *)labelNew {
  OrgGeogebraCommonKernelGeosGeoElement *createdGeo = nil;
  jboolean fix = YES;
  jboolean auxilliary = YES;
  NSString *label = labelNew;
  jint length = ((jint) [((NSString *) nil_chk(label)) length]);
  if (length == 3 && [label charAtWithInt:2] == '\'') {
    createdGeo = OrgGeogebraCommonKernelConstruction_distanceOrProductWithNSString_withNSString_(self, JreStrcat("C", [label charAtWithInt:0]), JreStrcat("CC", [label charAtWithInt:1], '\''));
    fix = NO;
  }
  else if (length == 3 && [label charAtWithInt:1] == '\'') {
    createdGeo = OrgGeogebraCommonKernelConstruction_distanceOrProductWithNSString_withNSString_(self, JreStrcat("CC", [label charAtWithInt:0], '\''), JreStrcat("C", [label charAtWithInt:2]));
    fix = NO;
  }
  else if (length == 4 && [label charAtWithInt:1] == '\'' && [label charAtWithInt:3] == '\'') {
    createdGeo = OrgGeogebraCommonKernelConstruction_distanceOrProductWithNSString_withNSString_(self, JreStrcat("CC", [label charAtWithInt:0], '\''), JreStrcat("CC", [label charAtWithInt:2], '\''));
    fix = NO;
  }
  else if (length == 2) {
    createdGeo = OrgGeogebraCommonKernelConstruction_distanceOrProductWithNSString_withNSString_(self, JreStrcat("C", [label charAtWithInt:0]), JreStrcat("C", [label charAtWithInt:1]));
    fix = NO;
  }
  else if (length == 1) {
    if ([label isEqual:@"O"]) {
      createdGeo = [new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withDouble_withDouble_withDouble_(self, 0.0, 0.0, 1.0) autorelease];
      label = @"O";
      auxilliary = YES;
      fix = YES;
    }
  }
  if (createdGeo != nil) {
    [createdGeo setAuxiliaryObjectWithBoolean:auxilliary];
    [createdGeo setLabelWithNSString:label];
    [createdGeo setFixedWithBoolean:fix];
    return createdGeo;
  }
  createdGeo = OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_autoCreateWithNSString_withOrgGeogebraCommonKernelConstruction_(label, self);
  return createdGeo;
}

- (OrgGeogebraCommonKernelGeosGeoElement *)distanceOrProductWithNSString:(NSString *)string
                                                            withNSString:(NSString *)string2 {
  return OrgGeogebraCommonKernelConstruction_distanceOrProductWithNSString_withNSString_(self, string, string2);
}

- (void)initGeoTables {
  [((JavaUtilHashMap *) nil_chk(geoTable_)) clear];
  OrgGeogebraCommonKernelConstruction_set_geoCasCellTable_(self, nil);
  OrgGeogebraCommonKernelConstruction_set_localVariableTable_(self, nil);
  [((id<JavaUtilMap>) nil_chk(constsM_)) clear];
  [((id<JavaUtilMap>) nil_chk(complexNumbersM_)) clear];
  [((id<JavaUtilMap>) nil_chk(intsM_)) clear];
  [geoTable_ putWithId:@"xAxis" withId:xAxis_];
  [geoTable_ putWithId:@"yAxis" withId:yAxis_];
  [((JavaUtilTreeSet *) nil_chk(usedGeos_)) clear];
  if (xAxisLocalName_ != nil) {
    [geoTable_ putWithId:xAxisLocalName_ withId:xAxis_];
    [geoTable_ putWithId:yAxisLocalName_ withId:yAxis_];
  }
}

- (JavaUtilTreeSet *)getGeoSetNameDescriptionOrder {
  JavaUtilTreeSet *sortedSet = [new_JavaUtilTreeSet_initWithJavaUtilComparator_([new_OrgGeogebraCommonKernelNameDescriptionComparator_init() autorelease]) autorelease];
  id<JavaUtilIterator> it = [((JavaUtilTreeSet *) nil_chk(geoSetConsOrder_)) iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    OrgGeogebraCommonKernelGeosGeoElement *geo = [it next];
    [sortedSet addWithId:geo];
  }
  return sortedSet;
}

- (OrgGeogebraCommonKernelOptimizationExtremumFinder *)getExtremumFinder {
  return [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getExtremumFinder];
}

- (void)storeUndoInfo {
  if (![self isUndoEnabled]) return;
  [((OrgGeogebraCommonKernelUndoManager *) nil_chk(undoManager_)) storeUndoInfo];
}

- (void)restoreCurrentUndoInfo {
  collectRedefineCalls_ = NO;
  if (undoManager_ != nil) [undoManager_ restoreCurrentUndoInfo];
}

- (void)redo {
  [((OrgGeogebraCommonKernelUndoManager *) nil_chk(undoManager_)) redo];
}

- (void)undo {
  [((OrgGeogebraCommonKernelUndoManager *) nil_chk(undoManager_)) undo];
}

- (jboolean)undoPossible {
  return undoManager_ != nil && [undoManager_ undoPossible];
}

- (jboolean)redoPossible {
  return undoManager_ != nil && [undoManager_ redoPossible];
}

- (void)addUsedMacroWithOrgGeogebraCommonKernelMacro:(OrgGeogebraCommonKernelMacro *)macro {
  if (usedMacros_ == nil) OrgGeogebraCommonKernelConstruction_setAndConsume_usedMacros_(self, new_JavaUtilArrayList_init());
  [((JavaUtilArrayList *) nil_chk(usedMacros_)) addWithId:macro];
}

- (JavaUtilArrayList *)getUsedMacros {
  return usedMacros_;
}

- (void)clearConstruction {
  [((id<JavaUtilMap>) nil_chk(constsM_)) clear];
  [((id<JavaUtilMap>) nil_chk(complexNumbersM_)) clear];
  [((id<JavaUtilMap>) nil_chk(intsM_)) clear];
  [((JavaUtilArrayList *) nil_chk(ceList_)) clear];
  [((JavaUtilArrayList *) nil_chk(algoList_)) clear];
  [((JavaUtilTreeSet *) nil_chk(geoSetConsOrder_)) clear];
  [((JavaUtilTreeSet *) nil_chk(geoSetWithCasCells_)) clear];
  [((JavaUtilTreeSet *) nil_chk(geoSetLabelOrder_)) clear];
  [((JavaUtilHashMap *) nil_chk(geoSetsTypeMap_)) clear];
  [((JavaUtilArrayList *) nil_chk(euclidianViewCE_)) clear];
  OrgGeogebraCommonKernelConstruction_set_corner5Algos_(self, nil);
  [((JavaUtilTreeSet *) nil_chk(self->casDummies_)) clear];
  [self initGeoTables];
  step_ = -1;
  OrgGeogebraCommonKernelConstruction_set_title_(self, nil);
  OrgGeogebraCommonKernelConstruction_set_author_(self, nil);
  OrgGeogebraCommonKernelConstruction_set_date_(self, nil);
  IOSObjectArray_Set(nil_chk(worksheetText_), 0, nil);
  IOSObjectArray_Set(worksheetText_, 1, nil);
  OrgGeogebraCommonKernelConstruction_set_usedMacros_(self, nil);
  spreadsheetTraces_ = NO;
}

- (JavaLangStringBuilder *)getCurrentUndoXMLWithBoolean:(jboolean)getListenersToo {
  return OrgGeogebraCommonIoMyXMLio_getUndoXMLWithOrgGeogebraCommonKernelConstruction_withBoolean_(self, getListenersToo);
}

- (OrgGeogebraCommonIoMyXMLio *)getXMLio {
  if (xmlio_ == nil) OrgGeogebraCommonKernelConstruction_set_xmlio_(self, [((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getApplication])) createXMLioWithOrgGeogebraCommonKernelConstruction:self]);
  return xmlio_;
}

- (void)initUndoInfo {
  if (undoManager_ == nil) OrgGeogebraCommonKernelConstruction_set_undoManager_(self, [((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getApplication])) getUndoManagerWithOrgGeogebraCommonKernelConstruction:self]);
  [((OrgGeogebraCommonKernelUndoManager *) nil_chk(undoManager_)) initUndoInfo];
}

- (void)buildConstructionWithJavaLangStringBuilder:(JavaLangStringBuilder *)consXML {
  OrgGeogebraCommonKernelConstruction_buildConstructionWithJavaLangStringBuilder_(self, consXML);
}

- (OrgGeogebraCommonKernelUndoManager *)getUndoManager {
  return undoManager_;
}

- (void)setOutputGeoWithNSString:(NSString *)type {
  if (type == nil) {
    OrgGeogebraCommonKernelConstruction_set_outputGeo_(self, nil);
    return;
  }
  OrgGeogebraCommonKernelConstruction_set_outputGeo_(self, [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) createGeoElementWithOrgGeogebraCommonKernelConstruction:self withNSString:type]);
}

- (OrgGeogebraCommonKernelGeosGeoElement *)getOutputGeo {
  return outputGeo_ == nil ? [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self) autorelease] : outputGeo_;
}

- (void)registerFunctionVariableWithNSString:(NSString *)fv {
  if (fv == nil) [((JavaUtilTreeSet *) nil_chk(registredFV_)) clear];
  else [((JavaUtilTreeSet *) nil_chk(registredFV_)) addWithId:fv];
}

- (jboolean)isRegistredFunctionVariableWithNSString:(NSString *)s {
  return [((JavaUtilTreeSet *) nil_chk(registredFV_)) containsWithId:s];
}

- (NSString *)getRegisteredFunctionVariable {
  id<JavaUtilIterator> it = [((JavaUtilTreeSet *) nil_chk(registredFV_)) iterator];
  if ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) return [it next];
  return nil;
}

- (void)setFileLoadingWithBoolean:(jboolean)b {
  fileLoading_ = b;
}

- (jboolean)isFileLoading {
  return fileLoading_;
}

- (jboolean)isUpdateConstructionRunning {
  return updateConstructionRunning_;
}

- (JavaUtilTreeSet *)getCASdummies {
  return casDummies_;
}

- (void)setAlgoSetCurrentlyUpdatedWithOrgGeogebraCommonKernelAlgosAlgorithmSet:(OrgGeogebraCommonKernelAlgosAlgorithmSet *)algoSetCurrentlyUpdated {
  OrgGeogebraCommonKernelConstruction_set_algoSetCurrentlyUpdated_(self, algoSetCurrentlyUpdated);
}

- (OrgGeogebraCommonKernelAlgosAlgorithmSet *)getAlgoSetCurrentlyUpdated {
  return algoSetCurrentlyUpdated_;
}

- (void)setUpdateConstructionRunningWithBoolean:(jboolean)b {
  updateConstructionRunning_ = b;
}

- (id<JavaUtilSet>)getAllGeoLabels {
  return [new_JavaUtilHashSet_initWithJavaUtilCollection_([((JavaUtilHashMap *) nil_chk(geoTable_)) keySet]) autorelease];
}

- (id<JavaUtilSet>)getAllLabels {
  id<JavaUtilSet> ret = [new_JavaUtilHashSet_initWithJavaUtilCollection_([self getAllGeoLabels]) autorelease];
  if (geoCasCellTable_ != nil) {
    [ret addAllWithJavaUtilCollection:[geoCasCellTable_ keySet]];
  }
  return ret;
}

- (jboolean)hasSpreadsheetTracingGeos {
  return spreadsheetTraces_;
}

- (void)addTracingGeo {
  spreadsheetTraces_ = YES;
}

- (void)setAllowUnboundedAnglesWithBoolean:(jboolean)b {
  self->allowUnboundedAngles_ = b;
}

- (jboolean)isAllowUnboundedAngles {
  return self->allowUnboundedAngles_;
}

- (void)addCASAlgoWithOrgGeogebraCommonKernelAlgosAlgoElement:(OrgGeogebraCommonKernelAlgosAlgoElement *)algoCasBase {
  [((JavaUtilArrayList *) nil_chk(casAlgos_)) addWithId:algoCasBase];
}

- (void)recomputeCASalgos {
  for (OrgGeogebraCommonKernelAlgosAlgoElement * __strong algo in nil_chk(casAlgos_)) {
    if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) getOutputWithInt:0])) isLabelSet]) {
      if ([algo isKindOfClass:[OrgGeogebraCommonKernelAlgosAlgoCasBase class]]) {
        [((OrgGeogebraCommonKernelAlgosAlgoCasBase *) check_class_cast(algo, [OrgGeogebraCommonKernelAlgosAlgoCasBase class])) clearCasEvalMapWithNSString:@""];
        [algo compute];
      }
      else if ([algo isKindOfClass:[OrgGeogebraCommonKernelCasAlgoUsingTempCASalgo class]]) {
        [((OrgGeogebraCommonKernelCasAlgoUsingTempCASalgo *) check_class_cast(algo, [OrgGeogebraCommonKernelCasAlgoUsingTempCASalgo class])) refreshCASResults];
        [algo compute];
      }
      else if ([OrgGeogebraCommonKernelCasUsesCAS_class_() isInstance:algo] || [OrgGeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:algo]) {
        [algo compute];
      }
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([algo getOutputWithInt:0])) updateCascade];
    }
  }
  [casAlgos_ clear];
}

- (void)updateConstructionLanguage {
  updateConstructionRunning_ = YES;
  jboolean oldFlag = [((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getApplication])) isBlockUpdateScripts];
  [((OrgGeogebraCommonMainApp *) nil_chk([self->kernel_ getApplication])) setBlockUpdateScriptsWithBoolean:YES];
  @try {
    jint size = [((JavaUtilArrayList *) nil_chk(ceList_)) size];
    for (jint i = 0; i < size; ++i) {
      OrgGeogebraCommonKernelAlgosConstructionElement *ce = [ceList_ getWithInt:i];
      if ([((OrgGeogebraCommonKernelAlgosConstructionElement *) nil_chk(ce)) isGeoElement]) {
        if ([((OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoElement class])) isGeoText] && [((OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoElement class])) getParentAlgorithm] != nil) {
          [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk([((OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(ce, [OrgGeogebraCommonKernelGeosGeoElement class])) getParentAlgorithm])) update];
        }
        [ce update];
      }
    }
  }
  @finally {
    [((OrgGeogebraCommonMainApp *) nil_chk([self->kernel_ getApplication])) setBlockUpdateScriptsWithBoolean:oldFlag];
    updateConstructionRunning_ = NO;
  }
}

- (void)updateConstructionLaTeX {
  jboolean oldFlag = [((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getApplication])) isBlockUpdateScripts];
  [((OrgGeogebraCommonMainApp *) nil_chk([self->kernel_ getApplication])) setBlockUpdateScriptsWithBoolean:YES];
  if (latexGeos_ != nil) {
    OrgGeogebraCommonKernelGeosGeoElement_updateCascadeWithJavaUtilArrayList_withJavaUtilTreeSet_withBoolean_(latexGeos_, [new_JavaUtilTreeSet_init() autorelease], YES);
  }
  OrgGeogebraCommonKernelConstruction_set_latexGeos_(self, nil);
  [((OrgGeogebraCommonMainApp *) nil_chk([self->kernel_ getApplication])) setBlockUpdateScriptsWithBoolean:oldFlag];
}

- (void)registerCorner5WithOrgGeogebraCommonKernelEuclidianViewCE:(id<OrgGeogebraCommonKernelEuclidianViewCE>)algo {
  if (self->corner5Algos_ == nil) {
    OrgGeogebraCommonKernelConstruction_setAndConsume_corner5Algos_(self, new_JavaUtilArrayList_init());
  }
  [((JavaUtilArrayList *) nil_chk(self->corner5Algos_)) addWithId:algo];
}

- (IOSObjectArray *)getRegisteredFunctionVariables {
  IOSObjectArray *varNames = [IOSObjectArray arrayWithLength:[((JavaUtilTreeSet *) nil_chk(self->registredFV_)) size] type:NSString_class_()];
  id<JavaUtilIterator> it = [self->registredFV_ iterator];
  jint i = 0;
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    IOSObjectArray_Set(varNames, i++, [it next]);
  }
  return varNames;
}

- (void)addLaTeXGeoWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  if (latexGeos_ == nil) {
    OrgGeogebraCommonKernelConstruction_setAndConsume_latexGeos_(self, new_JavaUtilArrayList_init());
  }
  [((JavaUtilArrayList *) nil_chk(self->latexGeos_)) addWithId:geo];
}

- (void)dealloc {
  RELEASE_(constsM_);
  RELEASE_(intsM_);
  RELEASE_(complexNumbersM_);
  RELEASE_(usedGeos_);
  RELEASE_(usedMacros_);
  RELEASE_(undoManager_);
  RELEASE_(consDefaults_);
  RELEASE_(title_);
  RELEASE_(author_);
  RELEASE_(date_);
  RELEASE_(worksheetText_);
  RELEASE_(kernel_);
  RELEASE_(geoSetsTypeMap_);
  RELEASE_(ceList_);
  RELEASE_(algoList_);
  RELEASE_(geoTable_);
  RELEASE_(euclidianViewCE_);
  RELEASE_(corner5Algos_);
  RELEASE_(localVariableTable_);
  RELEASE_(geoSetConsOrder_);
  RELEASE_(geoSetLabelOrder_);
  RELEASE_(geoSetWithCasCells_);
  RELEASE_(randomElements_);
  RELEASE_(geoCasCellTable_);
  RELEASE_(redefineMap_);
  RELEASE_(keepGeo_);
  RELEASE_(latexGeos_);
  RELEASE_(xAxis_);
  RELEASE_(yAxis_);
  RELEASE_(xAxisLocalName_);
  RELEASE_(yAxisLocalName_);
  RELEASE_(origin_);
  RELEASE_(xmlio_);
  RELEASE_(outputGeo_);
  RELEASE_(registredFV_);
  RELEASE_(casDummies_);
  RELEASE_(algoSetCurrentlyUpdated_);
  RELEASE_(casAlgos_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelKernel:", "Construction", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelKernel:withOrgGeogebraCommonKernelConstruction:", "Construction", NULL, 0x4, NULL, NULL },
    { "newConstructionDefaults", NULL, "V", 0x4, NULL, NULL },
    { "getKeepGeo", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "getOrigin", NULL, "Lorg.geogebra.common.kernel.geos.GeoPoint;", 0x11, NULL, NULL },
    { "getXAxis", NULL, "Lorg.geogebra.common.kernel.geos.GeoAxis;", 0x11, NULL, NULL },
    { "getYAxis", NULL, "Lorg.geogebra.common.kernel.geos.GeoAxis;", 0x11, NULL, NULL },
    { "initAxis", NULL, "V", 0x4, NULL, NULL },
    { "isConstantElementWithOrgGeogebraCommonKernelGeosGeoElement:", "isConstantElement", "Lorg.geogebra.common.kernel.Construction$Constants;", 0x1, NULL, NULL },
    { "updateLocalAxesNames", NULL, "V", 0x1, NULL, NULL },
    { "getConstructionDefaults", NULL, "Lorg.geogebra.common.kernel.ConstructionDefaults;", 0x11, NULL, NULL },
    { "getAuthor", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "getDate", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "getTitle", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "setAuthorWithNSString:", "setAuthor", "V", 0x1, NULL, NULL },
    { "setDateWithNSString:", "setDate", "V", 0x1, NULL, NULL },
    { "setTitleWithNSString:", "setTitle", "V", 0x1, NULL, NULL },
    { "getWorksheetTextWithInt:", "getWorksheetText", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "setWorksheetTextWithNSString:withInt:", "setWorksheetText", "V", 0x1, NULL, NULL },
    { "worksheetTextDefined", NULL, "Z", 0x4, NULL, NULL },
    { "getKernel", NULL, "Lorg.geogebra.common.kernel.Kernel;", 0x1, NULL, NULL },
    { "setSuppressLabelCreationWithBoolean:", "setSuppressLabelCreation", "V", 0x1, NULL, NULL },
    { "isSuppressLabelsActive", NULL, "Z", 0x1, NULL, NULL },
    { "getApplication", NULL, "Lorg.geogebra.common.main.App;", 0x1, NULL, NULL },
    { "isEmpty", NULL, "Z", 0x1, NULL, NULL },
    { "steps", NULL, "I", 0x1, NULL, NULL },
    { "getLastGeoElement", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "getCasCellWithInt:", "getCasCell", "Lorg.geogebra.common.kernel.geos.GeoCasCell;", 0x1, NULL, NULL },
    { "getLastCasCell", NULL, "Lorg.geogebra.common.kernel.geos.GeoCasCell;", 0x1, NULL, NULL },
    { "setCasCellRowWithOrgGeogebraCommonKernelGeosGeoCasCell:withInt:", "setCasCellRow", "V", 0x1, NULL, NULL },
    { "addLocalVariableWithNSString:withOrgGeogebraCommonKernelGeosGeoElement:", "addLocalVariable", "V", 0x11, NULL, NULL },
    { "removeLocalVariableWithNSString:", "removeLocalVariable", "V", 0x11, NULL, NULL },
    { "geoTableVarLookupWithNSString:", "geoTableVarLookup", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "setShowOnlyBreakpointsWithBoolean:", "setShowOnlyBreakpoints", "V", 0x1, NULL, NULL },
    { "showOnlyBreakpoints", NULL, "Z", 0x11, NULL, NULL },
    { "updateConstructionIndexWithInt:", "updateConstructionIndex", "V", 0x4, NULL, NULL },
    { "updateAllConstructionProtocolAlgorithms", NULL, "Z", 0x14, NULL, NULL },
    { "addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:withInt:", "addToConstructionList", "V", 0x1, NULL, NULL },
    { "updateCasCellRows", NULL, "V", 0x1, NULL, NULL },
    { "moveInConstructionListWithInt:withInt:", "moveInConstructionList", "Z", 0x1, NULL, NULL },
    { "addToConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:withBoolean:", "addToConstructionList", "V", 0x1, NULL, NULL },
    { "removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:", "removeFromConstructionList", "V", 0x1, NULL, NULL },
    { "addToAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement:", "addToAlgorithmList", "V", 0x1, NULL, NULL },
    { "removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement:", "removeFromAlgorithmList", "V", 0x1, NULL, NULL },
    { "moveInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:withInt:", "moveInConstructionList", "Z", 0x1, NULL, NULL },
    { "isInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:", "isInConstructionList", "Z", 0x1, NULL, NULL },
    { "updateAllAlgorithms", NULL, "V", 0x11, NULL, NULL },
    { "registerEuclidianViewCEWithOrgGeogebraCommonKernelEuclidianViewCE:", "registerEuclidianViewCE", "V", 0x11, NULL, NULL },
    { "unregisterEuclidianViewCEWithOrgGeogebraCommonKernelEuclidianViewCE:", "unregisterEuclidianViewCE", "V", 0x11, NULL, NULL },
    { "notifyEuclidianViewCEWithBoolean:", "notifyEuclidianViewCE", "Z", 0x1, NULL, NULL },
    { "hasEuclidianViewCE", NULL, "Z", 0x1, NULL, NULL },
    { "updateAllRandomGeos", NULL, "V", 0x11, NULL, NULL },
    { "updateAllFreeRandomGeosNoCascade", NULL, "V", 0x11, NULL, NULL },
    { "addRandomGeoWithOrgGeogebraCommonKernelGeosGeoElement:", "addRandomGeo", "V", 0x1, NULL, NULL },
    { "removeRandomGeoWithOrgGeogebraCommonKernelGeosGeoElement:", "removeRandomGeo", "V", 0x1, NULL, NULL },
    { "updateConstruction", NULL, "V", 0x11, NULL, NULL },
    { "updateCasCells", NULL, "V", 0x11, NULL, NULL },
    { "getConstructionXMLWithJavaLangStringBuilder:withBoolean:", "getConstructionXML", "V", 0x1, NULL, NULL },
    { "getConstructionElementsXMLWithJavaLangStringBuilder:withBoolean:", "getConstructionElementsXML", "V", 0x1, NULL, NULL },
    { "getConstructionElementsXML_OGPWithJavaLangStringBuilder:withOrgGeogebraCommonKernelGeosGeoElement:", "getConstructionElementsXML_OGP", "V", 0x1, NULL, NULL },
    { "getConstructionRegressionOutWithJavaLangStringBuilder:", "getConstructionRegressionOut", "V", 0x1, NULL, NULL },
    { "isUndoEnabled", NULL, "Z", 0x1, NULL, NULL },
    { "setUndoEnabledWithBoolean:", "setUndoEnabled", "V", 0x1, NULL, NULL },
    { "getConstructionElementWithInt:", "getConstructionElement", "Lorg.geogebra.common.kernel.algos.ConstructionElement;", 0x1, NULL, NULL },
    { "getFirstGeo", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "getGeoSetConstructionOrder", NULL, "Ljava.util.TreeSet;", 0x11, NULL, NULL },
    { "getGeoSetWithCasCellsConstructionOrder", NULL, "Ljava.util.TreeSet;", 0x11, NULL, NULL },
    { "getGeoSetLabelOrder", NULL, "Ljava.util.TreeSet;", 0x11, NULL, NULL },
    { "startCollectingRedefineCalls", NULL, "V", 0x1, NULL, NULL },
    { "stopCollectingRedefineCalls", NULL, "V", 0x1, NULL, NULL },
    { "replaceWithOrgGeogebraCommonKernelGeosGeoElement:withOrgGeogebraCommonKernelGeosGeoElement:", "replace", "V", 0x1, "Ljava.lang.Exception;", NULL },
    { "isGettingXMLForReplace", NULL, "Z", 0x1, NULL, NULL },
    { "isRemovingGeoToReplaceIt", NULL, "Z", 0x1, NULL, NULL },
    { "processCollectedRedefineCalls", NULL, "V", 0x1, "Ljava.lang.Exception;", NULL },
    { "changeCasCellWithOrgGeogebraCommonKernelGeosGeoCasCell:", "changeCasCell", "V", 0x1, "Ljava.lang.Exception;", NULL },
    { "doReplaceInXMLWithJavaLangStringBuilder:withOrgGeogebraCommonKernelGeosGeoElement:withOrgGeogebraCommonKernelGeosGeoElement:", "doReplaceInXML", "Ljava.lang.StringBuilder;", 0x4, NULL, NULL },
    { "setStepWithInt:", "setStep", "V", 0x1, NULL, NULL },
    { "getStep", NULL, "I", 0x1, NULL, NULL },
    { "putLabelWithOrgGeogebraCommonKernelGeosGeoElement:", "putLabel", "V", 0x1, NULL, NULL },
    { "removeLabelWithOrgGeogebraCommonKernelGeosGeoElement:", "removeLabel", "V", 0x1, NULL, NULL },
    { "addToGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement:", "addToGeoSets", "V", 0x2, NULL, NULL },
    { "getGeoSetLabelOrderWithOrgGeogebraCommonPluginGeoClassEnum:", "getGeoSetLabelOrder", "Ljava.util.TreeSet;", 0x11, NULL, NULL },
    { "createTypeSetWithOrgGeogebraCommonPluginGeoClassEnum:", "createTypeSet", "Ljava.util.TreeSet;", 0x2, NULL, NULL },
    { "removeFromGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement:", "removeFromGeoSets", "V", 0x2, NULL, NULL },
    { "putCasCellLabelWithOrgGeogebraCommonKernelGeosGeoCasCell:withNSString:", "putCasCellLabel", "V", 0x1, NULL, NULL },
    { "removeCasCellLabelWithNSString:", "removeCasCellLabel", "V", 0x1, NULL, NULL },
    { "lookupLabelWithNSString:", "lookupLabel", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "lookupCasCellLabelWithNSString:", "lookupCasCellLabel", "Lorg.geogebra.common.kernel.geos.GeoCasCell;", 0x1, NULL, NULL },
    { "lookupCasRowReferenceWithNSString:", "lookupCasRowReference", "Lorg.geogebra.common.kernel.geos.GeoCasCell;", 0x1, "Lorg.geogebra.common.kernel.CASException;", NULL },
    { "lookupLabelWithNSString:withBoolean:", "lookupLabel", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement:", "checkConstructionStep", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x2, NULL, NULL },
    { "isFreeLabelWithNSString:", "isFreeLabel", "Z", 0x1, NULL, NULL },
    { "isFreeLabelWithNSString:withBoolean:withBoolean:", "isFreeLabel", "Z", 0x1, NULL, NULL },
    { "updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoElement:withOrgGeogebraCommonKernelGeosGeoElement:", "updateConstructionOrder", "V", 0x2, NULL, NULL },
    { "updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoCasCell:", "updateConstructionOrder", "Z", 0x4, NULL, NULL },
    { "prepareReplaceWithOrgGeogebraCommonKernelGeosGeoElement:withOrgGeogebraCommonKernelGeosGeoElement:", "prepareReplace", "V", 0x4, NULL, NULL },
    { "addToGeoSetWithCasCellsWithOrgGeogebraCommonKernelGeosGeoCasCell:", "addToGeoSetWithCasCells", "V", 0x1, NULL, NULL },
    { "removeFromGeoSetWithCasCellsWithOrgGeogebraCommonKernelGeosGeoCasCell:", "removeFromGeoSetWithCasCells", "V", 0x1, NULL, NULL },
    { "createSpreadsheetGeoElementWithOrgGeogebraCommonKernelGeosGeoElement:withNSString:", "createSpreadsheetGeoElement", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x11, NULL, NULL },
    { "getIndexLabelWithNSString:withInt:", "getIndexLabel", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "getIndexLabelWithNSString:", "getIndexLabel", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "autoCreateGeoElementWithNSString:", "autoCreateGeoElement", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x4, NULL, NULL },
    { "distanceOrProductWithNSString:withNSString:", "distanceOrProduct", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x2, NULL, NULL },
    { "initGeoTables", NULL, "V", 0x4, NULL, NULL },
    { "getGeoSetNameDescriptionOrder", NULL, "Ljava.util.TreeSet;", 0x11, NULL, NULL },
    { "getExtremumFinder", NULL, "Lorg.geogebra.common.kernel.optimization.ExtremumFinder;", 0x1, NULL, NULL },
    { "storeUndoInfo", NULL, "V", 0x1, NULL, NULL },
    { "restoreCurrentUndoInfo", NULL, "V", 0x1, NULL, NULL },
    { "redo", NULL, "V", 0x1, NULL, NULL },
    { "undo", NULL, "V", 0x1, NULL, NULL },
    { "undoPossible", NULL, "Z", 0x1, NULL, NULL },
    { "redoPossible", NULL, "Z", 0x1, NULL, NULL },
    { "addUsedMacroWithOrgGeogebraCommonKernelMacro:", "addUsedMacro", "V", 0x11, NULL, NULL },
    { "getUsedMacros", NULL, "Ljava.util.ArrayList;", 0x1, NULL, NULL },
    { "clearConstruction", NULL, "V", 0x1, NULL, NULL },
    { "getCurrentUndoXMLWithBoolean:", "getCurrentUndoXML", "Ljava.lang.StringBuilder;", 0x1, NULL, NULL },
    { "getXMLio", NULL, "Lorg.geogebra.common.io.MyXMLio;", 0x1, NULL, NULL },
    { "initUndoInfo", NULL, "V", 0x1, NULL, NULL },
    { "buildConstructionWithJavaLangStringBuilder:", "buildConstruction", "V", 0x2, "Ljava.lang.Exception;", NULL },
    { "getUndoManager", NULL, "Lorg.geogebra.common.kernel.UndoManager;", 0x1, NULL, NULL },
    { "setOutputGeoWithNSString:", "setOutputGeo", "V", 0x1, NULL, NULL },
    { "getOutputGeo", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "registerFunctionVariableWithNSString:", "registerFunctionVariable", "V", 0x1, NULL, NULL },
    { "isRegistredFunctionVariableWithNSString:", "isRegistredFunctionVariable", "Z", 0x1, NULL, NULL },
    { "getRegisteredFunctionVariable", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "setFileLoadingWithBoolean:", "setFileLoading", "V", 0x1, NULL, NULL },
    { "isFileLoading", NULL, "Z", 0x1, NULL, NULL },
    { "isUpdateConstructionRunning", NULL, "Z", 0x1, NULL, NULL },
    { "getCASdummies", NULL, "Ljava.util.TreeSet;", 0x1, NULL, NULL },
    { "setAlgoSetCurrentlyUpdatedWithOrgGeogebraCommonKernelAlgosAlgorithmSet:", "setAlgoSetCurrentlyUpdated", "V", 0x1, NULL, NULL },
    { "getAlgoSetCurrentlyUpdated", NULL, "Lorg.geogebra.common.kernel.algos.AlgorithmSet;", 0x1, NULL, NULL },
    { "setUpdateConstructionRunningWithBoolean:", "setUpdateConstructionRunning", "V", 0x1, NULL, NULL },
    { "getAllGeoLabels", NULL, "Ljava.util.Set;", 0x1, NULL, NULL },
    { "getAllLabels", NULL, "Ljava.util.Set;", 0x1, NULL, NULL },
    { "hasSpreadsheetTracingGeos", NULL, "Z", 0x1, NULL, NULL },
    { "addTracingGeo", NULL, "V", 0x1, NULL, NULL },
    { "setAllowUnboundedAnglesWithBoolean:", "setAllowUnboundedAngles", "V", 0x1, NULL, NULL },
    { "isAllowUnboundedAngles", NULL, "Z", 0x1, NULL, NULL },
    { "addCASAlgoWithOrgGeogebraCommonKernelAlgosAlgoElement:", "addCASAlgo", "V", 0x1, NULL, NULL },
    { "recomputeCASalgos", NULL, "V", 0x1, NULL, NULL },
    { "updateConstructionLanguage", NULL, "V", 0x1, NULL, NULL },
    { "updateConstructionLaTeX", NULL, "V", 0x1, NULL, NULL },
    { "registerCorner5WithOrgGeogebraCommonKernelEuclidianViewCE:", "registerCorner5", "V", 0x1, NULL, NULL },
    { "getRegisteredFunctionVariables", NULL, "[Ljava.lang.String;", 0x1, NULL, NULL },
    { "addLaTeXGeoWithOrgGeogebraCommonKernelGeosGeoElement:", "addLaTeXGeo", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "constsM_", NULL, 0x1, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/Integer;Lorg/geogebra/common/kernel/geos/GeoNumeric;>;",  },
    { "intsM_", NULL, 0x1, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/Integer;Lorg/geogebra/common/kernel/geos/GeoNumeric;>;",  },
    { "complexNumbersM_", NULL, 0x1, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/Integer;Lorg/geogebra/common/kernel/geos/GeoNumeric;>;",  },
    { "usedGeos_", NULL, 0x1, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lorg/geogebra/common/plugin/GeoClass;>;",  },
    { "usedMacros_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/Macro;>;",  },
    { "undoManager_", NULL, 0x4, "Lorg.geogebra.common.kernel.UndoManager;", NULL, NULL,  },
    { "consDefaults_", NULL, 0x4, "Lorg.geogebra.common.kernel.ConstructionDefaults;", NULL, NULL,  },
    { "title_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "author_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "date_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "worksheetText_", NULL, 0x2, "[Ljava.lang.String;", NULL, NULL,  },
    { "showOnlyBreakpoints__", "showOnlyBreakpoints", 0x2, "Z", NULL, NULL,  },
    { "kernel_", NULL, 0x4, "Lorg.geogebra.common.kernel.Kernel;", NULL, NULL,  },
    { "step_", NULL, 0x2, "I", NULL, NULL,  },
    { "supressLabelCreation_", NULL, 0x2, "Z", NULL, NULL,  },
    { "geoSetsTypeMap_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Lorg/geogebra/common/plugin/GeoClass;Ljava/util/TreeSet<Lorg/geogebra/common/kernel/geos/GeoElement;>;>;",  },
    { "ceList_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/algos/ConstructionElement;>;",  },
    { "algoList_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/algos/AlgoElement;>;",  },
    { "geoTable_", NULL, 0x4, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/String;Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "euclidianViewCE_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/EuclidianViewCE;>;",  },
    { "corner5Algos_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/EuclidianViewCE;>;",  },
    { "localVariableTable_", NULL, 0x4, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/String;Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "geoSetConsOrder_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "geoSetLabelOrder_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "geoSetWithCasCells_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "randomElements_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "geoCasCellTable_", NULL, 0x4, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/String;Lorg/geogebra/common/kernel/geos/GeoCasCell;>;",  },
    { "collectRedefineCalls_", NULL, 0x2, "Z", NULL, NULL,  },
    { "redefineMap_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Lorg/geogebra/common/kernel/geos/GeoElement;Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "keepGeo_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "latexGeos_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "xAxis_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoAxis;", NULL, NULL,  },
    { "yAxis_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoAxis;", NULL, NULL,  },
    { "xAxisLocalName_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "yAxisLocalName_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "origin_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "undoEnabled_", NULL, 0x2, "Z", NULL, NULL,  },
    { "isGettingXMLForReplace__", "isGettingXMLForReplace", 0x2, "Z", NULL, NULL,  },
    { "isRemovingGeoToReplaceIt__", "isRemovingGeoToReplaceIt", 0x2, "Z", NULL, NULL,  },
    { "xmlio_", NULL, 0x2, "Lorg.geogebra.common.io.MyXMLio;", NULL, NULL,  },
    { "outputGeo_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "registredFV_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Ljava/lang/String;>;",  },
    { "fileLoading_", NULL, 0x2, "Z", NULL, NULL,  },
    { "updateConstructionRunning_", NULL, 0x2, "Z", NULL, NULL,  },
    { "casDummies_", NULL, 0x12, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Ljava/lang/String;>;",  },
    { "algoSetCurrentlyUpdated_", NULL, 0x2, "Lorg.geogebra.common.kernel.algos.AlgorithmSet;", NULL, NULL,  },
    { "spreadsheetTraces_", NULL, 0x2, "Z", NULL, NULL,  },
    { "allowUnboundedAngles_", NULL, 0x2, "Z", NULL, NULL,  },
    { "casAlgos_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/algos/AlgoElement;>;",  },
  };
  static const char *inner_classes[] = {"Lorg.geogebra.common.kernel.Construction$Constants;", "Lorg.geogebra.common.kernel.Construction$LabelComparator;"};
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelConstruction = { 2, "Construction", "org.geogebra.common.kernel", NULL, 0x1, 145, methods, 49, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_OrgGeogebraCommonKernelConstruction;
}

@end

void OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelKernel *k) {
  OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelConstruction_(self, k, nil);
}

OrgGeogebraCommonKernelConstruction *new_OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_(OrgGeogebraCommonKernelKernel *k) {
  OrgGeogebraCommonKernelConstruction *self = [OrgGeogebraCommonKernelConstruction alloc];
  OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_(self, k);
  return self;
}

void OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelKernel *k, OrgGeogebraCommonKernelConstruction *parentConstruction) {
  NSObject_init(self);
  OrgGeogebraCommonKernelConstruction_setAndConsume_constsM_(self, new_JavaUtilTreeMap_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_intsM_(self, new_JavaUtilTreeMap_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_complexNumbersM_(self, new_JavaUtilTreeMap_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_usedGeos_(self, new_JavaUtilTreeSet_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_worksheetText_(self, [IOSObjectArray newArrayWithLength:2 type:NSString_class_()]);
  self->supressLabelCreation_ = NO;
  self->collectRedefineCalls_ = NO;
  self->undoEnabled_ = YES;
  self->isRemovingGeoToReplaceIt__ = NO;
  OrgGeogebraCommonKernelConstruction_setAndConsume_registredFV_(self, new_JavaUtilTreeSet_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_casDummies_(self, new_JavaUtilTreeSet_init());
  self->allowUnboundedAngles_ = YES;
  OrgGeogebraCommonKernelConstruction_setAndConsume_casAlgos_(self, new_JavaUtilArrayList_init());
  OrgGeogebraCommonKernelConstruction_set_kernel_(self, k);
  OrgGeogebraCommonKernelConstruction_setAndConsume_ceList_(self, new_JavaUtilArrayList_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_algoList_(self, new_JavaUtilArrayList_init());
  self->step_ = -1;
  OrgGeogebraCommonKernelConstruction_setAndConsume_geoSetConsOrder_(self, new_JavaUtilTreeSet_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_geoSetWithCasCells_(self, new_JavaUtilTreeSet_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_geoSetLabelOrder_(self, new_JavaUtilTreeSet_initWithJavaUtilComparator_([new_OrgGeogebraCommonKernelConstruction_LabelComparator_initWithOrgGeogebraCommonKernelConstruction_(self) autorelease]));
  OrgGeogebraCommonKernelConstruction_setAndConsume_geoSetsTypeMap_(self, new_JavaUtilHashMap_init());
  OrgGeogebraCommonKernelConstruction_setAndConsume_euclidianViewCE_(self, new_JavaUtilArrayList_init());
  if (parentConstruction != nil) OrgGeogebraCommonKernelConstruction_set_consDefaults_(self, OrgGeogebraCommonKernelConstruction_getConstructionDefaults(parentConstruction));
  else [self newConstructionDefaults];
  [self initAxis];
  OrgGeogebraCommonKernelConstruction_setAndConsume_geoTable_(self, new_JavaUtilHashMap_initWithInt_(200));
  [self initGeoTables];
}

OrgGeogebraCommonKernelConstruction *new_OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonKernelKernel *k, OrgGeogebraCommonKernelConstruction *parentConstruction) {
  OrgGeogebraCommonKernelConstruction *self = [OrgGeogebraCommonKernelConstruction alloc];
  OrgGeogebraCommonKernelConstruction_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelConstruction_(self, k, parentConstruction);
  return self;
}

OrgGeogebraCommonKernelConstructionDefaults *OrgGeogebraCommonKernelConstruction_getConstructionDefaults(OrgGeogebraCommonKernelConstruction *self) {
  return self->consDefaults_;
}

jboolean OrgGeogebraCommonKernelConstruction_updateAllConstructionProtocolAlgorithms(OrgGeogebraCommonKernelConstruction *self) {
  jint size = [((JavaUtilArrayList *) nil_chk(self->algoList_)) size];
  JavaUtilArrayList *updateAlgos = nil;
  for (jint i = 0; i < size; ++i) {
    OrgGeogebraCommonKernelAlgosAlgoElement *algo = [self->algoList_ getWithInt:i];
    if ([((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) wantsConstructionProtocolUpdate]) {
      if (updateAlgos == nil) updateAlgos = [new_JavaUtilArrayList_init() autorelease];
      [((JavaUtilArrayList *) nil_chk(updateAlgos)) addWithId:algo];
    }
  }
  if (updateAlgos != nil) {
    OrgGeogebraCommonKernelAlgosAlgoElement_updateCascadeAlgosWithJavaUtilArrayList_(updateAlgos);
  }
  if (updateAlgos != nil) {
    OrgGeogebraCommonMainApp *app = [((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getApplication];
    if ([((OrgGeogebraCommonMainApp *) nil_chk(app)) isUsingFullGui] && [app getGuiManager] != nil) [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app getGuiManager])) updateConstructionProtocol];
  }
  return updateAlgos != nil;
}

void OrgGeogebraCommonKernelConstruction_updateAllFreeRandomGeosNoCascade(OrgGeogebraCommonKernelConstruction *self) {
  if (self->randomElements_ == nil) return;
  id<JavaUtilIterator> it = [((JavaUtilTreeSet *) nil_chk(self->randomElements_)) iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    OrgGeogebraCommonKernelGeosGeoElement *num = [it next];
    if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(num)) isGeoNumeric] && [num getParentAlgorithm] == nil) {
      OrgGeogebraCommonKernelGeosGeoNumeric *number = (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(num, [OrgGeogebraCommonKernelGeosGeoNumeric class]);
      [number updateRandomNoCascade];
      [number update];
    }
  }
}

void OrgGeogebraCommonKernelConstruction_addToGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelGeosGeoElement *geo) {
  [((JavaUtilTreeSet *) nil_chk(self->geoSetConsOrder_)) addWithId:geo];
  [((JavaUtilTreeSet *) nil_chk(self->geoSetWithCasCells_)) addWithId:geo];
  [((JavaUtilTreeSet *) nil_chk(self->geoSetLabelOrder_)) addWithId:geo];
  OrgGeogebraCommonPluginGeoClassEnum *type = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getGeoClassType];
  JavaUtilTreeSet *typeSet = [((JavaUtilHashMap *) nil_chk(self->geoSetsTypeMap_)) getWithId:type];
  if (typeSet == nil) {
    typeSet = OrgGeogebraCommonKernelConstruction_createTypeSetWithOrgGeogebraCommonPluginGeoClassEnum_(self, type);
  }
  [((JavaUtilTreeSet *) nil_chk(typeSet)) addWithId:geo];
}

JavaUtilTreeSet *OrgGeogebraCommonKernelConstruction_createTypeSetWithOrgGeogebraCommonPluginGeoClassEnum_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonPluginGeoClassEnum *type) {
  JavaUtilTreeSet *typeSet = [new_JavaUtilTreeSet_initWithJavaUtilComparator_([new_OrgGeogebraCommonKernelConstruction_LabelComparator_initWithOrgGeogebraCommonKernelConstruction_(self) autorelease]) autorelease];
  [((JavaUtilHashMap *) nil_chk(self->geoSetsTypeMap_)) putWithId:type withId:typeSet];
  return typeSet;
}

void OrgGeogebraCommonKernelConstruction_removeFromGeoSetsWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelGeosGeoElement *geo) {
  [((JavaUtilTreeSet *) nil_chk(self->geoSetConsOrder_)) removeWithId:geo];
  [((JavaUtilTreeSet *) nil_chk(self->geoSetWithCasCells_)) removeWithId:geo];
  [((JavaUtilTreeSet *) nil_chk(self->geoSetLabelOrder_)) removeWithId:geo];
  OrgGeogebraCommonPluginGeoClassEnum *type = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getGeoClassType];
  JavaUtilTreeSet *typeSet = [((JavaUtilHashMap *) nil_chk(self->geoSetsTypeMap_)) getWithId:type];
  if (typeSet != nil) [typeSet removeWithId:geo];
}

OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonKernelConstruction_checkConstructionStepWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelGeosGeoElement *geo) {
  if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isAvailableAtConstructionStepWithInt:self->step_]) {
    return geo;
  }
  return nil;
}

void OrgGeogebraCommonKernelConstruction_updateConstructionOrderWithOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelConstruction *self, OrgGeogebraCommonKernelGeosGeoElement *oldGeo, OrgGeogebraCommonKernelGeosGeoElement *newGeo) {
  JavaUtilTreeSet *predSet = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(newGeo)) getAllPredecessors];
  jint maxPredIndex = [newGeo getConstructionIndex];
  for (OrgGeogebraCommonKernelGeosGeoElement * __strong pred in nil_chk(predSet)) {
    jint predIndex = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(pred)) getConstructionIndex];
    if (predIndex > maxPredIndex) maxPredIndex = predIndex;
  }
  if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(oldGeo)) getConstructionIndex] > maxPredIndex) return;
  for (OrgGeogebraCommonKernelGeosGeoElement * __strong pred in predSet) {
    [self moveInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:pred withInt:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(pred)) getMinConstructionIndex]];
  }
  [self moveInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:newGeo withInt:[newGeo getMinConstructionIndex]];
  [self moveInConstructionListWithOrgGeogebraCommonKernelGeosGeoElement:oldGeo withInt:[oldGeo getMaxConstructionIndex]];
}

OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonKernelConstruction_distanceOrProductWithNSString_withNSString_(OrgGeogebraCommonKernelConstruction *self, NSString *string, NSString *string2) {
  OrgGeogebraCommonKernelGeosGeoElement *geo1 = [((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) lookupLabelWithNSString:string];
  if (geo1 != nil && [geo1 isGeoPoint]) {
    OrgGeogebraCommonKernelGeosGeoElement *geo2 = [self->kernel_ lookupLabelWithNSString:string2];
    if (geo2 != nil && [geo2 isGeoPoint]) {
      OrgGeogebraCommonKernelAlgosAlgoDistancePoints *dist = [new_OrgGeogebraCommonKernelAlgosAlgoDistancePoints_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelKernelNDGeoPointND_withOrgGeogebraCommonKernelKernelNDGeoPointND_(self, nil, (id<OrgGeogebraCommonKernelKernelNDGeoPointND>) check_protocol_cast(geo1, @protocol(OrgGeogebraCommonKernelKernelNDGeoPointND)), (id<OrgGeogebraCommonKernelKernelNDGeoPointND>) check_protocol_cast(geo2, @protocol(OrgGeogebraCommonKernelKernelNDGeoPointND))) autorelease];
      return [dist getDistance];
    }
  }
  else if (geo1 != nil && [OrgGeogebraCommonKernelArithmeticNumberValue_class_() isInstance:geo1]) {
    OrgGeogebraCommonKernelGeosGeoElement *geo2 = [self->kernel_ lookupLabelWithNSString:string2];
    if (geo2 != nil && [OrgGeogebraCommonKernelArithmeticNumberValue_class_() isInstance:geo2]) {
      OrgGeogebraCommonKernelArithmeticExpressionNode *node = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(self->kernel_, geo1, OrgGeogebraCommonPluginOperationEnum_get_MULTIPLY(), geo2) autorelease];
      OrgGeogebraCommonKernelAlgosAlgoDependentNumber *algo = [new_OrgGeogebraCommonKernelAlgosAlgoDependentNumber_initWithOrgGeogebraCommonKernelConstruction_withNSString_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(self, nil, node, NO) autorelease];
      return [algo getNumber];
    }
  }
  return nil;
}

void OrgGeogebraCommonKernelConstruction_buildConstructionWithJavaLangStringBuilder_(OrgGeogebraCommonKernelConstruction *self, JavaLangStringBuilder *consXML) {
  @try {
    if (self->undoManager_ == nil) OrgGeogebraCommonKernelConstruction_set_undoManager_(self, [((OrgGeogebraCommonMainApp *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getApplication])) getUndoManagerWithOrgGeogebraCommonKernelConstruction:self]);
    [((OrgGeogebraCommonKernelUndoManager *) nil_chk(self->undoManager_)) processXMLWithNSString:[((JavaLangStringBuilder *) nil_chk(consXML)) description]];
    [((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) notifyReset];
  }
  @catch (JavaLangException *e) {
    [self restoreCurrentUndoInfo];
    @throw e;
  }
  @catch (OrgGeogebraCommonMainMyError *err) {
    [self restoreCurrentUndoInfo];
    @throw err;
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelConstruction)

J2OBJC_INITIALIZED_DEFN(OrgGeogebraCommonKernelConstruction_ConstantsEnum)

OrgGeogebraCommonKernelConstruction_ConstantsEnum *OrgGeogebraCommonKernelConstruction_ConstantsEnum_values_[6];

@implementation OrgGeogebraCommonKernelConstruction_ConstantsEnum

- (instancetype)initWithNSString:(NSString *)__name
                         withInt:(jint)__ordinal {
  OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(self, __name, __ordinal);
  return self;
}

IOSObjectArray *OrgGeogebraCommonKernelConstruction_ConstantsEnum_values() {
  OrgGeogebraCommonKernelConstruction_ConstantsEnum_initialize();
  return [IOSObjectArray arrayWithObjects:OrgGeogebraCommonKernelConstruction_ConstantsEnum_values_ count:6 type:OrgGeogebraCommonKernelConstruction_ConstantsEnum_class_()];
}

+ (IOSObjectArray *)values {
  return OrgGeogebraCommonKernelConstruction_ConstantsEnum_values();
}

+ (OrgGeogebraCommonKernelConstruction_ConstantsEnum *)valueOfWithNSString:(NSString *)name {
  return OrgGeogebraCommonKernelConstruction_ConstantsEnum_valueOfWithNSString_(name);
}

OrgGeogebraCommonKernelConstruction_ConstantsEnum *OrgGeogebraCommonKernelConstruction_ConstantsEnum_valueOfWithNSString_(NSString *name) {
  OrgGeogebraCommonKernelConstruction_ConstantsEnum_initialize();
  for (int i = 0; i < 6; i++) {
    OrgGeogebraCommonKernelConstruction_ConstantsEnum *e = OrgGeogebraCommonKernelConstruction_ConstantsEnum_values_[i];
    if ([name isEqual:[e name]]) {
      return e;
    }
  }
  @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:name] autorelease];
  return nil;
}

- (id)copyWithZone:(NSZone *)zone {
  return [self retain];
}

+ (void)initialize {
  if (self == [OrgGeogebraCommonKernelConstruction_ConstantsEnum class]) {
    OrgGeogebraCommonKernelConstruction_ConstantsEnum_NOT = new_OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(@"NOT", 0);
    OrgGeogebraCommonKernelConstruction_ConstantsEnum_X_AXIS = new_OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(@"X_AXIS", 1);
    OrgGeogebraCommonKernelConstruction_ConstantsEnum_Y_AXIS = new_OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(@"Y_AXIS", 2);
    OrgGeogebraCommonKernelConstruction_ConstantsEnum_Z_AXIS = new_OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(@"Z_AXIS", 3);
    OrgGeogebraCommonKernelConstruction_ConstantsEnum_XOY_PLANE = new_OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(@"XOY_PLANE", 4);
    OrgGeogebraCommonKernelConstruction_ConstantsEnum_SPACE = new_OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(@"SPACE", 5);
    J2OBJC_SET_INITIALIZED(OrgGeogebraCommonKernelConstruction_ConstantsEnum)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcFieldInfo fields[] = {
    { "NOT", "NOT", 0x4019, "Lorg.geogebra.common.kernel.Construction$Constants;", &OrgGeogebraCommonKernelConstruction_ConstantsEnum_NOT, NULL,  },
    { "X_AXIS", "X_AXIS", 0x4019, "Lorg.geogebra.common.kernel.Construction$Constants;", &OrgGeogebraCommonKernelConstruction_ConstantsEnum_X_AXIS, NULL,  },
    { "Y_AXIS", "Y_AXIS", 0x4019, "Lorg.geogebra.common.kernel.Construction$Constants;", &OrgGeogebraCommonKernelConstruction_ConstantsEnum_Y_AXIS, NULL,  },
    { "Z_AXIS", "Z_AXIS", 0x4019, "Lorg.geogebra.common.kernel.Construction$Constants;", &OrgGeogebraCommonKernelConstruction_ConstantsEnum_Z_AXIS, NULL,  },
    { "XOY_PLANE", "XOY_PLANE", 0x4019, "Lorg.geogebra.common.kernel.Construction$Constants;", &OrgGeogebraCommonKernelConstruction_ConstantsEnum_XOY_PLANE, NULL,  },
    { "SPACE", "SPACE", 0x4019, "Lorg.geogebra.common.kernel.Construction$Constants;", &OrgGeogebraCommonKernelConstruction_ConstantsEnum_SPACE, NULL,  },
  };
  static const char *superclass_type_args[] = {"Lorg.geogebra.common.kernel.Construction$Constants;"};
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelConstruction_ConstantsEnum = { 2, "Constants", "org.geogebra.common.kernel", "Construction", 0x4019, 0, NULL, 6, fields, 1, superclass_type_args, 0, NULL, NULL, "Ljava/lang/Enum<Lorg/geogebra/common/kernel/Construction$Constants;>;" };
  return &_OrgGeogebraCommonKernelConstruction_ConstantsEnum;
}

@end

void OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(OrgGeogebraCommonKernelConstruction_ConstantsEnum *self, NSString *__name, jint __ordinal) {
  JavaLangEnum_initWithNSString_withInt_(self, __name, __ordinal);
}

OrgGeogebraCommonKernelConstruction_ConstantsEnum *new_OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(NSString *__name, jint __ordinal) {
  OrgGeogebraCommonKernelConstruction_ConstantsEnum *self = [OrgGeogebraCommonKernelConstruction_ConstantsEnum alloc];
  OrgGeogebraCommonKernelConstruction_ConstantsEnum_initWithNSString_withInt_(self, __name, __ordinal);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelConstruction_ConstantsEnum)

@implementation OrgGeogebraCommonKernelConstruction_LabelComparator

- (jint)compareWithId:(OrgGeogebraCommonKernelGeosGeoElement *)ob1
               withId:(OrgGeogebraCommonKernelGeosGeoElement *)ob2 {
  OrgGeogebraCommonKernelGeosGeoElement *geo1 = ob1;
  OrgGeogebraCommonKernelGeosGeoElement *geo2 = ob2;
  return OrgGeogebraCommonKernelGeosGeoElement_compareLabelsWithNSString_withNSString_([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo1)) getLabelSimple], [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo2)) getLabelSimple]);
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)outer$ {
  OrgGeogebraCommonKernelConstruction_LabelComparator_initWithOrgGeogebraCommonKernelConstruction_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "compareWithId:withId:", "compare", "I", 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:", "init", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelConstruction_LabelComparator = { 2, "LabelComparator", "org.geogebra.common.kernel", "Construction", 0x1, 2, methods, 0, NULL, 0, NULL, 0, NULL, NULL, "Ljava/lang/Object;Ljava/util/Comparator<Lorg/geogebra/common/kernel/geos/GeoElement;>;" };
  return &_OrgGeogebraCommonKernelConstruction_LabelComparator;
}

@end

void OrgGeogebraCommonKernelConstruction_LabelComparator_initWithOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonKernelConstruction_LabelComparator *self, OrgGeogebraCommonKernelConstruction *outer$) {
  NSObject_init(self);
}

OrgGeogebraCommonKernelConstruction_LabelComparator *new_OrgGeogebraCommonKernelConstruction_LabelComparator_initWithOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonKernelConstruction *outer$) {
  OrgGeogebraCommonKernelConstruction_LabelComparator *self = [OrgGeogebraCommonKernelConstruction_LabelComparator alloc];
  OrgGeogebraCommonKernelConstruction_LabelComparator_initWithOrgGeogebraCommonKernelConstruction_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelConstruction_LabelComparator)
