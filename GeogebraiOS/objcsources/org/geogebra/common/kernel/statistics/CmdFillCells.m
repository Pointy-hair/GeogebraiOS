//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/javasources/org/geogebra/common/kernel/statistics/CmdFillCells.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "com/google/gwt/regexp/shared/MatchResult.h"
#include "com/google/gwt/regexp/shared/RegExp.h"
#include "java/lang/Exception.h"
#include "java/lang/Math.h"
#include "java/util/ArrayList.h"
#include "org/geogebra/common/awt/GPoint.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/MyPoint.h"
#include "org/geogebra/common/kernel/StringTemplate.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/arithmetic/Command.h"
#include "org/geogebra/common/kernel/commands/CommandProcessor.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoElementSpreadsheet.h"
#include "org/geogebra/common/kernel/geos/GeoList.h"
#include "org/geogebra/common/kernel/geos/GeoLocus.h"
#include "org/geogebra/common/kernel/geos/GeoNumeric.h"
#include "org/geogebra/common/kernel/statistics/AlgoCellRange.h"
#include "org/geogebra/common/kernel/statistics/CmdFillCells.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/main/MyError.h"

@interface OrgGeogebraCommonKernelStatisticsCmdFillCells ()

- (void)removePossibleGeoWithNSString:(NSString *)label;

@end

__attribute__((unused)) static void OrgGeogebraCommonKernelStatisticsCmdFillCells_removePossibleGeoWithNSString_(OrgGeogebraCommonKernelStatisticsCmdFillCells *self, NSString *label);

@implementation OrgGeogebraCommonKernelStatisticsCmdFillCells

- (instancetype)initWithOrgGeogebraCommonKernelKernel:(OrgGeogebraCommonKernelKernel *)kernel {
  OrgGeogebraCommonKernelStatisticsCmdFillCells_initWithOrgGeogebraCommonKernelKernel_(self, kernel);
  return self;
}

- (IOSObjectArray *)processWithOrgGeogebraCommonKernelArithmeticCommand:(OrgGeogebraCommonKernelArithmeticCommand *)c {
  jint n = [((OrgGeogebraCommonKernelArithmeticCommand *) nil_chk(c)) getArgumentNumber];
  IOSObjectArray *arg;
  {
    IOSObjectArray *ret;
    switch (n) {
      case 2:
      [((OrgGeogebraCommonMainApp *) nil_chk(app_)) setScrollToShowWithBoolean:NO];
      arg = [self resArgsWithOrgGeogebraCommonKernelArithmeticCommand:c];
      if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(nil_chk(arg), 0))) isGeoList]) {
        OrgGeogebraCommonKernelGeosGeoList *cellRange = (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(arg, 0), [OrgGeogebraCommonKernelGeosGeoList class]);
        if (!([[((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(cellRange)) getParentAlgorithm] isKindOfClass:[OrgGeogebraCommonKernelStatisticsAlgoCellRange class]])) {
          OrgGeogebraCommonMainApp_debugWithNSString_(@"not cell range");
          @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 0)];
        }
        OrgGeogebraCommonKernelStatisticsAlgoCellRange *algo = (OrgGeogebraCommonKernelStatisticsAlgoCellRange *) check_class_cast([cellRange getParentAlgorithm], [OrgGeogebraCommonKernelStatisticsAlgoCellRange class]);
        IOSObjectArray *points = [((OrgGeogebraCommonKernelStatisticsAlgoCellRange *) nil_chk(algo)) getRectangle];
        OrgGeogebraCommonAwtGPoint *startCoords = IOSObjectArray_Get(nil_chk(points), 0);
        OrgGeogebraCommonAwtGPoint *endCoords = IOSObjectArray_Get(points, 1);
        jint minCol = JavaLangMath_minWithInt_withInt_(((OrgGeogebraCommonAwtGPoint *) nil_chk(startCoords))->x_, ((OrgGeogebraCommonAwtGPoint *) nil_chk(endCoords))->x_);
        jint maxCol = JavaLangMath_maxWithInt_withInt_(startCoords->x_, endCoords->x_);
        jint minRow = JavaLangMath_minWithInt_withInt_(startCoords->y_, endCoords->y_);
        jint maxRow = JavaLangMath_maxWithInt_withInt_(startCoords->y_, endCoords->y_);
        OrgGeogebraCommonKernelGeosGeoElement *geo = IOSObjectArray_Get(arg, 1);
        IOSObjectArray *ret = [IOSObjectArray arrayWithObjects:(id[]){  } count:0 type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
        if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoLocus]) {
          if (![geo isDefined]) @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 1)];
          if (minCol + 1 != maxCol) @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 0)];
          OrgGeogebraCommonKernelGeosGeoLocus *locus = (OrgGeogebraCommonKernelGeosGeoLocus *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoLocus class]);
          JavaUtilArrayList *al = [locus getPoints];
          jint length = JavaLangMath_minWithInt_withInt_([((JavaUtilArrayList *) nil_chk(al)) size], maxRow - minRow);
          for (jint i = 0; i < length; i++) {
            jint row = i + minRow;
            @try {
              OrgGeogebraCommonKernelStatisticsCmdFillCells_removePossibleGeoWithNSString_(self, OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_getSpreadsheetCellNameWithInt_withInt_(minCol, row));
              OrgGeogebraCommonKernelStatisticsCmdFillCells_removePossibleGeoWithNSString_(self, OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_getSpreadsheetCellNameWithInt_withInt_(minCol + 1, row));
              OrgGeogebraCommonKernelMyPoint *p = [al getWithInt:i];
              [((OrgGeogebraCommonKernelGeosGeoElementSpreadsheet *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernelA_)) getGeoElementSpreadsheet])) setSpreadsheetCellWithOrgGeogebraCommonMainApp:app_ withInt:row withInt:minCol withOrgGeogebraCommonKernelGeosGeoElement:[new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, ((OrgGeogebraCommonKernelMyPoint *) nil_chk(p))->x_) autorelease]];
              [((OrgGeogebraCommonKernelGeosGeoElementSpreadsheet *) nil_chk([kernelA_ getGeoElementSpreadsheet])) setSpreadsheetCellWithOrgGeogebraCommonMainApp:app_ withInt:row withInt:minCol + 1 withOrgGeogebraCommonKernelGeosGeoElement:[new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, p->y_) autorelease]];
            }
            @catch (JavaLangException *e) {
              [((JavaLangException *) nil_chk(e)) printStackTrace];
              [app_ setScrollToShowWithBoolean:YES];
              @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 1)];
            }
          }
          [app_ setScrollToShowWithBoolean:YES];
          return ret;
        }
        if (![geo isGeoList]) {
          for (jint row = minRow; row <= maxRow; row++) for (jint col = minCol; col <= maxCol; col++) {
            @try {
              OrgGeogebraCommonKernelStatisticsCmdFillCells_removePossibleGeoWithNSString_(self, OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_getSpreadsheetCellNameWithInt_withInt_(col, row));
              [((OrgGeogebraCommonKernelGeosGeoElementSpreadsheet *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernelA_)) getGeoElementSpreadsheet])) setSpreadsheetCellWithOrgGeogebraCommonMainApp:app_ withInt:row withInt:col withOrgGeogebraCommonKernelGeosGeoElement:geo];
            }
            @catch (JavaLangException *e) {
              [app_ setScrollToShowWithBoolean:YES];
              [((JavaLangException *) nil_chk(e)) printStackTrace];
              @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 1)];
            }
          }
          [app_ setScrollToShowWithBoolean:YES];
          return ret;
        }
        OrgGeogebraCommonKernelGeosGeoList *list = (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoList class]);
        if ([list isMatrix]) {
          jint countX = 0;
          for (jint row = minRow; row <= maxRow; row++) {
            OrgGeogebraCommonKernelGeosGeoList *rowList = (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast([list getWithInt:countX % [list size]], [OrgGeogebraCommonKernelGeosGeoList class]);
            countX++;
            jint countY = 0;
            for (jint col = minCol; col <= maxCol; col++) {
              @try {
                OrgGeogebraCommonKernelStatisticsCmdFillCells_removePossibleGeoWithNSString_(self, OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_getSpreadsheetCellNameWithInt_withInt_(col, row));
                [((OrgGeogebraCommonKernelGeosGeoElementSpreadsheet *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernelA_)) getGeoElementSpreadsheet])) setSpreadsheetCellWithOrgGeogebraCommonMainApp:app_ withInt:row withInt:col withOrgGeogebraCommonKernelGeosGeoElement:[rowList getWithInt:countY % [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(rowList)) size]]];
                countY++;
              }
              @catch (JavaLangException *e) {
                [app_ setScrollToShowWithBoolean:YES];
                [((JavaLangException *) nil_chk(e)) printStackTrace];
                @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 1)];
              }
            }
          }
        }
        else {
          jint count = 0;
          for (jint row = minRow; row <= maxRow; row++) for (jint col = minCol; col <= maxCol; col++) {
            @try {
              OrgGeogebraCommonKernelStatisticsCmdFillCells_removePossibleGeoWithNSString_(self, OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_getSpreadsheetCellNameWithInt_withInt_(col, row));
              [((OrgGeogebraCommonKernelGeosGeoElementSpreadsheet *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernelA_)) getGeoElementSpreadsheet])) setSpreadsheetCellWithOrgGeogebraCommonMainApp:app_ withInt:row withInt:col withOrgGeogebraCommonKernelGeosGeoElement:[list getWithInt:count % [list size]]];
              count++;
            }
            @catch (JavaLangException *e) {
              [app_ setScrollToShowWithBoolean:YES];
              [((JavaLangException *) nil_chk(e)) printStackTrace];
              @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 1)];
            }
          }
        }
        [app_ storeUndoInfo];
        [app_ setScrollToShowWithBoolean:YES];
        return ret;
      }
      {
        [((OrgGeogebraCommonKernelKernel *) nil_chk([app_ getKernel])) getGeoElementSpreadsheet];
        if (OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_hasSpreadsheetLabelWithOrgGeogebraCommonKernelGeosGeoElement_(IOSObjectArray_Get(arg, 0))) {
          if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(arg, 1))) isGeoList]) {
            [app_ setScrollToShowWithBoolean:YES];
            @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 1)];
          }
          OrgGeogebraCommonKernelGeosGeoList *list = (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(arg, 1), [OrgGeogebraCommonKernelGeosGeoList class]);
          ComGoogleGwtRegexpSharedMatchResult *matcher = [((ComGoogleGwtRegexpSharedRegExp *) nil_chk(OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_get_spreadsheetPattern_())) execWithNSString:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(arg, 0))) getLabelWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
          jint column = OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_getSpreadsheetColumnWithComGoogleGwtRegexpSharedMatchResult_(matcher);
          jint row = OrgGeogebraCommonKernelGeosGeoElementSpreadsheet_getSpreadsheetRowWithComGoogleGwtRegexpSharedMatchResult_(matcher);
          if (row == -1 || column == -1) {
            [app_ setScrollToShowWithBoolean:YES];
            @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 0)];
          }
          if ([((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(list)) isMatrix]) {
            if (IOSObjectArray_Get(arg, 0) != nil) {
              [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(arg, 0))) remove];
            }
            @try {
              jint rows = [list size];
              jint cols = [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(((OrgGeogebraCommonKernelGeosGeoList *) check_class_cast([list getWithInt:0], [OrgGeogebraCommonKernelGeosGeoList class])))) size];
              for (jint r = 0; r < rows; r++) {
                OrgGeogebraCommonKernelGeosGeoList *rowList = (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast([list getWithInt:r], [OrgGeogebraCommonKernelGeosGeoList class]);
                for (jint c1 = 0; c1 < cols; c1++) {
                  [((OrgGeogebraCommonKernelGeosGeoElementSpreadsheet *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernelA_)) getGeoElementSpreadsheet])) setSpreadsheetCellWithOrgGeogebraCommonMainApp:app_ withInt:row + r withInt:column + c1 withOrgGeogebraCommonKernelGeosGeoElement:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(rowList)) getWithInt:c1])) copy__]];
                }
              }
            }
            @catch (JavaLangException *e) {
              [app_ setScrollToShowWithBoolean:YES];
              @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:list];
            }
          }
          else {
            if (IOSObjectArray_Get(arg, 0) != nil) {
              [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(arg, 0))) remove];
            }
            for (jint i = [list size] - 1; i >= 0; i--) @try {
              [((OrgGeogebraCommonKernelGeosGeoElementSpreadsheet *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(kernelA_)) getGeoElementSpreadsheet])) setSpreadsheetCellWithOrgGeogebraCommonMainApp:app_ withInt:row withInt:column + i withOrgGeogebraCommonKernelGeosGeoElement:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([list getWithInt:i])) copy__]];
            }
            @catch (JavaLangException *e) {
              [((JavaLangException *) nil_chk(e)) printStackTrace];
              [app_ setScrollToShowWithBoolean:YES];
              @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 1)];
            }
          }
        }
        else {
          [app_ setScrollToShowWithBoolean:YES];
          @throw [self argErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withOrgGeogebraCommonKernelArithmeticExpressionValue:IOSObjectArray_Get(arg, 0)];
        }
      }
      ret = [IOSObjectArray arrayWithObjects:(id[]){  } count:0 type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
      [app_ storeUndoInfo];
      [app_ setScrollToShowWithBoolean:YES];
      return ret;
      default:
      @throw [self argNumErrWithOrgGeogebraCommonMainApp:app_ withNSString:[c getName] withInt:n];
    }
  }
}

- (void)removePossibleGeoWithNSString:(NSString *)label {
  OrgGeogebraCommonKernelStatisticsCmdFillCells_removePossibleGeoWithNSString_(self, label);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelKernel:", "CmdFillCells", NULL, 0x1, NULL, NULL },
    { "processWithOrgGeogebraCommonKernelArithmeticCommand:", "process", "[Lorg.geogebra.common.kernel.geos.GeoElement;", 0x11, "Lorg.geogebra.common.main.MyError;", NULL },
    { "removePossibleGeoWithNSString:", "removePossibleGeo", "V", 0x2, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelStatisticsCmdFillCells = { 2, "CmdFillCells", "org.geogebra.common.kernel.statistics", NULL, 0x1, 3, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelStatisticsCmdFillCells;
}

@end

void OrgGeogebraCommonKernelStatisticsCmdFillCells_initWithOrgGeogebraCommonKernelKernel_(OrgGeogebraCommonKernelStatisticsCmdFillCells *self, OrgGeogebraCommonKernelKernel *kernel) {
  OrgGeogebraCommonKernelCommandsCommandProcessor_initWithOrgGeogebraCommonKernelKernel_(self, kernel);
}

OrgGeogebraCommonKernelStatisticsCmdFillCells *new_OrgGeogebraCommonKernelStatisticsCmdFillCells_initWithOrgGeogebraCommonKernelKernel_(OrgGeogebraCommonKernelKernel *kernel) {
  OrgGeogebraCommonKernelStatisticsCmdFillCells *self = [OrgGeogebraCommonKernelStatisticsCmdFillCells alloc];
  OrgGeogebraCommonKernelStatisticsCmdFillCells_initWithOrgGeogebraCommonKernelKernel_(self, kernel);
  return self;
}

void OrgGeogebraCommonKernelStatisticsCmdFillCells_removePossibleGeoWithNSString_(OrgGeogebraCommonKernelStatisticsCmdFillCells *self, NSString *label) {
  OrgGeogebraCommonKernelGeosGeoElement *geo = [((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernelA_)) lookupLabelWithNSString:label];
  if (geo != nil) {
    [geo remove];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelStatisticsCmdFillCells)
