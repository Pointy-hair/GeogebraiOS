//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/kernel/prover/NDGDetector.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Double.h"
#include "java/util/Arrays.h"
#include "java/util/HashMap.h"
#include "java/util/HashSet.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/Set.h"
#include "java/util/TreeSet.h"
#include "org/geogebra/common/kernel/algos/SymbolicParametersBotanaAlgo.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/prover/Combinations.h"
#include "org/geogebra/common/kernel/prover/NDGDetector.h"
#include "org/geogebra/common/kernel/prover/ProverBotanasMethod.h"
#include "org/geogebra/common/kernel/prover/polynomial/Polynomial.h"
#include "org/geogebra/common/kernel/prover/polynomial/Variable.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/util/Prover.h"

@interface OrgGeogebraCommonKernelProverNDGDetector () {
 @public
  JavaUtilHashMap *lookupTable_;
  OrgGeogebraCommonUtilProver *prover_;
  JavaUtilHashMap *substitutions_;
}

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelProverNDGDetector, lookupTable_, JavaUtilHashMap *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelProverNDGDetector, prover_, OrgGeogebraCommonUtilProver *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelProverNDGDetector, substitutions_, JavaUtilHashMap *)

@implementation OrgGeogebraCommonKernelProverNDGDetector

- (instancetype)initWithOrgGeogebraCommonUtilProver:(OrgGeogebraCommonUtilProver *)prover
                                withJavaUtilHashMap:(JavaUtilHashMap *)substitutions {
  OrgGeogebraCommonKernelProverNDGDetector_initWithOrgGeogebraCommonUtilProver_withJavaUtilHashMap_(self, prover, substitutions);
  return self;
}

- (OrgGeogebraCommonUtilProver_NDGCondition *)detectWithOrgGeogebraCommonKernelProverPolynomialPolynomial:(OrgGeogebraCommonKernelProverPolynomialPolynomial *)p {
  OrgGeogebraCommonUtilProver_NDGCondition *ndgc = nil;
  NSString *keyString = [((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk([((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk(p)) substituteWithJavaUtilMap:substitutions_])) description];
  ndgc = [((JavaUtilHashMap *) nil_chk(lookupTable_)) getWithId:keyString];
  if ([lookupTable_ containsKeyWithId:keyString]) {
    ndgc = [lookupTable_ getWithId:keyString];
    if (ndgc != nil && [ndgc getReadability] == JavaLangDouble_POSITIVE_INFINITY) {
      return nil;
    }
    return ndgc;
  }
  OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("$@", @"Trying to detect polynomial ", p));
  id<JavaUtilList> freePoints = OrgGeogebraCommonKernelProverProverBotanasMethod_getFreePointsWithOrgGeogebraCommonKernelGeosGeoElement_([((OrgGeogebraCommonUtilProver *) nil_chk(prover_)) getStatement]);
  JavaUtilHashSet *freePointsSet = new_JavaUtilHashSet_initWithJavaUtilCollection_(freePoints);
  OrgGeogebraCommonKernelProverCombinations *triplets = new_OrgGeogebraCommonKernelProverCombinations_initWithJavaUtilSet_withInt_(freePointsSet, 3);
  while ([triplets hasNext]) {
    JavaUtilHashSet *triplet = (JavaUtilHashSet *) check_class_cast([triplets next], [JavaUtilHashSet class]);
    id<JavaUtilIterator> it = [((JavaUtilHashSet *) nil_chk(triplet)) iterator];
    jint i = 0;
    IOSObjectArray *points = [IOSObjectArray newArrayWithLength:[triplet size] type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
    while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
      (void) IOSObjectArray_Set(points, i, (OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast([it next], [OrgGeogebraCommonKernelGeosGeoElement class]));
      i++;
    }
    IOSObjectArray *fv1 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 0), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 0)];
    IOSObjectArray *fv2 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 1), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 1)];
    IOSObjectArray *fv3 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 2), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 2)];
    OrgGeogebraCommonKernelProverPolynomialPolynomial *coll = [((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk(OrgGeogebraCommonKernelProverPolynomialPolynomial_collinearWithOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(nil_chk(fv1), 0), IOSObjectArray_Get(fv1, 1), IOSObjectArray_Get(nil_chk(fv2), 0), IOSObjectArray_Get(fv2, 1), IOSObjectArray_Get(nil_chk(fv3), 0), IOSObjectArray_Get(fv3, 1)))) substituteWithJavaUtilMap:substitutions_];
    if (OrgGeogebraCommonKernelProverPolynomialPolynomial_areAssociates1WithOrgGeogebraCommonKernelProverPolynomialPolynomial_withOrgGeogebraCommonKernelProverPolynomialPolynomial_(p, coll)) {
      OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("@$@", p, @" means collinearity for ", triplet));
      ndgc = new_OrgGeogebraCommonUtilProver_NDGCondition_init();
      [ndgc setGeosWithOrgGeogebraCommonKernelGeosGeoElementArray:points];
      JavaUtilArrays_sortWithNSObjectArray_([ndgc getGeos]);
      [ndgc setConditionWithNSString:@"AreCollinear"];
      (void) [lookupTable_ putWithId:keyString withId:ndgc];
      return ndgc;
    }
  }
  OrgGeogebraCommonKernelProverCombinations *pairs = new_OrgGeogebraCommonKernelProverCombinations_initWithJavaUtilSet_withInt_(freePointsSet, 2);
  while ([pairs hasNext]) {
    JavaUtilHashSet *pair = (JavaUtilHashSet *) check_class_cast([pairs next], [JavaUtilHashSet class]);
    id<JavaUtilIterator> it = [((JavaUtilHashSet *) nil_chk(pair)) iterator];
    jint i = 0;
    IOSObjectArray *points = [IOSObjectArray newArrayWithLength:[pair size] type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
    while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
      (void) IOSObjectArray_Set(points, i, (OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast([it next], [OrgGeogebraCommonKernelGeosGeoElement class]));
      i++;
    }
    IOSObjectArray *fv1 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 0), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 0)];
    IOSObjectArray *fv2 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 1), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 1)];
    OrgGeogebraCommonKernelProverPolynomialPolynomial *eq = [((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk(OrgGeogebraCommonKernelProverPolynomialPolynomial_sqrDistanceWithOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(nil_chk(fv1), 0), IOSObjectArray_Get(fv1, 1), IOSObjectArray_Get(nil_chk(fv2), 0), IOSObjectArray_Get(fv2, 1)))) substituteWithJavaUtilMap:substitutions_];
    if (OrgGeogebraCommonKernelProverPolynomialPolynomial_areAssociates1WithOrgGeogebraCommonKernelProverPolynomialPolynomial_withOrgGeogebraCommonKernelProverPolynomialPolynomial_(p, eq)) {
      OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("@$@", p, @" means equality for ", pair));
      ndgc = new_OrgGeogebraCommonUtilProver_NDGCondition_init();
      [ndgc setGeosWithOrgGeogebraCommonKernelGeosGeoElementArray:points];
      JavaUtilArrays_sortWithNSObjectArray_([ndgc getGeos]);
      [ndgc setConditionWithNSString:@"AreEqual"];
      [ndgc setReadabilityWithDouble:0.5];
      (void) [lookupTable_ putWithId:keyString withId:ndgc];
      return ndgc;
    }
  }
  JavaUtilHashSet *freeXvars = new_JavaUtilHashSet_init();
  JavaUtilHashMap *xvarGeo = new_JavaUtilHashMap_init();
  JavaUtilHashSet *freeYvars = new_JavaUtilHashSet_init();
  JavaUtilHashMap *yvarGeo = new_JavaUtilHashMap_init();
  id<JavaUtilIterator> it = [((JavaUtilTreeSet *) nil_chk([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([prover_ getStatement])) getAllPredecessors])) iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    OrgGeogebraCommonKernelGeosGeoElement *geo = [it next];
    if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoPoint] && ([OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo_class_() isInstance:geo])) {
      OrgGeogebraCommonKernelProverPolynomialVariable *x = IOSObjectArray_Get(nil_chk([((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(geo, @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:geo]), 0);
      if ([((OrgGeogebraCommonKernelProverPolynomialVariable *) nil_chk(x)) isFree]) {
        [freeXvars addWithId:x];
        (void) [xvarGeo putWithId:x withId:geo];
      }
      OrgGeogebraCommonKernelProverPolynomialVariable *y = IOSObjectArray_Get(nil_chk([((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(geo, @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:geo]), 1);
      if ([((OrgGeogebraCommonKernelProverPolynomialVariable *) nil_chk(y)) isFree]) {
        [freeYvars addWithId:y];
        (void) [yvarGeo putWithId:y withId:geo];
      }
    }
  }
  pairs = new_OrgGeogebraCommonKernelProverCombinations_initWithJavaUtilSet_withInt_(freeXvars, 2);
  while ([pairs hasNext]) {
    JavaUtilHashSet *pair = (JavaUtilHashSet *) check_class_cast([pairs next], [JavaUtilHashSet class]);
    id<JavaUtilIterator> itc = [((JavaUtilHashSet *) nil_chk(pair)) iterator];
    jint i = 0;
    IOSObjectArray *coords = [IOSObjectArray newArrayWithLength:[pair size] type:OrgGeogebraCommonKernelProverPolynomialVariable_class_()];
    IOSObjectArray *points = [IOSObjectArray newArrayWithLength:[pair size] type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
    while ([((id<JavaUtilIterator>) nil_chk(itc)) hasNext]) {
      (void) IOSObjectArray_Set(coords, i, (OrgGeogebraCommonKernelProverPolynomialVariable *) check_class_cast([itc next], [OrgGeogebraCommonKernelProverPolynomialVariable class]));
      (void) IOSObjectArray_Set(points, i, [xvarGeo getWithId:IOSObjectArray_Get(coords, i)]);
      i++;
    }
    OrgGeogebraCommonKernelProverPolynomialPolynomial *xeq = [((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk(([new_OrgGeogebraCommonKernelProverPolynomialPolynomial_initWithOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(coords, 0)) subtractWithOrgGeogebraCommonKernelProverPolynomialPolynomial:new_OrgGeogebraCommonKernelProverPolynomialPolynomial_initWithOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(coords, 1))]))) substituteWithJavaUtilMap:substitutions_];
    if (OrgGeogebraCommonKernelProverPolynomialPolynomial_areAssociates1WithOrgGeogebraCommonKernelProverPolynomialPolynomial_withOrgGeogebraCommonKernelProverPolynomialPolynomial_(p, xeq)) {
      OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("@$@", p, @" means x-equality for ", pair));
      ndgc = new_OrgGeogebraCommonUtilProver_NDGCondition_init();
      [ndgc setGeosWithOrgGeogebraCommonKernelGeosGeoElementArray:points];
      JavaUtilArrays_sortWithNSObjectArray_([ndgc getGeos]);
      [ndgc setConditionWithNSString:@"xAreEqual"];
      [ndgc setReadabilityWithDouble:JavaLangDouble_POSITIVE_INFINITY];
      (void) [lookupTable_ putWithId:keyString withId:ndgc];
      return ndgc;
    }
  }
  pairs = new_OrgGeogebraCommonKernelProverCombinations_initWithJavaUtilSet_withInt_(freeYvars, 2);
  while ([pairs hasNext]) {
    JavaUtilHashSet *pair = (JavaUtilHashSet *) check_class_cast([pairs next], [JavaUtilHashSet class]);
    id<JavaUtilIterator> itc = [((JavaUtilHashSet *) nil_chk(pair)) iterator];
    jint i = 0;
    IOSObjectArray *coords = [IOSObjectArray newArrayWithLength:[pair size] type:OrgGeogebraCommonKernelProverPolynomialVariable_class_()];
    IOSObjectArray *points = [IOSObjectArray newArrayWithLength:[pair size] type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
    while ([((id<JavaUtilIterator>) nil_chk(itc)) hasNext]) {
      (void) IOSObjectArray_Set(coords, i, (OrgGeogebraCommonKernelProverPolynomialVariable *) check_class_cast([itc next], [OrgGeogebraCommonKernelProverPolynomialVariable class]));
      (void) IOSObjectArray_Set(points, i, [yvarGeo getWithId:IOSObjectArray_Get(coords, i)]);
      i++;
    }
    OrgGeogebraCommonKernelProverPolynomialPolynomial *yeq = [((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk(([new_OrgGeogebraCommonKernelProverPolynomialPolynomial_initWithOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(coords, 0)) subtractWithOrgGeogebraCommonKernelProverPolynomialPolynomial:new_OrgGeogebraCommonKernelProverPolynomialPolynomial_initWithOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(coords, 1))]))) substituteWithJavaUtilMap:substitutions_];
    if (OrgGeogebraCommonKernelProverPolynomialPolynomial_areAssociates1WithOrgGeogebraCommonKernelProverPolynomialPolynomial_withOrgGeogebraCommonKernelProverPolynomialPolynomial_(p, yeq)) {
      OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("@$@", p, @" means y-equality for ", pair));
      ndgc = new_OrgGeogebraCommonUtilProver_NDGCondition_init();
      [ndgc setGeosWithOrgGeogebraCommonKernelGeosGeoElementArray:points];
      JavaUtilArrays_sortWithNSObjectArray_([ndgc getGeos]);
      [ndgc setConditionWithNSString:@"yAreEqual"];
      [ndgc setReadabilityWithDouble:JavaLangDouble_POSITIVE_INFINITY];
      (void) [lookupTable_ putWithId:keyString withId:ndgc];
      return ndgc;
    }
  }
  OrgGeogebraCommonKernelProverCombinations *pairs1 = new_OrgGeogebraCommonKernelProverCombinations_initWithJavaUtilSet_withInt_(freePointsSet, 2);
  while ([pairs1 hasNext]) {
    JavaUtilHashSet *pair1 = (JavaUtilHashSet *) check_class_cast([pairs1 next], [JavaUtilHashSet class]);
    id<JavaUtilIterator> it1 = [((JavaUtilHashSet *) nil_chk(pair1)) iterator];
    jint i = 0;
    IOSObjectArray *points = [IOSObjectArray newArrayWithLength:4 type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
    while ([((id<JavaUtilIterator>) nil_chk(it1)) hasNext]) {
      (void) IOSObjectArray_Set(points, i, (OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast([it1 next], [OrgGeogebraCommonKernelGeosGeoElement class]));
      i++;
    }
    OrgGeogebraCommonKernelProverCombinations *pairs2 = new_OrgGeogebraCommonKernelProverCombinations_initWithJavaUtilSet_withInt_(freePointsSet, 2);
    while ([pairs2 hasNext]) {
      JavaUtilHashSet *pair2 = (JavaUtilHashSet *) check_class_cast([pairs2 next], [JavaUtilHashSet class]);
      id<JavaUtilIterator> it2 = [((JavaUtilHashSet *) nil_chk(pair2)) iterator];
      i = 2;
      while ([((id<JavaUtilIterator>) nil_chk(it2)) hasNext]) {
        (void) IOSObjectArray_Set(points, i, (OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast([it2 next], [OrgGeogebraCommonKernelGeosGeoElement class]));
        i++;
      }
      IOSObjectArray *fv1 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 0), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 0)];
      IOSObjectArray *fv2 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 1), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 1)];
      IOSObjectArray *fv3 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 2), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 0)];
      IOSObjectArray *fv4 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 3), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 1)];
      OrgGeogebraCommonKernelProverPolynomialPolynomial *eq = [((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk(OrgGeogebraCommonKernelProverPolynomialPolynomial_perpendicularWithOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(nil_chk(fv1), 0), IOSObjectArray_Get(fv1, 1), IOSObjectArray_Get(nil_chk(fv2), 0), IOSObjectArray_Get(fv2, 1), IOSObjectArray_Get(nil_chk(fv3), 0), IOSObjectArray_Get(fv3, 1), IOSObjectArray_Get(nil_chk(fv4), 0), IOSObjectArray_Get(fv4, 1)))) substituteWithJavaUtilMap:substitutions_];
      if (OrgGeogebraCommonKernelProverPolynomialPolynomial_areAssociates1WithOrgGeogebraCommonKernelProverPolynomialPolynomial_withOrgGeogebraCommonKernelProverPolynomialPolynomial_(p, eq)) {
        OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("@$@$@", p, @" means perpendicularity for ", pair1, @" and ", pair2));
        ndgc = new_OrgGeogebraCommonUtilProver_NDGCondition_init();
        [ndgc setGeosWithOrgGeogebraCommonKernelGeosGeoElementArray:points];
        [ndgc setConditionWithNSString:@"ArePerpendicular"];
        [ndgc setReadabilityWithDouble:0.75];
        (void) [lookupTable_ putWithId:keyString withId:ndgc];
        return ndgc;
      }
      eq = [((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk(OrgGeogebraCommonKernelProverPolynomialPolynomial_parallelWithOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(fv1, 0), IOSObjectArray_Get(fv1, 1), IOSObjectArray_Get(fv2, 0), IOSObjectArray_Get(fv2, 1), IOSObjectArray_Get(fv3, 0), IOSObjectArray_Get(fv3, 1), IOSObjectArray_Get(fv4, 0), IOSObjectArray_Get(fv4, 1)))) substituteWithJavaUtilMap:substitutions_];
      if (OrgGeogebraCommonKernelProverPolynomialPolynomial_areAssociates1WithOrgGeogebraCommonKernelProverPolynomialPolynomial_withOrgGeogebraCommonKernelProverPolynomialPolynomial_(p, eq)) {
        OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("@$@$@", p, @" means parallelism for ", pair1, @" and ", pair2));
        ndgc = new_OrgGeogebraCommonUtilProver_NDGCondition_init();
        [ndgc setGeosWithOrgGeogebraCommonKernelGeosGeoElementArray:points];
        [ndgc setConditionWithNSString:@"AreParallel"];
        [ndgc setReadabilityWithDouble:0.75];
        (void) [lookupTable_ putWithId:keyString withId:ndgc];
        return ndgc;
      }
    }
  }
  pairs = new_OrgGeogebraCommonKernelProverCombinations_initWithJavaUtilSet_withInt_(freePointsSet, 2);
  while ([pairs hasNext]) {
    JavaUtilHashSet *pair = (JavaUtilHashSet *) check_class_cast([pairs next], [JavaUtilHashSet class]);
    id<JavaUtilIterator> it1 = [((JavaUtilHashSet *) nil_chk(pair)) iterator];
    jint i = 0;
    IOSObjectArray *points = [IOSObjectArray newArrayWithLength:4 type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
    while ([((id<JavaUtilIterator>) nil_chk(it1)) hasNext]) {
      (void) IOSObjectArray_Set(points, i, (OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast([it1 next], [OrgGeogebraCommonKernelGeosGeoElement class]));
      i += 2;
    }
    it = [freePointsSet iterator];
    while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
      (void) IOSObjectArray_Set(points, 1, IOSObjectArray_Set(points, 3, [it next]));
      IOSObjectArray *fv1 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 0), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 0)];
      IOSObjectArray *fv2 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 1), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 1)];
      IOSObjectArray *fv3 = [((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) nil_chk(((id<OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo>) check_protocol_cast(IOSObjectArray_Get(points, 2), @protocol(OrgGeogebraCommonKernelAlgosSymbolicParametersBotanaAlgo))))) getBotanaVarsWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(points, 2)];
      OrgGeogebraCommonKernelProverPolynomialPolynomial *eq = [((OrgGeogebraCommonKernelProverPolynomialPolynomial *) nil_chk(OrgGeogebraCommonKernelProverPolynomialPolynomial_equidistantWithOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_withOrgGeogebraCommonKernelProverPolynomialVariable_(IOSObjectArray_Get(nil_chk(fv1), 0), IOSObjectArray_Get(fv1, 1), IOSObjectArray_Get(nil_chk(fv2), 0), IOSObjectArray_Get(fv2, 1), IOSObjectArray_Get(nil_chk(fv3), 0), IOSObjectArray_Get(fv3, 1)))) substituteWithJavaUtilMap:substitutions_];
      if (OrgGeogebraCommonKernelProverPolynomialPolynomial_areAssociates1WithOrgGeogebraCommonKernelProverPolynomialPolynomial_withOrgGeogebraCommonKernelProverPolynomialPolynomial_(p, eq)) {
        OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("@$@$@", p, @" means being isosceles triangle for base ", pair, @" and opposite vertex ", IOSObjectArray_Get(points, 1)));
        ndgc = new_OrgGeogebraCommonUtilProver_NDGCondition_init();
        [ndgc setGeosWithOrgGeogebraCommonKernelGeosGeoElementArray:points];
        [ndgc setConditionWithNSString:@"IsIsoscelesTriangle"];
        [ndgc setReadabilityWithDouble:1.25];
        (void) [lookupTable_ putWithId:keyString withId:ndgc];
        return ndgc;
      }
    }
  }
  OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("$@", @"No human readable geometrical meaning found for ", p));
  (void) [lookupTable_ putWithId:keyString withId:nil];
  return nil;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonUtilProver:withJavaUtilHashMap:", "NDGDetector", NULL, 0x0, NULL, NULL },
    { "detectWithOrgGeogebraCommonKernelProverPolynomialPolynomial:", "detect", "Lorg.geogebra.common.util.Prover$NDGCondition;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "lookupTable_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/String;Lorg/geogebra/common/util/Prover$NDGCondition;>;",  },
    { "prover_", NULL, 0x2, "Lorg.geogebra.common.util.Prover;", NULL, NULL,  },
    { "substitutions_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Lorg/geogebra/common/kernel/prover/polynomial/Variable;Ljava/lang/Integer;>;",  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelProverNDGDetector = { 2, "NDGDetector", "org.geogebra.common.kernel.prover", NULL, 0x1, 2, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelProverNDGDetector;
}

@end

void OrgGeogebraCommonKernelProverNDGDetector_initWithOrgGeogebraCommonUtilProver_withJavaUtilHashMap_(OrgGeogebraCommonKernelProverNDGDetector *self, OrgGeogebraCommonUtilProver *prover, JavaUtilHashMap *substitutions) {
  (void) NSObject_init(self);
  self->lookupTable_ = new_JavaUtilHashMap_init();
  self->prover_ = prover;
  self->substitutions_ = substitutions;
}

OrgGeogebraCommonKernelProverNDGDetector *new_OrgGeogebraCommonKernelProverNDGDetector_initWithOrgGeogebraCommonUtilProver_withJavaUtilHashMap_(OrgGeogebraCommonUtilProver *prover, JavaUtilHashMap *substitutions) {
  OrgGeogebraCommonKernelProverNDGDetector *self = [OrgGeogebraCommonKernelProverNDGDetector alloc];
  OrgGeogebraCommonKernelProverNDGDetector_initWithOrgGeogebraCommonUtilProver_withJavaUtilHashMap_(self, prover, substitutions);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelProverNDGDetector)
