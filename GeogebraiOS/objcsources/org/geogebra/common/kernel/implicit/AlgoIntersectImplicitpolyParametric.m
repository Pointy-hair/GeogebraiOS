//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/kernel/implicit/AlgoIntersectImplicitpolyParametric.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"
#include "org/apache/commons/math/analysis/polynomials/PolynomialFunction.h"
#include "org/geogebra/common/euclidian/EuclidianConstants.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/algos/AlgoRoots.h"
#include "org/geogebra/common/kernel/algos/AlgoSimpleRootsPolynomial.h"
#include "org/geogebra/common/kernel/arithmetic/Function.h"
#include "org/geogebra/common/kernel/arithmetic/PolyFunction.h"
#include "org/geogebra/common/kernel/commands/Commands.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoFunction.h"
#include "org/geogebra/common/kernel/geos/GeoLine.h"
#include "org/geogebra/common/kernel/geos/GeoNumeric.h"
#include "org/geogebra/common/kernel/geos/GeoPoint.h"
#include "org/geogebra/common/kernel/implicit/AlgoIntersectImplicitpolyParametric.h"
#include "org/geogebra/common/kernel/implicit/AlgoTangentImplicitpoly.h"
#include "org/geogebra/common/kernel/implicit/GeoImplicitPoly.h"

@interface OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric () {
 @public
  OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *tx_;
  OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *ty_;
  OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p_;
  OrgGeogebraCommonKernelGeosGeoLine *l_;
  OrgGeogebraCommonKernelGeosGeoFunction *f_;
  IOSObjectArray *tangentPoints_;
}

- (void)mergeWithTangentPoints;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric, tx_, OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric, ty_, OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric, p_, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric, l_, OrgGeogebraCommonKernelGeosGeoLine *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric, f_, OrgGeogebraCommonKernelGeosGeoFunction *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric, tangentPoints_, IOSObjectArray *)

__attribute__((unused)) static void OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_mergeWithTangentPoints(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self);

@implementation OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)c
         withOrgGeogebraCommonKernelImplicitGeoImplicitPoly:(OrgGeogebraCommonKernelImplicitGeoImplicitPoly *)p
                     withOrgGeogebraCommonKernelGeosGeoLine:(OrgGeogebraCommonKernelGeosGeoLine *)l {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(self, c, p, l);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)c
         withOrgGeogebraCommonKernelImplicitGeoImplicitPoly:(OrgGeogebraCommonKernelImplicitGeoImplicitPoly *)p
                 withOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)f {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(self, c, p, f);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)c
                                          withNSStringArray:(IOSObjectArray *)labels
                                                withBoolean:(jboolean)setLabels
         withOrgGeogebraCommonKernelImplicitGeoImplicitPoly:(OrgGeogebraCommonKernelImplicitGeoImplicitPoly *)p
                     withOrgGeogebraCommonKernelGeosGeoLine:(OrgGeogebraCommonKernelGeosGeoLine *)l {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(self, c, labels, setLabels, p, l);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)c
                                          withNSStringArray:(IOSObjectArray *)labels
                                                withBoolean:(jboolean)setLabels
         withOrgGeogebraCommonKernelImplicitGeoImplicitPoly:(OrgGeogebraCommonKernelImplicitGeoImplicitPoly *)p
                 withOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)f {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(self, c, labels, setLabels, p, f);
  return self;
}

- (jdouble)getYValueWithDouble:(jdouble)t {
  return [((OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *) nil_chk(ty_)) valueWithDouble:t];
}

- (jdouble)getXValueWithDouble:(jdouble)t {
  return [((OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *) nil_chk(tx_)) valueWithDouble:t];
}

- (void)compute {
  if (![((OrgGeogebraCommonKernelImplicitGeoImplicitPoly *) nil_chk(p_)) isDefined]) {
    return;
  }
  jdouble maxT;
  jdouble minT;
  if (f_ != nil) {
    if (![f_ isDefined]) {
      return;
    }
    if (![f_ isPolynomialFunctionWithBoolean:NO]) {
      OrgGeogebraCommonKernelKernel *ker = [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons_)) getKernel];
      [((OrgGeogebraCommonKernelKernel *) nil_chk(ker)) setSilentModeWithBoolean:YES];
      OrgGeogebraCommonKernelGeosGeoFunction *paramEquation = new_OrgGeogebraCommonKernelGeosGeoFunction_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelGeosGeoFunction_(cons_, p_, nil, f_);
      OrgGeogebraCommonKernelAlgosAlgoRoots *algo = new_OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(cons_, paramEquation, new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, [f_ getMinParameter]), new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, [f_ getMaxParameter]));
      IOSObjectArray *rootPoints = [algo getRootPoints];
      id<JavaUtilList> valPairs = new_JavaUtilArrayList_init();
      for (jint i = 0; i < ((IOSObjectArray *) nil_chk(rootPoints))->size_; i++) {
        jdouble t = [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(rootPoints, i))) getX];
        [valPairs addWithId:[IOSDoubleArray newArrayWithDoubles:(jdouble[]){ t, [f_ evaluateWithDouble:t] } count:2]];
      }
      [ker setSilentModeWithBoolean:NO];
      [self setPointsWithJavaUtilList:valPairs];
      return;
    }
    tx_ = new_OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction_initWithDoubleArray_([IOSDoubleArray newArrayWithDoubles:(jdouble[]){ 0, 1 } count:2]);
    ty_ = new_OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction_initWithDoubleArray_([((OrgGeogebraCommonKernelArithmeticPolyFunction *) nil_chk([((OrgGeogebraCommonKernelArithmeticFunction *) nil_chk([f_ getFunction])) getNumericPolynomialDerivativeWithInt:0 withBoolean:NO])) getCoeffs]);
    maxT = [f_ getMaxParameter];
    minT = [f_ getMinParameter];
  }
  else if (l_ != nil) {
    if (![l_ isDefined]) {
      [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(points_)) adjustOutputSizeWithInt:0];
      return;
    }
    IOSDoubleArray *startP = [IOSDoubleArray newArrayWithLength:2];
    [l_ getInhomPointOnLineWithDoubleArray:startP];
    tx_ = new_OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction_initWithDoubleArray_([IOSDoubleArray newArrayWithDoubles:(jdouble[]){ IOSDoubleArray_Get(startP, 0), [l_ getY] } count:2]);
    ty_ = new_OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction_initWithDoubleArray_([IOSDoubleArray newArrayWithDoubles:(jdouble[]){ IOSDoubleArray_Get(startP, 1), -[l_ getX] } count:2]);
    maxT = [l_ getMaxParameter];
    minT = [l_ getMinParameter];
    if ([[l_ getParentAlgorithm] isKindOfClass:[OrgGeogebraCommonKernelImplicitAlgoTangentImplicitpoly class]]) {
      tangentPoints_ = [((OrgGeogebraCommonKernelImplicitAlgoTangentImplicitpoly *) nil_chk(((OrgGeogebraCommonKernelImplicitAlgoTangentImplicitpoly *) check_class_cast([l_ getParentAlgorithm], [OrgGeogebraCommonKernelImplicitAlgoTangentImplicitpoly class])))) getTangentPoints];
    }
  }
  else {
    return;
  }
  OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *sum = nil;
  OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *zs = nil;
  IOSObjectArray *coeff = [p_ getCoeff];
  if (coeff != nil) for (jint i = coeff->size_ - 1; i >= 0; i--) {
    zs = new_OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction_initWithDoubleArray_([IOSDoubleArray newArrayWithDoubles:(jdouble[]){ IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(coeff, i)), ((IOSDoubleArray *) nil_chk(IOSObjectArray_Get(coeff, i)))->size_ - 1) } count:1]);
    for (jint j = ((IOSDoubleArray *) nil_chk(IOSObjectArray_Get(coeff, i)))->size_ - 2; j >= 0; j--) {
      zs = [((OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *) nil_chk([zs multiplyWithOrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction:ty_])) addWithOrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction:new_OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction_initWithDoubleArray_([IOSDoubleArray newArrayWithDoubles:(jdouble[]){ IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(coeff, i)), j) } count:1])];
    }
    if (sum == nil) sum = zs;
    else sum = [((OrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction *) nil_chk([sum multiplyWithOrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction:tx_])) addWithOrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction:zs];
  }
  [self setRootsPolynomialWithinRangeWithOrgApacheCommonsMathAnalysisPolynomialsPolynomialFunction:sum withDouble:minT withDouble:maxT];
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_mergeWithTangentPoints(self);
}

- (void)mergeWithTangentPoints {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_mergeWithTangentPoints(self);
}

- (OrgGeogebraCommonKernelCommandsCommandsEnum *)getClassName {
  return OrgGeogebraCommonKernelCommandsCommandsEnum_get_Intersect();
}

- (jint)getRelatedModeID {
  return OrgGeogebraCommonEuclidianEuclidianConstants_MODE_INTERSECT;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelConstruction:withOrgGeogebraCommonKernelImplicitGeoImplicitPoly:withOrgGeogebraCommonKernelGeosGeoLine:", "AlgoIntersectImplicitpolyParametric", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withOrgGeogebraCommonKernelImplicitGeoImplicitPoly:withOrgGeogebraCommonKernelGeosGeoFunction:", "AlgoIntersectImplicitpolyParametric", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withNSStringArray:withBoolean:withOrgGeogebraCommonKernelImplicitGeoImplicitPoly:withOrgGeogebraCommonKernelGeosGeoLine:", "AlgoIntersectImplicitpolyParametric", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withNSStringArray:withBoolean:withOrgGeogebraCommonKernelImplicitGeoImplicitPoly:withOrgGeogebraCommonKernelGeosGeoFunction:", "AlgoIntersectImplicitpolyParametric", NULL, 0x1, NULL, NULL },
    { "getYValueWithDouble:", "getYValue", "D", 0x4, NULL, NULL },
    { "getXValueWithDouble:", "getXValue", "D", 0x4, NULL, NULL },
    { "compute", NULL, "V", 0x1, NULL, NULL },
    { "mergeWithTangentPoints", NULL, "V", 0x2, NULL, NULL },
    { "getClassName", NULL, "Lorg.geogebra.common.kernel.commands.Commands;", 0x1, NULL, NULL },
    { "getRelatedModeID", NULL, "I", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "tx_", NULL, 0x2, "Lorg.apache.commons.math.analysis.polynomials.PolynomialFunction;", NULL, NULL,  },
    { "ty_", NULL, 0x2, "Lorg.apache.commons.math.analysis.polynomials.PolynomialFunction;", NULL, NULL,  },
    { "p_", NULL, 0x2, "Lorg.geogebra.common.kernel.implicit.GeoImplicitPoly;", NULL, NULL,  },
    { "l_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoLine;", NULL, NULL,  },
    { "f_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "tangentPoints_", NULL, 0x2, "[Lorg.geogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric = { 2, "AlgoIntersectImplicitpolyParametric", "org.geogebra.common.kernel.implicit", NULL, 0x1, 10, methods, 6, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric;
}

@end

void OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self, OrgGeogebraCommonKernelConstruction *c, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p, OrgGeogebraCommonKernelGeosGeoLine *l) {
  (void) OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(self, c, nil, NO, p, l);
}

OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *new_OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(OrgGeogebraCommonKernelConstruction *c, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p, OrgGeogebraCommonKernelGeosGeoLine *l) {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self = [OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric alloc];
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(self, c, p, l);
  return self;
}

void OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self, OrgGeogebraCommonKernelConstruction *c, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p, OrgGeogebraCommonKernelGeosGeoFunction *f) {
  (void) OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(self, c, nil, NO, p, f);
}

OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *new_OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(OrgGeogebraCommonKernelConstruction *c, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p, OrgGeogebraCommonKernelGeosGeoFunction *f) {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self = [OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric alloc];
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(self, c, p, f);
  return self;
}

void OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self, OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *labels, jboolean setLabels, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p, OrgGeogebraCommonKernelGeosGeoLine *l) {
  (void) OrgGeogebraCommonKernelAlgosAlgoSimpleRootsPolynomial_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElementArray_(self, c, [IOSObjectArray newArrayWithObjects:(id[]){ p, l } count:2 type:OrgGeogebraCommonKernelGeosGeoElement_class_()]);
  self->p_ = p;
  self->l_ = l;
  [self compute];
}

OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *new_OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *labels, jboolean setLabels, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p, OrgGeogebraCommonKernelGeosGeoLine *l) {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self = [OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric alloc];
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoLine_(self, c, labels, setLabels, p, l);
  return self;
}

void OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self, OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *labels, jboolean setLabels, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p, OrgGeogebraCommonKernelGeosGeoFunction *f) {
  (void) OrgGeogebraCommonKernelAlgosAlgoSimpleRootsPolynomial_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElementArray_(self, c, [IOSObjectArray newArrayWithObjects:(id[]){ p, f } count:2 type:OrgGeogebraCommonKernelGeosGeoElement_class_()]);
  self->p_ = p;
  self->f_ = f;
  [self compute];
}

OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *new_OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(OrgGeogebraCommonKernelConstruction *c, IOSObjectArray *labels, jboolean setLabels, OrgGeogebraCommonKernelImplicitGeoImplicitPoly *p, OrgGeogebraCommonKernelGeosGeoFunction *f) {
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self = [OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric alloc];
  OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelImplicitGeoImplicitPoly_withOrgGeogebraCommonKernelGeosGeoFunction_(self, c, labels, setLabels, p, f);
  return self;
}

void OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric_mergeWithTangentPoints(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric *self) {
  if (self->tangentPoints_ == nil || self->tangentPoints_->size_ == 0) return;
  IOSBooleanArray *addTangent = [IOSBooleanArray newArrayWithLength:((IOSObjectArray *) nil_chk(self->tangentPoints_))->size_];
  jint orgSize = [((OrgGeogebraCommonKernelAlgosAlgoElement_OutputHandler *) nil_chk(self->points_)) size];
  while (![((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk([self->points_ getElementWithInt:orgSize - 1])) isDefined]) --orgSize;
  jint newSize = orgSize;
  jdouble EPS2 = OrgGeogebraCommonKernelKernel_STANDARD_PRECISION;
  for (jint i = 0; i < self->tangentPoints_->size_; ++i) {
    if ([((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->tangentPoints_, i))) getIncidenceList] != nil && [((JavaUtilArrayList *) nil_chk([((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->tangentPoints_, i))) getIncidenceList])) containsWithId:self->l_]) {
      *IOSBooleanArray_GetRef(addTangent, i) = YES;
      for (jint j = 0; j < orgSize; ++j) {
        if ([((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk([self->points_ getElementWithInt:j])) distanceSqrWithOrgGeogebraCommonKernelGeosGeoPoint:IOSObjectArray_Get(self->tangentPoints_, i)] < EPS2) {
          if (IOSBooleanArray_Get(addTangent, i)) {
            [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk([self->points_ getElementWithInt:j])) setUndefined];
            --newSize;
          }
          else {
            *IOSBooleanArray_GetRef(addTangent, i) = NO;
            [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk([self->points_ getElementWithInt:i])) setCoordsWithOrgGeogebraCommonKernelGeosGeoVec3D:IOSObjectArray_Get(self->tangentPoints_, j)];
          }
        }
      }
      if (IOSBooleanArray_Get(addTangent, i)) ++newSize;
    }
    else {
      *IOSBooleanArray_GetRef(addTangent, i) = NO;
    }
  }
  jint definedCount = 0;
  for (jint i = 0; i < orgSize; ++i) {
    if ([((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk([self->points_ getElementWithInt:i])) isDefined]) {
      if (definedCount != i) [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk([self->points_ getElementWithInt:definedCount])) setCoordsWithOrgGeogebraCommonKernelGeosGeoVec3D:[self->points_ getElementWithInt:i]];
      ++definedCount;
    }
  }
  [self->points_ adjustOutputSizeWithInt:newSize];
  for (jint i = 0; i < self->tangentPoints_->size_; ++i) {
    if (IOSBooleanArray_Get(addTangent, i)) {
      [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk([self->points_ getElementWithInt:definedCount++])) setCoordsWithOrgGeogebraCommonKernelGeosGeoVec3D:IOSObjectArray_Get(self->tangentPoints_, i)];
    }
  }
  if (self->setLabels__) [self->points_ updateLabels];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelImplicitAlgoIntersectImplicitpolyParametric)
