//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/kernel/polynomial/BigPolynomial.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/ArithmeticException.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuilder.h"
#include "java/lang/System.h"
#include "java/math/BigDecimal.h"
#include "java/math/BigInteger.h"
#include "java/math/MathContext.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/polynomial/BigComplex.h"
#include "org/geogebra/common/kernel/polynomial/BigPolynomial.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/util/debug/Log.h"

@interface OrgGeogebraCommonKernelPolynomialBigPolynomial ()

- (instancetype)init;

- (instancetype)initWithOrgGeogebraCommonKernelPolynomialBigPolynomial:(OrgGeogebraCommonKernelPolynomialBigPolynomial *)p;

- (instancetype)initWithJavaMathBigDecimalArray:(IOSObjectArray *)coeff;

@end

static jint OrgGeogebraCommonKernelPolynomialBigPolynomial_MAX_ITERATIONS_ = 20;
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonKernelPolynomialBigPolynomial, MAX_ITERATIONS_, jint)
J2OBJC_STATIC_FIELD_REF_GETTER(OrgGeogebraCommonKernelPolynomialBigPolynomial, MAX_ITERATIONS_, jint)

__attribute__((unused)) static void OrgGeogebraCommonKernelPolynomialBigPolynomial_init(OrgGeogebraCommonKernelPolynomialBigPolynomial *self);

__attribute__((unused)) static OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, OrgGeogebraCommonKernelPolynomialBigPolynomial *p);

__attribute__((unused)) static OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_(OrgGeogebraCommonKernelPolynomialBigPolynomial *p) NS_RETURNS_RETAINED;

__attribute__((unused)) static void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, IOSObjectArray *coeff);

__attribute__((unused)) static OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_(IOSObjectArray *coeff) NS_RETURNS_RETAINED;

@implementation OrgGeogebraCommonKernelPolynomialBigPolynomial

- (instancetype)init {
  OrgGeogebraCommonKernelPolynomialBigPolynomial_init(self);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelPolynomialBigPolynomial:(OrgGeogebraCommonKernelPolynomialBigPolynomial *)p {
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_(self, p);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelPolynomialBigPolynomial:(OrgGeogebraCommonKernelPolynomialBigPolynomial *)p
                                           withJavaMathBigDecimalArray:(IOSObjectArray *)coeff {
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(self, p, coeff);
  return self;
}

- (instancetype)initWithJavaMathBigDecimalArray:(IOSObjectArray *)coeff {
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_(self, coeff);
  return self;
}

- (instancetype)initWithJavaMathBigDecimalArray:(IOSObjectArray *)coeff
                         withJavaMathBigDecimal:(JavaMathBigDecimal *)eps
                        withJavaMathMathContext:(JavaMathMathContext *)mc {
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_withJavaMathBigDecimal_withJavaMathMathContext_(self, coeff, eps, mc);
  return self;
}

- (instancetype)initWithDoubleArray:(IOSDoubleArray *)coeff
            withJavaMathMathContext:(JavaMathMathContext *)mc {
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withJavaMathMathContext_(self, coeff, mc);
  return self;
}

- (instancetype)initWithDoubleArray:(IOSDoubleArray *)coeff
                            withInt:(jint)precision {
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withInt_(self, coeff, precision);
  return self;
}

- (instancetype)initWithDouble:(jdouble)constant
                       withInt:(jint)precision {
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDouble_withInt_(self, constant, precision);
  return self;
}

- (OrgGeogebraCommonKernelPolynomialBigPolynomial *)copy__ {
  return new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_(self);
}

- (id)clone {
  return [self copy__];
}

- (jint)degree {
  return ((IOSObjectArray *) nil_chk(coefficients_))->size_ - 1;
}

- (JavaMathBigDecimal *)evalWithJavaMathBigDecimal:(JavaMathBigDecimal *)val {
  if (((IOSObjectArray *) nil_chk(coefficients_))->size_ > 0) {
    JavaMathBigDecimal *sum = IOSObjectArray_Get(coefficients_, coefficients_->size_ - 1);
    for (jint i = coefficients_->size_ - 1; i >= 0; i--) {
      sum = [((JavaMathBigDecimal *) nil_chk(sum)) multiplyWithJavaMathBigDecimal:val withJavaMathMathContext:mc_];
      sum = [((JavaMathBigDecimal *) nil_chk(sum)) addWithJavaMathBigDecimal:IOSObjectArray_Get(coefficients_, i) withJavaMathMathContext:mc_];
    }
    return sum;
  }
  return JavaMathBigDecimal_get_ZERO_();
}

- (jdouble)evalWithDouble:(jdouble)d {
  return [((JavaMathBigDecimal *) nil_chk([self evalWithJavaMathBigDecimal:new_JavaMathBigDecimal_initWithDouble_(d)])) doubleValue];
}

- (OrgGeogebraCommonKernelPolynomialBigPolynomial *)addWithOrgGeogebraCommonKernelPolynomialBigPolynomial:(OrgGeogebraCommonKernelPolynomialBigPolynomial *)p {
  IOSObjectArray *coeff = [IOSObjectArray newArrayWithObjects:(id[]){ JavaMathBigDecimal_get_ZERO_() } count:1 type:JavaMathBigDecimal_class_()];
  for (jint i = JavaLangMath_maxWithInt_withInt_(((IOSObjectArray *) nil_chk(coefficients_))->size_, ((OrgGeogebraCommonKernelPolynomialBigPolynomial *) nil_chk(p))->coefficients_->size_) - 1; i >= 0; i--) {
    JavaMathBigDecimal *newCoeff = JavaMathBigDecimal_get_ZERO_();
    if (i < coefficients_->size_ && i < p->coefficients_->size_) {
      newCoeff = [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coefficients_, i))) addWithJavaMathBigDecimal:IOSObjectArray_Get(p->coefficients_, i) withJavaMathMathContext:mc_];
    }
    else {
      if (i >= coefficients_->size_) {
        newCoeff = IOSObjectArray_Get(p->coefficients_, i);
      }
      else {
        newCoeff = IOSObjectArray_Get(coefficients_, i);
      }
    }
    if (![self smallerEpsWithJavaMathBigDecimal:newCoeff]) {
      if (coeff->size_ == 1) {
        coeff = [IOSObjectArray newArrayWithLength:i + 1 type:JavaMathBigDecimal_class_()];
      }
      (void) IOSObjectArray_Set(coeff, i, newCoeff);
    }
    else {
      if (coeff->size_ > 1) {
        (void) IOSObjectArray_Set(coeff, i, JavaMathBigDecimal_get_ZERO_());
      }
    }
  }
  return new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(self, coeff);
}

- (OrgGeogebraCommonKernelPolynomialBigPolynomial *)subtractWithOrgGeogebraCommonKernelPolynomialBigPolynomial:(OrgGeogebraCommonKernelPolynomialBigPolynomial *)p {
  IOSObjectArray *coeff = [IOSObjectArray newArrayWithObjects:(id[]){ JavaMathBigDecimal_get_ZERO_() } count:1 type:JavaMathBigDecimal_class_()];
  for (jint i = JavaLangMath_maxWithInt_withInt_(((IOSObjectArray *) nil_chk(coefficients_))->size_, ((OrgGeogebraCommonKernelPolynomialBigPolynomial *) nil_chk(p))->coefficients_->size_) - 1; i >= 0; i--) {
    JavaMathBigDecimal *newCoeff = JavaMathBigDecimal_get_ZERO_();
    if (i < coefficients_->size_ && i < p->coefficients_->size_) {
      newCoeff = [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coefficients_, i))) subtractWithJavaMathBigDecimal:IOSObjectArray_Get(p->coefficients_, i) withJavaMathMathContext:mc_];
    }
    else {
      if (i >= coefficients_->size_) {
        newCoeff = [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(p->coefficients_, i))) negate];
      }
      else {
        newCoeff = IOSObjectArray_Get(coefficients_, i);
      }
    }
    if (![self smallerEpsWithJavaMathBigDecimal:newCoeff]) {
      if (coeff->size_ == 1) {
        coeff = [IOSObjectArray newArrayWithLength:i + 1 type:JavaMathBigDecimal_class_()];
      }
      (void) IOSObjectArray_Set(coeff, i, newCoeff);
    }
    else {
      if (coeff->size_ > 1) {
        (void) IOSObjectArray_Set(coeff, i, JavaMathBigDecimal_get_ZERO_());
      }
    }
  }
  return new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(self, coeff);
}

- (OrgGeogebraCommonKernelPolynomialBigPolynomial *)multiplyWithOrgGeogebraCommonKernelPolynomialBigPolynomial:(OrgGeogebraCommonKernelPolynomialBigPolynomial *)p {
  IOSObjectArray *coeff = [IOSObjectArray newArrayWithObjects:(id[]){ JavaMathBigDecimal_get_ZERO_() } count:1 type:JavaMathBigDecimal_class_()];
  for (jint i = (((IOSObjectArray *) nil_chk(coefficients_))->size_ + ((OrgGeogebraCommonKernelPolynomialBigPolynomial *) nil_chk(p))->coefficients_->size_) - 2; i >= 0; i--) {
    JavaMathBigDecimal *sum = JavaMathBigDecimal_get_ZERO_();
    for (jint j = 0; j <= i; j++) {
      if (j < coefficients_->size_ && (i - j) < p->coefficients_->size_) {
        sum = [((JavaMathBigDecimal *) nil_chk(sum)) addWithJavaMathBigDecimal:[((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coefficients_, j))) multiplyWithJavaMathBigDecimal:IOSObjectArray_Get(p->coefficients_, i - j) withJavaMathMathContext:mc_] withJavaMathMathContext:mc_];
      }
    }
    if (![self smallerEpsWithJavaMathBigDecimal:sum]) {
      if (coeff->size_ == 1) {
        coeff = [IOSObjectArray newArrayWithLength:i + 1 type:JavaMathBigDecimal_class_()];
      }
      (void) IOSObjectArray_Set(coeff, i, sum);
    }
    else {
      if (coeff->size_ > 1) {
        (void) IOSObjectArray_Set(coeff, i, JavaMathBigDecimal_get_ZERO_());
      }
    }
  }
  return new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(self, coeff);
}

- (OrgGeogebraCommonKernelPolynomialBigPolynomial *)divideWithOrgGeogebraCommonKernelPolynomialBigPolynomial:(OrgGeogebraCommonKernelPolynomialBigPolynomial *)divisor {
  IOSObjectArray *quotient;
  jint degD = [((OrgGeogebraCommonKernelPolynomialBigPolynomial *) nil_chk(divisor)) degree];
  if (degD < 0) {
    @throw new_JavaLangArithmeticException_initWithNSString_(@"divide by zero polynomial");
  }
  IOSObjectArray *remainder = [self getCoefficients];
  jint k = ((IOSObjectArray *) nil_chk(remainder))->size_ - 1;
  if (k < degD) {
    return new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(self, [IOSObjectArray newArrayWithObjects:(id[]){ JavaMathBigDecimal_get_ZERO_() } count:1 type:JavaMathBigDecimal_class_()]);
  }
  quotient = [IOSObjectArray newArrayWithObjects:(id[]){ JavaMathBigDecimal_get_ZERO_() } count:1 type:JavaMathBigDecimal_class_()];
  JavaMathBigDecimal *lcd = IOSObjectArray_Get(nil_chk(divisor->coefficients_), degD);
  for (jint i = k - degD; i >= 0; i--) {
    JavaMathBigDecimal *q = [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(remainder, k))) divideWithJavaMathBigDecimal:lcd withJavaMathMathContext:mc_];
    if (![self smallerEpsWithJavaMathBigDecimal:q]) {
      if (quotient->size_ == 1) {
        quotient = [IOSObjectArray newArrayWithLength:i + 1 type:JavaMathBigDecimal_class_()];
      }
      (void) IOSObjectArray_Set(quotient, i, q);
      for (jint j = 0; j <= degD - 1; j++) {
        (void) IOSObjectArray_Set(remainder, j + i, [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(remainder, j + i))) subtractWithJavaMathBigDecimal:[((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(quotient, i))) multiplyWithJavaMathBigDecimal:IOSObjectArray_Get(divisor->coefficients_, j) withJavaMathMathContext:mc_] withJavaMathMathContext:mc_]);
      }
    }
    else {
      if (quotient->size_ > 1) {
        (void) IOSObjectArray_Set(quotient, i, JavaMathBigDecimal_get_ZERO_());
      }
    }
    k--;
  }
  return new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(self, quotient);
}

- (IOSDoubleArray *)getCoefficientsDouble {
  IOSDoubleArray *ret = [IOSDoubleArray newArrayWithLength:((IOSObjectArray *) nil_chk(coefficients_))->size_];
  for (jint i = 0; i < coefficients_->size_; i++) {
    *IOSDoubleArray_GetRef(ret, i) = [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coefficients_, i))) doubleValue];
  }
  return ret;
}

- (IOSObjectArray *)getCoefficients {
  IOSObjectArray *coefficients_clone = [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(coefficients_))->size_ type:JavaMathBigDecimal_class_()];
  for (jint i = 0; i < coefficients_->size_; i++) (void) IOSObjectArray_Set(coefficients_clone, i, new_JavaMathBigDecimal_initWithJavaMathBigInteger_withInt_withJavaMathMathContext_([((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coefficients_, i))) unscaledValue], [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coefficients_, i))) scale__], new_JavaMathMathContext_initWithInt_([((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coefficients_, i))) precision])));
  return coefficients_clone;
}

- (JavaMathBigDecimal *)getCoeffWithInt:(jint)index {
  return IOSObjectArray_Get(nil_chk(coefficients_), index);
}

- (jdouble)getCoeffDoubleWithInt:(jint)index {
  return [((JavaMathBigDecimal *) nil_chk([self getCoeffWithInt:index])) doubleValue];
}

- (NSString *)description {
  if (((jint) [((NSString *) nil_chk(representation_)) length]) == 0) {
    JavaLangStringBuilder *sb = new_JavaLangStringBuilder_init();
    for (jint i = 0; i < ((IOSObjectArray *) nil_chk(coefficients_))->size_; i++) {
      NSString *c = [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coefficients_, i))) toPlainString];
      if ([((NSString *) nil_chk(c)) charAtWithInt:0] != '-' && i != 0) (void) [sb appendWithChar:'+'];
      (void) [sb appendWithNSString:c];
      (void) [sb appendWithNSString:@" x^"];
      (void) [sb appendWithInt:i];
    }
    representation_ = [sb description];
  }
  return representation_;
}

- (jboolean)isZeroPolynomial {
  return [self smallerEpsWithJavaMathBigDecimal:IOSObjectArray_Get(coefficients_, ((IOSObjectArray *) nil_chk(coefficients_))->size_ - 1)];
}

- (jboolean)smallerEpsWithJavaMathBigDecimal:(JavaMathBigDecimal *)d {
  return ([((JavaMathBigDecimal *) nil_chk(minusEps_)) compareToWithId:d] <= 0) && ([((JavaMathBigDecimal *) nil_chk(d)) compareToWithId:plusEps_] <= 0);
}

- (OrgGeogebraCommonKernelPolynomialBigComplex *)rootPolishingWithOrgGeogebraCommonKernelPolynomialBigComplex:(OrgGeogebraCommonKernelPolynomialBigComplex *)x {
  jint MAX_ITER = 10;
  OrgGeogebraCommonKernelPolynomialBigComplex *oldX = x;
  JavaMathBigDecimal *lastErr = nil;
  for (jint i = 0; i < MAX_ITER; i++) {
    jint n = ((IOSObjectArray *) nil_chk(coefficients_))->size_ - 1;
    OrgGeogebraCommonKernelPolynomialBigComplex *px = new_OrgGeogebraCommonKernelPolynomialBigComplex_initWithJavaMathBigDecimal_(IOSObjectArray_Get(coefficients_, n));
    OrgGeogebraCommonKernelPolynomialBigComplex *dpx = OrgGeogebraCommonKernelPolynomialBigComplex_get_ZERO_();
    for (jint j = n - 1; j >= 0; j--) {
      dpx = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk([((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(x)) multiplyWithOrgGeogebraCommonKernelPolynomialBigComplex:dpx withJavaMathMathContext:mc_])) addWithOrgGeogebraCommonKernelPolynomialBigComplex:px withJavaMathMathContext:mc_];
      px = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk([px multiplyWithOrgGeogebraCommonKernelPolynomialBigComplex:x withJavaMathMathContext:mc_])) addWithJavaMathBigDecimal:IOSObjectArray_Get(coefficients_, j) withJavaMathMathContext:mc_];
    }
    JavaMathBigDecimal *err = [((JavaMathBigDecimal *) nil_chk([((JavaMathBigDecimal *) nil_chk(((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(px))->real_)) absWithJavaMathMathContext:mc_])) addWithJavaMathBigDecimal:[((JavaMathBigDecimal *) nil_chk(px->imag_)) absWithJavaMathMathContext:mc_] withJavaMathMathContext:mc_];
    if (i > 0 && [((JavaMathBigDecimal *) nil_chk(lastErr)) compareToWithId:err] <= 0) {
      x = oldX;
      break;
    }
    oldX = x;
    x = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(x)) subtractWithOrgGeogebraCommonKernelPolynomialBigComplex:[px divideWithOrgGeogebraCommonKernelPolynomialBigComplex:dpx withJavaMathMathContext:mc_] withJavaMathMathContext:mc_];
    lastErr = err;
  }
  return x;
}

- (IOSDoubleArray *)getRealRootsDoubleWithInt:(jint)precision {
  JavaMathMathContext *mc = new_JavaMathMathContext_initWithInt_(precision);
  IOSObjectArray *roots = [self getRootsLaguerreWithJavaMathMathContext:mc];
  IOSDoubleArray *doubleRoots = [IOSDoubleArray newArrayWithLength:((IOSObjectArray *) nil_chk(roots))->size_];
  jint c = 0;
  for (jint i = 0; i < roots->size_; i++) {
    OrgGeogebraCommonKernelPolynomialBigComplex *root = [self rootPolishingWithOrgGeogebraCommonKernelPolynomialBigComplex:IOSObjectArray_Get(roots, i)];
    jdouble imag = [((JavaMathBigDecimal *) nil_chk(((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(root))->imag_)) doubleValue];
    if (OrgGeogebraCommonKernelKernel_isEqualWithDouble_withDouble_withDouble_(imag, 0., 10E-5)) {
      *IOSDoubleArray_GetRef(doubleRoots, c++) = [((JavaMathBigDecimal *) nil_chk(root->real_)) doubleValue];
    }
  }
  if (c < roots->size_) {
    IOSDoubleArray *doubleRootsFinal = [IOSDoubleArray newArrayWithLength:c];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(doubleRoots, 0, doubleRootsFinal, 0, c);
    return doubleRootsFinal;
  }
  return doubleRoots;
}

- (IOSObjectArray *)getRootsLaguerreWithJavaMathMathContext:(JavaMathMathContext *)mc {
  if (((IOSObjectArray *) nil_chk(coefficients_))->size_ <= 1) {
    return [IOSObjectArray newArrayWithLength:0 type:OrgGeogebraCommonKernelPolynomialBigComplex_class_()];
  }
  IOSObjectArray *coeff = [IOSObjectArray newArrayWithLength:coefficients_->size_ type:OrgGeogebraCommonKernelPolynomialBigComplex_class_()];
  IOSObjectArray *roots = [IOSObjectArray newArrayWithLength:coefficients_->size_ - 1 type:OrgGeogebraCommonKernelPolynomialBigComplex_class_()];
  for (jint i = 0; i < coeff->size_; i++) {
    (void) IOSObjectArray_Set(coeff, i, new_OrgGeogebraCommonKernelPolynomialBigComplex_initWithJavaMathBigDecimal_(IOSObjectArray_Get(coefficients_, i)));
  }
  for (jint i = 0; i < roots->size_ - 1; i++) {
    (void) IOSObjectArray_Set(roots, i, [self getRootWithOrgGeogebraCommonKernelPolynomialBigComplexArray:coeff withOrgGeogebraCommonKernelPolynomialBigComplex:OrgGeogebraCommonKernelPolynomialBigComplex_get_ONE_() withJavaMathMathContext:mc]);
    IOSObjectArray *newCoeff = [IOSObjectArray newArrayWithLength:coeff->size_ - 1 type:OrgGeogebraCommonKernelPolynomialBigComplex_class_()];
    jint n = coeff->size_ - 1;
    OrgGeogebraCommonKernelPolynomialBigComplex *s = IOSObjectArray_Get(coeff, n);
    (void) IOSObjectArray_Set(newCoeff, n - 1, s);
    for (jint j = n - 2; j >= 0; j--) {
      s = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(s)) multiplyWithOrgGeogebraCommonKernelPolynomialBigComplex:IOSObjectArray_Get(roots, i) withJavaMathMathContext:mc];
      s = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(s)) addWithOrgGeogebraCommonKernelPolynomialBigComplex:IOSObjectArray_Get(coeff, j + 1) withJavaMathMathContext:mc];
      (void) IOSObjectArray_Set(newCoeff, j, s);
    }
    coeff = newCoeff;
  }
  (void) IOSObjectArray_Set(roots, roots->size_ - 1, [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk([((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(IOSObjectArray_Get(coeff, 0))) negate])) divideWithOrgGeogebraCommonKernelPolynomialBigComplex:IOSObjectArray_Get(coeff, 1) withJavaMathMathContext:mc]);
  return roots;
}

- (OrgGeogebraCommonKernelPolynomialBigComplex *)getRootWithOrgGeogebraCommonKernelPolynomialBigComplexArray:(IOSObjectArray *)coeff
                                                             withOrgGeogebraCommonKernelPolynomialBigComplex:(OrgGeogebraCommonKernelPolynomialBigComplex *)start
                                                                                     withJavaMathMathContext:(JavaMathMathContext *)mc {
  OrgGeogebraCommonKernelPolynomialBigComplex *x = start;
  for (jint i = 0; i < OrgGeogebraCommonKernelPolynomialBigPolynomial_MAX_ITERATIONS_; i++) {
    jint n = ((IOSObjectArray *) nil_chk(coeff))->size_ - 1;
    OrgGeogebraCommonKernelPolynomialBigComplex *px = IOSObjectArray_Get(coeff, n);
    OrgGeogebraCommonKernelPolynomialBigComplex *dpx = OrgGeogebraCommonKernelPolynomialBigComplex_get_ZERO_();
    OrgGeogebraCommonKernelPolynomialBigComplex *ddpx = OrgGeogebraCommonKernelPolynomialBigComplex_get_ZERO_();
    JavaMathBigDecimal *err = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(px)) absWithJavaMathMathContext:mc];
    JavaMathBigDecimal *abx = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(x)) absWithJavaMathMathContext:mc];
    for (jint j = n - 1; j >= 0; j--) {
      ddpx = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk([x multiplyWithOrgGeogebraCommonKernelPolynomialBigComplex:ddpx withJavaMathMathContext:mc])) addWithOrgGeogebraCommonKernelPolynomialBigComplex:dpx withJavaMathMathContext:mc];
      dpx = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk([x multiplyWithOrgGeogebraCommonKernelPolynomialBigComplex:dpx withJavaMathMathContext:mc])) addWithOrgGeogebraCommonKernelPolynomialBigComplex:px withJavaMathMathContext:mc];
      px = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(IOSObjectArray_Get(coeff, j))) addWithOrgGeogebraCommonKernelPolynomialBigComplex:[px multiplyWithOrgGeogebraCommonKernelPolynomialBigComplex:x withJavaMathMathContext:mc] withJavaMathMathContext:mc];
      err = [((JavaMathBigDecimal *) nil_chk([((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(px)) absWithJavaMathMathContext:mc])) addWithJavaMathBigDecimal:[((JavaMathBigDecimal *) nil_chk(abx)) multiplyWithJavaMathBigDecimal:err withJavaMathMathContext:mc] withJavaMathMathContext:mc];
    }
    ddpx = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(ddpx)) addWithOrgGeogebraCommonKernelPolynomialBigComplex:ddpx withJavaMathMathContext:mc];
    err = [((JavaMathBigDecimal *) nil_chk(err)) multiplyWithJavaMathBigDecimal:plusEps_ withJavaMathMathContext:mc];
    if ([((JavaMathBigDecimal *) nil_chk([((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(px)) absWithJavaMathMathContext:mc])) compareToWithId:err] <= 0) {
      return x;
    }
    OrgGeogebraCommonKernelPolynomialBigComplex *g = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(dpx)) divideWithOrgGeogebraCommonKernelPolynomialBigComplex:px withJavaMathMathContext:mc];
    OrgGeogebraCommonKernelPolynomialBigComplex *g2 = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(g)) multiplyWithOrgGeogebraCommonKernelPolynomialBigComplex:g withJavaMathMathContext:mc];
    OrgGeogebraCommonKernelPolynomialBigComplex *h = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(g2)) subtractWithOrgGeogebraCommonKernelPolynomialBigComplex:[((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(ddpx)) divideWithOrgGeogebraCommonKernelPolynomialBigComplex:px withJavaMathMathContext:mc] withJavaMathMathContext:mc];
    OrgGeogebraCommonKernelPolynomialBigComplex *sq = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk([((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk([((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk([((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(h)) multiplyWithJavaMathBigDecimal:JavaMathBigDecimal_valueOfWithLong_(n) withJavaMathMathContext:mc])) subtractWithOrgGeogebraCommonKernelPolynomialBigComplex:g2 withJavaMathMathContext:mc])) multiplyWithJavaMathBigDecimal:JavaMathBigDecimal_valueOfWithLong_(n - 1) withJavaMathMathContext:mc])) sqrtWithJavaMathMathContext:mc];
    OrgGeogebraCommonKernelPolynomialBigComplex *gp = [g addWithOrgGeogebraCommonKernelPolynomialBigComplex:sq withJavaMathMathContext:mc];
    OrgGeogebraCommonKernelPolynomialBigComplex *gm = [g subtractWithOrgGeogebraCommonKernelPolynomialBigComplex:sq withJavaMathMathContext:mc];
    JavaMathBigDecimal *abp = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(gp)) absWithJavaMathMathContext:mc];
    JavaMathBigDecimal *abm = [((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(gm)) absWithJavaMathMathContext:mc];
    if ([((JavaMathBigDecimal *) nil_chk(abp)) compareToWithId:abm] < 0) {
      gp = gm;
      abp = abm;
    }
    OrgGeogebraCommonKernelPolynomialBigComplex *dx;
    if ([((JavaMathBigDecimal *) nil_chk(abp)) compareToWithId:JavaMathBigDecimal_get_ZERO_()] > 0) {
      dx = [(new_OrgGeogebraCommonKernelPolynomialBigComplex_initWithJavaMathBigDecimal_(JavaMathBigDecimal_valueOfWithLong_(n))) divideWithOrgGeogebraCommonKernelPolynomialBigComplex:gp withJavaMathMathContext:mc];
    }
    else {
      OrgGeogebraCommonMainApp_debugWithNSString_(@"unhandled case");
      dx = OrgGeogebraCommonKernelPolynomialBigComplex_get_ZERO_();
    }
    if ([((JavaMathBigDecimal *) nil_chk([((OrgGeogebraCommonKernelPolynomialBigComplex *) nil_chk(dx)) absWithJavaMathMathContext:mc])) compareToWithId:plusEps_] <= 0) {
      return x;
    }
    x = [x subtractWithOrgGeogebraCommonKernelPolynomialBigComplex:dx withJavaMathMathContext:mc];
  }
  OrgGeogebraCommonUtilDebugLog_warnWithNSString_(@"Max Iterations exceeded");
  return x;
}

- (id)copyWithZone:(NSZone *)zone {
  return [self clone];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "BigPolynomial", NULL, 0x2, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelPolynomialBigPolynomial:", "BigPolynomial", NULL, 0x2, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelPolynomialBigPolynomial:withJavaMathBigDecimalArray:", "BigPolynomial", NULL, 0x4, NULL, NULL },
    { "initWithJavaMathBigDecimalArray:", "BigPolynomial", NULL, 0x2, NULL, NULL },
    { "initWithJavaMathBigDecimalArray:withJavaMathBigDecimal:withJavaMathMathContext:", "BigPolynomial", NULL, 0x1, NULL, NULL },
    { "initWithDoubleArray:withJavaMathMathContext:", "BigPolynomial", NULL, 0x1, NULL, NULL },
    { "initWithDoubleArray:withInt:", "BigPolynomial", NULL, 0x1, NULL, NULL },
    { "initWithDouble:withInt:", "BigPolynomial", NULL, 0x1, NULL, NULL },
    { "copy__", "copy", "Lorg.geogebra.common.kernel.polynomial.BigPolynomial;", 0x1, NULL, NULL },
    { "clone", NULL, "Ljava.lang.Object;", 0x1, NULL, NULL },
    { "degree", NULL, "I", 0x1, NULL, NULL },
    { "evalWithJavaMathBigDecimal:", "eval", "Ljava.math.BigDecimal;", 0x1, NULL, NULL },
    { "evalWithDouble:", "eval", "D", 0x1, NULL, NULL },
    { "addWithOrgGeogebraCommonKernelPolynomialBigPolynomial:", "add", "Lorg.geogebra.common.kernel.polynomial.BigPolynomial;", 0x1, NULL, NULL },
    { "subtractWithOrgGeogebraCommonKernelPolynomialBigPolynomial:", "subtract", "Lorg.geogebra.common.kernel.polynomial.BigPolynomial;", 0x1, NULL, NULL },
    { "multiplyWithOrgGeogebraCommonKernelPolynomialBigPolynomial:", "multiply", "Lorg.geogebra.common.kernel.polynomial.BigPolynomial;", 0x1, NULL, NULL },
    { "divideWithOrgGeogebraCommonKernelPolynomialBigPolynomial:", "divide", "Lorg.geogebra.common.kernel.polynomial.BigPolynomial;", 0x1, NULL, NULL },
    { "getCoefficientsDouble", NULL, "[D", 0x1, NULL, NULL },
    { "getCoefficients", NULL, "[Ljava.math.BigDecimal;", 0x1, NULL, NULL },
    { "getCoeffWithInt:", "getCoeff", "Ljava.math.BigDecimal;", 0x1, NULL, NULL },
    { "getCoeffDoubleWithInt:", "getCoeffDouble", "D", 0x1, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "isZeroPolynomial", NULL, "Z", 0x1, NULL, NULL },
    { "smallerEpsWithJavaMathBigDecimal:", "smallerEps", "Z", 0x4, NULL, NULL },
    { "rootPolishingWithOrgGeogebraCommonKernelPolynomialBigComplex:", "rootPolishing", "Lorg.geogebra.common.kernel.polynomial.BigComplex;", 0x1, NULL, NULL },
    { "getRealRootsDoubleWithInt:", "getRealRootsDouble", "[D", 0x1, NULL, NULL },
    { "getRootsLaguerreWithJavaMathMathContext:", "getRootsLaguerre", "[Lorg.geogebra.common.kernel.polynomial.BigComplex;", 0x1, NULL, NULL },
    { "getRootWithOrgGeogebraCommonKernelPolynomialBigComplexArray:withOrgGeogebraCommonKernelPolynomialBigComplex:withJavaMathMathContext:", "getRoot", "Lorg.geogebra.common.kernel.polynomial.BigComplex;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "coefficients_", NULL, 0x4, "[Ljava.math.BigDecimal;", NULL, NULL,  },
    { "representation_", NULL, 0x4, "Ljava.lang.String;", NULL, NULL,  },
    { "mc_", NULL, 0x4, "Ljava.math.MathContext;", NULL, NULL,  },
    { "plusEps_", NULL, 0x4, "Ljava.math.BigDecimal;", NULL, NULL,  },
    { "minusEps_", NULL, 0x4, "Ljava.math.BigDecimal;", NULL, NULL,  },
    { "MAX_ITERATIONS_", NULL, 0xa, "I", &OrgGeogebraCommonKernelPolynomialBigPolynomial_MAX_ITERATIONS_, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelPolynomialBigPolynomial = { 2, "BigPolynomial", "org.geogebra.common.kernel.polynomial", NULL, 0x1, 28, methods, 6, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelPolynomialBigPolynomial;
}

@end

void OrgGeogebraCommonKernelPolynomialBigPolynomial_init(OrgGeogebraCommonKernelPolynomialBigPolynomial *self) {
  (void) NSObject_init(self);
  self->representation_ = @"";
  self->mc_ = JavaMathMathContext_get_UNLIMITED_();
}

OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_init() {
  OrgGeogebraCommonKernelPolynomialBigPolynomial *self = [OrgGeogebraCommonKernelPolynomialBigPolynomial alloc];
  OrgGeogebraCommonKernelPolynomialBigPolynomial_init(self);
  return self;
}

void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, OrgGeogebraCommonKernelPolynomialBigPolynomial *p) {
  (void) OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(self, p, [((OrgGeogebraCommonKernelPolynomialBigPolynomial *) nil_chk(p)) getCoefficients]);
}

OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_(OrgGeogebraCommonKernelPolynomialBigPolynomial *p) {
  OrgGeogebraCommonKernelPolynomialBigPolynomial *self = [OrgGeogebraCommonKernelPolynomialBigPolynomial alloc];
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_(self, p);
  return self;
}

void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, OrgGeogebraCommonKernelPolynomialBigPolynomial *p, IOSObjectArray *coeff) {
  (void) OrgGeogebraCommonKernelPolynomialBigPolynomial_init(self);
  self->mc_ = ((OrgGeogebraCommonKernelPolynomialBigPolynomial *) nil_chk(p))->mc_;
  self->plusEps_ = p->plusEps_;
  self->minusEps_ = p->minusEps_;
  self->coefficients_ = coeff;
}

OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(OrgGeogebraCommonKernelPolynomialBigPolynomial *p, IOSObjectArray *coeff) {
  OrgGeogebraCommonKernelPolynomialBigPolynomial *self = [OrgGeogebraCommonKernelPolynomialBigPolynomial alloc];
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithOrgGeogebraCommonKernelPolynomialBigPolynomial_withJavaMathBigDecimalArray_(self, p, coeff);
  return self;
}

void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, IOSObjectArray *coeff) {
  (void) OrgGeogebraCommonKernelPolynomialBigPolynomial_init(self);
  IOSObjectArray *coefficients_clone = [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(coeff))->size_ type:JavaMathBigDecimal_class_()];
  for (jint i = 0; i < coeff->size_; i++) (void) IOSObjectArray_Set(coefficients_clone, i, new_JavaMathBigDecimal_initWithJavaMathBigInteger_withInt_withJavaMathMathContext_([((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coeff, i))) unscaledValue], [((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coeff, i))) scale__], new_JavaMathMathContext_initWithInt_([((JavaMathBigDecimal *) nil_chk(IOSObjectArray_Get(coeff, i))) precision])));
  self->coefficients_ = coefficients_clone;
}

OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_(IOSObjectArray *coeff) {
  OrgGeogebraCommonKernelPolynomialBigPolynomial *self = [OrgGeogebraCommonKernelPolynomialBigPolynomial alloc];
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_(self, coeff);
  return self;
}

void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_withJavaMathBigDecimal_withJavaMathMathContext_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, IOSObjectArray *coeff, JavaMathBigDecimal *eps, JavaMathMathContext *mc) {
  (void) OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_(self, coeff);
  self->plusEps_ = eps;
  self->minusEps_ = [((JavaMathBigDecimal *) nil_chk(self->plusEps_)) negate];
  self->mc_ = mc;
}

OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_withJavaMathBigDecimal_withJavaMathMathContext_(IOSObjectArray *coeff, JavaMathBigDecimal *eps, JavaMathMathContext *mc) {
  OrgGeogebraCommonKernelPolynomialBigPolynomial *self = [OrgGeogebraCommonKernelPolynomialBigPolynomial alloc];
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithJavaMathBigDecimalArray_withJavaMathBigDecimal_withJavaMathMathContext_(self, coeff, eps, mc);
  return self;
}

void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withJavaMathMathContext_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, IOSDoubleArray *coeff, JavaMathMathContext *mc) {
  (void) OrgGeogebraCommonKernelPolynomialBigPolynomial_init(self);
  self->coefficients_ = [IOSObjectArray newArrayWithLength:((IOSDoubleArray *) nil_chk(coeff))->size_ type:JavaMathBigDecimal_class_()];
  for (jint i = 0; i < coeff->size_; i++) {
    (void) IOSObjectArray_Set(self->coefficients_, i, new_JavaMathBigDecimal_initWithDouble_withJavaMathMathContext_(IOSDoubleArray_Get(coeff, i), mc));
  }
  self->mc_ = mc;
  self->plusEps_ = new_JavaMathBigDecimal_initWithJavaMathBigInteger_withInt_(JavaMathBigInteger_get_ONE_(), [((JavaMathMathContext *) nil_chk(mc)) getPrecision] / 2);
  self->minusEps_ = [self->plusEps_ negate];
}

OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withJavaMathMathContext_(IOSDoubleArray *coeff, JavaMathMathContext *mc) {
  OrgGeogebraCommonKernelPolynomialBigPolynomial *self = [OrgGeogebraCommonKernelPolynomialBigPolynomial alloc];
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withJavaMathMathContext_(self, coeff, mc);
  return self;
}

void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withInt_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, IOSDoubleArray *coeff, jint precision) {
  (void) OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withJavaMathMathContext_(self, coeff, new_JavaMathMathContext_initWithInt_(precision));
}

OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withInt_(IOSDoubleArray *coeff, jint precision) {
  OrgGeogebraCommonKernelPolynomialBigPolynomial *self = [OrgGeogebraCommonKernelPolynomialBigPolynomial alloc];
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withInt_(self, coeff, precision);
  return self;
}

void OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDouble_withInt_(OrgGeogebraCommonKernelPolynomialBigPolynomial *self, jdouble constant, jint precision) {
  (void) OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDoubleArray_withInt_(self, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ constant } count:1], precision);
}

OrgGeogebraCommonKernelPolynomialBigPolynomial *new_OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDouble_withInt_(jdouble constant, jint precision) {
  OrgGeogebraCommonKernelPolynomialBigPolynomial *self = [OrgGeogebraCommonKernelPolynomialBigPolynomial alloc];
  OrgGeogebraCommonKernelPolynomialBigPolynomial_initWithDouble_withInt_(self, constant, precision);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelPolynomialBigPolynomial)
