//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/kernel/discrete/signalprocessor/voronoi/representation/voronoicell/BestVoronoiCells.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/util/Collection.h"
#include "org/geogebra/common/kernel/discrete/signalprocessor/voronoi/VPoint.h"
#include "org/geogebra/common/kernel/discrete/signalprocessor/voronoi/representation/voronoicell/BestVoronoiCells.h"
#include "org/geogebra/common/kernel/discrete/signalprocessor/voronoi/representation/voronoicell/VVoronoiCell.h"

@interface OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells () {
 @public
  jint numberstored_;
  IOSDoubleArray *bestareas_;
  IOSObjectArray *bestcells_;
}

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells, bestareas_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells, bestcells_, IOSObjectArray *)

@implementation OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells

- (instancetype)initWithInt:(jint)number {
  OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_(self, number);
  return self;
}

- (instancetype)initWithInt:(jint)number
     withJavaUtilCollection:(id<JavaUtilCollection>)voronoicells {
  OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_withJavaUtilCollection_(self, number, voronoicells);
  return self;
}

- (jint)getBestStored {
  return numberstored_;
}

- (jdouble)getBestAreaWithInt:(jint)index {
  return IOSDoubleArray_Get(nil_chk(bestareas_), index);
}

- (OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellVVoronoiCell *)getBestCellWithInt:(jint)index {
  return IOSObjectArray_Get(nil_chk(bestcells_), index);
}

- (jdouble)getTotalAreaOfBest {
  jdouble sum = 0;
  for (jint x = 0; x < numberstored_; x++) sum += IOSDoubleArray_Get(nil_chk(bestareas_), x);
  return sum;
}

- (jdouble)getAverageArea {
  jdouble sum = 0;
  if (numberstored_ == 0) return -1.0;
  for (jint x = 0; x < numberstored_; x++) sum += IOSDoubleArray_Get(nil_chk(bestareas_), x);
  return sum / (numberstored_);
}

- (jint)getAverageX {
  jint tmp = 0;
  if (numberstored_ == 0) return -1;
  for (jint x = 0; x < numberstored_; x++) tmp += ((OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellVVoronoiCell *) nil_chk(IOSObjectArray_Get(nil_chk(bestcells_), x)))->x_;
  return tmp / numberstored_;
}

- (jint)getAverageY {
  jint tmp = 0;
  if (numberstored_ == 0) return -1;
  for (jint x = 0; x < numberstored_; x++) tmp += ((OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellVVoronoiCell *) nil_chk(IOSObjectArray_Get(nil_chk(bestcells_), x)))->y_;
  return tmp / numberstored_;
}

- (void)findBestWithJavaUtilCollection:(id<JavaUtilCollection>)voronoicells {
  numberstored_ = 0;
  jdouble area;
  jint index, tmp;
  OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellVVoronoiCell *cell;
  for (OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint * __strong point in nil_chk(voronoicells)) {
    cell = (OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellVVoronoiCell *) check_class_cast(point, [OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellVVoronoiCell class]);
    area = [((OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellVVoronoiCell *) nil_chk(cell)) getAreaOfCell];
    if (area < 0) continue;
    if (numberstored_ == 0) {
      numberstored_ = 1;
      *IOSDoubleArray_GetRef(nil_chk(bestareas_), 0) = area;
      (void) IOSObjectArray_Set(nil_chk(bestcells_), 0, cell);
    }
    else {
      index = numberstored_;
      while (IOSDoubleArray_Get(nil_chk(bestareas_), index - 1) > area) {
        if (index > 1) {
          index--;
          continue;
        }
        index = 0;
        break;
      }
      if (index < bestareas_->size_) {
        if (numberstored_ < bestareas_->size_) {
          tmp = numberstored_;
          numberstored_++;
        }
        else {
          tmp = bestareas_->size_ - 1;
        }
        for (; tmp > index; tmp--) {
          *IOSDoubleArray_GetRef(bestareas_, tmp) = IOSDoubleArray_Get(bestareas_, tmp - 1);
          (void) IOSObjectArray_Set(nil_chk(bestcells_), tmp, IOSObjectArray_Get(bestcells_, tmp - 1));
        }
        *IOSDoubleArray_GetRef(bestareas_, index) = area;
        (void) IOSObjectArray_Set(nil_chk(bestcells_), index, cell);
      }
    }
  }
  for (tmp = numberstored_; tmp < ((IOSDoubleArray *) nil_chk(bestareas_))->size_; tmp++) {
    *IOSDoubleArray_GetRef(bestareas_, tmp) = 0.0;
    (void) IOSObjectArray_Set(nil_chk(bestcells_), tmp, nil);
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "BestVoronoiCells", NULL, 0x1, NULL, NULL },
    { "initWithInt:withJavaUtilCollection:", "BestVoronoiCells", NULL, 0x1, NULL, NULL },
    { "getBestStored", NULL, "I", 0x1, NULL, NULL },
    { "getBestAreaWithInt:", "getBestArea", "D", 0x1, NULL, NULL },
    { "getBestCellWithInt:", "getBestCell", "Lorg.geogebra.common.kernel.discrete.signalprocessor.voronoi.representation.voronoicell.VVoronoiCell;", 0x1, NULL, NULL },
    { "getTotalAreaOfBest", NULL, "D", 0x1, NULL, NULL },
    { "getAverageArea", NULL, "D", 0x1, NULL, NULL },
    { "getAverageX", NULL, "I", 0x1, NULL, NULL },
    { "getAverageY", NULL, "I", 0x1, NULL, NULL },
    { "findBestWithJavaUtilCollection:", "findBest", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "numberstored_", NULL, 0x2, "I", NULL, NULL,  },
    { "bestareas_", NULL, 0x2, "[D", NULL, NULL,  },
    { "bestcells_", NULL, 0x2, "[Lorg.geogebra.common.kernel.discrete.signalprocessor.voronoi.representation.voronoicell.VVoronoiCell;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells = { 2, "BestVoronoiCells", "org.geogebra.common.kernel.discrete.signalprocessor.voronoi.representation.voronoicell", NULL, 0x1, 10, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells;
}

@end

void OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_(OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells *self, jint number) {
  (void) NSObject_init(self);
  self->bestareas_ = [IOSDoubleArray newArrayWithLength:number];
  self->bestcells_ = [IOSObjectArray newArrayWithLength:number type:OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellVVoronoiCell_class_()];
}

OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells *new_OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_(jint number) {
  OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells *self = [OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells alloc];
  OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_(self, number);
  return self;
}

void OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_withJavaUtilCollection_(OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells *self, jint number, id<JavaUtilCollection> voronoicells) {
  (void) OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_(self, number);
  [self findBestWithJavaUtilCollection:voronoicells];
}

OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells *new_OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_withJavaUtilCollection_(jint number, id<JavaUtilCollection> voronoicells) {
  OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells *self = [OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells alloc];
  OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells_initWithInt_withJavaUtilCollection_(self, number, voronoicells);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationVoronoicellBestVoronoiCells)
