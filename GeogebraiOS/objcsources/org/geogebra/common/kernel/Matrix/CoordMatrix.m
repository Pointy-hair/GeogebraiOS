//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/geogebra/common/kernel/Matrix/CoordMatrix.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/PrintStream.h"
#include "java/lang/Double.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/Matrix/CoordMatrix.h"
#include "org/geogebra/common/kernel/Matrix/CoordMatrix4x4.h"
#include "org/geogebra/common/kernel/Matrix/Coords.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoList.h"
#include "org/geogebra/common/kernel/geos/GeoNumeric.h"
#include "org/geogebra/common/main/App.h"

@class OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix;
@class OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes;
@protocol OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface;

@interface OrgGeogebraCommonKernelMatrixCoordMatrix () {
 @public
  OrgGeogebraCommonKernelMatrixCoordMatrix *inverse__;
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes *pivotSolRes_;
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix *pivotInverseMatrix_;
  IOSObjectArray *pivotMatrix_;
}

- (void)initialiseWithInt:(jint)rows
                  withInt:(jint)columns OBJC_METHOD_FAMILY_NONE;

- (void)updatePivotMatrix;

+ (void)pivotWithDoubleArray2:(IOSObjectArray *)matrix
withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface:(id<OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface>)psr
                      withInt:(jint)step
        withJavaUtilArrayList:(JavaUtilArrayList *)stack;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelMatrixCoordMatrix, inverse__, OrgGeogebraCommonKernelMatrixCoordMatrix *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelMatrixCoordMatrix, pivotSolRes_, OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelMatrixCoordMatrix, pivotInverseMatrix_, OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelMatrixCoordMatrix, pivotMatrix_, IOSObjectArray *)

__attribute__((unused)) static void OrgGeogebraCommonKernelMatrixCoordMatrix_initialiseWithInt_withInt_(OrgGeogebraCommonKernelMatrixCoordMatrix *self, jint rows, jint columns);

__attribute__((unused)) static void OrgGeogebraCommonKernelMatrixCoordMatrix_updatePivotMatrix(OrgGeogebraCommonKernelMatrixCoordMatrix *self);

__attribute__((unused)) static void OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_withInt_withJavaUtilArrayList_(IOSObjectArray *matrix, id<OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface> psr, jint step, JavaUtilArrayList *stack);

@protocol OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface < NSObject, JavaObject >

- (void)divideFirstWithInt:(jint)index
                withDouble:(jdouble)factor;

- (void)divideResWithInt:(jint)step
              withDouble:(jdouble)value;

- (void)subResWithInt:(jint)l
              withInt:(jint)step
           withDouble:(jdouble)coef;

- (void)calcSolWithInt:(jint)index
               withInt:(jint)step
      withDoubleArray2:(IOSObjectArray *)matrix
 withJavaUtilArrayList:(JavaUtilArrayList *)stack;

@end

@interface OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface : NSObject
@end

J2OBJC_EMPTY_STATIC_INIT(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface)

J2OBJC_TYPE_LITERAL_HEADER(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface)

@interface OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes : NSObject < OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface > {
 @public
  IOSDoubleArray *sol_;
  IOSDoubleArray *res_;
}

- (instancetype)init;

- (void)divideFirstWithInt:(jint)index
                withDouble:(jdouble)factor;

- (void)divideResWithInt:(jint)step
              withDouble:(jdouble)value;

- (void)subResWithInt:(jint)l
              withInt:(jint)step
           withDouble:(jdouble)coef;

- (void)calcSolWithInt:(jint)index
               withInt:(jint)step
      withDoubleArray2:(IOSObjectArray *)matrix
 withJavaUtilArrayList:(JavaUtilArrayList *)stack;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes)

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes, sol_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes, res_, IOSDoubleArray *)

__attribute__((unused)) static void OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_init(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes *self);

__attribute__((unused)) static OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes *new_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes)

@interface OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix : NSObject < OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface > {
 @public
  jint columns_;
  IOSDoubleArray *matrixRes_;
  IOSObjectArray *inverse_;
}

- (instancetype)init;

- (void)divideFirstWithInt:(jint)index
                withDouble:(jdouble)factor;

- (void)divideResWithInt:(jint)step
              withDouble:(jdouble)value;

- (void)subResWithInt:(jint)l
              withInt:(jint)step
           withDouble:(jdouble)coef;

- (void)calcSolWithInt:(jint)index
               withInt:(jint)step
      withDoubleArray2:(IOSObjectArray *)matrix
 withJavaUtilArrayList:(JavaUtilArrayList *)stack;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix)

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix, matrixRes_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix, inverse_, IOSObjectArray *)

__attribute__((unused)) static void OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_init(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix *self);

__attribute__((unused)) static OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix *new_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix)

@implementation OrgGeogebraCommonKernelMatrixCoordMatrix

- (instancetype)initWithInt:(jint)rows
                    withInt:(jint)columns
            withDoubleArray:(IOSDoubleArray *)val {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_withDoubleArray_(self, rows, columns, val);
  return self;
}

- (instancetype)initWithInt:(jint)rows
                    withInt:(jint)columns {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(self, rows, columns);
  return self;
}

- (void)initialiseWithInt:(jint)rows
                  withInt:(jint)columns {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialiseWithInt_withInt_(self, rows, columns);
}

- (instancetype)initWithOrgGeogebraCommonKernelGeosGeoList:(OrgGeogebraCommonKernelGeosGeoList *)inputList {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initWithOrgGeogebraCommonKernelGeosGeoList_(self, inputList);
  return self;
}

+ (OrgGeogebraCommonKernelMatrixCoordMatrix *)IdentityWithInt:(jint)n {
  return OrgGeogebraCommonKernelMatrixCoordMatrix_IdentityWithInt_(n);
}

+ (OrgGeogebraCommonKernelMatrixCoordMatrix *)ScaleMatrixWithDoubleArray:(IOSDoubleArray *)v {
  return OrgGeogebraCommonKernelMatrixCoordMatrix_ScaleMatrixWithDoubleArray_(v);
}

+ (OrgGeogebraCommonKernelMatrixCoordMatrix *)ScaleMatrixWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  return OrgGeogebraCommonKernelMatrixCoordMatrix_ScaleMatrixWithOrgGeogebraCommonKernelMatrixCoords_(v);
}

+ (OrgGeogebraCommonKernelMatrixCoordMatrix *)DiagonalMatrixWithDoubleArray:(IOSDoubleArray *)vals {
  return OrgGeogebraCommonKernelMatrixCoordMatrix_DiagonalMatrixWithDoubleArray_(vals);
}

+ (OrgGeogebraCommonKernelMatrixCoordMatrix *)TranslationMatrixWithDoubleArray:(IOSDoubleArray *)v {
  return OrgGeogebraCommonKernelMatrixCoordMatrix_TranslationMatrixWithDoubleArray_(v);
}

+ (OrgGeogebraCommonKernelMatrixCoordMatrix *)TranslationMatrixWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  return OrgGeogebraCommonKernelMatrixCoordMatrix_TranslationMatrixWithOrgGeogebraCommonKernelMatrixCoords_(v);
}

+ (OrgGeogebraCommonKernelMatrixCoordMatrix *)Rotation3DMatrixWithInt:(jint)axe
                                                           withDouble:(jdouble)angle {
  return OrgGeogebraCommonKernelMatrixCoordMatrix_Rotation3DMatrixWithInt_withDouble_(axe, angle);
}

+ (void)Rotation3x3WithDouble:(jdouble)angle
withOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m {
  OrgGeogebraCommonKernelMatrixCoordMatrix_Rotation3x3WithDouble_withOrgGeogebraCommonKernelMatrixCoordMatrix_(angle, m);
}

+ (void)Rotation3x3WithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)u
                                                withDouble:(jdouble)angle
              withOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m {
  OrgGeogebraCommonKernelMatrixCoordMatrix_Rotation3x3WithOrgGeogebraCommonKernelMatrixCoords_withDouble_withOrgGeogebraCommonKernelMatrixCoordMatrix_(u, angle, m);
}

- (void)getWithDoubleArray:(IOSDoubleArray *)val {
  for (jint i = 0; i < rows_; i++) {
    for (jint j = 0; j < columns_; j++) {
      *IOSDoubleArray_GetRef(nil_chk(val), i + j * rows_) = [self getWithInt:i + 1 withInt:j + 1];
    }
  }
}

- (jdouble)getWithInt:(jint)i
              withInt:(jint)j {
  return [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors_), j - 1))) getWithInt:i];
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)subMatrixWithInt:(jint)i
                                                       withInt:(jint)j {
  OrgGeogebraCommonKernelMatrixCoordMatrix *ret = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_([self getRows] - 1, [self getColumns] - 1) autorelease];
  for (jint i1 = 1; i1 < i; i1++) {
    for (jint j1 = 1; j1 < j; j1++) {
      [ret setWithInt:i1 withInt:j1 withDouble:[self getWithInt:i1 withInt:j1]];
    }
    for (jint j1 = j + 1; j1 <= [self getColumns]; j1++) {
      [ret setWithInt:i1 withInt:j1 - 1 withDouble:[self getWithInt:i1 withInt:j1]];
    }
  }
  for (jint i1 = i + 1; i1 <= [self getRows]; i1++) {
    for (jint j1 = 1; j1 < j; j1++) {
      [ret setWithInt:i1 - 1 withInt:j1 withDouble:[self getWithInt:i1 withInt:j1]];
    }
    for (jint j1 = j + 1; j1 <= [self getColumns]; j1++) {
      [ret setWithInt:i1 - 1 withInt:j1 - 1 withDouble:[self getWithInt:i1 withInt:j1]];
    }
  }
  return ret;
}

- (OrgGeogebraCommonKernelMatrixCoords *)getColumnWithInt:(jint)j {
  return IOSObjectArray_Get(nil_chk(vectors_), j - 1);
}

- (OrgGeogebraCommonKernelGeosGeoList *)getGeoListWithOrgGeogebraCommonKernelGeosGeoList:(OrgGeogebraCommonKernelGeosGeoList *)outputList
                                                 withOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons {
  if ([self isSingular]) {
    [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(outputList)) setDefinedWithBoolean:NO];
    return outputList;
  }
  [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(outputList)) clear];
  [outputList setDefinedWithBoolean:YES];
  for (jint r = 0; r < rows_; r++) {
    OrgGeogebraCommonKernelGeosGeoList *columnList = [new_OrgGeogebraCommonKernelGeosGeoList_initWithOrgGeogebraCommonKernelConstruction_(cons) autorelease];
    for (jint c = 0; c < columns_; c++) {
      OrgGeogebraCommonKernelGeosGeoNumeric *num = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(cons) autorelease];
      [num setValueWithDouble:[self getWithInt:r + 1 withInt:c + 1]];
      [columnList addWithOrgGeogebraCommonKernelGeosGeoElement:num];
    }
    [outputList addWithOrgGeogebraCommonKernelGeosGeoElement:columnList];
  }
  return outputList;
}

- (void)setWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)V
                                           withInt:(jint)j {
  for (jint i = 1; i <= [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(V)) getLength]; i++) {
    [self setWithInt:i withInt:j withDouble:[V getWithInt:i]];
  }
}

- (void)setWithOrgGeogebraCommonKernelMatrixCoordsArray:(IOSObjectArray *)V {
  jint j;
  for (j = 0; j < ((IOSObjectArray *) nil_chk(V))->size_; j++) {
    [self setWithOrgGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(V, j) withInt:j + 1];
  }
}

- (void)setWithInt:(jint)i
           withInt:(jint)j
        withDouble:(jdouble)val0 {
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors_), j - 1))) setWithInt:i withDouble:val0];
}

- (void)setWithDouble:(jdouble)val0 {
  for (jint i = 0; i < columns_; i++) {
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors_), i))) setWithDouble:val0];
  }
}

- (void)setWithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m {
  for (jint i = 1; i <= [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m)) getRows]; i++) {
    for (jint j = 1; j <= [m getColumns]; j++) {
      [self setWithInt:i withInt:j withDouble:[m getWithInt:i withInt:j]];
    }
  }
}

- (jint)getRows {
  return rows_;
}

- (jint)getColumns {
  return columns_;
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)copy__ {
  OrgGeogebraCommonKernelMatrixCoordMatrix *result = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_([self getRows], [self getColumns]) autorelease];
  for (jint i = 1; i <= [result getRows]; i++) {
    for (jint j = 1; j <= [result getColumns]; j++) {
      [result setWithInt:i withInt:j withDouble:[self getWithInt:i withInt:j]];
    }
  }
  return result;
}

- (void)copy__WithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)result {
  for (jint i = 1; i <= [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(result)) getRows]; i++) {
    for (jint j = 1; j <= [result getColumns]; j++) {
      [result setWithInt:i withInt:j withDouble:[self getWithInt:i withInt:j]];
    }
  }
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)transposeCopy {
  OrgGeogebraCommonKernelMatrixCoordMatrix *result = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(columns_, rows_) autorelease];
  [self transposeCopyWithOrgGeogebraCommonKernelMatrixCoordMatrix:result];
  return result;
}

- (void)transposeCopyWithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)result {
  for (jint i = 1; i <= [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(result)) getRows]; i++) {
    for (jint j = 1; j <= [result getColumns]; j++) {
      [result setWithInt:i withInt:j withDouble:[self getWithInt:j withInt:i]];
    }
  }
}

- (void)SystemPrint {
  OrgGeogebraCommonMainApp_debugWithNSString_([self description]);
}

- (NSString *)description {
  NSString *s = @"";
  for (jint i = 1; i <= [self getRows]; i++) {
    for (jint j = 1; j <= [self getColumns]; j++) {
      jdouble v = [self getWithInt:i withInt:j];
      if (OrgGeogebraCommonKernelKernel_isZeroWithDouble_(v)) v = 0;
      s = JreStrcat("$$", s, JreStrcat("$D", @"  ", v));
    }
    s = JreStrcat("$C", s, 0x000a);
  }
  return s;
}

- (jboolean)isDefined {
  for (jint i = 0; i < columns_; i++) {
    if (![((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors_), i))) isDefined]) {
      return NO;
    }
  }
  return YES;
}

- (jboolean)isFinite {
  for (jint i = 0; i < columns_; i++) {
    if (![((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors_), i))) isFinite]) {
      return NO;
    }
  }
  return YES;
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)mulWithDouble:(jdouble)val0 {
  OrgGeogebraCommonKernelMatrixCoordMatrix *result = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_([self getRows], [self getColumns]) autorelease];
  for (jint i = 1; i <= [result getRows]; i++) {
    for (jint j = 1; j <= [result getColumns]; j++) {
      [result setWithInt:i withInt:j withDouble:val0 * [self getWithInt:i withInt:j]];
    }
  }
  return result;
}

- (void)mulInsideWithDouble:(jdouble)v {
  for (jint i = 0; i < columns_; i++) {
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors_), i))) mulInsideWithDouble:v];
  }
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)addWithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m {
  OrgGeogebraCommonKernelMatrixCoordMatrix *result = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_([self getRows], [self getColumns]) autorelease];
  for (jint i = 1; i <= [result getRows]; i++) {
    for (jint j = 1; j <= [result getColumns]; j++) {
      [result setWithInt:i withInt:j withDouble:[self getWithInt:i withInt:j] + [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m)) getWithInt:i withInt:j]];
    }
  }
  return result;
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)addSmallerWithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m {
  OrgGeogebraCommonKernelMatrixCoordMatrix *result = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_([self getRows], [self getColumns]) autorelease];
  for (jint i = 1; i <= [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m)) getRows]; i++) {
    for (jint j = 1; j <= [m getColumns]; j++) {
      [result setWithInt:i withInt:j withDouble:[self getWithInt:i withInt:j] + [m getWithInt:i withInt:j]];
    }
  }
  return result;
}

- (OrgGeogebraCommonKernelMatrixCoords *)mulWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  OrgGeogebraCommonKernelMatrixCoords *result = [new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_([self getRows]) autorelease];
  for (jint i = 1; i <= [result getLength]; i++) {
    jdouble r = 0;
    for (jint n = 1; n <= [self getColumns]; n++) r += [self getWithInt:i withInt:n] * [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(v)) getWithInt:n];
    [result setWithInt:i withDouble:r];
  }
  return result;
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)mulWithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m {
  OrgGeogebraCommonKernelMatrixCoordMatrix *result = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_([self getRows], [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m)) getColumns]) autorelease];
  [self mulWithOrgGeogebraCommonKernelMatrixCoordMatrix:m withOrgGeogebraCommonKernelMatrixCoordMatrix:result];
  return result;
}

- (void)mulWithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m
           withOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)result {
  for (jint i = 1; i <= [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(result)) getRows]; i++) {
    for (jint j = 1; j <= [result getColumns]; j++) {
      jdouble r = 0;
      for (jint n = 1; n <= [self getColumns]; n++) r += [self getWithInt:i withInt:n] * [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m)) getWithInt:n withInt:j];
      [result setWithInt:i withInt:j withDouble:r];
    }
  }
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)setMulWithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m1
                                                    withOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m2 {
  for (jint i = 1; i <= [self getRows]; i++) {
    for (jint j = 1; j <= [self getColumns]; j++) {
      jdouble r = 0;
      for (jint n = 1; n <= [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m1)) getColumns]; n++) {
        r += [m1 getWithInt:i withInt:n] * [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m2)) getWithInt:n withInt:j];
      }
      [self setWithInt:i withInt:j withDouble:r];
    }
  }
  return self;
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)setMulT1WithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m1
                                                      withOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m2 {
  for (jint i = 1; i <= [self getRows]; i++) {
    for (jint j = 1; j <= [self getColumns]; j++) {
      jdouble r = 0;
      for (jint n = 1; n <= [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m1)) getRows]; n++) {
        r += [m1 getWithInt:n withInt:i] * [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m2)) getWithInt:n withInt:j];
      }
      [self setWithInt:i withInt:j withDouble:r];
    }
  }
  return self;
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix4x4 *)mul3x3WithOrgGeogebraCommonKernelMatrixCoordMatrix:(OrgGeogebraCommonKernelMatrixCoordMatrix *)m {
  OrgGeogebraCommonKernelMatrixCoordMatrix4x4 *result = [new_OrgGeogebraCommonKernelMatrixCoordMatrix4x4_init() autorelease];
  for (jint i = 1; i <= 3; i++) {
    for (jint j = 1; j <= 3; j++) {
      jdouble r = 0;
      for (jint n = 1; n <= 3; n++) r += [self getWithInt:i withInt:n] * [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m)) getWithInt:n withInt:j];
      [result setWithInt:i withInt:j withDouble:r];
    }
  }
  return result;
}

- (jdouble)det {
  jdouble ret = 0.0;
  if ([self getRows] == 1) {
    ret = [self getWithInt:1 withInt:1];
  }
  else {
    jdouble signe = 1.0;
    for (jint j = 1; j <= [self getColumns]; j++) {
      ret += [self getWithInt:1 withInt:j] * signe * ([((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk([self subMatrixWithInt:1 withInt:j])) det]);
      signe = -signe;
    }
  }
  return ret;
}

- (jboolean)isSquare {
  if ([self isSingular]) return NO;
  return [self getRows] == [self getColumns];
}

- (OrgGeogebraCommonKernelMatrixCoordMatrix *)inverse {
  if (inverse__ == nil) {
    OrgGeogebraCommonKernelMatrixCoordMatrix_setAndConsume_inverse__(self, new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_([self getRows], [self getColumns]));
  }
  if (pivotInverseMatrix_ == nil) {
    OrgGeogebraCommonKernelMatrixCoordMatrix_setAndConsume_pivotInverseMatrix_(self, new_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_init());
    OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_setAndConsume_matrixRes_(pivotInverseMatrix_, [IOSDoubleArray newArrayWithLength:columns_ * columns_]);
    for (jint c = 0; c < columns_; c++) {
      *IOSDoubleArray_GetRef(pivotInverseMatrix_->matrixRes_, c * rows_ + c) = 1;
    }
    OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_set_inverse_(pivotInverseMatrix_, ((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(inverse__))->vectors_);
    pivotInverseMatrix_->columns_ = columns_;
  }
  else {
    for (jint c = 0; c < columns_; c++) {
      for (jint r = 0; r < rows_; r++) {
        *IOSDoubleArray_GetRef(nil_chk(pivotInverseMatrix_->matrixRes_), c * rows_ + r) = 0;
      }
      *IOSDoubleArray_GetRef(nil_chk(pivotInverseMatrix_->matrixRes_), c * rows_ + c) = 1;
    }
  }
  OrgGeogebraCommonKernelMatrixCoordMatrix_updatePivotMatrix(self);
  OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_(pivotMatrix_, pivotInverseMatrix_);
  return inverse__;
}

- (OrgGeogebraCommonKernelMatrixCoords *)solveWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  OrgGeogebraCommonKernelMatrixCoords *sol = [new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(v)) getLength]) autorelease];
  [self pivotWithOrgGeogebraCommonKernelMatrixCoords:sol withOrgGeogebraCommonKernelMatrixCoords:v];
  return sol;
}

+ (void)solveWithDoubleArray:(IOSDoubleArray *)sol
withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)res
withOrgGeogebraCommonKernelMatrixCoordsArray:(IOSObjectArray *)columns {
  OrgGeogebraCommonKernelMatrixCoordMatrix_solveWithDoubleArray_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoordsArray_(sol, res, columns);
}

- (void)updatePivotMatrix {
  OrgGeogebraCommonKernelMatrixCoordMatrix_updatePivotMatrix(self);
}

- (void)pivotWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)sol
             withOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)res {
  OrgGeogebraCommonKernelMatrixCoordMatrix_updatePivotMatrix(self);
  if (pivotSolRes_ == nil) {
    OrgGeogebraCommonKernelMatrixCoordMatrix_setAndConsume_pivotSolRes_(self, new_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_init());
  }
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_setAndConsume_res_(nil_chk(pivotSolRes_), [IOSDoubleArray newArrayWithLength:[((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(res)) getLength]]);
  for (jint r = 0; r < rows_; r++) {
    *IOSDoubleArray_GetRef(pivotSolRes_->res_, r) = IOSDoubleArray_Get(nil_chk(res->val_), r);
  }
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_set_sol_(pivotSolRes_, ((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(sol))->val_);
  OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_(pivotMatrix_, pivotSolRes_);
}

+ (void)pivotWithDoubleArray2:(IOSObjectArray *)matrix
withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface:(id<OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface>)psr {
  OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_(matrix, psr);
}

+ (void)pivotWithDoubleArray2:(IOSObjectArray *)matrix
withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface:(id<OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface>)psr
                      withInt:(jint)step
        withJavaUtilArrayList:(JavaUtilArrayList *)stack {
  OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_withInt_withJavaUtilArrayList_(matrix, psr, step, stack);
}

- (jboolean)isSingular {
  return JavaLangDouble_isNaNWithDouble_([((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors_), 0))) getWithInt:1]);
}

- (void)setIsSingularWithBoolean:(jboolean)isSingular {
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors_), 0))) setWithInt:1 withDouble:JavaLangDouble_NaN];
}

- (OrgGeogebraCommonKernelMatrixCoords *)getOrigin {
  return [self getColumnWithInt:[self getColumns]];
}

- (OrgGeogebraCommonKernelMatrixCoords *)getVx {
  return [self getColumnWithInt:1];
}

- (OrgGeogebraCommonKernelMatrixCoords *)getVy {
  return [self getColumnWithInt:2];
}

- (OrgGeogebraCommonKernelMatrixCoords *)getVz {
  return [self getColumnWithInt:3];
}

- (void)setOriginWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self setWithOrgGeogebraCommonKernelMatrixCoords:v withInt:[self getColumns]];
}

- (void)addToOriginWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self addToColumnWithOrgGeogebraCommonKernelMatrixCoords:v withInt:[self getColumns]];
}

- (void)subToOriginWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self subToColumnWithOrgGeogebraCommonKernelMatrixCoords:v withInt:[self getColumns]];
}

- (void)addToVxWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self addToColumnWithOrgGeogebraCommonKernelMatrixCoords:v withInt:1];
}

- (void)addToVyWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self addToColumnWithOrgGeogebraCommonKernelMatrixCoords:v withInt:2];
}

- (void)addToVzWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self addToColumnWithOrgGeogebraCommonKernelMatrixCoords:v withInt:3];
}

- (void)addToColumnWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v
                                                   withInt:(jint)j {
  for (jint i = 1; i <= [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(v)) getLength]; i++) {
    [self setWithInt:i withInt:j withDouble:[self getWithInt:i withInt:j] + [v getWithInt:i]];
  }
}

- (void)subToColumnWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v
                                                   withInt:(jint)j {
  for (jint i = 1; i <= [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(v)) getLength]; i++) {
    [self setWithInt:i withInt:j withDouble:[self getWithInt:i withInt:j] - [v getWithInt:i]];
  }
}

- (void)mulColumnWithDouble:(jdouble)v
                    withInt:(jint)j {
  for (jint i = 1; i <= [self getRows]; i++) {
    [self setWithInt:i withInt:j withDouble:[self getWithInt:i withInt:j] * v];
  }
}

- (void)mulOriginWithDouble:(jdouble)v {
  [self mulColumnWithDouble:v withInt:[self getColumns]];
}

- (void)setVxWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self setWithOrgGeogebraCommonKernelMatrixCoords:v withInt:1];
}

- (void)setVyWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self setWithOrgGeogebraCommonKernelMatrixCoords:v withInt:2];
}

- (void)setVzWithOrgGeogebraCommonKernelMatrixCoords:(OrgGeogebraCommonKernelMatrixCoords *)v {
  [self setWithOrgGeogebraCommonKernelMatrixCoords:v withInt:3];
}

- (void)getForGLWithFloatArray:(IOSFloatArray *)val {
  jint index = 0;
  for (jint x = 0; x < columns_; x++) {
    for (jint y = 0; y < rows_; y++) {
      *IOSFloatArray_GetRef(nil_chk(val), index) = (jfloat) [self getWithInt:y + 1 withInt:x + 1];
      index++;
    }
  }
}

+ (void)test {
  OrgGeogebraCommonKernelMatrixCoordMatrix_test();
}

- (void)dealloc {
  RELEASE_(vectors_);
  RELEASE_(inverse__);
  RELEASE_(pivotSolRes_);
  RELEASE_(pivotInverseMatrix_);
  RELEASE_(pivotMatrix_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:withDoubleArray:", "CoordMatrix", NULL, 0x1, NULL, NULL },
    { "initWithInt:withInt:", "CoordMatrix", NULL, 0x1, NULL, NULL },
    { "initialiseWithInt:withInt:", "initialise", "V", 0x2, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelGeosGeoList:", "CoordMatrix", NULL, 0x1, NULL, NULL },
    { "IdentityWithInt:", "Identity", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x19, NULL, NULL },
    { "ScaleMatrixWithDoubleArray:", "ScaleMatrix", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x19, NULL, NULL },
    { "ScaleMatrixWithOrgGeogebraCommonKernelMatrixCoords:", "ScaleMatrix", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x19, NULL, NULL },
    { "DiagonalMatrixWithDoubleArray:", "DiagonalMatrix", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x19, NULL, NULL },
    { "TranslationMatrixWithDoubleArray:", "TranslationMatrix", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x19, NULL, NULL },
    { "TranslationMatrixWithOrgGeogebraCommonKernelMatrixCoords:", "TranslationMatrix", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x19, NULL, NULL },
    { "Rotation3DMatrixWithInt:withDouble:", "Rotation3DMatrix", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x19, NULL, NULL },
    { "Rotation3x3WithDouble:withOrgGeogebraCommonKernelMatrixCoordMatrix:", "Rotation3x3", "V", 0x19, NULL, NULL },
    { "Rotation3x3WithOrgGeogebraCommonKernelMatrixCoords:withDouble:withOrgGeogebraCommonKernelMatrixCoordMatrix:", "Rotation3x3", "V", 0x19, NULL, NULL },
    { "getWithDoubleArray:", "get", "V", 0x1, NULL, NULL },
    { "getWithInt:withInt:", "get", "D", 0x1, NULL, NULL },
    { "subMatrixWithInt:withInt:", "subMatrix", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "getColumnWithInt:", "getColumn", "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "getGeoListWithOrgGeogebraCommonKernelGeosGeoList:withOrgGeogebraCommonKernelConstruction:", "getGeoList", "Lorg.geogebra.common.kernel.geos.GeoList;", 0x1, NULL, NULL },
    { "setWithOrgGeogebraCommonKernelMatrixCoords:withInt:", "set", "V", 0x1, NULL, NULL },
    { "setWithOrgGeogebraCommonKernelMatrixCoordsArray:", "set", "V", 0x1, NULL, NULL },
    { "setWithInt:withInt:withDouble:", "set", "V", 0x1, NULL, NULL },
    { "setWithDouble:", "set", "V", 0x1, NULL, NULL },
    { "setWithOrgGeogebraCommonKernelMatrixCoordMatrix:", "set", "V", 0x1, NULL, NULL },
    { "getRows", NULL, "I", 0x1, NULL, NULL },
    { "getColumns", NULL, "I", 0x1, NULL, NULL },
    { "copy__", "copy", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "copy__WithOrgGeogebraCommonKernelMatrixCoordMatrix:", "copy", "V", 0x1, NULL, NULL },
    { "transposeCopy", NULL, "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "transposeCopyWithOrgGeogebraCommonKernelMatrixCoordMatrix:", "transposeCopy", "V", 0x1, NULL, NULL },
    { "SystemPrint", NULL, "V", 0x1, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "isDefined", NULL, "Z", 0x1, NULL, NULL },
    { "isFinite", NULL, "Z", 0x1, NULL, NULL },
    { "mulWithDouble:", "mul", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "mulInsideWithDouble:", "mulInside", "V", 0x1, NULL, NULL },
    { "addWithOrgGeogebraCommonKernelMatrixCoordMatrix:", "add", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "addSmallerWithOrgGeogebraCommonKernelMatrixCoordMatrix:", "addSmaller", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "mulWithOrgGeogebraCommonKernelMatrixCoords:", "mul", "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "mulWithOrgGeogebraCommonKernelMatrixCoordMatrix:", "mul", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "mulWithOrgGeogebraCommonKernelMatrixCoordMatrix:withOrgGeogebraCommonKernelMatrixCoordMatrix:", "mul", "V", 0x1, NULL, NULL },
    { "setMulWithOrgGeogebraCommonKernelMatrixCoordMatrix:withOrgGeogebraCommonKernelMatrixCoordMatrix:", "setMul", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "setMulT1WithOrgGeogebraCommonKernelMatrixCoordMatrix:withOrgGeogebraCommonKernelMatrixCoordMatrix:", "setMulT1", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "mul3x3WithOrgGeogebraCommonKernelMatrixCoordMatrix:", "mul3x3", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix4x4;", 0x4, NULL, NULL },
    { "det", NULL, "D", 0x1, NULL, NULL },
    { "isSquare", NULL, "Z", 0x1, NULL, NULL },
    { "inverse", NULL, "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", 0x1, NULL, NULL },
    { "solveWithOrgGeogebraCommonKernelMatrixCoords:", "solve", "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "solveWithDoubleArray:withOrgGeogebraCommonKernelMatrixCoords:withOrgGeogebraCommonKernelMatrixCoordsArray:", "solve", "V", 0x99, NULL, NULL },
    { "updatePivotMatrix", NULL, "V", 0x2, NULL, NULL },
    { "pivotWithOrgGeogebraCommonKernelMatrixCoords:withOrgGeogebraCommonKernelMatrixCoords:", "pivot", "V", 0x1, NULL, NULL },
    { "pivotWithDoubleArray2:withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface:", "pivot", "V", 0x19, NULL, NULL },
    { "pivotWithDoubleArray2:withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface:withInt:withJavaUtilArrayList:", "pivot", "V", 0x1a, NULL, NULL },
    { "isSingular", NULL, "Z", 0x1, NULL, NULL },
    { "setIsSingularWithBoolean:", "setIsSingular", "V", 0x1, NULL, NULL },
    { "getOrigin", NULL, "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "getVx", NULL, "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "getVy", NULL, "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "getVz", NULL, "Lorg.geogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "setOriginWithOrgGeogebraCommonKernelMatrixCoords:", "setOrigin", "V", 0x1, NULL, NULL },
    { "addToOriginWithOrgGeogebraCommonKernelMatrixCoords:", "addToOrigin", "V", 0x1, NULL, NULL },
    { "subToOriginWithOrgGeogebraCommonKernelMatrixCoords:", "subToOrigin", "V", 0x1, NULL, NULL },
    { "addToVxWithOrgGeogebraCommonKernelMatrixCoords:", "addToVx", "V", 0x1, NULL, NULL },
    { "addToVyWithOrgGeogebraCommonKernelMatrixCoords:", "addToVy", "V", 0x1, NULL, NULL },
    { "addToVzWithOrgGeogebraCommonKernelMatrixCoords:", "addToVz", "V", 0x1, NULL, NULL },
    { "addToColumnWithOrgGeogebraCommonKernelMatrixCoords:withInt:", "addToColumn", "V", 0x1, NULL, NULL },
    { "subToColumnWithOrgGeogebraCommonKernelMatrixCoords:withInt:", "subToColumn", "V", 0x1, NULL, NULL },
    { "mulColumnWithDouble:withInt:", "mulColumn", "V", 0x1, NULL, NULL },
    { "mulOriginWithDouble:", "mulOrigin", "V", 0x1, NULL, NULL },
    { "setVxWithOrgGeogebraCommonKernelMatrixCoords:", "setVx", "V", 0x1, NULL, NULL },
    { "setVyWithOrgGeogebraCommonKernelMatrixCoords:", "setVy", "V", 0x1, NULL, NULL },
    { "setVzWithOrgGeogebraCommonKernelMatrixCoords:", "setVz", "V", 0x1, NULL, NULL },
    { "getForGLWithFloatArray:", "getForGL", "V", 0x1, NULL, NULL },
    { "test", NULL, "V", 0x9, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "vectors_", NULL, 0x4, "[Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "rows_", NULL, 0x4, "I", NULL, NULL,  },
    { "columns_", NULL, 0x4, "I", NULL, NULL,  },
    { "X_AXIS_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonKernelMatrixCoordMatrix_X_AXIS },
    { "Y_AXIS_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonKernelMatrixCoordMatrix_Y_AXIS },
    { "Z_AXIS_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonKernelMatrixCoordMatrix_Z_AXIS },
    { "inverse__", "inverse", 0x2, "Lorg.geogebra.common.kernel.Matrix.CoordMatrix;", NULL, NULL,  },
    { "pivotSolRes_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.CoordMatrix$PivotSolRes;", NULL, NULL,  },
    { "pivotInverseMatrix_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.CoordMatrix$PivotInverseMatrix;", NULL, NULL,  },
    { "pivotMatrix_", NULL, 0x2, "[[D", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lorg.geogebra.common.kernel.Matrix.CoordMatrix$PivotInterface;", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix$PivotSolRes;", "Lorg.geogebra.common.kernel.Matrix.CoordMatrix$PivotInverseMatrix;"};
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelMatrixCoordMatrix = { 2, "CoordMatrix", "org.geogebra.common.kernel.Matrix", NULL, 0x1, 73, methods, 10, fields, 0, NULL, 3, inner_classes, NULL, NULL };
  return &_OrgGeogebraCommonKernelMatrixCoordMatrix;
}

@end

void OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_withDoubleArray_(OrgGeogebraCommonKernelMatrixCoordMatrix *self, jint rows, jint columns, IOSDoubleArray *val) {
  NSObject_init(self);
  self->rows_ = rows;
  self->columns_ = columns;
  OrgGeogebraCommonKernelMatrixCoordMatrix_setAndConsume_vectors_(self, [IOSObjectArray newArrayWithLength:columns type:OrgGeogebraCommonKernelMatrixCoords_class_()]);
  for (jint j = 0; j < columns; j++) {
    IOSObjectArray_SetAndConsume(self->vectors_, j, new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(rows));
    for (jint i = 0; i < rows; i++) {
      [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(self->vectors_, j))) setWithInt:i + 1 withDouble:IOSDoubleArray_Get(nil_chk(val), j * rows + i)];
    }
  }
}

OrgGeogebraCommonKernelMatrixCoordMatrix *new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_withDoubleArray_(jint rows, jint columns, IOSDoubleArray *val) {
  OrgGeogebraCommonKernelMatrixCoordMatrix *self = [OrgGeogebraCommonKernelMatrixCoordMatrix alloc];
  OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_withDoubleArray_(self, rows, columns, val);
  return self;
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(OrgGeogebraCommonKernelMatrixCoordMatrix *self, jint rows, jint columns) {
  NSObject_init(self);
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialiseWithInt_withInt_(self, rows, columns);
}

OrgGeogebraCommonKernelMatrixCoordMatrix *new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(jint rows, jint columns) {
  OrgGeogebraCommonKernelMatrixCoordMatrix *self = [OrgGeogebraCommonKernelMatrixCoordMatrix alloc];
  OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(self, rows, columns);
  return self;
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_initialiseWithInt_withInt_(OrgGeogebraCommonKernelMatrixCoordMatrix *self, jint rows, jint columns) {
  self->rows_ = rows;
  self->columns_ = columns;
  OrgGeogebraCommonKernelMatrixCoordMatrix_setAndConsume_vectors_(self, [IOSObjectArray newArrayWithLength:columns type:OrgGeogebraCommonKernelMatrixCoords_class_()]);
  for (jint i = 0; i < columns; i++) {
    IOSObjectArray_SetAndConsume(self->vectors_, i, new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(rows));
  }
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_initWithOrgGeogebraCommonKernelGeosGeoList_(OrgGeogebraCommonKernelMatrixCoordMatrix *self, OrgGeogebraCommonKernelGeosGeoList *inputList) {
  NSObject_init(self);
  jint cols = [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(inputList)) size];
  if (![inputList isDefined] || cols == 0) {
    [self setIsSingularWithBoolean:YES];
    return;
  }
  OrgGeogebraCommonKernelGeosGeoElement *geo = [inputList getWithInt:0];
  if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoList]) {
    [self setIsSingularWithBoolean:YES];
    return;
  }
  jint rows = [((OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoList class])) size];
  if (rows == 0) {
    [self setIsSingularWithBoolean:YES];
    return;
  }
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialiseWithInt_withInt_(self, rows, cols);
  OrgGeogebraCommonKernelGeosGeoList *columnList;
  for (jint r = 0; r < rows; r++) {
    geo = [inputList getWithInt:r];
    if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoList]) {
      [self setIsSingularWithBoolean:YES];
      return;
    }
    columnList = (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoList class]);
    if ([columnList size] != self->columns_) {
      [self setIsSingularWithBoolean:YES];
      return;
    }
    for (jint c = 0; c < rows; c++) {
      geo = [columnList getWithInt:c];
      if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoNumeric]) {
        [self setIsSingularWithBoolean:YES];
        return;
      }
      [self setWithInt:r + 1 withInt:c + 1 withDouble:[((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoNumeric class])) getValue]];
    }
  }
}

OrgGeogebraCommonKernelMatrixCoordMatrix *new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithOrgGeogebraCommonKernelGeosGeoList_(OrgGeogebraCommonKernelGeosGeoList *inputList) {
  OrgGeogebraCommonKernelMatrixCoordMatrix *self = [OrgGeogebraCommonKernelMatrixCoordMatrix alloc];
  OrgGeogebraCommonKernelMatrixCoordMatrix_initWithOrgGeogebraCommonKernelGeosGeoList_(self, inputList);
  return self;
}

OrgGeogebraCommonKernelMatrixCoordMatrix *OrgGeogebraCommonKernelMatrixCoordMatrix_IdentityWithInt_(jint n) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  OrgGeogebraCommonKernelMatrixCoordMatrix *m = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(n, n) autorelease];
  for (jint i = 1; i <= n; i++) {
    [m setWithInt:i withInt:i withDouble:1.0];
  }
  return m;
}

OrgGeogebraCommonKernelMatrixCoordMatrix *OrgGeogebraCommonKernelMatrixCoordMatrix_ScaleMatrixWithDoubleArray_(IOSDoubleArray *v) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  return OrgGeogebraCommonKernelMatrixCoordMatrix_ScaleMatrixWithOrgGeogebraCommonKernelMatrixCoords_([new_OrgGeogebraCommonKernelMatrixCoords_initWithDoubleArray_(v) autorelease]);
}

OrgGeogebraCommonKernelMatrixCoordMatrix *OrgGeogebraCommonKernelMatrixCoordMatrix_ScaleMatrixWithOrgGeogebraCommonKernelMatrixCoords_(OrgGeogebraCommonKernelMatrixCoords *v) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  jint n = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(v)) getLength];
  OrgGeogebraCommonKernelMatrixCoordMatrix *m = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(n + 1, n + 1) autorelease];
  for (jint i = 1; i <= n; i++) {
    [m setWithInt:i withInt:i withDouble:[v getWithInt:i]];
  }
  [m setWithInt:n + 1 withInt:n + 1 withDouble:1.0];
  return m;
}

OrgGeogebraCommonKernelMatrixCoordMatrix *OrgGeogebraCommonKernelMatrixCoordMatrix_DiagonalMatrixWithDoubleArray_(IOSDoubleArray *vals) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  jint n = ((IOSDoubleArray *) nil_chk(vals))->size_;
  OrgGeogebraCommonKernelMatrixCoordMatrix *m = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(n, n) autorelease];
  for (jint i = 1; i <= n; i++) {
    [m setWithInt:i withInt:i withDouble:IOSDoubleArray_Get(vals, i - 1)];
  }
  return m;
}

OrgGeogebraCommonKernelMatrixCoordMatrix *OrgGeogebraCommonKernelMatrixCoordMatrix_TranslationMatrixWithDoubleArray_(IOSDoubleArray *v) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  return OrgGeogebraCommonKernelMatrixCoordMatrix_TranslationMatrixWithOrgGeogebraCommonKernelMatrixCoords_([new_OrgGeogebraCommonKernelMatrixCoords_initWithDoubleArray_(v) autorelease]);
}

OrgGeogebraCommonKernelMatrixCoordMatrix *OrgGeogebraCommonKernelMatrixCoordMatrix_TranslationMatrixWithOrgGeogebraCommonKernelMatrixCoords_(OrgGeogebraCommonKernelMatrixCoords *v) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  jint n = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(v)) getLength];
  OrgGeogebraCommonKernelMatrixCoordMatrix *m = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(n + 1, n + 1) autorelease];
  for (jint i = 1; i <= n; i++) {
    [m setWithInt:i withInt:i withDouble:1.0];
    [m setWithInt:i withInt:n + 1 withDouble:[v getWithInt:i]];
  }
  [m setWithInt:n + 1 withInt:n + 1 withDouble:1.0];
  return m;
}

OrgGeogebraCommonKernelMatrixCoordMatrix *OrgGeogebraCommonKernelMatrixCoordMatrix_Rotation3DMatrixWithInt_withDouble_(jint axe, jdouble angle) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  OrgGeogebraCommonKernelMatrixCoordMatrix *m = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(4, 4) autorelease];
  switch (axe) {
    case OrgGeogebraCommonKernelMatrixCoordMatrix_Z_AXIS:
    [m setWithInt:1 withInt:1 withDouble:JavaLangMath_cosWithDouble_(angle)];
    [m setWithInt:1 withInt:2 withDouble:-JavaLangMath_sinWithDouble_(angle)];
    [m setWithInt:2 withInt:1 withDouble:JavaLangMath_sinWithDouble_(angle)];
    [m setWithInt:2 withInt:2 withDouble:JavaLangMath_cosWithDouble_(angle)];
    [m setWithInt:3 withInt:3 withDouble:1.0];
    break;
    case OrgGeogebraCommonKernelMatrixCoordMatrix_X_AXIS:
    [m setWithInt:1 withInt:1 withDouble:1.0];
    [m setWithInt:2 withInt:2 withDouble:JavaLangMath_cosWithDouble_(angle)];
    [m setWithInt:2 withInt:3 withDouble:-JavaLangMath_sinWithDouble_(angle)];
    [m setWithInt:3 withInt:2 withDouble:JavaLangMath_sinWithDouble_(angle)];
    [m setWithInt:3 withInt:3 withDouble:JavaLangMath_cosWithDouble_(angle)];
    break;
    case OrgGeogebraCommonKernelMatrixCoordMatrix_Y_AXIS:
    [m setWithInt:2 withInt:2 withDouble:1.0];
    [m setWithInt:3 withInt:3 withDouble:JavaLangMath_cosWithDouble_(angle)];
    [m setWithInt:3 withInt:1 withDouble:-JavaLangMath_sinWithDouble_(angle)];
    [m setWithInt:1 withInt:3 withDouble:JavaLangMath_sinWithDouble_(angle)];
    [m setWithInt:1 withInt:1 withDouble:JavaLangMath_cosWithDouble_(angle)];
    break;
    default:
    break;
  }
  [m setWithInt:4 withInt:4 withDouble:1.0];
  return m;
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_Rotation3x3WithDouble_withOrgGeogebraCommonKernelMatrixCoordMatrix_(jdouble angle, OrgGeogebraCommonKernelMatrixCoordMatrix *m) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  jdouble cos = JavaLangMath_cosWithDouble_(angle);
  jdouble sin = JavaLangMath_sinWithDouble_(angle);
  [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m)) setWithInt:1 withInt:1 withDouble:cos];
  [m setWithInt:1 withInt:2 withDouble:-sin];
  [m setWithInt:2 withInt:1 withDouble:sin];
  [m setWithInt:2 withInt:2 withDouble:cos];
  [m setWithInt:3 withInt:3 withDouble:1];
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_Rotation3x3WithOrgGeogebraCommonKernelMatrixCoords_withDouble_withOrgGeogebraCommonKernelMatrixCoordMatrix_(OrgGeogebraCommonKernelMatrixCoords *u, jdouble angle, OrgGeogebraCommonKernelMatrixCoordMatrix *m) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  jdouble ux = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(u)) getX];
  jdouble uy = [u getY];
  jdouble uz = [u getZ];
  jdouble c = JavaLangMath_cosWithDouble_(angle);
  jdouble s = JavaLangMath_sinWithDouble_(angle);
  IOSObjectArray *vectors = ((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(m))->vectors_;
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(vectors), 0))) setXWithDouble:ux * ux * (1 - c) + c];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(vectors, 0))) setYWithDouble:ux * uy * (1 - c) + uz * s];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(vectors, 0))) setZWithDouble:ux * uz * (1 - c) - uy * s];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(vectors, 1))) setXWithDouble:ux * uy * (1 - c) - uz * s];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(vectors, 1))) setYWithDouble:uy * uy * (1 - c) + c];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(vectors, 1))) setZWithDouble:uy * uz * (1 - c) + ux * s];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(vectors, 2))) setXWithDouble:ux * uz * (1 - c) + uy * s];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(vectors, 2))) setYWithDouble:uy * uz * (1 - c) - ux * s];
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(vectors, 2))) setZWithDouble:uz * uz * (1 - c) + c];
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_solveWithDoubleArray_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoordsArray_(IOSDoubleArray *sol, OrgGeogebraCommonKernelMatrixCoords *res, IOSObjectArray *columns) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  jint size = [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(res)) getLength];
  IOSObjectArray *matrix = [IOSObjectArray arrayWithLength:size type:IOSClass_doubleArray(1)];
  for (jint i = 0; i < size; i++) {
    IOSObjectArray_SetAndConsume(matrix, i, [IOSDoubleArray newArrayWithLength:size]);
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(columns), i))) copy__WithDoubleArray:IOSObjectArray_Get(matrix, i)];
  }
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes *pivotSolRes = [new_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_init() autorelease];
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_setAndConsume_res_(pivotSolRes, [IOSDoubleArray newArrayWithLength:size]);
  [res copy__WithDoubleArray:pivotSolRes->res_];
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_set_sol_(pivotSolRes, sol);
  OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_(matrix, pivotSolRes);
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_updatePivotMatrix(OrgGeogebraCommonKernelMatrixCoordMatrix *self) {
  if (self->pivotMatrix_ == nil) {
    OrgGeogebraCommonKernelMatrixCoordMatrix_setAndConsume_pivotMatrix_(self, [IOSObjectArray newArrayWithLength:self->columns_ type:IOSClass_doubleArray(1)]);
  }
  for (jint c = 0; c < self->columns_; c++) {
    IOSObjectArray_SetAndConsume(nil_chk(self->pivotMatrix_), c, [IOSDoubleArray newArrayWithLength:self->rows_]);
    for (jint r = 0; r < self->rows_; r++) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(self->pivotMatrix_, c)), r) = [self getWithInt:r + 1 withInt:c + 1];
    }
  }
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_(IOSObjectArray *matrix, id<OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface> psr) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  jint size = ((IOSObjectArray *) nil_chk(matrix))->size_;
  JavaUtilArrayList *stack = [new_JavaUtilArrayList_init() autorelease];
  for (jint i = size - 1; i >= 0; i--) {
    [stack addWithId:JavaLangInteger_valueOfWithInt_(i)];
  }
  OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_withInt_withJavaUtilArrayList_(matrix, psr, size - 1, stack);
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_withInt_withJavaUtilArrayList_(IOSObjectArray *matrix, id<OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface> psr, jint step, JavaUtilArrayList *stack) {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  if (step == 0) {
    jint index = [((JavaLangInteger *) nil_chk([((JavaUtilArrayList *) nil_chk(stack)) getWithInt:0])) intValue];
    [((id<OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface>) nil_chk(psr)) divideFirstWithInt:index withDouble:IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(matrix), index)), 0)];
  }
  else {
    jint stackIndex = 0;
    jint index = [((JavaLangInteger *) nil_chk([((JavaUtilArrayList *) nil_chk(stack)) getWithInt:0])) intValue];
    jdouble value = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(matrix), index)), step);
    for (jint currentStackIndex = 1; currentStackIndex < [stack size]; currentStackIndex++) {
      jint currentIndex = [((JavaLangInteger *) nil_chk([stack getWithInt:currentStackIndex])) intValue];
      jdouble currentValue = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(matrix, currentIndex)), step);
      if (JavaLangMath_absWithDouble_(currentValue) > JavaLangMath_absWithDouble_(value)) {
        stackIndex = currentStackIndex;
        index = currentIndex;
        value = currentValue;
      }
    }
    for (JavaLangInteger *boxed__ in stack) {
      jint i = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(matrix, i)), step) /= value;
    }
    [((id<OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface>) nil_chk(psr)) divideResWithInt:step withDouble:value];
    for (jint l = 0; l < step; l++) {
      jdouble coef = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(matrix, index)), l);
      for (JavaLangInteger *boxed__ in stack) {
        jint i = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
        *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(matrix, i)), l) -= coef * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(matrix, i)), step);
      }
      [psr subResWithInt:l withInt:step withDouble:coef];
    }
    [stack removeWithInt:stackIndex];
    OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_withInt_withJavaUtilArrayList_(matrix, psr, step - 1, stack);
    [psr calcSolWithInt:index withInt:step withDoubleArray2:matrix withJavaUtilArrayList:stack];
    [stack addWithId:JavaLangInteger_valueOfWithInt_(index)];
  }
}

void OrgGeogebraCommonKernelMatrixCoordMatrix_test() {
  OrgGeogebraCommonKernelMatrixCoordMatrix_initialize();
  OrgGeogebraCommonKernelMatrixCoordMatrix *matrix = [new_OrgGeogebraCommonKernelMatrixCoordMatrix4x4_init() autorelease];
  [matrix setVxWithOrgGeogebraCommonKernelMatrixCoords:[new_OrgGeogebraCommonKernelMatrixCoords_initWithDouble_withDouble_withDouble_withDouble_(1, 1, -1, 0) autorelease]];
  [matrix setVyWithOrgGeogebraCommonKernelMatrixCoords:[new_OrgGeogebraCommonKernelMatrixCoords_initWithDouble_withDouble_withDouble_withDouble_(-1, 1, -1, 0) autorelease]];
  [matrix setVzWithOrgGeogebraCommonKernelMatrixCoords:[new_OrgGeogebraCommonKernelMatrixCoords_initWithDouble_withDouble_withDouble_withDouble_(1, 2, 5, 0) autorelease]];
  [matrix setOriginWithOrgGeogebraCommonKernelMatrixCoords:[new_OrgGeogebraCommonKernelMatrixCoords_initWithDouble_withDouble_withDouble_withDouble_(4, 5, 6, 1) autorelease]];
  [((JavaIoPrintStream *) nil_chk(JavaLangSystem_get_out_())) printlnWithNSString:JreStrcat("$$", @"==== MATRIX ====\n", [matrix description])];
  [JavaLangSystem_get_out_() printlnWithNSString:JreStrcat("$$", @"==== INVERSE ====\n", [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk([matrix inverse])) description])];
  OrgGeogebraCommonKernelMatrixCoordMatrix_setAndConsume_pivotInverseMatrix_(matrix, new_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_init());
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_setAndConsume_matrixRes_(matrix->pivotInverseMatrix_, [IOSDoubleArray newArrayWithLength:4 * 4]);
  for (jint c = 0; c < 4; c++) {
    *IOSDoubleArray_GetRef(matrix->pivotInverseMatrix_->matrixRes_, c * 4 + c) = 1;
  }
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_set_inverse_(matrix->pivotInverseMatrix_, ((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk(matrix->inverse__))->vectors_);
  matrix->pivotInverseMatrix_->columns_ = [matrix getColumns];
  IOSObjectArray *matrixD = [IOSObjectArray arrayWithLength:matrix->columns_ type:IOSClass_doubleArray(1)];
  for (jint c = 0; c < matrix->columns_; c++) {
    IOSObjectArray_SetAndConsume(matrixD, c, [IOSDoubleArray newArrayWithLength:matrix->rows_]);
    for (jint r = 0; r < matrix->rows_; r++) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(matrixD, c)), r) = [matrix getWithInt:r + 1 withInt:c + 1];
    }
  }
  OrgGeogebraCommonKernelMatrixCoordMatrix_pivotWithDoubleArray2_withOrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface_(matrixD, matrix->pivotInverseMatrix_);
  [JavaLangSystem_get_out_() printlnWithNSString:JreStrcat("$$", @"==== PIVOT INVERSE ====\n", [matrix->inverse__ description])];
  [JavaLangSystem_get_out_() printlnWithNSString:JreStrcat("$$", @"==== MATRIX * INVERSE ====\n", [((OrgGeogebraCommonKernelMatrixCoordMatrix *) nil_chk([matrix mulWithOrgGeogebraCommonKernelMatrixCoordMatrix:matrix->inverse__])) description])];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelMatrixCoordMatrix)

@implementation OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "divideFirstWithInt:withDouble:", "divideFirst", "V", 0x401, NULL, NULL },
    { "divideResWithInt:withDouble:", "divideRes", "V", 0x401, NULL, NULL },
    { "subResWithInt:withInt:withDouble:", "subRes", "V", 0x401, NULL, NULL },
    { "calcSolWithInt:withInt:withDoubleArray2:withJavaUtilArrayList:", "calcSol", "V", 0x401, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface = { 2, "PivotInterface", "org.geogebra.common.kernel.Matrix", "CoordMatrix", 0x60a, 4, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInterface)

@implementation OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes

- (instancetype)init {
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_init(self);
  return self;
}

- (void)divideFirstWithInt:(jint)index
                withDouble:(jdouble)factor {
  *IOSDoubleArray_GetRef(nil_chk(sol_), index) = IOSDoubleArray_Get(nil_chk(res_), 0) / factor;
}

- (void)divideResWithInt:(jint)step
              withDouble:(jdouble)value {
  *IOSDoubleArray_GetRef(nil_chk(res_), step) /= value;
}

- (void)subResWithInt:(jint)l
              withInt:(jint)step
           withDouble:(jdouble)coef {
  *IOSDoubleArray_GetRef(nil_chk(res_), l) -= coef * IOSDoubleArray_Get(res_, step);
}

- (void)calcSolWithInt:(jint)index
               withInt:(jint)step
      withDoubleArray2:(IOSObjectArray *)matrix
 withJavaUtilArrayList:(JavaUtilArrayList *)stack {
  jdouble s = IOSDoubleArray_Get(nil_chk(res_), step);
  for (JavaLangInteger *boxed__ in nil_chk(stack)) {
    jint i = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
    s -= IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(matrix), i)), step) * IOSDoubleArray_Get(nil_chk(sol_), i);
  }
  *IOSDoubleArray_GetRef(nil_chk(sol_), index) = s;
}

- (void)dealloc {
  RELEASE_(sol_);
  RELEASE_(res_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "PivotSolRes", NULL, 0x1, NULL, NULL },
    { "divideFirstWithInt:withDouble:", "divideFirst", "V", 0x1, NULL, NULL },
    { "divideResWithInt:withDouble:", "divideRes", "V", 0x1, NULL, NULL },
    { "subResWithInt:withInt:withDouble:", "subRes", "V", 0x1, NULL, NULL },
    { "calcSolWithInt:withInt:withDoubleArray2:withJavaUtilArrayList:", "calcSol", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "sol_", NULL, 0x1, "[D", NULL, NULL,  },
    { "res_", NULL, 0x1, "[D", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes = { 2, "PivotSolRes", "org.geogebra.common.kernel.Matrix", "CoordMatrix", 0xa, 5, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes;
}

@end

void OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_init(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes *self) {
  NSObject_init(self);
}

OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes *new_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_init() {
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes *self = [OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes alloc];
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotSolRes)

@implementation OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix

- (instancetype)init {
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_init(self);
  return self;
}

- (void)divideFirstWithInt:(jint)index
                withDouble:(jdouble)factor {
  for (jint i = 0; i < columns_; i++) {
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(inverse_), i))) setWithInt:index + 1 withDouble:IOSDoubleArray_Get(nil_chk(matrixRes_), i * columns_) / factor];
  }
}

- (void)divideResWithInt:(jint)step
              withDouble:(jdouble)value {
  for (jint i = 0; i < columns_; i++) {
    *IOSDoubleArray_GetRef(nil_chk(matrixRes_), step + i * columns_) /= value;
  }
}

- (void)subResWithInt:(jint)l
              withInt:(jint)step
           withDouble:(jdouble)coef {
  for (jint i = 0; i < columns_; i++) {
    *IOSDoubleArray_GetRef(nil_chk(matrixRes_), l + i * columns_) -= coef * IOSDoubleArray_Get(matrixRes_, step + i * columns_);
  }
}

- (void)calcSolWithInt:(jint)index
               withInt:(jint)step
      withDoubleArray2:(IOSObjectArray *)matrix
 withJavaUtilArrayList:(JavaUtilArrayList *)stack {
  for (jint j = 0; j < columns_; j++) {
    jdouble s = IOSDoubleArray_Get(nil_chk(matrixRes_), step + j * columns_);
    for (JavaLangInteger *boxed__ in nil_chk(stack)) {
      jint i = [((JavaLangInteger *) nil_chk(boxed__)) intValue];
      s -= IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(matrix), i)), step) * [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(inverse_), j))) getWithInt:i + 1];
    }
    [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(nil_chk(inverse_), j))) setWithInt:index + 1 withDouble:s];
  }
}

- (void)dealloc {
  RELEASE_(matrixRes_);
  RELEASE_(inverse_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "PivotInverseMatrix", NULL, 0x1, NULL, NULL },
    { "divideFirstWithInt:withDouble:", "divideFirst", "V", 0x1, NULL, NULL },
    { "divideResWithInt:withDouble:", "divideRes", "V", 0x1, NULL, NULL },
    { "subResWithInt:withInt:withDouble:", "subRes", "V", 0x1, NULL, NULL },
    { "calcSolWithInt:withInt:withDoubleArray2:withJavaUtilArrayList:", "calcSol", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "columns_", NULL, 0x1, "I", NULL, NULL,  },
    { "matrixRes_", NULL, 0x1, "[D", NULL, NULL,  },
    { "inverse_", NULL, 0x1, "[Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix = { 2, "PivotInverseMatrix", "org.geogebra.common.kernel.Matrix", "CoordMatrix", 0xa, 5, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix;
}

@end

void OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_init(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix *self) {
  NSObject_init(self);
}

OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix *new_OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_init() {
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix *self = [OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix alloc];
  OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelMatrixCoordMatrix_PivotInverseMatrix)
