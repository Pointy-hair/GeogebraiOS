//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/geogebra/common/kernel/algos/AlgoRoots.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Double.h"
#include "java/lang/Exception.h"
#include "java/lang/Math.h"
#include "java/util/ArrayList.h"
#include "org/apache/commons/math/analysis/solvers/UnivariateRealSolver.h"
#include "org/apache/commons/math/analysis/solvers/UnivariateRealSolverFactory.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/algos/AlgoGeoPointsFunction.h"
#include "org/geogebra/common/kernel/algos/AlgoRoots.h"
#include "org/geogebra/common/kernel/algos/GetCommand.h"
#include "org/geogebra/common/kernel/arithmetic/Function.h"
#include "org/geogebra/common/kernel/arithmetic/NumberValue.h"
#include "org/geogebra/common/kernel/commands/Commands.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoFunction.h"
#include "org/geogebra/common/kernel/geos/GeoPoint.h"
#include "org/geogebra/common/kernel/roots/RealRootAdapter.h"
#include "org/geogebra/common/kernel/roots/RealRootUtil.h"
#include "org/geogebra/common/main/App.h"

#define OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS 0
#define OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_INTERSECTIONS 1
#define OrgGeogebraCommonKernelAlgosAlgoRoots_PIXELS_BETWEEN_SAMPLES 5
#define OrgGeogebraCommonKernelAlgosAlgoRoots_MAX_SAMPLES 400
#define OrgGeogebraCommonKernelAlgosAlgoRoots_MIN_SAMPLES 50

@interface OrgGeogebraCommonKernelAlgosAlgoRoots () {
 @public
  OrgGeogebraCommonKernelGeosGeoFunction *f0_, *f1_, *f2_, *diff_;
  id<OrgGeogebraCommonKernelArithmeticNumberValue> left_;
  OrgGeogebraCommonKernelGeosGeoElement *geoleft_;
  id<OrgGeogebraCommonKernelArithmeticNumberValue> right_;
  OrgGeogebraCommonKernelGeosGeoElement *georight_;
  jint type_;
}

- (void)compute2WithOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)f;

+ (jboolean)signChangedWithOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)f
                                                       withDouble:(jdouble)x;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, f0_, OrgGeogebraCommonKernelGeosGeoFunction *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, f1_, OrgGeogebraCommonKernelGeosGeoFunction *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, f2_, OrgGeogebraCommonKernelGeosGeoFunction *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, diff_, OrgGeogebraCommonKernelGeosGeoFunction *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, left_, id<OrgGeogebraCommonKernelArithmeticNumberValue>)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, geoleft_, OrgGeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, right_, id<OrgGeogebraCommonKernelArithmeticNumberValue>)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, georight_, OrgGeogebraCommonKernelGeosGeoElement *)

J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, TYPE_ROOTS, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, TYPE_INTERSECTIONS, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, PIXELS_BETWEEN_SAMPLES, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, MAX_SAMPLES, jint)

J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonKernelAlgosAlgoRoots, MIN_SAMPLES, jint)

__attribute__((unused)) static void OrgGeogebraCommonKernelAlgosAlgoRoots_compute(OrgGeogebraCommonKernelAlgosAlgoRoots *self);

__attribute__((unused)) static void OrgGeogebraCommonKernelAlgosAlgoRoots_compute2WithOrgGeogebraCommonKernelGeosGeoFunction_(OrgGeogebraCommonKernelAlgosAlgoRoots *self, OrgGeogebraCommonKernelGeosGeoFunction *f);

__attribute__((unused)) static jint OrgGeogebraCommonKernelAlgosAlgoRoots_findNumberOfSamplesWithDouble_withDouble_(OrgGeogebraCommonKernelAlgosAlgoRoots *self, jdouble l, jdouble r);

__attribute__((unused)) static jboolean OrgGeogebraCommonKernelAlgosAlgoRoots_signChangedWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_(OrgGeogebraCommonKernelGeosGeoFunction *f, jdouble x);

@implementation OrgGeogebraCommonKernelAlgosAlgoRoots

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                                          withNSStringArray:(IOSObjectArray *)labels
                 withOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)function
           withOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)left
           withOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)right {
  OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, cons, labels, function, left, right);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                 withOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)function
           withOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)left
           withOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)right {
  OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, cons, function, left, right);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                                          withNSStringArray:(IOSObjectArray *)labels
                 withOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)function
                 withOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)function2
           withOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)left
           withOrgGeogebraCommonKernelArithmeticNumberValue:(id<OrgGeogebraCommonKernelArithmeticNumberValue>)right {
  OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, cons, labels, function, function2, left, right);
  return self;
}

- (id<OrgGeogebraCommonKernelAlgosGetCommand>)getClassName {
  return OrgGeogebraCommonKernelCommandsCommandsEnum_get_Roots();
}

- (IOSObjectArray *)getRootPoints {
  return [self getPoints];
}

- (void)setInputOutput {
  switch (type_) {
    case OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS:
    OrgGeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:3 type:OrgGeogebraCommonKernelGeosGeoElement_class_()]);
    IOSObjectArray_Set(input_, 0, [((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(f0_)) toGeoElement]);
    IOSObjectArray_Set(input_, 1, geoleft_);
    IOSObjectArray_Set(input_, 2, georight_);
    break;
    case OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_INTERSECTIONS:
    OrgGeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:4 type:OrgGeogebraCommonKernelGeosGeoElement_class_()]);
    IOSObjectArray_Set(input_, 0, [((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(f1_)) toGeoElement]);
    IOSObjectArray_Set(input_, 1, [((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(f2_)) toGeoElement]);
    IOSObjectArray_Set(input_, 2, geoleft_);
    IOSObjectArray_Set(input_, 3, georight_);
  }
  [super setOutputWithOrgGeogebraCommonKernelGeosGeoElementArray:[self getPoints]];
  [self noUndefinedPointsInAlgebraViewWithOrgGeogebraCommonKernelGeosGeoPointArray:[self getPoints]];
  [self setDependencies];
}

- (void)compute {
  OrgGeogebraCommonKernelAlgosAlgoRoots_compute(self);
}

- (jdouble)yAtWithDouble:(jdouble)x {
  if (type_ == OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS) return 0;
  return [((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(f1_)) evaluateWithDouble:x];
}

- (void)compute2WithOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)f {
  OrgGeogebraCommonKernelAlgosAlgoRoots_compute2WithOrgGeogebraCommonKernelGeosGeoFunction_(self, f);
}

+ (IOSDoubleArray *)findRootsWithOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)f
                                                             withDouble:(jdouble)l
                                                             withDouble:(jdouble)r
                                                                withInt:(jint)samples {
  return OrgGeogebraCommonKernelAlgosAlgoRoots_findRootsWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_withInt_(f, l, r, samples);
}

+ (jdouble)calcSingleRootWithOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)f
                                                         withDouble:(jdouble)left
                                                         withDouble:(jdouble)right {
  return OrgGeogebraCommonKernelAlgosAlgoRoots_calcSingleRootWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_(f, left, right);
}

- (jint)findNumberOfSamplesWithDouble:(jdouble)l
                           withDouble:(jdouble)r {
  return OrgGeogebraCommonKernelAlgosAlgoRoots_findNumberOfSamplesWithDouble_withDouble_(self, l, r);
}

+ (jboolean)signChangedWithOrgGeogebraCommonKernelGeosGeoFunction:(OrgGeogebraCommonKernelGeosGeoFunction *)f
                                                       withDouble:(jdouble)x {
  return OrgGeogebraCommonKernelAlgosAlgoRoots_signChangedWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_(f, x);
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons {
  OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_(self, cons);
  return self;
}

- (void)dealloc {
  RELEASE_(f0_);
  RELEASE_(f1_);
  RELEASE_(f2_);
  RELEASE_(diff_);
  RELEASE_(left_);
  RELEASE_(geoleft_);
  RELEASE_(right_);
  RELEASE_(georight_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelConstruction:withNSStringArray:withOrgGeogebraCommonKernelGeosGeoFunction:withOrgGeogebraCommonKernelArithmeticNumberValue:withOrgGeogebraCommonKernelArithmeticNumberValue:", "AlgoRoots", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withOrgGeogebraCommonKernelGeosGeoFunction:withOrgGeogebraCommonKernelArithmeticNumberValue:withOrgGeogebraCommonKernelArithmeticNumberValue:", "AlgoRoots", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withNSStringArray:withOrgGeogebraCommonKernelGeosGeoFunction:withOrgGeogebraCommonKernelGeosGeoFunction:withOrgGeogebraCommonKernelArithmeticNumberValue:withOrgGeogebraCommonKernelArithmeticNumberValue:", "AlgoRoots", NULL, 0x1, NULL, NULL },
    { "getClassName", NULL, "Lorg.geogebra.common.kernel.algos.GetCommand;", 0x1, NULL, NULL },
    { "getRootPoints", NULL, "[Lorg.geogebra.common.kernel.geos.GeoPoint;", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "yAtWithDouble:", "yAt", "D", 0x4, NULL, NULL },
    { "compute2WithOrgGeogebraCommonKernelGeosGeoFunction:", "compute2", "V", 0x12, NULL, NULL },
    { "findRootsWithOrgGeogebraCommonKernelGeosGeoFunction:withDouble:withDouble:withInt:", "findRoots", "[D", 0x19, NULL, NULL },
    { "calcSingleRootWithOrgGeogebraCommonKernelGeosGeoFunction:withDouble:withDouble:", "calcSingleRoot", "D", 0x19, NULL, NULL },
    { "findNumberOfSamplesWithDouble:withDouble:", "findNumberOfSamples", "I", 0x11, NULL, NULL },
    { "signChangedWithOrgGeogebraCommonKernelGeosGeoFunction:withDouble:", "signChanged", "Z", 0x1a, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:", "AlgoRoots", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "TYPE_ROOTS_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS },
    { "TYPE_INTERSECTIONS_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_INTERSECTIONS },
    { "PIXELS_BETWEEN_SAMPLES_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonKernelAlgosAlgoRoots_PIXELS_BETWEEN_SAMPLES },
    { "MAX_SAMPLES_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonKernelAlgosAlgoRoots_MAX_SAMPLES },
    { "MIN_SAMPLES_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonKernelAlgosAlgoRoots_MIN_SAMPLES },
    { "f0_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "f1_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "f2_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "diff_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "left_", NULL, 0x2, "Lorg.geogebra.common.kernel.arithmetic.NumberValue;", NULL, NULL,  },
    { "geoleft_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "right_", NULL, 0x2, "Lorg.geogebra.common.kernel.arithmetic.NumberValue;", NULL, NULL,  },
    { "georight_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "type_", NULL, 0x2, "I", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelAlgosAlgoRoots = { 2, "AlgoRoots", "org.geogebra.common.kernel.algos", NULL, 0x1, 14, methods, 14, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelAlgosAlgoRoots;
}

@end

void OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(OrgGeogebraCommonKernelAlgosAlgoRoots *self, OrgGeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, OrgGeogebraCommonKernelGeosGeoFunction *function, id<OrgGeogebraCommonKernelArithmeticNumberValue> left, id<OrgGeogebraCommonKernelArithmeticNumberValue> right) {
  OrgGeogebraCommonKernelAlgosAlgoGeoPointsFunction_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelGeosGeoFunction_(self, cons, labels, ![((OrgGeogebraCommonKernelConstruction *) nil_chk(cons)) isSuppressLabelsActive], function);
  self->type_ = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS;
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_f0_(self, function);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_left_(self, left);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_geoleft_(self, [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(left)) toGeoElement]);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_right_(self, right);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_georight_(self, [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(right)) toGeoElement]);
  self->type_ = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS;
  [self setInputOutput];
  OrgGeogebraCommonKernelAlgosAlgoRoots_compute(self);
  [self showOneRootInAlgebraView];
}

OrgGeogebraCommonKernelAlgosAlgoRoots *new_OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(OrgGeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, OrgGeogebraCommonKernelGeosGeoFunction *function, id<OrgGeogebraCommonKernelArithmeticNumberValue> left, id<OrgGeogebraCommonKernelArithmeticNumberValue> right) {
  OrgGeogebraCommonKernelAlgosAlgoRoots *self = [OrgGeogebraCommonKernelAlgosAlgoRoots alloc];
  OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, cons, labels, function, left, right);
  return self;
}

void OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(OrgGeogebraCommonKernelAlgosAlgoRoots *self, OrgGeogebraCommonKernelConstruction *cons, OrgGeogebraCommonKernelGeosGeoFunction *function, id<OrgGeogebraCommonKernelArithmeticNumberValue> left, id<OrgGeogebraCommonKernelArithmeticNumberValue> right) {
  OrgGeogebraCommonKernelAlgosAlgoGeoPointsFunction_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoFunction_(self, cons, function);
  self->type_ = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS;
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_f0_(self, function);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_left_(self, left);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_geoleft_(self, [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(left)) toGeoElement]);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_right_(self, right);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_georight_(self, [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(right)) toGeoElement]);
  self->type_ = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS;
  [self setInputOutput];
  OrgGeogebraCommonKernelAlgosAlgoRoots_compute(self);
}

OrgGeogebraCommonKernelAlgosAlgoRoots *new_OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(OrgGeogebraCommonKernelConstruction *cons, OrgGeogebraCommonKernelGeosGeoFunction *function, id<OrgGeogebraCommonKernelArithmeticNumberValue> left, id<OrgGeogebraCommonKernelArithmeticNumberValue> right) {
  OrgGeogebraCommonKernelAlgosAlgoRoots *self = [OrgGeogebraCommonKernelAlgosAlgoRoots alloc];
  OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, cons, function, left, right);
  return self;
}

void OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(OrgGeogebraCommonKernelAlgosAlgoRoots *self, OrgGeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, OrgGeogebraCommonKernelGeosGeoFunction *function, OrgGeogebraCommonKernelGeosGeoFunction *function2, id<OrgGeogebraCommonKernelArithmeticNumberValue> left, id<OrgGeogebraCommonKernelArithmeticNumberValue> right) {
  OrgGeogebraCommonKernelAlgosAlgoGeoPointsFunction_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withOrgGeogebraCommonKernelGeosGeoFunction_(self, cons, labels, ![((OrgGeogebraCommonKernelConstruction *) nil_chk(cons)) isSuppressLabelsActive], function);
  self->type_ = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS;
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_f1_(self, function);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_f2_(self, function2);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_left_(self, left);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_geoleft_(self, [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(left)) toGeoElement]);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_right_(self, right);
  OrgGeogebraCommonKernelAlgosAlgoRoots_set_georight_(self, [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(right)) toGeoElement]);
  self->type_ = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_INTERSECTIONS;
  [self setInputOutput];
  OrgGeogebraCommonKernelAlgosAlgoRoots_compute(self);
  [self showOneRootInAlgebraView];
}

OrgGeogebraCommonKernelAlgosAlgoRoots *new_OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(OrgGeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, OrgGeogebraCommonKernelGeosGeoFunction *function, OrgGeogebraCommonKernelGeosGeoFunction *function2, id<OrgGeogebraCommonKernelArithmeticNumberValue> left, id<OrgGeogebraCommonKernelArithmeticNumberValue> right) {
  OrgGeogebraCommonKernelAlgosAlgoRoots *self = [OrgGeogebraCommonKernelAlgosAlgoRoots alloc];
  OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self, cons, labels, function, function2, left, right);
  return self;
}

void OrgGeogebraCommonKernelAlgosAlgoRoots_compute(OrgGeogebraCommonKernelAlgosAlgoRoots *self) {
  jboolean ok = NO;
  switch (self->type_) {
    case OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS:
    ok = ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f0_)) toGeoElement])) isDefined] && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(self->geoleft_)) isDefined] && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(self->georight_)) isDefined]);
    break;
    case OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_INTERSECTIONS:
    ok = ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f1_)) toGeoElement])) isDefined] && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f2_)) toGeoElement])) isDefined] && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(self->geoleft_)) isDefined] && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(self->georight_)) isDefined]);
    break;
  }
  if (!ok) {
    [self setPointsWithDoubleArray:[IOSDoubleArray arrayWithLength:1] withInt:0];
  }
  else {
    if (self->type_ == OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_INTERSECTIONS) {
      OrgGeogebraCommonKernelAlgosAlgoRoots_setAndConsume_diff_(self, new_OrgGeogebraCommonKernelGeosGeoFunction_initWithOrgGeogebraCommonKernelConstruction_(self->cons_));
      OrgGeogebraCommonKernelAlgosAlgoRoots_set_diff_(self, OrgGeogebraCommonKernelGeosGeoFunction_subtractWithOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelGeosGeoFunction_(self->diff_, self->f1_, self->f2_));
      OrgGeogebraCommonKernelAlgosAlgoRoots_compute2WithOrgGeogebraCommonKernelGeosGeoFunction_(self, self->diff_);
    }
    else {
      OrgGeogebraCommonKernelAlgosAlgoRoots_compute2WithOrgGeogebraCommonKernelGeosGeoFunction_(self, self->f0_);
    }
  }
}

void OrgGeogebraCommonKernelAlgosAlgoRoots_compute2WithOrgGeogebraCommonKernelGeosGeoFunction_(OrgGeogebraCommonKernelAlgosAlgoRoots *self, OrgGeogebraCommonKernelGeosGeoFunction *f) {
  jdouble l = [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(self->left_)) getDouble];
  jdouble r = [((id<OrgGeogebraCommonKernelArithmeticNumberValue>) nil_chk(self->right_)) getDouble];
  IOSDoubleArray *roots = [IOSDoubleArray arrayWithLength:0];
  jint numberofroots = 0;
  if (l > r) {
    jdouble tmp = l;
    l = r;
    r = tmp;
  }
  jint n = OrgGeogebraCommonKernelAlgosAlgoRoots_findNumberOfSamplesWithDouble_withDouble_(self, l, r);
  jint m = JavaLangMath_maxWithInt_withInt_(n, 1);
  @try {
    do {
      roots = OrgGeogebraCommonKernelAlgosAlgoRoots_findRootsWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_withInt_(f, l, r, m);
      if (roots == nil) {
        numberofroots = 0;
      }
      else {
        numberofroots = roots->size_;
      }
      if (numberofroots < m / 2) {
        break;
      }
      m = m * 2;
    }
    while (m < OrgGeogebraCommonKernelAlgosAlgoRoots_MAX_SAMPLES);
    if (m > OrgGeogebraCommonKernelAlgosAlgoRoots_MAX_SAMPLES) OrgGeogebraCommonMainApp_debugWithNSString_(@"We have probably lost some roots...");
  }
  @catch (JavaLangException *e) {
    OrgGeogebraCommonMainApp_debugWithNSString_(JreStrcat("$$", @"Exception in compute() ", [((JavaLangException *) nil_chk(e)) description]));
  }
  if (numberofroots == 0) {
    [self setPointsWithDoubleArray:[IOSDoubleArray arrayWithLength:1] withInt:0];
  }
  else {
    [self setPointsWithDoubleArray:roots withInt:((IOSDoubleArray *) nil_chk(roots))->size_];
  }
}

IOSDoubleArray *OrgGeogebraCommonKernelAlgosAlgoRoots_findRootsWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_withInt_(OrgGeogebraCommonKernelGeosGeoFunction *f, jdouble l, jdouble r, jint samples) {
  OrgGeogebraCommonKernelAlgosAlgoRoots_initialize();
  if (OrgGeogebraCommonKernelKernel_isEqualWithDouble_withDouble_(l, r)) {
    return OrgGeogebraCommonKernelKernel_isZeroWithDouble_([((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(f)) evaluateWithDouble:l]) ? [IOSDoubleArray arrayWithDoubles:(jdouble[]){ l } count:1] : [IOSDoubleArray arrayWithLength:0];
  }
  IOSDoubleArray *y = [IOSDoubleArray arrayWithLength:samples + 1];
  JavaUtilArrayList *xlist = [new_JavaUtilArrayList_init() autorelease];
  jdouble x, xval;
  jdouble deltax = (r - l) / samples;
  for (jint i = 0; i <= samples; i++) {
    x = l + i * deltax;
    *IOSDoubleArray_GetRef(y, i) = [((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(f)) evaluateWithDouble:x];
    if ((JavaLangMath_absWithDouble_(IOSDoubleArray_Get(y, i)) < OrgGeogebraCommonKernelKernel_MIN_PRECISION) && (OrgGeogebraCommonKernelAlgosAlgoRoots_signChangedWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_(f, x))) {
      [xlist addWithId:JavaLangDouble_valueOfWithDouble_(x)];
    }
    if (i > 0) {
      if (((IOSDoubleArray_Get(y, i - 1) < 0.0) && (IOSDoubleArray_Get(y, i) > 0.0)) || ((IOSDoubleArray_Get(y, i - 1) > 0.0) && (IOSDoubleArray_Get(y, i) < 0.0))) {
        xval = OrgGeogebraCommonKernelAlgosAlgoRoots_calcSingleRootWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_(f, x - deltax, x);
        if (JavaLangMath_absWithDouble_([f evaluateWithDouble:xval]) < OrgGeogebraCommonKernelKernel_MIN_PRECISION) {
          [xlist addWithId:JavaLangDouble_valueOfWithDouble_(xval)];
        }
      }
    }
  }
  if ([xlist size] > 0) {
    IOSDoubleArray *res = [IOSDoubleArray arrayWithLength:[xlist size]];
    for (jint i = 0; i < [xlist size]; i++) {
      *IOSDoubleArray_GetRef(res, i) = [((JavaLangDouble *) nil_chk([xlist getWithInt:i])) doubleValue];
    }
    OrgGeogebraCommonKernelAlgosAlgoGeoPointsFunction_removeDuplicatesWithDoubleArray_(res);
    return res;
  }
  return nil;
}

jdouble OrgGeogebraCommonKernelAlgosAlgoRoots_calcSingleRootWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_(OrgGeogebraCommonKernelGeosGeoFunction *f, jdouble left, jdouble right) {
  OrgGeogebraCommonKernelAlgosAlgoRoots_initialize();
  id<OrgApacheCommonsMathAnalysisSolversUnivariateRealSolver> rootFinder = [((OrgApacheCommonsMathAnalysisSolversUnivariateRealSolverFactory *) nil_chk(OrgApacheCommonsMathAnalysisSolversUnivariateRealSolverFactory_newInstance())) newBrentSolver];
  if (![((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(f)) isDefined]) return JavaLangDouble_NaN;
  jdouble root = JavaLangDouble_NaN;
  OrgGeogebraCommonKernelArithmeticFunction *fun = [f getFunction];
  @try {
    root = [((id<OrgApacheCommonsMathAnalysisSolversUnivariateRealSolver>) nil_chk(rootFinder)) solveWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:[new_OrgGeogebraCommonKernelRootsRealRootAdapter_initWithOrgGeogebraCommonKernelRootsRealRootFunction_(fun) autorelease] withDouble:left withDouble:right];
  }
  @catch (JavaLangException *e) {
    @try {
      IOSDoubleArray *borders = OrgGeogebraCommonKernelRootsRealRootUtil_getDefinedIntervalWithOrgGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(fun, left, right);
      root = [((id<OrgApacheCommonsMathAnalysisSolversUnivariateRealSolver>) nil_chk(rootFinder)) solveWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:[new_OrgGeogebraCommonKernelRootsRealRootAdapter_initWithOrgGeogebraCommonKernelRootsRealRootFunction_(fun) autorelease] withDouble:IOSDoubleArray_Get(nil_chk(borders), 0) withDouble:IOSDoubleArray_Get(borders, 1)];
    }
    @catch (JavaLangException *ex) {
      root = JavaLangDouble_NaN;
    }
  }
  return root;
}

jint OrgGeogebraCommonKernelAlgosAlgoRoots_findNumberOfSamplesWithDouble_withDouble_(OrgGeogebraCommonKernelAlgosAlgoRoots *self, jdouble l, jdouble r) {
  jdouble visiblemax = [((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getViewsXMaxWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(nil_chk(self->points_), 0)];
  jdouble visiblemin = [self->kernel_ getViewsXMinWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(self->points_, 0)];
  jdouble visiblepixs = [((OrgGeogebraCommonMainApp *) nil_chk([self->kernel_ getApplication])) countPixelsWithDouble:visiblemin withDouble:visiblemax];
  jdouble pixsininterval = visiblepixs * (r - l) / (visiblemax - visiblemin);
  jint n = (jint) JavaLangMath_roundWithDouble_(JavaLangMath_maxWithDouble_withDouble_(JavaLangMath_minWithDouble_withDouble_(pixsininterval / OrgGeogebraCommonKernelAlgosAlgoRoots_PIXELS_BETWEEN_SAMPLES, OrgGeogebraCommonKernelAlgosAlgoRoots_MAX_SAMPLES), OrgGeogebraCommonKernelAlgosAlgoRoots_MIN_SAMPLES));
  return n;
}

jboolean OrgGeogebraCommonKernelAlgosAlgoRoots_signChangedWithOrgGeogebraCommonKernelGeosGeoFunction_withDouble_(OrgGeogebraCommonKernelGeosGeoFunction *f, jdouble x) {
  OrgGeogebraCommonKernelAlgosAlgoRoots_initialize();
  jdouble delta = OrgGeogebraCommonKernelKernel_MIN_PRECISION * 10;
  jdouble left, right, lefty, righty;
  jboolean signChanged;
  left = x - delta;
  right = x + delta;
  jint count = 0;
  while (JavaLangMath_absWithDouble_(lefty = [((OrgGeogebraCommonKernelGeosGeoFunction *) nil_chk(f)) evaluateWithDouble:left]) < delta && count++ < 100) left = left - delta;
  count = 0;
  while (JavaLangMath_absWithDouble_(righty = [f evaluateWithDouble:right]) < delta && count++ < 100) right = right + delta;
  signChanged = (lefty * righty < 0.0);
  return signChanged;
}

void OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonKernelAlgosAlgoRoots *self, OrgGeogebraCommonKernelConstruction *cons) {
  OrgGeogebraCommonKernelAlgosAlgoGeoPointsFunction_initWithOrgGeogebraCommonKernelConstruction_(self, cons);
  self->type_ = OrgGeogebraCommonKernelAlgosAlgoRoots_TYPE_ROOTS;
}

OrgGeogebraCommonKernelAlgosAlgoRoots *new_OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_(OrgGeogebraCommonKernelConstruction *cons) {
  OrgGeogebraCommonKernelAlgosAlgoRoots *self = [OrgGeogebraCommonKernelAlgosAlgoRoots alloc];
  OrgGeogebraCommonKernelAlgosAlgoRoots_initWithOrgGeogebraCommonKernelConstruction_(self, cons);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelAlgosAlgoRoots)
