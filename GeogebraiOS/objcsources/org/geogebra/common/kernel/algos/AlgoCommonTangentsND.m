//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/geogebra/common/kernel/algos/AlgoCommonTangentsND.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Math.h"
#include "org/geogebra/common/euclidian/EuclidianConstants.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/StringTemplate.h"
#include "org/geogebra/common/kernel/algos/AlgoCommonTangentsND.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/algos/ConstructionElement.h"
#include "org/geogebra/common/kernel/commands/Commands.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoLine.h"
#include "org/geogebra/common/kernel/geos/GeoVec2D.h"
#include "org/geogebra/common/kernel/kernelND/AlgoIntersectND.h"
#include "org/geogebra/common/kernel/kernelND/GeoConicND.h"
#include "org/geogebra/common/kernel/kernelND/GeoLineND.h"
#include "org/geogebra/common/kernel/kernelND/GeoPointND.h"
#include "org/geogebra/common/main/Localization.h"

__attribute__((unused)) static void OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_compute(OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND *self);

@implementation OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                                          withNSStringArray:(IOSObjectArray *)labels
              withOrgGeogebraCommonKernelKernelNDGeoConicND:(OrgGeogebraCommonKernelKernelNDGeoConicND *)c
              withOrgGeogebraCommonKernelKernelNDGeoConicND:(OrgGeogebraCommonKernelKernelNDGeoConicND *)c2 {
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelKernelNDGeoConicND_withOrgGeogebraCommonKernelKernelNDGeoConicND_(self, cons, labels, c, c2);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
              withOrgGeogebraCommonKernelKernelNDGeoConicND:(OrgGeogebraCommonKernelKernelNDGeoConicND *)c
              withOrgGeogebraCommonKernelKernelNDGeoConicND:(OrgGeogebraCommonKernelKernelNDGeoConicND *)c2 {
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoConicND_withOrgGeogebraCommonKernelKernelNDGeoConicND_(self, cons, c, c2);
  return self;
}

- (void)createPointsWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)setCoordsAsPointWithInt:(jint)index
                     withDouble:(jdouble)x
                     withDouble:(jdouble)y {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)setCoordsAsVectorWithInt:(jint)index
                      withDouble:(jdouble)x
                      withDouble:(jdouble)y {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)initTangents {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (OrgGeogebraCommonKernelKernelNDAlgoIntersectND *)createAlgoWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                                                        withOrgGeogebraCommonKernelKernelNDGeoPointND:(id<OrgGeogebraCommonKernelKernelNDGeoPointND>)p
                                                               withOrgGeogebraCommonKernelGeosGeoLine:(OrgGeogebraCommonKernelGeosGeoLine *)line
                                                        withOrgGeogebraCommonKernelKernelNDGeoConicND:(OrgGeogebraCommonKernelKernelNDGeoConicND *)conic {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (OrgGeogebraCommonKernelCommandsCommandsEnum *)getClassName {
  return OrgGeogebraCommonKernelCommandsCommandsEnum_get_Tangent();
}

- (jint)getRelatedModeID {
  return OrgGeogebraCommonEuclidianEuclidianConstants_MODE_TANGENTS;
}

- (void)setInputOutput {
  OrgGeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:2 type:OrgGeogebraCommonKernelGeosGeoElement_class_()]);
  IOSObjectArray_Set(input_, 0, IOSObjectArray_Get(nil_chk(c_), 0));
  IOSObjectArray_Set(input_, 1, IOSObjectArray_Get(c_, 1));
  IOSObjectArray *out = [IOSObjectArray arrayWithLength:((IOSObjectArray *) nil_chk(tangents_))->size_ type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
  for (jint i = 0; i < tangents_->size_; i++) {
    IOSObjectArray_Set(out, i, (OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(IOSObjectArray_Get(tangents_, i), [OrgGeogebraCommonKernelGeosGeoElement class]));
  }
  [super setOutputWithOrgGeogebraCommonKernelGeosGeoElementArray:out];
  [self setDependencies];
}

- (IOSObjectArray *)getTangents {
  return tangents_;
}

- (jboolean)checkUndefined {
  return ![((OrgGeogebraCommonKernelKernelNDGeoConicND *) nil_chk(IOSObjectArray_Get(nil_chk(c_), 0))) isCircle] || ![((OrgGeogebraCommonKernelKernelNDGeoConicND *) nil_chk(IOSObjectArray_Get(c_, 1))) isCircle];
}

- (jdouble)getMidpointXWithInt:(jint)csIndex
                       withInt:(jint)mpIndex {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (jdouble)getMidpointYWithInt:(jint)csIndex
                       withInt:(jint)mpIndex {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)compute {
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_compute(self);
}

- (void)updatePolarLines {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)updateTangentsWithOrgGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)tangentPoints
                                                                 withInt:(jint)index {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)setTangentFromPolarWithInt:(jint)i
withOrgGeogebraCommonKernelGeosGeoLine:(OrgGeogebraCommonKernelGeosGeoLine *)line {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (jboolean)isIntersectionPointIncidentWithInt:(jint)index
 withOrgGeogebraCommonKernelKernelNDGeoConicND:(OrgGeogebraCommonKernelKernelNDGeoConicND *)conic {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id<OrgGeogebraCommonKernelKernelNDGeoPointND>)getTangentPointWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)conic
                                                                   withOrgGeogebraCommonKernelGeosGeoLine:(OrgGeogebraCommonKernelGeosGeoLine *)line {
  if (conic != IOSObjectArray_Get(nil_chk(c_), 0) && conic != IOSObjectArray_Get(c_, 1)) return nil;
  if (conic == IOSObjectArray_Get(c_, 0)) {
    if (line == IOSObjectArray_Get(nil_chk(tangents_), 0)) {
      return IOSObjectArray_Get(nil_chk(tangentPoints_), 0);
    }
    else if (line == IOSObjectArray_Get(tangents_, 1)) {
      return IOSObjectArray_Get(nil_chk(tangentPoints_), 1);
    }
    else {
      return nil;
    }
  }
  else if (conic == IOSObjectArray_Get(c_, 1)) {
    if (line == IOSObjectArray_Get(nil_chk(tangents_), 2)) {
      return IOSObjectArray_Get(nil_chk(tangentPoints2_), 0);
    }
    else if (line == IOSObjectArray_Get(tangents_, 3)) {
      return IOSObjectArray_Get(nil_chk(tangentPoints2_), 1);
    }
    else {
      return nil;
    }
  }
  else {
    return nil;
  }
}

- (NSString *)toStringWithOrgGeogebraCommonKernelStringTemplate:(OrgGeogebraCommonKernelStringTemplate *)tpl {
  return [((OrgGeogebraCommonMainLocalization *) nil_chk([self getLoc])) getPlainWithNSString:@"CommonTangentOfCirclesAandB" withNSString:[((OrgGeogebraCommonKernelKernelNDGeoConicND *) nil_chk(IOSObjectArray_Get(nil_chk(c_), 0))) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl] withNSString:[((OrgGeogebraCommonKernelKernelNDGeoConicND *) nil_chk(IOSObjectArray_Get(c_, 1))) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl]];
}

- (void)dealloc {
  RELEASE_(P_);
  RELEASE_(c_);
  RELEASE_(tangents_);
  RELEASE_(polar_);
  RELEASE_(polar2_);
  RELEASE_(algoIntersect_);
  RELEASE_(algoIntersect2_);
  RELEASE_(tangentPoints_);
  RELEASE_(tangentPoints2_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelConstruction:withNSStringArray:withOrgGeogebraCommonKernelKernelNDGeoConicND:withOrgGeogebraCommonKernelKernelNDGeoConicND:", "AlgoCommonTangentsND", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withOrgGeogebraCommonKernelKernelNDGeoConicND:withOrgGeogebraCommonKernelKernelNDGeoConicND:", "AlgoCommonTangentsND", NULL, 0x0, NULL, NULL },
    { "createPointsWithOrgGeogebraCommonKernelConstruction:", "createPoints", "V", 0x404, NULL, NULL },
    { "setCoordsAsPointWithInt:withDouble:withDouble:", "setCoordsAsPoint", "V", 0x404, NULL, NULL },
    { "setCoordsAsVectorWithInt:withDouble:withDouble:", "setCoordsAsVector", "V", 0x404, NULL, NULL },
    { "initTangents", NULL, "V", 0x404, NULL, NULL },
    { "createAlgoWithOrgGeogebraCommonKernelConstruction:withOrgGeogebraCommonKernelKernelNDGeoPointND:withOrgGeogebraCommonKernelGeosGeoLine:withOrgGeogebraCommonKernelKernelNDGeoConicND:", "createAlgo", "Lorg.geogebra.common.kernel.kernelND.AlgoIntersectND;", 0x404, NULL, NULL },
    { "getClassName", NULL, "Lorg.geogebra.common.kernel.commands.Commands;", 0x1, NULL, NULL },
    { "getRelatedModeID", NULL, "I", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "getTangents", NULL, "[Lorg.geogebra.common.kernel.kernelND.GeoLineND;", 0x1, NULL, NULL },
    { "checkUndefined", NULL, "Z", 0x4, NULL, NULL },
    { "getMidpointXWithInt:withInt:", "getMidpointX", "D", 0x404, NULL, NULL },
    { "getMidpointYWithInt:withInt:", "getMidpointY", "D", 0x404, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "updatePolarLines", NULL, "V", 0x404, NULL, NULL },
    { "updateTangentsWithOrgGeogebraCommonKernelKernelNDGeoPointNDArray:withInt:", "updateTangents", "V", 0x404, NULL, NULL },
    { "setTangentFromPolarWithInt:withOrgGeogebraCommonKernelGeosGeoLine:", "setTangentFromPolar", "V", 0x404, NULL, NULL },
    { "isIntersectionPointIncidentWithInt:withOrgGeogebraCommonKernelKernelNDGeoConicND:", "isIntersectionPointIncident", "Z", 0x404, NULL, NULL },
    { "getTangentPointWithOrgGeogebraCommonKernelGeosGeoElement:withOrgGeogebraCommonKernelGeosGeoLine:", "getTangentPoint", "Lorg.geogebra.common.kernel.kernelND.GeoPointND;", 0x1, NULL, NULL },
    { "toStringWithOrgGeogebraCommonKernelStringTemplate:", "toString", "Ljava.lang.String;", 0x11, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "P_", NULL, 0x4, "[Lorg.geogebra.common.kernel.kernelND.GeoPointND;", NULL, NULL,  },
    { "c_", NULL, 0x4, "[Lorg.geogebra.common.kernel.kernelND.GeoConicND;", NULL, NULL,  },
    { "tangents_", NULL, 0x4, "[Lorg.geogebra.common.kernel.kernelND.GeoLineND;", NULL, NULL,  },
    { "polar_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoLine;", NULL, NULL,  },
    { "polar2_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoLine;", NULL, NULL,  },
    { "algoIntersect_", NULL, 0x4, "Lorg.geogebra.common.kernel.kernelND.AlgoIntersectND;", NULL, NULL,  },
    { "algoIntersect2_", NULL, 0x4, "Lorg.geogebra.common.kernel.kernelND.AlgoIntersectND;", NULL, NULL,  },
    { "tangentPoints_", NULL, 0x4, "[Lorg.geogebra.common.kernel.kernelND.GeoPointND;", NULL, NULL,  },
    { "tangentPoints2_", NULL, 0x4, "[Lorg.geogebra.common.kernel.kernelND.GeoPointND;", NULL, NULL,  },
    { "equalLines_", NULL, 0x4, "Z", NULL, NULL,  },
    { "equalLines2_", NULL, 0x4, "Z", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND = { 2, "AlgoCommonTangentsND", "org.geogebra.common.kernel.algos", NULL, 0x401, 21, methods, 11, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND;
}

@end

void OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_initWithOrgGeogebraCommonKernelConstruction_withNSStringArray_withOrgGeogebraCommonKernelKernelNDGeoConicND_withOrgGeogebraCommonKernelKernelNDGeoConicND_(OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND *self, OrgGeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, OrgGeogebraCommonKernelKernelNDGeoConicND *c, OrgGeogebraCommonKernelKernelNDGeoConicND *c2) {
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoConicND_withOrgGeogebraCommonKernelKernelNDGeoConicND_(self, cons, c, c2);
  OrgGeogebraCommonKernelGeosGeoElement_setLabelsWithNSStringArray_withOrgGeogebraCommonKernelGeosGeoElementArray_(labels, [self getOutput]);
}

void OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoConicND_withOrgGeogebraCommonKernelKernelNDGeoConicND_(OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND *self, OrgGeogebraCommonKernelConstruction *cons, OrgGeogebraCommonKernelKernelNDGeoConicND *c, OrgGeogebraCommonKernelKernelNDGeoConicND *c2) {
  OrgGeogebraCommonKernelAlgosAlgoElement_initWithOrgGeogebraCommonKernelConstruction_(self, cons);
  self->equalLines_ = NO;
  self->equalLines2_ = NO;
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_setAndConsume_c_(self, [IOSObjectArray newArrayWithLength:2 type:OrgGeogebraCommonKernelKernelNDGeoConicND_class_()]);
  IOSObjectArray_Set(self->c_, 0, c);
  IOSObjectArray_Set(self->c_, 1, c2);
  jdouble r = [((OrgGeogebraCommonKernelKernelNDGeoConicND *) nil_chk(c)) getCircleRadius];
  jdouble r2 = [((OrgGeogebraCommonKernelKernelNDGeoConicND *) nil_chk(c2)) getCircleRadius];
  [self createPointsWithOrgGeogebraCommonKernelConstruction:cons];
  if (JavaLangMath_absWithDouble_(r2 - r) > OrgGeogebraCommonKernelKernel_MIN_PRECISION) {
    [self setCoordsAsPointWithInt:0 withDouble:([((OrgGeogebraCommonKernelGeosGeoVec2D *) nil_chk(c->b_)) getX] * r2 - [c2->b_ getX] * r) / (r2 - r) withDouble:([c->b_ getY] * r2 - [c2->b_ getY] * r) / (r2 - r)];
  }
  else {
    [self setCoordsAsVectorWithInt:0 withDouble:([((OrgGeogebraCommonKernelGeosGeoVec2D *) nil_chk(c->b_)) getX] * r2 - [c2->b_ getX] * r) withDouble:([c->b_ getY] * r2 - [c2->b_ getY] * r)];
  }
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_setAndConsume_polar_(self, new_OrgGeogebraCommonKernelGeosGeoLine_initWithOrgGeogebraCommonKernelConstruction_(cons));
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_set_algoIntersect_(self, [self createAlgoWithOrgGeogebraCommonKernelConstruction:cons withOrgGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(nil_chk(self->P_), 0) withOrgGeogebraCommonKernelGeosGeoLine:self->polar_ withOrgGeogebraCommonKernelKernelNDGeoConicND:IOSObjectArray_Get(self->c_, 0)]);
  [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:self->algoIntersect_];
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_set_tangentPoints_(self, [((OrgGeogebraCommonKernelKernelNDAlgoIntersectND *) nil_chk(self->algoIntersect_)) getIntersectionPoints]);
  [self setCoordsAsPointWithInt:1 withDouble:([((OrgGeogebraCommonKernelGeosGeoVec2D *) nil_chk(c->b_)) getX] * r2 + [c2->b_ getX] * r) / (r2 + r) withDouble:([c->b_ getY] * r2 + [c2->b_ getY] * r) / (r2 + r)];
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_setAndConsume_polar2_(self, new_OrgGeogebraCommonKernelGeosGeoLine_initWithOrgGeogebraCommonKernelConstruction_(cons));
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_set_algoIntersect2_(self, [self createAlgoWithOrgGeogebraCommonKernelConstruction:cons withOrgGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(self->P_, 1) withOrgGeogebraCommonKernelGeosGeoLine:self->polar2_ withOrgGeogebraCommonKernelKernelNDGeoConicND:IOSObjectArray_Get(self->c_, 1)]);
  [cons removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:self->algoIntersect2_];
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_set_tangentPoints2_(self, [((OrgGeogebraCommonKernelKernelNDAlgoIntersectND *) nil_chk(self->algoIntersect2_)) getIntersectionPoints]);
  [self initTangents];
  [self setInputOutput];
  OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_compute(self);
  self->equalLines_ = [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(IOSObjectArray_Get(nil_chk(self->tangents_), 0))) isEqualWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(IOSObjectArray_Get(self->tangents_, 1), [OrgGeogebraCommonKernelGeosGeoElement class])];
  if (self->equalLines_) {
    [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(IOSObjectArray_Get(self->tangents_, 1))) setUndefined];
    [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(nil_chk(self->tangentPoints_), 1))) setUndefined];
  }
  self->equalLines2_ = [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(IOSObjectArray_Get(self->tangents_, 0 + 2))) isEqualWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *) check_class_cast(IOSObjectArray_Get(self->tangents_, 1 + 2), [OrgGeogebraCommonKernelGeosGeoElement class])];
  if (self->equalLines2_) {
    [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(IOSObjectArray_Get(self->tangents_, 1 + 2))) setUndefined];
    [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(nil_chk(self->tangentPoints2_), 1))) setUndefined];
  }
}

void OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND_compute(OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND *self) {
  if ([self checkUndefined]) {
    for (jint i = 0; i < 4; i++) {
      [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(IOSObjectArray_Get(nil_chk(self->tangents_), i))) setUndefined];
    }
    return;
  }
  jdouble r = [((OrgGeogebraCommonKernelKernelNDGeoConicND *) nil_chk(IOSObjectArray_Get(nil_chk(self->c_), 0))) getCircleRadius];
  jdouble r2 = [((OrgGeogebraCommonKernelKernelNDGeoConicND *) nil_chk(IOSObjectArray_Get(self->c_, 1))) getCircleRadius];
  if (JavaLangMath_absWithDouble_(r2 - r) > OrgGeogebraCommonKernelKernel_MIN_PRECISION) {
    [self setCoordsAsPointWithInt:0 withDouble:([self getMidpointXWithInt:0 withInt:0] * r2 - [self getMidpointXWithInt:0 withInt:1] * r) / (r2 - r) withDouble:([self getMidpointYWithInt:0 withInt:0] * r2 - [self getMidpointYWithInt:0 withInt:1] * r) / (r2 - r)];
  }
  else {
    [self setCoordsAsVectorWithInt:0 withDouble:([self getMidpointXWithInt:0 withInt:0] * r2 - [self getMidpointXWithInt:0 withInt:1] * r) withDouble:([self getMidpointYWithInt:0 withInt:0] * r2 - [self getMidpointYWithInt:0 withInt:1] * r)];
  }
  [self setCoordsAsPointWithInt:1 withDouble:([self getMidpointXWithInt:1 withInt:0] * r2 + [self getMidpointXWithInt:1 withInt:1] * r) / (r2 + r) withDouble:([self getMidpointYWithInt:1 withInt:0] * r2 + [self getMidpointYWithInt:1 withInt:1] * r) / (r2 + r)];
  [self updatePolarLines];
  if ([self isIntersectionPointIncidentWithInt:0 withOrgGeogebraCommonKernelKernelNDGeoConicND:IOSObjectArray_Get(self->c_, 0)]) {
    [self setTangentFromPolarWithInt:0 withOrgGeogebraCommonKernelGeosGeoLine:self->polar_];
    [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(nil_chk(self->tangentPoints_), 0))) setCoordsFromPointWithOrgGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(nil_chk(self->P_), 0)];
    if (self->equalLines_) {
      [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(IOSObjectArray_Get(nil_chk(self->tangents_), 1))) setUndefined];
      [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(self->tangentPoints_, 1))) setUndefined];
    }
    else {
      [self setTangentFromPolarWithInt:1 withOrgGeogebraCommonKernelGeosGeoLine:self->polar_];
      [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(self->tangentPoints_, 1))) setCoordsFromPointWithOrgGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(self->P_, 0)];
    }
  }
  else {
    [((OrgGeogebraCommonKernelKernelNDAlgoIntersectND *) nil_chk(self->algoIntersect_)) update];
    [self updateTangentsWithOrgGeogebraCommonKernelKernelNDGeoPointNDArray:self->tangentPoints_ withInt:0];
    self->equalLines_ = NO;
  }
  if ([self isIntersectionPointIncidentWithInt:1 withOrgGeogebraCommonKernelKernelNDGeoConicND:IOSObjectArray_Get(self->c_, 1)]) {
    [self setTangentFromPolarWithInt:0 + 2 withOrgGeogebraCommonKernelGeosGeoLine:self->polar2_];
    [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(nil_chk(self->tangentPoints2_), 0))) setCoordsFromPointWithOrgGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(nil_chk(self->P_), 1)];
    if (self->equalLines2_) {
      [((id<OrgGeogebraCommonKernelKernelNDGeoLineND>) nil_chk(IOSObjectArray_Get(nil_chk(self->tangents_), 1 + 2))) setUndefined];
      [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(self->tangentPoints2_, 1))) setUndefined];
    }
    else {
      [self setTangentFromPolarWithInt:1 + 2 withOrgGeogebraCommonKernelGeosGeoLine:self->polar2_];
      [((id<OrgGeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(self->tangentPoints2_, 1))) setCoordsFromPointWithOrgGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(self->P_, 1)];
    }
  }
  else {
    [((OrgGeogebraCommonKernelKernelNDAlgoIntersectND *) nil_chk(self->algoIntersect2_)) update];
    [self updateTangentsWithOrgGeogebraCommonKernelKernelNDGeoPointNDArray:self->tangentPoints2_ withInt:1];
    self->equalLines2_ = NO;
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelAlgosAlgoCommonTangentsND)
