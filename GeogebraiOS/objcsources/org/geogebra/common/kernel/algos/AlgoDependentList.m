//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/kernel/algos/AlgoDependentList.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/StringBuilder.h"
#include "java/util/ArrayList.h"
#include "org/geogebra/common/euclidian/EuclidianConstants.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/StringTemplate.h"
#include "org/geogebra/common/kernel/algos/AlgoDependentList.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/algos/Algos.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoList.h"

@interface OrgGeogebraCommonKernelAlgosAlgoDependentList () {
 @public
  JavaUtilArrayList *listItems_;
  OrgGeogebraCommonKernelGeosGeoList *geoList_;
  jboolean isCellRange_;
  NSString *cellRangeString_;
  JavaLangStringBuilder *sb_;
}

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoDependentList, listItems_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoDependentList, geoList_, OrgGeogebraCommonKernelGeosGeoList *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoDependentList, cellRangeString_, NSString *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelAlgosAlgoDependentList, sb_, JavaLangStringBuilder *)

__attribute__((unused)) static void OrgGeogebraCommonKernelAlgosAlgoDependentList_compute(OrgGeogebraCommonKernelAlgosAlgoDependentList *self);

@implementation OrgGeogebraCommonKernelAlgosAlgoDependentList

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                                               withNSString:(NSString *)label
                                      withJavaUtilArrayList:(JavaUtilArrayList *)listItems {
  OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withNSString_withJavaUtilArrayList_(self, cons, label, listItems);
  return self;
}

- (instancetype)initWithOrgGeogebraCommonKernelConstruction:(OrgGeogebraCommonKernelConstruction *)cons
                                      withJavaUtilArrayList:(JavaUtilArrayList *)listItems
                                                withBoolean:(jboolean)isCellRange {
  OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withJavaUtilArrayList_withBoolean_(self, cons, listItems, isCellRange);
  return self;
}

- (OrgGeogebraCommonKernelAlgosAlgosEnum *)getClassName {
  return OrgGeogebraCommonKernelAlgosAlgosEnum_get_Expression();
}

- (void)updateListWithJavaUtilArrayList:(JavaUtilArrayList *)listItems {
  self->listItems_ = listItems;
  [self setInputOutput];
  OrgGeogebraCommonKernelAlgosAlgoDependentList_compute(self);
}

- (void)setInputOutput {
  jint size = [((JavaUtilArrayList *) nil_chk(listItems_)) size];
  input_ = [IOSObjectArray newArrayWithLength:size type:OrgGeogebraCommonKernelGeosGeoElement_class_()];
  for (jint i = 0; i < size; i++) {
    (void) IOSObjectArray_Set(input_, i, [listItems_ getWithInt:i]);
    if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(input_, i))) isLabelSet]) {
      ((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(input_, i)))->labelWanted_ = NO;
    }
  }
  [self setOutputLengthWithInt:1];
  [self setOutputWithInt:0 withOrgGeogebraCommonKernelGeosGeoElement:geoList_];
  if (isCellRange_) {
    [self setDependenciesOutputOnly];
  }
  else {
    [self setDependencies];
  }
}

- (void)remove {
  if (removed_) return;
  [super remove];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(input_))->size_; i++) {
    if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(input_, i))) isLabelSet]) {
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(input_, i))) remove];
    }
  }
}

- (OrgGeogebraCommonKernelGeosGeoList *)getGeoList {
  return geoList_;
}

- (jint)getRelatedModeID {
  return OrgGeogebraCommonEuclidianEuclidianConstants_MODE_CREATE_LIST;
}

- (void)compute {
  OrgGeogebraCommonKernelAlgosAlgoDependentList_compute(self);
}

- (void)setCellRangeStringWithNSString:(NSString *)cellRangeString {
  self->cellRangeString_ = cellRangeString;
}

- (NSString *)toStringWithOrgGeogebraCommonKernelStringTemplate:(OrgGeogebraCommonKernelStringTemplate *)tpl {
  if (isCellRange_ && cellRangeString_ != nil) {
    return cellRangeString_;
  }
  if (sb_ == nil) sb_ = new_JavaLangStringBuilder_init();
  else [sb_ setLengthWithInt:0];
  (void) [((JavaLangStringBuilder *) nil_chk(sb_)) appendWithNSString:@"{"];
  if (((IOSObjectArray *) nil_chk(input_))->size_ > 0) {
    for (jint i = 0; i < input_->size_ - 1; i++) {
      (void) [sb_ appendWithNSString:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(input_, i))) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl]];
      (void) [sb_ appendWithNSString:@", "];
    }
    (void) [sb_ appendWithNSString:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(input_, input_->size_ - 1))) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl]];
  }
  (void) [sb_ appendWithNSString:@"}"];
  return [sb_ description];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelConstruction:withNSString:withJavaUtilArrayList:", "AlgoDependentList", NULL, 0x1, NULL, NULL },
    { "initWithOrgGeogebraCommonKernelConstruction:withJavaUtilArrayList:withBoolean:", "AlgoDependentList", NULL, 0x1, NULL, NULL },
    { "getClassName", NULL, "Lorg.geogebra.common.kernel.algos.Algos;", 0x1, NULL, NULL },
    { "updateListWithJavaUtilArrayList:", "updateList", "V", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "remove", NULL, "V", 0x1, NULL, NULL },
    { "getGeoList", NULL, "Lorg.geogebra.common.kernel.geos.GeoList;", 0x1, NULL, NULL },
    { "getRelatedModeID", NULL, "I", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "setCellRangeStringWithNSString:", "setCellRangeString", "V", 0x1, NULL, NULL },
    { "toStringWithOrgGeogebraCommonKernelStringTemplate:", "toString", "Ljava.lang.String;", 0x11, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "listItems_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "geoList_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "isCellRange_", NULL, 0x2, "Z", NULL, NULL,  },
    { "cellRangeString_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "sb_", NULL, 0x2, "Ljava.lang.StringBuilder;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelAlgosAlgoDependentList = { 2, "AlgoDependentList", "org.geogebra.common.kernel.algos", NULL, 0x1, 11, methods, 5, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelAlgosAlgoDependentList;
}

@end

void OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withNSString_withJavaUtilArrayList_(OrgGeogebraCommonKernelAlgosAlgoDependentList *self, OrgGeogebraCommonKernelConstruction *cons, NSString *label, JavaUtilArrayList *listItems) {
  (void) OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withJavaUtilArrayList_withBoolean_(self, cons, listItems, NO);
  [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(self->geoList_)) setLabelWithNSString:label];
}

OrgGeogebraCommonKernelAlgosAlgoDependentList *new_OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withNSString_withJavaUtilArrayList_(OrgGeogebraCommonKernelConstruction *cons, NSString *label, JavaUtilArrayList *listItems) {
  OrgGeogebraCommonKernelAlgosAlgoDependentList *self = [OrgGeogebraCommonKernelAlgosAlgoDependentList alloc];
  OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withNSString_withJavaUtilArrayList_(self, cons, label, listItems);
  return self;
}

void OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withJavaUtilArrayList_withBoolean_(OrgGeogebraCommonKernelAlgosAlgoDependentList *self, OrgGeogebraCommonKernelConstruction *cons, JavaUtilArrayList *listItems, jboolean isCellRange) {
  (void) OrgGeogebraCommonKernelAlgosAlgoElement_initWithOrgGeogebraCommonKernelConstruction_(self, cons);
  self->listItems_ = listItems;
  self->isCellRange_ = isCellRange;
  self->geoList_ = new_OrgGeogebraCommonKernelGeosGeoList_initWithOrgGeogebraCommonKernelConstruction_(cons);
  [self setInputOutput];
  OrgGeogebraCommonKernelAlgosAlgoDependentList_compute(self);
}

OrgGeogebraCommonKernelAlgosAlgoDependentList *new_OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withJavaUtilArrayList_withBoolean_(OrgGeogebraCommonKernelConstruction *cons, JavaUtilArrayList *listItems, jboolean isCellRange) {
  OrgGeogebraCommonKernelAlgosAlgoDependentList *self = [OrgGeogebraCommonKernelAlgosAlgoDependentList alloc];
  OrgGeogebraCommonKernelAlgosAlgoDependentList_initWithOrgGeogebraCommonKernelConstruction_withJavaUtilArrayList_withBoolean_(self, cons, listItems, isCellRange);
  return self;
}

void OrgGeogebraCommonKernelAlgosAlgoDependentList_compute(OrgGeogebraCommonKernelAlgosAlgoDependentList *self) {
  [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(self->geoList_)) clear];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(self->input_))->size_; i++) {
    OrgGeogebraCommonKernelAlgosAlgoElement *algo = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(self->input_, i))) getParentAlgorithm];
    if (algo != nil && [algo getOutputLength] > 1 && [algo hasSingleOutputType]) {
      for (jint k = 0; k < [algo getOutputLength]; k++) {
        OrgGeogebraCommonKernelGeosGeoElement *geo = [algo getOutputWithInt:k];
        if ((geo == IOSObjectArray_Get(self->input_, i) || [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isDefined]) && ![self->geoList_ listContainsWithOrgGeogebraCommonKernelGeosGeoElement:geo]) [self->geoList_ addWithOrgGeogebraCommonKernelGeosGeoElement:geo];
      }
    }
    else {
      [self->geoList_ addWithOrgGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(self->input_, i)];
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelAlgosAlgoDependentList)
