//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/javasources/org/geogebra/common/kernel/arithmetic/Variable.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/util/HashSet.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/StringTemplate.h"
#include "org/geogebra/common/kernel/arithmetic/ExpressionNode.h"
#include "org/geogebra/common/kernel/arithmetic/ExpressionValue.h"
#include "org/geogebra/common/kernel/arithmetic/FunctionVariable.h"
#include "org/geogebra/common/kernel/arithmetic/MyDouble.h"
#include "org/geogebra/common/kernel/arithmetic/ValidExpression.h"
#include "org/geogebra/common/kernel/arithmetic/Variable.h"
#include "org/geogebra/common/kernel/geos/GeoCasCell.h"
#include "org/geogebra/common/kernel/geos/GeoDummyVariable.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/parser/cashandlers/ParserFunctions.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/main/Localization.h"
#include "org/geogebra/common/main/MyParseError.h"
#include "org/geogebra/common/plugin/Operation.h"

@interface OrgGeogebraCommonKernelArithmeticVariable () {
 @public
  NSString *name_;
  OrgGeogebraCommonKernelKernel *kernel_;
}

- (OrgGeogebraCommonKernelGeosGeoElement *)resolveWithBoolean:(jboolean)throwError;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelArithmeticVariable, name_, NSString *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonKernelArithmeticVariable, kernel_, OrgGeogebraCommonKernelKernel *)

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonKernelArithmeticVariable_resolveWithBoolean_(OrgGeogebraCommonKernelArithmeticVariable *self, jboolean throwError);

@implementation OrgGeogebraCommonKernelArithmeticVariable

- (instancetype)initWithOrgGeogebraCommonKernelKernel:(OrgGeogebraCommonKernelKernel *)kernel
                                         withNSString:(NSString *)name {
  OrgGeogebraCommonKernelArithmeticVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(self, kernel, name);
  return self;
}

- (id<OrgGeogebraCommonKernelArithmeticExpressionValue>)deepCopyWithOrgGeogebraCommonKernelKernel:(OrgGeogebraCommonKernelKernel *)kernel1 {
  return [new_OrgGeogebraCommonKernelArithmeticVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(kernel1, name_) autorelease];
}

- (NSString *)getNameWithOrgGeogebraCommonKernelStringTemplate:(OrgGeogebraCommonKernelStringTemplate *)tpl {
  return [self toStringWithOrgGeogebraCommonKernelStringTemplate:tpl];
}

- (jboolean)isConstant {
  return NO;
}

- (jboolean)isLeaf {
  return YES;
}

- (OrgGeogebraCommonKernelGeosGeoElement *)resolveWithBoolean:(jboolean)throwError {
  return OrgGeogebraCommonKernelArithmeticVariable_resolveWithBoolean_(self, throwError);
}

- (OrgGeogebraCommonKernelGeosGeoElement *)resolveWithBoolean:(jboolean)allowAutoCreateGeoElement
                                                  withBoolean:(jboolean)throwError {
  if ([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) isResolveUnkownVarsAsDummyGeos]) {
    return [new_OrgGeogebraCommonKernelGeosGeoDummyVariable_initWithOrgGeogebraCommonKernelConstruction_withNSString_([kernel_ getConstruction], name_) autorelease];
  }
  OrgGeogebraCommonKernelGeosGeoElement *geo = [kernel_ lookupLabelWithNSString:name_ withBoolean:allowAutoCreateGeoElement withBoolean:[kernel_ isResolveUnkownVarsAsDummyGeos]];
  if (geo != nil || !throwError) return geo;
  IOSObjectArray *str = [IOSObjectArray arrayWithObjects:(id[]){ @"UndefinedVariable", name_ } count:2 type:NSString_class_()];
  @throw [new_OrgGeogebraCommonMainMyParseError_initWithOrgGeogebraCommonMainLocalization_withNSStringArray_([((OrgGeogebraCommonMainApp *) nil_chk([kernel_ getApplication])) getLocalization], str) autorelease];
}

- (id<OrgGeogebraCommonKernelArithmeticExpressionValue>)resolveAsExpressionValue {
  OrgGeogebraCommonKernelGeosGeoElement *geo = OrgGeogebraCommonKernelArithmeticVariable_resolveWithBoolean_(self, NO);
  if (geo == nil) {
    id<OrgGeogebraCommonKernelArithmeticExpressionValue> ret = OrgGeogebraCommonKernelArithmeticVariable_replacementWithOrgGeogebraCommonKernelKernel_withNSString_(kernel_, name_);
    return [ret isKindOfClass:[OrgGeogebraCommonKernelArithmeticVariable class]] ? OrgGeogebraCommonKernelArithmeticVariable_resolveWithBoolean_(self, YES) : ((id) ret);
  }
  if ([((NSString *) nil_chk(name_)) indexOf:'$'] > -1 && !([geo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoCasCell class]]) && !([geo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoDummyVariable class]])) {
    jboolean col$ = [name_ indexOf:'$'] == 0;
    jboolean row$ = ((jint) [name_ length]) > 2 && [name_ indexOf:'$' fromIndex:1] > -1;
    OrgGeogebraCommonPluginOperationEnum *operation = OrgGeogebraCommonPluginOperationEnum_get_NO_OPERATION();
    if (row$ && col$) operation = OrgGeogebraCommonPluginOperationEnum_get_$VAR_ROW_COL();
    else if (row$) operation = OrgGeogebraCommonPluginOperationEnum_get_$VAR_ROW();
    else operation = OrgGeogebraCommonPluginOperationEnum_get_$VAR_COL();
    return [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, geo, operation, nil) autorelease];
  }
  return geo;
}

+ (id<OrgGeogebraCommonKernelArithmeticExpressionValue>)replacementWithOrgGeogebraCommonKernelKernel:(OrgGeogebraCommonKernelKernel *)kernel
                                                                                        withNSString:(NSString *)name {
  return OrgGeogebraCommonKernelArithmeticVariable_replacementWithOrgGeogebraCommonKernelKernel_withNSString_(kernel, name);
}

- (JavaUtilHashSet *)getVariables {
  JavaUtilHashSet *ret = [new_JavaUtilHashSet_init() autorelease];
  [ret addWithId:OrgGeogebraCommonKernelArithmeticVariable_resolveWithBoolean_(self, YES)];
  return ret;
}

- (void)resolveVariables {
}

- (NSString *)toStringWithOrgGeogebraCommonKernelStringTemplate:(OrgGeogebraCommonKernelStringTemplate *)tpl {
  return [((OrgGeogebraCommonKernelStringTemplate *) nil_chk(tpl)) printVariableNameWithNSString:name_];
}

- (NSString *)toValueStringWithOrgGeogebraCommonKernelStringTemplate:(OrgGeogebraCommonKernelStringTemplate *)tpl {
  return [self toStringWithOrgGeogebraCommonKernelStringTemplate:tpl];
}

- (NSString *)toLaTeXStringWithBoolean:(jboolean)symbolic
withOrgGeogebraCommonKernelStringTemplate:(OrgGeogebraCommonKernelStringTemplate *)tpl {
  return [self toStringWithOrgGeogebraCommonKernelStringTemplate:tpl];
}

- (jboolean)isNumberValue {
  return NO;
}

- (jboolean)isVariable {
  return YES;
}

- (jboolean)containsWithOrgGeogebraCommonKernelArithmeticExpressionValue:(id<OrgGeogebraCommonKernelArithmeticExpressionValue>)ev {
  return ev == self;
}

- (NSString *)toOutputValueStringWithOrgGeogebraCommonKernelStringTemplate:(OrgGeogebraCommonKernelStringTemplate *)tpl {
  return [self toValueStringWithOrgGeogebraCommonKernelStringTemplate:tpl];
}

- (OrgGeogebraCommonKernelKernel *)getKernel {
  return kernel_;
}

- (jboolean)hasCoords {
  OrgGeogebraCommonKernelGeosGeoElement *ge = [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) lookupLabelWithNSString:name_ withBoolean:NO withBoolean:YES];
  if (ge != nil && !([ge isKindOfClass:[OrgGeogebraCommonKernelGeosGeoDummyVariable class]])) return [ge hasCoords];
  return NO;
}

- (void)setNameWithNSString:(NSString *)s {
  OrgGeogebraCommonKernelArithmeticVariable_set_name_(self, s);
}

- (NSString *)getName {
  return name_;
}

- (jboolean)evaluatesToNumberWithBoolean:(jboolean)def {
  return def;
}

- (OrgGeogebraCommonKernelArithmeticExpressionNode *)wrap {
  return [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, self) autorelease];
}

- (void)dealloc {
  RELEASE_(name_);
  RELEASE_(kernel_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonKernelKernel:withNSString:", "Variable", NULL, 0x1, NULL, NULL },
    { "deepCopyWithOrgGeogebraCommonKernelKernel:", "deepCopy", "Lorg.geogebra.common.kernel.arithmetic.ExpressionValue;", 0x1, NULL, NULL },
    { "getNameWithOrgGeogebraCommonKernelStringTemplate:", "getName", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "isConstant", NULL, "Z", 0x1, NULL, NULL },
    { "isLeaf", NULL, "Z", 0x1, NULL, NULL },
    { "resolveWithBoolean:", "resolve", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x2, NULL, NULL },
    { "resolveWithBoolean:withBoolean:", "resolve", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x4, NULL, NULL },
    { "resolveAsExpressionValue", NULL, "Lorg.geogebra.common.kernel.arithmetic.ExpressionValue;", 0x11, NULL, NULL },
    { "replacementWithOrgGeogebraCommonKernelKernel:withNSString:", "replacement", "Lorg.geogebra.common.kernel.arithmetic.ExpressionValue;", 0x9, NULL, NULL },
    { "getVariables", NULL, "Ljava.util.HashSet;", 0x1, NULL, NULL },
    { "resolveVariables", NULL, "V", 0x1, NULL, NULL },
    { "toStringWithOrgGeogebraCommonKernelStringTemplate:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "toValueStringWithOrgGeogebraCommonKernelStringTemplate:", "toValueString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "toLaTeXStringWithBoolean:withOrgGeogebraCommonKernelStringTemplate:", "toLaTeXString", "Ljava.lang.String;", 0x11, NULL, NULL },
    { "isNumberValue", NULL, "Z", 0x1, NULL, NULL },
    { "isVariable", NULL, "Z", 0x11, NULL, NULL },
    { "containsWithOrgGeogebraCommonKernelArithmeticExpressionValue:", "contains", "Z", 0x11, NULL, NULL },
    { "toOutputValueStringWithOrgGeogebraCommonKernelStringTemplate:", "toOutputValueString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "getKernel", NULL, "Lorg.geogebra.common.kernel.Kernel;", 0x1, NULL, NULL },
    { "hasCoords", NULL, "Z", 0x1, NULL, NULL },
    { "setNameWithNSString:", "setName", "V", 0x1, NULL, NULL },
    { "getName", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "evaluatesToNumberWithBoolean:", "evaluatesToNumber", "Z", 0x1, NULL, NULL },
    { "wrap", NULL, "Lorg.geogebra.common.kernel.arithmetic.ExpressionNode;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "name_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "kernel_", NULL, 0x2, "Lorg.geogebra.common.kernel.Kernel;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonKernelArithmeticVariable = { 2, "Variable", "org.geogebra.common.kernel.arithmetic", NULL, 0x1, 24, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonKernelArithmeticVariable;
}

@end

void OrgGeogebraCommonKernelArithmeticVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(OrgGeogebraCommonKernelArithmeticVariable *self, OrgGeogebraCommonKernelKernel *kernel, NSString *name) {
  OrgGeogebraCommonKernelArithmeticValidExpression_init(self);
  OrgGeogebraCommonKernelArithmeticVariable_set_name_(self, name);
  OrgGeogebraCommonKernelArithmeticVariable_set_kernel_(self, kernel);
}

OrgGeogebraCommonKernelArithmeticVariable *new_OrgGeogebraCommonKernelArithmeticVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(OrgGeogebraCommonKernelKernel *kernel, NSString *name) {
  OrgGeogebraCommonKernelArithmeticVariable *self = [OrgGeogebraCommonKernelArithmeticVariable alloc];
  OrgGeogebraCommonKernelArithmeticVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(self, kernel, name);
  return self;
}

OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonKernelArithmeticVariable_resolveWithBoolean_(OrgGeogebraCommonKernelArithmeticVariable *self, jboolean throwError) {
  return [self resolveWithBoolean:![((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) isResolveUnkownVarsAsDummyGeos] withBoolean:throwError];
}

id<OrgGeogebraCommonKernelArithmeticExpressionValue> OrgGeogebraCommonKernelArithmeticVariable_replacementWithOrgGeogebraCommonKernelKernel_withNSString_(OrgGeogebraCommonKernelKernel *kernel, NSString *name) {
  OrgGeogebraCommonKernelArithmeticVariable_initialize();
  IOSIntArray *exponents = [IOSIntArray arrayWithInts:(jint[]){ 0, 0, 0 } count:3];
  jint i;
  id<OrgGeogebraCommonKernelArithmeticExpressionValue> geo2 = nil;
  for (i = ((jint) [((NSString *) nil_chk(name)) length]) - 1; i >= 0; i--) {
    if ([name charAtWithInt:i] < 'x' || [name charAtWithInt:i] > 'z') break;
    (*IOSIntArray_GetRef(exponents, [name charAtWithInt:i] - 'x'))++;
    NSString *nameNoX = [name substring:0 endIndex:i];
    geo2 = [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel)) lookupLabelWithNSString:nameNoX];
    OrgGeogebraCommonPluginOperationEnum *op = [((OrgGeogebraCommonKernelParserCashandlersParserFunctions *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk([kernel getApplication])) getParserFunctions])) getWithNSString:nameNoX withInt:1];
    if (op != nil && op != OrgGeogebraCommonPluginOperationEnum_get_XCOORD() && op != OrgGeogebraCommonPluginOperationEnum_get_YCOORD() && op != OrgGeogebraCommonPluginOperationEnum_get_ZCOORD()) {
      return [((OrgGeogebraCommonKernelArithmeticExpressionNode *) nil_chk([((OrgGeogebraCommonKernelArithmeticExpressionNode *) nil_chk([((OrgGeogebraCommonKernelArithmeticFunctionVariable *) [new_OrgGeogebraCommonKernelArithmeticFunctionVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(kernel, JreStrcat("C", [name charAtWithInt:i])) autorelease]) wrap])) powerWithOrgGeogebraCommonKernelArithmeticExpressionValue:[new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernel, IOSIntArray_Get(exponents, [name charAtWithInt:i] - 'x')) autorelease]])) applyWithOrgGeogebraCommonPluginOperationEnum:op];
    }
    if (geo2 != nil) break;
  }
  if (i > -1 && !([geo2 isKindOfClass:[OrgGeogebraCommonKernelGeosGeoElement class]])) return [new_OrgGeogebraCommonKernelArithmeticVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(kernel, [name substring:0 endIndex:i + 1]) autorelease];
  if (geo2 == nil) geo2 = [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernel, 1.0) autorelease];
  return [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel, geo2, OrgGeogebraCommonPluginOperationEnum_get_MULTIPLY(), [((OrgGeogebraCommonKernelArithmeticExpressionNode *) nil_chk([((OrgGeogebraCommonKernelArithmeticExpressionNode *) nil_chk([((OrgGeogebraCommonKernelArithmeticExpressionNode *) [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel, [new_OrgGeogebraCommonKernelArithmeticFunctionVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(kernel, @"x") autorelease]) autorelease]) powerWithOrgGeogebraCommonKernelArithmeticExpressionValue:[new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernel, IOSIntArray_Get(exponents, 0)) autorelease]])) multiplyWithOrgGeogebraCommonKernelArithmeticExpressionValue:[((OrgGeogebraCommonKernelArithmeticExpressionNode *) [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel, [new_OrgGeogebraCommonKernelArithmeticFunctionVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(kernel, @"y") autorelease]) autorelease]) powerWithOrgGeogebraCommonKernelArithmeticExpressionValue:[new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernel, IOSIntArray_Get(exponents, 1)) autorelease]]])) multiplyWithOrgGeogebraCommonKernelArithmeticExpressionValue:[((OrgGeogebraCommonKernelArithmeticExpressionNode *) [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel, [new_OrgGeogebraCommonKernelArithmeticFunctionVariable_initWithOrgGeogebraCommonKernelKernel_withNSString_(kernel, @"z") autorelease]) autorelease]) powerWithOrgGeogebraCommonKernelArithmeticExpressionValue:[new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernel, IOSIntArray_Get(exponents, 2)) autorelease]]]) autorelease];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonKernelArithmeticVariable)
