//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/main/GlobalKeyDispatcher.java
//


#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Character.h"
#include "java/lang/Math.h"
#include "java/util/ArrayList.h"
#include "java/util/Iterator.h"
#include "java/util/TreeSet.h"
#include "org/geogebra/common/awt/GColor.h"
#include "org/geogebra/common/euclidian/DrawableND.h"
#include "org/geogebra/common/euclidian/EuclidianController.h"
#include "org/geogebra/common/euclidian/EuclidianView.h"
#include "org/geogebra/common/euclidian/EuclidianViewInterfaceCommon.h"
#include "org/geogebra/common/euclidian/draw/DrawTextField.h"
#include "org/geogebra/common/gui/menubar/OptionsMenu.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/ConstructionDefaults.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/Matrix/Coords.h"
#include "org/geogebra/common/kernel/View.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/geos/Furniture.h"
#include "org/geogebra/common/kernel/geos/GeoAngle.h"
#include "org/geogebra/common/kernel/geos/GeoBoolean.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoList.h"
#include "org/geogebra/common/kernel/geos/GeoNumeric.h"
#include "org/geogebra/common/kernel/geos/GeoPoint.h"
#include "org/geogebra/common/kernel/geos/GeoTextField.h"
#include "org/geogebra/common/kernel/geos/PointProperties.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/main/DialogManager.h"
#include "org/geogebra/common/main/GlobalKeyDispatcher.h"
#include "org/geogebra/common/main/GuiManagerInterface.h"
#include "org/geogebra/common/main/KeyCodes.h"
#include "org/geogebra/common/main/Localization.h"
#include "org/geogebra/common/main/SelectionManager.h"
#include "org/geogebra/common/main/settings/EuclidianSettings.h"
#include "org/geogebra/common/main/settings/Settings.h"
#include "org/geogebra/common/plugin/EuclidianStyleConstants.h"
#include "org/geogebra/common/util/CopyPaste.h"

@interface OrgGeogebraCommonMainGlobalKeyDispatcher () {
 @public
  JavaUtilTreeSet *tempSet_;
  OrgGeogebraCommonKernelMatrixCoords *tempVec_;
}

+ (jint)getPointSizeIncWithInt:(jint)oldFontSize
                       withInt:(jint)newFontSize;

+ (void)setGeoPropertiesWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo
                                                          withInt:(jint)lineThicknessIncr
                                                          withInt:(jint)pointSizeIncr
                                                          withInt:(jint)angleSizeIncr
                                                      withBoolean:(jboolean)blackWhiteMode;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonMainGlobalKeyDispatcher, tempSet_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonMainGlobalKeyDispatcher, tempVec_, OrgGeogebraCommonKernelMatrixCoords *)

__attribute__((unused)) static jint OrgGeogebraCommonMainGlobalKeyDispatcher_getPointSizeIncWithInt_withInt_(jint oldFontSize, jint newFontSize);

__attribute__((unused)) static void OrgGeogebraCommonMainGlobalKeyDispatcher_setGeoPropertiesWithOrgGeogebraCommonKernelGeosGeoElement_withInt_withInt_withInt_withBoolean_(OrgGeogebraCommonKernelGeosGeoElement *geo, jint lineThicknessIncr, jint pointSizeIncr, jint angleSizeIncr, jboolean blackWhiteMode);

@implementation OrgGeogebraCommonMainGlobalKeyDispatcher

- (instancetype)initWithOrgGeogebraCommonMainApp:(OrgGeogebraCommonMainApp *)app2 {
  OrgGeogebraCommonMainGlobalKeyDispatcher_initWithOrgGeogebraCommonMainApp_(self, app2);
  return self;
}

- (void)handleFunctionKeyForAlgebraInputWithInt:(jint)i
      withOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (JavaUtilTreeSet *)getTempSet {
  if (tempSet_ == nil) {
    tempSet_ = new_JavaUtilTreeSet_init();
  }
  return tempSet_;
}

- (jboolean)renameStartedWithChar:(jchar)ch {
  OrgGeogebraCommonKernelGeosGeoElement *geo;
  if ([((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) selectedGeosSize] == 1) {
    geo = [((JavaUtilArrayList *) nil_chk([selection_ getSelectedGeos])) getWithInt:0];
  }
  else {
    geo = [((OrgGeogebraCommonMainApp *) nil_chk(app_)) getLastCreatedGeoElement];
  }
  if ((JavaLangCharacter_isLetterWithChar_(ch)) || [geo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoTextField class]]) {
    if (geo != nil && [geo isRenameable]) {
      if ([geo isKindOfClass:[OrgGeogebraCommonKernelGeosGeoTextField class]]) {
        OrgGeogebraCommonEuclidianDrawDrawTextField *dt = (OrgGeogebraCommonEuclidianDrawDrawTextField *) check_class_cast([((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getActiveEuclidianView])) getDrawableForWithOrgGeogebraCommonKernelGeosGeoElement:geo], [OrgGeogebraCommonEuclidianDrawDrawTextField class]);
        [((OrgGeogebraCommonEuclidianDrawDrawTextField *) nil_chk(dt)) setFocusWithNSString:JreStrcat("C", ch)];
      }
      else {
        [((OrgGeogebraCommonMainDialogManager *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getDialogManager])) showRenameDialogWithOrgGeogebraCommonKernelGeosGeoElement:geo withBoolean:YES withNSString:JavaLangCharacter_toStringWithChar_(ch) withBoolean:NO];
      }
      return YES;
    }
  }
  return NO;
}

- (jboolean)handleArrowKeyMovementWithJavaUtilArrayList:(JavaUtilArrayList *)geos
                                             withDouble:(jdouble)xdiff
                                             withDouble:(jdouble)ydiff
                                             withDouble:(jdouble)zdiff {
  OrgGeogebraCommonKernelGeosGeoElement *geo = [((JavaUtilArrayList *) nil_chk(geos)) getWithInt:0];
  jboolean allSliders = YES;
  for (jint i = 0; i < [geos size]; i++) {
    OrgGeogebraCommonKernelGeosGeoElement *geoi = [geos getWithInt:i];
    if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geoi)) isGeoNumeric] || ![geoi isChangeable]) {
      allSliders = NO;
      continue;
    }
  }
  if (allSliders) {
    return NO;
  }
  if (tempVec_ == nil) tempVec_ = new_OrgGeogebraCommonKernelMatrixCoords_initWithInt_(4);
  jdouble xd = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getAnimationStep] * xdiff;
  jdouble yd = [geo getAnimationStep] * ydiff;
  jdouble zd = [geo getAnimationStep] * zdiff;
  [((OrgGeogebraCommonKernelMatrixCoords *) nil_chk(tempVec_)) setXWithDouble:xd];
  [tempVec_ setYWithDouble:yd];
  [tempVec_ setZWithDouble:zd];
  jboolean moved = OrgGeogebraCommonKernelGeosGeoElement_moveObjectsWithJavaUtilArrayList_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonKernelMatrixCoords_withOrgGeogebraCommonEuclidianEuclidianView_(geos, tempVec_, nil, nil, nil);
  if (!moved) {
    for (jint i = 0; i < [geos size]; i++) {
      geo = [geos getWithInt:i];
      if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isChangeable] && [geo isGeoBoolean]) {
        OrgGeogebraCommonKernelGeosGeoBoolean *bool_ = (OrgGeogebraCommonKernelGeosGeoBoolean *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoBoolean class]);
        [bool_ setValueWithBoolean:![bool_ getBoolean]];
        [bool_ updateCascade];
        moved = YES;
      }
    }
  }
  if (moved) [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getKernel])) notifyRepaint];
  return moved;
}

- (jboolean)handleGeneralKeysWithOrgGeogebraCommonMainKeyCodesEnum:(OrgGeogebraCommonMainKeyCodesEnum *)key
                                                       withBoolean:(jboolean)isShiftDown
                                                       withBoolean:(jboolean)isControlDown
                                                       withBoolean:(jboolean)isAltDown
                                                       withBoolean:(jboolean)fromSpreadsheet
                                                       withBoolean:(jboolean)fromEuclidianView {
  [((OrgGeogebraCommonMainApp *) nil_chk(app_)) storeUndoInfoIfSetCoordSystemOccured];
  jboolean consumed = NO;
  switch ([key ordinal]) {
    case OrgGeogebraCommonMainKeyCodes_ESCAPE:
    if ([app_ isApplet] && ![app_ showToolBar]) {
      [app_ loseFocus];
    }
    else {
      [app_ setMoveMode];
      [((OrgGeogebraCommonEuclidianEuclidianController *) nil_chk([((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([app_ getActiveEuclidianView])) getEuclidianController])) deletePastePreviewSelected];
    }
    consumed = YES;
    break;
    case OrgGeogebraCommonMainKeyCodes_ENTER:
    if (!fromSpreadsheet) {
      consumed = [self handleEnter];
    }
    break;
    case OrgGeogebraCommonMainKeyCodes_SPACE:
    if (!fromSpreadsheet) {
      JavaUtilArrayList *selGeos = [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) getSelectedGeos];
      if ([((JavaUtilArrayList *) nil_chk(selGeos)) size] == 1) {
        if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([selGeos getWithInt:0])) isGeoBoolean]) {
          OrgGeogebraCommonKernelGeosGeoBoolean *geoBool = (OrgGeogebraCommonKernelGeosGeoBoolean *) check_class_cast([selGeos getWithInt:0], [OrgGeogebraCommonKernelGeosGeoBoolean class]);
          [geoBool setValueWithBoolean:![((OrgGeogebraCommonKernelGeosGeoBoolean *) nil_chk(geoBool)) getBoolean]];
          [geoBool updateRepaint];
        }
        else {
          [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([selGeos getWithInt:0])) runClickScriptsWithNSString:nil];
        }
        consumed = YES;
      }
    }
    break;
    case OrgGeogebraCommonMainKeyCodes_TAB:
    consumed = [self handleTabWithBoolean:isControlDown withBoolean:isShiftDown withBoolean:YES];
    break;
    case OrgGeogebraCommonMainKeyCodes_F1:
    [((OrgGeogebraCommonMainDialogManager *) nil_chk([app_ getDialogManager])) openToolHelp];
    return YES;
    case OrgGeogebraCommonMainKeyCodes_F9:
    if (![app_ isApplet] || [app_ isRightClickEnabled]) {
      [((OrgGeogebraCommonKernelKernel *) nil_chk([app_ getKernel])) updateConstruction];
      [app_ setUnsaved];
      consumed = YES;
    }
    break;
  }
  if (isControlDown && !isAltDown) {
    switch ([key ordinal]) {
      case OrgGeogebraCommonMainKeyCodes_K1:
      case OrgGeogebraCommonMainKeyCodes_NUMPAD1:
      if (isShiftDown && [app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN] withInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN];
        consumed = YES;
      }
      else if (!isAltDown) {
        OrgGeogebraCommonMainGlobalKeyDispatcher_changeFontsAndGeoElementsWithOrgGeogebraCommonMainApp_withInt_withBoolean_withBoolean_(app_, 12, NO, NO);
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_NUMPAD2:
      case OrgGeogebraCommonMainKeyCodes_K2:
      if (isShiftDown && [app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN2] withInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN2];
        consumed = YES;
      }
      else if (!isAltDown) {
        jint fontSize = JavaLangMath_minWithInt_withInt_(32, [app_ getFontSize] + 4);
        OrgGeogebraCommonMainGlobalKeyDispatcher_changeFontsAndGeoElementsWithOrgGeogebraCommonMainApp_withInt_withBoolean_withBoolean_(app_, fontSize, NO, YES);
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_NUMPAD3:
      case OrgGeogebraCommonMainKeyCodes_K3:
      if (isShiftDown && [app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN3D] withInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN3D];
        consumed = YES;
      }
      else if (!isAltDown) {
        OrgGeogebraCommonMainGlobalKeyDispatcher_changeFontsAndGeoElementsWithOrgGeogebraCommonMainApp_withInt_withBoolean_withBoolean_(app_, [app_ getFontSize], YES, YES);
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_A:
      if (isShiftDown) {
        if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil) {
          [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_ALGEBRA] withInt:OrgGeogebraCommonMainApp_VIEW_ALGEBRA];
          consumed = YES;
        }
      }
      else {
        [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) selectAllWithInt:-1];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_K:
      if (isShiftDown) {
        if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil) {
          [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_CAS] withInt:OrgGeogebraCommonMainApp_VIEW_CAS];
          consumed = YES;
        }
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_L:
      if (isShiftDown) {
        if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil) {
          [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_CONSTRUCTION_PROTOCOL] withInt:OrgGeogebraCommonMainApp_VIEW_CONSTRUCTION_PROTOCOL];
          consumed = YES;
        }
      }
      else {
        [selection_ selectAllWithInt:[((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) getSelectedLayer]];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_O:
      if (!isShiftDown && [app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) openFile];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_P:
      if (isShiftDown) {
        if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil) {
          [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR] withInt:OrgGeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR];
        }
      }
      else {
        [self showPrintPreviewWithOrgGeogebraCommonMainApp:app_];
      }
      consumed = YES;
      break;
      case OrgGeogebraCommonMainKeyCodes_T:
      if (isShiftDown && [app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showPSTricksExport];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_W:
      if (isShiftDown && [app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showWebpageExport];
        consumed = YES;
      }
      else {
        [app_ exitAll];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_F4:
      if (!isShiftDown) {
        [app_ exitAll];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_I:
      if (!isShiftDown) {
        [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) invertSelection];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_C:
      if (isShiftDown) {
        [app_ copyGraphicsViewToClipboard];
        consumed = YES;
      }
      else {
        if (!fromSpreadsheet) {
          [self handleCtrlC];
        }
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_M:
      if (isShiftDown) {
        [app_ copyBase64ToClipboard];
      }
      else {
        [app_ setStandardView];
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_B:
      if (isShiftDown) {
        [app_ copyBase64ToClipboard];
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_G:
      case OrgGeogebraCommonMainKeyCodes_H:
      if (isShiftDown) [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) showHideSelectionLabels];
      else [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) showHideSelection];
      consumed = YES;
      break;
      case OrgGeogebraCommonMainKeyCodes_E:
      if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_PROPERTIES] withInt:OrgGeogebraCommonMainApp_VIEW_PROPERTIES withBoolean:NO];
      }
      consumed = YES;
      break;
      case OrgGeogebraCommonMainKeyCodes_F:
      [app_ refreshViews];
      consumed = YES;
      break;
      case OrgGeogebraCommonMainKeyCodes_N:
      if (isShiftDown) {
        [self handleCtrlShiftNWithBoolean:isAltDown];
      }
      else {
        [app_ setWaitCursor];
        [self createNewWindow];
        [app_ setDefaultCursor];
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_Z:
      if ([app_ getGuiManager] != nil) {
        if (isShiftDown) [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) redo];
        else [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) undo];
      }
      consumed = YES;
      break;
      case OrgGeogebraCommonMainKeyCodes_U:
      if (isShiftDown && [app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showGraphicExport];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_V:
      if (!(fromSpreadsheet)) {
        [self handleCtrlV];
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_R:
      if (![app_ isApplet] || [app_ isRightClickEnabled]) {
        [((OrgGeogebraCommonKernelKernel *) nil_chk([app_ getKernel])) updateConstruction];
        [app_ setUnsaved];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_S:
      if (isShiftDown) {
        if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil) {
          [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) setShowViewWithBoolean:![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_SPREADSHEET] withInt:OrgGeogebraCommonMainApp_VIEW_SPREADSHEET];
          consumed = YES;
        }
      }
      else if ([app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) save];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_Y:
      if (isShiftDown) {
      }
      else if ([app_ getGuiManager] != nil) {
        [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) redo];
        consumed = YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_J:
      case OrgGeogebraCommonMainKeyCodes_Q:
      if (isShiftDown) [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) selectAllDescendants];
      else [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) selectAllPredecessors];
      consumed = YES;
      break;
      case OrgGeogebraCommonMainKeyCodes_PLUS:
      case OrgGeogebraCommonMainKeyCodes_ADD:
      case OrgGeogebraCommonMainKeyCodes_SUBTRACT:
      case OrgGeogebraCommonMainKeyCodes_MINUS:
      case OrgGeogebraCommonMainKeyCodes_EQUALS:
      if (!OrgGeogebraCommonEuclidianEuclidianView_isPenModeWithInt_([((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([app_ getActiveEuclidianView])) getMode])) {
        jboolean spanish = [((NSString *) nil_chk([((OrgGeogebraCommonMainLocalization *) nil_chk([app_ getLocalization])) getLanguage])) hasPrefix:@"es"];
        if (!spanish || !isAltDown || (fromEuclidianView)) {
          [((OrgGeogebraCommonEuclidianEuclidianController *) nil_chk([((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(([app_ getActiveEuclidianView]))) getEuclidianController])) zoomInOutWithBoolean:isAltDown withBoolean:[((OrgGeogebraCommonMainKeyCodesEnum *) nil_chk(key)) isEqual:OrgGeogebraCommonMainKeyCodesEnum_get_MINUS()] || [key isEqual:OrgGeogebraCommonMainKeyCodesEnum_get_SUBTRACT()]];
          [app_ setUnsaved];
          consumed = YES;
        }
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_D:
      case OrgGeogebraCommonMainKeyCodes_BACK_QUOTE:
      if (!isShiftDown) {
        OrgGeogebraCommonKernelKernel *kernel = [app_ getKernel];
        [kernel setAlgebraStyleWithInt:([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel)) getAlgebraStyle] + 1) % 3];
        [kernel updateConstruction];
        if ([app_ hasOptionsMenu]) {
          [((OrgGeogebraCommonGuiMenubarOptionsMenu *) nil_chk([app_ getOptionsMenuWithOrgGeogebraCommonGuiMenubarMenuFactory:nil])) updateMenuViewDescription];
        }
        [app_ setUnsaved];
        consumed = YES;
      }
      else {
        jboolean selectionAllowed = NO;
        JavaUtilTreeSet *objects = [((OrgGeogebraCommonKernelConstruction *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk([app_ getKernel])) getConstruction])) getGeoSetConstructionOrder];
        id<JavaUtilIterator> it = [((JavaUtilTreeSet *) nil_chk(objects)) iterator];
        while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
          OrgGeogebraCommonKernelGeosGeoElement *geo = [it next];
          if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isSelectionAllowed]) {
            selectionAllowed = YES;
            break;
          }
        }
        it = [objects iterator];
        while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
          OrgGeogebraCommonKernelGeosGeoElement *geo = [it next];
          if ([OrgGeogebraCommonKernelGeosFurniture_class_() isInstance:geo] || ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoNumeric] && [((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoNumeric class])) isSlider]) || ([geo isGeoList] && [((OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoList class])) drawAsComboBox]) || [geo isGeoBoolean] || ([geo isGeoPoint] && ![geo isFixed])) {
            [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) setSelectionAllowedWithBoolean:YES];
          }
          else {
            [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) setSelectionAllowedWithBoolean:selectionAllowed];
          }
        }
      }
      break;
    }
  }
  return consumed;
}

- (void)createNewWindow {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)showPrintPreviewWithOrgGeogebraCommonMainApp:(OrgGeogebraCommonMainApp *)app2 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)handleCtrlV {
  [((OrgGeogebraCommonMainApp *) nil_chk(app_)) setWaitCursor];
  [((OrgGeogebraCommonUtilCopyPaste *) nil_chk(OrgGeogebraCommonUtilCopyPaste_get_INSTANCE_())) pasteFromXMLWithOrgGeogebraCommonMainApp:app_ withBoolean:NO];
  [app_ setDefaultCursor];
}

- (jboolean)handleCtrlShiftNWithBoolean:(jboolean)isAltDown {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)handleCtrlC {
  [((OrgGeogebraCommonMainApp *) nil_chk(app_)) setWaitCursor];
  [((OrgGeogebraCommonUtilCopyPaste *) nil_chk(OrgGeogebraCommonUtilCopyPaste_get_INSTANCE_())) copyToXMLWithOrgGeogebraCommonMainApp:app_ withJavaUtilArrayList:[((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) getSelectedGeos] withBoolean:NO];
  [app_ updateMenubar];
  [app_ setDefaultCursor];
}

- (jboolean)handleTabWithBoolean:(jboolean)isControlDown
                     withBoolean:(jboolean)isShiftDown
                     withBoolean:(jboolean)cycle {
  if (isShiftDown) {
    [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) selectLastGeoWithOrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon:[((OrgGeogebraCommonMainApp *) nil_chk(app_)) getActiveEuclidianView]];
  }
  else {
    [((OrgGeogebraCommonMainSelectionManager *) nil_chk(selection_)) selectNextGeoWithOrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon:[((OrgGeogebraCommonMainApp *) nil_chk(app_)) getActiveEuclidianView] withBoolean:cycle];
  }
  return YES;
}

- (jboolean)handleEnter {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

+ (jboolean)changeFontsAndGeoElementsWithOrgGeogebraCommonMainApp:(OrgGeogebraCommonMainApp *)app
                                                          withInt:(jint)fontSize
                                                      withBoolean:(jboolean)blackWhiteMode
                                                      withBoolean:(jboolean)makeAxesBold {
  return OrgGeogebraCommonMainGlobalKeyDispatcher_changeFontsAndGeoElementsWithOrgGeogebraCommonMainApp_withInt_withBoolean_withBoolean_(app, fontSize, blackWhiteMode, makeAxesBold);
}

+ (jint)getPointSizeIncWithInt:(jint)oldFontSize
                       withInt:(jint)newFontSize {
  return OrgGeogebraCommonMainGlobalKeyDispatcher_getPointSizeIncWithInt_withInt_(oldFontSize, newFontSize);
}

+ (void)setGeoPropertiesWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo
                                                          withInt:(jint)lineThicknessIncr
                                                          withInt:(jint)pointSizeIncr
                                                          withInt:(jint)angleSizeIncr
                                                      withBoolean:(jboolean)blackWhiteMode {
  OrgGeogebraCommonMainGlobalKeyDispatcher_setGeoPropertiesWithOrgGeogebraCommonKernelGeosGeoElement_withInt_withInt_withInt_withBoolean_(geo, lineThicknessIncr, pointSizeIncr, angleSizeIncr, blackWhiteMode);
}

- (jboolean)handleSelectedGeosKeysWithOrgGeogebraCommonMainKeyCodesEnum:(OrgGeogebraCommonMainKeyCodesEnum *)key
                                                  withJavaUtilArrayList:(JavaUtilArrayList *)geos
                                                            withBoolean:(jboolean)isShiftDown
                                                            withBoolean:(jboolean)isControlDown
                                                            withBoolean:(jboolean)isAltDown
                                                            withBoolean:(jboolean)fromSpreadsheet {
  jdouble changeValX = 0;
  jdouble changeValY = 0;
  jdouble changeValZ = 0;
  jdouble base = 1;
  if (isShiftDown) base = 0.1;
  if (isControlDown) base = 10;
  if (isAltDown) base = 100;
  if (geos == nil || [geos size] == 0) {
    id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon> ev = [((OrgGeogebraCommonMainApp *) nil_chk(app_)) getActiveEuclidianView];
    jint width = [((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(ev)) getWidth];
    jint height = [ev getHeight];
    if ([ev hasFocus] && [app_ isShiftDragZoomEnabled]) switch ([key ordinal]) {
      case OrgGeogebraCommonMainKeyCodes_PAGEUP:
      [ev rememberOrigins];
      [ev pageUpDownTranslateCoordSystemWithInt:J2ObjCFpToInt((height * base))];
      return YES;
      case OrgGeogebraCommonMainKeyCodes_PAGEDOWN:
      [ev rememberOrigins];
      [ev pageUpDownTranslateCoordSystemWithInt:-J2ObjCFpToInt((height * base))];
      return YES;
      case OrgGeogebraCommonMainKeyCodes_INSERT:
      [ev rememberOrigins];
      [ev translateCoordSystemInPixelsWithInt:J2ObjCFpToInt((height * base)) withInt:0 withInt:0 withInt:OrgGeogebraCommonEuclidianEuclidianController_MOVE_VIEW];
      return YES;
      case OrgGeogebraCommonMainKeyCodes_HOME:
      [ev rememberOrigins];
      [ev translateCoordSystemInPixelsWithInt:-J2ObjCFpToInt((height * base)) withInt:0 withInt:0 withInt:OrgGeogebraCommonEuclidianEuclidianController_MOVE_VIEW];
      return YES;
      case OrgGeogebraCommonMainKeyCodes_DOWN:
      if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil && [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) noMenusOpen]) {
        if (isShiftDown) {
          id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon> view = [app_ getActiveEuclidianView];
          if (![((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(view)) isLockedAxesRatio]) {
            [view setCoordSystemWithDouble:[view getXZero] withDouble:[view getYZero] withDouble:[view getXscale] withDouble:[view getYscale] * 0.9];
          }
        }
        else {
          [ev rememberOrigins];
          [ev translateCoordSystemInPixelsWithInt:0 withInt:J2ObjCFpToInt((height / 100.0 * base)) withInt:0 withInt:OrgGeogebraCommonEuclidianEuclidianController_MOVE_VIEW];
        }
        return YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_UP:
      if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil && [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) noMenusOpen]) {
        if (isShiftDown) {
          id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon> view = [app_ getActiveEuclidianView];
          if (![((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(view)) isLockedAxesRatio]) {
            [view setCoordSystemWithDouble:[view getXZero] withDouble:[view getYZero] withDouble:[view getXscale] withDouble:[view getYscale] / 0.9];
          }
        }
        else {
          [ev rememberOrigins];
          [ev translateCoordSystemInPixelsWithInt:0 withInt:-J2ObjCFpToInt((height / 100.0 * base)) withInt:0 withInt:OrgGeogebraCommonEuclidianEuclidianController_MOVE_VIEW];
        }
        return YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_LEFT:
      if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil && [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) noMenusOpen]) {
        if (isShiftDown) {
          id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon> view = [app_ getActiveEuclidianView];
          if (![((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(view)) isLockedAxesRatio]) {
            [view setCoordSystemWithDouble:[view getXZero] withDouble:[view getYZero] withDouble:[view getXscale] * 0.9 withDouble:[view getYscale]];
          }
        }
        else {
          [ev rememberOrigins];
          [ev translateCoordSystemInPixelsWithInt:-J2ObjCFpToInt((width / 100.0 * base)) withInt:0 withInt:0 withInt:OrgGeogebraCommonEuclidianEuclidianController_MOVE_VIEW];
        }
        return YES;
      }
      break;
      case OrgGeogebraCommonMainKeyCodes_RIGHT:
      if ([app_ isUsingFullGui] && [app_ getGuiManager] != nil && [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) noMenusOpen]) {
        if (isShiftDown) {
          id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon> view = [app_ getActiveEuclidianView];
          if (![((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(view)) isLockedAxesRatio]) {
            [view setCoordSystemWithDouble:[view getXZero] withDouble:[view getYZero] withDouble:[view getXscale] / 0.9 withDouble:[view getYscale]];
          }
        }
        else {
          [ev rememberOrigins];
          [ev translateCoordSystemInPixelsWithInt:J2ObjCFpToInt((width / 100.0 * base)) withInt:0 withInt:0 withInt:OrgGeogebraCommonEuclidianEuclidianController_MOVE_VIEW];
        }
      }
      return YES;
    }
    return NO;
  }
  id<JavaUtilIterator> it;
  switch ([key ordinal]) {
    case OrgGeogebraCommonMainKeyCodes_PAGEUP:
    if (![((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getActiveEuclidianView])) isEuclidianView3D]) {
      it = [((JavaUtilArrayList *) nil_chk(geos)) iterator];
      while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
        OrgGeogebraCommonKernelGeosGeoElement *geo = [it next];
        [geo setLayerWithInt:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getLayer] + 1];
      }
    }
    break;
    case OrgGeogebraCommonMainKeyCodes_PAGEDOWN:
    if (![((id<OrgGeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getActiveEuclidianView])) isEuclidianView3D]) {
      it = [((JavaUtilArrayList *) nil_chk(geos)) iterator];
      while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
        OrgGeogebraCommonKernelGeosGeoElement *geo = [it next];
        [geo setLayerWithInt:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getLayer] - 1];
      }
    }
    break;
    case OrgGeogebraCommonMainKeyCodes_F3:
    if ([((JavaUtilArrayList *) nil_chk(geos)) size] == 1) [self handleFunctionKeyForAlgebraInputWithInt:3 withOrgGeogebraCommonKernelGeosGeoElement:[geos getWithInt:0]];
    else {
      [self copyDefinitionsToInputBarAsListWithJavaUtilArrayList:geos];
      break;
    }
    return YES;
    case OrgGeogebraCommonMainKeyCodes_F1:
    [((OrgGeogebraCommonMainDialogManager *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getDialogManager])) openToolHelp];
    return YES;
    case OrgGeogebraCommonMainKeyCodes_F4:
    [self handleFunctionKeyForAlgebraInputWithInt:4 withOrgGeogebraCommonKernelGeosGeoElement:[((JavaUtilArrayList *) nil_chk(geos)) getWithInt:0]];
    return YES;
    case OrgGeogebraCommonMainKeyCodes_F5:
    [self handleFunctionKeyForAlgebraInputWithInt:5 withOrgGeogebraCommonKernelGeosGeoElement:[((JavaUtilArrayList *) nil_chk(geos)) getWithInt:0]];
    return YES;
    case OrgGeogebraCommonMainKeyCodes_DELETE:
    if ([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getGuiManager] != nil && [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) hasSpreadsheetView] && [((id<OrgGeogebraCommonKernelView>) nil_chk([((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) getSpreadsheetView])) hasFocus]) return NO;
    if (![app_ isApplet] || [app_ isRightClickEnabled]) {
      [app_ deleteSelectedObjects];
      return YES;
    }
    case OrgGeogebraCommonMainKeyCodes_BACKSPACE:
    if ([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getGuiManager] != nil && [((id<OrgGeogebraCommonKernelView>) nil_chk([((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) getSpreadsheetView])) hasFocus]) return NO;
    if (!isControlDown && (![app_ isApplet] || [app_ isRightClickEnabled])) {
      [app_ deleteSelectedObjects];
      return YES;
    }
    break;
  }
  if (fromSpreadsheet || ([((OrgGeogebraCommonMainApp *) nil_chk(app_)) isUsingFullGui] && [app_ getGuiManager] != nil && [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) hasSpreadsheetView] && [((id<OrgGeogebraCommonKernelView>) nil_chk([((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) getSpreadsheetView])) hasFocus])) {
    return NO;
  }
  jboolean moved = NO;
  switch ([key ordinal]) {
    case OrgGeogebraCommonMainKeyCodes_UP:
    if ([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getGuiManager] != nil && [app_ isUsingFullGui] && ![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) noMenusOpen]) {
      return NO;
    }
    changeValY = base;
    break;
    case OrgGeogebraCommonMainKeyCodes_DOWN:
    if ([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getGuiManager] != nil && [app_ isUsingFullGui] && ![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) noMenusOpen]) {
      return NO;
    }
    changeValY = -base;
    break;
    case OrgGeogebraCommonMainKeyCodes_RIGHT:
    if ([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getGuiManager] != nil && [app_ isUsingFullGui] && ![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) noMenusOpen]) {
      return NO;
    }
    changeValX = base;
    break;
    case OrgGeogebraCommonMainKeyCodes_LEFT:
    if ([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getGuiManager] != nil && [app_ isUsingFullGui] && ![((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) noMenusOpen]) {
      return NO;
    }
    changeValX = -base;
    break;
    case OrgGeogebraCommonMainKeyCodes_PAGEUP:
    changeValZ = base;
    break;
    case OrgGeogebraCommonMainKeyCodes_PAGEDOWN:
    changeValZ = -base;
    break;
  }
  if (changeValX != 0 || changeValY != 0 || changeValZ != 0) {
    moved = [self handleArrowKeyMovementWithJavaUtilArrayList:geos withDouble:changeValX withDouble:changeValY withDouble:changeValZ];
  }
  if (moved) {
    return YES;
  }
  jboolean vertical = YES;
  jdouble changeVal = 0;
  switch ([key ordinal]) {
    case OrgGeogebraCommonMainKeyCodes_F2:
    if ([((OrgGeogebraCommonMainApp *) nil_chk(app_)) isUsingFullGui] && [app_ getGuiManager] != nil) {
      [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) startEditingWithOrgGeogebraCommonKernelGeosGeoElement:[((JavaUtilArrayList *) nil_chk(geos)) getWithInt:0]];
      return YES;
    }
    break;
    case OrgGeogebraCommonMainKeyCodes_PLUS:
    case OrgGeogebraCommonMainKeyCodes_ADD:
    case OrgGeogebraCommonMainKeyCodes_EQUALS:
    case OrgGeogebraCommonMainKeyCodes_UP:
    changeVal = base;
    vertical = YES;
    break;
    case OrgGeogebraCommonMainKeyCodes_RIGHT:
    changeVal = base;
    vertical = NO;
    break;
    case OrgGeogebraCommonMainKeyCodes_MINUS:
    case OrgGeogebraCommonMainKeyCodes_SUBTRACT:
    case OrgGeogebraCommonMainKeyCodes_DOWN:
    changeVal = -base;
    vertical = YES;
    break;
    case OrgGeogebraCommonMainKeyCodes_LEFT:
    changeVal = -base;
    vertical = NO;
    break;
  }
  OrgGeogebraCommonMainApp_debugWithNSString_(@"not yet consumed");
  if (changeVal != 0) {
    OrgGeogebraCommonMainApp_debugWithNSString_(@"consumed");
    jboolean twoSliders = [((JavaUtilArrayList *) nil_chk(geos)) size] == 2 && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([geos getWithInt:0])) isGeoNumeric] && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([geos getWithInt:1])) isGeoNumeric];
    for (jint i = [geos size] - 1; i >= 0; i--) {
      OrgGeogebraCommonKernelGeosGeoElement *geo = [geos getWithInt:i];
      if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isChangeable]) {
        if ([geo isGeoNumeric] && (!twoSliders || ((vertical && i == 0) || (!vertical && i == 1)))) {
          OrgGeogebraCommonKernelGeosGeoNumeric *num = (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoNumeric class]);
          jdouble newValue = [num getValue] + changeVal * [num getAnimationStep];
          if ([num getAnimationStep] > OrgGeogebraCommonKernelKernel_MIN_PRECISION) {
            if ([num isGeoAngle]) {
              (void) [((OrgGeogebraCommonMainApp *) nil_chk(app_)) getKernel];
              (void) [app_ getKernel];
              newValue = OrgGeogebraCommonKernelKernel_PI_180 * OrgGeogebraCommonKernelKernel_checkDecimalFractionWithDouble_withDouble_(newValue * OrgGeogebraCommonKernelKernel_CONST_180_PI, 1 / [num getAnimationStep]);
            }
            else newValue = OrgGeogebraCommonKernelKernel_checkDecimalFractionWithDouble_withDouble_(newValue, 1 / [num getAnimationStep]);
          }
          [num setValueWithDouble:newValue];
        }
        else if ([geo isGeoPoint] && ![geo isGeoElement3D]) {
          OrgGeogebraCommonKernelGeosGeoPoint *p = (OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoPoint class]);
          if ([p hasPath]) {
            [p addToPathParameterWithDouble:changeVal * [p getAnimationStep]];
          }
        }
      }
      else if (![geo isIndependent]) {
        if ([geo isLabelSet] && [geo isGeoNumeric]) {
          OrgGeogebraCommonKernelGeosGeoNumeric *num = (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoNumeric class]);
          if ([num isRandomGeo]) {
            [num updateRandomGeo];
          }
        }
        [((OrgGeogebraCommonKernelAlgosAlgoElement *) nil_chk([geo getParentAlgorithm])) update];
      }
    }
    OrgGeogebraCommonKernelGeosGeoElement_updateCascadeWithJavaUtilArrayList_withJavaUtilTreeSet_withBoolean_(geos, [self getTempSet], NO);
    [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getKernel])) notifyRepaint];
    return YES;
  }
  return NO;
}

- (void)copyDefinitionsToInputBarAsListWithJavaUtilArrayList:(JavaUtilArrayList *)geos {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonMainApp:", "GlobalKeyDispatcher", NULL, 0x1, NULL, NULL },
    { "handleFunctionKeyForAlgebraInputWithInt:withOrgGeogebraCommonKernelGeosGeoElement:", "handleFunctionKeyForAlgebraInput", "V", 0x401, NULL, NULL },
    { "getTempSet", NULL, "Ljava.util.TreeSet;", 0x4, NULL, NULL },
    { "renameStartedWithChar:", "renameStarted", "Z", 0x4, NULL, NULL },
    { "handleArrowKeyMovementWithJavaUtilArrayList:withDouble:withDouble:withDouble:", "handleArrowKeyMovement", "Z", 0x4, NULL, NULL },
    { "handleGeneralKeysWithOrgGeogebraCommonMainKeyCodesEnum:withBoolean:withBoolean:withBoolean:withBoolean:withBoolean:", "handleGeneralKeys", "Z", 0x4, NULL, NULL },
    { "createNewWindow", NULL, "V", 0x404, NULL, NULL },
    { "showPrintPreviewWithOrgGeogebraCommonMainApp:", "showPrintPreview", "V", 0x404, NULL, NULL },
    { "handleCtrlV", NULL, "V", 0x4, NULL, NULL },
    { "handleCtrlShiftNWithBoolean:", "handleCtrlShiftN", "Z", 0x404, NULL, NULL },
    { "handleCtrlC", NULL, "V", 0x4, NULL, NULL },
    { "handleTabWithBoolean:withBoolean:withBoolean:", "handleTab", "Z", 0x1, NULL, NULL },
    { "handleEnter", NULL, "Z", 0x404, NULL, NULL },
    { "changeFontsAndGeoElementsWithOrgGeogebraCommonMainApp:withInt:withBoolean:withBoolean:", "changeFontsAndGeoElements", "Z", 0x9, NULL, NULL },
    { "getPointSizeIncWithInt:withInt:", "getPointSizeInc", "I", 0xa, NULL, NULL },
    { "setGeoPropertiesWithOrgGeogebraCommonKernelGeosGeoElement:withInt:withInt:withInt:withBoolean:", "setGeoProperties", "V", 0xa, NULL, NULL },
    { "handleSelectedGeosKeysWithOrgGeogebraCommonMainKeyCodesEnum:withJavaUtilArrayList:withBoolean:withBoolean:withBoolean:withBoolean:", "handleSelectedGeosKeys", "Z", 0x4, NULL, NULL },
    { "copyDefinitionsToInputBarAsListWithJavaUtilArrayList:", "copyDefinitionsToInputBarAsList", "V", 0x404, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "app_", NULL, 0x14, "Lorg.geogebra.common.main.App;", NULL, NULL,  },
    { "selection_", NULL, 0x14, "Lorg.geogebra.common.main.SelectionManager;", NULL, NULL,  },
    { "tempSet_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lorg/geogebra/common/kernel/algos/AlgoElement;>;",  },
    { "tempVec_", NULL, 0x2, "Lorg.geogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonMainGlobalKeyDispatcher = { 2, "GlobalKeyDispatcher", "org.geogebra.common.main", NULL, 0x401, 18, methods, 4, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonMainGlobalKeyDispatcher;
}

@end

void OrgGeogebraCommonMainGlobalKeyDispatcher_initWithOrgGeogebraCommonMainApp_(OrgGeogebraCommonMainGlobalKeyDispatcher *self, OrgGeogebraCommonMainApp *app2) {
  (void) NSObject_init(self);
  self->app_ = app2;
  self->selection_ = [((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getSelectionManager];
}

jboolean OrgGeogebraCommonMainGlobalKeyDispatcher_changeFontsAndGeoElementsWithOrgGeogebraCommonMainApp_withInt_withBoolean_withBoolean_(OrgGeogebraCommonMainApp *app, jint fontSize, jboolean blackWhiteMode, jboolean makeAxesBold) {
  OrgGeogebraCommonMainGlobalKeyDispatcher_initialize();
  if ([((OrgGeogebraCommonMainApp *) nil_chk(app)) isApplet]) return NO;
  [app setWaitCursor];
  for (jint ev = 1; ev <= 2; ev++) {
    OrgGeogebraCommonMainSettingsEuclidianSettings *settings = [((OrgGeogebraCommonMainSettingsSettings *) nil_chk([app getSettings])) getEuclidianWithInt:ev];
    jint style = [((OrgGeogebraCommonMainSettingsEuclidianSettings *) nil_chk(settings)) getAxesLineStyle];
    style = style | OrgGeogebraCommonPluginEuclidianStyleConstants_AXES_BOLD;
    if (!makeAxesBold) {
      style = style ^ OrgGeogebraCommonPluginEuclidianStyleConstants_AXES_BOLD;
    }
    [settings setAxesLineStyleWithInt:style];
  }
  jint oldFontSize = [app getFontSize];
  jint angleSizeIncr = fontSize - oldFontSize;
  jint incr = OrgGeogebraCommonMainGlobalKeyDispatcher_getPointSizeIncWithInt_withInt_(oldFontSize, fontSize);
  OrgGeogebraCommonKernelConstructionDefaults *cd = [((OrgGeogebraCommonKernelConstruction *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk([app getKernel])) getConstruction])) getConstructionDefaults];
  [cd setDefaultLineThicknessWithInt:[((OrgGeogebraCommonKernelConstructionDefaults *) nil_chk(cd)) getDefaultLineThickness] + incr];
  [cd setDefaultPointSizeWithInt:[cd getDefaultPointSize] + incr];
  [cd setDefaultAngleSizeWithInt:[cd getDefaultAngleSize] + angleSizeIncr];
  [cd setBlackWhiteModeWithBoolean:blackWhiteMode];
  [app setFontSizeWithInt:fontSize];
  if ([app isUsingFullGui] && [app getGuiManager] != nil) [((id<OrgGeogebraCommonMainGuiManagerInterface>) nil_chk([app getGuiManager])) updateSpreadsheetColumnWidths];
  id<JavaUtilIterator> it = nil;
  if ([((JavaUtilArrayList *) nil_chk([((OrgGeogebraCommonMainSelectionManager *) nil_chk([app getSelectionManager])) getSelectedGeos])) size] == 0) {
    it = [((JavaUtilTreeSet *) nil_chk([((OrgGeogebraCommonKernelConstruction *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk([app getKernel])) getConstruction])) getGeoSetConstructionOrder])) iterator];
  }
  else {
    it = [((JavaUtilArrayList *) nil_chk([((OrgGeogebraCommonMainSelectionManager *) nil_chk([app getSelectionManager])) getSelectedGeos])) iterator];
  }
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    OrgGeogebraCommonKernelGeosGeoElement *geo = [it next];
    OrgGeogebraCommonMainGlobalKeyDispatcher_setGeoPropertiesWithOrgGeogebraCommonKernelGeosGeoElement_withInt_withInt_withInt_withBoolean_(geo, incr, incr, angleSizeIncr, blackWhiteMode);
  }
  [((OrgGeogebraCommonKernelKernel *) nil_chk([app getKernel])) updateConstruction];
  [app setUnsaved];
  [app storeUndoInfo];
  [app setDefaultCursor];
  return YES;
}

jint OrgGeogebraCommonMainGlobalKeyDispatcher_getPointSizeIncWithInt_withInt_(jint oldFontSize, jint newFontSize) {
  OrgGeogebraCommonMainGlobalKeyDispatcher_initialize();
  if (oldFontSize == newFontSize) return 0;
  jint step = newFontSize > oldFontSize ? 1 : -1;
  jint left = JavaLangMath_minWithInt_withInt_(oldFontSize, newFontSize);
  jint right = JavaLangMath_maxWithInt_withInt_(oldFontSize, newFontSize);
  IOSIntArray *borders = [IOSIntArray newArrayWithInts:(jint[]){ 16, 22, 28 } count:3];
  jint incr = 0;
  for (jint i = 0; i < borders->size_; i++) {
    if (left < IOSIntArray_Get(borders, i) && IOSIntArray_Get(borders, i) <= right) {
      incr = incr + step;
    }
  }
  return incr * 2;
}

void OrgGeogebraCommonMainGlobalKeyDispatcher_setGeoPropertiesWithOrgGeogebraCommonKernelGeosGeoElement_withInt_withInt_withInt_withBoolean_(OrgGeogebraCommonKernelGeosGeoElement *geo, jint lineThicknessIncr, jint pointSizeIncr, jint angleSizeIncr, jboolean blackWhiteMode) {
  OrgGeogebraCommonMainGlobalKeyDispatcher_initialize();
  if (![((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isGeoText] && ![geo isGeoImage] && ![geo isGeoPolygon]) {
    jint lineThickness = JavaLangMath_maxWithInt_withInt_(2, [geo getLineThickness] + lineThicknessIncr);
    [geo setLineThicknessWithInt:lineThickness];
  }
  if ([OrgGeogebraCommonKernelGeosPointProperties_class_() isInstance:geo]) {
    id<OrgGeogebraCommonKernelGeosPointProperties> p = (id<OrgGeogebraCommonKernelGeosPointProperties>) check_protocol_cast(geo, @protocol(OrgGeogebraCommonKernelGeosPointProperties));
    jint pointSize = JavaLangMath_maxWithInt_withInt_(2, [p getPointSize] + pointSizeIncr);
    [p setPointSizeWithInt:pointSize];
  }
  if ([geo isGeoAngle]) {
    OrgGeogebraCommonKernelGeosGeoAngle *angle = (OrgGeogebraCommonKernelGeosGeoAngle *) check_class_cast(geo, [OrgGeogebraCommonKernelGeosGeoAngle class]);
    jint angleSize = JavaLangMath_maxWithInt_withInt_(2, [angle getArcSize] + angleSizeIncr);
    [angle setArcSizeWithInt:angleSize];
  }
  if (blackWhiteMode) {
    [geo setAlphaValueWithFloat:0.0f];
    [geo setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonAwtGColor_get_BLACK_()];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonMainGlobalKeyDispatcher)
