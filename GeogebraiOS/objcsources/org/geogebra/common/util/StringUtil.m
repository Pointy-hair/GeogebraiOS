//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/geogebra/common/util/StringUtil.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Character.h"
#include "java/lang/Double.h"
#include "java/lang/Integer.h"
#include "java/lang/Iterable.h"
#include "java/lang/StringBuilder.h"
#include "java/util/ArrayList.h"
#include "java/util/Arrays.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/Set.h"
#include "java/util/Stack.h"
#include "java/util/TreeSet.h"
#include "org/geogebra/common/awt/GColor.h"
#include "org/geogebra/common/awt/GFont.h"
#include "org/geogebra/common/util/StringUtil.h"
#include "org/geogebra/common/util/Unicode.h"
#include "org/geogebra/common/util/debug/Log.h"

static IOSCharArray *OrgGeogebraCommonUtilStringUtil_hexChar_;
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonUtilStringUtil, hexChar_, IOSCharArray *)
J2OBJC_STATIC_FIELD_SETTER(OrgGeogebraCommonUtilStringUtil, hexChar_, IOSCharArray *)

static JavaLangStringBuilder *OrgGeogebraCommonUtilStringUtil_sb_;
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonUtilStringUtil, sb_, JavaLangStringBuilder *)
J2OBJC_STATIC_FIELD_SETTER(OrgGeogebraCommonUtilStringUtil, sb_, JavaLangStringBuilder *)

static JavaLangStringBuilder *OrgGeogebraCommonUtilStringUtil_sbReplaceExp_;
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonUtilStringUtil, sbReplaceExp_, JavaLangStringBuilder *)
J2OBJC_STATIC_FIELD_SETTER(OrgGeogebraCommonUtilStringUtil, sbReplaceExp_, JavaLangStringBuilder *)

J2OBJC_INITIALIZED_DEFN(OrgGeogebraCommonUtilStringUtil)

OrgGeogebraCommonUtilStringUtil *OrgGeogebraCommonUtilStringUtil_prototype_;

@implementation OrgGeogebraCommonUtilStringUtil

+ (NSString *)convertToHexWithByteArray:(IOSByteArray *)data {
  return OrgGeogebraCommonUtilStringUtil_convertToHexWithByteArray_(data);
}

+ (NSString *)toHexStringWithChar:(jchar)c {
  return OrgGeogebraCommonUtilStringUtil_toHexStringWithChar_(c);
}

+ (NSString *)toHexStringWithInt:(jint)i {
  return OrgGeogebraCommonUtilStringUtil_toHexStringWithInt_(i);
}

+ (NSString *)toHexStringWithOrgGeogebraCommonAwtGColor:(OrgGeogebraCommonAwtGColor *)col {
  return OrgGeogebraCommonUtilStringUtil_toHexStringWithOrgGeogebraCommonAwtGColor_(col);
}

+ (NSString *)toHexStringWithNSString:(NSString *)s {
  return OrgGeogebraCommonUtilStringUtil_toHexStringWithNSString_(s);
}

+ (NSString *)toHTMLStringWithNSString:(NSString *)title {
  return OrgGeogebraCommonUtilStringUtil_toHTMLStringWithNSString_(title);
}

+ (NSString *)toHTMLStringWithNSString:(NSString *)str
                           withBoolean:(jboolean)encodeLTGT {
  return OrgGeogebraCommonUtilStringUtil_toHTMLStringWithNSString_withBoolean_(str, encodeLTGT);
}

+ (NSString *)encodeXMLWithNSString:(NSString *)str {
  return OrgGeogebraCommonUtilStringUtil_encodeXMLWithNSString_(str);
}

+ (void)encodeXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                              withNSString:(NSString *)str {
  OrgGeogebraCommonUtilStringUtil_encodeXMLWithJavaLangStringBuilder_withNSString_(sb, str);
}

- (jboolean)isRightToLeftCharWithChar:(jchar)c {
  return NO;
}

+ (NSString *)toLaTeXStringWithNSString:(NSString *)str
                            withBoolean:(jboolean)convertGreekLetters {
  return OrgGeogebraCommonUtilStringUtil_toLaTeXStringWithNSString_withBoolean_(str, convertGreekLetters);
}

+ (NSString *)stringWithNSString:(NSString *)s
                         withInt:(jint)n {
  return OrgGeogebraCommonUtilStringUtil_stringWithNSString_withInt_(s, n);
}

+ (NSString *)removeSpacesWithNSString:(NSString *)str {
  return OrgGeogebraCommonUtilStringUtil_removeSpacesWithNSString_(str);
}

+ (NSString *)trimSpacesWithNSString:(NSString *)str {
  return OrgGeogebraCommonUtilStringUtil_trimSpacesWithNSString_(str);
}

+ (JavaLangStringBuilder *)resetStringBuilderWithJavaLangStringBuilder:(JavaLangStringBuilder *)high {
  return OrgGeogebraCommonUtilStringUtil_resetStringBuilderWithJavaLangStringBuilder_(high);
}

+ (jboolean)isNumberWithNSString:(NSString *)text {
  return OrgGeogebraCommonUtilStringUtil_isNumberWithNSString_(text);
}

- (NSString *)toLowerWithNSString:(NSString *)s {
  return [((NSString *) nil_chk(s)) lowercaseString];
}

- (NSString *)toUpperWithNSString:(NSString *)s {
  return [((NSString *) nil_chk(s)) uppercaseString];
}

+ (NSString *)toLowerCaseWithNSString:(NSString *)s {
  return OrgGeogebraCommonUtilStringUtil_toLowerCaseWithNSString_(s);
}

+ (NSString *)toUpperCaseWithNSString:(NSString *)s {
  return OrgGeogebraCommonUtilStringUtil_toUpperCaseWithNSString_(s);
}

+ (jdouble)parseDoubleWithNSString:(NSString *)s {
  return OrgGeogebraCommonUtilStringUtil_parseDoubleWithNSString_(s);
}

+ (NSString *)repeatWithChar:(jchar)c
                     withInt:(jint)count {
  return OrgGeogebraCommonUtilStringUtil_repeatWithChar_withInt_(c, count);
}

+ (jboolean)isLetterOrDigitWithChar:(jchar)c {
  return OrgGeogebraCommonUtilStringUtil_isLetterOrDigitWithChar_(c);
}

+ (jboolean)isLetterOrDigitOrUnderscoreWithChar:(jchar)character {
  return OrgGeogebraCommonUtilStringUtil_isLetterOrDigitOrUnderscoreWithChar_(character);
}

+ (jboolean)isDigitWithChar:(jchar)ch {
  return OrgGeogebraCommonUtilStringUtil_isDigitWithChar_(ch);
}

+ (jboolean)isLetterWithChar:(jchar)c {
  return OrgGeogebraCommonUtilStringUtil_isLetterWithChar_(c);
}

+ (jboolean)isNotEqualWithNSString:(NSString *)str {
  return OrgGeogebraCommonUtilStringUtil_isNotEqualWithNSString_(str);
}

+ (jboolean)isInequalityWithNSString:(NSString *)str {
  return OrgGeogebraCommonUtilStringUtil_isInequalityWithNSString_(str);
}

+ (NSString *)ignoreIndicesWithNSString:(NSString *)text {
  return OrgGeogebraCommonUtilStringUtil_ignoreIndicesWithNSString_(text);
}

+ (jint)checkBracketsBackwardWithNSString:(NSString *)parseString {
  return OrgGeogebraCommonUtilStringUtil_checkBracketsBackwardWithNSString_(parseString);
}

+ (NSString *)fixVerticalBarsWithNSString:(NSString *)parseString {
  return OrgGeogebraCommonUtilStringUtil_fixVerticalBarsWithNSString_(parseString);
}

+ (jboolean)representsMultipleExpressionsWithNSString:(NSString *)evalText {
  return OrgGeogebraCommonUtilStringUtil_representsMultipleExpressionsWithNSString_(evalText);
}

- (jdouble)estimateLengthHTMLWithNSString:(NSString *)label
            withOrgGeogebraCommonAwtGFont:(OrgGeogebraCommonAwtGFont *)font {
  NSString *str = label;
  jboolean bold = NO;
  if ([((NSString *) nil_chk(str)) hasPrefix:@"<i>"] && [str hasSuffix:@"</i>"]) {
    str = [str substring:3 endIndex:((jint) [((NSString *) nil_chk(label)) length]) - 4];
  }
  if ([((NSString *) nil_chk(str)) hasPrefix:@"<b>"] && [str hasSuffix:@"</b>"]) {
    str = [str substring:3 endIndex:((jint) [str length]) - 4];
    bold = YES;
  }
  if ([((NSString *) nil_chk(str)) hasPrefix:@"<i>"] && [str hasSuffix:@"</i>"]) {
    str = [str substring:3 endIndex:((jint) [str length]) - 4];
  }
  return [self estimateLengthWithNSString:label withOrgGeogebraCommonAwtGFont:bold ? [((OrgGeogebraCommonAwtGFont *) nil_chk(font)) deriveFontWithInt:OrgGeogebraCommonAwtGFont_BOLD] : font];
}

- (jdouble)estimateLengthWithNSString:(NSString *)label
        withOrgGeogebraCommonAwtGFont:(OrgGeogebraCommonAwtGFont *)font {
  NSString *str = label;
  jboolean bold = [((OrgGeogebraCommonAwtGFont *) nil_chk(font)) isBold];
  jdouble visibleChars = 0;
  jboolean index = NO;
  jdouble indexSize = 0.7;
  for (jint i = 0; i < ((jint) [((NSString *) nil_chk(str)) length]); i++) {
    if ([str charAtWithInt:i] == '_') {
      if (i < ((jint) [str length]) - 1 && [str charAtWithInt:i + 1] == '{') {
        i++;
        index = YES;
      }
      else {
        visibleChars -= (1 - indexSize);
      }
    }
    else if ([str charAtWithInt:i] == '}') {
      index = NO;
    }
    else {
      visibleChars += index ? indexSize : 1;
    }
  }
  return bold ? visibleChars * 0.6 * [font getSize] : visibleChars * 0.5 * [font getSize];
}

- (jdouble)estimateHeightWithNSString:(NSString *)string
        withOrgGeogebraCommonAwtGFont:(OrgGeogebraCommonAwtGFont *)font {
  if (font == nil) {
    return 0;
  }
  return [((NSString *) nil_chk(string)) indexOf:'_'] > -1 ? [((OrgGeogebraCommonAwtGFont *) nil_chk(font)) getSize] * 1.8 : [((OrgGeogebraCommonAwtGFont *) nil_chk(font)) getSize] * 1.4;
}

+ (id)formatWithNSString:(NSString *)sub
              withDouble:(jdouble)x0
              withDouble:(jdouble)x1
              withDouble:(jdouble)x2
              withDouble:(jdouble)x3 {
  return OrgGeogebraCommonUtilStringUtil_formatWithNSString_withDouble_withDouble_withDouble_withDouble_(sub, x0, x1, x2, x3);
}

+ (NSString *)wrapInExactWithNSString:(NSString *)s {
  return OrgGeogebraCommonUtilStringUtil_wrapInExactWithNSString_(s);
}

+ (NSString *)removeLeadingSlashWithNSString:(NSString *)filename {
  return OrgGeogebraCommonUtilStringUtil_removeLeadingSlashWithNSString_(filename);
}

+ (NSString *)toHtmlColorWithOrgGeogebraCommonAwtGColor:(OrgGeogebraCommonAwtGColor *)color {
  return OrgGeogebraCommonUtilStringUtil_toHtmlColorWithOrgGeogebraCommonAwtGColor_(color);
}

+ (JavaUtilArrayList *)wholeWordTokenizeWithNSString:(NSString *)input {
  return OrgGeogebraCommonUtilStringUtil_wholeWordTokenizeWithNSString_(input);
}

+ (NSString *)joinTokensWithJavaLangIterable:(id<JavaLangIterable>)tokens
                                withNSString:(NSString *)delimiter {
  return OrgGeogebraCommonUtilStringUtil_joinTokensWithJavaLangIterable_withNSString_(tokens, delimiter);
}

+ (NSString *)cannonicNumberWithNSString:(NSString *)str {
  return OrgGeogebraCommonUtilStringUtil_cannonicNumberWithNSString_(str);
}

+ (NSString *)cannonicNumber2WithNSString:(NSString *)str {
  return OrgGeogebraCommonUtilStringUtil_cannonicNumber2WithNSString_(str);
}

+ (jboolean)isWhitespaceWithChar:(jchar)c {
  return OrgGeogebraCommonUtilStringUtil_isWhitespaceWithChar_(c);
}

+ (jchar)processQuotesWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                                   withNSString:(NSString *)content
                                       withChar:(jchar)ret {
  return OrgGeogebraCommonUtilStringUtil_processQuotesWithJavaLangStringBuilder_withNSString_withChar_(sb, content, ret);
}

- (instancetype)init {
  OrgGeogebraCommonUtilStringUtil_init(self);
  return self;
}

+ (void)initialize {
  if (self == [OrgGeogebraCommonUtilStringUtil class]) {
    JreStrongAssignAndConsume(&OrgGeogebraCommonUtilStringUtil_hexChar_, nil, [IOSCharArray newArrayWithChars:(jchar[]){ '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' } count:16]);
    JreStrongAssignAndConsume(&OrgGeogebraCommonUtilStringUtil_sbReplaceExp_, nil, new_JavaLangStringBuilder_initWithInt_(200));
    J2OBJC_SET_INITIALIZED(OrgGeogebraCommonUtilStringUtil)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "convertToHexWithByteArray:", "convertToHex", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "toHexStringWithChar:", "toHexString", "Ljava.lang.String;", 0x19, NULL, NULL },
    { "toHexStringWithInt:", "toHexString", "Ljava.lang.String;", 0x19, NULL, NULL },
    { "toHexStringWithOrgGeogebraCommonAwtGColor:", "toHexString", "Ljava.lang.String;", 0x19, NULL, NULL },
    { "toHexStringWithNSString:", "toHexString", "Ljava.lang.String;", 0x19, NULL, NULL },
    { "toHTMLStringWithNSString:", "toHTMLString", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "toHTMLStringWithNSString:withBoolean:", "toHTMLString", "Ljava.lang.String;", 0x19, NULL, NULL },
    { "encodeXMLWithNSString:", "encodeXML", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "encodeXMLWithJavaLangStringBuilder:withNSString:", "encodeXML", "V", 0x9, NULL, NULL },
    { "isRightToLeftCharWithChar:", "isRightToLeftChar", "Z", 0x4, NULL, NULL },
    { "toLaTeXStringWithNSString:withBoolean:", "toLaTeXString", "Ljava.lang.String;", 0x29, NULL, NULL },
    { "stringWithNSString:withInt:", "string", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "removeSpacesWithNSString:", "removeSpaces", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "trimSpacesWithNSString:", "trimSpaces", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "resetStringBuilderWithJavaLangStringBuilder:", "resetStringBuilder", "Ljava.lang.StringBuilder;", 0x9, NULL, NULL },
    { "isNumberWithNSString:", "isNumber", "Z", 0x9, NULL, NULL },
    { "toLowerWithNSString:", "toLower", "Ljava.lang.String;", 0x4, NULL, NULL },
    { "toUpperWithNSString:", "toUpper", "Ljava.lang.String;", 0x4, NULL, NULL },
    { "toLowerCaseWithNSString:", "toLowerCase", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "toUpperCaseWithNSString:", "toUpperCase", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "parseDoubleWithNSString:", "parseDouble", "D", 0x9, NULL, NULL },
    { "repeatWithChar:withInt:", "repeat", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "isLetterOrDigitWithChar:", "isLetterOrDigit", "Z", 0x9, NULL, NULL },
    { "isLetterOrDigitOrUnderscoreWithChar:", "isLetterOrDigitOrUnderscore", "Z", 0x9, NULL, NULL },
    { "isDigitWithChar:", "isDigit", "Z", 0x9, NULL, NULL },
    { "isLetterWithChar:", "isLetter", "Z", 0x9, NULL, NULL },
    { "isNotEqualWithNSString:", "isNotEqual", "Z", 0x9, NULL, NULL },
    { "isInequalityWithNSString:", "isInequality", "Z", 0x9, NULL, NULL },
    { "ignoreIndicesWithNSString:", "ignoreIndices", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "checkBracketsBackwardWithNSString:", "checkBracketsBackward", "I", 0x9, NULL, NULL },
    { "fixVerticalBarsWithNSString:", "fixVerticalBars", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "representsMultipleExpressionsWithNSString:", "representsMultipleExpressions", "Z", 0x9, NULL, NULL },
    { "estimateLengthHTMLWithNSString:withOrgGeogebraCommonAwtGFont:", "estimateLengthHTML", "D", 0x1, NULL, NULL },
    { "estimateLengthWithNSString:withOrgGeogebraCommonAwtGFont:", "estimateLength", "D", 0x1, NULL, NULL },
    { "estimateHeightWithNSString:withOrgGeogebraCommonAwtGFont:", "estimateHeight", "D", 0x1, NULL, NULL },
    { "formatWithNSString:withDouble:withDouble:withDouble:withDouble:", "format", "Ljava.lang.Object;", 0x9, NULL, NULL },
    { "wrapInExactWithNSString:", "wrapInExact", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "removeLeadingSlashWithNSString:", "removeLeadingSlash", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "toHtmlColorWithOrgGeogebraCommonAwtGColor:", "toHtmlColor", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "wholeWordTokenizeWithNSString:", "wholeWordTokenize", "Ljava.util.ArrayList;", 0x9, NULL, NULL },
    { "joinTokensWithJavaLangIterable:withNSString:", "joinTokens", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "cannonicNumberWithNSString:", "cannonicNumber", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "cannonicNumber2WithNSString:", "cannonicNumber2", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "isWhitespaceWithChar:", "isWhitespace", "Z", 0x9, NULL, NULL },
    { "processQuotesWithJavaLangStringBuilder:withNSString:withChar:", "processQuotes", "C", 0x9, NULL, NULL },
    { "init", NULL, NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "hexChar_", NULL, 0xa, "[C", &OrgGeogebraCommonUtilStringUtil_hexChar_, NULL,  },
    { "prototype_", NULL, 0x9, "Lorg.geogebra.common.util.StringUtil;", &OrgGeogebraCommonUtilStringUtil_prototype_, NULL,  },
    { "sb_", NULL, 0xa, "Ljava.lang.StringBuilder;", &OrgGeogebraCommonUtilStringUtil_sb_, NULL,  },
    { "sbReplaceExp_", NULL, 0xa, "Ljava.lang.StringBuilder;", &OrgGeogebraCommonUtilStringUtil_sbReplaceExp_, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonUtilStringUtil = { 2, "StringUtil", "org.geogebra.common.util", NULL, 0x1, 46, methods, 4, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonUtilStringUtil;
}

@end

NSString *OrgGeogebraCommonUtilStringUtil_convertToHexWithByteArray_(IOSByteArray *data) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  JavaLangStringBuilder *buf = [new_JavaLangStringBuilder_init() autorelease];
  for (jint i = 0; i < ((IOSByteArray *) nil_chk(data))->size_; i++) {
    [buf appendWithChar:JavaLangCharacter_forDigitWithInt_withInt_((RShift32(IOSByteArray_Get(data, i), 4)) & (jint) 0xF, 16)];
    [buf appendWithChar:JavaLangCharacter_forDigitWithInt_withInt_((IOSByteArray_Get(data, i) & (jint) 0xF), 16)];
  }
  return [buf description];
}

NSString *OrgGeogebraCommonUtilStringUtil_toHexStringWithChar_(jchar c) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  jint i = c + 0;
  JavaLangStringBuilder *hexSB = [new_JavaLangStringBuilder_initWithInt_(8) autorelease];
  [hexSB appendWithNSString:@"\\u"];
  [hexSB appendWithChar:IOSCharArray_Get(nil_chk(OrgGeogebraCommonUtilStringUtil_hexChar_), URShift32((i & (jint) 0xf000), 12))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, RShift32((i & (jint) 0x0f00), 8))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, URShift32((i & (jint) 0xf0), 4))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, i & (jint) 0x0f)];
  return [hexSB description];
}

NSString *OrgGeogebraCommonUtilStringUtil_toHexStringWithInt_(jint i) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  JavaLangStringBuilder *hexSB = [new_JavaLangStringBuilder_initWithInt_(16) autorelease];
  [hexSB appendWithChar:IOSCharArray_Get(nil_chk(OrgGeogebraCommonUtilStringUtil_hexChar_), URShift32((i & (jint) 0xf0000000), 28))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, URShift32((i & (jint) 0xf000000), 24))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, URShift32((i & (jint) 0xf00000), 20))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, URShift32((i & (jint) 0xf0000), 16))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, URShift32((i & (jint) 0xf000), 12))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, RShift32((i & (jint) 0x0f00), 8))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, URShift32((i & (jint) 0xf0), 4))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, i & (jint) 0x0f)];
  return [hexSB description];
}

NSString *OrgGeogebraCommonUtilStringUtil_toHexStringWithOrgGeogebraCommonAwtGColor_(OrgGeogebraCommonAwtGColor *col) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  jbyte r = (jbyte) [((OrgGeogebraCommonAwtGColor *) nil_chk(col)) getRed];
  jbyte g = (jbyte) [col getGreen];
  jbyte b = (jbyte) [col getBlue];
  JavaLangStringBuilder *hexSB = [new_JavaLangStringBuilder_initWithInt_(8) autorelease];
  [hexSB appendWithChar:IOSCharArray_Get(nil_chk(OrgGeogebraCommonUtilStringUtil_hexChar_), URShift32((r & (jint) 0xf0), 4))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, r & (jint) 0x0f)];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, URShift32((g & (jint) 0xf0), 4))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, g & (jint) 0x0f)];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, URShift32((b & (jint) 0xf0), 4))];
  [hexSB appendWithChar:IOSCharArray_Get(OrgGeogebraCommonUtilStringUtil_hexChar_, b & (jint) 0x0f)];
  return [hexSB description];
}

NSString *OrgGeogebraCommonUtilStringUtil_toHexStringWithNSString_(NSString *s) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_initWithInt_(((jint) [((NSString *) nil_chk(s)) length]) * 6) autorelease];
  for (jint i = 0; i < ((jint) [s length]); i++) {
    [sb appendWithNSString:OrgGeogebraCommonUtilStringUtil_toHexStringWithChar_([s charAtWithInt:i])];
  }
  return [sb description];
}

NSString *OrgGeogebraCommonUtilStringUtil_toHTMLStringWithNSString_(NSString *title) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  return OrgGeogebraCommonUtilStringUtil_toHTMLStringWithNSString_withBoolean_(title, YES);
}

NSString *OrgGeogebraCommonUtilStringUtil_toHTMLStringWithNSString_withBoolean_(NSString *str, jboolean encodeLTGT) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if (str == nil) return nil;
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_init() autorelease];
  jint len = ((jint) [((NSString *) nil_chk(str)) length]);
  for (jint i = 0; i < len; i++) {
    jchar c = [str charAtWithInt:i];
    jint code = c;
    if ((code >= 32 && code <= 126)) {
      if (!encodeLTGT) {
        [sb appendWithChar:c];
      }
      else {
        switch (code) {
          case 60:
          [sb appendWithNSString:@"&lt;"];
          break;
          case 62:
          [sb appendWithNSString:@"&gt;"];
          break;
          default:
          [sb appendWithChar:c];
        }
      }
    }
    else {
      switch (code) {
        case 10:
        case 13:
        [sb appendWithNSString:@"<br/>\n"];
        break;
        case 9:
        [sb appendWithNSString:@"&nbsp;"];
        break;
        default:
        [sb appendWithNSString:@"&#"];
        [sb appendWithInt:code];
        [sb appendWithChar:';'];
      }
    }
  }
  return [sb description];
}

NSString *OrgGeogebraCommonUtilStringUtil_encodeXMLWithNSString_(NSString *str) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_initWithInt_(((jint) [((NSString *) nil_chk(str)) length])) autorelease];
  OrgGeogebraCommonUtilStringUtil_encodeXMLWithJavaLangStringBuilder_withNSString_(sb, str);
  return [sb description];
}

void OrgGeogebraCommonUtilStringUtil_encodeXMLWithJavaLangStringBuilder_withNSString_(JavaLangStringBuilder *sb, NSString *str) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if (str == nil) return;
  jint len = ((jint) [((NSString *) nil_chk(str)) length]);
  for (jint i = 0; i < len; i++) {
    jchar c = [str charAtWithInt:i];
    if (c <= 0x001f) {
      [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"&#"];
      [sb appendWithNSString:JreStrcat("I", ((jint) c))];
      [sb appendWithChar:';'];
      if (c != 0x000a && c != 13) {
        OrgGeogebraCommonUtilDebugLog_warnWithNSString_(JreStrcat("$I", @"Control character being written to XML: ", ((jint) c)));
      }
    }
    else {
      switch (c) {
        case '>':
        [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"&gt;"];
        break;
        case '<':
        [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"&lt;"];
        break;
        case '"':
        [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"&quot;"];
        break;
        case '\'':
        [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"&apos;"];
        break;
        case '&':
        [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"&amp;"];
        break;
        default:
        [((JavaLangStringBuilder *) nil_chk(sb)) appendWithChar:c];
      }
    }
  }
}

NSString *OrgGeogebraCommonUtilStringUtil_toLaTeXStringWithNSString_withBoolean_(NSString *str, jboolean convertGreekLetters) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  @synchronized(OrgGeogebraCommonUtilStringUtil_class_()) {
    jint length = ((jint) [((NSString *) nil_chk(str)) length]);
    [((JavaLangStringBuilder *) nil_chk(OrgGeogebraCommonUtilStringUtil_sbReplaceExp_)) setLengthWithInt:0];
    jchar c = 0;
    jchar previousChar;
    for (jint i = 0; i < length; i++) {
      previousChar = c;
      c = [str charAtWithInt:i];
      if ([((OrgGeogebraCommonUtilStringUtil *) nil_chk(OrgGeogebraCommonUtilStringUtil_prototype_)) isRightToLeftCharWithChar:c]) {
        jint j = i;
        while (j < length && ([OrgGeogebraCommonUtilStringUtil_prototype_ isRightToLeftCharWithChar:[str charAtWithInt:j]] || [str charAtWithInt:j] == 0x00a0)) j++;
        for (jint k = j - 1; k >= i; k--) [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithChar:[str charAtWithInt:k]];
        [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithChar:' '];
        i = j - 1;
        continue;
      }
      switch (c) {
        case '%':
        if (!(previousChar == '\\')) {
          [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\"];
        }
        [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"%"];
        break;
        default:
        if (!convertGreekLetters) {
          [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithChar:c];
        }
        else {
          switch (c) {
            case OrgGeogebraCommonUtilUnicode_alpha:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\alpha"];
            break;
            case OrgGeogebraCommonUtilUnicode_beta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\beta"];
            break;
            case OrgGeogebraCommonUtilUnicode_gamma:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\gamma"];
            break;
            case OrgGeogebraCommonUtilUnicode_delta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\delta"];
            break;
            case OrgGeogebraCommonUtilUnicode_epsilon:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\varepsilon"];
            break;
            case OrgGeogebraCommonUtilUnicode_zeta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\zeta"];
            break;
            case OrgGeogebraCommonUtilUnicode_eta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\eta"];
            break;
            case OrgGeogebraCommonUtilUnicode_theta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\theta"];
            break;
            case OrgGeogebraCommonUtilUnicode_iota:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\iota"];
            break;
            case OrgGeogebraCommonUtilUnicode_kappa:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\kappa"];
            break;
            case OrgGeogebraCommonUtilUnicode_lambda:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\lambda"];
            break;
            case OrgGeogebraCommonUtilUnicode_mu:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\mu"];
            break;
            case OrgGeogebraCommonUtilUnicode_nu:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\nu"];
            break;
            case OrgGeogebraCommonUtilUnicode_xi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\xi"];
            break;
            case OrgGeogebraCommonUtilUnicode_omicron:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\omicron"];
            break;
            case OrgGeogebraCommonUtilUnicode_pi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\pi"];
            break;
            case OrgGeogebraCommonUtilUnicode_rho:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\rho"];
            break;
            case OrgGeogebraCommonUtilUnicode_sigma:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\sigma"];
            break;
            case OrgGeogebraCommonUtilUnicode_tau:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\tau"];
            break;
            case OrgGeogebraCommonUtilUnicode_upsilon:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\upsilon"];
            break;
            case OrgGeogebraCommonUtilUnicode_phi_symbol:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\phi"];
            break;
            case OrgGeogebraCommonUtilUnicode_phi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\varphi"];
            break;
            case OrgGeogebraCommonUtilUnicode_chi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\chi"];
            break;
            case OrgGeogebraCommonUtilUnicode_psi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\psi"];
            break;
            case OrgGeogebraCommonUtilUnicode_omega:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\omega"];
            break;
            case OrgGeogebraCommonUtilUnicode_Alpha:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Alpha"];
            break;
            case OrgGeogebraCommonUtilUnicode_Beta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Beta"];
            break;
            case OrgGeogebraCommonUtilUnicode_Gamma:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Gamma"];
            break;
            case OrgGeogebraCommonUtilUnicode_Delta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Delta"];
            break;
            case OrgGeogebraCommonUtilUnicode_Epsilon:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Epsilon"];
            break;
            case OrgGeogebraCommonUtilUnicode_Zeta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Zeta"];
            break;
            case OrgGeogebraCommonUtilUnicode_Eta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Eta"];
            break;
            case OrgGeogebraCommonUtilUnicode_Theta:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Theta"];
            break;
            case OrgGeogebraCommonUtilUnicode_Iota:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Iota"];
            break;
            case OrgGeogebraCommonUtilUnicode_Kappa:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Kappa"];
            break;
            case OrgGeogebraCommonUtilUnicode_Lambda:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Lambda"];
            break;
            case OrgGeogebraCommonUtilUnicode_Mu:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Mu"];
            break;
            case OrgGeogebraCommonUtilUnicode_Nu:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Nu"];
            break;
            case OrgGeogebraCommonUtilUnicode_Xi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Xi"];
            break;
            case OrgGeogebraCommonUtilUnicode_Omicron:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Omicron"];
            break;
            case OrgGeogebraCommonUtilUnicode_Pi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Pi"];
            break;
            case OrgGeogebraCommonUtilUnicode_Rho:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Rho"];
            break;
            case OrgGeogebraCommonUtilUnicode_Sigma:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Sigma"];
            break;
            case OrgGeogebraCommonUtilUnicode_Tau:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Tau"];
            break;
            case OrgGeogebraCommonUtilUnicode_Upsilon:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Upsilon"];
            break;
            case OrgGeogebraCommonUtilUnicode_Phi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Phi"];
            break;
            case OrgGeogebraCommonUtilUnicode_Chi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Chi"];
            break;
            case OrgGeogebraCommonUtilUnicode_Psi:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Psi"];
            break;
            case OrgGeogebraCommonUtilUnicode_Omega:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithNSString:@"\\Omega"];
            break;
            default:
            [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ appendWithChar:c];
          }
        }
      }
    }
    return [OrgGeogebraCommonUtilStringUtil_sbReplaceExp_ description];
  }
}

NSString *OrgGeogebraCommonUtilStringUtil_stringWithNSString_withInt_(NSString *s, jint n) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if (n == 1) return s;
  if (n < 1) return @"";
  if (OrgGeogebraCommonUtilStringUtil_sb_ == nil) JreStrongAssignAndConsume(&OrgGeogebraCommonUtilStringUtil_sb_, nil, new_JavaLangStringBuilder_init());
  [((JavaLangStringBuilder *) nil_chk(OrgGeogebraCommonUtilStringUtil_sb_)) setLengthWithInt:0];
  for (jint i = 0; i < n; i++) {
    [OrgGeogebraCommonUtilStringUtil_sb_ appendWithNSString:s];
  }
  return [OrgGeogebraCommonUtilStringUtil_sb_ description];
}

NSString *OrgGeogebraCommonUtilStringUtil_removeSpacesWithNSString_(NSString *str) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if (str == nil || ((jint) [str length]) == 0) return @"";
  if (OrgGeogebraCommonUtilStringUtil_sb_ == nil) JreStrongAssignAndConsume(&OrgGeogebraCommonUtilStringUtil_sb_, nil, new_JavaLangStringBuilder_init());
  [((JavaLangStringBuilder *) nil_chk(OrgGeogebraCommonUtilStringUtil_sb_)) setLengthWithInt:0];
  jchar c;
  for (jint i = 0; i < ((jint) [((NSString *) nil_chk(str)) length]); i++) {
    c = [str charAtWithInt:i];
    if (c != ' ') [OrgGeogebraCommonUtilStringUtil_sb_ appendWithChar:c];
  }
  return [OrgGeogebraCommonUtilStringUtil_sb_ description];
}

NSString *OrgGeogebraCommonUtilStringUtil_trimSpacesWithNSString_(NSString *str) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  jint len = ((jint) [((NSString *) nil_chk(str)) length]);
  if (len == 0) return @"";
  jint start = 0;
  while ([str charAtWithInt:start] == ' ' && start < len - 1) start++;
  jint end = len;
  while ([str charAtWithInt:end - 1] == ' ' && end > start) end--;
  if (start == end) return @"";
  return [str substring:start endIndex:end];
}

JavaLangStringBuilder *OrgGeogebraCommonUtilStringUtil_resetStringBuilderWithJavaLangStringBuilder_(JavaLangStringBuilder *high) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if (high == nil) return [new_JavaLangStringBuilder_init() autorelease];
  [((JavaLangStringBuilder *) nil_chk(high)) setLengthWithInt:0];
  return high;
}

jboolean OrgGeogebraCommonUtilStringUtil_isNumberWithNSString_(NSString *text) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  for (jint i = 0; i < ((jint) [((NSString *) nil_chk(text)) length]); i++) {
    jchar c = [text charAtWithInt:i];
    if (!OrgGeogebraCommonUtilStringUtil_isDigitWithChar_(c) && c != '.' && c != OrgGeogebraCommonUtilUnicode_ArabicComma && c != '-') return NO;
  }
  return YES;
}

NSString *OrgGeogebraCommonUtilStringUtil_toLowerCaseWithNSString_(NSString *s) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  return [((OrgGeogebraCommonUtilStringUtil *) nil_chk(OrgGeogebraCommonUtilStringUtil_prototype_)) toLowerWithNSString:s];
}

NSString *OrgGeogebraCommonUtilStringUtil_toUpperCaseWithNSString_(NSString *s) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  return [((OrgGeogebraCommonUtilStringUtil *) nil_chk(OrgGeogebraCommonUtilStringUtil_prototype_)) toUpperWithNSString:s];
}

jdouble OrgGeogebraCommonUtilStringUtil_parseDoubleWithNSString_(NSString *s) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if ([@"NaN" isEqual:s] || [@"undefined" isEqual:s] || [@"null" isEqual:s]) return JavaLangDouble_NaN;
  else if ([@"Infinity" isEqual:s]) return JavaLangDouble_POSITIVE_INFINITY;
  else if ([@"-Infinity" isEqual:s]) return JavaLangDouble_NEGATIVE_INFINITY;
  return JavaLangDouble_parseDoubleWithNSString_(s);
}

NSString *OrgGeogebraCommonUtilStringUtil_repeatWithChar_withInt_(jchar c, jint count) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  JavaLangStringBuilder *ret = [new_JavaLangStringBuilder_init() autorelease];
  for (jint i = 0; i < count; i++) [ret appendWithChar:c];
  return [ret description];
}

jboolean OrgGeogebraCommonUtilStringUtil_isLetterOrDigitWithChar_(jchar c) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if (OrgGeogebraCommonUtilStringUtil_isDigitWithChar_(c)) {
    return YES;
  }
  return OrgGeogebraCommonUtilStringUtil_isLetterWithChar_(c);
}

jboolean OrgGeogebraCommonUtilStringUtil_isLetterOrDigitOrUnderscoreWithChar_(jchar character) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  switch (character) {
    case '_':
    return YES;
    default:
    return OrgGeogebraCommonUtilStringUtil_isLetterOrDigitWithChar_(character);
  }
}

jboolean OrgGeogebraCommonUtilStringUtil_isDigitWithChar_(jchar ch) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if ((ch >= '0' && ch <= '9') || (ch >= 0x0660 && ch <= 0x0669) || (ch >= 0x06f0 && ch <= 0x06f9) || (ch >= 0x0966 && ch <= 0x096f) || (ch >= 0x09e6 && ch <= 0x09ef) || (ch >= 0x0a66 && ch <= 0x0a6f) || (ch >= 0x0ae6 && ch <= 0x0aef) || (ch >= 0x0b66 && ch <= 0x0b6f) || (ch >= 0x0be6 && ch <= 0x0bef) || (ch >= 0x0c66 && ch <= 0x0c6f) || (ch >= 0x0ce6 && ch <= 0x0cef) || (ch >= 0x0d66 && ch <= 0x0d6f) || (ch >= 0x0e50 && ch <= 0x0e59) || (ch >= 0x0ed0 && ch <= 0x0ed9) || (ch >= 0x0f20 && ch <= 0x0f29) || (ch >= 0x1040 && ch <= 0x1049) || (ch >= 0x17e0 && ch <= 0x17e9) || (ch >= 0x1810 && ch <= 0x1819) || (ch >= 0x1b50 && ch <= 0x1b59) || (ch >= 0x1bb0 && ch <= 0x1bb9) || (ch >= 0x1c40 && ch <= 0x1c49) || (ch >= 0x1c50 && ch <= 0x1c59) || (ch >= 0xa8d0 && ch <= 0xa8d9)) {
    return YES;
  }
  return NO;
}

jboolean OrgGeogebraCommonUtilStringUtil_isLetterWithChar_(jchar c) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if ((c >= 'A' && c <= 'Z') || (c >= 'a' && c <= 'z') || (c == 0x00b7) || (c >= 0x00c0 && c <= 0x00d6) || (c >= 0x00d8 && c <= 0x00f6) || (c >= 0x00f8 && c <= 0x01bf) || (c >= 0x01c4 && c <= 0x02a8) || (c >= 0x0391 && c <= 0x03f3) || (c >= 0x0401 && c <= 0x0481) || (c >= 0x0490 && c <= 0x04f9) || (c >= 0x0531 && c <= 0x1ffc) || (c >= 0x3041 && c <= 0x3357) || (c >= 0x4e00 && c <= 0xd7a3) || (c >= 0xf71d && c <= 0xfa2d) || (c >= 0xfb13 && c <= 0xfdfb) || (c >= 0xfe80 && c <= 0xfefc) || (c >= 0xff66 && c <= 0xff9d) || (c >= 0xffa1 && c <= 0xffdc)) {
    return YES;
  }
  return NO;
}

jboolean OrgGeogebraCommonUtilStringUtil_isNotEqualWithNSString_(NSString *str) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  return [@"!=" isEqual:str] || [@"<>" isEqual:str] || [((NSString *) nil_chk(OrgGeogebraCommonUtilUnicode_get_NOTEQUAL_())) isEqual:str];
}

jboolean OrgGeogebraCommonUtilStringUtil_isInequalityWithNSString_(NSString *str) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  return [@"<" isEqual:str] || [@">" isEqual:str] || OrgGeogebraCommonUtilStringUtil_isNotEqualWithNSString_(str);
}

NSString *OrgGeogebraCommonUtilStringUtil_ignoreIndicesWithNSString_(NSString *text) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if (text == nil) {
    return nil;
  }
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_initWithInt_(80) autorelease];
  jboolean ignore = NO;
  jboolean underscore = NO;
  jboolean comment = NO;
  for (jint i = 0; i < ((jint) [((NSString *) nil_chk(text)) length]); i++) {
    jchar ch = [text charAtWithInt:i];
    if (comment && ch != '"') {
      [sb appendWithChar:ch];
      continue;
    }
    if (ch == '"' && !underscore) {
      [sb appendWithChar:ch];
      comment = !comment;
      continue;
    }
    if (ignore && ch == '}') {
      ignore = NO;
    }
    if (!ignore) {
      [sb appendWithChar:ch];
    }
    else {
      [sb appendWithChar:'X'];
    }
    if (underscore && ch == '{') {
      ignore = YES;
    }
    else if (!ignore) {
      underscore = (ch == '_');
    }
  }
  return [sb description];
}

jint OrgGeogebraCommonUtilStringUtil_checkBracketsBackwardWithNSString_(NSString *parseString) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  jint curly = 0;
  jint square = 0;
  jint round = 0;
  JavaUtilStack *closingBrackets = [new_JavaUtilStack_init() autorelease];
  jboolean comment = NO;
  for (jint i = ((jint) [((NSString *) nil_chk(parseString)) length]) - 1; i >= 0; i--) {
    jchar ch = [parseString charAtWithInt:i];
    if (comment && ch != '"') {
      continue;
    }
    switch (ch) {
      case '"':
      comment = !comment;
      break;
      case '}':
      [closingBrackets addWithId:JavaLangInteger_valueOfWithInt_(i)];
      curly++;
      break;
      case '{':
      curly--;
      if (curly < 0) {
        return i;
      }
      [closingBrackets pop];
      break;
      case ']':
      square++;
      [closingBrackets addWithId:JavaLangInteger_valueOfWithInt_(i)];
      break;
      case '[':
      square--;
      if (square < 0) {
        return i;
      }
      [closingBrackets pop];
      break;
      case ')':
      round++;
      [closingBrackets addWithId:JavaLangInteger_valueOfWithInt_(i)];
      break;
      case '(':
      round--;
      if (round < 0) {
        return i;
      }
      [closingBrackets pop];
      break;
    }
  }
  if (![closingBrackets isEmpty]) {
    return [((JavaLangInteger *) nil_chk([closingBrackets pop])) intValue];
  }
  return -1;
}

NSString *OrgGeogebraCommonUtilStringUtil_fixVerticalBarsWithNSString_(NSString *parseString) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  NSString *ignoredIndices = OrgGeogebraCommonUtilStringUtil_ignoreIndicesWithNSString_(parseString);
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_init() autorelease];
  id<JavaUtilSet> splitters = [new_JavaUtilTreeSet_initWithJavaUtilCollection_(JavaUtilArrays_asListWithNSObjectArray_([IOSObjectArray arrayWithObjects:(id[]){ JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_SQUARE_ROOT), JavaLangCharacter_valueOfWithChar_('+'), JavaLangCharacter_valueOfWithChar_('-'), JavaLangCharacter_valueOfWithChar_('*'), JavaLangCharacter_valueOfWithChar_('/'), JavaLangCharacter_valueOfWithChar_('^'), JavaLangCharacter_valueOfWithChar_('=') } count:7 type:JavaLangCharacter_class_()])) autorelease];
  for (jint dir = 0; dir < 2; dir++) {
    jboolean comment = NO;
    jint bars = 0;
    JavaLangCharacter *lastNonWhitespace = JavaLangCharacter_valueOfWithChar_(' ');
    if (dir == 1) {
      parseString = [((JavaLangStringBuilder *) nil_chk([sb reverse])) description];
      ignoredIndices = OrgGeogebraCommonUtilStringUtil_ignoreIndicesWithNSString_(parseString);
      sb = [new_JavaLangStringBuilder_init() autorelease];
      splitters = [new_JavaUtilTreeSet_initWithJavaUtilCollection_(JavaUtilArrays_asListWithNSObjectArray_([IOSObjectArray arrayWithObjects:(id[]){ JavaLangCharacter_valueOfWithChar_('*'), JavaLangCharacter_valueOfWithChar_('/'), JavaLangCharacter_valueOfWithChar_('^'), JavaLangCharacter_valueOfWithChar_('='), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_0), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_1), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_2), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_3), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_4), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_5), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_6), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_7), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_8), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_9), JavaLangCharacter_valueOfWithChar_(OrgGeogebraCommonUtilUnicode_Superscript_Minus) } count:15 type:JavaLangCharacter_class_()])) autorelease];
    }
    jint len = ((jint) [((NSString *) nil_chk(ignoredIndices)) length]);
    for (jint i = 0; i < len; i++) {
      JavaLangCharacter *ch = JavaLangCharacter_valueOfWithChar_([ignoredIndices charAtWithInt:i]);
      [sb appendWithChar:[((NSString *) nil_chk(parseString)) charAtWithInt:i]];
      if (OrgGeogebraCommonUtilStringUtil_isWhitespaceWithChar_([ch charValue]) || (comment && ![ch isEqual:JavaLangCharacter_valueOfWithChar_('"')])) {
        continue;
      }
      if ([ch isEqual:JavaLangCharacter_valueOfWithChar_('"')]) {
        comment = !comment;
      }
      if ([ch isEqual:JavaLangCharacter_valueOfWithChar_('|')]) {
        if (i == 0 || (bars % 2 == 1 && i < len - 2 && [ignoredIndices charAtWithInt:i + 1] == '|' && [ignoredIndices charAtWithInt:i + 2] == '|') || (i < len - 1 && [ignoredIndices charAtWithInt:i + 1] == '|' && [splitters containsWithId:lastNonWhitespace])) {
          [sb appendWithChar:' '];
        }
        bars++;
      }
      lastNonWhitespace = ch;
    }
  }
  return [((JavaLangStringBuilder *) nil_chk([sb reverse])) description];
}

jboolean OrgGeogebraCommonUtilStringUtil_representsMultipleExpressionsWithNSString_(NSString *evalText) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  NSString *text = OrgGeogebraCommonUtilStringUtil_ignoreIndicesWithNSString_(evalText);
  jint brackets = 0;
  jboolean comment = NO;
  for (jint i = ((jint) [((NSString *) nil_chk(text)) length]) - 1; i >= 0; i--) {
    jchar ch = [text charAtWithInt:i];
    if (comment && ch != '"') continue;
    switch (ch) {
      case '}':
      case ')':
      case ']':
      brackets--;
      break;
      case '{':
      case '(':
      case '[':
      brackets++;
      break;
      case ',':
      if (brackets == 0) return YES;
    }
  }
  return NO;
}

id OrgGeogebraCommonUtilStringUtil_formatWithNSString_withDouble_withDouble_withDouble_withDouble_(NSString *sub, jdouble x0, jdouble x1, jdouble x2, jdouble x3) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  return [((NSString *) nil_chk([((NSString *) nil_chk([((NSString *) nil_chk([((NSString *) nil_chk(sub)) replaceAll:@"%0" withReplacement:JreStrcat("D", x0)])) replaceAll:@"%1" withReplacement:JreStrcat("D", x1)])) replaceAll:@"%2" withReplacement:JreStrcat("D", x2)])) replace:@"%3" withSequence:JreStrcat("D", x3)];
}

NSString *OrgGeogebraCommonUtilStringUtil_wrapInExactWithNSString_(NSString *s) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if ([((NSString *) nil_chk(s)) hasPrefix:@"exact("]) {
    return s;
  }
  if ([s indexOfString:@"E"] > -1) {
    s = [s replace:@"E" withSequence:@"e"];
  }
  if ([@"?" isEqual:s] || [@"undef" isEqual:s]) {
    return @"undef";
  }
  if ([@"inf" isEqual:s]) {
    return s;
  }
  if ([@"-inf" isEqual:s]) {
    return s;
  }
  JavaLangStringBuilder *sb1 = [new_JavaLangStringBuilder_init() autorelease];
  [sb1 appendWithNSString:@"exact("];
  [sb1 appendWithNSString:s];
  [sb1 appendWithChar:')'];
  return [sb1 description];
}

NSString *OrgGeogebraCommonUtilStringUtil_removeLeadingSlashWithNSString_(NSString *filename) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  if (filename != nil && ((jint) [filename length]) != 0 && [filename charAtWithInt:0] == '/') return [filename substring:1];
  return filename;
}

NSString *OrgGeogebraCommonUtilStringUtil_toHtmlColorWithOrgGeogebraCommonAwtGColor_(OrgGeogebraCommonAwtGColor *color) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  return JreStrcat("C$", '#', OrgGeogebraCommonUtilStringUtil_toHexStringWithOrgGeogebraCommonAwtGColor_(color));
}

JavaUtilArrayList *OrgGeogebraCommonUtilStringUtil_wholeWordTokenizeWithNSString_(NSString *input) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  JavaUtilArrayList *ret = [new_JavaUtilArrayList_init() autorelease];
  JavaLangCharacter *actChar;
  NSString *actWord = @"";
  jboolean odd = NO;
  for (jint i = 0; i < ((jint) [((NSString *) nil_chk(input)) length]); i++) {
    actChar = JavaLangCharacter_valueOfWithChar_([input charAtWithInt:i]);
    if (OrgGeogebraCommonUtilStringUtil_isLetterOrDigitOrUnderscoreWithChar_([actChar charValue])) {
      if (odd) {
        actWord = JreStrcat("$@", actWord, actChar);
      }
      else {
        [ret addWithId:actWord];
        actWord = JreStrcat("@", actChar);
        odd = YES;
      }
    }
    else {
      if (odd) {
        [ret addWithId:actWord];
        actWord = JreStrcat("@", actChar);
        odd = NO;
      }
      else {
        actWord = JreStrcat("$@", actWord, actChar);
      }
    }
  }
  [ret addWithId:actWord];
  if (odd) {
    [ret addWithId:@""];
  }
  return ret;
}

NSString *OrgGeogebraCommonUtilStringUtil_joinTokensWithJavaLangIterable_withNSString_(id<JavaLangIterable> tokens, NSString *delimiter) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  NSString *ret = @"";
  id<JavaUtilIterator> it = [((id<JavaLangIterable>) nil_chk(tokens)) iterator];
  if ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    ret = JreStrcat("$$", ret, [it next]);
  }
  while ([it hasNext]) {
    if (delimiter != nil) {
      ret = JreStrcat("$$", ret, delimiter);
    }
    ret = JreStrcat("$$", ret, [it next]);
  }
  return ret;
}

NSString *OrgGeogebraCommonUtilStringUtil_cannonicNumberWithNSString_(NSString *str) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  jboolean zerosNeedRemoving = YES;
  jint index = [((NSString *) nil_chk(str)) indexOfString:@"."];
  if (index >= 0) {
    for (jint k = index + 1; k < ((jint) [str length]); k++) {
      if ([str charAtWithInt:k] != '0') {
        zerosNeedRemoving = NO;
        break;
      }
    }
  }
  else {
    zerosNeedRemoving = NO;
  }
  if (zerosNeedRemoving) {
    return index == 0 ? @"0" : [str substring:0 endIndex:index];
  }
  return index == 0 ? JreStrcat("C$", '0', str) : str;
}

NSString *OrgGeogebraCommonUtilStringUtil_cannonicNumber2WithNSString_(NSString *str) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  NSString *num = str;
  NSString *exponent = @"";
  if ([((NSString *) nil_chk(str)) indexOf:'E'] > 0) {
    IOSObjectArray *split = [((NSString *) nil_chk(num)) split:@"E"];
    exponent = JreStrcat("C$", 'E', IOSObjectArray_Get(nil_chk(split), 1));
    num = IOSObjectArray_Get(split, 0);
  }
  if ([((NSString *) nil_chk(num)) hasPrefix:@"."]) {
    num = JreStrcat("C$", '0', num);
  }
  if ([num indexOfString:@"."] > 0) {
    while ([num hasSuffix:@"0"]) {
      num = [num substring:0 endIndex:((jint) [num length]) - 1];
    }
  }
  return JreStrcat("$$", num, exponent);
}

jboolean OrgGeogebraCommonUtilStringUtil_isWhitespaceWithChar_(jchar c) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  return c == ' ' || c == 0x0009 || c == 0x000a || c == 0x000b || c == 0x000c || c == 0x000d || c == 0x001c || c == 0x001d || c == 0x001e || c == 0x001f || c == 0x1680 || c == 0x180e || c == 0x2000 || c == 0x2001 || c == 0x2002 || c == 0x2003 || c == 0x2004 || c == 0x2005 || c == 0x2006 || c == 0x2008 || c == 0x2009 || c == 0x200a || c == 0x2028 || c == 0x2029 || c == 0x205f || c == 0x3000;
}

jchar OrgGeogebraCommonUtilStringUtil_processQuotesWithJavaLangStringBuilder_withNSString_withChar_(JavaLangStringBuilder *sb, NSString *content, jchar ret) {
  OrgGeogebraCommonUtilStringUtil_initialize();
  jchar currentQuote = ret;
  if ([((NSString *) nil_chk(content)) indexOfString:@"\""] == -1) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:content];
    return currentQuote;
  }
  for (jint i = 0; i < ((jint) [content length]); i++) {
    jchar c = [content charAtWithInt:i];
    if (c == '"') {
      [((JavaLangStringBuilder *) nil_chk(sb)) appendWithChar:currentQuote];
      if (currentQuote == OrgGeogebraCommonUtilUnicode_OPEN_DOUBLE_QUOTE) {
        currentQuote = OrgGeogebraCommonUtilUnicode_CLOSE_DOUBLE_QUOTE;
      }
      else {
        currentQuote = OrgGeogebraCommonUtilUnicode_OPEN_DOUBLE_QUOTE;
      }
    }
    else {
      [((JavaLangStringBuilder *) nil_chk(sb)) appendWithChar:c];
    }
  }
  return currentQuote;
}

void OrgGeogebraCommonUtilStringUtil_init(OrgGeogebraCommonUtilStringUtil *self) {
  NSObject_init(self);
}

OrgGeogebraCommonUtilStringUtil *new_OrgGeogebraCommonUtilStringUtil_init() {
  OrgGeogebraCommonUtilStringUtil *self = [OrgGeogebraCommonUtilStringUtil alloc];
  OrgGeogebraCommonUtilStringUtil_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonUtilStringUtil)
