//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/geogebra/common/gui/dialog/options/model/ScriptInputModel.java
//


#include "J2ObjC_source.h"
#include "org/geogebra/common/gui/InputHandler.h"
#include "org/geogebra/common/gui/dialog/options/model/OptionsModel.h"
#include "org/geogebra/common/gui/dialog/options/model/ScriptInputModel.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/geos/GeoButton.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/plugin/EventType.h"
#include "org/geogebra/common/plugin/ScriptType.h"
#include "org/geogebra/common/plugin/script/Script.h"

@class OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler;

@interface OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel () {
 @public
  OrgGeogebraCommonKernelGeosGeoElement *geo_;
  jboolean global_;
  OrgGeogebraCommonPluginScriptTypeEnum *scriptType_;
  jboolean updateScript_;
  OrgGeogebraCommonMainApp *app_;
  OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler *inputHandler_;
  id<OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener> listener_;
  jboolean handlingDocumentEventOff_;
  jboolean editOccurred_;
}

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel, geo_, OrgGeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel, scriptType_, OrgGeogebraCommonPluginScriptTypeEnum *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel, app_, OrgGeogebraCommonMainApp *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel, inputHandler_, OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel, listener_, id<OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener>)

@interface OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener : NSObject
@end

@interface OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler : NSObject < OrgGeogebraCommonGuiInputHandler > {
 @public
  OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *this$0_;
  OrgGeogebraCommonKernelKernel *kernel_;
}

- (instancetype)initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel:(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *)outer$;

- (jboolean)processInputWithNSString:(NSString *)inputValue;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler)

J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler, this$0_, OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler, kernel_, OrgGeogebraCommonKernelKernel *)

__attribute__((unused)) static void OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler_initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler *self, OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *outer$);

__attribute__((unused)) static OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler *new_OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler_initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler)

@implementation OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel

- (instancetype)initWithOrgGeogebraCommonMainApp:(OrgGeogebraCommonMainApp *)app
withOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener:(id<OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener>)listener
                                     withBoolean:(jboolean)updateScript
                                     withBoolean:(jboolean)forceJavaScript {
  OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener_withBoolean_withBoolean_(self, app, listener, updateScript, forceJavaScript);
  return self;
}

- (void)setGeoWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  handlingDocumentEventOff_ = YES;
  if (global_) {
    [self setGlobal];
    handlingDocumentEventOff_ = NO;
    return;
  }
  self->geo_ = geo;
  if (geo != nil) {
    OrgGeogebraCommonPluginScriptScript *script = [geo getScriptWithOrgGeogebraCommonPluginEventTypeEnum:updateScript_ ? OrgGeogebraCommonPluginEventTypeEnum_get_UPDATE() : OrgGeogebraCommonPluginEventTypeEnum_get_CLICK()];
    if (script == nil) {
      script = [((OrgGeogebraCommonMainApp *) nil_chk(app_)) createScriptWithOrgGeogebraCommonPluginScriptTypeEnum:OrgGeogebraCommonPluginScriptTypeEnum_get_GGBSCRIPT() withNSString:@"" withBoolean:NO];
    }
    [((id<OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener>) nil_chk(listener_)) setInputTextWithNSString:[((OrgGeogebraCommonPluginScriptScript *) nil_chk(script)) getText]];
    [self setScriptTypeWithOrgGeogebraCommonPluginScriptTypeEnum:[script getType]];
  }
  handlingDocumentEventOff_ = NO;
}

- (void)setGlobal {
  jboolean currentHandlingDocumentEventOff = handlingDocumentEventOff_;
  handlingDocumentEventOff_ = YES;
  geo_ = nil;
  global_ = YES;
  [((id<OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener>) nil_chk(listener_)) setInputTextWithNSString:[((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getKernel])) getLibraryJavaScript]];
  handlingDocumentEventOff_ = currentHandlingDocumentEventOff;
}

- (jboolean)processInputWithNSString:(NSString *)inputText {
  return [((OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler *) nil_chk(inputHandler_)) processInputWithNSString:inputText];
}

- (void)setScriptTypeWithOrgGeogebraCommonPluginScriptTypeEnum:(OrgGeogebraCommonPluginScriptTypeEnum *)scriptType {
  self->scriptType_ = scriptType;
  NSString *scriptStr;
  jint index = [((OrgGeogebraCommonPluginScriptTypeEnum *) nil_chk(scriptType)) ordinal];
  switch ([scriptType ordinal]) {
    default:
    case OrgGeogebraCommonPluginScriptType_GGBSCRIPT:
    scriptStr = @"geogebra";
    break;
    case OrgGeogebraCommonPluginScriptType_JAVASCRIPT:
    scriptStr = @"javascript";
    break;
  }
  [((id<OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener>) nil_chk(listener_)) setLanguageIndexWithInt:index withNSString:scriptStr];
}

- (OrgGeogebraCommonKernelGeosGeoElement *)getGeo {
  return geo_;
}

- (void)handleDocumentEvent {
  if (handlingDocumentEventOff_) return;
  [self setEditOccurredWithBoolean:YES];
}

- (jboolean)isValidAtWithInt:(jint)index {
  return NO;
}

- (jboolean)checkGeos {
  return [self getGeosLength] == 1;
}

- (void)updateProperties {
}

- (jboolean)isEditOccurred {
  return editOccurred_;
}

- (void)setEditOccurredWithBoolean:(jboolean)editOccurred {
  self->editOccurred_ = editOccurred;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonMainApp:withOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener:withBoolean:withBoolean:", "ScriptInputModel", NULL, 0x1, NULL, NULL },
    { "setGeoWithOrgGeogebraCommonKernelGeosGeoElement:", "setGeo", "V", 0x1, NULL, NULL },
    { "setGlobal", NULL, "V", 0x1, NULL, NULL },
    { "processInputWithNSString:", "processInput", "Z", 0x1, NULL, NULL },
    { "setScriptTypeWithOrgGeogebraCommonPluginScriptTypeEnum:", "setScriptType", "V", 0x1, NULL, NULL },
    { "getGeo", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "handleDocumentEvent", NULL, "V", 0x1, NULL, NULL },
    { "isValidAtWithInt:", "isValidAt", "Z", 0x4, NULL, NULL },
    { "checkGeos", NULL, "Z", 0x1, NULL, NULL },
    { "updateProperties", NULL, "V", 0x1, NULL, NULL },
    { "isEditOccurred", NULL, "Z", 0x1, NULL, NULL },
    { "setEditOccurredWithBoolean:", "setEditOccurred", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "geo_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "global_", NULL, 0x2, "Z", NULL, NULL,  },
    { "scriptType_", NULL, 0x2, "Lorg.geogebra.common.plugin.ScriptType;", NULL, NULL,  },
    { "updateScript_", NULL, 0x2, "Z", NULL, NULL,  },
    { "app_", NULL, 0x2, "Lorg.geogebra.common.main.App;", NULL, NULL,  },
    { "inputHandler_", NULL, 0x2, "Lorg.geogebra.common.gui.dialog.options.model.ScriptInputModel$TextInputHandler;", NULL, NULL,  },
    { "listener_", NULL, 0x2, "Lorg.geogebra.common.gui.dialog.options.model.ScriptInputModel$IScriptInputListener;", NULL, NULL,  },
    { "handlingDocumentEventOff_", NULL, 0x2, "Z", NULL, NULL,  },
    { "editOccurred_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lorg.geogebra.common.gui.dialog.options.model.ScriptInputModel$IScriptInputListener;", "Lorg.geogebra.common.gui.dialog.options.model.ScriptInputModel$TextInputHandler;"};
  static const J2ObjcClassInfo _OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel = { 2, "ScriptInputModel", "org.geogebra.common.gui.dialog.options.model", NULL, 0x1, 12, methods, 9, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel;
}

@end

void OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener_withBoolean_withBoolean_(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *self, OrgGeogebraCommonMainApp *app, id<OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener> listener, jboolean updateScript, jboolean forceJavaScript) {
  (void) OrgGeogebraCommonGuiDialogOptionsModelOptionsModel_init(self);
  self->global_ = NO;
  self->scriptType_ = OrgGeogebraCommonPluginScriptTypeEnum_get_GGBSCRIPT();
  self->updateScript_ = NO;
  self->handlingDocumentEventOff_ = NO;
  self->editOccurred_ = NO;
  self->app_ = app;
  self->listener_ = listener;
  self->updateScript_ = updateScript;
  self->inputHandler_ = new_OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler_initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_(self);
}

OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *new_OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener_withBoolean_withBoolean_(OrgGeogebraCommonMainApp *app, id<OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener> listener, jboolean updateScript, jboolean forceJavaScript) {
  OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *self = [OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel alloc];
  OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener_withBoolean_withBoolean_(self, app, listener, updateScript, forceJavaScript);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel)

@implementation OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "setInputTextWithNSString:", "setInputText", "V", 0x401, NULL, NULL },
    { "getInputText", NULL, "Ljava.lang.String;", 0x401, NULL, NULL },
    { "setLanguageIndexWithInt:withNSString:", "setLanguageIndex", "V", 0x401, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener = { 2, "IScriptInputListener", "org.geogebra.common.gui.dialog.options.model", "ScriptInputModel", 0x609, 3, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_IScriptInputListener)

@implementation OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler

- (instancetype)initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel:(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *)outer$ {
  OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler_initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_(self, outer$);
  return self;
}

- (jboolean)processInputWithNSString:(NSString *)inputValue {
  if (inputValue == nil) return NO;
  if (this$0_->global_) {
    [((OrgGeogebraCommonKernelKernel *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(this$0_->app_)) getKernel])) setLibraryJavaScriptWithNSString:inputValue];
    return YES;
  }
  if ([this$0_ getGeo] == nil) {
    [this$0_ setGeoWithOrgGeogebraCommonKernelGeosGeoElement:OrgGeogebraCommonKernelGeosGeoButton_getNewButtonWithOrgGeogebraCommonKernelConstruction_([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) getConstruction])];
  }
  OrgGeogebraCommonPluginScriptScript *script = [((OrgGeogebraCommonMainApp *) nil_chk(this$0_->app_)) createScriptWithOrgGeogebraCommonPluginScriptTypeEnum:this$0_->scriptType_ withNSString:inputValue withBoolean:YES];
  if (this$0_->updateScript_) {
    [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([this$0_ getGeo])) setUpdateScriptWithOrgGeogebraCommonPluginScriptScript:script];
    [this$0_->app_ setBlockUpdateScriptsWithBoolean:NO];
  }
  else {
    [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([this$0_ getGeo])) setClickScriptWithOrgGeogebraCommonPluginScriptScript:script];
  }
  return YES;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel:", "TextInputHandler", NULL, 0x2, NULL, NULL },
    { "processInputWithNSString:", "processInput", "Z", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.geogebra.common.gui.dialog.options.model.ScriptInputModel;", NULL, NULL,  },
    { "kernel_", NULL, 0x2, "Lorg.geogebra.common.kernel.Kernel;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler = { 2, "TextInputHandler", "org.geogebra.common.gui.dialog.options.model", "ScriptInputModel", 0x2, 2, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler;
}

@end

void OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler_initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler *self, OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *outer$) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
  self->kernel_ = [((OrgGeogebraCommonMainApp *) nil_chk(outer$->app_)) getKernel];
}

OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler *new_OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler_initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel *outer$) {
  OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler *self = [OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler alloc];
  OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler_initWithOrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGuiDialogOptionsModelScriptInputModel_TextInputHandler)
