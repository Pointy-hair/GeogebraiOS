//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/geogebra/common/gui/dialog/options/model/ObjectNameModel.java
//


#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "org/geogebra/common/gui/dialog/handler/RedefineInputHandler.h"
#include "org/geogebra/common/gui/dialog/handler/RenameInputHandler.h"
#include "org/geogebra/common/gui/dialog/options/model/ObjectNameModel.h"
#include "org/geogebra/common/gui/dialog/options/model/OptionsModel.h"
#include "org/geogebra/common/kernel/StringTemplate.h"
#include "org/geogebra/common/kernel/arithmetic/TextValue.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoText.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/main/SelectionManager.h"

@interface OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel () {
 @public
  id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener> listener_;
  OrgGeogebraCommonMainApp *app_;
  OrgGeogebraCommonGuiDialogHandlerRenameInputHandler *nameInputHandler_;
  OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler *defInputHandler_;
  OrgGeogebraCommonKernelGeosGeoElement *currentGeo_;
  jboolean redefinitionFailed_;
  OrgGeogebraCommonKernelGeosGeoElement *currentGeoForFocusLost_;
  jboolean busy_;
}

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel, listener_, id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener>)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel, app_, OrgGeogebraCommonMainApp *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel, nameInputHandler_, OrgGeogebraCommonGuiDialogHandlerRenameInputHandler *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel, defInputHandler_, OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel, currentGeo_, OrgGeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel, currentGeoForFocusLost_, OrgGeogebraCommonKernelGeosGeoElement *)

@interface OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener : NSObject
@end

@implementation OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel

- (instancetype)initWithOrgGeogebraCommonMainApp:(OrgGeogebraCommonMainApp *)app
withOrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener:(id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener>)listener {
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener_(self, app, listener);
  return self;
}

- (void)updateProperties {
  OrgGeogebraCommonKernelGeosGeoElement *geo0 = [self getGeoAtWithInt:0];
  [((id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener>) nil_chk(listener_)) updateNameWithNSString:[((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo0)) getLabelWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_editTemplate_()]];
  [self setCurrentGeoWithOrgGeogebraCommonKernelGeosGeoElement:geo0];
  [((OrgGeogebraCommonGuiDialogHandlerRenameInputHandler *) nil_chk(nameInputHandler_)) setGeoElementWithOrgGeogebraCommonKernelGeosGeoElement:geo0];
  [((OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler *) nil_chk(defInputHandler_)) setGeoElementWithOrgGeogebraCommonKernelGeosGeoElement:geo0];
  jboolean showDefinition = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([self getCurrentGeo])) isGeoText] ? [((OrgGeogebraCommonKernelGeosGeoText *) nil_chk(((OrgGeogebraCommonKernelGeosGeoText *) check_class_cast([self getCurrentGeo], [OrgGeogebraCommonKernelGeosGeoText class])))) isTextCommand] : !((([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([self getCurrentGeo])) isGeoImage] || [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([self getCurrentGeo])) isGeoButton]) && [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk([self getCurrentGeo])) isIndependent]));
  if (showDefinition) {
    [listener_ updateDefLabel];
  }
  jboolean showCaption = !([OrgGeogebraCommonKernelArithmeticTextValue_class_() isInstance:[self getCurrentGeo]]);
  if (showCaption) {
    [listener_ updateCaption];
  }
  [listener_ updateGUIWithBoolean:showDefinition withBoolean:showCaption];
}

- (jboolean)checkGeos {
  return [self getGeosLength] == 1;
}

- (void)applyNameChangeWithNSString:(NSString *)name {
  [((OrgGeogebraCommonGuiDialogHandlerRenameInputHandler *) nil_chk(nameInputHandler_)) setGeoElementWithOrgGeogebraCommonKernelGeosGeoElement:currentGeo_];
  [nameInputHandler_ processInputWithNSString:name];
  NSString *strName = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(currentGeo_)) getLabelWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_defaultTemplate_()];
  if (![((NSString *) nil_chk(strName)) isEqual:name]) {
    [((id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener>) nil_chk(listener_)) setNameTextWithNSString:strName];
  }
  [currentGeo_ updateRepaint];
}

- (void)applyDefinitionChangeWithNSString:(NSString *)definition {
  if (![((NSString *) nil_chk(definition)) isEqual:OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_getDefTextWithOrgGeogebraCommonKernelGeosGeoElement_(currentGeo_)]) {
    if ([((OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler *) nil_chk(defInputHandler_)) processInputWithNSString:definition]) {
      OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_set_currentGeo_(self, [defInputHandler_ getGeoElement]);
      [((OrgGeogebraCommonMainSelectionManager *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getSelectionManager])) addSelectedGeoWithOrgGeogebraCommonKernelGeosGeoElement:currentGeo_];
    }
    else {
      [self setRedefinitionFailedWithBoolean:YES];
    }
  }
}

+ (NSString *)getDefTextWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  return OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_getDefTextWithOrgGeogebraCommonKernelGeosGeoElement_(geo);
}

- (void)applyCaptionChangeWithNSString:(NSString *)caption {
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(currentGeo_)) setCaptionWithNSString:caption];
  NSString *strCaption = [currentGeo_ getRawCaption];
  if (![((NSString *) nil_chk(strCaption)) isEqual:[((NSString *) nil_chk(caption)) trim]]) {
    [((id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener>) nil_chk(listener_)) setCaptionTextWithNSString:strCaption];
  }
  [currentGeo_ updateVisualStyleRepaint];
}

- (void)redefineCurrentGeoWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo
                                                       withNSString:(NSString *)text
                                                       withNSString:(NSString *)redefinitionText {
  [self setBusyWithBoolean:YES];
  if ([self isRedefinitionFailed]) {
    [self setRedefinitionFailedWithBoolean:NO];
    return;
  }
  if (currentGeo_ == geo) {
    if (![((NSString *) nil_chk(text)) isEqual:OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_getDefTextWithOrgGeogebraCommonKernelGeosGeoElement_(currentGeo_)]) {
      [((id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener>) nil_chk(listener_)) setDefinitionTextWithNSString:text];
      [((OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler *) nil_chk(defInputHandler_)) setGeoElementWithOrgGeogebraCommonKernelGeosGeoElement:geo];
      if ([defInputHandler_ processInputWithNSString:text]) [self setCurrentGeoWithOrgGeogebraCommonKernelGeosGeoElement:[defInputHandler_ getGeoElement]];
    }
  }
  else {
    NSString *strDefinition = redefinitionText;
    if (![((NSString *) nil_chk(strDefinition)) isEqual:OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_getDefTextWithOrgGeogebraCommonKernelGeosGeoElement_(geo)]) {
      [((OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler *) nil_chk(defInputHandler_)) setGeoElementWithOrgGeogebraCommonKernelGeosGeoElement:geo];
      [defInputHandler_ processInputWithNSString:strDefinition];
      [defInputHandler_ setGeoElementWithOrgGeogebraCommonKernelGeosGeoElement:currentGeo_];
    }
  }
}

- (OrgGeogebraCommonKernelGeosGeoElement *)getCurrentGeo {
  return currentGeo_;
}

- (void)setCurrentGeoWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)currentGeo {
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_set_currentGeo_(self, currentGeo);
}

- (OrgGeogebraCommonGuiDialogHandlerRenameInputHandler *)getNameInputHandler {
  return nameInputHandler_;
}

- (void)setNameInputHandlerWithOrgGeogebraCommonGuiDialogHandlerRenameInputHandler:(OrgGeogebraCommonGuiDialogHandlerRenameInputHandler *)nameInputHandler {
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_set_nameInputHandler_(self, nameInputHandler);
}

- (OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler *)getDefInputHandler {
  return defInputHandler_;
}

- (void)setDefInputHandlerWithOrgGeogebraCommonGuiDialogHandlerRedefineInputHandler:(OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler *)defInputHandler {
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_set_defInputHandler_(self, defInputHandler);
}

- (jboolean)isBusy {
  return busy_;
}

- (void)setBusyWithBoolean:(jboolean)busy {
  self->busy_ = busy;
}

- (jboolean)isRedefinitionFailed {
  return redefinitionFailed_;
}

- (void)setRedefinitionFailedWithBoolean:(jboolean)redefinitionFailed {
  self->redefinitionFailed_ = redefinitionFailed;
}

- (jboolean)isValidAtWithInt:(jint)index {
  return NO;
}

- (void)dealloc {
  RELEASE_(listener_);
  RELEASE_(app_);
  RELEASE_(nameInputHandler_);
  RELEASE_(defInputHandler_);
  RELEASE_(currentGeo_);
  RELEASE_(currentGeoForFocusLost_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonMainApp:withOrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener:", "ObjectNameModel", NULL, 0x1, NULL, NULL },
    { "updateProperties", NULL, "V", 0x1, NULL, NULL },
    { "checkGeos", NULL, "Z", 0x1, NULL, NULL },
    { "applyNameChangeWithNSString:", "applyNameChange", "V", 0x1, NULL, NULL },
    { "applyDefinitionChangeWithNSString:", "applyDefinitionChange", "V", 0x1, NULL, NULL },
    { "getDefTextWithOrgGeogebraCommonKernelGeosGeoElement:", "getDefText", "Ljava.lang.String;", 0x9, NULL, NULL },
    { "applyCaptionChangeWithNSString:", "applyCaptionChange", "V", 0x1, NULL, NULL },
    { "redefineCurrentGeoWithOrgGeogebraCommonKernelGeosGeoElement:withNSString:withNSString:", "redefineCurrentGeo", "V", 0x1, NULL, NULL },
    { "getCurrentGeo", NULL, "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "setCurrentGeoWithOrgGeogebraCommonKernelGeosGeoElement:", "setCurrentGeo", "V", 0x1, NULL, NULL },
    { "getNameInputHandler", NULL, "Lorg.geogebra.common.gui.dialog.handler.RenameInputHandler;", 0x1, NULL, NULL },
    { "setNameInputHandlerWithOrgGeogebraCommonGuiDialogHandlerRenameInputHandler:", "setNameInputHandler", "V", 0x1, NULL, NULL },
    { "getDefInputHandler", NULL, "Lorg.geogebra.common.gui.dialog.handler.RedefineInputHandler;", 0x1, NULL, NULL },
    { "setDefInputHandlerWithOrgGeogebraCommonGuiDialogHandlerRedefineInputHandler:", "setDefInputHandler", "V", 0x1, NULL, NULL },
    { "isBusy", NULL, "Z", 0x1, NULL, NULL },
    { "setBusyWithBoolean:", "setBusy", "V", 0x1, NULL, NULL },
    { "isRedefinitionFailed", NULL, "Z", 0x4, NULL, NULL },
    { "setRedefinitionFailedWithBoolean:", "setRedefinitionFailed", "V", 0x4, NULL, NULL },
    { "isValidAtWithInt:", "isValidAt", "Z", 0x4, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "listener_", NULL, 0x2, "Lorg.geogebra.common.gui.dialog.options.model.ObjectNameModel$IObjectNameListener;", NULL, NULL,  },
    { "app_", NULL, 0x2, "Lorg.geogebra.common.main.App;", NULL, NULL,  },
    { "nameInputHandler_", NULL, 0x2, "Lorg.geogebra.common.gui.dialog.handler.RenameInputHandler;", NULL, NULL,  },
    { "defInputHandler_", NULL, 0x2, "Lorg.geogebra.common.gui.dialog.handler.RedefineInputHandler;", NULL, NULL,  },
    { "currentGeo_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "redefinitionFailed_", NULL, 0x2, "Z", NULL, NULL,  },
    { "currentGeoForFocusLost_", NULL, 0x2, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "busy_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lorg.geogebra.common.gui.dialog.options.model.ObjectNameModel$IObjectNameListener;"};
  static const J2ObjcClassInfo _OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel = { 2, "ObjectNameModel", "org.geogebra.common.gui.dialog.options.model", NULL, 0x1, 19, methods, 8, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel;
}

@end

void OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener_(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel *self, OrgGeogebraCommonMainApp *app, id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener> listener) {
  OrgGeogebraCommonGuiDialogOptionsModelOptionsModel_init(self);
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_set_app_(self, app);
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_set_listener_(self, listener);
  self->busy_ = NO;
  self->redefinitionFailed_ = NO;
  [self setNameInputHandlerWithOrgGeogebraCommonGuiDialogHandlerRenameInputHandler:[new_OrgGeogebraCommonGuiDialogHandlerRenameInputHandler_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonKernelGeosGeoElement_withBoolean_(app, nil, NO) autorelease]];
  [self setDefInputHandlerWithOrgGeogebraCommonGuiDialogHandlerRedefineInputHandler:[new_OrgGeogebraCommonGuiDialogHandlerRedefineInputHandler_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonKernelGeosGeoElement_withNSString_(app, nil, nil) autorelease]];
}

OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel *new_OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener_(OrgGeogebraCommonMainApp *app, id<OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener> listener) {
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel *self = [OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel alloc];
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener_(self, app, listener);
  return self;
}

NSString *OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_getDefTextWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonKernelGeosGeoElement *geo) {
  OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_initialize();
  return [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getRedefineStringWithBoolean:NO withBoolean:YES];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel)

@implementation OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "setNameTextWithNSString:", "setNameText", "V", 0x401, NULL, NULL },
    { "setDefinitionTextWithNSString:", "setDefinitionText", "V", 0x401, NULL, NULL },
    { "setCaptionTextWithNSString:", "setCaptionText", "V", 0x401, NULL, NULL },
    { "updateGUIWithBoolean:withBoolean:", "updateGUI", "V", 0x401, NULL, NULL },
    { "updateDefLabel", NULL, "V", 0x401, NULL, NULL },
    { "updateCaption", NULL, "V", 0x401, NULL, NULL },
    { "updateNameWithNSString:", "updateName", "V", 0x401, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener = { 2, "IObjectNameListener", "org.geogebra.common.gui.dialog.options.model", "ObjectNameModel", 0x609, 7, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGuiDialogOptionsModelObjectNameModel_IObjectNameListener)
