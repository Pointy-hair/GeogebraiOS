//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/geogebra/common/gui/view/probcalculator/ProbabilityCalculatorView.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Double.h"
#include "java/lang/Exception.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuilder.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/TreeSet.h"
#include "org/geogebra/common/awt/GColor.h"
#include "org/geogebra/common/euclidian/EuclidianView.h"
#include "org/geogebra/common/gui/view/data/PlotSettings.h"
#include "org/geogebra/common/gui/view/probcalculator/ProbabilityCalculatorView.h"
#include "org/geogebra/common/gui/view/probcalculator/ProbabilityManager.h"
#include "org/geogebra/common/gui/view/probcalculator/ProbabilityTable.h"
#include "org/geogebra/common/kernel/Construction.h"
#include "org/geogebra/common/kernel/Kernel.h"
#include "org/geogebra/common/kernel/ModeSetter.h"
#include "org/geogebra/common/kernel/StringTemplate.h"
#include "org/geogebra/common/kernel/View.h"
#include "org/geogebra/common/kernel/algos/AlgoBarChart.h"
#include "org/geogebra/common/kernel/algos/AlgoDependentNumber.h"
#include "org/geogebra/common/kernel/algos/AlgoDependentPoint.h"
#include "org/geogebra/common/kernel/algos/AlgoElement.h"
#include "org/geogebra/common/kernel/algos/AlgoJoinPointsSegment.h"
#include "org/geogebra/common/kernel/algos/AlgoListElement.h"
#include "org/geogebra/common/kernel/algos/AlgoPointOnPath.h"
#include "org/geogebra/common/kernel/algos/AlgoPolyLine.h"
#include "org/geogebra/common/kernel/algos/AlgoRayPointVector.h"
#include "org/geogebra/common/kernel/algos/AlgoSequence.h"
#include "org/geogebra/common/kernel/algos/AlgoStepGraph.h"
#include "org/geogebra/common/kernel/algos/AlgoStickGraph.h"
#include "org/geogebra/common/kernel/algos/AlgoTake.h"
#include "org/geogebra/common/kernel/algos/ConstructionElement.h"
#include "org/geogebra/common/kernel/arithmetic/ExpressionNode.h"
#include "org/geogebra/common/kernel/arithmetic/ExpressionNodeConstants.h"
#include "org/geogebra/common/kernel/arithmetic/MyDouble.h"
#include "org/geogebra/common/kernel/arithmetic/MyVecNode.h"
#include "org/geogebra/common/kernel/arithmetic/NumberValue.h"
#include "org/geogebra/common/kernel/cas/AlgoIntegralDefinite.h"
#include "org/geogebra/common/kernel/commands/AlgebraProcessor.h"
#include "org/geogebra/common/kernel/geos/GeoAxis.h"
#include "org/geogebra/common/kernel/geos/GeoBoolean.h"
#include "org/geogebra/common/kernel/geos/GeoElement.h"
#include "org/geogebra/common/kernel/geos/GeoFunction.h"
#include "org/geogebra/common/kernel/geos/GeoLine.h"
#include "org/geogebra/common/kernel/geos/GeoList.h"
#include "org/geogebra/common/kernel/geos/GeoNumeric.h"
#include "org/geogebra/common/kernel/geos/GeoPoint.h"
#include "org/geogebra/common/kernel/geos/GeoVector.h"
#include "org/geogebra/common/kernel/kernelND/GeoPointND.h"
#include "org/geogebra/common/kernel/statistics/AlgoBinomialDist.h"
#include "org/geogebra/common/kernel/statistics/AlgoCauchyDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoChiSquaredDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoDistributionDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoExponentialDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoFDistributionDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoGammaDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoHyperGeometric.h"
#include "org/geogebra/common/kernel/statistics/AlgoInversePascal.h"
#include "org/geogebra/common/kernel/statistics/AlgoInversePoisson.h"
#include "org/geogebra/common/kernel/statistics/AlgoLogNormalDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoLogisticDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoNormalDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoPascal.h"
#include "org/geogebra/common/kernel/statistics/AlgoPoisson.h"
#include "org/geogebra/common/kernel/statistics/AlgoTDistributionDF.h"
#include "org/geogebra/common/kernel/statistics/AlgoWeibullDF.h"
#include "org/geogebra/common/main/App.h"
#include "org/geogebra/common/main/GeoGebraColorConstants.h"
#include "org/geogebra/common/main/Localization.h"
#include "org/geogebra/common/main/settings/AbstractSettings.h"
#include "org/geogebra/common/main/settings/ProbabilityCalculatorSettings.h"
#include "org/geogebra/common/main/settings/Settings.h"
#include "org/geogebra/common/plugin/EuclidianStyleConstants.h"
#include "org/geogebra/common/plugin/Operation.h"
#include "org/geogebra/common/util/Unicode.h"

#pragma clang diagnostic ignored "-Wprotocol"

@interface OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView () {
 @public
  jdouble low_;
  jdouble high_;
  JavaUtilTreeSet *tempSet_;
}

- (OrgGeogebraCommonKernelGeosGeoElement *)createGeoFromStringWithNSString:(NSString *)text
                                                               withBoolean:(jboolean)suppressLabelCreation;

- (void)hideAllGeosFromViews;

- (void)hideGeoFromViewsWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo;

- (void)hideToolTips;

- (void)createDiscreteLists;

- (void)clearPlotGeoList;

- (JavaUtilTreeSet *)getTempSet;

- (void)updateRounding;

- (void)removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:(OrgGeogebraCommonKernelAlgosConstructionElement *)ce;

- (void)removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement:(OrgGeogebraCommonKernelAlgosAlgoElement *)algo;

- (OrgGeogebraCommonKernelGeosGeoFunction *)buildDensityCurveExpressionWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:(OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum *)type
                                                                                                                                   withBoolean:(jboolean)cumulative;

@end

J2OBJC_FIELD_SETTER(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView, tempSet_, JavaUtilTreeSet *)

static OrgGeogebraCommonAwtGColor *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_;
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView, COLOR_PDF_, OrgGeogebraCommonAwtGColor *)

static OrgGeogebraCommonAwtGColor *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_NORMALOVERLAY_;
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView, COLOR_NORMALOVERLAY_, OrgGeogebraCommonAwtGColor *)

static OrgGeogebraCommonAwtGColor *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_FILL_;
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView, COLOR_PDF_FILL_, OrgGeogebraCommonAwtGColor *)

static OrgGeogebraCommonAwtGColor *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_POINT_;
J2OBJC_STATIC_FIELD_GETTER(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView, COLOR_POINT_, OrgGeogebraCommonAwtGColor *)

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, NSString *text, jboolean suppressLabelCreation);

__attribute__((unused)) static void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideAllGeosFromViews(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self);

__attribute__((unused)) static void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideGeoFromViewsWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, OrgGeogebraCommonKernelGeosGeoElement *geo);

__attribute__((unused)) static void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideToolTips(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self);

__attribute__((unused)) static void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createDiscreteLists(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self);

__attribute__((unused)) static void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_clearPlotGeoList(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self);

__attribute__((unused)) static JavaUtilTreeSet *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_getTempSet(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self);

__attribute__((unused)) static void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_updateRounding(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self);

__attribute__((unused)) static void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, OrgGeogebraCommonKernelAlgosAlgoElement *algo);

__attribute__((unused)) static OrgGeogebraCommonKernelGeosGeoFunction *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_buildDensityCurveExpressionWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_withBoolean_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum *type, jboolean cumulative);

J2OBJC_INITIALIZED_DEFN(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView)

@implementation OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView

- (instancetype)initWithOrgGeogebraCommonMainApp:(OrgGeogebraCommonMainApp *)app {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_initWithOrgGeogebraCommonMainApp_(self, app);
  return self;
}

- (void)setLabelArrays {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_distributionMap_(self, [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) getDistributionMap]);
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_reverseDistributionMap_(self, [probManager_ getReverseDistributionMap]);
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_parameterLabels_(self, OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager_getParameterLabelArrayWithOrgGeogebraCommonMainApp_(app_));
}

- (jint)getDiscreteXMax {
  if (discreteValueList_ != nil) {
    OrgGeogebraCommonKernelGeosGeoNumeric *geo = (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast([discreteValueList_ getWithInt:[discreteValueList_ size] - 1], [OrgGeogebraCommonKernelGeosGeoNumeric class]);
    return J2ObjCFpToInt([((OrgGeogebraCommonKernelGeosGeoNumeric *) nil_chk(geo)) getDouble]);
  }
  return -1;
}

- (jint)getDiscreteXMin {
  if (discreteValueList_ != nil) {
    OrgGeogebraCommonKernelGeosGeoNumeric *geo = (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast([discreteValueList_ getWithInt:0], [OrgGeogebraCommonKernelGeosGeoNumeric class]);
    return J2ObjCFpToInt([((OrgGeogebraCommonKernelGeosGeoNumeric *) nil_chk(geo)) getDouble]);
  }
  return -1;
}

- (void)setGraphTypeWithInt:(jint)type {
  if (graphType_ == type) return;
  graphType_ = type;
  if (isCumulative__) graphTypeCDF_ = type;
  else graphTypePDF_ = type;
  [self updateAll];
}

- (jint)getGraphType {
  return graphType_;
}

- (jint)getPrintDecimals {
  return printDecimals_;
}

- (jint)getPrintFigures {
  return printFigures_;
}

- (void)setProbabilityCalculatorWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:(OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum *)distributionType
                                                                                        withDoubleArray:(IOSDoubleArray *)parameters
                                                                                            withBoolean:(jboolean)isCumulative {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_selectedDist_(self, distributionType);
  self->isCumulative__ = isCumulative;
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_parameters_(self, parameters);
  if (parameters == nil) OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_parameters_(self, OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager_getDefaultParametersWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_(selectedDist_));
  [self updateAll];
}

- (OrgGeogebraCommonGuiViewDataPlotSettings *)getPlotSettings {
  return plotSettings_;
}

- (void)setPlotSettingsWithOrgGeogebraCommonGuiViewDataPlotSettings:(OrgGeogebraCommonGuiViewDataPlotSettings *)plotSettings {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_plotSettings_(self, plotSettings);
}

- (jboolean)isShowNormalOverlay {
  return showNormalOverlay_;
}

- (void)setShowNormalOverlayWithBoolean:(jboolean)showNormalOverlay {
  self->showNormalOverlay_ = showNormalOverlay;
}

- (void)updateAll {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum *)getSelectedDist {
  return selectedDist_;
}

- (jdouble)getLow {
  return low_;
}

- (jdouble)getHigh {
  return high_;
}

- (jint)getProbMode {
  return probMode_;
}

- (jboolean)isCumulative {
  return isCumulative__;
}

- (void)createGeoElements {
  [self removeGeos];
  NSString *expr;
  OrgGeogebraCommonKernelGeosGeoAxis *path = (OrgGeogebraCommonKernelGeosGeoAxis *) check_class_cast([((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) lookupLabelWithNSString:[((OrgGeogebraCommonMainLocalization *) nil_chk(loc_)) getPlainWithNSString:@"xAxis"]], [OrgGeogebraCommonKernelGeosGeoAxis class]);
  OrgGeogebraCommonKernelAlgosAlgoPointOnPath *algoLow = [new_OrgGeogebraCommonKernelAlgosAlgoPointOnPath_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelPath_withDouble_withDouble_(cons_, path, 0.0, 0.0) autorelease];
  [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoLow];
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_lowPoint_(self, (OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast(IOSObjectArray_Get(nil_chk([algoLow getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoPoint class]));
  [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(lowPoint_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_POINT_];
  [lowPoint_ setPointSizeWithInt:4];
  [lowPoint_ setPointStyleWithInt:OrgGeogebraCommonPluginEuclidianStyleConstants_POINT_STYLE_TRIANGLE_NORTH];
  [lowPoint_ setLayerWithInt:5];
  [((JavaUtilArrayList *) nil_chk(plotGeoList_)) addWithId:lowPoint_];
  OrgGeogebraCommonKernelAlgosAlgoPointOnPath *algoHigh = [new_OrgGeogebraCommonKernelAlgosAlgoPointOnPath_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelPath_withDouble_withDouble_(cons_, path, 0.0, 0.0) autorelease];
  [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoHigh];
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_highPoint_(self, (OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast(IOSObjectArray_Get(nil_chk([algoHigh getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoPoint class]));
  [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(highPoint_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_POINT_];
  [highPoint_ setPointSizeWithInt:4];
  [highPoint_ setPointStyleWithInt:OrgGeogebraCommonPluginEuclidianStyleConstants_POINT_STYLE_TRIANGLE_NORTH];
  [highPoint_ setLayerWithInt:5];
  [plotGeoList_ addWithId:highPoint_];
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_setAndConsume_pointList_(self, new_JavaUtilArrayList_init());
  [pointList_ addWithId:lowPoint_];
  [pointList_ addWithId:highPoint_];
  [self setXAxisPoints];
  if ([((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) isDiscreteWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_]) {
    OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createDiscreteLists(self);
    if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_STEP) {
      OrgGeogebraCommonKernelGeosGeoBoolean *t = [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_(cons_) autorelease];
      [t setValueWithBoolean:YES];
      OrgGeogebraCommonKernelAlgosAlgoStepGraph *algoStepGraph = [new_OrgGeogebraCommonKernelAlgosAlgoStepGraph_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoBoolean_(cons_, discreteValueList_, discreteProbList_, t) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoStepGraph];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteGraph_(self, IOSObjectArray_Get(nil_chk([algoStepGraph getGeoElements]), 0));
    }
    else {
      OrgGeogebraCommonKernelAlgosAlgoBarChart *algoBarChart;
      if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_LINE) {
        id<OrgGeogebraCommonKernelArithmeticNumberValue> zeroWidth = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, 0) autorelease];
        algoBarChart = [new_OrgGeogebraCommonKernelAlgosAlgoBarChart_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelArithmeticNumberValue_(cons_, discreteValueList_, discreteProbList_, zeroWidth) autorelease];
      }
      else {
        id<OrgGeogebraCommonKernelArithmeticNumberValue> oneWidth = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, 1) autorelease];
        algoBarChart = [new_OrgGeogebraCommonKernelAlgosAlgoBarChart_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelArithmeticNumberValue_(cons_, discreteValueList_, discreteProbList_, oneWidth) autorelease];
      }
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoBarChart];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteGraph_(self, IOSObjectArray_Get(nil_chk([((OrgGeogebraCommonKernelAlgosAlgoBarChart *) nil_chk(algoBarChart)) getGeoElements]), 0));
    }
    [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteGraph_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_];
    [discreteGraph_ setAlphaValueWithFloat:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_opacityDiscrete];
    [discreteGraph_ setLineThicknessWithInt:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_thicknessBarChart];
    [discreteGraph_ setLayerWithInt:1];
    [discreteGraph_ setFixedWithBoolean:YES];
    [discreteGraph_ setSelectionAllowedWithBoolean:NO];
    [discreteGraph_ setEuclidianVisibleWithBoolean:YES];
    [plotGeoList_ addWithId:discreteGraph_];
    jdouble firstX = [((OrgGeogebraCommonKernelGeosGeoNumeric *) nil_chk(((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast([((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(discreteValueList_)) getWithInt:0], [OrgGeogebraCommonKernelGeosGeoNumeric class])))) getDouble];
    OrgGeogebraCommonKernelArithmeticMyDouble *offset = [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernel_, 1.0 - firstX + 0.5) autorelease];
    OrgGeogebraCommonKernelArithmeticExpressionNode *low = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, lowPoint_, OrgGeogebraCommonPluginOperationEnum_get_XCOORD(), nil) autorelease];
    OrgGeogebraCommonKernelArithmeticExpressionNode *high = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, highPoint_, OrgGeogebraCommonPluginOperationEnum_get_XCOORD(), nil) autorelease];
    OrgGeogebraCommonKernelArithmeticExpressionNode *lowPlusOffset = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, low, OrgGeogebraCommonPluginOperationEnum_get_PLUS(), offset) autorelease];
    OrgGeogebraCommonKernelArithmeticExpressionNode *highPlusOffset = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, high, OrgGeogebraCommonPluginOperationEnum_get_PLUS(), offset) autorelease];
    OrgGeogebraCommonKernelAlgosAlgoDependentNumber *xLow;
    if (isCumulative__) xLow = [new_OrgGeogebraCommonKernelAlgosAlgoDependentNumber_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(cons_, highPlusOffset, NO) autorelease];
    else xLow = [new_OrgGeogebraCommonKernelAlgosAlgoDependentNumber_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(cons_, lowPlusOffset, NO) autorelease];
    [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:xLow];
    OrgGeogebraCommonKernelAlgosAlgoDependentNumber *xHigh = [new_OrgGeogebraCommonKernelAlgosAlgoDependentNumber_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(cons_, highPlusOffset, NO) autorelease];
    [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:xHigh];
    OrgGeogebraCommonKernelAlgosAlgoTake *take = [new_OrgGeogebraCommonKernelAlgosAlgoTake_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelGeosGeoNumeric_(cons_, discreteValueList_, (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(IOSObjectArray_Get(nil_chk([((OrgGeogebraCommonKernelAlgosAlgoDependentNumber *) nil_chk(xLow)) getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoNumeric class]), (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(IOSObjectArray_Get(nil_chk([xHigh getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoNumeric class])) autorelease];
    [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:take];
    OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_intervalValueList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([take getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
    OrgGeogebraCommonKernelAlgosAlgoTake *take2 = [new_OrgGeogebraCommonKernelAlgosAlgoTake_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelGeosGeoNumeric_(cons_, discreteProbList_, (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(IOSObjectArray_Get(nil_chk([xLow getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoNumeric class]), (OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast(IOSObjectArray_Get(nil_chk([xHigh getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoNumeric class])) autorelease];
    [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:take2];
    OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_intervalProbList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([take2 getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
    if (isCumulative__) {
      OrgGeogebraCommonKernelGeosGeoBoolean *t = [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_(cons_) autorelease];
      [t setValueWithBoolean:YES];
      OrgGeogebraCommonKernelAlgosAlgoStickGraph *algoStickGraph = [new_OrgGeogebraCommonKernelAlgosAlgoStickGraph_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoBoolean_(cons_, intervalValueList_, intervalProbList_, t) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoStickGraph];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteIntervalGraph_(self, IOSObjectArray_Get(nil_chk([algoStickGraph getGeoElements]), 0));
    }
    else if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_STEP) {
      OrgGeogebraCommonKernelGeosGeoBoolean *t = [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_(cons_) autorelease];
      [t setValueWithBoolean:YES];
      OrgGeogebraCommonKernelAlgosAlgoStepGraph *algoStepGraph2 = [new_OrgGeogebraCommonKernelAlgosAlgoStepGraph_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoBoolean_(cons_, intervalValueList_, intervalProbList_, t) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoStepGraph2];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteIntervalGraph_(self, IOSObjectArray_Get(nil_chk([algoStepGraph2 getGeoElements]), 0));
    }
    else {
      OrgGeogebraCommonKernelAlgosAlgoBarChart *barChart;
      if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_LINE) {
        id<OrgGeogebraCommonKernelArithmeticNumberValue> zeroWidth2 = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, 0.0) autorelease];
        barChart = [new_OrgGeogebraCommonKernelAlgosAlgoBarChart_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelArithmeticNumberValue_(cons_, intervalValueList_, intervalProbList_, zeroWidth2) autorelease];
      }
      else {
        id<OrgGeogebraCommonKernelArithmeticNumberValue> oneWidth2 = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, 1) autorelease];
        barChart = [new_OrgGeogebraCommonKernelAlgosAlgoBarChart_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelArithmeticNumberValue_(cons_, intervalValueList_, intervalProbList_, oneWidth2) autorelease];
      }
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteIntervalGraph_(self, IOSObjectArray_Get(nil_chk([((OrgGeogebraCommonKernelAlgosAlgoBarChart *) nil_chk(barChart)) getGeoElements]), 0));
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:barChart];
    }
    if (isCumulative__) {
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteIntervalGraph_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonAwtGColor_get_RED_()];
      [discreteIntervalGraph_ setLineThicknessWithInt:3];
      [discreteIntervalGraph_ setLineTypeWithInt:OrgGeogebraCommonPluginEuclidianStyleConstants_LINE_TYPE_FULL];
    }
    else if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_LINE || graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_STEP) {
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteIntervalGraph_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_FILL_];
      [discreteIntervalGraph_ setLineThicknessWithInt:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_thicknessBarChart + 2];
    }
    else {
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteIntervalGraph_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_FILL_];
      [discreteIntervalGraph_ setAlphaValueWithFloat:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_opacityDiscreteInterval];
      [discreteIntervalGraph_ setLineThicknessWithInt:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_thicknessBarChart];
    }
    [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteIntervalGraph_)) setEuclidianVisibleWithBoolean:showProbGeos_];
    [discreteIntervalGraph_ setLayerWithInt:[discreteGraph_ getLayer] + 1];
    [discreteIntervalGraph_ setFixedWithBoolean:YES];
    [discreteIntervalGraph_ setSelectionAllowedWithBoolean:NO];
    [discreteIntervalGraph_ updateCascade];
    [plotGeoList_ addWithId:discreteIntervalGraph_];
    OrgGeogebraCommonKernelGeosGeoLine *axis = [new_OrgGeogebraCommonKernelGeosGeoLine_initWithOrgGeogebraCommonKernelConstruction_(cons_) autorelease];
    [axis setCoordsWithDouble:0 withDouble:1 withDouble:0];
    [axis setLayerWithInt:4];
    [axis setObjColorWithOrgGeogebraCommonAwtGColor:[((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(app_)) getEuclidianView1])) getAxesColor]];
    [axis setLineThicknessWithInt:discreteIntervalGraph_->lineThickness_];
    [axis setFixedWithBoolean:YES];
    [axis setSelectionAllowedWithBoolean:NO];
    [axis updateCascade];
    [plotGeoList_ addWithId:axis];
  }
  else {
    OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_densityCurve_(self, OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_buildDensityCurveExpressionWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_withBoolean_(self, selectedDist_, isCumulative__));
    if (isCumulative__ && (selectedDist_ == OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_get_F() || selectedDist_ == OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_get_EXPONENTIAL())) {
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_pdfCurve_(self, OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_buildDensityCurveExpressionWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_withBoolean_(self, selectedDist_, NO));
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:pdfCurve_];
    }
    [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(densityCurve_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_];
    [densityCurve_ setLineThicknessWithInt:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_thicknessCurve];
    [densityCurve_ setFixedWithBoolean:YES];
    [densityCurve_ setSelectionAllowedWithBoolean:NO];
    [densityCurve_ setEuclidianVisibleWithBoolean:YES];
    [plotGeoList_ addWithId:densityCurve_];
    if (hasIntegral_) {
      OrgGeogebraCommonKernelGeosGeoBoolean *f = [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_(cons_) autorelease];
      [f setValueWithBoolean:NO];
      OrgGeogebraCommonKernelArithmeticExpressionNode *low = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, lowPoint_, OrgGeogebraCommonPluginOperationEnum_get_XCOORD(), nil) autorelease];
      OrgGeogebraCommonKernelArithmeticExpressionNode *high = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, highPoint_, OrgGeogebraCommonPluginOperationEnum_get_XCOORD(), nil) autorelease];
      OrgGeogebraCommonKernelAlgosAlgoDependentNumber *xLow = [new_OrgGeogebraCommonKernelAlgosAlgoDependentNumber_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(cons_, low, NO) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:xLow];
      OrgGeogebraCommonKernelAlgosAlgoDependentNumber *xHigh = [new_OrgGeogebraCommonKernelAlgosAlgoDependentNumber_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(cons_, high, NO) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:xHigh];
      OrgGeogebraCommonKernelCasAlgoIntegralDefinite *algoIntegral = [new_OrgGeogebraCommonKernelCasAlgoIntegralDefinite_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoFunction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelGeosGeoBoolean_(cons_, (OrgGeogebraCommonKernelGeosGeoFunction *) check_class_cast(densityCurve_, [OrgGeogebraCommonKernelGeosGeoFunction class]), (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(IOSObjectArray_Get(nil_chk([xLow getGeoElements]), 0), @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(IOSObjectArray_Get(nil_chk([xHigh getGeoElements]), 0), @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), f) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoIntegral];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_integral_(self, IOSObjectArray_Get(nil_chk([algoIntegral getGeoElements]), 0));
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(integral_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_FILL_];
      [integral_ setAlphaValueWithFloat:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_opacityIntegral];
      [integral_ setEuclidianVisibleWithBoolean:showProbGeos_];
      [integral_ setSelectionAllowedWithBoolean:NO];
      [plotGeoList_ addWithId:integral_];
    }
    if (isCumulative__) {
      OrgGeogebraCommonKernelGeosGeoFunction *f = (OrgGeogebraCommonKernelGeosGeoFunction *) check_class_cast(densityCurve_, [OrgGeogebraCommonKernelGeosGeoFunction class]);
      OrgGeogebraCommonKernelArithmeticExpressionNode *highPointX = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, highPoint_, OrgGeogebraCommonPluginOperationEnum_get_XCOORD(), nil) autorelease];
      OrgGeogebraCommonKernelArithmeticExpressionNode *curveY = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, f, OrgGeogebraCommonPluginOperationEnum_get_FUNCTION(), highPointX) autorelease];
      OrgGeogebraCommonKernelArithmeticMyVecNode *curveVec = [new_OrgGeogebraCommonKernelArithmeticMyVecNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, highPointX, curveY) autorelease];
      OrgGeogebraCommonKernelArithmeticExpressionNode *curvePointNode = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, curveVec, OrgGeogebraCommonPluginOperationEnum_get_NO_OPERATION(), nil) autorelease];
      [curvePointNode setForcePoint];
      OrgGeogebraCommonKernelAlgosAlgoDependentPoint *pAlgo = [new_OrgGeogebraCommonKernelAlgosAlgoDependentPoint_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(cons_, curvePointNode, NO) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:pAlgo];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_curvePoint_(self, (OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast(IOSObjectArray_Get(nil_chk([pAlgo getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoPoint class]));
      [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(curvePoint_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_POINT_];
      [curvePoint_ setPointSizeWithInt:4];
      [curvePoint_ setLayerWithInt:[f getLayer] + 1];
      [curvePoint_ setSelectionAllowedWithBoolean:NO];
      [plotGeoList_ addWithId:curvePoint_];
      OrgGeogebraCommonKernelArithmeticExpressionNode *xcoord = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, curvePoint_, OrgGeogebraCommonPluginOperationEnum_get_XCOORD(), nil) autorelease];
      OrgGeogebraCommonKernelArithmeticMyVecNode *vec = [new_OrgGeogebraCommonKernelArithmeticMyVecNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, xcoord, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernel_, 0.0) autorelease]) autorelease];
      OrgGeogebraCommonKernelArithmeticExpressionNode *point = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, vec, OrgGeogebraCommonPluginOperationEnum_get_NO_OPERATION(), nil) autorelease];
      [point setForcePoint];
      OrgGeogebraCommonKernelAlgosAlgoDependentPoint *pointAlgo = [new_OrgGeogebraCommonKernelAlgosAlgoDependentPoint_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(cons_, point, NO) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:pointAlgo];
      OrgGeogebraCommonKernelAlgosAlgoJoinPointsSegment *seg1 = [new_OrgGeogebraCommonKernelAlgosAlgoJoinPointsSegment_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoPoint_withOrgGeogebraCommonKernelGeosGeoPoint_withOrgGeogebraCommonKernelGeosGeoPolygon_(cons_, curvePoint_, (OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast(IOSObjectArray_Get(nil_chk([pointAlgo getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoPoint class]), nil) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:seg1];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_xSegment_(self, IOSObjectArray_Get(nil_chk([seg1 getGeoElements]), 0));
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(xSegment_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonAwtGColor_get_BLUE_()];
      [xSegment_ setLineThicknessWithInt:3];
      [xSegment_ setLineTypeWithInt:OrgGeogebraCommonPluginEuclidianStyleConstants_LINE_TYPE_DASHED_SHORT];
      [xSegment_ setEuclidianVisibleWithBoolean:showProbGeos_];
      [xSegment_ setFixedWithBoolean:YES];
      [xSegment_ setSelectionAllowedWithBoolean:NO];
      [plotGeoList_ addWithId:xSegment_];
      OrgGeogebraCommonKernelArithmeticExpressionNode *ycoord = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, curvePoint_, OrgGeogebraCommonPluginOperationEnum_get_YCOORD(), nil) autorelease];
      OrgGeogebraCommonKernelArithmeticMyVecNode *vecy = [new_OrgGeogebraCommonKernelArithmeticMyVecNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(kernel_, 0.0) autorelease], ycoord) autorelease];
      OrgGeogebraCommonKernelArithmeticExpressionNode *pointy = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(kernel_, vecy, OrgGeogebraCommonPluginOperationEnum_get_NO_OPERATION(), nil) autorelease];
      [pointy setForcePoint];
      OrgGeogebraCommonKernelGeosGeoVector *v = [new_OrgGeogebraCommonKernelGeosGeoVector_initWithOrgGeogebraCommonKernelConstruction_(cons_) autorelease];
      [v setCoordsWithDouble:-1.0 withDouble:0.0 withDouble:1.0];
      OrgGeogebraCommonKernelAlgosAlgoRayPointVector *seg2 = [new_OrgGeogebraCommonKernelAlgosAlgoRayPointVector_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoPoint_withOrgGeogebraCommonKernelGeosGeoVector_(cons_, curvePoint_, v) autorelease];
      [cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:seg2];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_ySegment_(self, IOSObjectArray_Get(nil_chk([seg2 getGeoElements]), 0));
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(ySegment_)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonAwtGColor_get_RED_()];
      [ySegment_ setLineThicknessWithInt:3];
      [ySegment_ setLineTypeWithInt:OrgGeogebraCommonPluginEuclidianStyleConstants_LINE_TYPE_FULL];
      [ySegment_ setEuclidianVisibleWithBoolean:showProbGeos_];
      [ySegment_ setFixedWithBoolean:YES];
      [ySegment_ setSelectionAllowedWithBoolean:NO];
      [plotGeoList_ addWithId:ySegment_];
    }
  }
  if (showNormalOverlay_) {
    IOSObjectArray *m = [probManager_ getDistributionMeasuresWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_ withDoubleArray:parameters_];
    if (IOSObjectArray_Get(nil_chk(m), 0) != nil && IOSObjectArray_Get(m, 1) != nil) {
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_normalOverlay_(self, [self createNormalCurveOverlayWithDouble:[((JavaLangDouble *) nil_chk(IOSObjectArray_Get(m, 0))) doubleValue] withDouble:[((JavaLangDouble *) nil_chk(IOSObjectArray_Get(m, 1))) doubleValue]]);
      [plotGeoList_ addWithId:normalOverlay_];
    }
  }
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideAllGeosFromViews(self);
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideToolTips(self);
}

- (OrgGeogebraCommonKernelGeosGeoElement *)createGeoFromStringWithNSString:(NSString *)text
                                                               withBoolean:(jboolean)suppressLabelCreation {
  return OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(self, text, suppressLabelCreation);
}

- (void)hideAllGeosFromViews {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideAllGeosFromViews(self);
}

- (void)hideGeoFromViewsWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideGeoFromViewsWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
}

- (void)hideToolTips {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideToolTips(self);
}

- (OrgGeogebraCommonKernelAlgosAlgoPolyLine *)createStepFunctionWithOrgGeogebraCommonKernelGeosGeoList:(OrgGeogebraCommonKernelGeosGeoList *)xList
                                                                withOrgGeogebraCommonKernelGeosGeoList:(OrgGeogebraCommonKernelGeosGeoList *)probList {
  IOSDoubleArray *xCoords = [IOSDoubleArray arrayWithLength:[((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(xList)) size]];
  IOSDoubleArray *yCoords = [IOSDoubleArray arrayWithLength:[((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(probList)) size]];
  jint n = yCoords->size_;
  for (jint i = 0; i < n; i++) {
    *IOSDoubleArray_GetRef(xCoords, i) = [((OrgGeogebraCommonKernelGeosGeoNumeric *) nil_chk(((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast([xList getWithInt:i], [OrgGeogebraCommonKernelGeosGeoNumeric class])))) getDouble];
    *IOSDoubleArray_GetRef(yCoords, i) = [((OrgGeogebraCommonKernelGeosGeoNumeric *) nil_chk(((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast([probList getWithInt:i], [OrgGeogebraCommonKernelGeosGeoNumeric class])))) getDouble];
  }
  IOSObjectArray *points = [IOSObjectArray arrayWithLength:2 * n - 1 type:OrgGeogebraCommonKernelGeosGeoPoint_class_()];
  jboolean suppressLabelCreation = [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons_)) isSuppressLabelsActive];
  [cons_ setSuppressLabelCreationWithBoolean:YES];
  IOSObjectArray_SetAndConsume(points, 0, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_(cons_, nil, IOSDoubleArray_Get(xCoords, 0), IOSDoubleArray_Get(yCoords, 0), 1.0));
  for (jint i = 1; i < n; i++) {
    IOSObjectArray_SetAndConsume(points, 2 * i - 1, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_(cons_, nil, IOSDoubleArray_Get(xCoords, i), IOSDoubleArray_Get(yCoords, i - 1), 1.0));
    IOSObjectArray_SetAndConsume(points, 2 * i, new_OrgGeogebraCommonKernelGeosGeoPoint_initWithOrgGeogebraCommonKernelConstruction_withNSString_withDouble_withDouble_withDouble_(cons_, nil, IOSDoubleArray_Get(xCoords, i), IOSDoubleArray_Get(yCoords, i), 1.0));
  }
  [cons_ setSuppressLabelCreationWithBoolean:suppressLabelCreation];
  OrgGeogebraCommonKernelAlgosAlgoPolyLine *polyLine = [new_OrgGeogebraCommonKernelAlgosAlgoPolyLine_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelKernelNDGeoPointNDArray_withBoolean_(cons_, points, NO) autorelease];
  return polyLine;
}

- (OrgGeogebraCommonKernelGeosGeoElement *)createNormalCurveOverlayWithDouble:(jdouble)mean
                                                                   withDouble:(jdouble)sigma {
  OrgGeogebraCommonKernelStatisticsAlgoNormalDF *algo = [new_OrgGeogebraCommonKernelStatisticsAlgoNormalDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(cons_, [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, mean) autorelease], [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(cons_, sigma) autorelease], [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(cons_, isCumulative__) autorelease]) autorelease];
  [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algo];
  OrgGeogebraCommonKernelGeosGeoElement *geo = [algo getResult];
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) setObjColorWithOrgGeogebraCommonAwtGColor:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_NORMALOVERLAY_];
  [geo setLineThicknessWithInt:OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_thicknessCurve - 1];
  [geo setEuclidianVisibleWithBoolean:YES];
  [geo setFixedWithBoolean:YES];
  [geo setSelectionAllowedWithBoolean:NO];
  return geo;
}

- (IOSDoubleArray *)getPlotDimensions {
  return [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) getPlotDimensionsWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_ withDoubleArray:parameters_ withOrgGeogebraCommonKernelGeosGeoElement:pdfCurve_ == nil ? densityCurve_ : pdfCurve_ withBoolean:isCumulative__];
}

- (NSString *)formatWithDouble:(jdouble)x {
  OrgGeogebraCommonKernelStringTemplate *highPrecision;
  if (printDecimals_ >= 0) {
    jint d = printDecimals_ < 4 ? 4 : printDecimals_;
    highPrecision = OrgGeogebraCommonKernelStringTemplate_printDecimalsWithOrgGeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_withInt_withBoolean_(OrgGeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_get_GEOGEBRA(), d, NO);
  }
  else {
    highPrecision = OrgGeogebraCommonKernelStringTemplate_printFiguresWithOrgGeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_withInt_withBoolean_(OrgGeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_get_GEOGEBRA(), printFigures_, NO);
  }
  NSString *result = [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) formatWithDouble:x withOrgGeogebraCommonKernelStringTemplate:highPrecision];
  return result;
}

- (void)updatePlotSettings {
  jdouble xMin, xMax, yMin, yMax;
  IOSDoubleArray *d = [self getPlotDimensions];
  xMin = IOSDoubleArray_Get(nil_chk(d), 0);
  xMax = IOSDoubleArray_Get(d, 1);
  yMin = IOSDoubleArray_Get(d, 2);
  yMax = IOSDoubleArray_Get(d, 3);
  if (plotSettings_ == nil) OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_setAndConsume_plotSettings_(self, new_OrgGeogebraCommonGuiViewDataPlotSettings_init());
  ((OrgGeogebraCommonGuiViewDataPlotSettings *) nil_chk(plotSettings_))->xMin_ = xMin;
  plotSettings_->xMax_ = xMax;
  plotSettings_->yMin_ = yMin;
  plotSettings_->yMax_ = yMax;
  plotSettings_->showYAxis_ = [self isCumulative];
  *IOSBooleanArray_GetRef(nil_chk(plotSettings_->isEdgeAxis_), 0) = NO;
  *IOSBooleanArray_GetRef(plotSettings_->isEdgeAxis_, 1) = YES;
  plotSettings_->forceXAxisBuffer_ = YES;
  if ([((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) isDiscreteWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_]) {
    plotSettings_->pointCaptureStyle_ = OrgGeogebraCommonPluginEuclidianStyleConstants_POINT_CAPTURING_ON_GRID;
    *IOSDoubleArray_GetRef(nil_chk(plotSettings_->gridInterval_), 0) = 1;
    plotSettings_->gridIntervalAuto_ = NO;
    plotSettings_->xAxesIntervalAuto_ = YES;
  }
  else {
    plotSettings_->pointCaptureStyle_ = OrgGeogebraCommonPluginEuclidianStyleConstants_POINT_CAPTURING_OFF;
    plotSettings_->xAxesIntervalAuto_ = YES;
    [self plotPanelUpdateSettingsWithOrgGeogebraCommonGuiViewDataPlotSettings:plotSettings_];
  }
  [self plotPanelUpdateSettingsWithOrgGeogebraCommonGuiViewDataPlotSettings:plotSettings_];
}

- (void)plotPanelUpdateSettingsWithOrgGeogebraCommonGuiViewDataPlotSettings:(OrgGeogebraCommonGuiViewDataPlotSettings *)settings {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)setXAxisPoints {
  isSettingAxisPoints_ = YES;
  [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(lowPoint_)) setCoordsWithDouble:[self getLow] withDouble:0.0 withDouble:1.0];
  [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(highPoint_)) setCoordsWithDouble:[self getHigh] withDouble:0.0 withDouble:1.0];
  [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(plotPanel_)) repaint];
  OrgGeogebraCommonKernelGeosGeoElement_updateCascadeWithJavaUtilArrayList_withJavaUtilTreeSet_withBoolean_(pointList_, OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_getTempSet(self), NO);
  [((JavaUtilTreeSet *) nil_chk(tempSet_)) clear];
  if ([((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) isDiscreteWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_]) [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityTable *) nil_chk(table_)) setSelectionByRowValueWithInt:J2ObjCFpToInt([self getLow]) withInt:J2ObjCFpToInt([self getHigh])];
  isSettingAxisPoints_ = NO;
}

- (void)removeGeos {
  if (pointList_ != nil) [pointList_ clear];
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_clearPlotGeoList(self);
  [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(plotPanel_)) clearView];
}

- (void)createDiscreteLists {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createDiscreteLists(self);
}

- (void)clearPlotGeoList {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_clearPlotGeoList(self);
}

- (JavaUtilTreeSet *)getTempSet {
  return OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_getTempSet(self);
}

- (void)exportGeosToEVWithInt:(jint)euclidianViewID {
  [((OrgGeogebraCommonMainApp *) nil_chk(app_)) setWaitCursor];
  JavaUtilArrayList *newGeoList = [new_JavaUtilArrayList_init() autorelease];
  NSString *expr;
  @try {
    [app_ storeUndoInfo];
    expr = JreStrcat("$$C", @"Point[", [((OrgGeogebraCommonMainLocalization *) nil_chk(loc_)) getPlainWithNSString:@"xAxis"], ']');
    OrgGeogebraCommonKernelGeosGeoPoint *lowPointCopy = (OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(self, expr, NO), [OrgGeogebraCommonKernelGeosGeoPoint class]);
    [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(lowPointCopy)) setVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:lowPoint_];
    [lowPointCopy setLabelVisibleWithBoolean:NO];
    [lowPointCopy setCoordsWithDouble:[self getLow] withDouble:0 withDouble:1];
    [lowPointCopy setLabelWithNSString:nil];
    [newGeoList addWithId:lowPointCopy];
    OrgGeogebraCommonKernelGeosGeoPoint *highPointCopy = (OrgGeogebraCommonKernelGeosGeoPoint *) check_class_cast(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(self, expr, NO), [OrgGeogebraCommonKernelGeosGeoPoint class]);
    [((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(highPointCopy)) setVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:lowPoint_];
    [highPointCopy setLabelVisibleWithBoolean:NO];
    [highPointCopy setCoordsWithDouble:[self getHigh] withDouble:0 withDouble:1];
    [highPointCopy setLabelWithNSString:nil];
    [newGeoList addWithId:highPointCopy];
    OrgGeogebraCommonKernelStringTemplate *tpl = OrgGeogebraCommonKernelStringTemplate_get_maxPrecision_();
    if ([((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) isDiscreteWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_]) {
      OrgGeogebraCommonKernelGeosGeoElement *discreteProbListCopy = [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(discreteProbList_)) copy__];
      [newGeoList addWithId:discreteProbListCopy];
      OrgGeogebraCommonKernelGeosGeoElement *discreteValueListCopy = [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(discreteValueList_)) copy__];
      [newGeoList addWithId:discreteValueList_];
      if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_LINE) {
        expr = JreStrcat("$$C$$", @"BarChart[", [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteValueListCopy)) getLabelWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_maxPrecision_()], ',', [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteProbListCopy)) getLabelWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_maxPrecision_()], @",0]");
      }
      else if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_BAR) {
        expr = JreStrcat("$$C$$", @"BarChart[", [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteValueListCopy)) getLabelWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_maxPrecision_()], ',', [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteProbListCopy)) getLabelWithOrgGeogebraCommonKernelStringTemplate:OrgGeogebraCommonKernelStringTemplate_get_maxPrecision_()], @",1]");
      }
      else if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_STEP) {
      }
      OrgGeogebraCommonKernelGeosGeoElement *discreteGraphCopy = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(self, expr, NO);
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteGraphCopy)) setLabelWithNSString:nil];
      [discreteGraphCopy setVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:discreteGraph_];
      [newGeoList addWithId:discreteGraphCopy];
      jdouble offset = 1 - [((OrgGeogebraCommonKernelGeosGeoNumeric *) nil_chk(((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast([discreteValueList_ getWithInt:0], [OrgGeogebraCommonKernelGeosGeoNumeric class])))) getDouble] + 0.5;
      expr = JreStrcat("$$$$$D$$$DC", @"Take[", [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteProbListCopy)) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @", x(", [lowPointCopy getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @")+", offset, @", x(", [highPointCopy getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @")+", offset, ']');
      OrgGeogebraCommonKernelGeosGeoElement *intervalProbList = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(self, expr, NO);
      [newGeoList addWithId:intervalProbList];
      expr = JreStrcat("$$$$$D$$$DC", @"Take[", [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteValueListCopy)) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @", x(", [lowPointCopy getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @")+", offset, @", x(", [highPointCopy getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @")+", offset, ']');
      OrgGeogebraCommonKernelGeosGeoElement *intervalValueList = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(self, expr, NO);
      [newGeoList addWithId:intervalValueList];
      if (graphType_ == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_LINE) expr = JreStrcat("$$C$$", @"BarChart[", [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(intervalValueList)) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], ',', [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(intervalProbList)) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @",0]");
      else expr = JreStrcat("$$C$$", @"BarChart[", [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(intervalValueList)) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], ',', [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(intervalProbList)) getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @",1]");
      OrgGeogebraCommonKernelGeosGeoElement *discreteIntervalGraphCopy = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(self, expr, NO);
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(discreteIntervalGraphCopy)) setLabelWithNSString:nil];
      [discreteIntervalGraphCopy setVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:discreteIntervalGraph_];
      [newGeoList addWithId:discreteIntervalGraphCopy];
    }
    else {
      OrgGeogebraCommonKernelGeosGeoElement *densityCurveCopy = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(densityCurve_)) copyInternalWithOrgGeogebraCommonKernelConstruction:cons_];
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(densityCurveCopy)) setLabelWithNSString:nil];
      [densityCurveCopy setVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:densityCurve_];
      [newGeoList addWithId:densityCurveCopy];
      if (!isCumulative__) {
        expr = JreStrcat("$$$$$$$", @"Integral[", [densityCurveCopy getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @", x(", [lowPointCopy getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @"), x(", [highPointCopy getLabelWithOrgGeogebraCommonKernelStringTemplate:tpl], @") , true ]");
        OrgGeogebraCommonKernelGeosGeoElement *integralCopy = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(self, expr, NO);
        [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(integralCopy)) setVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:integral_];
        [integralCopy setLabelWithNSString:nil];
        [newGeoList addWithId:integralCopy];
      }
    }
    if (showNormalOverlay_) {
      OrgGeogebraCommonKernelGeosGeoElement *normalOverlayCopy = [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(normalOverlay_)) copyInternalWithOrgGeogebraCommonKernelConstruction:cons_];
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(normalOverlayCopy)) setLabelWithNSString:nil];
      [normalOverlayCopy setVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:normalOverlay_];
      [newGeoList addWithId:normalOverlayCopy];
    }
    for (OrgGeogebraCommonKernelGeosGeoElement * __strong geo in newGeoList) {
      [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) setAuxiliaryObjectWithBoolean:NO];
      if (euclidianViewID == OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN) {
        [geo addViewWithInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN];
        [geo removeViewWithInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN2];
        [geo update];
      }
      else if (euclidianViewID == OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN2) {
        [geo addViewWithInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN2];
        [geo removeViewWithInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN];
        [geo update];
      }
    }
    OrgGeogebraCommonEuclidianEuclidianView *ev = (OrgGeogebraCommonEuclidianEuclidianView *) check_class_cast([app_ getViewWithInt:euclidianViewID], [OrgGeogebraCommonEuclidianEuclidianView class]);
    [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(ev)) setRealWorldCoordSystemWithDouble:((OrgGeogebraCommonGuiViewDataPlotSettings *) nil_chk(plotSettings_))->xMin_ withDouble:plotSettings_->xMax_ withDouble:plotSettings_->yMin_ withDouble:plotSettings_->yMax_];
    [ev setAutomaticAxesNumberingDistanceWithBoolean:plotSettings_->xAxesIntervalAuto_ withInt:0];
    [ev setAutomaticAxesNumberingDistanceWithBoolean:plotSettings_->yAxesIntervalAuto_ withInt:1];
    if (!plotSettings_->xAxesIntervalAuto_) {
      [ev setAxesNumberingDistanceWithDouble:plotSettings_->xAxesInterval_ withInt:0];
    }
    if (!plotSettings_->yAxesIntervalAuto_) {
      [ev setAxesNumberingDistanceWithDouble:plotSettings_->yAxesInterval_ withInt:1];
    }
    [ev updateBackground];
    [newGeoList clear];
  }
  @catch (JavaLangException *e) {
    [((JavaLangException *) nil_chk(e)) printStackTrace];
    [app_ setDefaultCursor];
  }
  [app_ setDefaultCursor];
}

- (jint)getViewID {
  return OrgGeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR;
}

- (void)settingsChangedWithOrgGeogebraCommonMainSettingsAbstractSettings:(OrgGeogebraCommonMainSettingsAbstractSettings *)settings {
  OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings *pcSettings = (OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings *) check_class_cast(settings, [OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings class]);
  [self setProbabilityCalculatorWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:[((OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings *) nil_chk(pcSettings)) getDistributionType] withDoubleArray:[pcSettings getParameters] withBoolean:[pcSettings isCumulative]];
  if ([pcSettings isIntervalSet]) {
    self->probMode_ = [pcSettings getProbMode];
    [self setIntervalWithDouble:[pcSettings getLow] withDouble:[pcSettings getHigh]];
  }
}

- (void)setIntervalWithDouble:(jdouble)low2
                   withDouble:(jdouble)high2 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)addWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
}

- (void)removeWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
}

- (void)renameWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
}

- (void)updateWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  if (!isSettingAxisPoints_ && !isIniting_) {
    if ([((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isEqual:lowPoint_]) {
      if ([self isValidIntervalWithInt:probMode_ withDouble:[((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(lowPoint_)) getInhomX] withDouble:[self getHigh]]) {
        [self setLowWithDouble:[lowPoint_ getInhomX]];
        [self updateIntervalProbability];
        [self updateGUI];
        if ([((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) isDiscreteWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_]) [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityTable *) nil_chk(table_)) setSelectionByRowValueWithInt:J2ObjCFpToInt([self getLow]) withInt:J2ObjCFpToInt([self getHigh])];
      }
      else {
        [self setXAxisPoints];
      }
    }
    if ([geo isEqual:highPoint_]) {
      if ([self isValidIntervalWithInt:probMode_ withDouble:[self getLow] withDouble:[((OrgGeogebraCommonKernelGeosGeoPoint *) nil_chk(highPoint_)) getInhomX]]) {
        [self setHighWithDouble:[highPoint_ getInhomX]];
        [self updateIntervalProbability];
        [self updateGUI];
        if ([((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) isDiscreteWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_]) [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityTable *) nil_chk(table_)) setSelectionByRowValueWithInt:J2ObjCFpToInt([self getLow]) withInt:J2ObjCFpToInt([self getHigh])];
      }
      else {
        [self setXAxisPoints];
      }
    }
    OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_updateRounding(self);
  }
}

- (jdouble)intervalProbability {
  return [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) intervalProbabilityWithDouble:[self getLow] withDouble:[self getHigh] withOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_ withDoubleArray:parameters_ withInt:probMode_];
}

- (jdouble)inverseProbabilityWithDouble:(jdouble)prob {
  return [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) inverseProbabilityWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_ withDouble:prob withDoubleArray:parameters_];
}

- (void)updateIntervalProbability {
  probability_ = [self intervalProbability];
  if ([self probmanagerIsDiscrete]) [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(self->discreteIntervalGraph_)) updateCascade];
  else if (hasIntegral_) [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(self->integral_)) updateCascade];
}

- (jboolean)isValidIntervalWithInt:(jint)probMode
                        withDouble:(jdouble)xLow
                        withDouble:(jdouble)xHigh {
  if (probMode == OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_PROB_INTERVAL && xHigh < xLow) return NO;
  if ([((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) isDiscreteWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_] && (JavaLangMath_floorWithDouble_(xLow) != xLow || JavaLangMath_floorWithDouble_(xHigh) != xHigh)) {
    return NO;
  }
  jboolean isValid = YES;
  switch ([selectedDist_ ordinal]) {
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_BINOMIAL:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_HYPERGEOMETRIC:
    isValid = (xLow >= [self getDiscreteXMin] && xHigh <= [self getDiscreteXMax]);
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_POISSON:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_PASCAL:
    isValid = (xLow >= [self getDiscreteXMin]);
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_CHISQUARE:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_EXPONENTIAL:
    if (probMode != OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_PROB_LEFT) isValid = (xLow >= 0);
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_F:
    if (probMode != OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_PROB_LEFT) isValid = (xLow > 0);
    break;
  }
  return isValid;
}

- (jboolean)isValidParameterWithDouble:(jdouble)parameter
                               withInt:(jint)index {
  IOSBooleanArray *isValid = [IOSBooleanArray arrayWithBooleans:(jboolean[]){ YES, YES, YES } count:3];
  switch ([selectedDist_ ordinal]) {
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_F:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_STUDENT:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_EXPONENTIAL:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_WEIBULL:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_POISSON:
    if (index == 0) {
      *IOSBooleanArray_GetRef(isValid, 0) = (parameter > 0);
    }
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_CAUCHY:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_LOGISTIC:
    if (index == 1) {
      *IOSBooleanArray_GetRef(isValid, 1) = (index == 1 && parameter > 0);
    }
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_CHISQUARE:
    if (index == 0) {
      *IOSBooleanArray_GetRef(isValid, 0) = (JavaLangMath_floorWithDouble_(parameter) == parameter && parameter >= 1);
    }
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_BINOMIAL:
    if (index == 0) {
      *IOSBooleanArray_GetRef(isValid, 0) = (JavaLangMath_floorWithDouble_(parameter) == parameter && parameter >= 0);
    }
    else if (index == 1) {
      *IOSBooleanArray_GetRef(isValid, 1) = (parameter >= 0 && parameter <= 1);
    }
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_PASCAL:
    if (index == 0) {
      *IOSBooleanArray_GetRef(isValid, 0) = (JavaLangMath_floorWithDouble_(parameter) == parameter && parameter >= 1);
    }
    else if (index == 1) {
      *IOSBooleanArray_GetRef(isValid, 1) = (index == 1 && parameter >= 0 && parameter <= 1);
    }
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_HYPERGEOMETRIC:
    if (index == 0) {
      *IOSBooleanArray_GetRef(isValid, 0) = (index == 0 && JavaLangMath_floorWithDouble_(parameter) == parameter && parameter >= 1);
    }
    else if (index == 1) {
      *IOSBooleanArray_GetRef(isValid, 1) = (index == 1 && JavaLangMath_floorWithDouble_(parameter) == parameter && parameter >= 0 && parameter <= IOSDoubleArray_Get(nil_chk(parameters_), 0));
    }
    else if (index == 2) {
      *IOSBooleanArray_GetRef(isValid, 2) = (index == 2 && JavaLangMath_floorWithDouble_(parameter) == parameter && parameter >= 1 && parameter <= IOSDoubleArray_Get(nil_chk(parameters_), 0));
    }
    break;
  }
  return IOSBooleanArray_Get(isValid, 0) && IOSBooleanArray_Get(isValid, 1) && IOSBooleanArray_Get(isValid, 2);
}

- (void)updateRounding {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_updateRounding(self);
}

- (void)updateDiscreteTable {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)updateGUI {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (jboolean)probmanagerIsDiscrete {
  return [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) isDiscreteWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_];
}

- (IOSIntArray *)generateFirstXLastXCommon {
  IOSIntArray *firstXLastX = [IOSIntArray arrayWithLength:2];
  if (discreteValueList_ == nil) {
    OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createDiscreteLists(self);
  }
  *IOSIntArray_GetRef(firstXLastX, 0) = J2ObjCFpToInt([((OrgGeogebraCommonKernelGeosGeoNumeric *) nil_chk(((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast([((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(discreteValueList_)) getWithInt:0], [OrgGeogebraCommonKernelGeosGeoNumeric class])))) getDouble]);
  *IOSIntArray_GetRef(firstXLastX, 1) = J2ObjCFpToInt([((OrgGeogebraCommonKernelGeosGeoNumeric *) nil_chk(((OrgGeogebraCommonKernelGeosGeoNumeric *) check_class_cast([discreteValueList_ getWithInt:[discreteValueList_ size] - 1], [OrgGeogebraCommonKernelGeosGeoNumeric class])))) getDouble]);
  return firstXLastX;
}

- (void)updateVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
  [self updateWithOrgGeogebraCommonKernelGeosGeoElement:geo];
}

- (void)attachView {
  [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) attachWithOrgGeogebraCommonKernelView:self];
}

- (void)detachView {
  [self removeGeos];
  [((OrgGeogebraCommonKernelKernel *) nil_chk(kernel_)) detachWithOrgGeogebraCommonKernelView:self];
}

- (void)updateAuxiliaryObjectWithOrgGeogebraCommonKernelGeosGeoElement:(OrgGeogebraCommonKernelGeosGeoElement *)geo {
}

- (void)repaintView {
}

- (void)reset {
}

- (void)clearView {
}

- (void)setModeWithInt:(jint)mode
withOrgGeogebraCommonKernelModeSetterEnum:(OrgGeogebraCommonKernelModeSetterEnum *)m {
}

- (jboolean)hasFocus {
  return NO;
}

- (jboolean)isShowing {
  return [((OrgGeogebraCommonMainApp *) nil_chk(app_)) showViewWithInt:OrgGeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR];
}

- (jboolean)doRemoveFromConstruction {
  return removeFromConstruction_;
}

- (void)setRemoveFromConstructionWithBoolean:(jboolean)removeFromConstruction {
  self->removeFromConstruction_ = removeFromConstruction;
}

- (void)removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:(OrgGeogebraCommonKernelAlgosConstructionElement *)ce {
  if (removeFromConstruction_) [((OrgGeogebraCommonKernelConstruction *) nil_chk(cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:ce];
}

- (void)removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement:(OrgGeogebraCommonKernelAlgosAlgoElement *)algo {
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement_(self, algo);
}

- (OrgGeogebraCommonKernelGeosGeoFunction *)buildDensityCurveExpressionWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:(OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum *)type
                                                                                                                                   withBoolean:(jboolean)cumulative {
  return OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_buildDensityCurveExpressionWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_withBoolean_(self, type, cumulative);
}

- (void)getXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb {
  if (selectedDist_ == nil) return;
  [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"<probabilityCalculator>\n"];
  [sb appendWithNSString:@"\t<distribution"];
  [sb appendWithNSString:@" type=\""];
  [sb appendWithInt:[((OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum *) nil_chk(selectedDist_)) ordinal]];
  [sb appendWithNSString:@"\""];
  [sb appendWithNSString:@" isCumulative=\""];
  [sb appendWithNSString:isCumulative__ ? @"true" : @"false"];
  [sb appendWithNSString:@"\""];
  [sb appendWithNSString:@" parameters=\""];
  for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(parameters_))->size_; i++) {
    [sb appendWithDouble:IOSDoubleArray_Get(parameters_, i)];
    [sb appendWithNSString:@","];
  }
  [sb deleteCharAtWithInt:[sb lastIndexOfWithNSString:@","]];
  [sb appendWithNSString:@"\""];
  [sb appendWithNSString:@"/>\n"];
  [sb appendWithNSString:@"\t<interval"];
  [sb appendWithNSString:@" mode=\""];
  [sb appendWithInt:self->probMode_];
  [sb appendWithNSString:@"\""];
  [sb appendWithNSString:@" low=\""];
  [sb appendWithDouble:[self getLow]];
  [sb appendWithNSString:@"\""];
  [sb appendWithNSString:@" high=\""];
  [sb appendWithDouble:[self getHigh]];
  [sb appendWithNSString:@"\""];
  [sb appendWithNSString:@"/>\n"];
  [sb appendWithNSString:@"</probabilityCalculator>\n"];
}

- (void)startBatchUpdate {
}

- (void)endBatchUpdate {
}

- (NSString *)getMeanSigma {
  IOSObjectArray *val = [((OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager *) nil_chk(probManager_)) getDistributionMeasuresWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:selectedDist_ withDoubleArray:parameters_];
  NSString *mean = IOSObjectArray_Get(nil_chk(val), 0) == nil ? @"?" : [self formatWithDouble:[((JavaLangDouble *) nil_chk(IOSObjectArray_Get(val, 0))) doubleValue]];
  NSString *sigma = IOSObjectArray_Get(val, 1) == nil ? @"?" : [self formatWithDouble:[((JavaLangDouble *) nil_chk(IOSObjectArray_Get(val, 1))) doubleValue]];
  NSString *meanSigmaStr = JreStrcat("C$$$C$$", OrgGeogebraCommonUtilUnicode_mu, @" = ", mean, @"   ", OrgGeogebraCommonUtilUnicode_sigma, @" = ", sigma);
  return meanSigmaStr;
}

- (void)setHighWithDouble:(jdouble)high {
  self->high_ = high;
}

- (void)setLowWithDouble:(jdouble)low {
  self->low_ = low;
}

- (jboolean)isOverlayDefined {
  return !((selectedDist_ == OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_get_CAUCHY()) || (selectedDist_ == OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_get_F() && IOSDoubleArray_Get(nil_chk(parameters_), 1) < 4));
}

- (void)dealloc {
  RELEASE_(app_);
  RELEASE_(kernel_);
  RELEASE_(loc_);
  RELEASE_(cons_);
  RELEASE_(plotPanel_);
  RELEASE_(table_);
  RELEASE_(selectedDist_);
  RELEASE_(parameterLabels_);
  RELEASE_(parameters_);
  RELEASE_(distributionMap_);
  RELEASE_(reverseDistributionMap_);
  RELEASE_(plotGeoList_);
  RELEASE_(lowPoint_);
  RELEASE_(highPoint_);
  RELEASE_(curvePoint_);
  RELEASE_(densityCurve_);
  RELEASE_(integral_);
  RELEASE_(ySegment_);
  RELEASE_(xSegment_);
  RELEASE_(discreteGraph_);
  RELEASE_(discreteIntervalGraph_);
  RELEASE_(normalOverlay_);
  RELEASE_(discreteValueList_);
  RELEASE_(discreteProbList_);
  RELEASE_(intervalProbList_);
  RELEASE_(intervalValueList_);
  RELEASE_(pointList_);
  RELEASE_(plotSettings_);
  RELEASE_(probManager_);
  RELEASE_(pdfCurve_);
  RELEASE_(tempSet_);
  [super dealloc];
}

+ (void)initialize {
  if (self == [OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView class]) {
    JreStrongAssign(&OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_, nil, OrgGeogebraCommonMainGeoGebraColorConstants_get_DARKBLUE_());
    JreStrongAssign(&OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_NORMALOVERLAY_, nil, OrgGeogebraCommonMainGeoGebraColorConstants_get_RED_());
    JreStrongAssign(&OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_FILL_, nil, OrgGeogebraCommonMainGeoGebraColorConstants_get_BLUE_());
    JreStrongAssign(&OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_POINT_, nil, OrgGeogebraCommonAwtGColor_get_BLACK_());
    J2OBJC_SET_INITIALIZED(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgGeogebraCommonMainApp:", "ProbabilityCalculatorView", NULL, 0x1, NULL, NULL },
    { "setLabelArrays", NULL, "V", 0x4, NULL, NULL },
    { "getDiscreteXMax", NULL, "I", 0x1, NULL, NULL },
    { "getDiscreteXMin", NULL, "I", 0x1, NULL, NULL },
    { "setGraphTypeWithInt:", "setGraphType", "V", 0x1, NULL, NULL },
    { "getGraphType", NULL, "I", 0x1, NULL, NULL },
    { "getPrintDecimals", NULL, "I", 0x1, NULL, NULL },
    { "getPrintFigures", NULL, "I", 0x1, NULL, NULL },
    { "setProbabilityCalculatorWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:withDoubleArray:withBoolean:", "setProbabilityCalculator", "V", 0x1, NULL, NULL },
    { "getPlotSettings", NULL, "Lorg.geogebra.common.gui.view.data.PlotSettings;", 0x1, NULL, NULL },
    { "setPlotSettingsWithOrgGeogebraCommonGuiViewDataPlotSettings:", "setPlotSettings", "V", 0x1, NULL, NULL },
    { "isShowNormalOverlay", NULL, "Z", 0x1, NULL, NULL },
    { "setShowNormalOverlayWithBoolean:", "setShowNormalOverlay", "V", 0x1, NULL, NULL },
    { "updateAll", NULL, "V", 0x401, NULL, NULL },
    { "getSelectedDist", NULL, "Lorg.geogebra.common.main.settings.ProbabilityCalculatorSettings$DIST;", 0x1, NULL, NULL },
    { "getLow", NULL, "D", 0x1, NULL, NULL },
    { "getHigh", NULL, "D", 0x1, NULL, NULL },
    { "getProbMode", NULL, "I", 0x1, NULL, NULL },
    { "isCumulative", NULL, "Z", 0x1, NULL, NULL },
    { "createGeoElements", NULL, "V", 0x4, NULL, NULL },
    { "createGeoFromStringWithNSString:withBoolean:", "createGeoFromString", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x2, NULL, NULL },
    { "hideAllGeosFromViews", NULL, "V", 0x2, NULL, NULL },
    { "hideGeoFromViewsWithOrgGeogebraCommonKernelGeosGeoElement:", "hideGeoFromViews", "V", 0x2, NULL, NULL },
    { "hideToolTips", NULL, "V", 0x2, NULL, NULL },
    { "createStepFunctionWithOrgGeogebraCommonKernelGeosGeoList:withOrgGeogebraCommonKernelGeosGeoList:", "createStepFunction", "Lorg.geogebra.common.kernel.algos.AlgoPolyLine;", 0x1, NULL, NULL },
    { "createNormalCurveOverlayWithDouble:withDouble:", "createNormalCurveOverlay", "Lorg.geogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "getPlotDimensions", NULL, "[D", 0x4, NULL, NULL },
    { "formatWithDouble:", "format", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "updatePlotSettings", NULL, "V", 0x1, NULL, NULL },
    { "plotPanelUpdateSettingsWithOrgGeogebraCommonGuiViewDataPlotSettings:", "plotPanelUpdateSettings", "V", 0x404, NULL, NULL },
    { "setXAxisPoints", NULL, "V", 0x1, NULL, NULL },
    { "removeGeos", NULL, "V", 0x1, NULL, NULL },
    { "createDiscreteLists", NULL, "V", 0x2, NULL, NULL },
    { "clearPlotGeoList", NULL, "V", 0x2, NULL, NULL },
    { "getTempSet", NULL, "Ljava.util.TreeSet;", 0x2, NULL, NULL },
    { "exportGeosToEVWithInt:", "exportGeosToEV", "V", 0x1, NULL, NULL },
    { "getViewID", NULL, "I", 0x1, NULL, NULL },
    { "settingsChangedWithOrgGeogebraCommonMainSettingsAbstractSettings:", "settingsChanged", "V", 0x1, NULL, NULL },
    { "setIntervalWithDouble:withDouble:", "setInterval", "V", 0x404, NULL, NULL },
    { "addWithOrgGeogebraCommonKernelGeosGeoElement:", "add", "V", 0x1, NULL, NULL },
    { "removeWithOrgGeogebraCommonKernelGeosGeoElement:", "remove", "V", 0x1, NULL, NULL },
    { "renameWithOrgGeogebraCommonKernelGeosGeoElement:", "rename", "V", 0x1, NULL, NULL },
    { "updateWithOrgGeogebraCommonKernelGeosGeoElement:", "update", "V", 0x1, NULL, NULL },
    { "intervalProbability", NULL, "D", 0x4, NULL, NULL },
    { "inverseProbabilityWithDouble:", "inverseProbability", "D", 0x4, NULL, NULL },
    { "updateIntervalProbability", NULL, "V", 0x4, NULL, NULL },
    { "isValidIntervalWithInt:withDouble:withDouble:", "isValidInterval", "Z", 0x4, NULL, NULL },
    { "isValidParameterWithDouble:withInt:", "isValidParameter", "Z", 0x4, NULL, NULL },
    { "updateRounding", NULL, "V", 0x2, NULL, NULL },
    { "updateDiscreteTable", NULL, "V", 0x404, NULL, NULL },
    { "updateGUI", NULL, "V", 0x404, NULL, NULL },
    { "probmanagerIsDiscrete", NULL, "Z", 0x4, NULL, NULL },
    { "generateFirstXLastXCommon", NULL, "[I", 0x4, NULL, NULL },
    { "updateVisualStyleWithOrgGeogebraCommonKernelGeosGeoElement:", "updateVisualStyle", "V", 0x11, NULL, NULL },
    { "attachView", NULL, "V", 0x1, NULL, NULL },
    { "detachView", NULL, "V", 0x1, NULL, NULL },
    { "updateAuxiliaryObjectWithOrgGeogebraCommonKernelGeosGeoElement:", "updateAuxiliaryObject", "V", 0x1, NULL, NULL },
    { "repaintView", NULL, "V", 0x1, NULL, NULL },
    { "reset", NULL, "V", 0x1, NULL, NULL },
    { "clearView", NULL, "V", 0x1, NULL, NULL },
    { "setModeWithInt:withOrgGeogebraCommonKernelModeSetterEnum:", "setMode", "V", 0x1, NULL, NULL },
    { "hasFocus", NULL, "Z", 0x1, NULL, NULL },
    { "isShowing", NULL, "Z", 0x1, NULL, NULL },
    { "doRemoveFromConstruction", NULL, "Z", 0x1, NULL, NULL },
    { "setRemoveFromConstructionWithBoolean:", "setRemoveFromConstruction", "V", 0x1, NULL, NULL },
    { "removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:", "removeFromConstructionList", "V", 0x2, NULL, NULL },
    { "removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement:", "removeFromAlgorithmList", "V", 0x2, NULL, NULL },
    { "buildDensityCurveExpressionWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:withBoolean:", "buildDensityCurveExpression", "Lorg.geogebra.common.kernel.geos.GeoFunction;", 0x2, NULL, NULL },
    { "getXMLWithJavaLangStringBuilder:", "getXML", "V", 0x1, NULL, NULL },
    { "startBatchUpdate", NULL, "V", 0x1, NULL, NULL },
    { "endBatchUpdate", NULL, "V", 0x1, NULL, NULL },
    { "getMeanSigma", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "setHighWithDouble:", "setHigh", "V", 0x4, NULL, NULL },
    { "setLowWithDouble:", "setLow", "V", 0x4, NULL, NULL },
    { "isOverlayDefined", NULL, "Z", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "app_", NULL, 0x4, "Lorg.geogebra.common.main.App;", NULL, NULL,  },
    { "kernel_", NULL, 0x4, "Lorg.geogebra.common.kernel.Kernel;", NULL, NULL,  },
    { "loc_", NULL, 0x4, "Lorg.geogebra.common.main.Localization;", NULL, NULL,  },
    { "cons_", NULL, 0x4, "Lorg.geogebra.common.kernel.Construction;", NULL, NULL,  },
    { "COLOR_PDF_", NULL, 0x1a, "Lorg.geogebra.common.awt.GColor;", &OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_, NULL,  },
    { "COLOR_NORMALOVERLAY_", NULL, 0x1a, "Lorg.geogebra.common.awt.GColor;", &OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_NORMALOVERLAY_, NULL,  },
    { "COLOR_PDF_FILL_", NULL, 0x1a, "Lorg.geogebra.common.awt.GColor;", &OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_PDF_FILL_, NULL,  },
    { "COLOR_POINT_", NULL, 0x1a, "Lorg.geogebra.common.awt.GColor;", &OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_COLOR_POINT_, NULL,  },
    { "defaultDividerSize_", NULL, 0x4, "I", NULL, NULL,  },
    { "plotPanel_", NULL, 0x1, "Lorg.geogebra.common.euclidian.EuclidianView;", NULL, NULL,  },
    { "table_", NULL, 0x4, "Lorg.geogebra.common.gui.view.probcalculator.ProbabilityTable;", NULL, NULL,  },
    { "hasIntegral_", NULL, 0x4, "Z", NULL, NULL,  },
    { "selectedDist_", NULL, 0x4, "Lorg.geogebra.common.main.settings.ProbabilityCalculatorSettings$DIST;", NULL, NULL,  },
    { "parameterLabels_", NULL, 0x4, "[[Ljava.lang.String;", NULL, NULL,  },
    { "maxParameterCount_", NULL, 0x1c, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_maxParameterCount },
    { "parameters_", NULL, 0x4, "[D", NULL, NULL,  },
    { "isCumulative__", "isCumulative", 0x4, "Z", NULL, NULL,  },
    { "distributionMap_", NULL, 0x4, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Lorg/geogebra/common/main/settings/ProbabilityCalculatorSettings$DIST;Ljava/lang/String;>;",  },
    { "reverseDistributionMap_", NULL, 0x4, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/String;Lorg/geogebra/common/main/settings/ProbabilityCalculatorSettings$DIST;>;",  },
    { "plotGeoList_", NULL, 0x4, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "lowPoint_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "highPoint_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "curvePoint_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "densityCurve_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "integral_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "ySegment_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "xSegment_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "discreteGraph_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "discreteIntervalGraph_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "normalOverlay_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "discreteValueList_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "discreteProbList_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "intervalProbList_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "intervalValueList_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "pointList_", NULL, 0x4, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lorg/geogebra/common/kernel/geos/GeoElement;>;",  },
    { "isIniting_", NULL, 0x4, "Z", NULL, NULL,  },
    { "isSettingAxisPoints_", NULL, 0x4, "Z", NULL, NULL,  },
    { "PROB_INTERVAL_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_PROB_INTERVAL },
    { "PROB_LEFT_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_PROB_LEFT },
    { "PROB_RIGHT_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_PROB_RIGHT },
    { "probMode_", NULL, 0x4, "I", NULL, NULL,  },
    { "low_", NULL, 0x2, "D", NULL, NULL,  },
    { "high_", NULL, 0x2, "D", NULL, NULL,  },
    { "probability_", NULL, 0x4, "D", NULL, NULL,  },
    { "printDecimals_", NULL, 0x4, "I", NULL, NULL,  },
    { "printFigures_", NULL, 0x4, "I", NULL, NULL,  },
    { "validProb_", NULL, 0x4, "Z", NULL, NULL,  },
    { "showProbGeos_", NULL, 0x4, "Z", NULL, NULL,  },
    { "showNormalOverlay_", NULL, 0x4, "Z", NULL, NULL,  },
    { "opacityIntegral_", NULL, 0x1c, "F", NULL, NULL, .constantValue.asFloat = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_opacityIntegral },
    { "opacityDiscrete_", NULL, 0x1c, "F", NULL, NULL, .constantValue.asFloat = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_opacityDiscrete },
    { "opacityDiscreteInterval_", NULL, 0x1c, "F", NULL, NULL, .constantValue.asFloat = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_opacityDiscreteInterval },
    { "thicknessCurve_", NULL, 0x1c, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_thicknessCurve },
    { "thicknessBarChart_", NULL, 0x1c, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_thicknessBarChart },
    { "removeFromConstruction_", NULL, 0x4, "Z", NULL, NULL,  },
    { "nearlyOne_", NULL, 0x1c, "D", NULL, NULL, .constantValue.asDouble = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_nearlyOne },
    { "GRAPH_BAR_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_BAR },
    { "GRAPH_LINE_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_LINE },
    { "GRAPH_STEP_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_STEP },
    { "graphTypePDF_", NULL, 0x4, "I", NULL, NULL,  },
    { "graphTypeCDF_", NULL, 0x4, "I", NULL, NULL,  },
    { "graphType_", NULL, 0x4, "I", NULL, NULL,  },
    { "plotSettings_", NULL, 0x4, "Lorg.geogebra.common.gui.view.data.PlotSettings;", NULL, NULL,  },
    { "probManager_", NULL, 0x4, "Lorg.geogebra.common.gui.view.probcalculator.ProbabilityManager;", NULL, NULL,  },
    { "pdfCurve_", NULL, 0x4, "Lorg.geogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "tempSet_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lorg/geogebra/common/kernel/algos/AlgoElement;>;",  },
  };
  static const J2ObjcClassInfo _OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView = { 2, "ProbabilityCalculatorView", "org.geogebra.common.gui.view.probcalculator", NULL, 0x401, 75, methods, 66, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView;
}

@end

void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_initWithOrgGeogebraCommonMainApp_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, OrgGeogebraCommonMainApp *app) {
  NSObject_init(self);
  self->hasIntegral_ = YES;
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_selectedDist_(self, OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_get_NORMAL());
  self->isCumulative__ = NO;
  self->isSettingAxisPoints_ = NO;
  self->probMode_ = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_PROB_INTERVAL;
  self->low_ = 0;
  self->high_ = 1;
  self->printDecimals_ = 4;
  self->printFigures_ = -1;
  self->showProbGeos_ = YES;
  self->showNormalOverlay_ = NO;
  self->removeFromConstruction_ = YES;
  self->graphTypePDF_ = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_BAR;
  self->graphTypeCDF_ = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_STEP;
  self->graphType_ = OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_GRAPH_BAR;
  self->isIniting_ = YES;
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_app_(self, app);
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_loc_(self, [((OrgGeogebraCommonMainApp *) nil_chk(app)) getLocalization]);
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_kernel_(self, [app getKernel]);
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_cons_(self, [((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getConstruction]);
  [((OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings *) nil_chk([((OrgGeogebraCommonMainSettingsSettings *) nil_chk([app getSettings])) getProbCalcSettings])) addListenerWithOrgGeogebraCommonMainSettingsSettingListener:self];
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_setAndConsume_probManager_(self, new_OrgGeogebraCommonGuiViewProbcalculatorProbabilityManager_initWithOrgGeogebraCommonMainApp_withOrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_(app, self));
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_setAndConsume_plotSettings_(self, new_OrgGeogebraCommonGuiViewDataPlotSettings_init());
  OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_setAndConsume_plotGeoList_(self, new_JavaUtilArrayList_init());
}

OrgGeogebraCommonKernelGeosGeoElement *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createGeoFromStringWithNSString_withBoolean_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, NSString *text, jboolean suppressLabelCreation) {
  @try {
    jboolean oldSuppressLabelMode = [((OrgGeogebraCommonKernelConstruction *) nil_chk(self->cons_)) isSuppressLabelsActive];
    if (suppressLabelCreation) [self->cons_ setSuppressLabelCreationWithBoolean:YES];
    jboolean oldEnableUndo = [self->cons_ isUndoEnabled];
    [self->cons_ setUndoEnabledWithBoolean:NO];
    IOSObjectArray *geos = [((OrgGeogebraCommonKernelCommandsAlgebraProcessor *) nil_chk([((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getAlgebraProcessor])) processAlgebraCommandNoExceptionsWithNSString:text withBoolean:NO];
    [self->cons_ setUndoEnabledWithBoolean:oldEnableUndo];
    if (suppressLabelCreation) [self->cons_ setSuppressLabelCreationWithBoolean:oldSuppressLabelMode];
    return IOSObjectArray_Get(nil_chk(geos), 0);
  }
  @catch (JavaLangException *e) {
    [((JavaLangException *) nil_chk(e)) printStackTrace];
    return nil;
  }
}

void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideAllGeosFromViews(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self) {
  for (OrgGeogebraCommonKernelGeosGeoElement * __strong geo in nil_chk(self->plotGeoList_)) {
    OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideGeoFromViewsWithOrgGeogebraCommonKernelGeosGeoElement_(self, geo);
  }
}

void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideGeoFromViewsWithOrgGeogebraCommonKernelGeosGeoElement_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, OrgGeogebraCommonKernelGeosGeoElement *geo) {
  [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) addViewWithInt:[((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk(self->plotPanel_)) getViewID]];
  [self->plotPanel_ addWithOrgGeogebraCommonKernelGeosGeoElement:geo];
  [geo removeViewWithInt:OrgGeogebraCommonMainApp_VIEW_EUCLIDIAN];
  [((OrgGeogebraCommonEuclidianEuclidianView *) nil_chk([((OrgGeogebraCommonMainApp *) nil_chk(self->app_)) getEuclidianView1])) removeWithOrgGeogebraCommonKernelGeosGeoElement:geo];
}

void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_hideToolTips(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self) {
  for (OrgGeogebraCommonKernelGeosGeoElement * __strong geo in nil_chk(self->plotGeoList_)) {
    [((OrgGeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) setTooltipModeWithInt:OrgGeogebraCommonKernelGeosGeoElement_TOOLTIP_OFF];
  }
}

void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_createDiscreteLists(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self) {
  OrgGeogebraCommonKernelArithmeticExpressionNode *nPlusOne;
  OrgGeogebraCommonKernelAlgosAlgoDependentNumber *plusOneAlgo;
  {
    OrgGeogebraCommonKernelGeosGeoNumeric *k;
    OrgGeogebraCommonKernelGeosGeoNumeric *k2;
    OrgGeogebraCommonKernelGeosGeoNumeric *nGeo;
    OrgGeogebraCommonKernelGeosGeoNumeric *nPlusOneGeo;
    OrgGeogebraCommonKernelGeosGeoNumeric *pGeo;
    OrgGeogebraCommonKernelAlgosAlgoSequence *algoSeq;
    OrgGeogebraCommonKernelAlgosAlgoListElement *algo;
    OrgGeogebraCommonKernelStatisticsAlgoBinomialDist *algo2;
    OrgGeogebraCommonKernelAlgosAlgoSequence *algoSeq2;
    OrgGeogebraCommonKernelStatisticsAlgoInversePascal *n2;
    OrgGeogebraCommonKernelGeosGeoElement *n2Geo;
    OrgGeogebraCommonKernelStatisticsAlgoPascal *ppascal;
    OrgGeogebraCommonKernelGeosGeoNumeric *meanGeo;
    OrgGeogebraCommonKernelStatisticsAlgoInversePoisson *maxSequenceValue;
    OrgGeogebraCommonKernelGeosGeoElement *maxDiscreteGeo;
    OrgGeogebraCommonKernelStatisticsAlgoPoisson *poisson;
    jdouble p;
    jdouble n;
    jdouble s;
    jdouble lowBound;
    jdouble highBound;
    jdouble length;
    OrgGeogebraCommonKernelGeosGeoNumeric *lowGeo;
    OrgGeogebraCommonKernelGeosGeoNumeric *highGeo;
    OrgGeogebraCommonKernelGeosGeoNumeric *lengthGeo;
    OrgGeogebraCommonKernelGeosGeoNumeric *sGeo;
    OrgGeogebraCommonKernelStatisticsAlgoHyperGeometric *hyperGeometric;
    switch ([self->selectedDist_ ordinal]) {
      case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_BINOMIAL:
      k = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self->cons_) autorelease];
      k2 = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self->cons_) autorelease];
      nGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, IOSDoubleArray_Get(nil_chk(self->parameters_), 0)) autorelease];
      nPlusOneGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, IOSDoubleArray_Get(self->parameters_, 0) + 1) autorelease];
      pGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, IOSDoubleArray_Get(self->parameters_, 1)) autorelease];
      algoSeq = [new_OrgGeogebraCommonKernelAlgosAlgoSequence_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, k2, k2, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 0.0) autorelease], nGeo, nil) autorelease];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteValueList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([algoSeq getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
      algo = [new_OrgGeogebraCommonKernelAlgosAlgoListElement_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, self->discreteValueList_, k) autorelease];
      [((OrgGeogebraCommonKernelConstruction *) nil_chk(self->cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algo];
      algo2 = [new_OrgGeogebraCommonKernelStatisticsAlgoBinomialDist_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelGeosGeoBoolean_(self->cons_, nGeo, pGeo, (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0), @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self->cons_, self->isCumulative__) autorelease]) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algo2];
      algoSeq2 = [new_OrgGeogebraCommonKernelAlgosAlgoSequence_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, IOSObjectArray_Get(nil_chk([algo2 getGeoElements]), 0), k, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 1.0) autorelease], nPlusOneGeo, nil) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoSeq2];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteProbList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([algoSeq2 getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
      break;
      case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_PASCAL:
      nGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, IOSDoubleArray_Get(nil_chk(self->parameters_), 0)) autorelease];
      pGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, IOSDoubleArray_Get(self->parameters_, 1)) autorelease];
      k = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self->cons_) autorelease];
      k2 = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self->cons_) autorelease];
      n2 = [new_OrgGeogebraCommonKernelStatisticsAlgoInversePascal_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, nGeo, pGeo, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_nearlyOne) autorelease]) autorelease];
      [((OrgGeogebraCommonKernelConstruction *) nil_chk(self->cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:n2];
      n2Geo = IOSObjectArray_Get(nil_chk([n2 getGeoElements]), 0);
      algoSeq = [new_OrgGeogebraCommonKernelAlgosAlgoSequence_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, k, k, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 0.0) autorelease], (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(n2Geo, @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), nil) autorelease];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement_(self, algoSeq);
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteValueList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([algoSeq getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
      algo = [new_OrgGeogebraCommonKernelAlgosAlgoListElement_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, self->discreteValueList_, k2) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algo];
      ppascal = [new_OrgGeogebraCommonKernelStatisticsAlgoPascal_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelGeosGeoBoolean_(self->cons_, nGeo, pGeo, (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0), @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self->cons_, self->isCumulative__) autorelease]) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:ppascal];
      nPlusOne = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(self->kernel_, n2Geo, OrgGeogebraCommonPluginOperationEnum_get_PLUS(), [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 1.0) autorelease]) autorelease];
      plusOneAlgo = [new_OrgGeogebraCommonKernelAlgosAlgoDependentNumber_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(self->cons_, nPlusOne, NO) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:plusOneAlgo];
      algoSeq2 = [new_OrgGeogebraCommonKernelAlgosAlgoSequence_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, IOSObjectArray_Get(nil_chk([ppascal getGeoElements]), 0), k2, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 1.0) autorelease], (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(IOSObjectArray_Get(nil_chk([plusOneAlgo getGeoElements]), 0), @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), nil) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoSeq2];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteProbList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([algoSeq2 getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
      break;
      case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_POISSON:
      meanGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, IOSDoubleArray_Get(nil_chk(self->parameters_), 0)) autorelease];
      k = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self->cons_) autorelease];
      k2 = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self->cons_) autorelease];
      maxSequenceValue = [new_OrgGeogebraCommonKernelStatisticsAlgoInversePoisson_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, meanGeo, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_nearlyOne) autorelease]) autorelease];
      [((OrgGeogebraCommonKernelConstruction *) nil_chk(self->cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:maxSequenceValue];
      maxDiscreteGeo = IOSObjectArray_Get(nil_chk([maxSequenceValue getGeoElements]), 0);
      algoSeq = [new_OrgGeogebraCommonKernelAlgosAlgoSequence_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, k, k, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 0.0) autorelease], (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(maxDiscreteGeo, @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), nil) autorelease];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement_(self, algoSeq);
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteValueList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([algoSeq getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
      algo = [new_OrgGeogebraCommonKernelAlgosAlgoListElement_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, self->discreteValueList_, k2) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algo];
      poisson = [new_OrgGeogebraCommonKernelStatisticsAlgoPoisson_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelGeosGeoBoolean_(self->cons_, meanGeo, (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0), @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self->cons_, self->isCumulative__) autorelease]) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:poisson];
      nPlusOne = [new_OrgGeogebraCommonKernelArithmeticExpressionNode_initWithOrgGeogebraCommonKernelKernel_withOrgGeogebraCommonKernelArithmeticExpressionValue_withOrgGeogebraCommonPluginOperationEnum_withOrgGeogebraCommonKernelArithmeticExpressionValue_(self->kernel_, maxDiscreteGeo, OrgGeogebraCommonPluginOperationEnum_get_PLUS(), [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 1.0) autorelease]) autorelease];
      plusOneAlgo = [new_OrgGeogebraCommonKernelAlgosAlgoDependentNumber_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticExpressionNode_withBoolean_(self->cons_, nPlusOne, NO) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:plusOneAlgo];
      algoSeq2 = [new_OrgGeogebraCommonKernelAlgosAlgoSequence_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, IOSObjectArray_Get(nil_chk([poisson getGeoElements]), 0), k2, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 1.0) autorelease], (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(IOSObjectArray_Get(nil_chk([plusOneAlgo getGeoElements]), 0), @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), nil) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoSeq2];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteProbList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([algoSeq2 getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
      break;
      case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_HYPERGEOMETRIC:
      p = IOSDoubleArray_Get(nil_chk(self->parameters_), 0);
      n = IOSDoubleArray_Get(self->parameters_, 1);
      s = IOSDoubleArray_Get(self->parameters_, 2);
      lowBound = JavaLangMath_maxWithDouble_withDouble_(0, n + s - p);
      highBound = JavaLangMath_minWithDouble_withDouble_(n, s);
      length = highBound - lowBound + 1;
      lowGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, lowBound) autorelease];
      highGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, highBound) autorelease];
      lengthGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, length) autorelease];
      pGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, p) autorelease];
      nGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, n) autorelease];
      sGeo = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_withDouble_(self->cons_, s) autorelease];
      k = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self->cons_) autorelease];
      k2 = [new_OrgGeogebraCommonKernelGeosGeoNumeric_initWithOrgGeogebraCommonKernelConstruction_(self->cons_) autorelease];
      algoSeq = [new_OrgGeogebraCommonKernelAlgosAlgoSequence_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, k, k, lowGeo, highGeo, nil) autorelease];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement_(self, algoSeq);
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteValueList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([algoSeq getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
      algo = [new_OrgGeogebraCommonKernelAlgosAlgoListElement_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoList_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, self->discreteValueList_, k2) autorelease];
      [((OrgGeogebraCommonKernelConstruction *) nil_chk(self->cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algo];
      hyperGeometric = [new_OrgGeogebraCommonKernelStatisticsAlgoHyperGeometric_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelGeosGeoBoolean_(self->cons_, pGeo, nGeo, sGeo, (id<OrgGeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0), @protocol(OrgGeogebraCommonKernelArithmeticNumberValue)), [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self->cons_, self->isCumulative__) autorelease]) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:hyperGeometric];
      algoSeq2 = [new_OrgGeogebraCommonKernelAlgosAlgoSequence_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelGeosGeoElement_withOrgGeogebraCommonKernelGeosGeoNumeric_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_(self->cons_, IOSObjectArray_Get(nil_chk([hyperGeometric getGeoElements]), 0), k2, [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, 1.0) autorelease], lengthGeo, nil) autorelease];
      [self->cons_ removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:algoSeq2];
      OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_set_discreteProbList_(self, (OrgGeogebraCommonKernelGeosGeoList *) check_class_cast(IOSObjectArray_Get(nil_chk([algoSeq2 getGeoElements]), 0), [OrgGeogebraCommonKernelGeosGeoList class]));
      break;
    }
  }
  [((JavaUtilArrayList *) nil_chk(self->plotGeoList_)) addWithId:self->discreteProbList_];
  [((OrgGeogebraCommonKernelGeosGeoList *) nil_chk(self->discreteProbList_)) setEuclidianVisibleWithBoolean:YES];
  [self->discreteProbList_ setAuxiliaryObjectWithBoolean:YES];
  [self->discreteProbList_ setLabelVisibleWithBoolean:NO];
  [self->discreteProbList_ setFixedWithBoolean:YES];
  [self->discreteProbList_ setSelectionAllowedWithBoolean:NO];
  return;
}

void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_clearPlotGeoList(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self) {
  for (OrgGeogebraCommonKernelGeosGeoElement * __strong geo in nil_chk(self->plotGeoList_)) {
    if (geo != nil) {
      [geo setFixedWithBoolean:NO];
      [geo remove];
    }
  }
  [self->plotGeoList_ clear];
}

JavaUtilTreeSet *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_getTempSet(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self) {
  if (self->tempSet_ == nil) {
    OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_setAndConsume_tempSet_(self, new_JavaUtilTreeSet_init());
  }
  return self->tempSet_;
}

void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_updateRounding(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self) {
  if (((OrgGeogebraCommonKernelKernel *) nil_chk(self->kernel_))->useSignificantFigures_) {
    if (self->printFigures_ != [self->kernel_ getPrintFigures]) {
      self->printFigures_ = [self->kernel_ getPrintFigures];
      self->printDecimals_ = -1;
      [self updateDiscreteTable];
      [self updateGUI];
    }
  }
  else if (self->printDecimals_ != [self->kernel_ getPrintDecimals]) {
    self->printDecimals_ = [self->kernel_ getPrintDecimals];
    [self updateDiscreteTable];
    [self updateGUI];
  }
}

void OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, OrgGeogebraCommonKernelAlgosAlgoElement *algo) {
  if (self->removeFromConstruction_) [((OrgGeogebraCommonKernelConstruction *) nil_chk(self->cons_)) removeFromAlgorithmListWithOrgGeogebraCommonKernelAlgosAlgoElement:algo];
}

OrgGeogebraCommonKernelGeosGeoFunction *OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView_buildDensityCurveExpressionWithOrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_withBoolean_(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *self, OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum *type, jboolean cumulative) {
  OrgGeogebraCommonKernelArithmeticMyDouble *param1 = nil, *param2 = nil;
  if (((IOSDoubleArray *) nil_chk(self->parameters_))->size_ > 0) {
    param1 = [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, IOSDoubleArray_Get(self->parameters_, 0)) autorelease];
  }
  if (self->parameters_->size_ > 1) {
    param2 = [new_OrgGeogebraCommonKernelArithmeticMyDouble_initWithOrgGeogebraCommonKernelKernel_withDouble_(self->kernel_, IOSDoubleArray_Get(self->parameters_, 1)) autorelease];
  }
  id<OrgGeogebraCommonKernelStatisticsAlgoDistributionDF> ret = nil;
  OrgGeogebraCommonKernelGeosGeoBoolean *cumulativeGeo = [new_OrgGeogebraCommonKernelGeosGeoBoolean_initWithOrgGeogebraCommonKernelConstruction_withBoolean_(self->cons_, cumulative) autorelease];
  switch ([type ordinal]) {
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_NORMAL:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoNormalDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, param2, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_STUDENT:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoTDistributionDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_CHISQUARE:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoChiSquaredDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_F:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoFDistributionDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, param2, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_CAUCHY:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoCauchyDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, param2, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_EXPONENTIAL:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoExponentialDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_GAMMA:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoGammaDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, param2, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_WEIBULL:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoWeibullDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, param2, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_LOGNORMAL:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoLogNormalDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, param2, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_LOGISTIC:
    ret = [new_OrgGeogebraCommonKernelStatisticsAlgoLogisticDF_initWithOrgGeogebraCommonKernelConstruction_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticNumberValue_withOrgGeogebraCommonKernelArithmeticBooleanValue_(self->cons_, param1, param2, cumulativeGeo) autorelease];
    break;
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_BINOMIAL:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_PASCAL:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_POISSON:
    case OrgGeogebraCommonMainSettingsProbabilityCalculatorSettings_DIST_HYPERGEOMETRIC:
    OrgGeogebraCommonMainApp_errorWithNSString_(@"not continuous");
    break;
    default:
    OrgGeogebraCommonMainApp_errorWithNSString_(@"missing case");
  }
  if (ret != nil) {
    [((OrgGeogebraCommonKernelConstruction *) nil_chk(self->cons_)) removeFromConstructionListWithOrgGeogebraCommonKernelAlgosConstructionElement:(OrgGeogebraCommonKernelAlgosAlgoElement *) check_class_cast(ret, [OrgGeogebraCommonKernelAlgosAlgoElement class])];
  }
  return [((id<OrgGeogebraCommonKernelStatisticsAlgoDistributionDF>) nil_chk(ret)) getResult];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgGeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView)
