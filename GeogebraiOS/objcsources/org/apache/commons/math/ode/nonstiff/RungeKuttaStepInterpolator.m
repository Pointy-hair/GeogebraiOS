//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/apache/commons/math/ode/nonstiff/RungeKuttaStepInterpolator.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/io/ObjectInput.h"
#include "java/io/ObjectOutput.h"
#include "java/lang/System.h"
#include "org/apache/commons/math/ode/AbstractIntegrator.h"
#include "org/apache/commons/math/ode/nonstiff/RungeKuttaStepInterpolator.h"
#include "org/apache/commons/math/ode/sampling/AbstractStepInterpolator.h"

@implementation OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator

- (instancetype)init {
  OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_init(self);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator:(OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator *)interpolator {
  OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_initWithOrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_(self, interpolator);
  return self;
}

- (void)reinitializeWithOrgApacheCommonsMathOdeAbstractIntegrator:(OrgApacheCommonsMathOdeAbstractIntegrator *)rkIntegrator
                                                  withDoubleArray:(IOSDoubleArray *)y
                                                 withDoubleArray2:(IOSObjectArray *)yDotArray
                                                      withBoolean:(jboolean)forward {
  [self reinitializeWithDoubleArray:y withBoolean:forward];
  self->yDotK_ = yDotArray;
  self->integrator_ = rkIntegrator;
}

- (void)writeExternalWithJavaIoObjectOutput:(id<JavaIoObjectOutput>)outArg {
  [self writeBaseExternalWithJavaIoObjectOutput:outArg];
  jint n = (currentState_ == nil) ? -1 : currentState_->size_;
  jint kMax = (yDotK_ == nil) ? -1 : yDotK_->size_;
  [((id<JavaIoObjectOutput>) nil_chk(outArg)) writeIntWithInt:kMax];
  for (jint k = 0; k < kMax; ++k) {
    for (jint i = 0; i < n; ++i) {
      [outArg writeDoubleWithDouble:IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(yDotK_), k)), i)];
    }
  }
}

- (void)readExternalWithJavaIoObjectInput:(id<JavaIoObjectInput>)inArg {
  jdouble t = [self readBaseExternalWithJavaIoObjectInput:inArg];
  jint n = (currentState_ == nil) ? -1 : currentState_->size_;
  jint kMax = [((id<JavaIoObjectInput>) nil_chk(inArg)) readInt];
  yDotK_ = (kMax < 0) ? nil : [IOSObjectArray newArrayWithLength:kMax type:IOSClass_doubleArray(1)];
  for (jint k = 0; k < kMax; ++k) {
    (void) IOSObjectArray_Set(yDotK_, k, (n < 0) ? nil : [IOSDoubleArray newArrayWithLength:n]);
    for (jint i = 0; i < n; ++i) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(yDotK_, k)), i) = [inArg readDouble];
    }
  }
  integrator_ = nil;
  if (currentState_ != nil) {
    [self setInterpolatedTimeWithDouble:t];
  }
  else {
    interpolatedTime_ = t;
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "RungeKuttaStepInterpolator", NULL, 0x4, NULL, NULL },
    { "initWithOrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator:", "RungeKuttaStepInterpolator", NULL, 0x1, NULL, NULL },
    { "reinitializeWithOrgApacheCommonsMathOdeAbstractIntegrator:withDoubleArray:withDoubleArray2:withBoolean:", "reinitialize", "V", 0x1, NULL, NULL },
    { "writeExternalWithJavaIoObjectOutput:", "writeExternal", "V", 0x1, "Ljava.io.IOException;", NULL },
    { "readExternalWithJavaIoObjectInput:", "readExternal", "V", 0x1, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "yDotK_", NULL, 0x4, "[[D", NULL, NULL,  },
    { "integrator_", NULL, 0x4, "Lorg.apache.commons.math.ode.AbstractIntegrator;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator = { 2, "RungeKuttaStepInterpolator", "org.apache.commons.math.ode.nonstiff", NULL, 0x400, 5, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator;
}

@end

void OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_init(OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator *self) {
  (void) OrgApacheCommonsMathOdeSamplingAbstractStepInterpolator_init(self);
  self->yDotK_ = nil;
  self->integrator_ = nil;
}

void OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_initWithOrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_(OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator *self, OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator *interpolator) {
  (void) OrgApacheCommonsMathOdeSamplingAbstractStepInterpolator_initWithOrgApacheCommonsMathOdeSamplingAbstractStepInterpolator_(self, interpolator);
  if (((OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator *) nil_chk(interpolator))->currentState_ != nil) {
    jint dimension = self->currentState_->size_;
    self->yDotK_ = [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(interpolator->yDotK_))->size_ type:IOSClass_doubleArray(1)];
    for (jint k = 0; k < interpolator->yDotK_->size_; ++k) {
      (void) IOSObjectArray_SetAndConsume(self->yDotK_, k, [IOSDoubleArray newArrayWithLength:dimension]);
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(IOSObjectArray_Get(interpolator->yDotK_, k), 0, IOSObjectArray_Get(self->yDotK_, k), 0, dimension);
    }
  }
  else {
    self->yDotK_ = nil;
  }
  self->integrator_ = nil;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator)
