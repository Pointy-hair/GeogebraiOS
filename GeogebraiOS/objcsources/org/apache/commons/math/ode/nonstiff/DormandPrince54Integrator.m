//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/apache/commons/math/ode/nonstiff/DormandPrince54Integrator.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "org/apache/commons/math/ode/nonstiff/DormandPrince54Integrator.h"
#include "org/apache/commons/math/ode/nonstiff/DormandPrince54StepInterpolator.h"
#include "org/apache/commons/math/ode/nonstiff/EmbeddedRungeKuttaIntegrator.h"
#include "org/apache/commons/math/util/FastMath.h"

#define OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E1 0.0012326388888888888
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E3 -0.0042527702905061394
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E4 0.03697916666666667
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E5 -0.05086379716981132
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E6 0.0419047619047619
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E7 -0.025

static NSString *OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_METHOD_NAME_ = @"Dormand-Prince 5(4)";
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, METHOD_NAME_, NSString *)

static IOSDoubleArray *OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_C_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, STATIC_C_, IOSDoubleArray *)

static IOSObjectArray *OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_A_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, STATIC_A_, IOSObjectArray *)

static IOSDoubleArray *OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_B_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, STATIC_B_, IOSDoubleArray *)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, E1, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, E3, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, E4, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, E5, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, E6, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator, E7, jdouble)

J2OBJC_INITIALIZED_DEFN(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator)

@implementation OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator

- (instancetype)initWithDouble:(jdouble)minStep
                    withDouble:(jdouble)maxStep
                    withDouble:(jdouble)scalAbsoluteTolerance
                    withDouble:(jdouble)scalRelativeTolerance {
  OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_initWithDouble_withDouble_withDouble_withDouble_(self, minStep, maxStep, scalAbsoluteTolerance, scalRelativeTolerance);
  return self;
}

- (instancetype)initWithDouble:(jdouble)minStep
                    withDouble:(jdouble)maxStep
               withDoubleArray:(IOSDoubleArray *)vecAbsoluteTolerance
               withDoubleArray:(IOSDoubleArray *)vecRelativeTolerance {
  OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_initWithDouble_withDouble_withDoubleArray_withDoubleArray_(self, minStep, maxStep, vecAbsoluteTolerance, vecRelativeTolerance);
  return self;
}

- (jint)getOrder {
  return 5;
}

- (jdouble)estimateErrorWithDoubleArray2:(IOSObjectArray *)yDotK
                         withDoubleArray:(IOSDoubleArray *)y0
                         withDoubleArray:(IOSDoubleArray *)y1
                              withDouble:(jdouble)h {
  jdouble error = 0;
  for (jint j = 0; j < mainSetDimension_; ++j) {
    jdouble errSum = OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E1 * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(yDotK), 0)), j) + OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E3 * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK, 2)), j) + OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E4 * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK, 3)), j) + OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E5 * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK, 4)), j) + OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E6 * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK, 5)), j) + OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E7 * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK, 6)), j);
    jdouble yScale = OrgApacheCommonsMathUtilFastMath_maxWithDouble_withDouble_(OrgApacheCommonsMathUtilFastMath_absWithDouble_(IOSDoubleArray_Get(nil_chk(y0), j)), OrgApacheCommonsMathUtilFastMath_absWithDouble_(IOSDoubleArray_Get(nil_chk(y1), j)));
    jdouble tol = (vecAbsoluteTolerance_ == nil) ? (scalAbsoluteTolerance_ + scalRelativeTolerance_ * yScale) : (IOSDoubleArray_Get(vecAbsoluteTolerance_, j) + IOSDoubleArray_Get(nil_chk(vecRelativeTolerance_), j) * yScale);
    jdouble ratio = h * errSum / tol;
    error += ratio * ratio;
  }
  return OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(error / mainSetDimension_);
}

+ (void)initialize {
  if (self == [OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator class]) {
    JreStrongAssignAndConsume(&OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_C_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ 1.0 / 5.0, 3.0 / 10.0, 4.0 / 5.0, 8.0 / 9.0, 1.0, 1.0 } count:6]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_A_, nil, [IOSObjectArray newArrayWithObjects:(id[]){ [IOSDoubleArray arrayWithDoubles:(jdouble[]){ 1.0 / 5.0 } count:1], [IOSDoubleArray arrayWithDoubles:(jdouble[]){ 3.0 / 40.0, 9.0 / 40.0 } count:2], [IOSDoubleArray arrayWithDoubles:(jdouble[]){ 44.0 / 45.0, -56.0 / 15.0, 32.0 / 9.0 } count:3], [IOSDoubleArray arrayWithDoubles:(jdouble[]){ 19372.0 / 6561.0, -25360.0 / 2187.0, 64448.0 / 6561.0, -212.0 / 729.0 } count:4], [IOSDoubleArray arrayWithDoubles:(jdouble[]){ 9017.0 / 3168.0, -355.0 / 33.0, 46732.0 / 5247.0, 49.0 / 176.0, -5103.0 / 18656.0 } count:5], [IOSDoubleArray arrayWithDoubles:(jdouble[]){ 35.0 / 384.0, 0.0, 500.0 / 1113.0, 125.0 / 192.0, -2187.0 / 6784.0, 11.0 / 84.0 } count:6] } count:6 type:IOSClass_doubleArray(1)]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_B_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ 35.0 / 384.0, 0.0, 500.0 / 1113.0, 125.0 / 192.0, -2187.0 / 6784.0, 11.0 / 84.0, 0.0 } count:7]);
    J2OBJC_SET_INITIALIZED(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithDouble:withDouble:withDouble:withDouble:", "DormandPrince54Integrator", NULL, 0x1, NULL, NULL },
    { "initWithDouble:withDouble:withDoubleArray:withDoubleArray:", "DormandPrince54Integrator", NULL, 0x1, NULL, NULL },
    { "getOrder", NULL, "I", 0x1, NULL, NULL },
    { "estimateErrorWithDoubleArray2:withDoubleArray:withDoubleArray:withDouble:", "estimateError", "D", 0x4, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "METHOD_NAME_", NULL, 0x1a, "Ljava.lang.String;", &OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_METHOD_NAME_, NULL,  },
    { "STATIC_C_", NULL, 0x1a, "[D", &OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_C_, NULL,  },
    { "STATIC_A_", NULL, 0x1a, "[[D", &OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_A_, NULL,  },
    { "STATIC_B_", NULL, 0x1a, "[D", &OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_B_, NULL,  },
    { "E1_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E1 },
    { "E3_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E3 },
    { "E4_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E4 },
    { "E5_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E5 },
    { "E6_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E6 },
    { "E7_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_E7 },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator = { 2, "DormandPrince54Integrator", "org.apache.commons.math.ode.nonstiff", NULL, 0x1, 4, methods, 10, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator;
}

@end

void OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_initWithDouble_withDouble_withDouble_withDouble_(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator *self, jdouble minStep, jdouble maxStep, jdouble scalAbsoluteTolerance, jdouble scalRelativeTolerance) {
  OrgApacheCommonsMathOdeNonstiffEmbeddedRungeKuttaIntegrator_initWithNSString_withBoolean_withDoubleArray_withDoubleArray2_withDoubleArray_withOrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_withDouble_withDouble_withDouble_withDouble_(self, OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_METHOD_NAME_, YES, OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_C_, OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_A_, OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_B_, [new_OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_init() autorelease], minStep, maxStep, scalAbsoluteTolerance, scalRelativeTolerance);
}

OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator *new_OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_initWithDouble_withDouble_withDouble_withDouble_(jdouble minStep, jdouble maxStep, jdouble scalAbsoluteTolerance, jdouble scalRelativeTolerance) {
  OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator *self = [OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator alloc];
  OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_initWithDouble_withDouble_withDouble_withDouble_(self, minStep, maxStep, scalAbsoluteTolerance, scalRelativeTolerance);
  return self;
}

void OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_initWithDouble_withDouble_withDoubleArray_withDoubleArray_(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator *self, jdouble minStep, jdouble maxStep, IOSDoubleArray *vecAbsoluteTolerance, IOSDoubleArray *vecRelativeTolerance) {
  OrgApacheCommonsMathOdeNonstiffEmbeddedRungeKuttaIntegrator_initWithNSString_withBoolean_withDoubleArray_withDoubleArray2_withDoubleArray_withOrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_withDouble_withDouble_withDoubleArray_withDoubleArray_(self, OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_METHOD_NAME_, YES, OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_C_, OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_A_, OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_STATIC_B_, [new_OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_init() autorelease], minStep, maxStep, vecAbsoluteTolerance, vecRelativeTolerance);
}

OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator *new_OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_initWithDouble_withDouble_withDoubleArray_withDoubleArray_(jdouble minStep, jdouble maxStep, IOSDoubleArray *vecAbsoluteTolerance, IOSDoubleArray *vecRelativeTolerance) {
  OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator *self = [OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator alloc];
  OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator_initWithDouble_withDouble_withDoubleArray_withDoubleArray_(self, minStep, maxStep, vecAbsoluteTolerance, vecRelativeTolerance);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathOdeNonstiffDormandPrince54Integrator)
