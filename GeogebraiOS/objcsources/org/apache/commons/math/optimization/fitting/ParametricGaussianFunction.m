//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/apache/commons/math/optimization/fitting/ParametricGaussianFunction.java
//


#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Math.h"
#include "org/apache/commons/math/exception/DimensionMismatchException.h"
#include "org/apache/commons/math/exception/NullArgumentException.h"
#include "org/apache/commons/math/exception/ZeroException.h"
#include "org/apache/commons/math/exception/util/LocalizedFormats.h"
#include "org/apache/commons/math/optimization/fitting/ParametricGaussianFunction.h"

#define OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_serialVersionUID -3875578602503903233LL

@interface OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction ()

- (void)validateParametersWithDoubleArray:(IOSDoubleArray *)parameters;

@end

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction, serialVersionUID, jlong)

__attribute__((unused)) static void OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_validateParametersWithDoubleArray_(OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction *self, IOSDoubleArray *parameters);

@implementation OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction

- (instancetype)init {
  OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_init(self);
  return self;
}

- (jdouble)valueWithDouble:(jdouble)x
           withDoubleArray:(IOSDoubleArray *)parameters {
  OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_validateParametersWithDoubleArray_(self, parameters);
  jdouble a = IOSDoubleArray_Get(nil_chk(parameters), 0);
  jdouble b = IOSDoubleArray_Get(parameters, 1);
  jdouble c = IOSDoubleArray_Get(parameters, 2);
  jdouble d = IOSDoubleArray_Get(parameters, 3);
  jdouble xMc = x - c;
  return a + b * JavaLangMath_expWithDouble_(-xMc * xMc / (2.0 * (d * d)));
}

- (IOSDoubleArray *)gradientWithDouble:(jdouble)x
                       withDoubleArray:(IOSDoubleArray *)parameters {
  OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_validateParametersWithDoubleArray_(self, parameters);
  jdouble b = IOSDoubleArray_Get(nil_chk(parameters), 1);
  jdouble c = IOSDoubleArray_Get(parameters, 2);
  jdouble d = IOSDoubleArray_Get(parameters, 3);
  jdouble xMc = x - c;
  jdouble d2 = d * d;
  jdouble exp = JavaLangMath_expWithDouble_(-xMc * xMc / (2 * d2));
  jdouble f = b * exp * xMc / d2;
  return [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ 1.0, exp, f, f * xMc / d } count:4];
}

- (void)validateParametersWithDoubleArray:(IOSDoubleArray *)parameters {
  OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_validateParametersWithDoubleArray_(self, parameters);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "ParametricGaussianFunction", NULL, 0x1, NULL, NULL },
    { "valueWithDouble:withDoubleArray:", "value", "D", 0x1, "Lorg.apache.commons.math.exception.ZeroException;", NULL },
    { "gradientWithDouble:withDoubleArray:", "gradient", "[D", 0x1, "Lorg.apache.commons.math.exception.ZeroException;", NULL },
    { "validateParametersWithDoubleArray:", "validateParameters", "V", 0x2, "Lorg.apache.commons.math.exception.ZeroException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID_", NULL, 0x1a, "J", NULL, NULL, .constantValue.asLong = OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_serialVersionUID },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction = { 2, "ParametricGaussianFunction", "org.apache.commons.math.optimization.fitting", NULL, 0x1, 4, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction;
}

@end

void OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_init(OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction *self) {
  (void) NSObject_init(self);
}

OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction *new_OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_init() {
  OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction *self = [OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction alloc];
  OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_init(self);
  return self;
}

void OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction_validateParametersWithDoubleArray_(OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction *self, IOSDoubleArray *parameters) {
  if (parameters == nil) {
    @throw new_OrgApacheCommonsMathExceptionNullArgumentException_initWithOrgApacheCommonsMathExceptionUtilLocalizable_(OrgApacheCommonsMathExceptionUtilLocalizedFormatsEnum_get_INPUT_ARRAY());
  }
  if (((IOSDoubleArray *) nil_chk(parameters))->size_ != 4) {
    @throw new_OrgApacheCommonsMathExceptionDimensionMismatchException_initWithInt_withInt_(4, parameters->size_);
  }
  if (IOSDoubleArray_Get(parameters, 3) == 0.0) {
    @throw new_OrgApacheCommonsMathExceptionZeroException_init();
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathOptimizationFittingParametricGaussianFunction)
