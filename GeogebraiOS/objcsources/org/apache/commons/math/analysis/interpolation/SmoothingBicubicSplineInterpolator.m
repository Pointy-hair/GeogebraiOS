//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/apache/commons/math/analysis/interpolation/SmoothingBicubicSplineInterpolator.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Deprecated.h"
#include "java/lang/IllegalArgumentException.h"
#include "org/apache/commons/math/DimensionMismatchException.h"
#include "org/apache/commons/math/MathException.h"
#include "org/apache/commons/math/MathRuntimeException.h"
#include "org/apache/commons/math/analysis/BivariateRealFunction.h"
#include "org/apache/commons/math/analysis/UnivariateRealFunction.h"
#include "org/apache/commons/math/analysis/interpolation/BicubicSplineInterpolatingFunction.h"
#include "org/apache/commons/math/analysis/interpolation/SmoothingBicubicSplineInterpolator.h"
#include "org/apache/commons/math/analysis/interpolation/SplineInterpolator.h"
#include "org/apache/commons/math/analysis/polynomials/PolynomialSplineFunction.h"
#include "org/apache/commons/math/exception/util/LocalizedFormats.h"
#include "org/apache/commons/math/util/MathUtils.h"

@interface OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator ()

- (jint)nextIndexWithInt:(jint)i
                 withInt:(jint)max;

- (jint)previousIndexWithInt:(jint)i;

@end

__attribute__((unused)) static jint OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_nextIndexWithInt_withInt_(OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator *self, jint i, jint max);

__attribute__((unused)) static jint OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_previousIndexWithInt_(OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator *self, jint i);

@implementation OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator

- (id<OrgApacheCommonsMathAnalysisBivariateRealFunction>)interpolateWithDoubleArray:(IOSDoubleArray *)xval
                                                                    withDoubleArray:(IOSDoubleArray *)yval
                                                                   withDoubleArray2:(IOSObjectArray *)zval {
  if (((IOSDoubleArray *) nil_chk(xval))->size_ == 0 || ((IOSDoubleArray *) nil_chk(yval))->size_ == 0 || ((IOSObjectArray *) nil_chk(zval))->size_ == 0) {
    @throw OrgApacheCommonsMathMathRuntimeException_createIllegalArgumentExceptionWithOrgApacheCommonsMathExceptionUtilLocalizable_withNSObjectArray_(OrgApacheCommonsMathExceptionUtilLocalizedFormatsEnum_get_NO_DATA(), [IOSObjectArray arrayWithLength:0 type:NSObject_class_()]);
  }
  if (xval->size_ != ((IOSObjectArray *) nil_chk(zval))->size_) {
    @throw [new_OrgApacheCommonsMathDimensionMismatchException_initWithInt_withInt_(xval->size_, zval->size_) autorelease];
  }
  OrgApacheCommonsMathUtilMathUtils_checkOrderWithDoubleArray_withOrgApacheCommonsMathUtilMathUtils_OrderDirectionEnum_withBoolean_(xval, OrgApacheCommonsMathUtilMathUtils_OrderDirectionEnum_get_INCREASING(), YES);
  OrgApacheCommonsMathUtilMathUtils_checkOrderWithDoubleArray_withOrgApacheCommonsMathUtilMathUtils_OrderDirectionEnum_withBoolean_(yval, OrgApacheCommonsMathUtilMathUtils_OrderDirectionEnum_get_INCREASING(), YES);
  jint xLen = xval->size_;
  jint yLen = ((IOSDoubleArray *) nil_chk(yval))->size_;
  IOSObjectArray *zX = [IOSDoubleArray arrayWithDimensions:2 lengths:(jint[]){ yLen, xLen }];
  for (jint i = 0; i < xLen; i++) {
    if (((IOSDoubleArray *) nil_chk(IOSObjectArray_Get(zval, i)))->size_ != yLen) {
      @throw [new_OrgApacheCommonsMathDimensionMismatchException_initWithInt_withInt_(((IOSDoubleArray *) nil_chk(IOSObjectArray_Get(zval, i)))->size_, yLen) autorelease];
    }
    for (jint j = 0; j < yLen; j++) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(zX, j)), i) = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(zval, i)), j);
    }
  }
  OrgApacheCommonsMathAnalysisInterpolationSplineInterpolator *spInterpolator = [new_OrgApacheCommonsMathAnalysisInterpolationSplineInterpolator_init() autorelease];
  IOSObjectArray *ySplineX = [IOSObjectArray arrayWithLength:yLen type:OrgApacheCommonsMathAnalysisPolynomialsPolynomialSplineFunction_class_()];
  for (jint j = 0; j < yLen; j++) {
    IOSObjectArray_Set(ySplineX, j, [spInterpolator interpolateWithDoubleArray:xval withDoubleArray:IOSObjectArray_Get(zX, j)]);
  }
  IOSObjectArray *zY_1 = [IOSDoubleArray arrayWithDimensions:2 lengths:(jint[]){ xLen, yLen }];
  for (jint j = 0; j < yLen; j++) {
    OrgApacheCommonsMathAnalysisPolynomialsPolynomialSplineFunction *f = IOSObjectArray_Get(ySplineX, j);
    for (jint i = 0; i < xLen; i++) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(zY_1, i)), j) = [((OrgApacheCommonsMathAnalysisPolynomialsPolynomialSplineFunction *) nil_chk(f)) valueWithDouble:IOSDoubleArray_Get(xval, i)];
    }
  }
  IOSObjectArray *xSplineY = [IOSObjectArray arrayWithLength:xLen type:OrgApacheCommonsMathAnalysisPolynomialsPolynomialSplineFunction_class_()];
  for (jint i = 0; i < xLen; i++) {
    IOSObjectArray_Set(xSplineY, i, [spInterpolator interpolateWithDoubleArray:yval withDoubleArray:IOSObjectArray_Get(zY_1, i)]);
  }
  IOSObjectArray *zY_2 = [IOSDoubleArray arrayWithDimensions:2 lengths:(jint[]){ xLen, yLen }];
  for (jint i = 0; i < xLen; i++) {
    OrgApacheCommonsMathAnalysisPolynomialsPolynomialSplineFunction *f = IOSObjectArray_Get(xSplineY, i);
    for (jint j = 0; j < yLen; j++) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(zY_2, i)), j) = [((OrgApacheCommonsMathAnalysisPolynomialsPolynomialSplineFunction *) nil_chk(f)) valueWithDouble:IOSDoubleArray_Get(yval, j)];
    }
  }
  IOSObjectArray *dZdX = [IOSDoubleArray arrayWithDimensions:2 lengths:(jint[]){ xLen, yLen }];
  for (jint j = 0; j < yLen; j++) {
    id<OrgApacheCommonsMathAnalysisUnivariateRealFunction> f = [((OrgApacheCommonsMathAnalysisPolynomialsPolynomialSplineFunction *) nil_chk(IOSObjectArray_Get(ySplineX, j))) derivative];
    for (jint i = 0; i < xLen; i++) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(dZdX, i)), j) = [((id<OrgApacheCommonsMathAnalysisUnivariateRealFunction>) nil_chk(f)) valueWithDouble:IOSDoubleArray_Get(xval, i)];
    }
  }
  IOSObjectArray *dZdY = [IOSDoubleArray arrayWithDimensions:2 lengths:(jint[]){ xLen, yLen }];
  for (jint i = 0; i < xLen; i++) {
    id<OrgApacheCommonsMathAnalysisUnivariateRealFunction> f = [((OrgApacheCommonsMathAnalysisPolynomialsPolynomialSplineFunction *) nil_chk(IOSObjectArray_Get(xSplineY, i))) derivative];
    for (jint j = 0; j < yLen; j++) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(dZdY, i)), j) = [((id<OrgApacheCommonsMathAnalysisUnivariateRealFunction>) nil_chk(f)) valueWithDouble:IOSDoubleArray_Get(yval, j)];
    }
  }
  IOSObjectArray *dZdXdY = [IOSDoubleArray arrayWithDimensions:2 lengths:(jint[]){ xLen, yLen }];
  for (jint i = 0; i < xLen; i++) {
    jint nI = OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_nextIndexWithInt_withInt_(self, i, xLen);
    jint pI = OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_previousIndexWithInt_(self, i);
    for (jint j = 0; j < yLen; j++) {
      jint nJ = OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_nextIndexWithInt_withInt_(self, j, yLen);
      jint pJ = OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_previousIndexWithInt_(self, j);
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(dZdXdY, i)), j) = (IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(zY_2, nI)), nJ) - IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(zY_2, nI)), pJ) - IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(zY_2, pI)), nJ) + IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(zY_2, pI)), pJ)) / ((IOSDoubleArray_Get(xval, nI) - IOSDoubleArray_Get(xval, pI)) * (IOSDoubleArray_Get(yval, nJ) - IOSDoubleArray_Get(yval, pJ)));
    }
  }
  return [new_OrgApacheCommonsMathAnalysisInterpolationBicubicSplineInterpolatingFunction_initWithDoubleArray_withDoubleArray_withDoubleArray2_withDoubleArray2_withDoubleArray2_withDoubleArray2_(xval, yval, zY_2, dZdX, dZdY, dZdXdY) autorelease];
}

- (jint)nextIndexWithInt:(jint)i
                 withInt:(jint)max {
  return OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_nextIndexWithInt_withInt_(self, i, max);
}

- (jint)previousIndexWithInt:(jint)i {
  return OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_previousIndexWithInt_(self, i);
}

- (instancetype)init {
  OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_init(self);
  return self;
}

+ (IOSObjectArray *)__annotations {
  return [IOSObjectArray arrayWithObjects:(id[]) { [[[JavaLangDeprecated alloc] init] autorelease] } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "interpolateWithDoubleArray:withDoubleArray:withDoubleArray2:", "interpolate", "Lorg.apache.commons.math.analysis.BivariateRealFunction;", 0x1, "Lorg.apache.commons.math.MathException;Ljava.lang.IllegalArgumentException;", NULL },
    { "nextIndexWithInt:withInt:", "nextIndex", "I", 0x2, NULL, NULL },
    { "previousIndexWithInt:", "previousIndex", "I", 0x2, NULL, NULL },
    { "init", NULL, NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator = { 2, "SmoothingBicubicSplineInterpolator", "org.apache.commons.math.analysis.interpolation", NULL, 0x1, 4, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator;
}

@end

jint OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_nextIndexWithInt_withInt_(OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator *self, jint i, jint max) {
  jint index = i + 1;
  return index < max ? index : index - 1;
}

jint OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_previousIndexWithInt_(OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator *self, jint i) {
  jint index = i - 1;
  return index >= 0 ? index : 0;
}

void OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_init(OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator *self) {
  NSObject_init(self);
}

OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator *new_OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_init() {
  OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator *self = [OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator alloc];
  OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathAnalysisInterpolationSmoothingBicubicSplineInterpolator)
