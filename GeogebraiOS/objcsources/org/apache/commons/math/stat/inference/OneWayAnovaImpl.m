//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeogebraiOS/GeogebraiOS/sources/org/apache/commons/math/stat/inference/OneWayAnovaImpl.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Double.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "java/util/Collection.h"
#include "org/apache/commons/math/MathException.h"
#include "org/apache/commons/math/MathRuntimeException.h"
#include "org/apache/commons/math/distribution/FDistribution.h"
#include "org/apache/commons/math/distribution/FDistributionImpl.h"
#include "org/apache/commons/math/exception/util/LocalizedFormats.h"
#include "org/apache/commons/math/stat/descriptive/summary/Sum.h"
#include "org/apache/commons/math/stat/descriptive/summary/SumOfSquares.h"
#include "org/apache/commons/math/stat/inference/OneWayAnovaImpl.h"

@class OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats;

@interface OrgApacheCommonsMathStatInferenceOneWayAnovaImpl ()

- (OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *)anovaStatsWithJavaUtilCollection:(id<JavaUtilCollection>)categoryData;

@end

__attribute__((unused)) static OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_anovaStatsWithJavaUtilCollection_(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl *self, id<JavaUtilCollection> categoryData);

@interface OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats : NSObject {
 @public
  jint dfbg_;
  jint dfwg_;
  jdouble F_;
}

- (instancetype)initWithInt:(jint)dfbg
                    withInt:(jint)dfwg
                 withDouble:(jdouble)F;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats)

__attribute__((unused)) static void OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats_initWithInt_withInt_withDouble_(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *self, jint dfbg, jint dfwg, jdouble F);

__attribute__((unused)) static OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *new_OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats_initWithInt_withInt_withDouble_(jint dfbg, jint dfwg, jdouble F) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats)

@implementation OrgApacheCommonsMathStatInferenceOneWayAnovaImpl

- (instancetype)init {
  OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_init(self);
  return self;
}

- (jdouble)anovaFValueWithJavaUtilCollection:(id<JavaUtilCollection>)categoryData {
  OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *a = OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_anovaStatsWithJavaUtilCollection_(self, categoryData);
  return ((OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *) nil_chk(a))->F_;
}

- (jdouble)anovaPValueWithJavaUtilCollection:(id<JavaUtilCollection>)categoryData {
  OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *a = OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_anovaStatsWithJavaUtilCollection_(self, categoryData);
  id<OrgApacheCommonsMathDistributionFDistribution> fdist = [new_OrgApacheCommonsMathDistributionFDistributionImpl_initWithDouble_withDouble_(((OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *) nil_chk(a))->dfbg_, a->dfwg_) autorelease];
  return 1.0 - [fdist cumulativeProbabilityWithDouble:a->F_];
}

- (jboolean)anovaTestWithJavaUtilCollection:(id<JavaUtilCollection>)categoryData
                                 withDouble:(jdouble)alpha {
  if ((alpha <= 0) || (alpha > 0.5)) {
    @throw OrgApacheCommonsMathMathRuntimeException_createIllegalArgumentExceptionWithOrgApacheCommonsMathExceptionUtilLocalizable_withNSObjectArray_(OrgApacheCommonsMathExceptionUtilLocalizedFormatsEnum_get_OUT_OF_BOUND_SIGNIFICANCE_LEVEL(), [IOSObjectArray arrayWithObjects:(id[]){ JavaLangDouble_valueOfWithDouble_(alpha), JavaLangInteger_valueOfWithInt_(0), JavaLangDouble_valueOfWithDouble_(0.5) } count:3 type:NSObject_class_()]);
  }
  return [self anovaPValueWithJavaUtilCollection:categoryData] < alpha;
}

- (OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *)anovaStatsWithJavaUtilCollection:(id<JavaUtilCollection>)categoryData {
  return OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_anovaStatsWithJavaUtilCollection_(self, categoryData);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "OneWayAnovaImpl", NULL, 0x1, NULL, NULL },
    { "anovaFValueWithJavaUtilCollection:", "anovaFValue", "D", 0x1, "Ljava.lang.IllegalArgumentException;Lorg.apache.commons.math.MathException;", NULL },
    { "anovaPValueWithJavaUtilCollection:", "anovaPValue", "D", 0x1, "Ljava.lang.IllegalArgumentException;Lorg.apache.commons.math.MathException;", NULL },
    { "anovaTestWithJavaUtilCollection:withDouble:", "anovaTest", "Z", 0x1, "Ljava.lang.IllegalArgumentException;Lorg.apache.commons.math.MathException;", NULL },
    { "anovaStatsWithJavaUtilCollection:", "anovaStats", "Lorg.apache.commons.math.stat.inference.OneWayAnovaImpl$AnovaStats;", 0x2, "Ljava.lang.IllegalArgumentException;Lorg.apache.commons.math.MathException;", NULL },
  };
  static const char *inner_classes[] = {"Lorg.apache.commons.math.stat.inference.OneWayAnovaImpl$AnovaStats;"};
  static const J2ObjcClassInfo _OrgApacheCommonsMathStatInferenceOneWayAnovaImpl = { 2, "OneWayAnovaImpl", "org.apache.commons.math.stat.inference", NULL, 0x1, 5, methods, 0, NULL, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_OrgApacheCommonsMathStatInferenceOneWayAnovaImpl;
}

@end

void OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_init(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl *self) {
  NSObject_init(self);
}

OrgApacheCommonsMathStatInferenceOneWayAnovaImpl *new_OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_init() {
  OrgApacheCommonsMathStatInferenceOneWayAnovaImpl *self = [OrgApacheCommonsMathStatInferenceOneWayAnovaImpl alloc];
  OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_init(self);
  return self;
}

OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_anovaStatsWithJavaUtilCollection_(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl *self, id<JavaUtilCollection> categoryData) {
  if ([((id<JavaUtilCollection>) nil_chk(categoryData)) size] < 2) {
    @throw OrgApacheCommonsMathMathRuntimeException_createIllegalArgumentExceptionWithOrgApacheCommonsMathExceptionUtilLocalizable_withNSObjectArray_(OrgApacheCommonsMathExceptionUtilLocalizedFormatsEnum_get_TWO_OR_MORE_CATEGORIES_REQUIRED(), [IOSObjectArray arrayWithObjects:(id[]){ JavaLangInteger_valueOfWithInt_([categoryData size]) } count:1 type:NSObject_class_()]);
  }
  for (IOSDoubleArray * __strong array in categoryData) {
    if (((IOSDoubleArray *) nil_chk(array))->size_ <= 1) {
      @throw OrgApacheCommonsMathMathRuntimeException_createIllegalArgumentExceptionWithOrgApacheCommonsMathExceptionUtilLocalizable_withNSObjectArray_(OrgApacheCommonsMathExceptionUtilLocalizedFormatsEnum_get_TWO_OR_MORE_VALUES_IN_CATEGORY_REQUIRED(), [IOSObjectArray arrayWithObjects:(id[]){ JavaLangInteger_valueOfWithInt_(array->size_) } count:1 type:NSObject_class_()]);
    }
  }
  jint dfwg = 0;
  jdouble sswg = 0;
  OrgApacheCommonsMathStatDescriptiveSummarySum *totsum = [new_OrgApacheCommonsMathStatDescriptiveSummarySum_init() autorelease];
  OrgApacheCommonsMathStatDescriptiveSummarySumOfSquares *totsumsq = [new_OrgApacheCommonsMathStatDescriptiveSummarySumOfSquares_init() autorelease];
  jint totnum = 0;
  for (IOSDoubleArray * __strong data in categoryData) {
    OrgApacheCommonsMathStatDescriptiveSummarySum *sum = [new_OrgApacheCommonsMathStatDescriptiveSummarySum_init() autorelease];
    OrgApacheCommonsMathStatDescriptiveSummarySumOfSquares *sumsq = [new_OrgApacheCommonsMathStatDescriptiveSummarySumOfSquares_init() autorelease];
    jint num = 0;
    for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(data))->size_; i++) {
      jdouble val = IOSDoubleArray_Get(data, i);
      num++;
      [sum incrementWithDouble:val];
      [sumsq incrementWithDouble:val];
      totnum++;
      [totsum incrementWithDouble:val];
      [totsumsq incrementWithDouble:val];
    }
    dfwg += num - 1;
    jdouble ss = [sumsq getResult] - [sum getResult] * [sum getResult] / num;
    sswg += ss;
  }
  jdouble sst = [totsumsq getResult] - [totsum getResult] * [totsum getResult] / totnum;
  jdouble ssbg = sst - sswg;
  jint dfbg = [categoryData size] - 1;
  jdouble msbg = ssbg / dfbg;
  jdouble mswg = sswg / dfwg;
  jdouble F = msbg / mswg;
  return [new_OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats_initWithInt_withInt_withDouble_(dfbg, dfwg, F) autorelease];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl)

@implementation OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats

- (instancetype)initWithInt:(jint)dfbg
                    withInt:(jint)dfwg
                 withDouble:(jdouble)F {
  OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats_initWithInt_withInt_withDouble_(self, dfbg, dfwg, F);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:withDouble:", "AnovaStats", NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "dfbg_", NULL, 0x2, "I", NULL, NULL,  },
    { "dfwg_", NULL, 0x2, "I", NULL, NULL,  },
    { "F_", NULL, 0x2, "D", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats = { 2, "AnovaStats", "org.apache.commons.math.stat.inference", "OneWayAnovaImpl", 0xa, 1, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats;
}

@end

void OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats_initWithInt_withInt_withDouble_(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *self, jint dfbg, jint dfwg, jdouble F) {
  NSObject_init(self);
  self->dfbg_ = dfbg;
  self->dfwg_ = dfwg;
  self->F_ = F;
}

OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *new_OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats_initWithInt_withInt_withDouble_(jint dfbg, jint dfwg, jdouble F) {
  OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats *self = [OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats alloc];
  OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats_initWithInt_withInt_withDouble_(self, dfbg, dfwg, F);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathStatInferenceOneWayAnovaImpl_AnovaStats)
