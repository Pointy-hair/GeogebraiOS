//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/apache/commons/math/stat/ranking/NaturalRanking.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Comparable.h"
#include "java/lang/Double.h"
#include "java/lang/Integer.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"
#include "java/util/Arrays.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "org/apache/commons/math/exception/MathInternalError.h"
#include "org/apache/commons/math/random/RandomData.h"
#include "org/apache/commons/math/random/RandomDataImpl.h"
#include "org/apache/commons/math/random/RandomGenerator.h"
#include "org/apache/commons/math/stat/ranking/NaNStrategy.h"
#include "org/apache/commons/math/stat/ranking/NaturalRanking.h"
#include "org/apache/commons/math/stat/ranking/TiesStrategy.h"
#include "org/apache/commons/math/util/FastMath.h"

@interface OrgApacheCommonsMathStatRankingNaturalRanking () {
 @public
  OrgApacheCommonsMathStatRankingNaNStrategyEnum *nanStrategy_;
  OrgApacheCommonsMathStatRankingTiesStrategyEnum *tiesStrategy_;
  id<OrgApacheCommonsMathRandomRandomData> randomData_;
}

- (IOSObjectArray *)removeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:(IOSObjectArray *)ranks;

- (void)recodeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:(IOSObjectArray *)ranks
                                                                            withDouble:(jdouble)value;

- (jboolean)containsNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:(IOSObjectArray *)ranks;

- (void)resolveTieWithDoubleArray:(IOSDoubleArray *)ranks
                 withJavaUtilList:(id<JavaUtilList>)tiesTrace;

- (void)fillWithDoubleArray:(IOSDoubleArray *)data
           withJavaUtilList:(id<JavaUtilList>)tiesTrace
                 withDouble:(jdouble)value;

- (void)restoreNaNsWithDoubleArray:(IOSDoubleArray *)ranks
                  withJavaUtilList:(id<JavaUtilList>)nanPositions;

- (id<JavaUtilList>)getNanPositionsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:(IOSObjectArray *)ranks;

@end

J2OBJC_FIELD_SETTER(OrgApacheCommonsMathStatRankingNaturalRanking, nanStrategy_, OrgApacheCommonsMathStatRankingNaNStrategyEnum *)
J2OBJC_FIELD_SETTER(OrgApacheCommonsMathStatRankingNaturalRanking, tiesStrategy_, OrgApacheCommonsMathStatRankingTiesStrategyEnum *)
J2OBJC_FIELD_SETTER(OrgApacheCommonsMathStatRankingNaturalRanking, randomData_, id<OrgApacheCommonsMathRandomRandomData>)

__attribute__((unused)) static IOSObjectArray *OrgApacheCommonsMathStatRankingNaturalRanking_removeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSObjectArray *ranks);

__attribute__((unused)) static void OrgApacheCommonsMathStatRankingNaturalRanking_recodeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_withDouble_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSObjectArray *ranks, jdouble value);

__attribute__((unused)) static jboolean OrgApacheCommonsMathStatRankingNaturalRanking_containsNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSObjectArray *ranks);

__attribute__((unused)) static void OrgApacheCommonsMathStatRankingNaturalRanking_resolveTieWithDoubleArray_withJavaUtilList_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSDoubleArray *ranks, id<JavaUtilList> tiesTrace);

__attribute__((unused)) static void OrgApacheCommonsMathStatRankingNaturalRanking_fillWithDoubleArray_withJavaUtilList_withDouble_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSDoubleArray *data, id<JavaUtilList> tiesTrace, jdouble value);

__attribute__((unused)) static void OrgApacheCommonsMathStatRankingNaturalRanking_restoreNaNsWithDoubleArray_withJavaUtilList_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSDoubleArray *ranks, id<JavaUtilList> nanPositions);

__attribute__((unused)) static id<JavaUtilList> OrgApacheCommonsMathStatRankingNaturalRanking_getNanPositionsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSObjectArray *ranks);

@interface OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair : NSObject < JavaLangComparable > {
 @public
  jdouble value_;
  jint position_;
}

- (instancetype)initWithDouble:(jdouble)value
                       withInt:(jint)position;

- (jint)compareToWithId:(OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *)other;

- (jdouble)getValue;

- (jint)getPosition;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair)

__attribute__((unused)) static void OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_(OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *self, jdouble value, jint position);

__attribute__((unused)) static OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *new_OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_(jdouble value, jint position) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair)

J2OBJC_INITIALIZED_DEFN(OrgApacheCommonsMathStatRankingNaturalRanking)

OrgApacheCommonsMathStatRankingNaNStrategyEnum *OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_NAN_STRATEGY_;
OrgApacheCommonsMathStatRankingTiesStrategyEnum *OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_TIES_STRATEGY_;

@implementation OrgApacheCommonsMathStatRankingNaturalRanking

- (instancetype)init {
  OrgApacheCommonsMathStatRankingNaturalRanking_init(self);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathStatRankingTiesStrategyEnum:(OrgApacheCommonsMathStatRankingTiesStrategyEnum *)tiesStrategy {
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingTiesStrategyEnum_(self, tiesStrategy);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum:(OrgApacheCommonsMathStatRankingNaNStrategyEnum *)nanStrategy {
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_(self, nanStrategy);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum:(OrgApacheCommonsMathStatRankingNaNStrategyEnum *)nanStrategy
                   withOrgApacheCommonsMathStatRankingTiesStrategyEnum:(OrgApacheCommonsMathStatRankingTiesStrategyEnum *)tiesStrategy {
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_withOrgApacheCommonsMathStatRankingTiesStrategyEnum_(self, nanStrategy, tiesStrategy);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathRandomRandomGenerator:(id<OrgApacheCommonsMathRandomRandomGenerator>)randomGenerator {
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathRandomRandomGenerator_(self, randomGenerator);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum:(OrgApacheCommonsMathStatRankingNaNStrategyEnum *)nanStrategy
                         withOrgApacheCommonsMathRandomRandomGenerator:(id<OrgApacheCommonsMathRandomRandomGenerator>)randomGenerator {
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_withOrgApacheCommonsMathRandomRandomGenerator_(self, nanStrategy, randomGenerator);
  return self;
}

- (OrgApacheCommonsMathStatRankingNaNStrategyEnum *)getNanStrategy {
  return nanStrategy_;
}

- (OrgApacheCommonsMathStatRankingTiesStrategyEnum *)getTiesStrategy {
  return tiesStrategy_;
}

- (IOSDoubleArray *)rankWithDoubleArray:(IOSDoubleArray *)data {
  IOSObjectArray *ranks = [IOSObjectArray newArrayWithLength:((IOSDoubleArray *) nil_chk(data))->size_ type:OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_class_()];
  for (jint i = 0; i < data->size_; i++) {
    (void) IOSObjectArray_Set(ranks, i, new_OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_(IOSDoubleArray_Get(data, i), i));
  }
  id<JavaUtilList> nanPositions = nil;
  switch ([nanStrategy_ ordinal]) {
    case OrgApacheCommonsMathStatRankingNaNStrategy_MAXIMAL:
    OrgApacheCommonsMathStatRankingNaturalRanking_recodeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_withDouble_(self, ranks, JavaLangDouble_POSITIVE_INFINITY);
    break;
    case OrgApacheCommonsMathStatRankingNaNStrategy_MINIMAL:
    OrgApacheCommonsMathStatRankingNaturalRanking_recodeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_withDouble_(self, ranks, JavaLangDouble_NEGATIVE_INFINITY);
    break;
    case OrgApacheCommonsMathStatRankingNaNStrategy_REMOVED:
    ranks = OrgApacheCommonsMathStatRankingNaturalRanking_removeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(self, ranks);
    break;
    case OrgApacheCommonsMathStatRankingNaNStrategy_FIXED:
    nanPositions = OrgApacheCommonsMathStatRankingNaturalRanking_getNanPositionsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(self, ranks);
    break;
    default:
    @throw new_OrgApacheCommonsMathExceptionMathInternalError_init();
  }
  JavaUtilArrays_sortWithNSObjectArray_(ranks);
  IOSDoubleArray *out = [IOSDoubleArray newArrayWithLength:((IOSObjectArray *) nil_chk(ranks))->size_];
  jint pos = 1;
  *IOSDoubleArray_GetRef(out, [((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, 0))) getPosition]) = pos;
  id<JavaUtilList> tiesTrace = new_JavaUtilArrayList_init();
  [tiesTrace addWithId:JavaLangInteger_valueOfWithInt_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, 0))) getPosition])];
  for (jint i = 1; i < ranks->size_; i++) {
    if (JavaLangDouble_compareWithDouble_withDouble_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getValue], [((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i - 1))) getValue]) > 0) {
      pos = i + 1;
      if ([tiesTrace size] > 1) {
        OrgApacheCommonsMathStatRankingNaturalRanking_resolveTieWithDoubleArray_withJavaUtilList_(self, out, tiesTrace);
      }
      tiesTrace = new_JavaUtilArrayList_init();
      [tiesTrace addWithId:JavaLangInteger_valueOfWithInt_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getPosition])];
    }
    else {
      [tiesTrace addWithId:JavaLangInteger_valueOfWithInt_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getPosition])];
    }
    *IOSDoubleArray_GetRef(out, [((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getPosition]) = pos;
  }
  if ([tiesTrace size] > 1) {
    OrgApacheCommonsMathStatRankingNaturalRanking_resolveTieWithDoubleArray_withJavaUtilList_(self, out, tiesTrace);
  }
  if (nanStrategy_ == OrgApacheCommonsMathStatRankingNaNStrategyEnum_get_FIXED()) {
    OrgApacheCommonsMathStatRankingNaturalRanking_restoreNaNsWithDoubleArray_withJavaUtilList_(self, out, nanPositions);
  }
  return out;
}

- (IOSObjectArray *)removeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:(IOSObjectArray *)ranks {
  return OrgApacheCommonsMathStatRankingNaturalRanking_removeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(self, ranks);
}

- (void)recodeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:(IOSObjectArray *)ranks
                                                                            withDouble:(jdouble)value {
  OrgApacheCommonsMathStatRankingNaturalRanking_recodeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_withDouble_(self, ranks, value);
}

- (jboolean)containsNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:(IOSObjectArray *)ranks {
  return OrgApacheCommonsMathStatRankingNaturalRanking_containsNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(self, ranks);
}

- (void)resolveTieWithDoubleArray:(IOSDoubleArray *)ranks
                 withJavaUtilList:(id<JavaUtilList>)tiesTrace {
  OrgApacheCommonsMathStatRankingNaturalRanking_resolveTieWithDoubleArray_withJavaUtilList_(self, ranks, tiesTrace);
}

- (void)fillWithDoubleArray:(IOSDoubleArray *)data
           withJavaUtilList:(id<JavaUtilList>)tiesTrace
                 withDouble:(jdouble)value {
  OrgApacheCommonsMathStatRankingNaturalRanking_fillWithDoubleArray_withJavaUtilList_withDouble_(self, data, tiesTrace, value);
}

- (void)restoreNaNsWithDoubleArray:(IOSDoubleArray *)ranks
                  withJavaUtilList:(id<JavaUtilList>)nanPositions {
  OrgApacheCommonsMathStatRankingNaturalRanking_restoreNaNsWithDoubleArray_withJavaUtilList_(self, ranks, nanPositions);
}

- (id<JavaUtilList>)getNanPositionsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:(IOSObjectArray *)ranks {
  return OrgApacheCommonsMathStatRankingNaturalRanking_getNanPositionsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(self, ranks);
}

+ (void)initialize {
  if (self == [OrgApacheCommonsMathStatRankingNaturalRanking class]) {
    OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_NAN_STRATEGY_ = OrgApacheCommonsMathStatRankingNaNStrategyEnum_get_MAXIMAL();
    OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_TIES_STRATEGY_ = OrgApacheCommonsMathStatRankingTiesStrategyEnum_get_AVERAGE();
    J2OBJC_SET_INITIALIZED(OrgApacheCommonsMathStatRankingNaturalRanking)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "NaturalRanking", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsMathStatRankingTiesStrategyEnum:", "NaturalRanking", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum:", "NaturalRanking", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum:withOrgApacheCommonsMathStatRankingTiesStrategyEnum:", "NaturalRanking", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsMathRandomRandomGenerator:", "NaturalRanking", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum:withOrgApacheCommonsMathRandomRandomGenerator:", "NaturalRanking", NULL, 0x1, NULL, NULL },
    { "getNanStrategy", NULL, "Lorg.apache.commons.math.stat.ranking.NaNStrategy;", 0x1, NULL, NULL },
    { "getTiesStrategy", NULL, "Lorg.apache.commons.math.stat.ranking.TiesStrategy;", 0x1, NULL, NULL },
    { "rankWithDoubleArray:", "rank", "[D", 0x1, NULL, NULL },
    { "removeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:", "removeNaNs", "[Lorg.apache.commons.math.stat.ranking.NaturalRanking$IntDoublePair;", 0x2, NULL, NULL },
    { "recodeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:withDouble:", "recodeNaNs", "V", 0x2, NULL, NULL },
    { "containsNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:", "containsNaNs", "Z", 0x2, NULL, NULL },
    { "resolveTieWithDoubleArray:withJavaUtilList:", "resolveTie", "V", 0x2, NULL, NULL },
    { "fillWithDoubleArray:withJavaUtilList:withDouble:", "fill", "V", 0x2, NULL, NULL },
    { "restoreNaNsWithDoubleArray:withJavaUtilList:", "restoreNaNs", "V", 0x2, NULL, NULL },
    { "getNanPositionsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray:", "getNanPositions", "Ljava.util.List;", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "DEFAULT_NAN_STRATEGY_", NULL, 0x19, "Lorg.apache.commons.math.stat.ranking.NaNStrategy;", &OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_NAN_STRATEGY_, NULL,  },
    { "DEFAULT_TIES_STRATEGY_", NULL, 0x19, "Lorg.apache.commons.math.stat.ranking.TiesStrategy;", &OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_TIES_STRATEGY_, NULL,  },
    { "nanStrategy_", NULL, 0x12, "Lorg.apache.commons.math.stat.ranking.NaNStrategy;", NULL, NULL,  },
    { "tiesStrategy_", NULL, 0x12, "Lorg.apache.commons.math.stat.ranking.TiesStrategy;", NULL, NULL,  },
    { "randomData_", NULL, 0x12, "Lorg.apache.commons.math.random.RandomData;", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lorg.apache.commons.math.stat.ranking.NaturalRanking$IntDoublePair;"};
  static const J2ObjcClassInfo _OrgApacheCommonsMathStatRankingNaturalRanking = { 2, "NaturalRanking", "org.apache.commons.math.stat.ranking", NULL, 0x1, 16, methods, 5, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_OrgApacheCommonsMathStatRankingNaturalRanking;
}

@end

void OrgApacheCommonsMathStatRankingNaturalRanking_init(OrgApacheCommonsMathStatRankingNaturalRanking *self) {
  (void) NSObject_init(self);
  self->tiesStrategy_ = OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_TIES_STRATEGY_;
  self->nanStrategy_ = OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_NAN_STRATEGY_;
  self->randomData_ = nil;
}

OrgApacheCommonsMathStatRankingNaturalRanking *new_OrgApacheCommonsMathStatRankingNaturalRanking_init() {
  OrgApacheCommonsMathStatRankingNaturalRanking *self = [OrgApacheCommonsMathStatRankingNaturalRanking alloc];
  OrgApacheCommonsMathStatRankingNaturalRanking_init(self);
  return self;
}

void OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingTiesStrategyEnum_(OrgApacheCommonsMathStatRankingNaturalRanking *self, OrgApacheCommonsMathStatRankingTiesStrategyEnum *tiesStrategy) {
  (void) NSObject_init(self);
  self->tiesStrategy_ = tiesStrategy;
  self->nanStrategy_ = OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_NAN_STRATEGY_;
  self->randomData_ = new_OrgApacheCommonsMathRandomRandomDataImpl_init();
}

OrgApacheCommonsMathStatRankingNaturalRanking *new_OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingTiesStrategyEnum_(OrgApacheCommonsMathStatRankingTiesStrategyEnum *tiesStrategy) {
  OrgApacheCommonsMathStatRankingNaturalRanking *self = [OrgApacheCommonsMathStatRankingNaturalRanking alloc];
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingTiesStrategyEnum_(self, tiesStrategy);
  return self;
}

void OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_(OrgApacheCommonsMathStatRankingNaturalRanking *self, OrgApacheCommonsMathStatRankingNaNStrategyEnum *nanStrategy) {
  (void) NSObject_init(self);
  self->nanStrategy_ = nanStrategy;
  self->tiesStrategy_ = OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_TIES_STRATEGY_;
  self->randomData_ = nil;
}

OrgApacheCommonsMathStatRankingNaturalRanking *new_OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_(OrgApacheCommonsMathStatRankingNaNStrategyEnum *nanStrategy) {
  OrgApacheCommonsMathStatRankingNaturalRanking *self = [OrgApacheCommonsMathStatRankingNaturalRanking alloc];
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_(self, nanStrategy);
  return self;
}

void OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_withOrgApacheCommonsMathStatRankingTiesStrategyEnum_(OrgApacheCommonsMathStatRankingNaturalRanking *self, OrgApacheCommonsMathStatRankingNaNStrategyEnum *nanStrategy, OrgApacheCommonsMathStatRankingTiesStrategyEnum *tiesStrategy) {
  (void) NSObject_init(self);
  self->nanStrategy_ = nanStrategy;
  self->tiesStrategy_ = tiesStrategy;
  self->randomData_ = new_OrgApacheCommonsMathRandomRandomDataImpl_init();
}

OrgApacheCommonsMathStatRankingNaturalRanking *new_OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_withOrgApacheCommonsMathStatRankingTiesStrategyEnum_(OrgApacheCommonsMathStatRankingNaNStrategyEnum *nanStrategy, OrgApacheCommonsMathStatRankingTiesStrategyEnum *tiesStrategy) {
  OrgApacheCommonsMathStatRankingNaturalRanking *self = [OrgApacheCommonsMathStatRankingNaturalRanking alloc];
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_withOrgApacheCommonsMathStatRankingTiesStrategyEnum_(self, nanStrategy, tiesStrategy);
  return self;
}

void OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathRandomRandomGenerator_(OrgApacheCommonsMathStatRankingNaturalRanking *self, id<OrgApacheCommonsMathRandomRandomGenerator> randomGenerator) {
  (void) NSObject_init(self);
  self->tiesStrategy_ = OrgApacheCommonsMathStatRankingTiesStrategyEnum_get_RANDOM();
  self->nanStrategy_ = OrgApacheCommonsMathStatRankingNaturalRanking_DEFAULT_NAN_STRATEGY_;
  self->randomData_ = new_OrgApacheCommonsMathRandomRandomDataImpl_initWithOrgApacheCommonsMathRandomRandomGenerator_(randomGenerator);
}

OrgApacheCommonsMathStatRankingNaturalRanking *new_OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathRandomRandomGenerator_(id<OrgApacheCommonsMathRandomRandomGenerator> randomGenerator) {
  OrgApacheCommonsMathStatRankingNaturalRanking *self = [OrgApacheCommonsMathStatRankingNaturalRanking alloc];
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathRandomRandomGenerator_(self, randomGenerator);
  return self;
}

void OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_withOrgApacheCommonsMathRandomRandomGenerator_(OrgApacheCommonsMathStatRankingNaturalRanking *self, OrgApacheCommonsMathStatRankingNaNStrategyEnum *nanStrategy, id<OrgApacheCommonsMathRandomRandomGenerator> randomGenerator) {
  (void) NSObject_init(self);
  self->nanStrategy_ = nanStrategy;
  self->tiesStrategy_ = OrgApacheCommonsMathStatRankingTiesStrategyEnum_get_RANDOM();
  self->randomData_ = new_OrgApacheCommonsMathRandomRandomDataImpl_initWithOrgApacheCommonsMathRandomRandomGenerator_(randomGenerator);
}

OrgApacheCommonsMathStatRankingNaturalRanking *new_OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_withOrgApacheCommonsMathRandomRandomGenerator_(OrgApacheCommonsMathStatRankingNaNStrategyEnum *nanStrategy, id<OrgApacheCommonsMathRandomRandomGenerator> randomGenerator) {
  OrgApacheCommonsMathStatRankingNaturalRanking *self = [OrgApacheCommonsMathStatRankingNaturalRanking alloc];
  OrgApacheCommonsMathStatRankingNaturalRanking_initWithOrgApacheCommonsMathStatRankingNaNStrategyEnum_withOrgApacheCommonsMathRandomRandomGenerator_(self, nanStrategy, randomGenerator);
  return self;
}

IOSObjectArray *OrgApacheCommonsMathStatRankingNaturalRanking_removeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSObjectArray *ranks) {
  if (!OrgApacheCommonsMathStatRankingNaturalRanking_containsNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(self, ranks)) {
    return ranks;
  }
  IOSObjectArray *outRanks = [IOSObjectArray newArrayWithLength:((IOSObjectArray *) nil_chk(ranks))->size_ type:OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_class_()];
  jint j = 0;
  for (jint i = 0; i < ranks->size_; i++) {
    if (JavaLangDouble_isNaNWithDouble_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getValue])) {
      for (jint k = i + 1; k < ranks->size_; k++) {
        (void) IOSObjectArray_Set(ranks, k, new_OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, k))) getValue], [((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, k))) getPosition] - 1));
      }
    }
    else {
      (void) IOSObjectArray_Set(outRanks, j, new_OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getValue], [((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getPosition]));
      j++;
    }
  }
  IOSObjectArray *returnRanks = [IOSObjectArray newArrayWithLength:j type:OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_class_()];
  JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(outRanks, 0, returnRanks, 0, j);
  return returnRanks;
}

void OrgApacheCommonsMathStatRankingNaturalRanking_recodeNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_withDouble_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSObjectArray *ranks, jdouble value) {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(ranks))->size_; i++) {
    if (JavaLangDouble_isNaNWithDouble_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getValue])) {
      (void) IOSObjectArray_Set(ranks, i, new_OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_(value, [((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getPosition]));
    }
  }
}

jboolean OrgApacheCommonsMathStatRankingNaturalRanking_containsNaNsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSObjectArray *ranks) {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(ranks))->size_; i++) {
    if (JavaLangDouble_isNaNWithDouble_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getValue])) {
      return YES;
    }
  }
  return NO;
}

void OrgApacheCommonsMathStatRankingNaturalRanking_resolveTieWithDoubleArray_withJavaUtilList_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSDoubleArray *ranks, id<JavaUtilList> tiesTrace) {
  jdouble c = IOSDoubleArray_Get(nil_chk(ranks), [((JavaLangInteger *) nil_chk([((id<JavaUtilList>) nil_chk(tiesTrace)) getWithInt:0])) intValue]);
  jint length = [tiesTrace size];
  {
    id<JavaUtilIterator> iterator;
    jlong f;
    jint i;
    switch ([self->tiesStrategy_ ordinal]) {
      case OrgApacheCommonsMathStatRankingTiesStrategy_AVERAGE:
      OrgApacheCommonsMathStatRankingNaturalRanking_fillWithDoubleArray_withJavaUtilList_withDouble_(self, ranks, tiesTrace, (2 * c + length - 1) / 2.0);
      break;
      case OrgApacheCommonsMathStatRankingTiesStrategy_MAXIMUM:
      OrgApacheCommonsMathStatRankingNaturalRanking_fillWithDoubleArray_withJavaUtilList_withDouble_(self, ranks, tiesTrace, c + length - 1);
      break;
      case OrgApacheCommonsMathStatRankingTiesStrategy_MINIMUM:
      OrgApacheCommonsMathStatRankingNaturalRanking_fillWithDoubleArray_withJavaUtilList_withDouble_(self, ranks, tiesTrace, c);
      break;
      case OrgApacheCommonsMathStatRankingTiesStrategy_RANDOM:
      iterator = [tiesTrace iterator];
      f = OrgApacheCommonsMathUtilFastMath_roundWithDouble_(c);
      while ([((id<JavaUtilIterator>) nil_chk(iterator)) hasNext]) {
        *IOSDoubleArray_GetRef(ranks, [((JavaLangInteger *) nil_chk([iterator next])) intValue]) = [((id<OrgApacheCommonsMathRandomRandomData>) nil_chk(self->randomData_)) nextLongWithLong:f withLong:f + length - 1];
      }
      break;
      case OrgApacheCommonsMathStatRankingTiesStrategy_SEQUENTIAL:
      iterator = [tiesTrace iterator];
      f = OrgApacheCommonsMathUtilFastMath_roundWithDouble_(c);
      i = 0;
      while ([((id<JavaUtilIterator>) nil_chk(iterator)) hasNext]) {
        *IOSDoubleArray_GetRef(ranks, [((JavaLangInteger *) nil_chk([iterator next])) intValue]) = f + i++;
      }
      break;
      default:
      @throw new_OrgApacheCommonsMathExceptionMathInternalError_init();
    }
  }
}

void OrgApacheCommonsMathStatRankingNaturalRanking_fillWithDoubleArray_withJavaUtilList_withDouble_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSDoubleArray *data, id<JavaUtilList> tiesTrace, jdouble value) {
  id<JavaUtilIterator> iterator = [((id<JavaUtilList>) nil_chk(tiesTrace)) iterator];
  while ([((id<JavaUtilIterator>) nil_chk(iterator)) hasNext]) {
    *IOSDoubleArray_GetRef(nil_chk(data), [((JavaLangInteger *) nil_chk([iterator next])) intValue]) = value;
  }
}

void OrgApacheCommonsMathStatRankingNaturalRanking_restoreNaNsWithDoubleArray_withJavaUtilList_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSDoubleArray *ranks, id<JavaUtilList> nanPositions) {
  if ([((id<JavaUtilList>) nil_chk(nanPositions)) size] == 0) {
    return;
  }
  id<JavaUtilIterator> iterator = [nanPositions iterator];
  while ([((id<JavaUtilIterator>) nil_chk(iterator)) hasNext]) {
    *IOSDoubleArray_GetRef(nil_chk(ranks), [((JavaLangInteger *) nil_chk([iterator next])) intValue]) = JavaLangDouble_NaN;
  }
}

id<JavaUtilList> OrgApacheCommonsMathStatRankingNaturalRanking_getNanPositionsWithOrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePairArray_(OrgApacheCommonsMathStatRankingNaturalRanking *self, IOSObjectArray *ranks) {
  JavaUtilArrayList *out = new_JavaUtilArrayList_init();
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(ranks))->size_; i++) {
    if (JavaLangDouble_isNaNWithDouble_([((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(IOSObjectArray_Get(ranks, i))) getValue])) {
      [out addWithId:JavaLangInteger_valueOfWithInt_(i)];
    }
  }
  return out;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathStatRankingNaturalRanking)

@implementation OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair

- (instancetype)initWithDouble:(jdouble)value
                       withInt:(jint)position {
  OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_(self, value, position);
  return self;
}

- (jint)compareToWithId:(OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *)other {
  (void) check_class_cast(other, [OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair class]);
  return JavaLangDouble_compareWithDouble_withDouble_(value_, ((OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *) nil_chk(other))->value_);
}

- (jdouble)getValue {
  return value_;
}

- (jint)getPosition {
  return position_;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithDouble:withInt:", "IntDoublePair", NULL, 0x1, NULL, NULL },
    { "compareToWithId:", "compareTo", "I", 0x1, NULL, NULL },
    { "getValue", NULL, "D", 0x1, NULL, NULL },
    { "getPosition", NULL, "I", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "value_", NULL, 0x12, "D", NULL, NULL,  },
    { "position_", NULL, 0x12, "I", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair = { 2, "IntDoublePair", "org.apache.commons.math.stat.ranking", "NaturalRanking", 0xa, 4, methods, 2, fields, 0, NULL, 0, NULL, NULL, "Ljava/lang/Object;Ljava/lang/Comparable<Lorg/apache/commons/math/stat/ranking/NaturalRanking$IntDoublePair;>;" };
  return &_OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair;
}

@end

void OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_(OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *self, jdouble value, jint position) {
  (void) NSObject_init(self);
  self->value_ = value;
  self->position_ = position;
}

OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *new_OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_(jdouble value, jint position) {
  OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair *self = [OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair alloc];
  OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair_initWithDouble_withInt_(self, value, position);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathStatRankingNaturalRanking_IntDoublePair)
