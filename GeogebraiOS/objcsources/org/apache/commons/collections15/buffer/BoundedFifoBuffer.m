//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/GeoGebraiOSARC/GeoGebraiOSARC/javasources/org/apache/commons/collections15/buffer/BoundedFifoBuffer.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/io/ObjectInputStream.h"
#include "java/io/ObjectOutputStream.h"
#include "java/lang/ClassNotFoundException.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/NullPointerException.h"
#include "java/util/AbstractCollection.h"
#include "java/util/Arrays.h"
#include "java/util/Collection.h"
#include "java/util/Iterator.h"
#include "java/util/NoSuchElementException.h"
#include "org/apache/commons/collections15/BufferOverflowException.h"
#include "org/apache/commons/collections15/BufferUnderflowException.h"
#include "org/apache/commons/collections15/buffer/BoundedFifoBuffer.h"

#define OrgApacheCommonsCollections15BufferBoundedFifoBuffer_serialVersionUID 5603722811189451017LL

@interface OrgApacheCommonsCollections15BufferBoundedFifoBuffer () {
 @public
  IOSObjectArray *elements_;
  jint start_;
  jint end_;
  jboolean full_;
  jint maxElements_;
}

- (void)writeObjectWithJavaIoObjectOutputStream:(JavaIoObjectOutputStream *)outArg;

- (void)readObjectWithJavaIoObjectInputStream:(JavaIoObjectInputStream *)inArg;

- (jint)incrementWithInt:(jint)index;

- (jint)decrementWithInt:(jint)index;

@end

J2OBJC_FIELD_SETTER(OrgApacheCommonsCollections15BufferBoundedFifoBuffer, elements_, IOSObjectArray *)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsCollections15BufferBoundedFifoBuffer, serialVersionUID, jlong)

__attribute__((unused)) static jint OrgApacheCommonsCollections15BufferBoundedFifoBuffer_incrementWithInt_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self, jint index);

__attribute__((unused)) static jint OrgApacheCommonsCollections15BufferBoundedFifoBuffer_decrementWithInt_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self, jint index);

@interface OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1 : NSObject < JavaUtilIterator > {
 @public
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer *this$0_;
  jint index_;
  jint lastReturnedIndex_;
  jboolean isFirst_;
}

- (jboolean)hasNext;

- (id)next;

- (void)remove;

- (instancetype)initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer:(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1)

J2OBJC_FIELD_SETTER(OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1, this$0_, OrgApacheCommonsCollections15BufferBoundedFifoBuffer *)

__attribute__((unused)) static void OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1_initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1 *self, OrgApacheCommonsCollections15BufferBoundedFifoBuffer *outer$);

__attribute__((unused)) static OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1 *new_OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1_initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1)

@implementation OrgApacheCommonsCollections15BufferBoundedFifoBuffer

- (instancetype)init {
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_init(self);
  return self;
}

- (instancetype)initWithInt:(jint)size {
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithInt_(self, size);
  return self;
}

- (instancetype)initWithJavaUtilCollection:(id<JavaUtilCollection>)coll {
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithJavaUtilCollection_(self, coll);
  return self;
}

- (void)writeObjectWithJavaIoObjectOutputStream:(JavaIoObjectOutputStream *)outArg {
  [((JavaIoObjectOutputStream *) nil_chk(outArg)) defaultWriteObject];
  [outArg writeIntWithInt:[self size]];
  for (id<JavaUtilIterator> it = [self iterator]; [((id<JavaUtilIterator>) nil_chk(it)) hasNext]; ) {
    [outArg writeObjectWithId:[it next]];
  }
}

- (void)readObjectWithJavaIoObjectInputStream:(JavaIoObjectInputStream *)inArg {
  [((JavaIoObjectInputStream *) nil_chk(inArg)) defaultReadObject];
  elements_ = (IOSObjectArray *) check_class_cast([IOSObjectArray newArrayWithLength:maxElements_ type:NSObject_class_()], [IOSObjectArray class]);
  jint size = [inArg readInt];
  for (jint i = 0; i < size; i++) {
    (void) IOSObjectArray_Set(elements_, i, (id) [inArg readObject]);
  }
  start_ = 0;
  full_ = (size == maxElements_);
  if (full_) {
    end_ = 0;
  }
  else {
    end_ = size;
  }
}

- (jint)size {
  jint size = 0;
  if (end_ < start_) {
    size = maxElements_ - start_ + end_;
  }
  else if (end_ == start_) {
    size = (full_ ? maxElements_ : 0);
  }
  else {
    size = end_ - start_;
  }
  return size;
}

- (jboolean)isEmpty {
  return [self size] == 0;
}

- (jboolean)isFull {
  return [self size] == maxElements_;
}

- (jint)maxSize {
  return maxElements_;
}

- (void)clear {
  full_ = NO;
  start_ = 0;
  end_ = 0;
  JavaUtilArrays_fillWithNSObjectArray_withId_(elements_, nil);
}

- (jboolean)addWithId:(id)element {
  if (nil == element) {
    @throw new_JavaLangNullPointerException_initWithNSString_(@"Attempted to add null object to buffer");
  }
  if (full_) {
    @throw new_OrgApacheCommonsCollections15BufferOverflowException_initWithNSString_(JreStrcat("$I$", @"The buffer cannot hold more than ", maxElements_, @" objects."));
  }
  (void) IOSObjectArray_Set(nil_chk(elements_), end_++, element);
  if (end_ >= maxElements_) {
    end_ = 0;
  }
  if (end_ == start_) {
    full_ = YES;
  }
  return YES;
}

- (id)get {
  if ([self isEmpty]) {
    @throw new_OrgApacheCommonsCollections15BufferUnderflowException_initWithNSString_(@"The buffer is already empty");
  }
  return IOSObjectArray_Get(nil_chk(elements_), start_);
}

- (id)remove {
  if ([self isEmpty]) {
    @throw new_OrgApacheCommonsCollections15BufferUnderflowException_initWithNSString_(@"The buffer is already empty");
  }
  id element = IOSObjectArray_Get(nil_chk(elements_), start_);
  if (nil != element) {
    (void) IOSObjectArray_Set(elements_, start_++, nil);
    if (start_ >= maxElements_) {
      start_ = 0;
    }
    full_ = NO;
  }
  return element;
}

- (jint)incrementWithInt:(jint)index {
  return OrgApacheCommonsCollections15BufferBoundedFifoBuffer_incrementWithInt_(self, index);
}

- (jint)decrementWithInt:(jint)index {
  return OrgApacheCommonsCollections15BufferBoundedFifoBuffer_decrementWithInt_(self, index);
}

- (id<JavaUtilIterator>)iterator {
  return new_OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1_initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer_(self);
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "BoundedFifoBuffer", NULL, 0x1, NULL, NULL },
    { "initWithInt:", "BoundedFifoBuffer", NULL, 0x1, NULL, NULL },
    { "initWithJavaUtilCollection:", "BoundedFifoBuffer", NULL, 0x1, NULL, NULL },
    { "writeObjectWithJavaIoObjectOutputStream:", "writeObject", "V", 0x2, "Ljava.io.IOException;", NULL },
    { "readObjectWithJavaIoObjectInputStream:", "readObject", "V", 0x2, "Ljava.io.IOException;Ljava.lang.ClassNotFoundException;", NULL },
    { "size", NULL, "I", 0x1, NULL, NULL },
    { "isEmpty", NULL, "Z", 0x1, NULL, NULL },
    { "isFull", NULL, "Z", 0x1, NULL, NULL },
    { "maxSize", NULL, "I", 0x1, NULL, NULL },
    { "clear", NULL, "V", 0x1, NULL, NULL },
    { "addWithId:", "add", "Z", 0x1, NULL, "(TE;)Z" },
    { "get", NULL, "TE;", 0x1, NULL, "()TE;" },
    { "remove", NULL, "TE;", 0x1, NULL, "()TE;" },
    { "incrementWithInt:", "increment", "I", 0x2, NULL, NULL },
    { "decrementWithInt:", "decrement", "I", 0x2, NULL, NULL },
    { "iterator", NULL, "Ljava.util.Iterator;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID_", NULL, 0x1a, "J", NULL, NULL, .constantValue.asLong = OrgApacheCommonsCollections15BufferBoundedFifoBuffer_serialVersionUID },
    { "elements_", NULL, 0x82, "[Ljava.lang.Object;", NULL, "[TE;",  },
    { "start_", NULL, 0x82, "I", NULL, NULL,  },
    { "end_", NULL, 0x82, "I", NULL, NULL,  },
    { "full_", NULL, 0x82, "Z", NULL, NULL,  },
    { "maxElements_", NULL, 0x12, "I", NULL, NULL,  },
  };
  static const char *superclass_type_args[] = {"TE;"};
  static const J2ObjcClassInfo _OrgApacheCommonsCollections15BufferBoundedFifoBuffer = { 2, "BoundedFifoBuffer", "org.apache.commons.collections15.buffer", NULL, 0x1, 16, methods, 6, fields, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Ljava/util/AbstractCollection<TE;>;Lorg/apache/commons/collections15/Buffer<TE;>;Lorg/apache/commons/collections15/BoundedCollection<TE;>;Ljava/io/Serializable;" };
  return &_OrgApacheCommonsCollections15BufferBoundedFifoBuffer;
}

@end

void OrgApacheCommonsCollections15BufferBoundedFifoBuffer_init(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self) {
  (void) OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithInt_(self, 32);
}

OrgApacheCommonsCollections15BufferBoundedFifoBuffer *new_OrgApacheCommonsCollections15BufferBoundedFifoBuffer_init() {
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self = [OrgApacheCommonsCollections15BufferBoundedFifoBuffer alloc];
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_init(self);
  return self;
}

void OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithInt_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self, jint size) {
  (void) JavaUtilAbstractCollection_init(self);
  self->start_ = 0;
  self->end_ = 0;
  self->full_ = NO;
  if (size <= 0) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"The size must be greater than 0");
  }
  self->elements_ = (IOSObjectArray *) check_class_cast([IOSObjectArray newArrayWithLength:size type:NSObject_class_()], [IOSObjectArray class]);
  self->maxElements_ = self->elements_->size_;
}

OrgApacheCommonsCollections15BufferBoundedFifoBuffer *new_OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithInt_(jint size) {
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self = [OrgApacheCommonsCollections15BufferBoundedFifoBuffer alloc];
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithInt_(self, size);
  return self;
}

void OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithJavaUtilCollection_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self, id<JavaUtilCollection> coll) {
  (void) OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithInt_(self, [((id<JavaUtilCollection>) nil_chk(coll)) size]);
  [self addAllWithJavaUtilCollection:coll];
}

OrgApacheCommonsCollections15BufferBoundedFifoBuffer *new_OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithJavaUtilCollection_(id<JavaUtilCollection> coll) {
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self = [OrgApacheCommonsCollections15BufferBoundedFifoBuffer alloc];
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_initWithJavaUtilCollection_(self, coll);
  return self;
}

jint OrgApacheCommonsCollections15BufferBoundedFifoBuffer_incrementWithInt_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self, jint index) {
  index++;
  if (index >= self->maxElements_) {
    index = 0;
  }
  return index;
}

jint OrgApacheCommonsCollections15BufferBoundedFifoBuffer_decrementWithInt_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *self, jint index) {
  index--;
  if (index < 0) {
    index = self->maxElements_ - 1;
  }
  return index;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsCollections15BufferBoundedFifoBuffer)

@implementation OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1

- (jboolean)hasNext {
  return isFirst_ || (index_ != this$0_->end_);
}

- (id)next {
  if (![self hasNext]) {
    @throw new_JavaUtilNoSuchElementException_init();
  }
  isFirst_ = NO;
  lastReturnedIndex_ = index_;
  index_ = OrgApacheCommonsCollections15BufferBoundedFifoBuffer_incrementWithInt_(this$0_, index_);
  return IOSObjectArray_Get(nil_chk(this$0_->elements_), lastReturnedIndex_);
}

- (void)remove {
  if (lastReturnedIndex_ == -1) {
    @throw new_JavaLangIllegalStateException_init();
  }
  if (lastReturnedIndex_ == this$0_->start_) {
    (void) [this$0_ remove];
    lastReturnedIndex_ = -1;
    return;
  }
  jint i = lastReturnedIndex_ + 1;
  while (i != this$0_->end_) {
    if (i >= this$0_->maxElements_) {
      (void) IOSObjectArray_Set(nil_chk(this$0_->elements_), i - 1, IOSObjectArray_Get(this$0_->elements_, 0));
      i = 0;
    }
    else {
      (void) IOSObjectArray_Set(nil_chk(this$0_->elements_), i - 1, IOSObjectArray_Get(this$0_->elements_, i));
      i++;
    }
  }
  lastReturnedIndex_ = -1;
  this$0_->end_ = OrgApacheCommonsCollections15BufferBoundedFifoBuffer_decrementWithInt_(this$0_, this$0_->end_);
  (void) IOSObjectArray_Set(nil_chk(this$0_->elements_), this$0_->end_, nil);
  this$0_->full_ = NO;
  index_ = OrgApacheCommonsCollections15BufferBoundedFifoBuffer_decrementWithInt_(this$0_, index_);
}

- (instancetype)initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer:(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *)outer$ {
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1_initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "hasNext", NULL, "Z", 0x1, NULL, NULL },
    { "next", NULL, "TE;", 0x1, NULL, "()TE;" },
    { "remove", NULL, "V", 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lorg.apache.commons.collections15.buffer.BoundedFifoBuffer;", NULL, NULL,  },
    { "index_", NULL, 0x2, "I", NULL, NULL,  },
    { "lastReturnedIndex_", NULL, 0x2, "I", NULL, NULL,  },
    { "isFirst_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "OrgApacheCommonsCollections15BufferBoundedFifoBuffer", "iterator" };
  static const J2ObjcClassInfo _OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1 = { 2, "", "org.apache.commons.collections15.buffer", "BoundedFifoBuffer", 0x8008, 4, methods, 4, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1;
}

@end

void OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1_initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1 *self, OrgApacheCommonsCollections15BufferBoundedFifoBuffer *outer$) {
  self->this$0_ = outer$;
  (void) NSObject_init(self);
  self->index_ = outer$->start_;
  self->lastReturnedIndex_ = -1;
  self->isFirst_ = outer$->full_;
}

OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1 *new_OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1_initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer_(OrgApacheCommonsCollections15BufferBoundedFifoBuffer *outer$) {
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1 *self = [OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1 alloc];
  OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1_initWithOrgApacheCommonsCollections15BufferBoundedFifoBuffer_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsCollections15BufferBoundedFifoBuffer_$1)
