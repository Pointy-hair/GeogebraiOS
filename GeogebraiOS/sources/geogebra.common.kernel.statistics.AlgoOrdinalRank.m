//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/statistics/AlgoOrdinalRank.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/arithmetic/NumberValue.h"
#include "geogebra/common/kernel/commands/Commands.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoList.h"
#include "geogebra/common/kernel/geos/GeoNumeric.h"
#include "geogebra/common/kernel/statistics/AlgoOrdinalRank.h"
#include "java/util/Comparator.h"
#include "java/util/Iterator.h"
#include "java/util/TreeSet.h"

@interface GeogebraCommonKernelStatisticsAlgoOrdinalRank () {
 @public
  GeogebraCommonKernelGeosGeoList *inputList_;
  GeogebraCommonKernelGeosGeoList *outputList_;
  jint size_;
}

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelStatisticsAlgoOrdinalRank, inputList_, GeogebraCommonKernelGeosGeoList *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelStatisticsAlgoOrdinalRank, outputList_, GeogebraCommonKernelGeosGeoList *)

static id<JavaUtilComparator> GeogebraCommonKernelStatisticsAlgoOrdinalRank_comparator_;
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelStatisticsAlgoOrdinalRank, comparator_, id<JavaUtilComparator>)
J2OBJC_STATIC_FIELD_SETTER(GeogebraCommonKernelStatisticsAlgoOrdinalRank, comparator_, id<JavaUtilComparator>)

__attribute__((unused)) static void GeogebraCommonKernelStatisticsAlgoOrdinalRank_compute(GeogebraCommonKernelStatisticsAlgoOrdinalRank *self);

@interface GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair : NSObject {
 @public
  jdouble x_;
  jint y_;
}

- (instancetype)initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank:(GeogebraCommonKernelStatisticsAlgoOrdinalRank *)outer$
                                                           withDouble:(jdouble)x
                                                              withInt:(jint)y;

@end

J2OBJC_EMPTY_STATIC_INIT(GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair)

__attribute__((unused)) static void GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair_initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank_withDouble_withInt_(GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *self, GeogebraCommonKernelStatisticsAlgoOrdinalRank *outer$, jdouble x, jint y);

__attribute__((unused)) static GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *new_GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair_initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank_withDouble_withInt_(GeogebraCommonKernelStatisticsAlgoOrdinalRank *outer$, jdouble x, jint y) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair)

@interface GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1 : NSObject < JavaUtilComparator >

- (jint)compareWithId:(id)a
               withId:(id)b;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1)

__attribute__((unused)) static void GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1_init(GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1 *self);

__attribute__((unused)) static GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1 *new_GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1)

@implementation GeogebraCommonKernelStatisticsAlgoOrdinalRank

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
                     withGeogebraCommonKernelGeosGeoList:(GeogebraCommonKernelGeosGeoList *)inputList {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_(self, cons, label, inputList);
  return self;
}

- (GeogebraCommonKernelCommandsCommandsEnum *)getClassName {
  return GeogebraCommonKernelCommandsCommandsEnum_get_OrdinalRank();
}

- (void)setInputOutput {
  GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:1 type:GeogebraCommonKernelGeosGeoElement_class_()]);
  IOSObjectArray_Set(input_, 0, inputList_);
  [self setOnlyOutputWithGeogebraCommonKernelGeosToGeoElement:outputList_];
  [self setDependencies];
}

- (GeogebraCommonKernelGeosGeoList *)getResult {
  return outputList_;
}

- (void)compute {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_compute(self);
}

+ (id<JavaUtilComparator>)getComparator {
  return GeogebraCommonKernelStatisticsAlgoOrdinalRank_getComparator();
}

- (void)dealloc {
  RELEASE_(inputList_);
  RELEASE_(outputList_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelGeosGeoList:", "AlgoOrdinalRank", NULL, 0x1, NULL, NULL },
    { "getClassName", NULL, "Lgeogebra.common.kernel.commands.Commands;", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "getResult", NULL, "Lgeogebra.common.kernel.geos.GeoList;", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "getComparator", NULL, "Ljava.util.Comparator;", 0x9, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "inputList_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "outputList_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "size_", NULL, 0x2, "I", NULL, NULL,  },
    { "comparator_", NULL, 0xa, "Ljava.util.Comparator;", &GeogebraCommonKernelStatisticsAlgoOrdinalRank_comparator_, NULL,  },
  };
  static const char *inner_classes[] = {"Lgeogebra.common.kernel.statistics.AlgoOrdinalRank$OrderedPair;"};
  static const J2ObjcClassInfo _GeogebraCommonKernelStatisticsAlgoOrdinalRank = { 2, "AlgoOrdinalRank", "geogebra.common.kernel.statistics", NULL, 0x1, 6, methods, 4, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_GeogebraCommonKernelStatisticsAlgoOrdinalRank;
}

@end

void GeogebraCommonKernelStatisticsAlgoOrdinalRank_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_(GeogebraCommonKernelStatisticsAlgoOrdinalRank *self, GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoList *inputList) {
  GeogebraCommonKernelAlgosAlgoElement_initWithGeogebraCommonKernelConstruction_(self, cons);
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_set_inputList_(self, inputList);
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_setAndConsume_outputList_(self, new_GeogebraCommonKernelGeosGeoList_initWithGeogebraCommonKernelConstruction_(cons));
  [self setInputOutput];
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_compute(self);
  [self->outputList_ setLabelWithNSString:label];
}

GeogebraCommonKernelStatisticsAlgoOrdinalRank *new_GeogebraCommonKernelStatisticsAlgoOrdinalRank_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_(GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoList *inputList) {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank *self = [GeogebraCommonKernelStatisticsAlgoOrdinalRank alloc];
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_(self, cons, label, inputList);
  return self;
}

void GeogebraCommonKernelStatisticsAlgoOrdinalRank_compute(GeogebraCommonKernelStatisticsAlgoOrdinalRank *self) {
  self->size_ = [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->inputList_)) size];
  if (![self->inputList_ isDefined] || self->size_ == 0) {
    [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->outputList_)) setUndefined];
    return;
  }
  GeogebraCommonKernelGeosGeoElement *geo0 = [self->inputList_ getWithInt:0];
  JavaUtilTreeSet *sortedSet;
  if ([GeogebraCommonKernelArithmeticNumberValue_class_() isInstance:geo0]) {
    sortedSet = [new_JavaUtilTreeSet_initWithJavaUtilComparator_(GeogebraCommonKernelStatisticsAlgoOrdinalRank_getComparator()) autorelease];
  }
  else {
    [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->outputList_)) setUndefined];
    return;
  }
  for (jint i = 0; i < self->size_; i++) {
    GeogebraCommonKernelGeosGeoElement *geo = [self->inputList_ getWithInt:i];
    if ([GeogebraCommonKernelArithmeticNumberValue_class_() isInstance:geo]) {
      id<GeogebraCommonKernelArithmeticNumberValue> num = (id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(geo, @protocol(GeogebraCommonKernelArithmeticNumberValue));
      GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *pair = [new_GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair_initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank_withDouble_withInt_(self, [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(num)) getDouble], i) autorelease];
      [((JavaUtilTreeSet *) nil_chk(sortedSet)) addWithId:pair];
    }
    else {
      [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->outputList_)) setUndefined];
      return;
    }
  }
  id<JavaUtilIterator> iterator = [((JavaUtilTreeSet *) nil_chk(sortedSet)) iterator];
  IOSDoubleArray *list = [IOSDoubleArray arrayWithLength:self->size_];
  jint i = 1;
  while ([((id<JavaUtilIterator>) nil_chk(iterator)) hasNext]) {
    GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *pair = [iterator next];
    *IOSDoubleArray_GetRef(list, ((GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *) nil_chk(pair))->y_) = i++;
  }
  [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->outputList_)) setDefinedWithBoolean:YES];
  [self->outputList_ clear];
  for (i = 0; i < self->size_; i++) {
    [self->outputList_ addWithGeogebraCommonKernelGeosGeoElement:[new_GeogebraCommonKernelGeosGeoNumeric_initWithGeogebraCommonKernelConstruction_withDouble_(self->cons_, IOSDoubleArray_Get(list, i)) autorelease]];
  }
}

id<JavaUtilComparator> GeogebraCommonKernelStatisticsAlgoOrdinalRank_getComparator() {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_initialize();
  if (GeogebraCommonKernelStatisticsAlgoOrdinalRank_comparator_ == nil) {
    JreStrongAssignAndConsume(&GeogebraCommonKernelStatisticsAlgoOrdinalRank_comparator_, nil, new_GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1_init());
  }
  return GeogebraCommonKernelStatisticsAlgoOrdinalRank_comparator_;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelStatisticsAlgoOrdinalRank)

@implementation GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair

- (instancetype)initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank:(GeogebraCommonKernelStatisticsAlgoOrdinalRank *)outer$
                                                           withDouble:(jdouble)x
                                                              withInt:(jint)y {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair_initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank_withDouble_withInt_(self, outer$, x, y);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank:withDouble:withInt:", "OrderedPair", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "x_", NULL, 0x1, "D", NULL, NULL,  },
    { "y_", NULL, 0x1, "I", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair = { 2, "OrderedPair", "geogebra.common.kernel.statistics", "AlgoOrdinalRank", 0x2, 1, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair;
}

@end

void GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair_initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank_withDouble_withInt_(GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *self, GeogebraCommonKernelStatisticsAlgoOrdinalRank *outer$, jdouble x, jint y) {
  NSObject_init(self);
  self->x_ = x;
  self->y_ = y;
}

GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *new_GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair_initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank_withDouble_withInt_(GeogebraCommonKernelStatisticsAlgoOrdinalRank *outer$, jdouble x, jint y) {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *self = [GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair alloc];
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair_initWithGeogebraCommonKernelStatisticsAlgoOrdinalRank_withDouble_withInt_(self, outer$, x, y);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair)

@implementation GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1

- (jint)compareWithId:(id)a
               withId:(id)b {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *itemA = (GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *) check_class_cast(a, [GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair class]);
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *itemB = (GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *) check_class_cast(b, [GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair class]);
  jdouble compX = ((GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *) nil_chk(itemA))->x_ - ((GeogebraCommonKernelStatisticsAlgoOrdinalRank_OrderedPair *) nil_chk(itemB))->x_;
  return compX < 0 ? -1 : +1;
}

- (instancetype)init {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "compareWithId:withId:", "compare", "I", 0x1, NULL, NULL },
    { "init", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "GeogebraCommonKernelStatisticsAlgoOrdinalRank", "getComparator" };
  static const J2ObjcClassInfo _GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1 = { 2, "", "geogebra.common.kernel.statistics", "AlgoOrdinalRank", 0x8008, 2, methods, 0, NULL, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1;
}

@end

void GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1_init(GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1 *self) {
  NSObject_init(self);
}

GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1 *new_GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1_init() {
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1 *self = [GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1 alloc];
  GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelStatisticsAlgoOrdinalRank_$1)
