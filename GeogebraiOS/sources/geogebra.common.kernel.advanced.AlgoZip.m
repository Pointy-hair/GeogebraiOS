//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/advanced/AlgoZip.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/advanced/AlgoZip.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/algos/AlgorithmSet.h"
#include "geogebra/common/kernel/algos/DrawInformationAlgo.h"
#include "geogebra/common/kernel/commands/Commands.h"
#include "geogebra/common/kernel/geos/CasEvaluableFunction.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoList.h"
#include "geogebra/common/kernel/geos/GeoNumeric.h"
#include "geogebra/common/main/App.h"

@interface GeogebraCommonKernelAdvancedAlgoZip () {
 @public
  GeogebraCommonKernelGeosGeoElement *expression_;
  IOSObjectArray *vars_;
  jint varCount_;
  jint listCount_;
  IOSObjectArray *over_;
  GeogebraCommonKernelGeosGeoList *list_;
  jint last_length_;
  jboolean expIsFunctionOrCurve_, isEmpty_;
  GeogebraCommonKernelAlgosAlgoElement *expressionParentAlgo_;
  jboolean updateRunning_;
}

- (void)createNewList;

- (void)addElementWithInt:(jint)i;

- (GeogebraCommonKernelGeosGeoElement *)createNewListElement;

- (void)updateListItems;

- (jint)minOverSize;

- (void)updateLocalVarWithInt:(jint)index;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoZip, expression_, GeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoZip, vars_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoZip, over_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoZip, list_, GeogebraCommonKernelGeosGeoList *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoZip, expressionParentAlgo_, GeogebraCommonKernelAlgosAlgoElement *)

__attribute__((unused)) static void GeogebraCommonKernelAdvancedAlgoZip_compute(GeogebraCommonKernelAdvancedAlgoZip *self);

__attribute__((unused)) static void GeogebraCommonKernelAdvancedAlgoZip_createNewList(GeogebraCommonKernelAdvancedAlgoZip *self);

__attribute__((unused)) static void GeogebraCommonKernelAdvancedAlgoZip_addElementWithInt_(GeogebraCommonKernelAdvancedAlgoZip *self, jint i);

__attribute__((unused)) static GeogebraCommonKernelGeosGeoElement *GeogebraCommonKernelAdvancedAlgoZip_createNewListElement(GeogebraCommonKernelAdvancedAlgoZip *self);

__attribute__((unused)) static void GeogebraCommonKernelAdvancedAlgoZip_updateListItems(GeogebraCommonKernelAdvancedAlgoZip *self);

__attribute__((unused)) static jint GeogebraCommonKernelAdvancedAlgoZip_minOverSize(GeogebraCommonKernelAdvancedAlgoZip *self);

__attribute__((unused)) static void GeogebraCommonKernelAdvancedAlgoZip_updateLocalVarWithInt_(GeogebraCommonKernelAdvancedAlgoZip *self, jint index);

@implementation GeogebraCommonKernelAdvancedAlgoZip

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
                  withGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)expression
             withGeogebraCommonKernelGeosGeoElementArray:(IOSObjectArray *)vars
                withGeogebraCommonKernelGeosGeoListArray:(IOSObjectArray *)over {
  GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(self, cons, label, expression, vars, over);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                  withGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)expression
             withGeogebraCommonKernelGeosGeoElementArray:(IOSObjectArray *)vars
                withGeogebraCommonKernelGeosGeoListArray:(IOSObjectArray *)over {
  GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(self, cons, expression, vars, over);
  return self;
}

- (GeogebraCommonKernelCommandsCommandsEnum *)getClassName {
  return GeogebraCommonKernelCommandsCommandsEnum_get_Zip();
}

- (void)setInputOutput {
  GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:1 + listCount_ + varCount_ type:GeogebraCommonKernelGeosGeoElement_class_()]);
  IOSObjectArray_Set(input_, 0, expression_);
  for (jint i = 0; i < listCount_; i++) {
    IOSObjectArray_Set(input_, 2 * i + 1, IOSObjectArray_Get(nil_chk(vars_), i));
    IOSObjectArray_Set(input_, 2 * i + 2, IOSObjectArray_Get(nil_chk(over_), i));
  }
  if (varCount_ > listCount_) {
    IOSObjectArray_Set(input_, listCount_ + varCount_, IOSObjectArray_Get(nil_chk(vars_), varCount_ - 1));
  }
  [self setOutputLengthWithInt:1];
  [self setOutputWithInt:0 withGeogebraCommonKernelGeosGeoElement:list_];
  [((GeogebraCommonKernelGeosGeoList *) nil_chk(list_)) setTypeStringForXMLWithNSString:[((GeogebraCommonKernelGeosGeoElement *) nil_chk(expression_)) getXMLtypeString]];
  [self setDependencies];
}

- (IOSObjectArray *)getInputForUpdateSetPropagation {
  IOSObjectArray *realInput = [IOSObjectArray arrayWithLength:listCount_ + 1 type:GeogebraCommonKernelGeosGeoElement_class_()];
  IOSObjectArray_Set(realInput, 0, expression_);
  for (jint i = 0; i < listCount_; i++) {
    IOSObjectArray_Set(realInput, i + 1, IOSObjectArray_Get(nil_chk(over_), i));
  }
  return realInput;
}

- (GeogebraCommonKernelGeosGeoList *)getList {
  return list_;
}

- (void)compute {
  GeogebraCommonKernelAdvancedAlgoZip_compute(self);
}

- (void)createNewList {
  GeogebraCommonKernelAdvancedAlgoZip_createNewList(self);
}

- (void)addElementWithInt:(jint)i {
  GeogebraCommonKernelAdvancedAlgoZip_addElementWithInt_(self, i);
}

- (GeogebraCommonKernelGeosGeoElement *)createNewListElement {
  return GeogebraCommonKernelAdvancedAlgoZip_createNewListElement(self);
}

- (void)updateListItems {
  GeogebraCommonKernelAdvancedAlgoZip_updateListItems(self);
}

- (jint)minOverSize {
  return GeogebraCommonKernelAdvancedAlgoZip_minOverSize(self);
}

- (void)updateLocalVarWithInt:(jint)index {
  GeogebraCommonKernelAdvancedAlgoZip_updateLocalVarWithInt_(self, index);
}

- (void)dealloc {
  RELEASE_(expression_);
  RELEASE_(vars_);
  RELEASE_(over_);
  RELEASE_(list_);
  RELEASE_(expressionParentAlgo_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelGeosGeoElement:withGeogebraCommonKernelGeosGeoElementArray:withGeogebraCommonKernelGeosGeoListArray:", "AlgoZip", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withGeogebraCommonKernelGeosGeoElement:withGeogebraCommonKernelGeosGeoElementArray:withGeogebraCommonKernelGeosGeoListArray:", "AlgoZip", NULL, 0x0, NULL, NULL },
    { "getClassName", NULL, "Lgeogebra.common.kernel.commands.Commands;", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "getInputForUpdateSetPropagation", NULL, "[Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "getList", NULL, "Lgeogebra.common.kernel.geos.GeoList;", 0x0, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "createNewList", NULL, "V", 0x2, NULL, NULL },
    { "addElementWithInt:", "addElement", "V", 0x2, NULL, NULL },
    { "createNewListElement", NULL, "Lgeogebra.common.kernel.geos.GeoElement;", 0x2, NULL, NULL },
    { "updateListItems", NULL, "V", 0x2, NULL, NULL },
    { "minOverSize", NULL, "I", 0x2, NULL, NULL },
    { "updateLocalVarWithInt:", "updateLocalVar", "V", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "expression_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "vars_", NULL, 0x2, "[Lgeogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "varCount_", NULL, 0x2, "I", NULL, NULL,  },
    { "listCount_", NULL, 0x2, "I", NULL, NULL,  },
    { "over_", NULL, 0x2, "[Lgeogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "list_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoList;", NULL, NULL,  },
    { "last_length_", NULL, 0x2, "I", NULL, NULL,  },
    { "expIsFunctionOrCurve_", NULL, 0x2, "Z", NULL, NULL,  },
    { "isEmpty_", NULL, 0x2, "Z", NULL, NULL,  },
    { "expressionParentAlgo_", NULL, 0x2, "Lgeogebra.common.kernel.algos.AlgoElement;", NULL, NULL,  },
    { "updateRunning_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelAdvancedAlgoZip = { 2, "AlgoZip", "geogebra.common.kernel.advanced", NULL, 0x1, 13, methods, 11, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelAdvancedAlgoZip;
}

@end

void GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(GeogebraCommonKernelAdvancedAlgoZip *self, GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoElement *expression, IOSObjectArray *vars, IOSObjectArray *over) {
  GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(self, cons, expression, vars, over);
  [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->list_)) setLabelWithNSString:label];
}

GeogebraCommonKernelAdvancedAlgoZip *new_GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoElement *expression, IOSObjectArray *vars, IOSObjectArray *over) {
  GeogebraCommonKernelAdvancedAlgoZip *self = [GeogebraCommonKernelAdvancedAlgoZip alloc];
  GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(self, cons, label, expression, vars, over);
  return self;
}

void GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(GeogebraCommonKernelAdvancedAlgoZip *self, GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoElement *expression, IOSObjectArray *vars, IOSObjectArray *over) {
  GeogebraCommonKernelAlgosAlgoElement_initWithGeogebraCommonKernelConstruction_(self, cons);
  self->last_length_ = 0;
  self->updateRunning_ = NO;
  GeogebraCommonKernelAdvancedAlgoZip_set_expression_(self, expression);
  GeogebraCommonKernelAdvancedAlgoZip_set_vars_(self, vars);
  GeogebraCommonKernelAdvancedAlgoZip_set_over_(self, over);
  self->listCount_ = ((IOSObjectArray *) nil_chk(over))->size_;
  self->varCount_ = ((IOSObjectArray *) nil_chk(vars))->size_;
  GeogebraCommonKernelAdvancedAlgoZip_set_expressionParentAlgo_(self, [((GeogebraCommonKernelGeosGeoElement *) nil_chk(expression)) getParentAlgorithm]);
  self->expIsFunctionOrCurve_ = [GeogebraCommonKernelGeosCasEvaluableFunction_class_() isInstance:expression];
  GeogebraCommonKernelAdvancedAlgoZip_setAndConsume_list_(self, new_GeogebraCommonKernelGeosGeoList_initWithGeogebraCommonKernelConstruction_(cons));
  [self setInputOutput];
  GeogebraCommonKernelAdvancedAlgoZip_compute(self);
}

GeogebraCommonKernelAdvancedAlgoZip *new_GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoElement *expression, IOSObjectArray *vars, IOSObjectArray *over) {
  GeogebraCommonKernelAdvancedAlgoZip *self = [GeogebraCommonKernelAdvancedAlgoZip alloc];
  GeogebraCommonKernelAdvancedAlgoZip_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelGeosGeoElementArray_withGeogebraCommonKernelGeosGeoListArray_(self, cons, expression, vars, over);
  return self;
}

void GeogebraCommonKernelAdvancedAlgoZip_compute(GeogebraCommonKernelAdvancedAlgoZip *self) {
  if (self->updateRunning_) return;
  self->updateRunning_ = YES;
  for (jint i = 2; i < ((IOSObjectArray *) nil_chk(self->input_))->size_; i += 2) {
    if (![((GeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(self->input_, i))) isDefined]) {
      [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->list_)) setUndefined];
      self->updateRunning_ = NO;
      return;
    }
  }
  [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->list_)) setDefinedWithBoolean:YES];
  self->isEmpty_ = (GeogebraCommonKernelAdvancedAlgoZip_minOverSize(self) == 0);
  jboolean setValuesOnly = GeogebraCommonKernelAdvancedAlgoZip_minOverSize(self) == self->last_length_;
  setValuesOnly = (setValuesOnly && !self->expIsFunctionOrCurve_);
  jboolean oldSuppressLabels = [((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) isSuppressLabelsActive];
  [self->cons_ setSuppressLabelCreationWithBoolean:YES];
  if (setValuesOnly) GeogebraCommonKernelAdvancedAlgoZip_updateListItems(self);
  else GeogebraCommonKernelAdvancedAlgoZip_createNewList(self);
  [self->cons_ setSuppressLabelCreationWithBoolean:oldSuppressLabels];
  self->updateRunning_ = NO;
}

void GeogebraCommonKernelAdvancedAlgoZip_createNewList(GeogebraCommonKernelAdvancedAlgoZip *self) {
  jint i = 0;
  jint oldListSize = [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->list_)) size];
  [self->list_ clear];
  if (!self->isEmpty_) {
    jint n = GeogebraCommonKernelAdvancedAlgoZip_minOverSize(self);
    [self->list_ ensureCapacityWithInt:n];
    jint currentVal = 0;
    while (currentVal < GeogebraCommonKernelAdvancedAlgoZip_minOverSize(self)) {
      if ([((GeogebraCommonMainApp *) nil_chk([((GeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getApplication])) freeMemoryIsCritical]) {
        jlong mem = [((GeogebraCommonMainApp *) nil_chk([self->kernel_ getApplication])) freeMemory];
        [self->list_ clearCache];
        [self->kernel_ initUndoInfo];
        GeogebraCommonMainApp_debugWithNSString_(JreStrcat("$J", @"AlgoZip aborted: free memory reached ", mem));
        return;
      }
      GeogebraCommonKernelAdvancedAlgoZip_updateLocalVarWithInt_(self, currentVal);
      GeogebraCommonKernelAdvancedAlgoZip_addElementWithInt_(self, i);
      currentVal += 1;
      i++;
    }
  }
  for (jint k = oldListSize - 1; k >= i; k--) {
    GeogebraCommonKernelGeosGeoElement *oldElement = [self->list_ getCachedWithInt:k];
    [((GeogebraCommonKernelGeosGeoElement *) nil_chk(oldElement)) setUndefined];
    [oldElement update];
  }
  self->last_length_ = GeogebraCommonKernelAdvancedAlgoZip_minOverSize(self);
}

void GeogebraCommonKernelAdvancedAlgoZip_addElementWithInt_(GeogebraCommonKernelAdvancedAlgoZip *self, jint i) {
  GeogebraCommonKernelGeosGeoElement *listElement = nil;
  jint cacheListSize = [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->list_)) getCacheSize];
  if (i < cacheListSize) {
    listElement = [self->list_ getCachedWithInt:i];
    if (self->expIsFunctionOrCurve_) {
      [((GeogebraCommonKernelGeosGeoElement *) nil_chk(listElement)) setParentAlgorithmWithGeogebraCommonKernelAlgosAlgoElement:nil];
      [listElement doRemove];
      listElement = GeogebraCommonKernelAdvancedAlgoZip_createNewListElement(self);
    }
  }
  else {
    listElement = GeogebraCommonKernelAdvancedAlgoZip_createNewListElement(self);
  }
  if (!self->expIsFunctionOrCurve_) {
    [((GeogebraCommonKernelGeosGeoElement *) nil_chk(listElement)) setWithGeogebraCommonKernelGeosGeoElement:self->expression_];
    if ([listElement isGeoList]) {
      for (jint j = 0; j < self->varCount_; j++) {
        [((GeogebraCommonKernelGeosGeoList *) check_class_cast(listElement, [GeogebraCommonKernelGeosGeoList class])) replaceChildrenByValuesWithGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(nil_chk(self->vars_), j)];
      }
    }
    GeogebraCommonKernelAlgosAlgoElement *drawAlgo = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->expression_)) getDrawAlgorithm];
    if ([listElement isKindOfClass:[GeogebraCommonKernelGeosGeoNumeric class]] && [GeogebraCommonKernelAlgosDrawInformationAlgo_class_() isInstance:drawAlgo]) {
      GeogebraCommonMainApp_debugWithNSString_([[((GeogebraCommonKernelAlgosAlgoElement *) nil_chk([self->expression_ getDrawAlgorithm])) getClass] getName]);
      [listElement setDrawAlgorithmWithGeogebraCommonKernelAlgosDrawInformationAlgo:[((id<GeogebraCommonKernelAlgosDrawInformationAlgo>) nil_chk(((id<GeogebraCommonKernelAlgosDrawInformationAlgo>) check_protocol_cast(drawAlgo, @protocol(GeogebraCommonKernelAlgosDrawInformationAlgo))))) copy__]];
      [listElement setEuclidianVisibleWithBoolean:YES];
    }
  }
  [((GeogebraCommonKernelGeosGeoElement *) nil_chk(listElement)) update];
  [self->list_ addWithGeogebraCommonKernelGeosGeoElement:listElement];
}

GeogebraCommonKernelGeosGeoElement *GeogebraCommonKernelAdvancedAlgoZip_createNewListElement(GeogebraCommonKernelAdvancedAlgoZip *self) {
  GeogebraCommonKernelGeosGeoElement *listElement = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->expression_)) copyInternalWithGeogebraCommonKernelConstruction:self->cons_];
  [((GeogebraCommonKernelGeosGeoElement *) nil_chk(listElement)) setParentAlgorithmWithGeogebraCommonKernelAlgosAlgoElement:self];
  [listElement setConstructionDefaults];
  [listElement setUseVisualDefaultsWithBoolean:NO];
  if (self->expIsFunctionOrCurve_) {
    if ([GeogebraCommonKernelGeosCasEvaluableFunction_class_() isInstance:listElement]) {
      id<GeogebraCommonKernelGeosCasEvaluableFunction> f = (id<GeogebraCommonKernelGeosCasEvaluableFunction>) check_protocol_cast(listElement, @protocol(GeogebraCommonKernelGeosCasEvaluableFunction));
      for (jint i = 0; i < self->varCount_; i++) [f replaceChildrenByValuesWithGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(nil_chk(self->vars_), i)];
    }
  }
  return listElement;
}

void GeogebraCommonKernelAdvancedAlgoZip_updateListItems(GeogebraCommonKernelAdvancedAlgoZip *self) {
  if (self->isEmpty_) return;
  jint currentVal = 0;
  while (currentVal < GeogebraCommonKernelAdvancedAlgoZip_minOverSize(self)) {
    GeogebraCommonKernelGeosGeoElement *listElement = [((GeogebraCommonKernelGeosGeoList *) nil_chk(self->list_)) getWithInt:currentVal];
    if ([((GeogebraCommonMainApp *) nil_chk([((GeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getApplication])) freeMemoryIsCritical]) {
      jlong mem = [((GeogebraCommonMainApp *) nil_chk([self->kernel_ getApplication])) freeMemory];
      [self->list_ clearCache];
      [self->kernel_ initUndoInfo];
      GeogebraCommonMainApp_debugWithNSString_(JreStrcat("$J", @"AlgoZip aborted: free memory reached ", mem));
      return;
    }
    GeogebraCommonKernelAdvancedAlgoZip_updateLocalVarWithInt_(self, currentVal);
    if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->expression_)) isDefined]) {
      [((GeogebraCommonKernelGeosGeoElement *) nil_chk(listElement)) setWithGeogebraCommonKernelGeosGeoElement:self->expression_];
      if ([listElement isGeoList]) {
        for (jint j = 0; j < self->varCount_; j++) {
          [((GeogebraCommonKernelGeosGeoList *) check_class_cast(listElement, [GeogebraCommonKernelGeosGeoList class])) replaceChildrenByValuesWithGeogebraCommonKernelGeosGeoElement:IOSObjectArray_Get(nil_chk(self->vars_), j)];
        }
      }
    }
    else [((GeogebraCommonKernelGeosGeoElement *) nil_chk(listElement)) setUndefined];
    if ([listElement isKindOfClass:[GeogebraCommonKernelGeosGeoNumeric class]] && [GeogebraCommonKernelAlgosDrawInformationAlgo_class_() isInstance:[((GeogebraCommonKernelGeosGeoElement *) nil_chk(listElement)) getDrawAlgorithm]]) {
      [listElement setDrawAlgorithmWithGeogebraCommonKernelAlgosDrawInformationAlgo:[((id<GeogebraCommonKernelAlgosDrawInformationAlgo>) nil_chk(((id<GeogebraCommonKernelAlgosDrawInformationAlgo>) check_protocol_cast([self->expression_ getDrawAlgorithm], @protocol(GeogebraCommonKernelAlgosDrawInformationAlgo))))) copy__]];
      [listElement setEuclidianVisibleWithBoolean:YES];
    }
    [((GeogebraCommonKernelGeosGeoElement *) nil_chk(listElement)) update];
    currentVal += 1;
  }
}

jint GeogebraCommonKernelAdvancedAlgoZip_minOverSize(GeogebraCommonKernelAdvancedAlgoZip *self) {
  jint min = [((GeogebraCommonKernelGeosGeoList *) nil_chk(IOSObjectArray_Get(nil_chk(self->over_), 0))) size];
  for (jint i = 1; i < self->listCount_; i++) if ([((GeogebraCommonKernelGeosGeoList *) nil_chk(IOSObjectArray_Get(self->over_, i))) size] < min) min = [((GeogebraCommonKernelGeosGeoList *) nil_chk(IOSObjectArray_Get(self->over_, i))) size];
  return min;
}

void GeogebraCommonKernelAdvancedAlgoZip_updateLocalVarWithInt_(GeogebraCommonKernelAdvancedAlgoZip *self, jint index) {
  for (jint i = 0; i < self->listCount_; i++) [((GeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(nil_chk(self->vars_), i))) setWithGeogebraCommonKernelGeosGeoElement:[((GeogebraCommonKernelGeosGeoList *) nil_chk(IOSObjectArray_Get(nil_chk(self->over_), i))) getWithInt:index]];
  if (self->varCount_ > self->listCount_) {
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(((GeogebraCommonKernelGeosGeoNumeric *) check_class_cast(IOSObjectArray_Get(nil_chk(self->vars_), self->varCount_ - 1), [GeogebraCommonKernelGeosGeoNumeric class])))) setValueWithDouble:index + 1];
  }
  if (self->expressionParentAlgo_ != nil) {
    [self setStopUpdateCascadeWithBoolean:YES];
    for (jint i = 0; i < self->listCount_; i++) [((GeogebraCommonKernelAlgosAlgorithmSet *) nil_chk([((GeogebraCommonKernelGeosGeoElement *) nil_chk(IOSObjectArray_Get(nil_chk(self->vars_), i))) getAlgoUpdateSet])) updateAllUntilWithGeogebraCommonKernelAlgosAlgoElement:self->expressionParentAlgo_];
    [self setStopUpdateCascadeWithBoolean:NO];
    [self->expressionParentAlgo_ update];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelAdvancedAlgoZip)
