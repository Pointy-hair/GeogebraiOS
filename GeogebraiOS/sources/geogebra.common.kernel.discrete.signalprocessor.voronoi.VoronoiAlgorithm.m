//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/discrete/signalprocessor/voronoi/VoronoiAlgorithm.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/VPoint.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/VoronoiAlgorithm.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/eventqueue/EventQueue.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/eventqueue/VCircleEvent.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/eventqueue/VEvent.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/eventqueue/VSiteEvent.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/representation/RepresentationInterface.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/statusstructure/AbstractStatusStructure.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/statusstructure/VLinkedNode.h"
#include "geogebra/common/kernel/discrete/signalprocessor/voronoi/statusstructure/binarysearchtreeimpl/BSTStatusStructure.h"
#include "geogebra/common/main/App.h"
#include "java/lang/RuntimeException.h"
#include "java/util/Collection.h"

@interface GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm ()

- (instancetype)init;

@end

__attribute__((unused)) static void GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_init(GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm *self);

__attribute__((unused)) static GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm *new_GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_init() NS_RETURNS_RETAINED;

@implementation GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm

+ (void)mainWithNSStringArray:(IOSObjectArray *)args {
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_mainWithNSStringArray_(args);
}

- (instancetype)init {
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_init(self);
  return self;
}

+ (void)generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface:(id<GeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface>)datainterface
                                                                                            withJavaUtilCollection:(id<JavaUtilCollection>)points {
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface_withJavaUtilCollection_(datainterface, points);
}

+ (void)generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface:(id<GeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface>)datainterface
                                                                                            withJavaUtilCollection:(id<JavaUtilCollection>)points
                                                                                                            withId:(id)g
                                                      withGeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint:(GeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint *)attentiontopoint
                                                                                                           withInt:(jint)attentiontopos {
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface_withJavaUtilCollection_withId_withGeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint_withInt_(datainterface, points, g, attentiontopoint, attentiontopos);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "mainWithNSStringArray:", "main", "V", 0x9, NULL, NULL },
    { "init", "VoronoiAlgorithm", NULL, 0x2, NULL, NULL },
    { "generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface:withJavaUtilCollection:", "generateVoronoi", "V", 0x9, NULL, NULL },
    { "generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface:withJavaUtilCollection:withId:withGeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint:withInt:", "generateVoronoi", "V", 0xc, NULL, NULL },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm = { 2, "VoronoiAlgorithm", "geogebra.common.kernel.discrete.signalprocessor.voronoi", NULL, 0x1, 4, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm;
}

@end

void GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_mainWithNSStringArray_(IOSObjectArray *args) {
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_initialize();
}

void GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_init(GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm *self) {
  NSObject_init(self);
}

GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm *new_GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_init() {
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm *self = [GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm alloc];
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_init(self);
  return self;
}

void GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface_withJavaUtilCollection_(id<GeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface> datainterface, id<JavaUtilCollection> points) {
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_initialize();
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface_withJavaUtilCollection_withId_withGeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint_withInt_(datainterface, points, nil, nil, -1);
}

void GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_generateVoronoiWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface_withJavaUtilCollection_withId_withGeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint_withInt_(id<GeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface> datainterface, id<JavaUtilCollection> points, id g, GeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint *attentiontopoint, jint attentiontopos) {
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm_initialize();
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue *eventqueue = [new_GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue_init() autorelease];
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent *attentiontositeevent = nil;
  for (GeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint * __strong point in nil_chk(points)) {
    GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent *newsiteevent = [new_GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent_initWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint_(point) autorelease];
    if (point == attentiontopoint) {
      attentiontositeevent = newsiteevent;
    }
    [eventqueue addEventWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVEvent:newsiteevent];
  }
  [((id<GeogebraCommonKernelDiscreteSignalprocessorVoronoiRepresentationRepresentationInterface>) nil_chk(datainterface)) beginAlgorithmWithJavaUtilCollection:points];
  *GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVEvent_getRef_uniqueid_() = 1;
  *GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureBinarysearchtreeimplBSTStatusStructure_getRef_uniqueid_() = 1;
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureAbstractStatusStructure *statusstructure = GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureAbstractStatusStructure_createDefaultStatusStructure();
  GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVEvent *event = nil;
  jboolean printcalled = NO;
  while (!([eventqueue isEventQueueEmpty])) {
    event = [eventqueue getAndRemoveFirstEvent];
    if (g != nil && attentiontositeevent == nil && attentiontopos >= 0 && printcalled == NO) {
      if (event != nil && [event getY] >= attentiontopos) {
        printcalled = YES;
        [datainterface endAlgorithmWithJavaUtilCollection:points withDouble:[event getY] withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:[((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureAbstractStatusStructure *) nil_chk(statusstructure)) getHeadNode]];
        return;
      }
    }
    if ([((GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVEvent *) nil_chk(event)) isSiteEvent]) {
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent *siteevent = (GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent *) check_class_cast(event, [GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent class]);
      if (g != nil && siteevent == attentiontositeevent) {
        [datainterface endAlgorithmWithJavaUtilCollection:points withDouble:[event getY] withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:[((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureAbstractStatusStructure *) nil_chk(statusstructure)) getHeadNode]];
        return;
      }
      if ([((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureAbstractStatusStructure *) nil_chk(statusstructure)) isStatusStructureEmpty]) {
        [statusstructure setRootNodeWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent:siteevent];
        GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVEvent *nextevent = [eventqueue getFirstEvent];
        if (nextevent != nil && [event getY] == [nextevent getY]) {
          GeogebraCommonMainApp_debugWithNSString_(@"Please note: easy fix done to prevent degrading case");
          ((GeogebraCommonKernelDiscreteSignalprocessorVoronoiVPoint *) nil_chk([siteevent getPoint]))->y_ -= 0.00000001;
        }
        continue;
      }
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *leafabove = [statusstructure getNodeAboveSiteEventWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent:siteevent withDouble:[siteevent getY]];
      [((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *) nil_chk(leafabove)) removeCircleEventsWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue];
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *newnode = [statusstructure insertNodeWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:leafabove withGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVSiteEvent:siteevent];
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *prevnode = [((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *) nil_chk(newnode)) getPrev];
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *nextnode = [newnode getNext];
      if (prevnode != nil) [prevnode addCircleEventWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue];
      if (nextnode != nil) [nextnode addCircleEventWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue];
      [datainterface siteEventWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:prevnode withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:newnode withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:nextnode];
    }
    else if ([event isCircleEvent]) {
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVCircleEvent *circleevent = (GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVCircleEvent *) check_class_cast(event, [GeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueVCircleEvent class]);
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *currnode = circleevent->leafnode_;
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *prevnode = [((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *) nil_chk(currnode)) getPrev];
      GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode *nextnode = [currnode getNext];
      [datainterface circleEventWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:prevnode withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:currnode withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:nextnode withInt:J2ObjCFpToInt([circleevent getX]) withInt:[circleevent getCenterY]];
      [currnode removeCircleEventsWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue];
      [((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureAbstractStatusStructure *) nil_chk(statusstructure)) removeNodeWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:currnode];
      if (prevnode != nil) [prevnode removeCircleEventsWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue];
      if (nextnode != nil) [nextnode removeCircleEventsWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue];
      if (prevnode != nil) [prevnode addCircleEventWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue];
      if (nextnode != nil) [nextnode addCircleEventWithGeogebraCommonKernelDiscreteSignalprocessorVoronoiEventqueueEventQueue:eventqueue];
    }
    else {
      @throw [new_JavaLangRuntimeException_initWithNSString_(JreStrcat("$$", @"Unknown event; ", [[event getClass] getName])) autorelease];
    }
  }
  if (g != nil && attentiontositeevent == nil && attentiontopos >= 0 && printcalled == NO) {
    printcalled = YES;
  }
  if (event == nil) {
    [datainterface endAlgorithmWithJavaUtilCollection:points withDouble:-1 withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:[((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureAbstractStatusStructure *) nil_chk(statusstructure)) getHeadNode]];
  }
  else {
    [datainterface endAlgorithmWithJavaUtilCollection:points withDouble:[event getY] withGeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureVLinkedNode:[((GeogebraCommonKernelDiscreteSignalprocessorVoronoiStatusstructureAbstractStatusStructure *) nil_chk(statusstructure)) getHeadNode]];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelDiscreteSignalprocessorVoronoiVoronoiAlgorithm)
