//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/gui/dialog/options/model/ColorFunctionModel.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/awt/GColor.h"
#include "geogebra/common/gui/dialog/options/model/ColorFunctionModel.h"
#include "geogebra/common/gui/dialog/options/model/OptionsModel.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/StringTemplate.h"
#include "geogebra/common/kernel/arithmetic/NumberValue.h"
#include "geogebra/common/kernel/commands/AlgebraProcessor.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoList.h"
#include "geogebra/common/main/App.h"

@interface GeogebraCommonGuiDialogOptionsModelColorFunctionModel () {
 @public
  id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener> listener_;
  GeogebraCommonMainApp *app_;
  GeogebraCommonKernelKernel *kernel_;
}

- (void)setListenerRGBAWithNSString:(NSString *)strRed
                       withNSString:(NSString *)strGreen
                       withNSString:(NSString *)strBlue
                       withNSString:(NSString *)strAlpha;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonGuiDialogOptionsModelColorFunctionModel, listener_, id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener>)
J2OBJC_FIELD_SETTER(GeogebraCommonGuiDialogOptionsModelColorFunctionModel, app_, GeogebraCommonMainApp *)
J2OBJC_FIELD_SETTER(GeogebraCommonGuiDialogOptionsModelColorFunctionModel, kernel_, GeogebraCommonKernelKernel *)

__attribute__((unused)) static void GeogebraCommonGuiDialogOptionsModelColorFunctionModel_setListenerRGBAWithNSString_withNSString_withNSString_withNSString_(GeogebraCommonGuiDialogOptionsModelColorFunctionModel *self, NSString *strRed, NSString *strGreen, NSString *strBlue, NSString *strAlpha);

@interface GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener : NSObject
@end

@implementation GeogebraCommonGuiDialogOptionsModelColorFunctionModel

- (instancetype)initWithGeogebraCommonMainApp:(GeogebraCommonMainApp *)app
withGeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener:(id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener>)listener {
  GeogebraCommonGuiDialogOptionsModelColorFunctionModel_initWithGeogebraCommonMainApp_withGeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener_(self, app, listener);
  return self;
}

- (void)updateProperties {
  jboolean someFillable = NO;
  for (jint i = 0; i < [self getGeosLength]; i++) {
    if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk([self getGeoAtWithInt:i])) isFillable]) {
      someFillable = YES;
      continue;
    }
  }
  [((id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener>) nil_chk(listener_)) showAlphaWithBoolean:someFillable];
  GeogebraCommonKernelGeosGeoElement *geo0 = [self getGeoAtWithInt:0];
  [listener_ setDefaultValuesWithGeogebraCommonKernelGeosGeoElement:geo0];
  NSString *strRed = @"";
  NSString *strGreen = @"";
  NSString *strBlue = @"";
  NSString *strAlpha = @"";
  GeogebraCommonKernelGeosGeoList *colorList = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo0)) getColorFunction];
  if (colorList != nil) {
    strRed = [((GeogebraCommonKernelGeosGeoElement *) nil_chk([colorList getWithInt:0])) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_editTemplate_()];
    strGreen = [((GeogebraCommonKernelGeosGeoElement *) nil_chk([colorList getWithInt:1])) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_editTemplate_()];
    strBlue = [((GeogebraCommonKernelGeosGeoElement *) nil_chk([colorList getWithInt:2])) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_editTemplate_()];
    if ([colorList size] == 4) strAlpha = [((GeogebraCommonKernelGeosGeoElement *) nil_chk([colorList getWithInt:3])) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_editTemplate_()];
  }
  for (jint i = 0; i < [self getGeosLength]; i++) {
    GeogebraCommonKernelGeosGeoElement *geo = [self getGeoAtWithInt:i];
    GeogebraCommonKernelGeosGeoList *colorListTemp = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getColorFunction];
    if (colorListTemp != nil) {
      NSString *strRedTemp = [((GeogebraCommonKernelGeosGeoElement *) nil_chk([colorListTemp getWithInt:0])) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_editTemplate_()];
      NSString *strGreenTemp = [((GeogebraCommonKernelGeosGeoElement *) nil_chk([colorListTemp getWithInt:1])) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_editTemplate_()];
      NSString *strBlueTemp = [((GeogebraCommonKernelGeosGeoElement *) nil_chk([colorListTemp getWithInt:2])) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_editTemplate_()];
      NSString *strAlphaTemp = @"";
      if ([colorListTemp size] == 4) strAlphaTemp = [((GeogebraCommonKernelGeosGeoElement *) nil_chk([colorListTemp getWithInt:3])) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_editTemplate_()];
      if (![((NSString *) nil_chk(strRed)) isEqual:strRedTemp]) strRed = @"";
      if (![((NSString *) nil_chk(strGreen)) isEqual:strGreenTemp]) strGreen = @"";
      if (![((NSString *) nil_chk(strBlue)) isEqual:strBlueTemp]) strBlue = @"";
      if (![((NSString *) nil_chk(strAlpha)) isEqual:strAlphaTemp]) strAlpha = @"";
    }
  }
  GeogebraCommonGuiDialogOptionsModelColorFunctionModel_setListenerRGBAWithNSString_withNSString_withNSString_withNSString_(self, strRed, strGreen, strBlue, strAlpha);
}

- (void)setListenerRGBAWithNSString:(NSString *)strRed
                       withNSString:(NSString *)strGreen
                       withNSString:(NSString *)strBlue
                       withNSString:(NSString *)strAlpha {
  GeogebraCommonGuiDialogOptionsModelColorFunctionModel_setListenerRGBAWithNSString_withNSString_withNSString_withNSString_(self, strRed, strGreen, strBlue, strAlpha);
}

- (void)applyChangesWithNSString:(NSString *)strRed
                    withNSString:(NSString *)strGreen
                    withNSString:(NSString *)strBlue
                    withNSString:(NSString *)strAlpha
                         withInt:(jint)colorSpace
                    withNSString:(NSString *)defaultRed
                    withNSString:(NSString *)defaultGreen
                    withNSString:(NSString *)defaultBlue
                    withNSString:(NSString *)defaultAlpha {
  GeogebraCommonKernelGeosGeoList *list = nil;
  GeogebraCommonKernelGeosGeoList *listAlpha = nil;
  if ((strRed == nil || ((jint) [((NSString *) nil_chk([strRed trim])) length]) == 0) && (strGreen == nil || ((jint) [((NSString *) nil_chk([strGreen trim])) length]) == 0) && (strAlpha == nil || ((jint) [((NSString *) nil_chk([strAlpha trim])) length]) == 0) && (strBlue == nil || ((jint) [((NSString *) nil_chk([strBlue trim])) length]) == 0)) {
  }
  else {
    if (strRed == nil || ((jint) [((NSString *) nil_chk([strRed trim])) length]) == 0) strRed = defaultRed;
    if (strGreen == nil || ((jint) [((NSString *) nil_chk([strGreen trim])) length]) == 0) strGreen = defaultGreen;
    if (strBlue == nil || ((jint) [((NSString *) nil_chk([strBlue trim])) length]) == 0) strBlue = defaultBlue;
    if (strAlpha == nil || ((jint) [((NSString *) nil_chk([strAlpha trim])) length]) == 0) strAlpha = defaultAlpha;
    list = [((GeogebraCommonKernelCommandsAlgebraProcessor *) nil_chk([((GeogebraCommonKernelKernel *) nil_chk(kernel_)) getAlgebraProcessor])) evaluateToListWithNSString:JreStrcat("C$C$C$C", '{', strRed, ',', strGreen, ',', strBlue, '}')];
    listAlpha = [((GeogebraCommonKernelCommandsAlgebraProcessor *) nil_chk([kernel_ getAlgebraProcessor])) evaluateToListWithNSString:JreStrcat("C$C$C$C$C", '{', strRed, ',', strGreen, ',', strBlue, ',', strAlpha, '}')];
  }
  if (list != nil) {
    if ((([GeogebraCommonKernelArithmeticNumberValue_class_() isInstance:[list getWithInt:0]])) && (([GeogebraCommonKernelArithmeticNumberValue_class_() isInstance:[list getWithInt:1]])) && (([GeogebraCommonKernelArithmeticNumberValue_class_() isInstance:[list getWithInt:2]])) && (([list size] == 3 || [GeogebraCommonKernelArithmeticNumberValue_class_() isInstance:[list getWithInt:3]]))) for (jint i = 0; i < [self getGeosLength]; i++) {
      GeogebraCommonKernelGeosGeoElement *geo = [self getGeoAtWithInt:i];
      if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isFillable] && listAlpha != nil) {
        [geo setColorFunctionWithGeogebraCommonKernelGeosGeoList:listAlpha];
        list = listAlpha;
      }
      else [geo setColorFunctionWithGeogebraCommonKernelGeosGeoList:list];
      [geo setColorSpaceWithInt:colorSpace];
    }
    [list updateRepaint];
    [((id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener>) nil_chk(listener_)) updateSelectionWithNSObjectArray:[self getGeos]];
  }
  else {
    GeogebraCommonGuiDialogOptionsModelColorFunctionModel_setListenerRGBAWithNSString_withNSString_withNSString_withNSString_(self, strRed, strGreen, strBlue, strAlpha);
  }
}

- (jboolean)checkGeos {
  return YES;
}

- (void)removeAll {
  for (jint i = 0; i < [self getGeosLength]; i++) {
    GeogebraCommonKernelGeosGeoElement *geo = [self getGeoAtWithInt:i];
    [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) removeColorFunction];
    [geo setObjColorWithGeogebraCommonAwtGColor:[geo getObjectColor]];
    [geo updateRepaint];
  }
  [((id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener>) nil_chk(listener_)) setRedTextWithNSString:@""];
  [listener_ setGreenTextWithNSString:@""];
  [listener_ setBlueTextWithNSString:@""];
  [listener_ setAlphaTextWithNSString:@""];
}

- (jboolean)isValidAtWithInt:(jint)index {
  return NO;
}

- (void)dealloc {
  RELEASE_(listener_);
  RELEASE_(app_);
  RELEASE_(kernel_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonMainApp:withGeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener:", "ColorFunctionModel", NULL, 0x1, NULL, NULL },
    { "updateProperties", NULL, "V", 0x1, NULL, NULL },
    { "setListenerRGBAWithNSString:withNSString:withNSString:withNSString:", "setListenerRGBA", "V", 0x2, NULL, NULL },
    { "applyChangesWithNSString:withNSString:withNSString:withNSString:withInt:withNSString:withNSString:withNSString:withNSString:", "applyChanges", "V", 0x1, NULL, NULL },
    { "checkGeos", NULL, "Z", 0x1, NULL, NULL },
    { "removeAll", NULL, "V", 0x1, NULL, NULL },
    { "isValidAtWithInt:", "isValidAt", "Z", 0x4, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "listener_", NULL, 0x2, "Lgeogebra.common.gui.dialog.options.model.ColorFunctionModel$IColorFunctionListener;", NULL, NULL,  },
    { "app_", NULL, 0x2, "Lgeogebra.common.main.App;", NULL, NULL,  },
    { "kernel_", NULL, 0x2, "Lgeogebra.common.kernel.Kernel;", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lgeogebra.common.gui.dialog.options.model.ColorFunctionModel$IColorFunctionListener;"};
  static const J2ObjcClassInfo _GeogebraCommonGuiDialogOptionsModelColorFunctionModel = { 2, "ColorFunctionModel", "geogebra.common.gui.dialog.options.model", NULL, 0x1, 7, methods, 3, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_GeogebraCommonGuiDialogOptionsModelColorFunctionModel;
}

@end

void GeogebraCommonGuiDialogOptionsModelColorFunctionModel_initWithGeogebraCommonMainApp_withGeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener_(GeogebraCommonGuiDialogOptionsModelColorFunctionModel *self, GeogebraCommonMainApp *app, id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener> listener) {
  GeogebraCommonGuiDialogOptionsModelOptionsModel_init(self);
  GeogebraCommonGuiDialogOptionsModelColorFunctionModel_set_app_(self, app);
  GeogebraCommonGuiDialogOptionsModelColorFunctionModel_set_kernel_(self, [((GeogebraCommonMainApp *) nil_chk(app)) getKernel]);
  GeogebraCommonGuiDialogOptionsModelColorFunctionModel_set_listener_(self, listener);
}

GeogebraCommonGuiDialogOptionsModelColorFunctionModel *new_GeogebraCommonGuiDialogOptionsModelColorFunctionModel_initWithGeogebraCommonMainApp_withGeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener_(GeogebraCommonMainApp *app, id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener> listener) {
  GeogebraCommonGuiDialogOptionsModelColorFunctionModel *self = [GeogebraCommonGuiDialogOptionsModelColorFunctionModel alloc];
  GeogebraCommonGuiDialogOptionsModelColorFunctionModel_initWithGeogebraCommonMainApp_withGeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener_(self, app, listener);
  return self;
}

void GeogebraCommonGuiDialogOptionsModelColorFunctionModel_setListenerRGBAWithNSString_withNSString_withNSString_withNSString_(GeogebraCommonGuiDialogOptionsModelColorFunctionModel *self, NSString *strRed, NSString *strGreen, NSString *strBlue, NSString *strAlpha) {
  [((id<GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener>) nil_chk(self->listener_)) setRedTextWithNSString:strRed];
  [self->listener_ setGreenTextWithNSString:strGreen];
  [self->listener_ setBlueTextWithNSString:strBlue];
  [self->listener_ setAlphaTextWithNSString:strAlpha];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGuiDialogOptionsModelColorFunctionModel)

@implementation GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "setRedTextWithNSString:", "setRedText", "V", 0x401, NULL, NULL },
    { "setGreenTextWithNSString:", "setGreenText", "V", 0x401, NULL, NULL },
    { "setBlueTextWithNSString:", "setBlueText", "V", 0x401, NULL, NULL },
    { "setAlphaTextWithNSString:", "setAlphaText", "V", 0x401, NULL, NULL },
    { "showAlphaWithBoolean:", "showAlpha", "V", 0x401, NULL, NULL },
    { "setDefaultValuesWithGeogebraCommonKernelGeosGeoElement:", "setDefaultValues", "V", 0x401, NULL, NULL },
    { "updateSelectionWithNSObjectArray:", "updateSelection", "V", 0x401, NULL, NULL },
  };
  static const J2ObjcClassInfo _GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener = { 2, "IColorFunctionListener", "geogebra.common.gui.dialog.options.model", "ColorFunctionModel", 0x609, 7, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(GeogebraCommonGuiDialogOptionsModelColorFunctionModel_IColorFunctionListener)
