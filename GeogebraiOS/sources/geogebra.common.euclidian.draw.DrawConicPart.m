//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/euclidian/draw/DrawConicPart.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/awt/GAffineTransform.h"
#include "geogebra/common/awt/GArc2D.h"
#include "geogebra/common/awt/GBasicStroke.h"
#include "geogebra/common/awt/GColor.h"
#include "geogebra/common/awt/GFont.h"
#include "geogebra/common/awt/GGeneralPath.h"
#include "geogebra/common/awt/GGraphics2D.h"
#include "geogebra/common/awt/GRectangle.h"
#include "geogebra/common/awt/GShape.h"
#include "geogebra/common/euclidian/Drawable.h"
#include "geogebra/common/euclidian/EuclidianConstants.h"
#include "geogebra/common/euclidian/EuclidianView.h"
#include "geogebra/common/euclidian/EuclidianViewCompanion.h"
#include "geogebra/common/euclidian/clipping/ClipShape.h"
#include "geogebra/common/euclidian/draw/DrawConic.h"
#include "geogebra/common/euclidian/draw/DrawConicPart.h"
#include "geogebra/common/euclidian/draw/DrawRay.h"
#include "geogebra/common/euclidian/draw/DrawSegment.h"
#include "geogebra/common/factories/AwtFactory.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/Matrix/Coords.h"
#include "geogebra/common/kernel/algos/AlgoConicPartCircle.h"
#include "geogebra/common/kernel/algos/AlgoConicPartCircumcircle.h"
#include "geogebra/common/kernel/algos/AlgoSemicircle.h"
#include "geogebra/common/kernel/geos/GeoConicPart.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoLine.h"
#include "geogebra/common/kernel/geos/GeoPoint.h"
#include "geogebra/common/kernel/geos/Traceable.h"
#include "geogebra/common/kernel/kernelND/GeoConicND.h"
#include "geogebra/common/kernel/kernelND/GeoConicNDConstants.h"
#include "geogebra/common/kernel/kernelND/GeoConicPartND.h"
#include "geogebra/common/kernel/kernelND/GeoPointND.h"
#include "java/lang/Math.h"
#include "java/util/ArrayList.h"

#define GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE 1
#define GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT 2
#define GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS 3

@interface GeogebraCommonEuclidianDrawDrawConicPart () {
 @public
  id<GeogebraCommonKernelKernelNDGeoConicPartND> conicPart_;
  jboolean isVisible_, labelVisible_;
  id<GeogebraCommonAwtGArc2D> arc_;
  id<GeogebraCommonAwtGShape> shape_DrawConicPart_;
  IOSDoubleArray *halfAxes_;
  jint closure_;
  jint draw_type_;
  id<GeogebraCommonAwtGAffineTransform> transform_;
  GeogebraCommonEuclidianDrawDrawRay *drawRay1_, *drawRay2_;
  GeogebraCommonEuclidianDrawDrawSegment *drawSegment_;
  IOSDoubleArray *coords_;
  JavaUtilArrayList *prevPoints_;
  IOSObjectArray *previewTempPoints_;
  jint previewMode_, neededPrevPoints_;
  jboolean isPreview_;
  IOSObjectArray *ev_;
}

- (void)initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND:(id<GeogebraCommonKernelKernelNDGeoConicPartND>)initConicPart OBJC_METHOD_FAMILY_NONE;

- (void)updateEllipse;

- (void)updateParallelLines;

- (void)initPreview OBJC_METHOD_FAMILY_NONE;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, conicPart_, id<GeogebraCommonKernelKernelNDGeoConicPartND>)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, arc_, id<GeogebraCommonAwtGArc2D>)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, shape_DrawConicPart_, id<GeogebraCommonAwtGShape>)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, halfAxes_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, transform_, id<GeogebraCommonAwtGAffineTransform>)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, drawRay1_, GeogebraCommonEuclidianDrawDrawRay *)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, drawRay2_, GeogebraCommonEuclidianDrawDrawRay *)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, drawSegment_, GeogebraCommonEuclidianDrawDrawSegment *)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, coords_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, prevPoints_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, previewTempPoints_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonEuclidianDrawDrawConicPart, ev_, IOSObjectArray *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonEuclidianDrawDrawConicPart, DRAW_TYPE_ELLIPSE, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonEuclidianDrawDrawConicPart, DRAW_TYPE_SEGMENT, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonEuclidianDrawDrawConicPart, DRAW_TYPE_RAYS, jint)

__attribute__((unused)) static void GeogebraCommonEuclidianDrawDrawConicPart_initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND_(GeogebraCommonEuclidianDrawDrawConicPart *self, id<GeogebraCommonKernelKernelNDGeoConicPartND> initConicPart);

__attribute__((unused)) static void GeogebraCommonEuclidianDrawDrawConicPart_update(GeogebraCommonEuclidianDrawDrawConicPart *self);

__attribute__((unused)) static void GeogebraCommonEuclidianDrawDrawConicPart_updateEllipse(GeogebraCommonEuclidianDrawDrawConicPart *self);

__attribute__((unused)) static void GeogebraCommonEuclidianDrawDrawConicPart_updateParallelLines(GeogebraCommonEuclidianDrawDrawConicPart *self);

__attribute__((unused)) static void GeogebraCommonEuclidianDrawDrawConicPart_drawWithGeogebraCommonAwtGGraphics2D_(GeogebraCommonEuclidianDrawDrawConicPart *self, id<GeogebraCommonAwtGGraphics2D> g2);

__attribute__((unused)) static void GeogebraCommonEuclidianDrawDrawConicPart_drawTraceWithGeogebraCommonAwtGGraphics2D_(GeogebraCommonEuclidianDrawDrawConicPart *self, id<GeogebraCommonAwtGGraphics2D> g2);

__attribute__((unused)) static void GeogebraCommonEuclidianDrawDrawConicPart_initPreview(GeogebraCommonEuclidianDrawDrawConicPart *self);

@implementation GeogebraCommonEuclidianDrawDrawConicPart

- (instancetype)initWithGeogebraCommonEuclidianEuclidianView:(GeogebraCommonEuclidianEuclidianView *)view
              withGeogebraCommonKernelKernelNDGeoConicPartND:(id<GeogebraCommonKernelKernelNDGeoConicPartND>)conicPart {
  GeogebraCommonEuclidianDrawDrawConicPart_initWithGeogebraCommonEuclidianEuclidianView_withGeogebraCommonKernelKernelNDGeoConicPartND_(self, view, conicPart);
  return self;
}

- (void)initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND:(id<GeogebraCommonKernelKernelNDGeoConicPartND>)initConicPart {
  GeogebraCommonEuclidianDrawDrawConicPart_initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND_(self, initConicPart);
}

- (instancetype)initWithGeogebraCommonEuclidianEuclidianView:(GeogebraCommonEuclidianEuclidianView *)view
                                                     withInt:(jint)mode
                                       withJavaUtilArrayList:(JavaUtilArrayList *)points {
  GeogebraCommonEuclidianDrawDrawConicPart_initWithGeogebraCommonEuclidianEuclidianView_withInt_withJavaUtilArrayList_(self, view, mode, points);
  return self;
}

- (void)update {
  GeogebraCommonEuclidianDrawDrawConicPart_update(self);
}

- (void)updateEllipse {
  GeogebraCommonEuclidianDrawDrawConicPart_updateEllipse(self);
}

- (void)updateParallelLines {
  GeogebraCommonEuclidianDrawDrawConicPart_updateParallelLines(self);
}

- (void)drawWithGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g2 {
  GeogebraCommonEuclidianDrawDrawConicPart_drawWithGeogebraCommonAwtGGraphics2D_(self, g2);
}

- (id<GeogebraCommonAwtGRectangle>)getBounds {
  if (![((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo_)) isDefined] || ![geo_ isEuclidianVisible]) return nil;
  switch (draw_type_) {
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE:
    return [((id<GeogebraCommonAwtGShape>) nil_chk(shape_DrawConicPart_)) getBounds];
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT:
    return [((GeogebraCommonEuclidianDrawDrawSegment *) nil_chk(drawSegment_)) getBounds];
    default:
    return nil;
  }
}

- (void)drawTraceWithGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g2 {
  GeogebraCommonEuclidianDrawDrawConicPart_drawTraceWithGeogebraCommonAwtGGraphics2D_(self, g2);
}

- (void)initPreview {
  GeogebraCommonEuclidianDrawDrawConicPart_initPreview(self);
}

- (void)updatePreview {
  isVisible_ = (conicPart_ != nil && [((JavaUtilArrayList *) nil_chk(prevPoints_)) size] == neededPrevPoints_);
  if (isVisible_) {
    for (jint i = 0; i < [((JavaUtilArrayList *) nil_chk(prevPoints_)) size]; i++) {
      GeogebraCommonKernelMatrixCoords *c = [((GeogebraCommonEuclidianEuclidianView *) nil_chk(view_)) getCoordsForViewWithGeogebraCommonKernelMatrixCoords:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk([prevPoints_ getWithInt:i])) getCoordsInD3]];
      if (!GeogebraCommonKernelKernel_isZeroWithDouble_([((GeogebraCommonKernelMatrixCoords *) nil_chk(c)) getZ])) {
        [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(previewTempPoints_), i))) setUndefined];
      }
      else {
        [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(previewTempPoints_), i))) setCoordsWithGeogebraCommonKernelMatrixCoords:[c projectInfDim] withBoolean:YES];
      }
    }
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(previewTempPoints_), 0))) updateCascade];
  }
}

- (void)updateMousePosWithDouble:(jdouble)xRW
                      withDouble:(jdouble)yRW {
  if (isVisible_) {
    if ([((JavaUtilArrayList *) nil_chk(prevPoints_)) size] == 2) {
      if (GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk([prevPoints_ getWithInt:0])) getInhomX], xRW) && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(previewTempPoints_), 0))) getInhomY], yRW)) {
        isVisible_ = NO;
        return;
      }
      if (GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk([prevPoints_ getWithInt:1])) getInhomX], xRW) && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(previewTempPoints_), 1))) getInhomY], yRW)) {
        isVisible_ = NO;
        return;
      }
    }
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(previewTempPoints_, ((IOSObjectArray *) nil_chk(previewTempPoints_))->size_ - 1))) setCoordsWithDouble:xRW withDouble:yRW withDouble:1.0];
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(previewTempPoints_, previewTempPoints_->size_ - 1))) updateCascade];
    GeogebraCommonEuclidianDrawDrawConicPart_update(self);
  }
}

- (void)drawPreviewWithGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g2 {
  GeogebraCommonEuclidianDrawDrawConicPart_drawWithGeogebraCommonAwtGGraphics2D_(self, g2);
}

- (void)disposePreview {
  if (conicPart_ != nil) {
    [((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])) remove];
  }
}

- (jboolean)intersectsRectangleWithGeogebraCommonAwtGRectangle:(id<GeogebraCommonAwtGRectangle>)rect {
  if (!isVisible_) return NO;
  switch (draw_type_) {
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE:
    if ([self isFilled]) {
      [((id<GeogebraCommonAwtGShape>) nil_chk(shape_DrawConicPart_)) intersectsWithGeogebraCommonAwtGRectangle2D:rect];
    }
    if (strokedShape_ == nil) {
      GeogebraCommonEuclidianDrawable_set_strokedShape_(self, [((id<GeogebraCommonAwtGBasicStroke>) nil_chk(objStroke_)) createStrokedShapeWithGeogebraCommonAwtGShape:shape_DrawConicPart_]);
    }
    return [((id<GeogebraCommonAwtGShape>) nil_chk(strokedShape_)) intersectsWithGeogebraCommonAwtGRectangle2D:rect];
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT:
    return [((GeogebraCommonEuclidianDrawDrawSegment *) nil_chk(drawSegment_)) intersectsRectangleWithGeogebraCommonAwtGRectangle:rect];
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS:
    return [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(drawRay1_)) intersectsRectangleWithGeogebraCommonAwtGRectangle:rect] || [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(drawRay2_)) intersectsRectangleWithGeogebraCommonAwtGRectangle:rect];
    default:
    return NO;
  }
}

- (jboolean)hitWithInt:(jint)x
               withInt:(jint)y
               withInt:(jint)hitThreshold {
  if (!isVisible_) return NO;
  jboolean pathHit = NO, regionHit = NO;
  switch (draw_type_) {
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE:
    if (strokedShape_ == nil) {
      GeogebraCommonEuclidianDrawable_set_strokedShape_(self, [((id<GeogebraCommonAwtGBasicStroke>) nil_chk(objStroke_)) createStrokedShapeWithGeogebraCommonAwtGShape:shape_DrawConicPart_]);
    }
    pathHit = [((id<GeogebraCommonAwtGShape>) nil_chk(strokedShape_)) intersectsWithInt:x - hitThreshold withInt:y - hitThreshold withInt:2 * hitThreshold withInt:2 * hitThreshold];
    if (!pathHit && ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo_)) getAlphaValue] > 0.0f || [geo_ isHatchingEnabled])) {
      regionHit = [((id<GeogebraCommonAwtGShape>) nil_chk(shape_DrawConicPart_)) intersectsWithInt:x - hitThreshold withInt:y - hitThreshold withInt:2 * hitThreshold withInt:2 * hitThreshold];
    }
    break;
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT:
    pathHit = [((GeogebraCommonEuclidianDrawDrawSegment *) nil_chk(drawSegment_)) hitWithInt:x withInt:y withInt:hitThreshold];
    break;
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS:
    pathHit = ([((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(drawRay1_)) hitWithInt:x withInt:y withInt:hitThreshold] || [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(drawRay2_)) hitWithInt:x withInt:y withInt:hitThreshold]);
    break;
    default:
    return NO;
  }
  if (pathHit) {
    [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) setLastHitTypeWithGeogebraCommonKernelGeosGeoElement_HitTypeEnum:GeogebraCommonKernelGeosGeoElement_HitTypeEnum_get_ON_BOUNDARY()];
  }
  else if (regionHit) {
    [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) setLastHitTypeWithGeogebraCommonKernelGeosGeoElement_HitTypeEnum:GeogebraCommonKernelGeosGeoElement_HitTypeEnum_get_ON_FILLING()];
  }
  else {
    [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) setLastHitTypeWithGeogebraCommonKernelGeosGeoElement_HitTypeEnum:GeogebraCommonKernelGeosGeoElement_HitTypeEnum_get_NONE()];
  }
  return pathHit || regionHit;
}

- (jboolean)isInsideWithGeogebraCommonAwtGRectangle:(id<GeogebraCommonAwtGRectangle>)rect {
  switch (draw_type_) {
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE:
    return [((id<GeogebraCommonAwtGRectangle>) nil_chk(rect)) containsWithGeogebraCommonAwtGRectangle2D:[((id<GeogebraCommonAwtGShape>) nil_chk(shape_DrawConicPart_)) getBounds]];
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT:
    return [((GeogebraCommonEuclidianDrawDrawSegment *) nil_chk(drawSegment_)) isInsideWithGeogebraCommonAwtGRectangle:rect];
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS:
    default:
    return NO;
  }
}

- (jboolean)hitLabelWithInt:(jint)x
                    withInt:(jint)y {
  switch (draw_type_) {
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE:
    return [super hitLabelWithInt:x withInt:y];
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT:
    return [((GeogebraCommonEuclidianDrawDrawSegment *) nil_chk(drawSegment_)) hitLabelWithInt:x withInt:y];
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS:
    return [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(drawRay1_)) hitLabelWithInt:x withInt:y] || [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(drawRay2_)) hitLabelWithInt:x withInt:y];
    default:
    return NO;
  }
}

- (GeogebraCommonKernelGeosGeoElement *)getGeoElement {
  return geo_;
}

- (void)setGeoElementWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  GeogebraCommonEuclidianDrawable_set_geo_(self, geo);
}

- (void)dealloc {
  RELEASE_(conicPart_);
  RELEASE_(arc_);
  RELEASE_(shape_DrawConicPart_);
  RELEASE_(halfAxes_);
  RELEASE_(transform_);
  RELEASE_(drawRay1_);
  RELEASE_(drawRay2_);
  RELEASE_(drawSegment_);
  RELEASE_(coords_);
  RELEASE_(prevPoints_);
  RELEASE_(previewTempPoints_);
  RELEASE_(ev_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonEuclidianEuclidianView:withGeogebraCommonKernelKernelNDGeoConicPartND:", "DrawConicPart", NULL, 0x1, NULL, NULL },
    { "initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND:", "initConicPart", "V", 0x2, NULL, NULL },
    { "initWithGeogebraCommonEuclidianEuclidianView:withInt:withJavaUtilArrayList:", "DrawConicPart", NULL, 0x1, NULL, NULL },
    { "update", NULL, "V", 0x11, NULL, NULL },
    { "updateEllipse", NULL, "V", 0x2, NULL, NULL },
    { "updateParallelLines", NULL, "V", 0x2, NULL, NULL },
    { "drawWithGeogebraCommonAwtGGraphics2D:", "draw", "V", 0x11, NULL, NULL },
    { "getBounds", NULL, "Lgeogebra.common.awt.GRectangle;", 0x11, NULL, NULL },
    { "drawTraceWithGeogebraCommonAwtGGraphics2D:", "drawTrace", "V", 0x14, NULL, NULL },
    { "initPreview", NULL, "V", 0x2, NULL, NULL },
    { "updatePreview", NULL, "V", 0x11, NULL, NULL },
    { "updateMousePosWithDouble:withDouble:", "updateMousePos", "V", 0x11, NULL, NULL },
    { "drawPreviewWithGeogebraCommonAwtGGraphics2D:", "drawPreview", "V", 0x11, NULL, NULL },
    { "disposePreview", NULL, "V", 0x1, NULL, NULL },
    { "intersectsRectangleWithGeogebraCommonAwtGRectangle:", "intersectsRectangle", "Z", 0x1, NULL, NULL },
    { "hitWithInt:withInt:withInt:", "hit", "Z", 0x11, NULL, NULL },
    { "isInsideWithGeogebraCommonAwtGRectangle:", "isInside", "Z", 0x11, NULL, NULL },
    { "hitLabelWithInt:withInt:", "hitLabel", "Z", 0x11, NULL, NULL },
    { "getGeoElement", NULL, "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "setGeoElementWithGeogebraCommonKernelGeosGeoElement:", "setGeoElement", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "conicPart_", NULL, 0x2, "Lgeogebra.common.kernel.kernelND.GeoConicPartND;", NULL, NULL,  },
    { "isVisible_", NULL, 0x2, "Z", NULL, NULL,  },
    { "labelVisible_", NULL, 0x2, "Z", NULL, NULL,  },
    { "arc_", NULL, 0x2, "Lgeogebra.common.awt.GArc2D;", NULL, NULL,  },
    { "shape_DrawConicPart_", "shape", 0x2, "Lgeogebra.common.awt.GShape;", NULL, NULL,  },
    { "halfAxes_", NULL, 0x2, "[D", NULL, NULL,  },
    { "closure_", NULL, 0x2, "I", NULL, NULL,  },
    { "DRAW_TYPE_ELLIPSE_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE },
    { "DRAW_TYPE_SEGMENT_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT },
    { "DRAW_TYPE_RAYS_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS },
    { "draw_type_", NULL, 0x2, "I", NULL, NULL,  },
    { "transform_", NULL, 0x2, "Lgeogebra.common.awt.GAffineTransform;", NULL, NULL,  },
    { "drawRay1_", NULL, 0x2, "Lgeogebra.common.euclidian.draw.DrawRay;", NULL, NULL,  },
    { "drawRay2_", NULL, 0x2, "Lgeogebra.common.euclidian.draw.DrawRay;", NULL, NULL,  },
    { "drawSegment_", NULL, 0x2, "Lgeogebra.common.euclidian.draw.DrawSegment;", NULL, NULL,  },
    { "coords_", NULL, 0x2, "[D", NULL, NULL,  },
    { "prevPoints_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lgeogebra/common/kernel/kernelND/GeoPointND;>;",  },
    { "previewTempPoints_", NULL, 0x2, "[Lgeogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "previewMode_", NULL, 0x2, "I", NULL, NULL,  },
    { "neededPrevPoints_", NULL, 0x2, "I", NULL, NULL,  },
    { "isPreview_", NULL, 0x2, "Z", NULL, NULL,  },
    { "ev_", NULL, 0x2, "[Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonEuclidianDrawDrawConicPart = { 2, "DrawConicPart", "geogebra.common.euclidian.draw", NULL, 0x1, 20, methods, 22, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonEuclidianDrawDrawConicPart;
}

@end

void GeogebraCommonEuclidianDrawDrawConicPart_initWithGeogebraCommonEuclidianEuclidianView_withGeogebraCommonKernelKernelNDGeoConicPartND_(GeogebraCommonEuclidianDrawDrawConicPart *self, GeogebraCommonEuclidianEuclidianView *view, id<GeogebraCommonKernelKernelNDGeoConicPartND> conicPart) {
  GeogebraCommonEuclidianDrawable_init(self);
  GeogebraCommonEuclidianDrawDrawConicPart_set_arc_(self, [((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newArc2D]);
  GeogebraCommonEuclidianDrawDrawConicPart_set_transform_(self, [GeogebraCommonFactoriesAwtFactory_get_prototype_() newAffineTransform]);
  GeogebraCommonEuclidianDrawDrawConicPart_setAndConsume_coords_(self, [IOSDoubleArray newArrayWithLength:2]);
  self->isPreview_ = NO;
  GeogebraCommonEuclidianDrawable_set_view_(self, view);
  self->isPreview_ = NO;
  GeogebraCommonEuclidianDrawDrawConicPart_initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND_(self, conicPart);
  GeogebraCommonEuclidianDrawDrawConicPart_update(self);
}

GeogebraCommonEuclidianDrawDrawConicPart *new_GeogebraCommonEuclidianDrawDrawConicPart_initWithGeogebraCommonEuclidianEuclidianView_withGeogebraCommonKernelKernelNDGeoConicPartND_(GeogebraCommonEuclidianEuclidianView *view, id<GeogebraCommonKernelKernelNDGeoConicPartND> conicPart) {
  GeogebraCommonEuclidianDrawDrawConicPart *self = [GeogebraCommonEuclidianDrawDrawConicPart alloc];
  GeogebraCommonEuclidianDrawDrawConicPart_initWithGeogebraCommonEuclidianEuclidianView_withGeogebraCommonKernelKernelNDGeoConicPartND_(self, view, conicPart);
  return self;
}

void GeogebraCommonEuclidianDrawDrawConicPart_initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND_(GeogebraCommonEuclidianDrawDrawConicPart *self, id<GeogebraCommonKernelKernelNDGeoConicPartND> initConicPart) {
  GeogebraCommonEuclidianDrawDrawConicPart_set_conicPart_(self, initConicPart);
  GeogebraCommonEuclidianDrawable_set_geo_(self, (GeogebraCommonKernelGeosGeoElement *) check_class_cast(initConicPart, [GeogebraCommonKernelGeosGeoElement class]));
  GeogebraCommonEuclidianDrawDrawConicPart_set_halfAxes_(self, [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(initConicPart, [GeogebraCommonKernelKernelNDGeoConicND class])))) getHalfAxes]);
  self->closure_ = [((id<GeogebraCommonKernelKernelNDGeoConicPartND>) nil_chk(initConicPart)) getConicPartType] == GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PART_SECTOR ? GeogebraCommonAwtGArc2D_PIE : GeogebraCommonAwtGArc2D_OPEN;
}

void GeogebraCommonEuclidianDrawDrawConicPart_initWithGeogebraCommonEuclidianEuclidianView_withInt_withJavaUtilArrayList_(GeogebraCommonEuclidianDrawDrawConicPart *self, GeogebraCommonEuclidianEuclidianView *view, jint mode, JavaUtilArrayList *points) {
  GeogebraCommonEuclidianDrawable_init(self);
  GeogebraCommonEuclidianDrawDrawConicPart_set_arc_(self, [((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newArc2D]);
  GeogebraCommonEuclidianDrawDrawConicPart_set_transform_(self, [GeogebraCommonFactoriesAwtFactory_get_prototype_() newAffineTransform]);
  GeogebraCommonEuclidianDrawDrawConicPart_setAndConsume_coords_(self, [IOSDoubleArray newArrayWithLength:2]);
  self->isPreview_ = NO;
  GeogebraCommonEuclidianDrawable_set_view_(self, view);
  GeogebraCommonEuclidianDrawDrawConicPart_set_prevPoints_(self, points);
  self->previewMode_ = mode;
  self->isPreview_ = YES;
  GeogebraCommonKernelConstruction *cons = [((GeogebraCommonKernelKernel *) nil_chk([((GeogebraCommonEuclidianEuclidianView *) nil_chk(view)) getKernel])) getConstruction];
  self->neededPrevPoints_ = mode == GeogebraCommonEuclidianEuclidianConstants_MODE_SEMICIRCLE ? 1 : 2;
  GeogebraCommonEuclidianDrawDrawConicPart_setAndConsume_previewTempPoints_(self, [IOSObjectArray newArrayWithLength:self->neededPrevPoints_ + 1 type:GeogebraCommonKernelGeosGeoPoint_class_()]);
  for (jint i = 0; i < self->previewTempPoints_->size_; i++) {
    IOSObjectArray_SetAndConsume(self->previewTempPoints_, i, new_GeogebraCommonKernelGeosGeoPoint_initWithGeogebraCommonKernelConstruction_(cons));
  }
  GeogebraCommonEuclidianDrawDrawConicPart_initPreview(self);
}

GeogebraCommonEuclidianDrawDrawConicPart *new_GeogebraCommonEuclidianDrawDrawConicPart_initWithGeogebraCommonEuclidianEuclidianView_withInt_withJavaUtilArrayList_(GeogebraCommonEuclidianEuclidianView *view, jint mode, JavaUtilArrayList *points) {
  GeogebraCommonEuclidianDrawDrawConicPart *self = [GeogebraCommonEuclidianDrawDrawConicPart alloc];
  GeogebraCommonEuclidianDrawDrawConicPart_initWithGeogebraCommonEuclidianEuclidianView_withInt_withJavaUtilArrayList_(self, view, mode, points);
  return self;
}

void GeogebraCommonEuclidianDrawDrawConicPart_update(GeogebraCommonEuclidianDrawDrawConicPart *self) {
  self->isVisible_ = ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->geo_)) isEuclidianVisible] && [self->geo_ isDefined]);
  if (self->isVisible_) {
    self->labelVisible_ = [self->geo_ isLabelVisible];
    [self updateStrokesWithGeogebraCommonKernelKernelNDGeoElementND:(GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])];
    switch ([((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) getType]) {
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_CIRCLE:
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_ELLIPSE:
      GeogebraCommonEuclidianDrawDrawConicPart_updateEllipse(self);
      break;
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PARALLEL_LINES:
      GeogebraCommonEuclidianDrawDrawConicPart_updateParallelLines(self);
      break;
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_SINGLE_POINT:
      self->isVisible_ = NO;
      break;
      default:
      self->isVisible_ = NO;
      return;
    }
    if (self->shape_DrawConicPart_ != nil && ![self->shape_DrawConicPart_ intersectsWithInt:0 withInt:0 withInt:[((GeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) getWidth] withInt:[self->view_ getHeight]]) {
      self->isVisible_ = NO;
    }
    if ([((id<GeogebraCommonKernelGeosTraceable>) nil_chk(((id<GeogebraCommonKernelGeosTraceable>) check_protocol_cast(self->conicPart_, @protocol(GeogebraCommonKernelGeosTraceable))))) getTrace]) {
      self->isTracing__ = YES;
      id<GeogebraCommonAwtGGraphics2D> g2 = [((GeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) getBackgroundGraphics];
      if (g2 != nil) GeogebraCommonEuclidianDrawDrawConicPart_drawTraceWithGeogebraCommonAwtGGraphics2D_(self, g2);
    }
    else {
      if (self->isTracing__) {
        self->isTracing__ = NO;
      }
    }
  }
}

void GeogebraCommonEuclidianDrawDrawConicPart_updateEllipse(GeogebraCommonEuclidianDrawDrawConicPart *self) {
  self->draw_type_ = GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE;
  jdouble xradius = IOSDoubleArray_Get(nil_chk(self->halfAxes_), 0) * [((GeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) getXscale];
  jdouble yradius = IOSDoubleArray_Get(self->halfAxes_, 1) * [self->view_ getYscale];
  if (xradius > GeogebraCommonEuclidianDrawDrawConic_HUGE_RADIUS || yradius > GeogebraCommonEuclidianDrawDrawConic_HUGE_RADIUS) {
    self->isVisible_ = NO;
    return;
  }
  GeogebraCommonKernelMatrixCoords *M;
  if (self->isPreview_) {
    M = [((GeogebraCommonKernelMatrixCoords *) nil_chk([((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) getMidpoint3D])) getInhomCoords];
  }
  else {
    M = [self->view_ getCoordsForViewWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) getMidpoint3D]];
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_([((GeogebraCommonKernelMatrixCoords *) nil_chk(M)) getZ])) {
      self->isVisible_ = NO;
      return;
    }
  }
  if (self->ev_ == nil) {
    GeogebraCommonEuclidianDrawDrawConicPart_setAndConsume_ev_(self, [IOSObjectArray newArrayWithLength:2 type:GeogebraCommonKernelMatrixCoords_class_()]);
  }
  for (jint j = 0; j < 2; j++) {
    if (self->isPreview_) {
      IOSObjectArray_Set(nil_chk(self->ev_), j, [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) getEigenvec3DWithInt:j]);
    }
    else {
      IOSObjectArray_Set(nil_chk(self->ev_), j, [self->view_ getCoordsForViewWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) getEigenvec3DWithInt:j]]);
      if (!GeogebraCommonKernelKernel_isZeroWithDouble_([((GeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(self->ev_, j))) getZ])) {
        self->isVisible_ = NO;
        return;
      }
    }
  }
  [((id<GeogebraCommonAwtGArc2D>) nil_chk(self->arc_)) setArcWithDouble:-IOSDoubleArray_Get(self->halfAxes_, 0) withDouble:-IOSDoubleArray_Get(self->halfAxes_, 1) withDouble:2 * IOSDoubleArray_Get(self->halfAxes_, 0) withDouble:2 * IOSDoubleArray_Get(self->halfAxes_, 1) withDouble:-JavaLangMath_toDegreesWithDouble_([((id<GeogebraCommonKernelKernelNDGeoConicPartND>) nil_chk(self->conicPart_)) getParameterStart]) withDouble:-JavaLangMath_toDegreesWithDouble_([self->conicPart_ getParameterExtent]) withInt:self->closure_];
  [((id<GeogebraCommonAwtGAffineTransform>) nil_chk(self->transform_)) setTransformWithGeogebraCommonAwtGAffineTransform:[self->view_ getCoordTransform]];
  [self->transform_ concatenateWithGeogebraCommonAwtGAffineTransform:[((GeogebraCommonEuclidianEuclidianViewCompanion *) nil_chk([self->view_ getCompanion])) getTransformWithGeogebraCommonKernelKernelNDGeoConicND:(GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class]) withGeogebraCommonKernelMatrixCoords:M withGeogebraCommonKernelMatrixCoordsArray:self->ev_]];
  jint BIG_RADIUS = [self->view_ getWidth] + [self->view_ getHeight];
  if (xradius < BIG_RADIUS && yradius < BIG_RADIUS) {
    GeogebraCommonEuclidianDrawDrawConicPart_set_shape_DrawConicPart_(self, [self->transform_ createTransformedShapeWithGeogebraCommonAwtGShape:self->arc_]);
  }
  else {
    GeogebraCommonEuclidianDrawDrawConicPart_set_shape_DrawConicPart_(self, GeogebraCommonEuclidianClippingClipShape_clipToRectWithGeogebraCommonAwtGShape_withGeogebraCommonAwtGAffineTransform_withGeogebraCommonAwtGRectangle2D_(self->arc_, self->transform_, [((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newRectangleWithInt:-1 withInt:-1 withInt:[self->view_ getWidth] + 2 withInt:[self->view_ getHeight] + 2]));
  }
  if (self->labelVisible_) {
    jdouble midAngle = [self->conicPart_ getParameterStart] + [self->conicPart_ getParameterExtent] / 2.0;
    *IOSDoubleArray_GetRef(nil_chk(self->coords_), 0) = IOSDoubleArray_Get(self->halfAxes_, 0) * JavaLangMath_cosWithDouble_(midAngle);
    *IOSDoubleArray_GetRef(self->coords_, 1) = IOSDoubleArray_Get(self->halfAxes_, 1) * JavaLangMath_sinWithDouble_(midAngle);
    [self->transform_ transformWithDoubleArray:self->coords_ withInt:0 withDoubleArray:self->coords_ withInt:0 withInt:1];
    GeogebraCommonEuclidianDrawable_set_labelDesc_(self, [((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->geo_)) getLabelDescription]);
    self->xLabel_ = J2ObjCFpToInt((IOSDoubleArray_Get(self->coords_, 0))) + 6;
    self->yLabel_ = J2ObjCFpToInt((IOSDoubleArray_Get(self->coords_, 1))) - 6;
    [self addLabelOffset];
  }
}

void GeogebraCommonEuclidianDrawDrawConicPart_updateParallelLines(GeogebraCommonEuclidianDrawDrawConicPart *self) {
  if (self->drawSegment_ == nil || ([((id<GeogebraCommonKernelKernelNDGeoConicPartND>) nil_chk(self->conicPart_)) positiveOrientation] && self->draw_type_ != GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT) || (![self->conicPart_ positiveOrientation] && self->draw_type_ != GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS)) {
    IOSObjectArray *lines = [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])))) getLines];
    GeogebraCommonEuclidianDrawDrawConicPart_setAndConsume_drawSegment_(self, new_GeogebraCommonEuclidianDrawDrawSegment_initWithGeogebraCommonEuclidianEuclidianView_withGeogebraCommonKernelKernelNDGeoLineND_(self->view_, IOSObjectArray_Get(nil_chk(lines), 0)));
    GeogebraCommonEuclidianDrawDrawConicPart_setAndConsume_drawRay1_(self, new_GeogebraCommonEuclidianDrawDrawRay_initWithGeogebraCommonEuclidianEuclidianView_withGeogebraCommonKernelKernelNDGeoLineND_(self->view_, IOSObjectArray_Get(lines, 0)));
    GeogebraCommonEuclidianDrawDrawConicPart_setAndConsume_drawRay2_(self, new_GeogebraCommonEuclidianDrawDrawRay_initWithGeogebraCommonEuclidianEuclidianView_withGeogebraCommonKernelKernelNDGeoLineND_(self->view_, IOSObjectArray_Get(lines, 1)));
    [self->drawSegment_ setGeoElementWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(self->conicPart_, [GeogebraCommonKernelGeosGeoElement class])];
    [self->drawRay1_ setGeoElementWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(self->conicPart_, [GeogebraCommonKernelGeosGeoElement class])];
    [self->drawRay2_ setGeoElementWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(self->conicPart_, [GeogebraCommonKernelGeosGeoElement class])];
  }
  if ([((id<GeogebraCommonKernelKernelNDGeoConicPartND>) nil_chk(self->conicPart_)) positiveOrientation]) {
    self->draw_type_ = GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT;
    GeogebraCommonKernelMatrixCoords *s = [((GeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) getCoordsForViewWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])) getOrigin3DWithInt:0]];
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_([((GeogebraCommonKernelMatrixCoords *) nil_chk(s)) getZ])) {
      self->isVisible_ = NO;
      return;
    }
    GeogebraCommonKernelMatrixCoords *e = [self->view_ getCoordsForViewWithGeogebraCommonKernelMatrixCoords:[self->conicPart_ getSegmentEnd3D]];
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_([((GeogebraCommonKernelMatrixCoords *) nil_chk(e)) getZ])) {
      self->isVisible_ = NO;
      return;
    }
    [((GeogebraCommonEuclidianDrawDrawSegment *) nil_chk(self->drawSegment_)) setIsVisible];
    [self->drawSegment_ updateWithGeogebraCommonKernelMatrixCoords:s withGeogebraCommonKernelMatrixCoords:e];
  }
  else {
    self->draw_type_ = GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS;
    GeogebraCommonKernelMatrixCoords *s = [((GeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) getCoordsForViewWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])) getOrigin3DWithInt:0]];
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_([((GeogebraCommonKernelMatrixCoords *) nil_chk(s)) getZ])) {
      self->isVisible_ = NO;
      return;
    }
    GeogebraCommonKernelMatrixCoords *d = [((GeogebraCommonKernelMatrixCoords *) nil_chk([self->view_ getCoordsForViewWithGeogebraCommonKernelMatrixCoords:[self->conicPart_ getSegmentEnd3D]])) subWithGeogebraCommonKernelMatrixCoords:s];
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_([((GeogebraCommonKernelMatrixCoords *) nil_chk(d)) getZ])) {
      self->isVisible_ = NO;
      return;
    }
    [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(self->drawRay1_)) setIsVisible];
    [self->drawRay1_ updateWithGeogebraCommonKernelMatrixCoords:s withGeogebraCommonKernelMatrixCoords:[d mulWithDouble:-1] withBoolean:NO];
    [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(self->drawRay2_)) setIsVisible];
    [self->drawRay2_ updateWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelKernelNDGeoConicND *) check_class_cast(self->conicPart_, [GeogebraCommonKernelKernelNDGeoConicND class])) getOrigin3DWithInt:1] withGeogebraCommonKernelMatrixCoords:d withBoolean:NO];
  }
}

void GeogebraCommonEuclidianDrawDrawConicPart_drawWithGeogebraCommonAwtGGraphics2D_(GeogebraCommonEuclidianDrawDrawConicPart *self, id<GeogebraCommonAwtGGraphics2D> g2) {
  if (self->isVisible_) {
    switch (self->draw_type_) {
      case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE:
      [self fillWithGeogebraCommonAwtGGraphics2D:g2 withGeogebraCommonAwtGShape:self->shape_DrawConicPart_ withBoolean:NO];
      if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->geo_)) doHighlighting]) {
        [((id<GeogebraCommonAwtGGraphics2D>) nil_chk(g2)) setPaintWithGeogebraCommonAwtGPaint:[self->geo_ getSelColor]];
        [g2 setStrokeWithGeogebraCommonAwtGBasicStroke:self->selStroke_];
        [g2 drawWithGeogebraCommonAwtGShape:self->shape_DrawConicPart_];
      }
      [((id<GeogebraCommonAwtGGraphics2D>) nil_chk(g2)) setPaintWithGeogebraCommonAwtGPaint:[self->geo_ getObjectColor]];
      [g2 setStrokeWithGeogebraCommonAwtGBasicStroke:self->objStroke_];
      [g2 drawWithGeogebraCommonAwtGShape:self->shape_DrawConicPart_];
      if (self->labelVisible_) {
        [g2 setPaintWithGeogebraCommonAwtGPaint:[self->geo_ getLabelColor]];
        [g2 setFontWithGeogebraCommonAwtGFont:[((GeogebraCommonEuclidianEuclidianView *) nil_chk(self->view_)) getFontLine]];
        [self drawLabelWithGeogebraCommonAwtGGraphics2D:g2];
      }
      break;
      case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT:
      [((GeogebraCommonEuclidianDrawDrawSegment *) nil_chk(self->drawSegment_)) drawWithGeogebraCommonAwtGGraphics2D:g2];
      break;
      case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS:
      [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(self->drawRay1_)) setStrokeWithGeogebraCommonAwtGBasicStroke:self->objStroke_];
      [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(self->drawRay2_)) setStrokeWithGeogebraCommonAwtGBasicStroke:self->objStroke_];
      [self->drawRay1_ drawWithGeogebraCommonAwtGGraphics2D:g2];
      [self->drawRay2_ drawWithGeogebraCommonAwtGGraphics2D:g2];
      break;
    }
  }
}

void GeogebraCommonEuclidianDrawDrawConicPart_drawTraceWithGeogebraCommonAwtGGraphics2D_(GeogebraCommonEuclidianDrawDrawConicPart *self, id<GeogebraCommonAwtGGraphics2D> g2) {
  switch (self->draw_type_) {
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_ELLIPSE:
    [((id<GeogebraCommonAwtGGraphics2D>) nil_chk(g2)) setPaintWithGeogebraCommonAwtGPaint:[((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->geo_)) getObjectColor]];
    [g2 setStrokeWithGeogebraCommonAwtGBasicStroke:self->objStroke_];
    [g2 drawWithGeogebraCommonAwtGShape:self->shape_DrawConicPart_];
    break;
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_SEGMENT:
    [((GeogebraCommonEuclidianDrawDrawSegment *) nil_chk(self->drawSegment_)) drawTraceWithGeogebraCommonAwtGGraphics2D:g2];
    break;
    case GeogebraCommonEuclidianDrawDrawConicPart_DRAW_TYPE_RAYS:
    [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(self->drawRay1_)) setStrokeWithGeogebraCommonAwtGBasicStroke:self->objStroke_];
    [((GeogebraCommonEuclidianDrawDrawRay *) nil_chk(self->drawRay2_)) setStrokeWithGeogebraCommonAwtGBasicStroke:self->objStroke_];
    [self->drawRay1_ drawTraceWithGeogebraCommonAwtGGraphics2D:g2];
    [self->drawRay2_ drawTraceWithGeogebraCommonAwtGGraphics2D:g2];
    break;
  }
}

void GeogebraCommonEuclidianDrawDrawConicPart_initPreview(GeogebraCommonEuclidianDrawDrawConicPart *self) {
  GeogebraCommonKernelConstruction *cons = [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(self->previewTempPoints_), 0))) getConstruction];
  jint arcMode;
  {
    GeogebraCommonKernelAlgosAlgoSemicircle *alg;
    GeogebraCommonKernelAlgosAlgoConicPartCircle *algo;
    GeogebraCommonKernelAlgosAlgoConicPartCircumcircle *algo2;
    switch (self->previewMode_) {
      case GeogebraCommonEuclidianEuclidianConstants_MODE_SEMICIRCLE:
      alg = [new_GeogebraCommonKernelAlgosAlgoSemicircle_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoPoint_withGeogebraCommonKernelGeosGeoPoint_(cons, IOSObjectArray_Get(self->previewTempPoints_, 0), IOSObjectArray_Get(self->previewTempPoints_, 1)) autorelease];
      [((GeogebraCommonKernelConstruction *) nil_chk(cons)) removeFromConstructionListWithGeogebraCommonKernelAlgosConstructionElement:alg];
      GeogebraCommonEuclidianDrawDrawConicPart_initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND_(self, [alg getSemicircle]);
      break;
      case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCLE_ARC_THREE_POINTS:
      case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCLE_SECTOR_THREE_POINTS:
      arcMode = self->previewMode_ == GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCLE_ARC_THREE_POINTS ? GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PART_ARC : GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PART_SECTOR;
      algo = [new_GeogebraCommonKernelAlgosAlgoConicPartCircle_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoPoint_withGeogebraCommonKernelGeosGeoPoint_withGeogebraCommonKernelGeosGeoPoint_withInt_(cons, IOSObjectArray_Get(self->previewTempPoints_, 0), IOSObjectArray_Get(self->previewTempPoints_, 1), IOSObjectArray_Get(self->previewTempPoints_, 2), arcMode) autorelease];
      [((GeogebraCommonKernelConstruction *) nil_chk(cons)) removeFromConstructionListWithGeogebraCommonKernelAlgosConstructionElement:algo];
      GeogebraCommonEuclidianDrawDrawConicPart_initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND_(self, [algo getConicPart]);
      break;
      case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCUMCIRCLE_ARC_THREE_POINTS:
      case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCUMCIRCLE_SECTOR_THREE_POINTS:
      arcMode = self->previewMode_ == GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCUMCIRCLE_ARC_THREE_POINTS ? GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PART_ARC : GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PART_SECTOR;
      algo2 = [new_GeogebraCommonKernelAlgosAlgoConicPartCircumcircle_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoPoint_withGeogebraCommonKernelGeosGeoPoint_withGeogebraCommonKernelGeosGeoPoint_withInt_(cons, IOSObjectArray_Get(self->previewTempPoints_, 0), IOSObjectArray_Get(self->previewTempPoints_, 1), IOSObjectArray_Get(self->previewTempPoints_, 2), arcMode) autorelease];
      [((GeogebraCommonKernelConstruction *) nil_chk(cons)) removeFromConstructionListWithGeogebraCommonKernelAlgosConstructionElement:algo2];
      GeogebraCommonEuclidianDrawDrawConicPart_initConicPartWithGeogebraCommonKernelKernelNDGeoConicPartND_(self, [algo2 getConicPart]);
      break;
    }
  }
  if (self->conicPart_ != nil) [((GeogebraCommonKernelGeosGeoElement *) check_class_cast(self->conicPart_, [GeogebraCommonKernelGeosGeoElement class])) setLabelVisibleWithBoolean:NO];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonEuclidianDrawDrawConicPart)
