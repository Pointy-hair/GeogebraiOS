//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/gui/GuiManager.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/GeoGebraConstants.h"
#include "geogebra/common/euclidian/EuclidianConstants.h"
#include "geogebra/common/euclidian/EuclidianView.h"
#include "geogebra/common/euclidian/EuclidianViewInterfaceCommon.h"
#include "geogebra/common/euclidian3D/EuclidianView3DInterface.h"
#include "geogebra/common/gui/GuiManager.h"
#include "geogebra/common/gui/Layout.h"
#include "geogebra/common/gui/layout/DockManager.h"
#include "geogebra/common/gui/view/consprotocol/ConstructionProtocolNavigation.h"
#include "geogebra/common/gui/view/consprotocol/ConstructionProtocolView.h"
#include "geogebra/common/gui/view/data/PlotPanelEuclidianViewInterface.h"
#include "geogebra/common/gui/view/probcalculator/ProbabilityCalculatorView.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/Macro.h"
#include "geogebra/common/kernel/ModeSetter.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/main/App.h"
#include "geogebra/common/main/DialogManager.h"
#include "geogebra/common/main/GuiManagerInterface.h"
#include "geogebra/common/main/Localization.h"
#include "geogebra/common/main/SelectionManager.h"
#include "geogebra/common/main/SpreadsheetTraceManager.h"
#include "geogebra/common/main/settings/ConstructionProtocolSettings.h"
#include "geogebra/common/main/settings/EuclidianSettings.h"
#include "geogebra/common/main/settings/ProbabilityCalculatorSettings.h"
#include "geogebra/common/main/settings/Settings.h"
#include "geogebra/common/move/ggtapi/models/AuthenticationModel.h"
#include "geogebra/common/move/ggtapi/models/GeoGebraTubeUser.h"
#include "geogebra/common/move/ggtapi/operations/LogInOperation.h"
#include "geogebra/common/util/debug/Log.h"
#include "java/lang/Enum.h"
#include "java/lang/Exception.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "java/lang/NumberFormatException.h"
#include "java/lang/StringBuilder.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"

#pragma clang diagnostic ignored "-Wprotocol"

@interface GeogebraCommonGuiGuiManager () {
 @public
  JavaUtilHashMap *plotPanelIDMap_;
  jint lastUsedPlotPanelID_;
  jboolean setModeFinished_;
}

@end

J2OBJC_FIELD_SETTER(GeogebraCommonGuiGuiManager, plotPanelIDMap_, JavaUtilHashMap *)

static NSString *GeogebraCommonGuiGuiManager_ggbTubeOld_ = @"geogebratube.org/";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiGuiManager, ggbTubeOld_, NSString *)

static NSString *GeogebraCommonGuiGuiManager_ggbTube_ = @"tube.geogebra.org/";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiGuiManager, ggbTube_, NSString *)

static NSString *GeogebraCommonGuiGuiManager_ggbTubeBeta_ = @"tube-beta.geogebra.org/";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiGuiManager, ggbTubeBeta_, NSString *)

static NSString *GeogebraCommonGuiGuiManager_ggbTubeShort_ = @"ggbtu.be/";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiGuiManager, ggbTubeShort_, NSString *)

static NSString *GeogebraCommonGuiGuiManager_ggbTubeTest_ = @"tube-test.geogebratube.org";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiGuiManager, ggbTubeTest_, NSString *)

static NSString *GeogebraCommonGuiGuiManager_material_ = @"/material/show/id/";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiGuiManager, material_, NSString *)

__attribute__((unused)) static void GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(GeogebraCommonGuiGuiManager_HelpEnum *self, NSString *__name, jint __ordinal);

__attribute__((unused)) static GeogebraCommonGuiGuiManager_HelpEnum *new_GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(NSString *__name, jint __ordinal) NS_RETURNS_RETAINED;

@implementation GeogebraCommonGuiGuiManager

- (instancetype)init {
  GeogebraCommonGuiGuiManager_init(self);
  return self;
}

- (void)updateMenubar {
}

- (jboolean)hasAlgebraView {
  return NO;
}

- (jboolean)isUsingConstructionProtocol {
  return NO;
}

- (void)getConsProtocolXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb {
  if ([self isUsingConstructionProtocol]) [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:[((GeogebraCommonGuiViewConsprotocolConstructionProtocolView *) nil_chk([self getConstructionProtocolView])) getConsProtocolXML]];
  if ([((GeogebraCommonMainApp *) nil_chk((app_))) showConsProtNavigation]) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"\t<consProtNavigationBar "];
    [sb appendWithNSString:@"show=\""];
    [sb appendWithBoolean:[((GeogebraCommonMainApp *) nil_chk((app_))) showConsProtNavigation]];
    [sb appendWithChar:'"'];
    [sb appendWithNSString:@" playButton=\""];
    [sb appendWithBoolean:[((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk([self getConstructionProtocolNavigation])) isPlayButtonVisible]];
    [sb appendWithChar:'"'];
    [sb appendWithNSString:@" playDelay=\""];
    [sb appendWithDouble:[((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk([self getConstructionProtocolNavigation])) getPlayDelay]];
    [sb appendWithChar:'"'];
    [sb appendWithNSString:@" protButton=\""];
    [sb appendWithBoolean:[((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk([self getConstructionProtocolNavigation])) isConsProtButtonVisible]];
    [sb appendWithChar:'"'];
    [sb appendWithNSString:@" consStep=\""];
    [sb appendWithInt:[((GeogebraCommonKernelKernel *) nil_chk(kernel_)) getConstructionStep]];
    [sb appendWithChar:'"'];
    [sb appendWithNSString:@"/>\n"];
  }
}

- (jboolean)hasProbabilityCalculator {
  return NO;
}

- (void)getProbabilityCalculatorXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb {
  if (probCalculator_ != nil) [probCalculator_ getXMLWithJavaLangStringBuilder:sb];
}

- (void)getSpreadsheetViewXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                                           withBoolean:(jboolean)asPreference {
}

- (void)updateActions {
}

- (void)updateConstructionProtocol {
}

- (jboolean)loadURLWithNSString:(NSString *)urlString {
  return [self loadURLWithNSString:urlString withBoolean:YES];
}

- (jboolean)loadURLWithNSString:(NSString *)urlString
                    withBoolean:(jboolean)suppressErrorMsg {
  NSString *processedUrlString = [((NSString *) nil_chk(urlString)) trim];
  jboolean success = NO;
  jboolean isMacroFile = NO;
  [((GeogebraCommonMainApp *) nil_chk([self getApp])) setWaitCursor];
  @try {
    if (([((NSString *) nil_chk(processedUrlString)) hasSuffix:@".ggb"] || [processedUrlString hasSuffix:@".ggt"]) && ([processedUrlString indexOfString:@"?"] == -1)) {
      [self loadURL_GGBWithNSString:processedUrlString];
    }
    else if ([processedUrlString indexOfString:GeogebraCommonGuiGuiManager_ggbTube_] > -1 || [processedUrlString indexOfString:GeogebraCommonGuiGuiManager_ggbTubeShort_] > -1 || [processedUrlString indexOfString:GeogebraCommonGuiGuiManager_ggbTubeTest_] > -1 || [processedUrlString indexOfString:GeogebraCommonGuiGuiManager_ggbTubeBeta_] > -1 || [processedUrlString indexOfString:GeogebraCommonGuiGuiManager_ggbTubeOld_] > -1) {
      if ([processedUrlString indexOfString:@"://"] > -1) {
        processedUrlString = [processedUrlString substring:[processedUrlString indexOfString:@"://"] + 3 endIndex:((jint) [processedUrlString length])];
      }
      processedUrlString = [processedUrlString substring:[((NSString *) nil_chk(processedUrlString)) indexOf:'/'] endIndex:((jint) [processedUrlString length])];
      if ([((NSString *) nil_chk(processedUrlString)) hasSuffix:@"?mobile=true"] || [processedUrlString hasSuffix:@"?mobile=false"]) {
        jint i = [processedUrlString lastIndexOf:'?'];
        processedUrlString = [processedUrlString substring:0 endIndex:i];
      }
      NSString *id_;
      jint start = -1;
      if ([((NSString *) nil_chk(processedUrlString)) hasPrefix:GeogebraCommonGuiGuiManager_material_]) {
        start = ((jint) [((NSString *) nil_chk(GeogebraCommonGuiGuiManager_material_)) length]);
      }
      else {
        start = [processedUrlString lastIndexOfString:@"/m"] + 2;
      }
      if (start == -1) {
        GeogebraCommonMainApp_debugWithNSString_(JreStrcat("$$", @"problem parsing: ", processedUrlString));
        return NO;
      }
      jint end = -1;
      if (start > -1) {
        end = [processedUrlString indexOf:'/' fromIndex:start];
      }
      if (end == -1) {
        end = ((jint) [processedUrlString length]);
      }
      id_ = [processedUrlString substring:start endIndex:end];
      if ([urlString indexOfString:GeogebraCommonGuiGuiManager_ggbTubeTest_] > -1) {
        processedUrlString = @"http://tube-test.geogebra.org:8080/files/material-";
      }
      else {
        processedUrlString = @"http://tube.geogebra.org/files/material-";
      }
      processedUrlString = JreStrcat("$$", processedUrlString, JreStrcat("$$", id_, @".ggb"));
      if ([((GeogebraCommonMoveGgtapiOperationsLogInOperation *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getLoginOperation])) isLoggedIn]) {
        NSString *token = [((GeogebraCommonMoveGgtapiModelsGeoGebraTubeUser *) nil_chk([((GeogebraCommonMoveGgtapiModelsAuthenticationModel *) nil_chk([((GeogebraCommonMoveGgtapiOperationsLogInOperation *) nil_chk([app_ getLoginOperation])) getModel])) getLoggedInUser])) getLoginToken];
        if (token != nil) {
          processedUrlString = JreStrcat("$$", processedUrlString, JreStrcat("$$", @"?lt=", token));
        }
      }
      GeogebraCommonMainApp_debugWithNSString_(processedUrlString);
      success = [self loadURL_GGBWithNSString:processedUrlString];
    }
    else if ([processedUrlString hasPrefix:@"UEs"]) {
      success = [self loadURL_base64WithNSString:processedUrlString];
    }
    else if ([processedUrlString hasPrefix:@"<?xml "] && [processedUrlString hasSuffix:@"</geogebra>"]) {
      success = [((GeogebraCommonMainApp *) nil_chk([self getApp])) loadXMLWithNSString:processedUrlString];
    }
    else {
      success = [self loadFromAppletWithNSString:processedUrlString];
      isMacroFile = [processedUrlString contains:@".ggt"];
    }
  }
  @catch (JavaLangException *ex) {
    [((JavaLangException *) nil_chk(ex)) printStackTrace];
  }
  if (!success && !suppressErrorMsg) {
    [((GeogebraCommonMainApp *) nil_chk([self getApp])) showErrorWithNSString:JreStrcat("$C$", [((GeogebraCommonMainLocalization *) nil_chk([((GeogebraCommonMainApp *) nil_chk([self getApp])) getLocalization])) getErrorWithNSString:@"LoadFileFailed"], 0x000a, processedUrlString)];
  }
  [self updateGUIafterLoadFileWithBoolean:success withBoolean:isMacroFile];
  return success;
}

- (GeogebraCommonMainApp *)getApp {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (jboolean)loadURL_GGBWithNSString:(NSString *)url {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (jboolean)loadURL_base64WithNSString:(NSString *)url {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (jboolean)loadFromAppletWithNSString:(NSString *)url {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)attachViewWithInt:(jint)viewId {
  switch (viewId) {
    case GeogebraCommonMainApp_VIEW_ALGEBRA:
    [self attachAlgebraView];
    break;
    case GeogebraCommonMainApp_VIEW_SPREADSHEET:
    [self attachSpreadsheetView];
    break;
    case GeogebraCommonMainApp_VIEW_CAS:
    [self attachCasView];
    break;
    case GeogebraCommonMainApp_VIEW_CONSTRUCTION_PROTOCOL:
    [self attachConstructionProtocolView];
    break;
    case GeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR:
    [self attachProbabilityCalculatorView];
    break;
    case GeogebraCommonMainApp_VIEW_DATA_ANALYSIS:
    [self attachDataAnalysisView];
    break;
    case GeogebraCommonMainApp_VIEW_ASSIGNMENT:
    [self attachAssignmentView];
    break;
    case GeogebraCommonMainApp_VIEW_PROPERTIES:
    [self attachPropertiesView];
    break;
    case GeogebraCommonMainApp_VIEW_EUCLIDIAN:
    case GeogebraCommonMainApp_VIEW_EUCLIDIAN2:
    case GeogebraCommonMainApp_VIEW_EUCLIDIAN3D:
    break;
    default:
    GeogebraCommonMainApp_errorWithNSString_(JreStrcat("$I", @"Error attaching VIEW: ", viewId));
  }
}

- (void)showAxesCmd {
  id<GeogebraCommonEuclidianEuclidianViewInterfaceCommon> ev = [self getActiveEuclidianView];
  jboolean bothAxesShown = [((id<GeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(ev)) getShowXaxis] && [ev getShowYaxis];
  GeogebraCommonMainApp *app = [self getApp];
  if ([((GeogebraCommonMainApp *) nil_chk(app)) getEuclidianView1] == ev) {
    [((GeogebraCommonMainSettingsEuclidianSettings *) nil_chk([((GeogebraCommonMainSettingsSettings *) nil_chk([app getSettings])) getEuclidianWithInt:1])) setShowAxesWithBoolean:!bothAxesShown withBoolean:!bothAxesShown];
  }
  else if ([app hasEuclidianView2EitherShowingOrNotWithInt:1] && [app getEuclidianView2WithInt:1] == ev) {
    [((GeogebraCommonMainSettingsEuclidianSettings *) nil_chk([((GeogebraCommonMainSettingsSettings *) nil_chk([app getSettings])) getEuclidianWithInt:2])) setShowAxesWithBoolean:!bothAxesShown withBoolean:!bothAxesShown];
  }
  else if ([app hasEuclidianView3D] && [app getEuclidianView3D] == ev) {
    [((GeogebraCommonMainSettingsEuclidianSettings *) nil_chk([((GeogebraCommonMainSettingsSettings *) nil_chk([app getSettings])) getEuclidianWithInt:3])) setShowAxesWithBoolean:!bothAxesShown];
  }
  else [ev setShowAxesWithBoolean:!bothAxesShown withBoolean:YES];
  [ev repaint];
  [app storeUndoInfo];
  [app updateMenubar];
}

- (void)showGridCmd {
  GeogebraCommonEuclidianEuclidianView *ev = [self getActiveEuclidianView];
  GeogebraCommonMainApp *app = [self getApp];
  if ([((GeogebraCommonMainApp *) nil_chk(app)) getEuclidianView1] == ev) {
    [((GeogebraCommonMainSettingsEuclidianSettings *) nil_chk([((GeogebraCommonMainSettingsSettings *) nil_chk([app getSettings])) getEuclidianWithInt:1])) showGridWithBoolean:![((GeogebraCommonEuclidianEuclidianView *) nil_chk(ev)) getShowGrid]];
  }
  else if ([app hasEuclidianView2EitherShowingOrNotWithInt:1] && [app getEuclidianView2WithInt:1] == ev) {
    [((GeogebraCommonMainSettingsEuclidianSettings *) nil_chk([((GeogebraCommonMainSettingsSettings *) nil_chk([app getSettings])) getEuclidianWithInt:2])) showGridWithBoolean:![((GeogebraCommonEuclidianEuclidianView *) nil_chk(ev)) getShowGrid]];
  }
  else if ([app hasEuclidianView3D] && [app getEuclidianView3D] == ev) {
    [((GeogebraCommonMainSettingsEuclidianSettings *) nil_chk([((GeogebraCommonMainSettingsSettings *) nil_chk([app getSettings])) getEuclidianWithInt:3])) showGridWithBoolean:![((GeogebraCommonEuclidianEuclidianView *) nil_chk(ev)) getShowGrid]];
  }
  else [ev showGridWithBoolean:![((GeogebraCommonEuclidianEuclidianView *) nil_chk(ev)) getShowGrid]];
  [((GeogebraCommonEuclidianEuclidianView *) nil_chk(ev)) repaint];
  [app storeUndoInfo];
  [app updateMenubar];
}

- (void)doAfterRedefineWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getSpreadsheetTrace]) {
    [((GeogebraCommonMainSpreadsheetTraceManager *) nil_chk([((GeogebraCommonMainApp *) nil_chk([self getApp])) getTraceManager])) addSpreadsheetTraceGeoWithGeogebraCommonKernelGeosGeoElement:geo];
  }
}

- (void)detachViewWithInt:(jint)viewId {
  switch (viewId) {
    case GeogebraCommonMainApp_VIEW_ALGEBRA:
    [self detachAlgebraView];
    break;
    case GeogebraCommonMainApp_VIEW_SPREADSHEET:
    [self detachSpreadsheetView];
    break;
    case GeogebraCommonMainApp_VIEW_CAS:
    [self detachCasView];
    break;
    case GeogebraCommonMainApp_VIEW_CONSTRUCTION_PROTOCOL:
    [self detachConstructionProtocolView];
    break;
    case GeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR:
    [self detachProbabilityCalculatorView];
    break;
    case GeogebraCommonMainApp_VIEW_ASSIGNMENT:
    [self detachAssignmentView];
    break;
    case GeogebraCommonMainApp_VIEW_PROPERTIES:
    [self detachPropertiesView];
    break;
    case GeogebraCommonMainApp_VIEW_DATA_ANALYSIS:
    [self detachDataAnalysisView];
    break;
    case GeogebraCommonMainApp_VIEW_EUCLIDIAN:
    case GeogebraCommonMainApp_VIEW_EUCLIDIAN2:
    GeogebraCommonMainApp_debugWithNSString_(@"TODO: should we detach EV1/2?");
    break;
    case GeogebraCommonMainApp_VIEW_EUCLIDIAN3D:
    GeogebraCommonMainApp_debugWithNSString_(@"TODO: should we detach EV3D?");
    break;
    default:
    GeogebraCommonMainApp_errorWithNSString_(JreStrcat("$I", @"Error detaching VIEW: ", viewId));
  }
}

- (void)openCommandHelpWithNSString:(NSString *)command {
  NSString *internalCmd = nil;
  if (command != nil) @try {
    internalCmd = [((GeogebraCommonMainApp *) nil_chk([self getApp])) getReverseCommandWithNSString:command];
  }
  @catch (JavaLangException *e) {
  }
  [self openHelpWithNSString:internalCmd withGeogebraCommonGuiGuiManager_HelpEnum:GeogebraCommonGuiGuiManager_HelpEnum_get_COMMAND()];
}

- (void)openHelpWithNSString:(NSString *)internalCmd
withGeogebraCommonGuiGuiManager_HelpEnum:(GeogebraCommonGuiGuiManager_HelpEnum *)command {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)openHelpWithNSString:(NSString *)page {
  [self openHelpWithNSString:page withGeogebraCommonGuiGuiManager_HelpEnum:GeogebraCommonGuiGuiManager_HelpEnum_get_GENERIC()];
}

- (void)setShowConstructionProtocolNavigationWithBoolean:(jboolean)show {
  [((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk([self getConstructionProtocolNavigation])) setVisibleWithBoolean:show];
  if (show) {
    if ([((GeogebraCommonMainApp *) nil_chk([self getApp])) getActiveEuclidianView] != nil) [((id<GeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([((GeogebraCommonMainApp *) nil_chk([self getApp])) getActiveEuclidianView])) resetMode];
    [self getConstructionProtocolView];
  }
}

- (void)setShowConstructionProtocolNavigationWithBoolean:(jboolean)show
                                             withBoolean:(jboolean)playButton
                                              withDouble:(jdouble)playDelay
                                             withBoolean:(jboolean)showProtButton {
  [self setShowConstructionProtocolNavigationWithBoolean:show];
  [((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk([self getConstructionProtocolNavigation])) setPlayButtonVisibleWithBoolean:playButton];
  [((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk([self getConstructionProtocolNavigation])) setPlayDelayWithDouble:playDelay];
  if (GeogebraCommonMainApp_isFullAppGui()) {
    [((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk([self getConstructionProtocolNavigation])) setConsProtButtonVisibleWithBoolean:showProtButton];
  }
  else {
    [((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk([self getConstructionProtocolNavigation])) setConsProtButtonVisibleWithBoolean:NO];
  }
}

- (GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *)getConstructionProtocolNavigation {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *)getConstructionProtocolNavigationIfExists {
  return constProtocolNavigation_;
}

- (void)updateCheckBoxesForShowConstructinProtocolNavigation {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)applyCPsettingsWithGeogebraCommonMainSettingsConstructionProtocolSettings:(GeogebraCommonMainSettingsConstructionProtocolSettings *)cps {
  if (constProtocolNavigation_ == nil) {
    return;
  }
  [((GeogebraCommonGuiViewConsprotocolConstructionProtocolNavigation *) nil_chk(constProtocolNavigation_)) setConsProtButtonVisibleWithBoolean:[((GeogebraCommonMainSettingsConstructionProtocolSettings *) nil_chk(cps)) showConsProtButton]];
  [constProtocolNavigation_ setPlayDelayWithDouble:[cps getPlayDelay]];
  [constProtocolNavigation_ setPlayButtonVisibleWithBoolean:[cps showPlayButton]];
}

- (JavaUtilHashMap *)getPlotPanelIDMap {
  if (plotPanelIDMap_ == nil) GeogebraCommonGuiGuiManager_setAndConsume_plotPanelIDMap_(self, new_JavaUtilHashMap_init());
  return plotPanelIDMap_;
}

- (jint)assignPlotPanelIDWithGeogebraCommonGuiViewDataPlotPanelEuclidianViewInterface:(id<GeogebraCommonGuiViewDataPlotPanelEuclidianViewInterface>)plotPanel {
  lastUsedPlotPanelID_--;
  jint viewID = lastUsedPlotPanelID_;
  [((JavaUtilHashMap *) nil_chk([self getPlotPanelIDMap])) putWithId:JavaLangInteger_valueOfWithInt_(viewID) withId:plotPanel];
  GeogebraCommonUtilDebugLog_debugWithId_(JavaLangInteger_valueOfWithInt_(viewID));
  return viewID;
}

- (id<GeogebraCommonGuiViewDataPlotPanelEuclidianViewInterface>)getPlotPanelViewWithInt:(jint)viewID {
  return [((JavaUtilHashMap *) nil_chk([self getPlotPanelIDMap])) getWithId:JavaLangInteger_valueOfWithInt_(viewID)];
}

- (void)setModeWithInt:(jint)mode
withGeogebraCommonKernelModeSetterEnum:(GeogebraCommonKernelModeSetterEnum *)m {
  setModeFinished_ = NO;
  [((GeogebraCommonKernelKernel *) nil_chk(kernel_)) notifyModeChangedWithInt:mode withGeogebraCommonKernelModeSetterEnum:m];
  if (setModeFinished_) return;
  jint newMode = [self setToolbarModeWithInt:mode];
  if (mode != GeogebraCommonEuclidianEuclidianConstants_MODE_SELECTION_LISTENER && newMode != mode) {
    mode = newMode;
    [kernel_ notifyModeChangedWithInt:mode withGeogebraCommonKernelModeSetterEnum:m];
  }
  if (mode == GeogebraCommonEuclidianEuclidianConstants_MODE_PROBABILITY_CALCULATOR) {
    if ([self showViewWithInt:GeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR]) {
      [((GeogebraCommonGuiLayoutDockManager *) nil_chk([((GeogebraCommonGuiLayout *) nil_chk([self getLayout])) getDockManager])) setFocusedPanelWithInt:GeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR];
    }
    else {
      [self setShowViewWithBoolean:YES withInt:GeogebraCommonMainApp_VIEW_PROBABILITY_CALCULATOR];
      [((GeogebraCommonGuiViewProbcalculatorProbabilityCalculatorView *) nil_chk(probCalculator_)) setProbabilityCalculatorWithGeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum:GeogebraCommonMainSettingsProbabilityCalculatorSettings_DISTEnum_get_NORMAL() withDoubleArray:nil withBoolean:NO];
    }
    [((GeogebraCommonMainApp *) nil_chk(app_)) setMoveMode];
  }
  if (mode == GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_ONEVARSTATS || mode == GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_TWOVARSTATS || mode == GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_MULTIVARSTATS) {
    JavaUtilArrayList *temp = [new_JavaUtilArrayList_init() autorelease];
    if ([((GeogebraCommonMainSelectionManager *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getSelectionManager])) getSelectedGeos] != nil) {
      for (GeogebraCommonKernelGeosGeoElement * __strong geo in nil_chk([((GeogebraCommonMainSelectionManager *) nil_chk([app_ getSelectionManager])) getSelectedGeos])) {
        [temp addWithId:geo];
      }
    }
    if ([app_ getGuiManager] != nil) {
      [((GeogebraCommonMainDialogManager *) nil_chk([app_ getDialogManager])) showDataSourceDialogWithInt:mode withBoolean:YES];
      [app_ setMoveMode];
    }
    [((GeogebraCommonMainSelectionManager *) nil_chk([app_ getSelectionManager])) setSelectedGeosWithJavaUtilArrayList:temp];
  }
  setModeFinished_ = YES;
}

- (jint)setToolbarModeWithInt:(jint)mode {
  return 0;
}

- (void)setCallerApp {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (NSString *)getHelpURLWithGeogebraCommonGuiGuiManager_HelpEnum:(GeogebraCommonGuiGuiManager_HelpEnum *)type
                                                    withNSString:(NSString *)pageName {
  JavaLangStringBuilder *urlSB = [new_JavaLangStringBuilder_init() autorelease];
  [urlSB appendWithNSString:GeogebraCommonGeoGebraConstants_get_GEOGEBRA_WEBSITE_()];
  [urlSB appendWithNSString:@"help/"];
  [urlSB appendWithNSString:[((GeogebraCommonMainLocalization *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getLocalization])) getLanguage]];
  switch ([type ordinal]) {
    case GeogebraCommonGuiGuiManager_Help_COMMAND:
    pageName = [app_ getEnglishCommandWithNSString:pageName];
    [urlSB appendWithNSString:@"/cmd/"];
    [urlSB appendWithNSString:pageName];
    break;
    case GeogebraCommonGuiGuiManager_Help_TOOL:
    [urlSB appendWithNSString:@"/tool/"];
    [urlSB appendWithNSString:pageName];
    break;
    case GeogebraCommonGuiGuiManager_Help_GENERIC:
    [urlSB appendWithNSString:@"/article/"];
    [urlSB appendWithNSString:pageName];
    break;
    default:
    GeogebraCommonUtilDebugLog_errorWithNSString_(@"Bad getHelpURL call");
  }
  return [urlSB description];
}

- (void)redo {
  [((GeogebraCommonMainApp *) nil_chk(app_)) setWaitCursor];
  [((GeogebraCommonKernelKernel *) nil_chk(kernel_)) redo];
  [self updateActions];
  [(app_) resetPen];
  [app_ setDefaultCursor];
}

- (void)undo {
  [((GeogebraCommonMainApp *) nil_chk(app_)) setWaitCursor];
  [((GeogebraCommonKernelKernel *) nil_chk(kernel_)) undo];
  [self updateActions];
  [(app_) resetPen];
  [app_ setDefaultCursor];
}

- (NSString *)getToolbarDefinition {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)setToolBarDefinitionWithNSString:(NSString *)toolBarDefinition {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)refreshCustomToolsInToolBar {
  jint macroCount = [((GeogebraCommonKernelKernel *) nil_chk(kernel_)) getMacroNumber];
  JavaLangStringBuilder *customToolBar = [new_JavaLangStringBuilder_initWithNSString_(@"") autorelease];
  for (jint i = 0; i < macroCount; i++) {
    GeogebraCommonKernelMacro *macro = [kernel_ getMacroWithInt:i];
    jint macroMode = GeogebraCommonEuclidianEuclidianConstants_MACRO_MODE_ID_OFFSET + i;
    if ([((GeogebraCommonKernelMacro *) nil_chk(macro)) isShowInToolBar] && !([((NSString *) nil_chk([self getToolbarDefinition])) contains:NSString_valueOfInt_(macroMode)])) {
      [customToolBar appendWithNSString:JreStrcat("CI", ' ', macroMode)];
    }
  }
  NSString *toolbarDef = [((NSString *) nil_chk([self getToolbarDefinition])) trim];
  NSString *last = @"";
  @try {
    IOSObjectArray *tools = [((NSString *) nil_chk(toolbarDef)) split:@" "];
    last = IOSObjectArray_Get(tools, ((IOSObjectArray *) nil_chk(tools))->size_ - 1);
    jint lastToolId = JavaLangInteger_parseIntWithNSString_(last);
    if (lastToolId >= GeogebraCommonEuclidianEuclidianConstants_MACRO_MODE_ID_OFFSET) {
      [self setToolBarDefinitionWithNSString:JreStrcat("$$", toolbarDef, [customToolBar description])];
    }
    else {
      [self setToolBarDefinitionWithNSString:JreStrcat("$$$", toolbarDef, @" ||", [customToolBar description])];
    }
  }
  @catch (JavaLangNumberFormatException *e) {
    if ([((NSString *) nil_chk(last)) contains:@"|"]) {
      [self setToolBarDefinitionWithNSString:JreStrcat("$$", toolbarDef, [customToolBar description])];
    }
    else {
      [self setToolBarDefinitionWithNSString:JreStrcat("$$$", toolbarDef, @" ||", [customToolBar description])];
    }
  }
}

- (void)dealloc {
  RELEASE_(kernel_);
  RELEASE_(app_);
  RELEASE_(constProtocolNavigation_);
  RELEASE_(plotPanelIDMap_);
  RELEASE_(probCalculator_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "GuiManager", NULL, 0x1, NULL, NULL },
    { "updateMenubar", NULL, "V", 0x1, NULL, NULL },
    { "hasAlgebraView", NULL, "Z", 0x1, NULL, NULL },
    { "isUsingConstructionProtocol", NULL, "Z", 0x1, NULL, NULL },
    { "getConsProtocolXMLWithJavaLangStringBuilder:", "getConsProtocolXML", "V", 0x11, NULL, NULL },
    { "hasProbabilityCalculator", NULL, "Z", 0x1, NULL, NULL },
    { "getProbabilityCalculatorXMLWithJavaLangStringBuilder:", "getProbabilityCalculatorXML", "V", 0x1, NULL, NULL },
    { "getSpreadsheetViewXMLWithJavaLangStringBuilder:withBoolean:", "getSpreadsheetViewXML", "V", 0x1, NULL, NULL },
    { "updateActions", NULL, "V", 0x1, NULL, NULL },
    { "updateConstructionProtocol", NULL, "V", 0x1, NULL, NULL },
    { "loadURLWithNSString:", "loadURL", "Z", 0x1, NULL, NULL },
    { "loadURLWithNSString:withBoolean:", "loadURL", "Z", 0x1, NULL, NULL },
    { "getApp", NULL, "Lgeogebra.common.main.App;", 0x404, NULL, NULL },
    { "loadURL_GGBWithNSString:", "loadURL_GGB", "Z", 0x404, "Ljava.lang.Exception;", NULL },
    { "loadURL_base64WithNSString:", "loadURL_base64", "Z", 0x404, "Ljava.lang.Exception;", NULL },
    { "loadFromAppletWithNSString:", "loadFromApplet", "Z", 0x404, "Ljava.lang.Exception;", NULL },
    { "attachViewWithInt:", "attachView", "V", 0x1, NULL, NULL },
    { "showAxesCmd", NULL, "V", 0x1, NULL, NULL },
    { "showGridCmd", NULL, "V", 0x1, NULL, NULL },
    { "doAfterRedefineWithGeogebraCommonKernelGeosGeoElement:", "doAfterRedefine", "V", 0x1, NULL, NULL },
    { "detachViewWithInt:", "detachView", "V", 0x1, NULL, NULL },
    { "openCommandHelpWithNSString:", "openCommandHelp", "V", 0x1, NULL, NULL },
    { "openHelpWithNSString:withGeogebraCommonGuiGuiManager_HelpEnum:", "openHelp", "V", 0x404, NULL, NULL },
    { "openHelpWithNSString:", "openHelp", "V", 0x1, NULL, NULL },
    { "setShowConstructionProtocolNavigationWithBoolean:", "setShowConstructionProtocolNavigation", "V", 0x1, NULL, NULL },
    { "setShowConstructionProtocolNavigationWithBoolean:withBoolean:withDouble:withBoolean:", "setShowConstructionProtocolNavigation", "V", 0x1, NULL, NULL },
    { "getConstructionProtocolNavigation", NULL, "Lgeogebra.common.gui.view.consprotocol.ConstructionProtocolNavigation;", 0x401, NULL, NULL },
    { "getConstructionProtocolNavigationIfExists", NULL, "Lgeogebra.common.gui.view.consprotocol.ConstructionProtocolNavigation;", 0x1, NULL, NULL },
    { "updateCheckBoxesForShowConstructinProtocolNavigation", NULL, "V", 0x401, NULL, NULL },
    { "applyCPsettingsWithGeogebraCommonMainSettingsConstructionProtocolSettings:", "applyCPsettings", "V", 0x1, NULL, NULL },
    { "getPlotPanelIDMap", NULL, "Ljava.util.HashMap;", 0x4, NULL, NULL },
    { "assignPlotPanelIDWithGeogebraCommonGuiViewDataPlotPanelEuclidianViewInterface:", "assignPlotPanelID", "I", 0x1, NULL, NULL },
    { "getPlotPanelViewWithInt:", "getPlotPanelView", "Lgeogebra.common.gui.view.data.PlotPanelEuclidianViewInterface;", 0x1, NULL, NULL },
    { "setModeWithInt:withGeogebraCommonKernelModeSetterEnum:", "setMode", "V", 0x1, NULL, NULL },
    { "setToolbarModeWithInt:", "setToolbarMode", "I", 0x4, NULL, NULL },
    { "setCallerApp", NULL, "V", 0x404, NULL, NULL },
    { "getHelpURLWithGeogebraCommonGuiGuiManager_HelpEnum:withNSString:", "getHelpURL", "Ljava.lang.String;", 0x11, NULL, NULL },
    { "redo", NULL, "V", 0x1, NULL, NULL },
    { "undo", NULL, "V", 0x1, NULL, NULL },
    { "getToolbarDefinition", NULL, "Ljava.lang.String;", 0x401, NULL, NULL },
    { "setToolBarDefinitionWithNSString:", "setToolBarDefinition", "V", 0x401, NULL, NULL },
    { "refreshCustomToolsInToolBar", NULL, "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ggbTubeOld_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiGuiManager_ggbTubeOld_, NULL,  },
    { "ggbTube_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiGuiManager_ggbTube_, NULL,  },
    { "ggbTubeBeta_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiGuiManager_ggbTubeBeta_, NULL,  },
    { "ggbTubeShort_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiGuiManager_ggbTubeShort_, NULL,  },
    { "ggbTubeTest_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiGuiManager_ggbTubeTest_, NULL,  },
    { "material_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiGuiManager_material_, NULL,  },
    { "DESKTOP_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiGuiManager_DESKTOP },
    { "WEB_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiGuiManager_WEB },
    { "TOUCH_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiGuiManager_TOUCH },
    { "kernel_", NULL, 0x4, "Lgeogebra.common.kernel.Kernel;", NULL, NULL,  },
    { "app_", NULL, 0x4, "Lgeogebra.common.main.App;", NULL, NULL,  },
    { "constProtocolNavigation_", NULL, 0x4, "Lgeogebra.common.gui.view.consprotocol.ConstructionProtocolNavigation;", NULL, NULL,  },
    { "plotPanelIDMap_", NULL, 0x2, "Ljava.util.HashMap;", NULL, "Ljava/util/HashMap<Ljava/lang/Integer;Lgeogebra/common/gui/view/data/PlotPanelEuclidianViewInterface;>;",  },
    { "lastUsedPlotPanelID_", NULL, 0x2, "I", NULL, NULL,  },
    { "setModeFinished_", NULL, 0x2, "Z", NULL, NULL,  },
    { "probCalculator_", NULL, 0x4, "Lgeogebra.common.gui.view.probcalculator.ProbabilityCalculatorView;", NULL, NULL,  },
    { "caller_APP_", NULL, 0x4, "I", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lgeogebra.common.gui.GuiManager$Help;"};
  static const J2ObjcClassInfo _GeogebraCommonGuiGuiManager = { 2, "GuiManager", "geogebra.common.gui", NULL, 0x401, 42, methods, 17, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_GeogebraCommonGuiGuiManager;
}

@end

void GeogebraCommonGuiGuiManager_init(GeogebraCommonGuiGuiManager *self) {
  NSObject_init(self);
  self->lastUsedPlotPanelID_ = -GeogebraCommonMainApp_VIEW_PLOT_PANEL;
  [self setCallerApp];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGuiGuiManager)

J2OBJC_INITIALIZED_DEFN(GeogebraCommonGuiGuiManager_HelpEnum)

GeogebraCommonGuiGuiManager_HelpEnum *GeogebraCommonGuiGuiManager_HelpEnum_values_[3];

@implementation GeogebraCommonGuiGuiManager_HelpEnum

- (instancetype)initWithNSString:(NSString *)__name
                         withInt:(jint)__ordinal {
  GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(self, __name, __ordinal);
  return self;
}

IOSObjectArray *GeogebraCommonGuiGuiManager_HelpEnum_values() {
  GeogebraCommonGuiGuiManager_HelpEnum_initialize();
  return [IOSObjectArray arrayWithObjects:GeogebraCommonGuiGuiManager_HelpEnum_values_ count:3 type:GeogebraCommonGuiGuiManager_HelpEnum_class_()];
}

+ (IOSObjectArray *)values {
  return GeogebraCommonGuiGuiManager_HelpEnum_values();
}

+ (GeogebraCommonGuiGuiManager_HelpEnum *)valueOfWithNSString:(NSString *)name {
  return GeogebraCommonGuiGuiManager_HelpEnum_valueOfWithNSString_(name);
}

GeogebraCommonGuiGuiManager_HelpEnum *GeogebraCommonGuiGuiManager_HelpEnum_valueOfWithNSString_(NSString *name) {
  GeogebraCommonGuiGuiManager_HelpEnum_initialize();
  for (int i = 0; i < 3; i++) {
    GeogebraCommonGuiGuiManager_HelpEnum *e = GeogebraCommonGuiGuiManager_HelpEnum_values_[i];
    if ([name isEqual:[e name]]) {
      return e;
    }
  }
  @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:name] autorelease];
  return nil;
}

- (id)copyWithZone:(NSZone *)zone {
  return [self retain];
}

+ (void)initialize {
  if (self == [GeogebraCommonGuiGuiManager_HelpEnum class]) {
    GeogebraCommonGuiGuiManager_HelpEnum_COMMAND = new_GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(@"COMMAND", 0);
    GeogebraCommonGuiGuiManager_HelpEnum_TOOL = new_GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(@"TOOL", 1);
    GeogebraCommonGuiGuiManager_HelpEnum_GENERIC = new_GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(@"GENERIC", 2);
    J2OBJC_SET_INITIALIZED(GeogebraCommonGuiGuiManager_HelpEnum)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcFieldInfo fields[] = {
    { "COMMAND", "COMMAND", 0x4019, "Lgeogebra.common.gui.GuiManager$Help;", &GeogebraCommonGuiGuiManager_HelpEnum_COMMAND, NULL,  },
    { "TOOL", "TOOL", 0x4019, "Lgeogebra.common.gui.GuiManager$Help;", &GeogebraCommonGuiGuiManager_HelpEnum_TOOL, NULL,  },
    { "GENERIC", "GENERIC", 0x4019, "Lgeogebra.common.gui.GuiManager$Help;", &GeogebraCommonGuiGuiManager_HelpEnum_GENERIC, NULL,  },
  };
  static const char *superclass_type_args[] = {"Lgeogebra.common.gui.GuiManager$Help;"};
  static const J2ObjcClassInfo _GeogebraCommonGuiGuiManager_HelpEnum = { 2, "Help", "geogebra.common.gui", "GuiManager", 0x4019, 0, NULL, 3, fields, 1, superclass_type_args, 0, NULL, NULL, "Ljava/lang/Enum<Lgeogebra/common/gui/GuiManager$Help;>;" };
  return &_GeogebraCommonGuiGuiManager_HelpEnum;
}

@end

void GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(GeogebraCommonGuiGuiManager_HelpEnum *self, NSString *__name, jint __ordinal) {
  JavaLangEnum_initWithNSString_withInt_(self, __name, __ordinal);
}

GeogebraCommonGuiGuiManager_HelpEnum *new_GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(NSString *__name, jint __ordinal) {
  GeogebraCommonGuiGuiManager_HelpEnum *self = [GeogebraCommonGuiGuiManager_HelpEnum alloc];
  GeogebraCommonGuiGuiManager_HelpEnum_initWithNSString_withInt_(self, __name, __ordinal);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGuiGuiManager_HelpEnum)
