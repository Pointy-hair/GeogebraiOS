//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/org/apache/commons/math/stat/descriptive/moment/Mean.java
//


#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Double.h"
#include "org/apache/commons/math/stat/descriptive/AbstractStorelessUnivariateStatistic.h"
#include "org/apache/commons/math/stat/descriptive/AbstractUnivariateStatistic.h"
#include "org/apache/commons/math/stat/descriptive/moment/FirstMoment.h"
#include "org/apache/commons/math/stat/descriptive/moment/Mean.h"
#include "org/apache/commons/math/stat/descriptive/summary/Sum.h"

#define OrgApacheCommonsMathStatDescriptiveMomentMean_serialVersionUID -1296043746617791564LL

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathStatDescriptiveMomentMean, serialVersionUID, jlong)

@implementation OrgApacheCommonsMathStatDescriptiveMomentMean

- (instancetype)init {
  OrgApacheCommonsMathStatDescriptiveMomentMean_init(self);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathStatDescriptiveMomentFirstMoment:(OrgApacheCommonsMathStatDescriptiveMomentFirstMoment *)m1 {
  OrgApacheCommonsMathStatDescriptiveMomentMean_initWithOrgApacheCommonsMathStatDescriptiveMomentFirstMoment_(self, m1);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathStatDescriptiveMomentMean:(OrgApacheCommonsMathStatDescriptiveMomentMean *)original {
  OrgApacheCommonsMathStatDescriptiveMomentMean_initWithOrgApacheCommonsMathStatDescriptiveMomentMean_(self, original);
  return self;
}

- (void)incrementWithDouble:(jdouble)d {
  if (incMoment_) {
    [((OrgApacheCommonsMathStatDescriptiveMomentFirstMoment *) nil_chk(moment_)) incrementWithDouble:d];
  }
}

- (void)clear {
  if (incMoment_) {
    [((OrgApacheCommonsMathStatDescriptiveMomentFirstMoment *) nil_chk(moment_)) clear];
  }
}

- (jdouble)getResult {
  return ((OrgApacheCommonsMathStatDescriptiveMomentFirstMoment *) nil_chk(moment_))->m1_;
}

- (jlong)getN {
  return [((OrgApacheCommonsMathStatDescriptiveMomentFirstMoment *) nil_chk(moment_)) getN];
}

- (jdouble)evaluateWithDoubleArray:(IOSDoubleArray *)values
                           withInt:(jint)begin
                           withInt:(jint)length {
  if ([self testWithDoubleArray:values withInt:begin withInt:length]) {
    OrgApacheCommonsMathStatDescriptiveSummarySum *sum = [new_OrgApacheCommonsMathStatDescriptiveSummarySum_init() autorelease];
    jdouble sampleSize = length;
    jdouble xbar = [sum evaluateWithDoubleArray:values withInt:begin withInt:length] / sampleSize;
    jdouble correction = 0;
    for (jint i = begin; i < begin + length; i++) {
      correction += IOSDoubleArray_Get(nil_chk(values), i) - xbar;
    }
    return xbar + (correction / sampleSize);
  }
  return JavaLangDouble_NaN;
}

- (jdouble)evaluateWithDoubleArray:(IOSDoubleArray *)values
                   withDoubleArray:(IOSDoubleArray *)weights
                           withInt:(jint)begin
                           withInt:(jint)length {
  if ([self testWithDoubleArray:values withDoubleArray:weights withInt:begin withInt:length]) {
    OrgApacheCommonsMathStatDescriptiveSummarySum *sum = [new_OrgApacheCommonsMathStatDescriptiveSummarySum_init() autorelease];
    jdouble sumw = [sum evaluateWithDoubleArray:weights withInt:begin withInt:length];
    jdouble xbarw = [sum evaluateWithDoubleArray:values withDoubleArray:weights withInt:begin withInt:length] / sumw;
    jdouble correction = 0;
    for (jint i = begin; i < begin + length; i++) {
      correction += IOSDoubleArray_Get(nil_chk(weights), i) * (IOSDoubleArray_Get(nil_chk(values), i) - xbarw);
    }
    return xbarw + (correction / sumw);
  }
  return JavaLangDouble_NaN;
}

- (jdouble)evaluateWithDoubleArray:(IOSDoubleArray *)values
                   withDoubleArray:(IOSDoubleArray *)weights {
  return [self evaluateWithDoubleArray:values withDoubleArray:weights withInt:0 withInt:((IOSDoubleArray *) nil_chk(values))->size_];
}

- (OrgApacheCommonsMathStatDescriptiveMomentMean *)copy__ {
  OrgApacheCommonsMathStatDescriptiveMomentMean *result = [new_OrgApacheCommonsMathStatDescriptiveMomentMean_init() autorelease];
  OrgApacheCommonsMathStatDescriptiveMomentMean_copy__WithOrgApacheCommonsMathStatDescriptiveMomentMean_withOrgApacheCommonsMathStatDescriptiveMomentMean_(self, result);
  return result;
}

+ (void)copy__WithOrgApacheCommonsMathStatDescriptiveMomentMean:(OrgApacheCommonsMathStatDescriptiveMomentMean *)source
              withOrgApacheCommonsMathStatDescriptiveMomentMean:(OrgApacheCommonsMathStatDescriptiveMomentMean *)dest {
  OrgApacheCommonsMathStatDescriptiveMomentMean_copy__WithOrgApacheCommonsMathStatDescriptiveMomentMean_withOrgApacheCommonsMathStatDescriptiveMomentMean_(source, dest);
}

- (void)dealloc {
  RELEASE_(moment_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "Mean", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsMathStatDescriptiveMomentFirstMoment:", "Mean", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsMathStatDescriptiveMomentMean:", "Mean", NULL, 0x1, NULL, NULL },
    { "incrementWithDouble:", "increment", "V", 0x1, NULL, NULL },
    { "clear", NULL, "V", 0x1, NULL, NULL },
    { "getResult", NULL, "D", 0x1, NULL, NULL },
    { "getN", NULL, "J", 0x1, NULL, NULL },
    { "evaluateWithDoubleArray:withInt:withInt:", "evaluate", "D", 0x1, NULL, NULL },
    { "evaluateWithDoubleArray:withDoubleArray:withInt:withInt:", "evaluate", "D", 0x1, NULL, NULL },
    { "evaluateWithDoubleArray:withDoubleArray:", "evaluate", "D", 0x1, NULL, NULL },
    { "copy__", "copy", "Lorg.apache.commons.math.stat.descriptive.moment.Mean;", 0x1, NULL, NULL },
    { "copy__WithOrgApacheCommonsMathStatDescriptiveMomentMean:withOrgApacheCommonsMathStatDescriptiveMomentMean:", "copy", "V", 0x9, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID_", NULL, 0x1a, "J", NULL, NULL, .constantValue.asLong = OrgApacheCommonsMathStatDescriptiveMomentMean_serialVersionUID },
    { "moment_", NULL, 0x4, "Lorg.apache.commons.math.stat.descriptive.moment.FirstMoment;", NULL, NULL,  },
    { "incMoment_", NULL, 0x4, "Z", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathStatDescriptiveMomentMean = { 2, "Mean", "org.apache.commons.math.stat.descriptive.moment", NULL, 0x1, 12, methods, 3, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathStatDescriptiveMomentMean;
}

@end

void OrgApacheCommonsMathStatDescriptiveMomentMean_init(OrgApacheCommonsMathStatDescriptiveMomentMean *self) {
  OrgApacheCommonsMathStatDescriptiveAbstractStorelessUnivariateStatistic_init(self);
  self->incMoment_ = YES;
  OrgApacheCommonsMathStatDescriptiveMomentMean_setAndConsume_moment_(self, new_OrgApacheCommonsMathStatDescriptiveMomentFirstMoment_init());
}

OrgApacheCommonsMathStatDescriptiveMomentMean *new_OrgApacheCommonsMathStatDescriptiveMomentMean_init() {
  OrgApacheCommonsMathStatDescriptiveMomentMean *self = [OrgApacheCommonsMathStatDescriptiveMomentMean alloc];
  OrgApacheCommonsMathStatDescriptiveMomentMean_init(self);
  return self;
}

void OrgApacheCommonsMathStatDescriptiveMomentMean_initWithOrgApacheCommonsMathStatDescriptiveMomentFirstMoment_(OrgApacheCommonsMathStatDescriptiveMomentMean *self, OrgApacheCommonsMathStatDescriptiveMomentFirstMoment *m1) {
  OrgApacheCommonsMathStatDescriptiveAbstractStorelessUnivariateStatistic_init(self);
  OrgApacheCommonsMathStatDescriptiveMomentMean_set_moment_(self, m1);
  self->incMoment_ = NO;
}

OrgApacheCommonsMathStatDescriptiveMomentMean *new_OrgApacheCommonsMathStatDescriptiveMomentMean_initWithOrgApacheCommonsMathStatDescriptiveMomentFirstMoment_(OrgApacheCommonsMathStatDescriptiveMomentFirstMoment *m1) {
  OrgApacheCommonsMathStatDescriptiveMomentMean *self = [OrgApacheCommonsMathStatDescriptiveMomentMean alloc];
  OrgApacheCommonsMathStatDescriptiveMomentMean_initWithOrgApacheCommonsMathStatDescriptiveMomentFirstMoment_(self, m1);
  return self;
}

void OrgApacheCommonsMathStatDescriptiveMomentMean_initWithOrgApacheCommonsMathStatDescriptiveMomentMean_(OrgApacheCommonsMathStatDescriptiveMomentMean *self, OrgApacheCommonsMathStatDescriptiveMomentMean *original) {
  OrgApacheCommonsMathStatDescriptiveAbstractStorelessUnivariateStatistic_init(self);
  OrgApacheCommonsMathStatDescriptiveMomentMean_copy__WithOrgApacheCommonsMathStatDescriptiveMomentMean_withOrgApacheCommonsMathStatDescriptiveMomentMean_(original, self);
}

OrgApacheCommonsMathStatDescriptiveMomentMean *new_OrgApacheCommonsMathStatDescriptiveMomentMean_initWithOrgApacheCommonsMathStatDescriptiveMomentMean_(OrgApacheCommonsMathStatDescriptiveMomentMean *original) {
  OrgApacheCommonsMathStatDescriptiveMomentMean *self = [OrgApacheCommonsMathStatDescriptiveMomentMean alloc];
  OrgApacheCommonsMathStatDescriptiveMomentMean_initWithOrgApacheCommonsMathStatDescriptiveMomentMean_(self, original);
  return self;
}

void OrgApacheCommonsMathStatDescriptiveMomentMean_copy__WithOrgApacheCommonsMathStatDescriptiveMomentMean_withOrgApacheCommonsMathStatDescriptiveMomentMean_(OrgApacheCommonsMathStatDescriptiveMomentMean *source, OrgApacheCommonsMathStatDescriptiveMomentMean *dest) {
  OrgApacheCommonsMathStatDescriptiveMomentMean_initialize();
  [((OrgApacheCommonsMathStatDescriptiveMomentMean *) nil_chk(dest)) setDataWithDoubleArray:[((OrgApacheCommonsMathStatDescriptiveMomentMean *) nil_chk(source)) getDataRef]];
  dest->incMoment_ = source->incMoment_;
  OrgApacheCommonsMathStatDescriptiveMomentMean_set_moment_(dest, [((OrgApacheCommonsMathStatDescriptiveMomentFirstMoment *) nil_chk(source->moment_)) copy__]);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathStatDescriptiveMomentMean)
