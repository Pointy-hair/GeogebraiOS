//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/discrete/JarvisMarch2D.java
//


#include "J2ObjC_source.h"
#include "geogebra/common/awt/GPoint2D.h"
#include "geogebra/common/kernel/discrete/JarvisMarch2D.h"
#include "java/lang/Double.h"
#include "java/lang/Math.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"

#define GeogebraCommonKernelDiscreteJarvisMarch2D_M_2PI 6.283185307179586

@interface GeogebraCommonKernelDiscreteJarvisMarch2D ()

+ (GeogebraCommonAwtGPoint2D_Double *)findNextPointWithGeogebraCommonAwtGPoint2D_Double:(GeogebraCommonAwtGPoint2D_Double *)basePoint
                                                                             withDouble:(jdouble)startAngle
                                                                 withJavaUtilCollection:(id<JavaUtilCollection>)points;

+ (jdouble)horizontalAngleWithGeogebraCommonAwtGPoint2D_Double:(GeogebraCommonAwtGPoint2D_Double *)p1
                          withGeogebraCommonAwtGPoint2D_Double:(GeogebraCommonAwtGPoint2D_Double *)p2;

+ (jdouble)formatAngleWithDouble:(jdouble)angle;

@end

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelDiscreteJarvisMarch2D, M_2PI, jdouble)

__attribute__((unused)) static GeogebraCommonAwtGPoint2D_Double *GeogebraCommonKernelDiscreteJarvisMarch2D_findNextPointWithGeogebraCommonAwtGPoint2D_Double_withDouble_withJavaUtilCollection_(GeogebraCommonAwtGPoint2D_Double *basePoint, jdouble startAngle, id<JavaUtilCollection> points);

__attribute__((unused)) static jdouble GeogebraCommonKernelDiscreteJarvisMarch2D_horizontalAngleWithGeogebraCommonAwtGPoint2D_Double_withGeogebraCommonAwtGPoint2D_Double_(GeogebraCommonAwtGPoint2D_Double *p1, GeogebraCommonAwtGPoint2D_Double *p2);

__attribute__((unused)) static jdouble GeogebraCommonKernelDiscreteJarvisMarch2D_formatAngleWithDouble_(jdouble angle);

@implementation GeogebraCommonKernelDiscreteJarvisMarch2D

+ (JavaUtilArrayList *)convexHullWithJavaUtilCollection:(id<JavaUtilCollection>)points {
  return GeogebraCommonKernelDiscreteJarvisMarch2D_convexHullWithJavaUtilCollection_(points);
}

+ (GeogebraCommonAwtGPoint2D_Double *)findNextPointWithGeogebraCommonAwtGPoint2D_Double:(GeogebraCommonAwtGPoint2D_Double *)basePoint
                                                                             withDouble:(jdouble)startAngle
                                                                 withJavaUtilCollection:(id<JavaUtilCollection>)points {
  return GeogebraCommonKernelDiscreteJarvisMarch2D_findNextPointWithGeogebraCommonAwtGPoint2D_Double_withDouble_withJavaUtilCollection_(basePoint, startAngle, points);
}

+ (jdouble)horizontalAngleWithGeogebraCommonAwtGPoint2D_Double:(GeogebraCommonAwtGPoint2D_Double *)p1
                          withGeogebraCommonAwtGPoint2D_Double:(GeogebraCommonAwtGPoint2D_Double *)p2 {
  return GeogebraCommonKernelDiscreteJarvisMarch2D_horizontalAngleWithGeogebraCommonAwtGPoint2D_Double_withGeogebraCommonAwtGPoint2D_Double_(p1, p2);
}

+ (jdouble)formatAngleWithDouble:(jdouble)angle {
  return GeogebraCommonKernelDiscreteJarvisMarch2D_formatAngleWithDouble_(angle);
}

- (instancetype)init {
  GeogebraCommonKernelDiscreteJarvisMarch2D_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "convexHullWithJavaUtilCollection:", "convexHull", "Ljava.util.ArrayList;", 0x9, NULL, NULL },
    { "findNextPointWithGeogebraCommonAwtGPoint2D_Double:withDouble:withJavaUtilCollection:", "findNextPoint", "Lgeogebra.common.awt.GPoint2D$Double;", 0xa, NULL, NULL },
    { "horizontalAngleWithGeogebraCommonAwtGPoint2D_Double:withGeogebraCommonAwtGPoint2D_Double:", "horizontalAngle", "D", 0xa, NULL, NULL },
    { "formatAngleWithDouble:", "formatAngle", "D", 0xa, NULL, NULL },
    { "init", NULL, NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "M_2PI_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelDiscreteJarvisMarch2D_M_2PI },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelDiscreteJarvisMarch2D = { 2, "JarvisMarch2D", "geogebra.common.kernel.discrete", NULL, 0x1, 5, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelDiscreteJarvisMarch2D;
}

@end

JavaUtilArrayList *GeogebraCommonKernelDiscreteJarvisMarch2D_convexHullWithJavaUtilCollection_(id<JavaUtilCollection> points) {
  GeogebraCommonKernelDiscreteJarvisMarch2D_initialize();
  GeogebraCommonAwtGPoint2D_Double *lowestPoint = nil;
  jdouble y;
  jdouble ymin = JavaLangDouble_MAX_VALUE;
  jdouble xmin = JavaLangDouble_MAX_VALUE;
  for (GeogebraCommonAwtGPoint2D_Double * __strong point in nil_chk(points)) {
    y = [((GeogebraCommonAwtGPoint2D_Double *) nil_chk(point)) getY];
    if (y < ymin) {
      ymin = y;
      xmin = [point getX];
      lowestPoint = point;
    }
    else if (y == ymin) {
      jdouble x = [point getX];
      if (x < xmin) {
        xmin = x;
        lowestPoint = point;
      }
    }
  }
  JavaUtilArrayList *hullPoints = [new_JavaUtilArrayList_init() autorelease];
  GeogebraCommonAwtGPoint2D_Double *currentPoint = lowestPoint;
  GeogebraCommonAwtGPoint2D_Double *nextPoint = nil;
  jdouble angle = 0;
  do {
    [hullPoints addWithId:currentPoint];
    nextPoint = GeogebraCommonKernelDiscreteJarvisMarch2D_findNextPointWithGeogebraCommonAwtGPoint2D_Double_withDouble_withJavaUtilCollection_(currentPoint, angle, points);
    angle = GeogebraCommonKernelDiscreteJarvisMarch2D_horizontalAngleWithGeogebraCommonAwtGPoint2D_Double_withGeogebraCommonAwtGPoint2D_Double_(currentPoint, nextPoint);
    currentPoint = nextPoint;
  }
  while (currentPoint != lowestPoint);
  return hullPoints;
}

GeogebraCommonAwtGPoint2D_Double *GeogebraCommonKernelDiscreteJarvisMarch2D_findNextPointWithGeogebraCommonAwtGPoint2D_Double_withDouble_withJavaUtilCollection_(GeogebraCommonAwtGPoint2D_Double *basePoint, jdouble startAngle, id<JavaUtilCollection> points) {
  GeogebraCommonKernelDiscreteJarvisMarch2D_initialize();
  GeogebraCommonAwtGPoint2D_Double *minPoint = nil;
  jdouble minAngle = JavaLangDouble_MAX_VALUE;
  jdouble angle;
  for (GeogebraCommonAwtGPoint2D_Double * __strong point in nil_chk(points)) {
    if ([((GeogebraCommonAwtGPoint2D_Double *) nil_chk(basePoint)) isEqual:point]) continue;
    angle = GeogebraCommonKernelDiscreteJarvisMarch2D_horizontalAngleWithGeogebraCommonAwtGPoint2D_Double_withGeogebraCommonAwtGPoint2D_Double_(basePoint, point);
    angle = GeogebraCommonKernelDiscreteJarvisMarch2D_formatAngleWithDouble_(angle - startAngle);
    if (angle < minAngle) {
      minAngle = angle;
      minPoint = point;
    }
  }
  return minPoint;
}

jdouble GeogebraCommonKernelDiscreteJarvisMarch2D_horizontalAngleWithGeogebraCommonAwtGPoint2D_Double_withGeogebraCommonAwtGPoint2D_Double_(GeogebraCommonAwtGPoint2D_Double *p1, GeogebraCommonAwtGPoint2D_Double *p2) {
  GeogebraCommonKernelDiscreteJarvisMarch2D_initialize();
  return fmod((JavaLangMath_atan2WithDouble_withDouble_(((GeogebraCommonAwtGPoint2D_Double *) nil_chk(p2))->y_ - ((GeogebraCommonAwtGPoint2D_Double *) nil_chk(p1))->y_, p2->x_ - p1->x_) + GeogebraCommonKernelDiscreteJarvisMarch2D_M_2PI), (GeogebraCommonKernelDiscreteJarvisMarch2D_M_2PI));
}

jdouble GeogebraCommonKernelDiscreteJarvisMarch2D_formatAngleWithDouble_(jdouble angle) {
  GeogebraCommonKernelDiscreteJarvisMarch2D_initialize();
  return fmod(((fmod(angle, GeogebraCommonKernelDiscreteJarvisMarch2D_M_2PI)) + GeogebraCommonKernelDiscreteJarvisMarch2D_M_2PI), GeogebraCommonKernelDiscreteJarvisMarch2D_M_2PI);
}

void GeogebraCommonKernelDiscreteJarvisMarch2D_init(GeogebraCommonKernelDiscreteJarvisMarch2D *self) {
  NSObject_init(self);
}

GeogebraCommonKernelDiscreteJarvisMarch2D *new_GeogebraCommonKernelDiscreteJarvisMarch2D_init() {
  GeogebraCommonKernelDiscreteJarvisMarch2D *self = [GeogebraCommonKernelDiscreteJarvisMarch2D alloc];
  GeogebraCommonKernelDiscreteJarvisMarch2D_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelDiscreteJarvisMarch2D)
