//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/algos/AlgoRootsPolynomial.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/EquationSolver.h"
#include "geogebra/common/kernel/EquationSolverInterface.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/StringTemplate.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/algos/AlgoIntersect.h"
#include "geogebra/common/kernel/algos/AlgoRootsPolynomial.h"
#include "geogebra/common/kernel/algos/ConstructionElement.h"
#include "geogebra/common/kernel/arithmetic/Function.h"
#include "geogebra/common/kernel/arithmetic/PolyFunction.h"
#include "geogebra/common/kernel/commands/Commands.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoFunction.h"
#include "geogebra/common/kernel/geos/GeoLine.h"
#include "geogebra/common/kernel/geos/GeoPoint.h"
#include "geogebra/common/kernel/kernelND/AlgoIntersectND.h"
#include "geogebra/common/kernel/roots/RealRootFunction.h"
#include "geogebra/common/main/Localization.h"
#include "java/lang/Math.h"
#include "java/util/Arrays.h"
#include "java/util/Iterator.h"
#include "java/util/LinkedList.h"

#define GeogebraCommonKernelAlgosAlgoRootsPolynomial_ROOTS 0
#define GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLYNOMIALS 1
#define GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLY_LINE 2
#define GeogebraCommonKernelAlgosAlgoRootsPolynomial_MULTIPLE_ROOTS 3
#define GeogebraCommonKernelAlgosAlgoRootsPolynomial_DELTA 1.0E-4

@interface GeogebraCommonKernelAlgosAlgoRootsPolynomial () {
 @public
  jint mode_;
  GeogebraCommonKernelGeosGeoLine *line_;
  IOSObjectArray *labels_;
  jboolean initLabels_;
  GeogebraCommonKernelArithmeticFunction *diffFunction_;
  GeogebraCommonKernelGeosGeoPoint *tempPoint_;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                       withNSStringArray:(IOSObjectArray *)labels
                                             withBoolean:(jboolean)setLabels
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)g
                     withGeogebraCommonKernelGeosGeoLine:(GeogebraCommonKernelGeosGeoLine *)l;

- (void)computePolynomialIntersection;

- (void)computePolyLineIntersection;

- (void)ensureSignChangedWithGeogebraCommonKernelRootsRealRootFunction:(id<GeogebraCommonKernelRootsRealRootFunction>)f;

- (void)addToCurrentRootsWithDoubleArray:(IOSDoubleArray *)roots
                                 withInt:(jint)number;

- (void)removeRootWithInt:(jint)pos;

- (void)removeRootPointWithInt:(jint)pos;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, line_, GeogebraCommonKernelGeosGeoLine *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, labels_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, diffFunction_, GeogebraCommonKernelArithmeticFunction *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, tempPoint_, GeogebraCommonKernelGeosGeoPoint *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, ROOTS, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, INTERSECT_POLYNOMIALS, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, INTERSECT_POLY_LINE, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, MULTIPLE_ROOTS, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelAlgosAlgoRootsPolynomial, DELTA, jdouble)

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, jboolean setLabels, GeogebraCommonKernelGeosGeoFunction *f, GeogebraCommonKernelGeosGeoFunction *g, GeogebraCommonKernelGeosGeoLine *l);

__attribute__((unused)) static GeogebraCommonKernelAlgosAlgoRootsPolynomial *new_GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(GeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, jboolean setLabels, GeogebraCommonKernelGeosGeoFunction *f, GeogebraCommonKernelGeosGeoFunction *g, GeogebraCommonKernelGeosGeoLine *l) NS_RETURNS_RETAINED;

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_computePolynomialIntersection(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_computePolyLineIntersection(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_calcRootsWithGeogebraCommonKernelArithmeticFunction_withInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelArithmeticFunction *fun, jint derivDegree);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_ensureSignChangedWithGeogebraCommonKernelRootsRealRootFunction_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, id<GeogebraCommonKernelRootsRealRootFunction> f);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_addToCurrentRootsWithDoubleArray_withInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, IOSDoubleArray *roots, jint number);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootWithInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, jint pos);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_setRootPointsWithDoubleArray_withInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, IOSDoubleArray *roots, jint number);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootPointWithInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, jint pos);

@implementation GeogebraCommonKernelAlgosAlgoRootsPolynomial

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                       withNSStringArray:(IOSObjectArray *)labels
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withGeogebraCommonKernelGeosGeoFunction_(self, cons, labels, f);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)g {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_(self, cons, f, g);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
                     withGeogebraCommonKernelGeosGeoLine:(GeogebraCommonKernelGeosGeoLine *)l {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(self, cons, f, l);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                       withNSStringArray:(IOSObjectArray *)labels
                                             withBoolean:(jboolean)setLabels
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)g
                     withGeogebraCommonKernelGeosGeoLine:(GeogebraCommonKernelGeosGeoLine *)l {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(self, cons, labels, setLabels, f, g, l);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelGeosGeoFunction_(self, f);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_(self, cons, f);
  return self;
}

- (void)setLabelsWithNSStringArray:(IOSObjectArray *)labels {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_labels_(self, labels);
  setLabels__ = ![((GeogebraCommonKernelConstruction *) nil_chk(cons_)) isSuppressLabelsActive];
  if (labels != nil) [self initRootPointsWithInt:labels->size_];
  [self update];
}

- (GeogebraCommonKernelCommandsCommandsEnum *)getClassName {
  return GeogebraCommonKernelCommandsCommandsEnum_get_Root();
}

- (void)setInputOutput {
  switch (mode_) {
    case GeogebraCommonKernelAlgosAlgoRootsPolynomial_MULTIPLE_ROOTS:
    case GeogebraCommonKernelAlgosAlgoRootsPolynomial_ROOTS:
    GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:1 type:GeogebraCommonKernelGeosGeoElement_class_()]);
    IOSObjectArray_Set(input_, 0, f_);
    break;
    case GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLYNOMIALS:
    GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:2 type:GeogebraCommonKernelGeosGeoElement_class_()]);
    IOSObjectArray_Set(input_, 0, f_);
    IOSObjectArray_Set(input_, 1, g_);
    break;
    case GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLY_LINE:
    GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:2 type:GeogebraCommonKernelGeosGeoElement_class_()]);
    IOSObjectArray_Set(input_, 0, f_);
    IOSObjectArray_Set(input_, 1, line_);
    break;
  }
  [super setOutputWithGeogebraCommonKernelGeosGeoElementArray:rootPoints_];
  [self noUndefinedPointsInAlgebraView];
  [self setDependencies];
}

- (IOSObjectArray *)getRootPoints {
  return rootPoints_;
}

- (IOSObjectArray *)getIntersectionPoints {
  return rootPoints_;
}

- (IOSObjectArray *)getLastDefinedIntersectionPoints {
  return nil;
}

- (void)compute {
  switch (mode_) {
    case GeogebraCommonKernelAlgosAlgoRootsPolynomial_ROOTS:
    [self computeRoots];
    break;
    case GeogebraCommonKernelAlgosAlgoRootsPolynomial_MULTIPLE_ROOTS:
    if ([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f_)) isDefined]) {
      GeogebraCommonKernelArithmeticFunction *fun = [f_ getFunction];
      [self calcRootsMultipleWithGeogebraCommonKernelArithmeticFunction:fun withInt:0];
    }
    else {
      curRealRoots_ = 0;
    }
    break;
    case GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLYNOMIALS:
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_computePolynomialIntersection(self);
    break;
    case GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLY_LINE:
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_computePolyLineIntersection(self);
    break;
  }
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setRootPointsWithDoubleArray_withInt_(self, curRoots_, curRealRoots_);
}

- (void)computeRoots {
  if ([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f_)) isDefined]) {
    GeogebraCommonKernelArithmeticFunction *fun = [f_ getFunction];
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_calcRootsWithGeogebraCommonKernelArithmeticFunction_withInt_(self, fun, 0);
  }
  else {
    curRealRoots_ = 0;
  }
}

- (void)computePolynomialIntersection {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_computePolynomialIntersection(self);
}

- (void)computePolyLineIntersection {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_computePolyLineIntersection(self);
}

- (void)calcRootsWithGeogebraCommonKernelArithmeticFunction:(GeogebraCommonKernelArithmeticFunction *)fun
                                                    withInt:(jint)derivDegree {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_calcRootsWithGeogebraCommonKernelArithmeticFunction_withInt_(self, fun, derivDegree);
}

- (id<GeogebraCommonKernelRootsRealRootFunction>)calcRootsMultipleWithGeogebraCommonKernelArithmeticFunction:(GeogebraCommonKernelArithmeticFunction *)fun
                                                                                                     withInt:(jint)derivDegree {
  JavaUtilLinkedList *factorList;
  GeogebraCommonKernelArithmeticPolyFunction *derivPoly = nil;
  id<GeogebraCommonKernelRootsRealRootFunction> evalFunction = nil;
  if (derivDegree > 0) {
    factorList = [((GeogebraCommonKernelArithmeticFunction *) nil_chk(fun)) getSymbolicPolynomialDerivativeFactorsWithInt:derivDegree withBoolean:YES];
    if (factorList == nil) {
      derivPoly = [fun getNumericPolynomialDerivativeWithInt:derivDegree withBoolean:NO];
      evalFunction = derivPoly;
    }
    else {
      evalFunction = [fun getDerivativeWithInt:derivDegree withBoolean:YES];
    }
  }
  else {
    factorList = [((GeogebraCommonKernelArithmeticFunction *) nil_chk(fun)) getPolynomialFactorsWithBoolean:NO];
  }
  IOSDoubleArray *roots;
  jint realRoots;
  curRealRoots_ = 0;
  if (factorList != nil) {
    id<JavaUtilIterator> it = [factorList iterator];
    while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
      GeogebraCommonKernelArithmeticPolyFunction *polyFun = [it next];
      if (![((GeogebraCommonKernelArithmeticPolyFunction *) nil_chk(polyFun)) updateCoeffValues]) {
        curRealRoots_ = 0;
        return nil;
      }
      roots = [polyFun getCoeffsCopy];
      realRoots = [((id<GeogebraCommonKernelEquationSolverInterface>) nil_chk(eqnSolver_)) polynomialRootsWithDoubleArray:roots withBoolean:YES];
      GeogebraCommonKernelAlgosAlgoRootsPolynomial_addToCurrentRootsWithDoubleArray_withInt_(self, roots, realRoots);
    }
  }
  else if (derivPoly != nil) {
    roots = [derivPoly getCoeffsCopy];
    realRoots = [((id<GeogebraCommonKernelEquationSolverInterface>) nil_chk(eqnSolver_)) polynomialRootsWithDoubleArray:roots withBoolean:NO];
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_addToCurrentRootsWithDoubleArray_withInt_(self, roots, realRoots);
  }
  else return nil;
  if (curRealRoots_ > 1) JavaUtilArrays_sortWithDoubleArray_withInt_withInt_(curRoots_, 0, curRealRoots_);
  return evalFunction;
}

- (void)ensureSignChangedWithGeogebraCommonKernelRootsRealRootFunction:(id<GeogebraCommonKernelRootsRealRootFunction>)f {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_ensureSignChangedWithGeogebraCommonKernelRootsRealRootFunction_(self, f);
}

- (void)addToCurrentRootsWithDoubleArray:(IOSDoubleArray *)roots
                                 withInt:(jint)number {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_addToCurrentRootsWithDoubleArray_withInt_(self, roots, number);
}

- (void)removeRootWithInt:(jint)pos {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootWithInt_(self, pos);
}

- (void)setRootPointsWithDoubleArray:(IOSDoubleArray *)roots
                             withInt:(jint)number {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setRootPointsWithDoubleArray_withInt_(self, roots, number);
}

- (void)updateLabelsWithInt:(jint)number {
  if (initLabels_) {
    GeogebraCommonKernelGeosGeoElement_setLabelsWithNSStringArray_withGeogebraCommonKernelGeosGeoElementArray_(labels_, rootPoints_);
    initLabels_ = NO;
  }
  else {
    for (jint i = 0; i < number; i++) {
      if (![((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(rootPoints_), i))) isLabelSet]) {
        NSString *newLabel = (labels_ != nil && i < labels_->size_) ? IOSObjectArray_Get(labels_, i) : nil;
        [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(rootPoints_, i))) setLabelWithNSString:newLabel];
      }
    }
  }
  for (jint i = number; i < ((IOSObjectArray *) nil_chk(rootPoints_))->size_; i++) {
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(rootPoints_, i))) setUndefined];
  }
}

- (void)removeWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)output {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(rootPoints_))->size_; i++) {
    if (IOSObjectArray_Get(rootPoints_, i) == output && ![((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(rootPoints_, i))) isDefined]) {
      GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootPointWithInt_(self, i);
      return;
    }
  }
  [super remove];
}

- (void)initRootPointsWithInt:(jint)number {
  if (((IOSObjectArray *) nil_chk(rootPoints_))->size_ < number) {
    IOSObjectArray *temp = [IOSObjectArray arrayWithLength:number type:GeogebraCommonKernelGeosGeoPoint_class_()];
    for (jint i = 0; i < rootPoints_->size_; i++) {
      IOSObjectArray_Set(temp, i, IOSObjectArray_Get(rootPoints_, i));
      [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(temp, i))) setCoordsWithDouble:0 withDouble:0 withDouble:1];
    }
    for (jint i = rootPoints_->size_; i < temp->size_; i++) {
      IOSObjectArray_SetAndConsume(temp, i, new_GeogebraCommonKernelGeosGeoPoint_initWithGeogebraCommonKernelConstruction_(cons_));
      [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(temp, i))) setCoordsWithDouble:0 withDouble:0 withDouble:1];
      [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(temp, i))) setParentAlgorithmWithGeogebraCommonKernelAlgosAlgoElement:self];
    }
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_rootPoints_(self, temp);
    [super setOutputWithGeogebraCommonKernelGeosGeoElementArray:rootPoints_];
  }
}

- (void)removeRootPointWithInt:(jint)pos {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootPointWithInt_(self, pos);
}

- (NSString *)toStringWithGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return [((GeogebraCommonMainLocalization *) nil_chk([self getLoc])) getPlainWithNSString:@"RootOfA" withNSString:[((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f_)) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
}

- (void)dealloc {
  RELEASE_(f_);
  RELEASE_(g_);
  RELEASE_(line_);
  RELEASE_(rootPoints_);
  RELEASE_(labels_);
  RELEASE_(eqnSolver_);
  RELEASE_(curRoots_);
  RELEASE_(yValFunction_);
  RELEASE_(diffFunction_);
  RELEASE_(tempPoint_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSStringArray:withGeogebraCommonKernelGeosGeoFunction:", "AlgoRootsPolynomial", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelGeosGeoFunction:", "AlgoRootsPolynomial", NULL, 0x0, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelGeosGeoLine:", "AlgoRootsPolynomial", NULL, 0x0, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withNSStringArray:withBoolean:withGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelGeosGeoLine:", "AlgoRootsPolynomial", NULL, 0x2, NULL, NULL },
    { "initWithGeogebraCommonKernelGeosGeoFunction:", "AlgoRootsPolynomial", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withGeogebraCommonKernelGeosGeoFunction:", "AlgoRootsPolynomial", NULL, 0x1, NULL, NULL },
    { "setLabelsWithNSStringArray:", "setLabels", "V", 0x1, NULL, NULL },
    { "getClassName", NULL, "Lgeogebra.common.kernel.commands.Commands;", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "getRootPoints", NULL, "[Lgeogebra.common.kernel.geos.GeoPoint;", 0x1, NULL, NULL },
    { "getIntersectionPoints", NULL, "[Lgeogebra.common.kernel.geos.GeoPoint;", 0x1, NULL, NULL },
    { "getLastDefinedIntersectionPoints", NULL, "[Lgeogebra.common.kernel.geos.GeoPoint;", 0x4, NULL, NULL },
    { "compute", NULL, "V", 0x1, NULL, NULL },
    { "computeRoots", NULL, "V", 0x4, NULL, NULL },
    { "computePolynomialIntersection", NULL, "V", 0x2, NULL, NULL },
    { "computePolyLineIntersection", NULL, "V", 0x2, NULL, NULL },
    { "calcRootsWithGeogebraCommonKernelArithmeticFunction:withInt:", "calcRoots", "V", 0x11, NULL, NULL },
    { "calcRootsMultipleWithGeogebraCommonKernelArithmeticFunction:withInt:", "calcRootsMultiple", "Lgeogebra.common.kernel.roots.RealRootFunction;", 0x1, NULL, NULL },
    { "ensureSignChangedWithGeogebraCommonKernelRootsRealRootFunction:", "ensureSignChanged", "V", 0x2, NULL, NULL },
    { "addToCurrentRootsWithDoubleArray:withInt:", "addToCurrentRoots", "V", 0x2, NULL, NULL },
    { "removeRootWithInt:", "removeRoot", "V", 0x12, NULL, NULL },
    { "setRootPointsWithDoubleArray:withInt:", "setRootPoints", "V", 0x14, NULL, NULL },
    { "updateLabelsWithInt:", "updateLabels", "V", 0x4, NULL, NULL },
    { "removeWithGeogebraCommonKernelGeosGeoElement:", "remove", "V", 0x1, NULL, NULL },
    { "initRootPointsWithInt:", "initRootPoints", "V", 0x4, NULL, NULL },
    { "removeRootPointWithInt:", "removeRootPoint", "V", 0x2, NULL, NULL },
    { "toStringWithGeogebraCommonKernelStringTemplate:", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ROOTS_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelAlgosAlgoRootsPolynomial_ROOTS },
    { "INTERSECT_POLYNOMIALS_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLYNOMIALS },
    { "INTERSECT_POLY_LINE_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLY_LINE },
    { "MULTIPLE_ROOTS_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelAlgosAlgoRootsPolynomial_MULTIPLE_ROOTS },
    { "mode_", NULL, 0x2, "I", NULL, NULL,  },
    { "f_", NULL, 0x4, "Lgeogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "g_", NULL, 0x0, "Lgeogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "line_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoLine;", NULL, NULL,  },
    { "rootPoints_", NULL, 0x4, "[Lgeogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "labels_", NULL, 0x2, "[Ljava.lang.String;", NULL, NULL,  },
    { "initLabels_", NULL, 0x2, "Z", NULL, NULL,  },
    { "setLabels__", "setLabels", 0x4, "Z", NULL, NULL,  },
    { "eqnSolver_", NULL, 0x4, "Lgeogebra.common.kernel.EquationSolverInterface;", NULL, NULL,  },
    { "curRoots_", NULL, 0x4, "[D", NULL, NULL,  },
    { "curRealRoots_", NULL, 0x4, "I", NULL, NULL,  },
    { "yValFunction_", NULL, 0x4, "Lgeogebra.common.kernel.arithmetic.Function;", NULL, NULL,  },
    { "diffFunction_", NULL, 0x2, "Lgeogebra.common.kernel.arithmetic.Function;", NULL, NULL,  },
    { "tempPoint_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "DELTA_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelAlgosAlgoRootsPolynomial_DELTA },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelAlgosAlgoRootsPolynomial = { 2, "AlgoRootsPolynomial", "geogebra.common.kernel.algos", NULL, 0x1, 27, methods, 19, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelAlgosAlgoRootsPolynomial;
}

@end

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withGeogebraCommonKernelGeosGeoFunction_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, GeogebraCommonKernelGeosGeoFunction *f) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(self, cons, labels, ![((GeogebraCommonKernelConstruction *) nil_chk(cons)) isSuppressLabelsActive], f, nil, nil);
}

GeogebraCommonKernelAlgosAlgoRootsPolynomial *new_GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withGeogebraCommonKernelGeosGeoFunction_(GeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, GeogebraCommonKernelGeosGeoFunction *f) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial *self = [GeogebraCommonKernelAlgosAlgoRootsPolynomial alloc];
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withGeogebraCommonKernelGeosGeoFunction_(self, cons, labels, f);
  return self;
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f, GeogebraCommonKernelGeosGeoFunction *g) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(self, cons, nil, NO, f, g, nil);
}

GeogebraCommonKernelAlgosAlgoRootsPolynomial *new_GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_(GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f, GeogebraCommonKernelGeosGeoFunction *g) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial *self = [GeogebraCommonKernelAlgosAlgoRootsPolynomial alloc];
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_(self, cons, f, g);
  return self;
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f, GeogebraCommonKernelGeosGeoLine *l) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(self, cons, nil, NO, f, nil, l);
}

GeogebraCommonKernelAlgosAlgoRootsPolynomial *new_GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f, GeogebraCommonKernelGeosGeoLine *l) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial *self = [GeogebraCommonKernelAlgosAlgoRootsPolynomial alloc];
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(self, cons, f, l);
  return self;
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, jboolean setLabels, GeogebraCommonKernelGeosGeoFunction *f, GeogebraCommonKernelGeosGeoFunction *g, GeogebraCommonKernelGeosGeoLine *l) {
  GeogebraCommonKernelAlgosAlgoIntersect_initWithGeogebraCommonKernelConstruction_(self, cons);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_curRoots_(self, [IOSDoubleArray newArrayWithLength:30]);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_f_(self, f);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_g_(self, g);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_line_(self, l);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_tempPoint_(self, new_GeogebraCommonKernelGeosGeoPoint_initWithGeogebraCommonKernelConstruction_(cons));
  if (g != nil) self->mode_ = GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLYNOMIALS;
  else if (l != nil) {
    self->mode_ = GeogebraCommonKernelAlgosAlgoRootsPolynomial_INTERSECT_POLY_LINE;
  }
  else self->mode_ = GeogebraCommonKernelAlgosAlgoRootsPolynomial_ROOTS;
  if (self->mode_ != GeogebraCommonKernelAlgosAlgoRootsPolynomial_ROOTS) {
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_diffFunction_(self, new_GeogebraCommonKernelArithmeticFunction_initWithGeogebraCommonKernelKernel_(self->kernel_));
  }
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_labels_(self, labels);
  self->setLabels__ = setLabels;
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_eqnSolver_(self, [((GeogebraCommonKernelKernel *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(cons)) getKernel])) getEquationSolver]);
  jint number = labels == nil ? 1 : JavaLangMath_maxWithInt_withInt_(1, labels->size_);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_rootPoints_(self, [IOSObjectArray newArrayWithLength:0 type:GeogebraCommonKernelGeosGeoPoint_class_()]);
  [self initRootPointsWithInt:number];
  self->initLabels_ = YES;
  [self setInputOutput];
  [self compute];
  if (![((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) isDefined]) {
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) setCoordsWithDouble:0 withDouble:0 withDouble:1];
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) update];
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) setUndefined];
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) update];
  }
}

GeogebraCommonKernelAlgosAlgoRootsPolynomial *new_GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(GeogebraCommonKernelConstruction *cons, IOSObjectArray *labels, jboolean setLabels, GeogebraCommonKernelGeosGeoFunction *f, GeogebraCommonKernelGeosGeoFunction *g, GeogebraCommonKernelGeosGeoLine *l) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial *self = [GeogebraCommonKernelAlgosAlgoRootsPolynomial alloc];
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withNSStringArray_withBoolean_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelGeosGeoLine_(self, cons, labels, setLabels, f, g, l);
  return self;
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelGeosGeoFunction_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelGeosGeoFunction *f) {
  GeogebraCommonKernelAlgosAlgoIntersect_initWithGeogebraCommonKernelConstruction_(self, ((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f))->cons_);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_curRoots_(self, [IOSDoubleArray newArrayWithLength:30]);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_f_(self, f);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_tempPoint_(self, new_GeogebraCommonKernelGeosGeoPoint_initWithGeogebraCommonKernelConstruction_(self->cons_));
  self->mode_ = GeogebraCommonKernelAlgosAlgoRootsPolynomial_MULTIPLE_ROOTS;
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_eqnSolver_(self, [((GeogebraCommonKernelKernel *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) getKernel])) getEquationSolver]);
  jint number = self->labels_ == nil ? 1 : JavaLangMath_maxWithInt_withInt_(1, self->labels_->size_);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_rootPoints_(self, [IOSObjectArray newArrayWithLength:0 type:GeogebraCommonKernelGeosGeoPoint_class_()]);
  [self initRootPointsWithInt:number];
  self->initLabels_ = YES;
  [self setInputOutput];
  [self compute];
  if (![((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) isDefined]) {
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) setCoordsWithDouble:0 withDouble:0 withDouble:1];
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) update];
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) setUndefined];
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, 0))) update];
  }
}

GeogebraCommonKernelAlgosAlgoRootsPolynomial *new_GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelGeosGeoFunction_(GeogebraCommonKernelGeosGeoFunction *f) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial *self = [GeogebraCommonKernelAlgosAlgoRootsPolynomial alloc];
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelGeosGeoFunction_(self, f);
  return self;
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f) {
  GeogebraCommonKernelAlgosAlgoIntersect_initWithGeogebraCommonKernelConstruction_(self, cons);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_curRoots_(self, [IOSDoubleArray newArrayWithLength:30]);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_f_(self, f);
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_tempPoint_(self, new_GeogebraCommonKernelGeosGeoPoint_initWithGeogebraCommonKernelConstruction_(cons));
  self->mode_ = GeogebraCommonKernelAlgosAlgoRootsPolynomial_ROOTS;
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_eqnSolver_(self, [((GeogebraCommonKernelKernel *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(cons)) getKernel])) getEquationSolver]);
  jint number = 1;
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_setAndConsume_rootPoints_(self, [IOSObjectArray newArrayWithLength:0 type:GeogebraCommonKernelGeosGeoPoint_class_()]);
  [self initRootPointsWithInt:number];
  self->initLabels_ = YES;
  [self setInputOutput];
  [self compute];
}

GeogebraCommonKernelAlgosAlgoRootsPolynomial *new_GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_(GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f) {
  GeogebraCommonKernelAlgosAlgoRootsPolynomial *self = [GeogebraCommonKernelAlgosAlgoRootsPolynomial alloc];
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_(self, cons, f);
  return self;
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_computePolynomialIntersection(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self) {
  if ([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f_)) isDefined] && [((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->g_)) isDefined]) {
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_yValFunction_(self, [self->f_ getFunction]);
    GeogebraCommonKernelArithmeticFunction_differenceWithGeogebraCommonKernelArithmeticFunction_withGeogebraCommonKernelArithmeticFunction_withGeogebraCommonKernelArithmeticFunction_([self->f_ getFunction], [self->g_ getFunction], self->diffFunction_);
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_calcRootsWithGeogebraCommonKernelArithmeticFunction_withInt_(self, self->diffFunction_, 0);
    for (jint i = 0; i < self->curRealRoots_; i++) {
      if (!GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_withDouble_([self->f_ evaluateWithDouble:IOSDoubleArray_Get(nil_chk(self->curRoots_), i)], [self->g_ evaluateWithDouble:IOSDoubleArray_Get(self->curRoots_, i)], GeogebraCommonKernelKernel_MIN_PRECISION)) {
        GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootWithInt_(self, i);
        i--;
      }
    }
  }
  else {
    self->curRealRoots_ = 0;
  }
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_computePolyLineIntersection(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self) {
  if ([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f_)) isDefined] && [((GeogebraCommonKernelGeosGeoLine *) nil_chk(self->line_)) isDefined]) {
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_yValFunction_(self, [self->f_ getFunction]);
    if (GeogebraCommonKernelKernel_isZeroWithDouble_(self->line_->y_)) {
      jdouble x = -self->line_->z_ / self->line_->x_;
      *IOSDoubleArray_GetRef(nil_chk(self->curRoots_), 0) = x;
      self->curRealRoots_ = 1;
    }
    else {
      GeogebraCommonKernelArithmeticFunction_differenceWithGeogebraCommonKernelArithmeticFunction_withGeogebraCommonKernelGeosGeoLine_withGeogebraCommonKernelArithmeticFunction_([self->f_ getFunction], self->line_, self->diffFunction_);
      GeogebraCommonKernelAlgosAlgoRootsPolynomial_calcRootsWithGeogebraCommonKernelArithmeticFunction_withInt_(self, self->diffFunction_, 0);
    }
    for (jint i = 0; i < self->curRealRoots_; i++) {
      [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(self->tempPoint_)) setCoordsWithDouble:IOSDoubleArray_Get(nil_chk(self->curRoots_), i) withDouble:[self->f_ evaluateWithDouble:IOSDoubleArray_Get(self->curRoots_, i)] withDouble:1.0];
      if (![self->line_ isIntersectionPointIncidentWithGeogebraCommonKernelGeosGeoPoint:self->tempPoint_ withDouble:GeogebraCommonKernelKernel_MIN_PRECISION]) {
        GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootWithInt_(self, i);
        i--;
      }
    }
  }
  else {
    self->curRealRoots_ = 0;
  }
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_calcRootsWithGeogebraCommonKernelArithmeticFunction_withInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, GeogebraCommonKernelArithmeticFunction *fun, jint derivDegree) {
  id<GeogebraCommonKernelRootsRealRootFunction> evalFunction = [self calcRootsMultipleWithGeogebraCommonKernelArithmeticFunction:fun withInt:derivDegree];
  if (self->curRealRoots_ > 1) {
    JavaUtilArrays_sortWithDoubleArray_withInt_withInt_(self->curRoots_, 0, self->curRealRoots_);
    jdouble maxRoot = IOSDoubleArray_Get(nil_chk(self->curRoots_), 0);
    jint maxIndex = 0;
    for (jint i = 1; i < self->curRealRoots_; i++) {
      if ((IOSDoubleArray_Get(self->curRoots_, i) - maxRoot) > GeogebraCommonKernelKernel_MIN_PRECISION) {
        maxRoot = IOSDoubleArray_Get(self->curRoots_, i);
        maxIndex++;
        *IOSDoubleArray_GetRef(self->curRoots_, maxIndex) = maxRoot;
      }
    }
    self->curRealRoots_ = maxIndex + 1;
  }
  if (derivDegree > 0) {
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_ensureSignChangedWithGeogebraCommonKernelRootsRealRootFunction_(self, evalFunction);
  }
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_ensureSignChangedWithGeogebraCommonKernelRootsRealRootFunction_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, id<GeogebraCommonKernelRootsRealRootFunction> f) {
  jdouble left, right, leftEval, rightEval;
  jboolean signUnChanged;
  for (jint i = 0; i < self->curRealRoots_; i++) {
    left = IOSDoubleArray_Get(nil_chk(self->curRoots_), i) - GeogebraCommonKernelAlgosAlgoRootsPolynomial_DELTA;
    right = IOSDoubleArray_Get(self->curRoots_, i) + GeogebraCommonKernelAlgosAlgoRootsPolynomial_DELTA;
    jint count = 0;
    while (JavaLangMath_absWithDouble_(leftEval = [((id<GeogebraCommonKernelRootsRealRootFunction>) nil_chk(f)) evaluateWithDouble:left]) < GeogebraCommonKernelAlgosAlgoRootsPolynomial_DELTA && count++ < 100) left = left - GeogebraCommonKernelAlgosAlgoRootsPolynomial_DELTA;
    count = 0;
    while (JavaLangMath_absWithDouble_(rightEval = [f evaluateWithDouble:right]) < GeogebraCommonKernelAlgosAlgoRootsPolynomial_DELTA && count++ < 100) right = right + GeogebraCommonKernelAlgosAlgoRootsPolynomial_DELTA;
    signUnChanged = (leftEval * rightEval > 0);
    if (signUnChanged) {
      GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootWithInt_(self, i);
      i--;
    }
  }
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_addToCurrentRootsWithDoubleArray_withInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, IOSDoubleArray *roots, jint number) {
  jint length = self->curRealRoots_ + number;
  if (length >= ((IOSDoubleArray *) nil_chk(self->curRoots_))->size_) {
    IOSDoubleArray *temp = [IOSDoubleArray arrayWithLength:2 * length];
    for (jint i = 0; i < self->curRealRoots_; i++) {
      *IOSDoubleArray_GetRef(temp, i) = IOSDoubleArray_Get(self->curRoots_, i);
    }
    GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_curRoots_(self, temp);
  }
  for (jint i = 0; i < number; i++) {
    *IOSDoubleArray_GetRef(self->curRoots_, self->curRealRoots_ + i) = IOSDoubleArray_Get(nil_chk(roots), i);
  }
  self->curRealRoots_ += number;
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootWithInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, jint pos) {
  for (jint i = pos + 1; i < self->curRealRoots_; i++) {
    *IOSDoubleArray_GetRef(nil_chk(self->curRoots_), i - 1) = IOSDoubleArray_Get(self->curRoots_, i);
  }
  self->curRealRoots_--;
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_setRootPointsWithDoubleArray_withInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, IOSDoubleArray *roots, jint number) {
  [self initRootPointsWithInt:number];
  for (jint i = 0; i < number; i++) {
    if (self->yValFunction_ == nil) {
      [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(self->rootPoints_), i))) setCoordsWithDouble:IOSDoubleArray_Get(nil_chk(roots), i) withDouble:0.0 withDouble:1.0];
    }
    else {
      [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(self->rootPoints_), i))) setCoordsWithDouble:IOSDoubleArray_Get(nil_chk(roots), i) withDouble:[self->yValFunction_ evaluateWithDouble:IOSDoubleArray_Get(roots, i)] withDouble:1.0];
    }
  }
  for (jint i = number; i < ((IOSObjectArray *) nil_chk(self->rootPoints_))->size_; i++) {
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->rootPoints_, i))) setUndefined];
  }
  if (self->setLabels__) [self updateLabelsWithInt:number];
}

void GeogebraCommonKernelAlgosAlgoRootsPolynomial_removeRootPointWithInt_(GeogebraCommonKernelAlgosAlgoRootsPolynomial *self, jint pos) {
  [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(self->rootPoints_), pos))) doRemove];
  IOSObjectArray *temp = [IOSObjectArray arrayWithLength:self->rootPoints_->size_ - 1 type:GeogebraCommonKernelGeosGeoPoint_class_()];
  jint i;
  for (i = 0; i < pos; i++) IOSObjectArray_Set(temp, i, IOSObjectArray_Get(self->rootPoints_, i));
  for (i = pos + 1; i < self->rootPoints_->size_; i++) IOSObjectArray_Set(temp, i - 1, IOSObjectArray_Get(self->rootPoints_, i));
  GeogebraCommonKernelAlgosAlgoRootsPolynomial_set_rootPoints_(self, temp);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelAlgosAlgoRootsPolynomial)
