//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/org/apache/commons/math/analysis/integration/SimpsonIntegrator.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Deprecated.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "org/apache/commons/math/FunctionEvaluationException.h"
#include "org/apache/commons/math/MathRuntimeException.h"
#include "org/apache/commons/math/MaxIterationsExceededException.h"
#include "org/apache/commons/math/analysis/UnivariateRealFunction.h"
#include "org/apache/commons/math/analysis/integration/SimpsonIntegrator.h"
#include "org/apache/commons/math/analysis/integration/TrapezoidIntegrator.h"
#include "org/apache/commons/math/analysis/integration/UnivariateRealIntegratorImpl.h"
#include "org/apache/commons/math/exception/util/LocalizedFormats.h"
#include "org/apache/commons/math/util/FastMath.h"

@implementation OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator

- (instancetype)initWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:(id<OrgApacheCommonsMathAnalysisUnivariateRealFunction>)f {
  OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator_initWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_(self, f);
  return self;
}

- (instancetype)init {
  OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator_init(self);
  return self;
}

- (jdouble)integrateWithDouble:(jdouble)min
                    withDouble:(jdouble)max {
  return [self integrateWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:f_ withDouble:min withDouble:max];
}

- (jdouble)integrateWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:(id<OrgApacheCommonsMathAnalysisUnivariateRealFunction>)f
                                                                withDouble:(jdouble)min
                                                                withDouble:(jdouble)max {
  [self clearResult];
  [self verifyIntervalWithDouble:min withDouble:max];
  [self verifyIterationCount];
  OrgApacheCommonsMathAnalysisIntegrationTrapezoidIntegrator *qtrap = [new_OrgApacheCommonsMathAnalysisIntegrationTrapezoidIntegrator_init() autorelease];
  if (minimalIterationCount_ == 1) {
    jdouble s = (4 * [qtrap stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:f withDouble:min withDouble:max withInt:1] - [qtrap stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:f withDouble:min withDouble:max withInt:0]) / 3.0;
    [self setResultWithDouble:s withInt:1];
    return result_;
  }
  jdouble olds = 0;
  jdouble oldt = [qtrap stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:f withDouble:min withDouble:max withInt:0];
  for (jint i = 1; i <= maximalIterationCount_; ++i) {
    jdouble t = [qtrap stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:f withDouble:min withDouble:max withInt:i];
    jdouble s = (4 * t - oldt) / 3.0;
    if (i >= minimalIterationCount_) {
      jdouble delta = OrgApacheCommonsMathUtilFastMath_absWithDouble_(s - olds);
      jdouble rLimit = relativeAccuracy_ * (OrgApacheCommonsMathUtilFastMath_absWithDouble_(olds) + OrgApacheCommonsMathUtilFastMath_absWithDouble_(s)) * 0.5;
      if ((delta <= rLimit) || (delta <= absoluteAccuracy_)) {
        [self setResultWithDouble:s withInt:i];
        return result_;
      }
    }
    olds = s;
    oldt = t;
  }
  @throw [new_OrgApacheCommonsMathMaxIterationsExceededException_initWithInt_(maximalIterationCount_) autorelease];
}

- (void)verifyIterationCount {
  [super verifyIterationCount];
  if (maximalIterationCount_ > 64) {
    @throw OrgApacheCommonsMathMathRuntimeException_createIllegalArgumentExceptionWithOrgApacheCommonsMathExceptionUtilLocalizable_withNSObjectArray_(OrgApacheCommonsMathExceptionUtilLocalizedFormatsEnum_get_INVALID_ITERATIONS_LIMITS(), [IOSObjectArray arrayWithObjects:(id[]){ JavaLangInteger_valueOfWithInt_(0), JavaLangInteger_valueOfWithInt_(64) } count:2 type:NSObject_class_()]);
  }
}

+ (IOSObjectArray *)__annotations_initWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [[[JavaLangDeprecated alloc] init] autorelease] } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

+ (IOSObjectArray *)__annotations_integrateWithDouble_withDouble_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [[[JavaLangDeprecated alloc] init] autorelease] } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:", "SimpsonIntegrator", NULL, 0x1, NULL, NULL },
    { "init", "SimpsonIntegrator", NULL, 0x1, NULL, NULL },
    { "integrateWithDouble:withDouble:", "integrate", "D", 0x1, "Lorg.apache.commons.math.MaxIterationsExceededException;Lorg.apache.commons.math.FunctionEvaluationException;Ljava.lang.IllegalArgumentException;", NULL },
    { "integrateWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:withDouble:withDouble:", "integrate", "D", 0x1, "Lorg.apache.commons.math.MaxIterationsExceededException;Lorg.apache.commons.math.FunctionEvaluationException;Ljava.lang.IllegalArgumentException;", NULL },
    { "verifyIterationCount", NULL, "V", 0x4, "Ljava.lang.IllegalArgumentException;", NULL },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator = { 2, "SimpsonIntegrator", "org.apache.commons.math.analysis.integration", NULL, 0x1, 5, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator;
}

@end

void OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator_initWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_(OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator *self, id<OrgApacheCommonsMathAnalysisUnivariateRealFunction> f) {
  OrgApacheCommonsMathAnalysisIntegrationUnivariateRealIntegratorImpl_initWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_withInt_(self, f, 64);
}

OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator *new_OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator_initWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_(id<OrgApacheCommonsMathAnalysisUnivariateRealFunction> f) {
  OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator *self = [OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator alloc];
  OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator_initWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_(self, f);
  return self;
}

void OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator_init(OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator *self) {
  OrgApacheCommonsMathAnalysisIntegrationUnivariateRealIntegratorImpl_initWithInt_(self, 64);
}

OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator *new_OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator_init() {
  OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator *self = [OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator alloc];
  OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathAnalysisIntegrationSimpsonIntegrator)
