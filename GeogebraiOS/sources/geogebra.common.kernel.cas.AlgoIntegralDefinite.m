//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/cas/AlgoIntegralDefinite.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/StringTemplate.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/algos/AlgoFunctionFreehand.h"
#include "geogebra/common/kernel/algos/ConstructionElement.h"
#include "geogebra/common/kernel/algos/DrawInformationAlgo.h"
#include "geogebra/common/kernel/algos/GetCommand.h"
#include "geogebra/common/kernel/arithmetic/ExpressionValue.h"
#include "geogebra/common/kernel/arithmetic/Function.h"
#include "geogebra/common/kernel/arithmetic/NumberValue.h"
#include "geogebra/common/kernel/arithmetic/PolyFunction.h"
#include "geogebra/common/kernel/cas/AlgoIntegral.h"
#include "geogebra/common/kernel/cas/AlgoIntegralDefinite.h"
#include "geogebra/common/kernel/cas/AlgoUsingTempCASalgo.h"
#include "geogebra/common/kernel/commands/AlgebraProcessor.h"
#include "geogebra/common/kernel/commands/Commands.h"
#include "geogebra/common/kernel/geos/GeoBoolean.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoFunction.h"
#include "geogebra/common/kernel/geos/GeoList.h"
#include "geogebra/common/kernel/geos/GeoNumeric.h"
#include "geogebra/common/kernel/roots/RealRootAdapter.h"
#include "geogebra/common/kernel/roots/RealRootFunction.h"
#include "geogebra/common/main/App.h"
#include "geogebra/common/main/Localization.h"
#include "java/lang/Double.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuilder.h"
#include "java/lang/Throwable.h"
#include "org/apache/commons/math/ConvergenceException.h"
#include "org/apache/commons/math/FunctionEvaluationException.h"
#include "org/apache/commons/math/MaxIterationsExceededException.h"
#include "org/apache/commons/math/analysis/integration/LegendreGaussIntegrator.h"

#define GeogebraCommonKernelCasAlgoIntegralDefinite_FIRST_ORDER 3
#define GeogebraCommonKernelCasAlgoIntegralDefinite_SECOND_ORDER 5
#define GeogebraCommonKernelCasAlgoIntegralDefinite_MAX_ITER 5
#define GeogebraCommonKernelCasAlgoIntegralDefinite_MAX_GAUSS_QUAD_CALLS 500

@interface GeogebraCommonKernelCasAlgoIntegralDefinite () {
 @public
  GeogebraCommonKernelGeosGeoFunction *f_;
  id<GeogebraCommonKernelArithmeticNumberValue> a_, b_;
  GeogebraCommonKernelGeosGeoBoolean *evaluate_;
  GeogebraCommonKernelGeosGeoElement *ageo_, *bgeo_;
  GeogebraCommonKernelGeosGeoNumeric *n_;
  jboolean numeric_;
  GeogebraCommonKernelGeosGeoFunction *symbIntegral_;
  jboolean evaluateNumerically_;
}

- (void)computeSpecial;

- (jdouble)freehandIntegrationWithGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f2
                                                           withDouble:(jdouble)lowerLimitUser
                                                           withDouble:(jdouble)upperLimitUser;

+ (jdouble)doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction:(id<GeogebraCommonKernelRootsRealRootFunction>)fun
                                                                 withDouble:(jdouble)a
                                                                 withDouble:(jdouble)b;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, f_, GeogebraCommonKernelGeosGeoFunction *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, a_, id<GeogebraCommonKernelArithmeticNumberValue>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, b_, id<GeogebraCommonKernelArithmeticNumberValue>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, evaluate_, GeogebraCommonKernelGeosGeoBoolean *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, ageo_, GeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, bgeo_, GeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, n_, GeogebraCommonKernelGeosGeoNumeric *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, symbIntegral_, GeogebraCommonKernelGeosGeoFunction *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, FIRST_ORDER, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, SECOND_ORDER, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, MAX_ITER, jint)

static OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *GeogebraCommonKernelCasAlgoIntegralDefinite_firstGauss_;
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, firstGauss_, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *)
J2OBJC_STATIC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, firstGauss_, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *)

static OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *GeogebraCommonKernelCasAlgoIntegralDefinite_secondGauss_;
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, secondGauss_, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *)
J2OBJC_STATIC_FIELD_SETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, secondGauss_, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *)

static jint GeogebraCommonKernelCasAlgoIntegralDefinite_adaptiveGaussQuadCounter_ = 0;
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, adaptiveGaussQuadCounter_, jint)
J2OBJC_STATIC_FIELD_REF_GETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, adaptiveGaussQuadCounter_, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelCasAlgoIntegralDefinite, MAX_GAUSS_QUAD_CALLS, jint)

__attribute__((unused)) static void GeogebraCommonKernelCasAlgoIntegralDefinite_compute(GeogebraCommonKernelCasAlgoIntegralDefinite *self);

__attribute__((unused)) static void GeogebraCommonKernelCasAlgoIntegralDefinite_computeSpecial(GeogebraCommonKernelCasAlgoIntegralDefinite *self);

__attribute__((unused)) static jdouble GeogebraCommonKernelCasAlgoIntegralDefinite_freehandIntegrationWithGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_(GeogebraCommonKernelCasAlgoIntegralDefinite *self, GeogebraCommonKernelGeosGeoFunction *f2, jdouble lowerLimitUser, jdouble upperLimitUser);

__attribute__((unused)) static jdouble GeogebraCommonKernelCasAlgoIntegralDefinite_doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(id<GeogebraCommonKernelRootsRealRootFunction> fun, jdouble a, jdouble b);

@implementation GeogebraCommonKernelCasAlgoIntegralDefinite

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)a
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)b
                                             withBoolean:(jboolean)numeric {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withBoolean_(self, cons, label, f, a, b, numeric);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)a
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)b
                  withGeogebraCommonKernelGeosGeoBoolean:(GeogebraCommonKernelGeosGeoBoolean *)evaluate {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(self, cons, label, f, a, b, evaluate);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)a
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)b
                  withGeogebraCommonKernelGeosGeoBoolean:(GeogebraCommonKernelGeosGeoBoolean *)evaluate {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(self, cons, f, a, b, evaluate);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                 withGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)a
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)b
                  withGeogebraCommonKernelGeosGeoBoolean:(GeogebraCommonKernelGeosGeoBoolean *)evaluate
                                             withBoolean:(jboolean)num {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_withBoolean_(self, cons, f, a, b, evaluate, num);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f
              withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)a
              withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)b
                     withGeogebraCommonKernelGeosGeoBoolean:(GeogebraCommonKernelGeosGeoBoolean *)evaluate {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(self, f, a, b, evaluate);
  return self;
}

- (id<GeogebraCommonKernelAlgosGetCommand>)getClassName {
  return numeric_ ? GeogebraCommonKernelCommandsCommandsEnum_get_NIntegral() : GeogebraCommonKernelCommandsCommandsEnum_get_Integral();
}

- (void)setInputOutput {
  if (evaluate_ == nil) {
    GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:3 type:GeogebraCommonKernelGeosGeoElement_class_()]);
    IOSObjectArray_Set(input_, 0, f_);
    IOSObjectArray_Set(input_, 1, ageo_);
    IOSObjectArray_Set(input_, 2, bgeo_);
  }
  else {
    GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:4 type:GeogebraCommonKernelGeosGeoElement_class_()]);
    IOSObjectArray_Set(input_, 0, f_);
    IOSObjectArray_Set(input_, 1, ageo_);
    IOSObjectArray_Set(input_, 2, bgeo_);
    IOSObjectArray_Set(input_, 3, evaluate_);
  }
  [self setOutputLengthWithInt:1];
  [self setOutputWithInt:0 withGeogebraCommonKernelGeosGeoElement:n_];
  [self setDependencies];
}

- (GeogebraCommonKernelGeosGeoNumeric *)getIntegral {
  return n_;
}

- (jdouble)getIntegralValue {
  return [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(n_)) getValue];
}

- (GeogebraCommonKernelGeosGeoFunction *)getFunction {
  return f_;
}

- (id<GeogebraCommonKernelArithmeticNumberValue>)getA {
  return a_;
}

- (id<GeogebraCommonKernelArithmeticNumberValue>)getB {
  return b_;
}

- (void)compute {
  GeogebraCommonKernelCasAlgoIntegralDefinite_compute(self);
}

- (void)computeSpecial {
  GeogebraCommonKernelCasAlgoIntegralDefinite_computeSpecial(self);
}

- (jdouble)freehandIntegrationWithGeogebraCommonKernelGeosGeoFunction:(GeogebraCommonKernelGeosGeoFunction *)f2
                                                           withDouble:(jdouble)lowerLimitUser
                                                           withDouble:(jdouble)upperLimitUser {
  return GeogebraCommonKernelCasAlgoIntegralDefinite_freehandIntegrationWithGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_(self, f2, lowerLimitUser, upperLimitUser);
}

+ (jdouble)numericIntegrationWithGeogebraCommonKernelRootsRealRootFunction:(id<GeogebraCommonKernelRootsRealRootFunction>)fun
                                                                withDouble:(jdouble)a
                                                                withDouble:(jdouble)b {
  return GeogebraCommonKernelCasAlgoIntegralDefinite_numericIntegrationWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(fun, a, b);
}

+ (jdouble)doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction:(id<GeogebraCommonKernelRootsRealRootFunction>)fun
                                                                 withDouble:(jdouble)a
                                                                 withDouble:(jdouble)b {
  return GeogebraCommonKernelCasAlgoIntegralDefinite_doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(fun, a, b);
}

- (NSString *)toStringWithGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return [((GeogebraCommonMainLocalization *) nil_chk([self getLoc])) getPlainWithNSString:@"IntegralOfAfromBtoC" withNSString:[((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f_)) getLabelWithGeogebraCommonKernelStringTemplate:tpl] withNSString:[((GeogebraCommonKernelGeosGeoElement *) nil_chk(ageo_)) getLabelWithGeogebraCommonKernelStringTemplate:tpl] withNSString:[((GeogebraCommonKernelGeosGeoElement *) nil_chk(bgeo_)) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
}

- (id<GeogebraCommonKernelAlgosDrawInformationAlgo>)copy__ {
  if (evaluate_ != nil) return [new_GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_((GeogebraCommonKernelGeosGeoFunction *) check_class_cast([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f_)) copy__], [GeogebraCommonKernelGeosGeoFunction class]), (id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast([((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(a_)) deepCopyWithGeogebraCommonKernelKernel:kernel_], @protocol(GeogebraCommonKernelArithmeticNumberValue)), (id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast([((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(b_)) deepCopyWithGeogebraCommonKernelKernel:kernel_], @protocol(GeogebraCommonKernelArithmeticNumberValue)), [evaluate_ copy__]) autorelease];
  return [new_GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_((GeogebraCommonKernelGeosGeoFunction *) check_class_cast([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f_)) copy__], [GeogebraCommonKernelGeosGeoFunction class]), (id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast([((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(a_)) deepCopyWithGeogebraCommonKernelKernel:kernel_], @protocol(GeogebraCommonKernelArithmeticNumberValue)), (id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast([((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(b_)) deepCopyWithGeogebraCommonKernelKernel:kernel_], @protocol(GeogebraCommonKernelArithmeticNumberValue)), nil) autorelease];
}

- (jboolean)evaluateOnly {
  return evaluate_ != nil && ![evaluate_ getBoolean];
}

- (void)refreshCASResults {
  GeogebraCommonKernelCasAlgoIntegral *algoInt = [new_GeogebraCommonKernelCasAlgoIntegral_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosCasEvaluableFunction_withGeogebraCommonKernelGeosGeoNumeric_withBoolean_(cons_, f_, nil, NO) autorelease];
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_symbIntegral_(self, (GeogebraCommonKernelGeosGeoFunction *) check_class_cast([algoInt getResult], [GeogebraCommonKernelGeosGeoFunction class]));
  [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) removeFromConstructionListWithGeogebraCommonKernelAlgosConstructionElement:algoInt];
  GeogebraCommonKernelCasAlgoUsingTempCASalgo_set_algoCAS_(self, algoInt);
}

- (void)dealloc {
  RELEASE_(f_);
  RELEASE_(a_);
  RELEASE_(b_);
  RELEASE_(evaluate_);
  RELEASE_(ageo_);
  RELEASE_(bgeo_);
  RELEASE_(n_);
  RELEASE_(symbIntegral_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelArithmeticNumberValue:withBoolean:", "AlgoIntegralDefinite", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelGeosGeoBoolean:", "AlgoIntegralDefinite", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelGeosGeoBoolean:", "AlgoIntegralDefinite", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelGeosGeoBoolean:withBoolean:", "AlgoIntegralDefinite", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelGeosGeoFunction:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelGeosGeoBoolean:", "AlgoIntegralDefinite", NULL, 0x1, NULL, NULL },
    { "getClassName", NULL, "Lgeogebra.common.kernel.algos.GetCommand;", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "getIntegral", NULL, "Lgeogebra.common.kernel.geos.GeoNumeric;", 0x1, NULL, NULL },
    { "getIntegralValue", NULL, "D", 0x0, NULL, NULL },
    { "getFunction", NULL, "Lgeogebra.common.kernel.geos.GeoFunction;", 0x1, NULL, NULL },
    { "getA", NULL, "Lgeogebra.common.kernel.arithmetic.NumberValue;", 0x1, NULL, NULL },
    { "getB", NULL, "Lgeogebra.common.kernel.arithmetic.NumberValue;", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "computeSpecial", NULL, "V", 0x2, NULL, NULL },
    { "freehandIntegrationWithGeogebraCommonKernelGeosGeoFunction:withDouble:withDouble:", "freehandIntegration", "D", 0x2, NULL, NULL },
    { "numericIntegrationWithGeogebraCommonKernelRootsRealRootFunction:withDouble:withDouble:", "numericIntegration", "D", 0x9, NULL, NULL },
    { "doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction:withDouble:withDouble:", "doAdaptiveGaussQuad", "D", 0xa, NULL, NULL },
    { "toStringWithGeogebraCommonKernelStringTemplate:", "toString", "Ljava.lang.String;", 0x11, NULL, NULL },
    { "copy__", "copy", "Lgeogebra.common.kernel.algos.DrawInformationAlgo;", 0x1, NULL, NULL },
    { "evaluateOnly", NULL, "Z", 0x1, NULL, NULL },
    { "refreshCASResults", NULL, "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "f_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "a_", NULL, 0x2, "Lgeogebra.common.kernel.arithmetic.NumberValue;", NULL, NULL,  },
    { "b_", NULL, 0x2, "Lgeogebra.common.kernel.arithmetic.NumberValue;", NULL, NULL,  },
    { "evaluate_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoBoolean;", NULL, NULL,  },
    { "ageo_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "bgeo_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "n_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoNumeric;", NULL, NULL,  },
    { "numeric_", NULL, 0x2, "Z", NULL, NULL,  },
    { "symbIntegral_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "evaluateNumerically_", NULL, 0x2, "Z", NULL, NULL,  },
    { "FIRST_ORDER_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelCasAlgoIntegralDefinite_FIRST_ORDER },
    { "SECOND_ORDER_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelCasAlgoIntegralDefinite_SECOND_ORDER },
    { "MAX_ITER_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelCasAlgoIntegralDefinite_MAX_ITER },
    { "firstGauss_", NULL, 0xa, "Lorg.apache.commons.math.analysis.integration.LegendreGaussIntegrator;", &GeogebraCommonKernelCasAlgoIntegralDefinite_firstGauss_, NULL,  },
    { "secondGauss_", NULL, 0xa, "Lorg.apache.commons.math.analysis.integration.LegendreGaussIntegrator;", &GeogebraCommonKernelCasAlgoIntegralDefinite_secondGauss_, NULL,  },
    { "adaptiveGaussQuadCounter_", NULL, 0xa, "I", &GeogebraCommonKernelCasAlgoIntegralDefinite_adaptiveGaussQuadCounter_, NULL,  },
    { "MAX_GAUSS_QUAD_CALLS_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelCasAlgoIntegralDefinite_MAX_GAUSS_QUAD_CALLS },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelCasAlgoIntegralDefinite = { 2, "AlgoIntegralDefinite", "geogebra.common.kernel.cas", NULL, 0x1, 21, methods, 17, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelCasAlgoIntegralDefinite;
}

@end

void GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withBoolean_(GeogebraCommonKernelCasAlgoIntegralDefinite *self, GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, jboolean numeric) {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_withBoolean_(self, cons, f, a, b, nil, numeric);
  self->numeric_ = numeric;
  [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setLabelWithNSString:label];
}

GeogebraCommonKernelCasAlgoIntegralDefinite *new_GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withBoolean_(GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, jboolean numeric) {
  GeogebraCommonKernelCasAlgoIntegralDefinite *self = [GeogebraCommonKernelCasAlgoIntegralDefinite alloc];
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withBoolean_(self, cons, label, f, a, b, numeric);
  return self;
}

void GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(GeogebraCommonKernelCasAlgoIntegralDefinite *self, GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, GeogebraCommonKernelGeosGeoBoolean *evaluate) {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(self, cons, f, a, b, evaluate);
  [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setLabelWithNSString:label];
}

GeogebraCommonKernelCasAlgoIntegralDefinite *new_GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, GeogebraCommonKernelGeosGeoBoolean *evaluate) {
  GeogebraCommonKernelCasAlgoIntegralDefinite *self = [GeogebraCommonKernelCasAlgoIntegralDefinite alloc];
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(self, cons, label, f, a, b, evaluate);
  return self;
}

void GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(GeogebraCommonKernelCasAlgoIntegralDefinite *self, GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, GeogebraCommonKernelGeosGeoBoolean *evaluate) {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_withBoolean_(self, cons, f, a, b, evaluate, NO);
}

GeogebraCommonKernelCasAlgoIntegralDefinite *new_GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, GeogebraCommonKernelGeosGeoBoolean *evaluate) {
  GeogebraCommonKernelCasAlgoIntegralDefinite *self = [GeogebraCommonKernelCasAlgoIntegralDefinite alloc];
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(self, cons, f, a, b, evaluate);
  return self;
}

void GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_withBoolean_(GeogebraCommonKernelCasAlgoIntegralDefinite *self, GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, GeogebraCommonKernelGeosGeoBoolean *evaluate, jboolean num) {
  GeogebraCommonKernelCasAlgoUsingTempCASalgo_initWithGeogebraCommonKernelConstruction_(self, cons);
  self->evaluateNumerically_ = num;
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_f_(self, f);
  GeogebraCommonKernelCasAlgoIntegralDefinite_setAndConsume_n_(self, new_GeogebraCommonKernelGeosGeoNumeric_initWithGeogebraCommonKernelConstruction_(cons));
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_a_(self, a);
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_b_(self, b);
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_ageo_(self, [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(a)) toGeoElement]);
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_bgeo_(self, [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(b)) toGeoElement]);
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_evaluate_(self, evaluate);
  if ([((GeogebraCommonMainApp *) nil_chk([((GeogebraCommonKernelKernel *) nil_chk(self->kernel_)) getApplication])) isHTML5Applet]) {
    self->evaluateNumerically_ = YES;
  }
  if ((evaluate == nil || [evaluate getBoolean]) && ![((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f)) isGeoFunctionConditional] && ![f isFreehandFunction] && !self->evaluateNumerically_) {
    [self refreshCASResults];
  }
  [self setInputOutput];
  GeogebraCommonKernelCasAlgoIntegralDefinite_compute(self);
  [self->n_ setDrawableWithBoolean:YES];
}

GeogebraCommonKernelCasAlgoIntegralDefinite *new_GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_withBoolean_(GeogebraCommonKernelConstruction *cons, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, GeogebraCommonKernelGeosGeoBoolean *evaluate, jboolean num) {
  GeogebraCommonKernelCasAlgoIntegralDefinite *self = [GeogebraCommonKernelCasAlgoIntegralDefinite alloc];
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_withBoolean_(self, cons, f, a, b, evaluate, num);
  return self;
}

void GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(GeogebraCommonKernelCasAlgoIntegralDefinite *self, GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, GeogebraCommonKernelGeosGeoBoolean *evaluate) {
  GeogebraCommonKernelCasAlgoUsingTempCASalgo_initWithGeogebraCommonKernelConstruction_withBoolean_(self, [((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f)) getConstruction], NO);
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_f_(self, f);
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_a_(self, a);
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_b_(self, b);
  GeogebraCommonKernelCasAlgoIntegralDefinite_set_evaluate_(self, evaluate);
}

GeogebraCommonKernelCasAlgoIntegralDefinite *new_GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(GeogebraCommonKernelGeosGeoFunction *f, id<GeogebraCommonKernelArithmeticNumberValue> a, id<GeogebraCommonKernelArithmeticNumberValue> b, GeogebraCommonKernelGeosGeoBoolean *evaluate) {
  GeogebraCommonKernelCasAlgoIntegralDefinite *self = [GeogebraCommonKernelCasAlgoIntegralDefinite alloc];
  GeogebraCommonKernelCasAlgoIntegralDefinite_initWithGeogebraCommonKernelGeosGeoFunction_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoBoolean_(self, f, a, b, evaluate);
  return self;
}

void GeogebraCommonKernelCasAlgoIntegralDefinite_compute(GeogebraCommonKernelCasAlgoIntegralDefinite *self) {
  if (![((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f_)) isDefined] || ![((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->ageo_)) isDefined] || ![((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->bgeo_)) isDefined]) {
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setUndefined];
    return;
  }
  jdouble lowerLimit = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(self->a_)) getDouble];
  jdouble upperLimit = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(self->b_)) getDouble];
  if (GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_(lowerLimit, upperLimit)) {
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setValueWithDouble:0];
    return;
  }
  jdouble fa = [self->f_ evaluateWithDouble:lowerLimit];
  jdouble fb = [self->f_ evaluateWithDouble:upperLimit];
  if (JavaLangDouble_isNaNWithDouble_(fa) || JavaLangDouble_isInfiniteWithDouble_(fa) || JavaLangDouble_isNaNWithDouble_(fb) || JavaLangDouble_isInfiniteWithDouble_(fb)) {
    if (!self->evaluateNumerically_ && ![self evaluateOnly] && ![self->f_ isFreehandFunction]) {
      GeogebraCommonKernelCasAlgoIntegralDefinite_computeSpecial(self);
    }
    else {
      [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setUndefined];
    }
    return;
  }
  if ([self evaluateOnly]) {
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setValueWithDouble:JavaLangDouble_NaN];
    return;
  }
  if (self->symbIntegral_ != nil && [self->symbIntegral_ isDefined] && ![self->f_ includesDivisionByVar] && ![self->f_ includesNonContinuousIntegral]) {
    jdouble val = [self->symbIntegral_ evaluateWithDouble:upperLimit] - [self->symbIntegral_ evaluateWithDouble:lowerLimit];
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setValueWithDouble:val];
    if ([self->n_ isDefined]) return;
  }
  else if (self->symbIntegral_ != nil && [self->symbIntegral_ isDefined] && !self->evaluateNumerically_) {
    GeogebraCommonKernelCasAlgoIntegralDefinite_computeSpecial(self);
    return;
  }
  if ([self->f_ isFreehandFunction]) {
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setValueWithDouble:GeogebraCommonKernelCasAlgoIntegralDefinite_freehandIntegrationWithGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_(self, self->f_, lowerLimit, upperLimit)];
  }
  else {
    GeogebraCommonKernelArithmeticFunction *inFun = [self->f_ getFunction];
    GeogebraCommonKernelArithmeticPolyFunction *polyIntegral = [((GeogebraCommonKernelArithmeticFunction *) nil_chk(inFun)) getNumericPolynomialIntegral];
    if (polyIntegral != nil) {
      [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setValueWithDouble:[polyIntegral evaluateWithDouble:upperLimit] - [polyIntegral evaluateWithDouble:lowerLimit]];
    }
    else {
      [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setValueWithDouble:GeogebraCommonKernelCasAlgoIntegralDefinite_numericIntegrationWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(self->f_, lowerLimit, upperLimit)];
    }
  }
}

void GeogebraCommonKernelCasAlgoIntegralDefinite_computeSpecial(GeogebraCommonKernelCasAlgoIntegralDefinite *self) {
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_initWithInt_(30) autorelease];
  [sb appendWithNSString:@"evalf(integrate("];
  [sb appendWithNSString:[((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f_)) toValueStringWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_giacTemplate_()]];
  [sb appendWithNSString:@","];
  [sb appendWithNSString:[self->f_ getVarStringWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
  [sb appendWithNSString:@","];
  [sb appendWithNSString:[((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(self->a_)) toValueStringWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_maxPrecision_()]];
  [sb appendWithNSString:@","];
  [sb appendWithNSString:[((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(self->b_)) toValueStringWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_maxPrecision_()]];
  [sb appendWithNSString:@"))"];
  NSString *result;
  @try {
    result = [((GeogebraCommonKernelKernel *) nil_chk(self->kernel_)) evaluateRawGeoGebraCASWithNSString:[sb description]];
    if ([((NSString *) nil_chk(result)) hasPrefix:@"{"]) {
      result = IOSObjectArray_Get(nil_chk([result split:@","]), 0);
      result = [((NSString *) nil_chk(result)) substring:1];
    }
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setValueWithDouble:[((GeogebraCommonKernelCommandsAlgebraProcessor *) nil_chk([self->kernel_ getAlgebraProcessor])) evaluateToDoubleWithNSString:result withBoolean:YES]];
  }
  @catch (JavaLangThrowable *e) {
    [((JavaLangThrowable *) nil_chk(e)) printStackTrace];
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->n_)) setUndefined];
  }
}

jdouble GeogebraCommonKernelCasAlgoIntegralDefinite_freehandIntegrationWithGeogebraCommonKernelGeosGeoFunction_withDouble_withDouble_(GeogebraCommonKernelCasAlgoIntegralDefinite *self, GeogebraCommonKernelGeosGeoFunction *f2, jdouble lowerLimitUser, jdouble upperLimitUser) {
  jint multiplier = 1;
  jdouble lowerLimit = lowerLimitUser;
  jdouble upperLimit = upperLimitUser;
  if (lowerLimit > upperLimit) {
    jdouble temp = lowerLimit;
    lowerLimit = upperLimit;
    upperLimit = temp;
    multiplier = -1;
  }
  GeogebraCommonKernelAlgosAlgoFunctionFreehand *algo = (GeogebraCommonKernelAlgosAlgoFunctionFreehand *) check_class_cast([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(f2)) getParentAlgorithm], [GeogebraCommonKernelAlgosAlgoFunctionFreehand class]);
  GeogebraCommonKernelGeosGeoList *list = [((GeogebraCommonKernelAlgosAlgoFunctionFreehand *) nil_chk(algo)) getList];
  jdouble a1 = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(((id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast([((GeogebraCommonKernelGeosGeoList *) nil_chk(list)) getWithInt:0], @protocol(GeogebraCommonKernelArithmeticNumberValue))))) getDouble];
  jdouble b1 = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(((id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast([list getWithInt:1], @protocol(GeogebraCommonKernelArithmeticNumberValue))))) getDouble];
  if (lowerLimit < a1 || upperLimit > b1) {
    return JavaLangDouble_NaN;
  }
  jdouble nn = [list size] - 2;
  jdouble step = (b1 - a1) / (nn - 1);
  jint startGap = J2ObjCFpToInt(JavaLangMath_ceilWithDouble_((lowerLimit - a1) / step));
  jint endGap = J2ObjCFpToInt(JavaLangMath_ceilWithDouble_((b1 - upperLimit) / step));
  jdouble startx = a1 + step * startGap;
  jdouble endx = b1 - step * endGap;
  jint noOfSteps = (jint) JavaLangMath_roundWithDouble_((b1 - a1) / step - endGap - startGap) + 1;
  jdouble area = 0;
  jdouble sum = 0;
  if (noOfSteps > 0) {
    for (jint i = 0; i < noOfSteps; i++) {
      jdouble y = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(((id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast([list getWithInt:2 + i + startGap], @protocol(GeogebraCommonKernelArithmeticNumberValue))))) getDouble];
      if (i == 0 || (i == noOfSteps - 1)) {
        sum += y;
      }
      else {
        sum += 2 * y;
      }
    }
    area = sum * step / 2.0;
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_(startx - lowerLimit)) {
      area += (startx - lowerLimit) * ([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f_)) evaluateWithDouble:startx] + [self->f_ evaluateWithDouble:lowerLimit]) / 2.0;
    }
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_(endx - upperLimit)) {
      area += (upperLimit - endx) * ([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f_)) evaluateWithDouble:endx] + [self->f_ evaluateWithDouble:upperLimit]) / 2.0;
    }
  }
  else {
    area = (upperLimit - lowerLimit) * ([((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f_)) evaluateWithDouble:lowerLimit] + [self->f_ evaluateWithDouble:upperLimit]) / 2.0;
  }
  return GeogebraCommonKernelKernel_checkDecimalFractionWithDouble_(area) * multiplier;
}

jdouble GeogebraCommonKernelCasAlgoIntegralDefinite_numericIntegrationWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(id<GeogebraCommonKernelRootsRealRootFunction> fun, jdouble a, jdouble b) {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initialize();
  GeogebraCommonKernelCasAlgoIntegralDefinite_adaptiveGaussQuadCounter_ = 0;
  if (a > b) {
    return -GeogebraCommonKernelCasAlgoIntegralDefinite_doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(fun, b, a);
  }
  return GeogebraCommonKernelCasAlgoIntegralDefinite_doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(fun, a, b);
}

jdouble GeogebraCommonKernelCasAlgoIntegralDefinite_doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(id<GeogebraCommonKernelRootsRealRootFunction> fun, jdouble a, jdouble b) {
  GeogebraCommonKernelCasAlgoIntegralDefinite_initialize();
  if (++GeogebraCommonKernelCasAlgoIntegralDefinite_adaptiveGaussQuadCounter_ > GeogebraCommonKernelCasAlgoIntegralDefinite_MAX_GAUSS_QUAD_CALLS) {
    return JavaLangDouble_NaN;
  }
  if (GeogebraCommonKernelCasAlgoIntegralDefinite_firstGauss_ == nil) {
    JreStrongAssignAndConsume(&GeogebraCommonKernelCasAlgoIntegralDefinite_firstGauss_, nil, new_OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_initWithInt_withInt_(GeogebraCommonKernelCasAlgoIntegralDefinite_FIRST_ORDER, GeogebraCommonKernelCasAlgoIntegralDefinite_MAX_ITER));
    JreStrongAssignAndConsume(&GeogebraCommonKernelCasAlgoIntegralDefinite_secondGauss_, nil, new_OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_initWithInt_withInt_(GeogebraCommonKernelCasAlgoIntegralDefinite_SECOND_ORDER, GeogebraCommonKernelCasAlgoIntegralDefinite_MAX_ITER));
  }
  jdouble firstSum = 0;
  jdouble secondSum = 0;
  jboolean error = NO;
  @try {
    firstSum = [((OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *) nil_chk(GeogebraCommonKernelCasAlgoIntegralDefinite_firstGauss_)) integrateWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:([new_GeogebraCommonKernelRootsRealRootAdapter_initWithGeogebraCommonKernelRootsRealRootFunction_(fun) autorelease]) withDouble:a withDouble:b];
    if (JavaLangDouble_isNaNWithDouble_(firstSum)) return JavaLangDouble_NaN;
    secondSum = [((OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *) nil_chk(GeogebraCommonKernelCasAlgoIntegralDefinite_secondGauss_)) integrateWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:([new_GeogebraCommonKernelRootsRealRootAdapter_initWithGeogebraCommonKernelRootsRealRootFunction_(fun) autorelease]) withDouble:a withDouble:b];
    if (JavaLangDouble_isNaNWithDouble_(secondSum)) return JavaLangDouble_NaN;
  }
  @catch (OrgApacheCommonsMathMaxIterationsExceededException *e) {
    error = YES;
  }
  @catch (OrgApacheCommonsMathConvergenceException *e) {
    error = YES;
  }
  @catch (OrgApacheCommonsMathFunctionEvaluationException *e) {
    return JavaLangDouble_NaN;
  }
  @catch (JavaLangIllegalArgumentException *e) {
    return JavaLangDouble_NaN;
  }
  jboolean equal = !error && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_withDouble_(firstSum, secondSum, GeogebraCommonKernelKernel_STANDARD_PRECISION);
  if (equal) {
    return secondSum;
  }
  jdouble mid = (a + b) / 2;
  jdouble left = GeogebraCommonKernelCasAlgoIntegralDefinite_doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(fun, a, mid);
  if (JavaLangDouble_isNaNWithDouble_(left)) {
    return JavaLangDouble_NaN;
  }
  return left + GeogebraCommonKernelCasAlgoIntegralDefinite_doAdaptiveGaussQuadWithGeogebraCommonKernelRootsRealRootFunction_withDouble_withDouble_(fun, mid, b);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelCasAlgoIntegralDefinite)
