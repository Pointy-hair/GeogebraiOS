//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/geogebra3D/kernel3D/algos/AlgoQuadricEnd.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/geogebra3D/kernel3D/algos/AlgoElement3D.h"
#include "geogebra/common/geogebra3D/kernel3D/algos/AlgoQuadricEnd.h"
#include "geogebra/common/geogebra3D/kernel3D/geos/GeoConic3D.h"
#include "geogebra/common/geogebra3D/kernel3D/geos/GeoQuadric3DLimited.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Matrix/CoordMatrix.h"
#include "geogebra/common/kernel/Matrix/CoordSys.h"
#include "geogebra/common/kernel/Matrix/Coords.h"
#include "geogebra/common/kernel/geos/GeoElement.h"

@interface GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd () {
 @public
  GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *quadric_;
  GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *section_;
  GeogebraCommonKernelMatrixCoordSys *coordsys_;
  GeogebraCommonKernelMatrixCoordMatrix *pm_;
  GeogebraCommonKernelMatrixCoordMatrix *pmt_;
  jboolean isHelperAlgo_;
}

@end

J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, quadric_, GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, section_, GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, coordsys_, GeogebraCommonKernelMatrixCoordSys *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, pm_, GeogebraCommonKernelMatrixCoordMatrix *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd, pmt_, GeogebraCommonKernelMatrixCoordMatrix *)

__attribute__((unused)) static void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_compute(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd *self);

@implementation GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited:(GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *)quadric {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithGeogebraCommonKernelConstruction_withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(self, cons, quadric);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited:(GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *)quadric {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(self, cons, label, quadric);
  return self;
}

- (GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *)getSection {
  return section_;
}

- (void)compute {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_compute(self);
}

- (void)setIsHelperAlgo {
  isHelperAlgo_ = YES;
}

- (void)remove {
  if (removed_) return;
  [super remove];
  if (isHelperAlgo_) [((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk(quadric_)) remove];
}

- (GeogebraCommonKernelMatrixCoords *)getOriginWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)o1
                                               withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)o2 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (GeogebraCommonKernelMatrixCoords *)getV1WithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v1 {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)dealloc {
  RELEASE_(quadric_);
  RELEASE_(section_);
  RELEASE_(coordsys_);
  RELEASE_(pm_);
  RELEASE_(pmt_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited:", "AlgoQuadricEnd", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited:", "AlgoQuadricEnd", NULL, 0x1, NULL, NULL },
    { "getSection", NULL, "Lgeogebra.common.geogebra3D.kernel3D.geos.GeoConic3D;", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "setIsHelperAlgo", NULL, "V", 0x1, NULL, NULL },
    { "remove", NULL, "V", 0x1, NULL, NULL },
    { "getOriginWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:", "getOrigin", "Lgeogebra.common.kernel.Matrix.Coords;", 0x404, NULL, NULL },
    { "getV1WithGeogebraCommonKernelMatrixCoords:", "getV1", "Lgeogebra.common.kernel.Matrix.Coords;", 0x404, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "quadric_", NULL, 0x2, "Lgeogebra.common.geogebra3D.kernel3D.geos.GeoQuadric3DLimited;", NULL, NULL,  },
    { "section_", NULL, 0x2, "Lgeogebra.common.geogebra3D.kernel3D.geos.GeoConic3D;", NULL, NULL,  },
    { "coordsys_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.CoordSys;", NULL, NULL,  },
    { "pm_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.CoordMatrix;", NULL, NULL,  },
    { "pmt_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.CoordMatrix;", NULL, NULL,  },
    { "isHelperAlgo_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd = { 2, "AlgoQuadricEnd", "geogebra.common.geogebra3D.kernel3D.algos", NULL, 0x401, 8, methods, 6, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd;
}

@end

void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithGeogebraCommonKernelConstruction_withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd *self, GeogebraCommonKernelConstruction *cons, GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *quadric) {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoElement3D_initWithGeogebraCommonKernelConstruction_(self, cons);
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_setAndConsume_pm_(self, new_GeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(4, 3));
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_setAndConsume_pmt_(self, new_GeogebraCommonKernelMatrixCoordMatrix_initWithInt_withInt_(3, 4));
  self->isHelperAlgo_ = NO;
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_set_quadric_(self, quadric);
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_setAndConsume_section_(self, new_GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D_initWithGeogebraCommonKernelConstruction_(cons));
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_setAndConsume_coordsys_(self, new_GeogebraCommonKernelMatrixCoordSys_initWithInt_(2));
  [self->section_ setCoordSysWithGeogebraCommonKernelMatrixCoordSys:self->coordsys_];
  [self->section_ setIsEndOfQuadricWithBoolean:YES];
  [self setInputOutputWithGeogebraCommonKernelGeosGeoElementArray:[IOSObjectArray arrayWithObjects:(id[]){ quadric } count:1 type:GeogebraCommonKernelGeosGeoElement_class_()] withGeogebraCommonKernelGeosGeoElementArray:[IOSObjectArray arrayWithObjects:(id[]){ self->section_ } count:1 type:GeogebraCommonKernelGeosGeoElement_class_()]];
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_compute(self);
}

void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd *self, GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *quadric) {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_initWithGeogebraCommonKernelConstruction_withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(self, cons, quadric);
  [((GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk(self->section_)) setLabelWithNSString:label];
}

void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd_compute(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd *self) {
  if (![((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk(self->quadric_)) isDefined]) {
    [((GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk(self->section_)) setUndefined];
    return;
  }
  [((GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk(self->section_)) setDefined];
  GeogebraCommonKernelMatrixCoordMatrix *qm = [self->quadric_ getSymetricMatrix];
  GeogebraCommonKernelMatrixCoords *d = [self->quadric_ getEigenvec3DWithInt:2];
  GeogebraCommonKernelMatrixCoords *o1 = [((GeogebraCommonKernelMatrixCoords *) nil_chk([self->quadric_ getMidpoint3D])) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(d)) mulWithDouble:[self->quadric_ getBottomParameter]]];
  GeogebraCommonKernelMatrixCoords *o2 = [((GeogebraCommonKernelMatrixCoords *) nil_chk([self->quadric_ getMidpoint3D])) addWithGeogebraCommonKernelMatrixCoords:[d mulWithDouble:[self->quadric_ getTopParameter]]];
  [((GeogebraCommonKernelMatrixCoordMatrix *) nil_chk(self->pm_)) setOriginWithGeogebraCommonKernelMatrixCoords:[self getOriginWithGeogebraCommonKernelMatrixCoords:o1 withGeogebraCommonKernelMatrixCoords:o2]];
  IOSObjectArray *v = [d completeOrthonormal];
  [self->pm_ setVxWithGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(nil_chk(v), 0)];
  [self->pm_ setVyWithGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(v, 1)];
  [self->pm_ transposeCopyWithGeogebraCommonKernelMatrixCoordMatrix:self->pmt_];
  GeogebraCommonKernelMatrixCoordMatrix *cm = [((GeogebraCommonKernelMatrixCoordMatrix *) nil_chk([((GeogebraCommonKernelMatrixCoordMatrix *) nil_chk(self->pmt_)) mulWithGeogebraCommonKernelMatrixCoordMatrix:qm])) mulWithGeogebraCommonKernelMatrixCoordMatrix:self->pm_];
  [((GeogebraCommonKernelMatrixCoordSys *) nil_chk(self->coordsys_)) resetCoordSys];
  [self->coordsys_ addPointWithGeogebraCommonKernelMatrixCoords:[self getOriginWithGeogebraCommonKernelMatrixCoords:o1 withGeogebraCommonKernelMatrixCoords:o2]];
  [self->coordsys_ addVectorWithGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(v, 0)];
  [self->coordsys_ addVectorWithGeogebraCommonKernelMatrixCoords:[self getV1WithGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(v, 1)]];
  [self->coordsys_ makeOrthoMatrixWithBoolean:NO withBoolean:NO];
  [self->section_ setMatrixWithGeogebraCommonKernelMatrixCoordMatrix:cm];
  [self->section_ calcArea];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEnd)
