//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/org/apache/commons/math/ode/nonstiff/DormandPrince54StepInterpolator.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "org/apache/commons/math/ode/AbstractIntegrator.h"
#include "org/apache/commons/math/ode/DerivativeException.h"
#include "org/apache/commons/math/ode/nonstiff/DormandPrince54StepInterpolator.h"
#include "org/apache/commons/math/ode/nonstiff/RungeKuttaStepInterpolator.h"
#include "org/apache/commons/math/ode/sampling/StepInterpolator.h"

#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A70 0.09114583333333333
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A72 0.44923629829290207
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A73 0.6510416666666666
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A74 -0.322376179245283
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A75 0.13095238095238096
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D0 -1.1270175653862835
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D2 2.675424484351598
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D3 -5.685526961588504
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D4 3.5219323679207912
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D5 -1.7672812570757455
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D6 2.382468931778144
#define OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_serialVersionUID 4104157279605906956LL

@interface OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator () {
 @public
  IOSDoubleArray *v1_;
  IOSDoubleArray *v2_;
  IOSDoubleArray *v3_;
  IOSDoubleArray *v4_;
  jboolean vectorsInitialized_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, v1_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, v2_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, v3_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, v4_, IOSDoubleArray *)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, A70, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, A72, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, A73, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, A74, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, A75, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, D0, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, D2, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, D3, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, D4, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, D5, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, D6, jdouble)

J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator, serialVersionUID, jlong)

@implementation OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator

- (instancetype)init {
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_init(self);
  return self;
}

- (instancetype)initWithOrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator:(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *)interpolator {
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_initWithOrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_(self, interpolator);
  return self;
}

- (id<OrgApacheCommonsMathOdeSamplingStepInterpolator>)doCopy {
  return [new_OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_initWithOrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_(self) autorelease];
}

- (void)reinitializeWithOrgApacheCommonsMathOdeAbstractIntegrator:(OrgApacheCommonsMathOdeAbstractIntegrator *)integrator
                                                  withDoubleArray:(IOSDoubleArray *)y
                                                 withDoubleArray2:(IOSObjectArray *)yDotK
                                                      withBoolean:(jboolean)forward {
  [super reinitializeWithOrgApacheCommonsMathOdeAbstractIntegrator:integrator withDoubleArray:y withDoubleArray2:yDotK withBoolean:forward];
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v1_(self, nil);
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v2_(self, nil);
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v3_(self, nil);
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v4_(self, nil);
  vectorsInitialized_ = NO;
}

- (void)storeTimeWithDouble:(jdouble)t {
  [super storeTimeWithDouble:t];
  vectorsInitialized_ = NO;
}

- (void)computeInterpolatedStateAndDerivativesWithDouble:(jdouble)theta
                                              withDouble:(jdouble)oneMinusThetaH {
  if (!vectorsInitialized_) {
    if (v1_ == nil) {
      OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_setAndConsume_v1_(self, [IOSDoubleArray newArrayWithLength:((IOSDoubleArray *) nil_chk(interpolatedState_))->size_]);
      OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_setAndConsume_v2_(self, [IOSDoubleArray newArrayWithLength:interpolatedState_->size_]);
      OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_setAndConsume_v3_(self, [IOSDoubleArray newArrayWithLength:interpolatedState_->size_]);
      OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_setAndConsume_v4_(self, [IOSDoubleArray newArrayWithLength:interpolatedState_->size_]);
    }
    for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(interpolatedState_))->size_; ++i) {
      jdouble yDot0 = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(yDotK_), 0)), i);
      jdouble yDot2 = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK_, 2)), i);
      jdouble yDot3 = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK_, 3)), i);
      jdouble yDot4 = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK_, 4)), i);
      jdouble yDot5 = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK_, 5)), i);
      jdouble yDot6 = IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(yDotK_, 6)), i);
      *IOSDoubleArray_GetRef(nil_chk(v1_), i) = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A70 * yDot0 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A72 * yDot2 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A73 * yDot3 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A74 * yDot4 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A75 * yDot5;
      *IOSDoubleArray_GetRef(nil_chk(v2_), i) = yDot0 - IOSDoubleArray_Get(v1_, i);
      *IOSDoubleArray_GetRef(nil_chk(v3_), i) = IOSDoubleArray_Get(v1_, i) - IOSDoubleArray_Get(v2_, i) - yDot6;
      *IOSDoubleArray_GetRef(nil_chk(v4_), i) = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D0 * yDot0 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D2 * yDot2 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D3 * yDot3 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D4 * yDot4 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D5 * yDot5 + OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D6 * yDot6;
    }
    vectorsInitialized_ = YES;
  }
  jdouble eta = 1 - theta;
  jdouble twoTheta = 2 * theta;
  jdouble dot2 = 1 - twoTheta;
  jdouble dot3 = theta * (2 - 3 * theta);
  jdouble dot4 = twoTheta * (1 + theta * (twoTheta - 3));
  for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(interpolatedState_))->size_; ++i) {
    *IOSDoubleArray_GetRef(interpolatedState_, i) = IOSDoubleArray_Get(nil_chk(currentState_), i) - oneMinusThetaH * (IOSDoubleArray_Get(nil_chk(v1_), i) - theta * (IOSDoubleArray_Get(nil_chk(v2_), i) + theta * (IOSDoubleArray_Get(nil_chk(v3_), i) + eta * IOSDoubleArray_Get(nil_chk(v4_), i))));
    *IOSDoubleArray_GetRef(nil_chk(interpolatedDerivatives_), i) = IOSDoubleArray_Get(v1_, i) + dot2 * IOSDoubleArray_Get(v2_, i) + dot3 * IOSDoubleArray_Get(v3_, i) + dot4 * IOSDoubleArray_Get(v4_, i);
  }
}

- (void)dealloc {
  RELEASE_(v1_);
  RELEASE_(v2_);
  RELEASE_(v3_);
  RELEASE_(v4_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "DormandPrince54StepInterpolator", NULL, 0x1, NULL, NULL },
    { "initWithOrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator:", "DormandPrince54StepInterpolator", NULL, 0x1, NULL, NULL },
    { "doCopy", NULL, "Lorg.apache.commons.math.ode.sampling.StepInterpolator;", 0x4, NULL, NULL },
    { "reinitializeWithOrgApacheCommonsMathOdeAbstractIntegrator:withDoubleArray:withDoubleArray2:withBoolean:", "reinitialize", "V", 0x1, NULL, NULL },
    { "storeTimeWithDouble:", "storeTime", "V", 0x1, NULL, NULL },
    { "computeInterpolatedStateAndDerivativesWithDouble:withDouble:", "computeInterpolatedStateAndDerivatives", "V", 0x4, "Lorg.apache.commons.math.ode.DerivativeException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "A70_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A70 },
    { "A72_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A72 },
    { "A73_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A73 },
    { "A74_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A74 },
    { "A75_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_A75 },
    { "D0_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D0 },
    { "D2_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D2 },
    { "D3_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D3 },
    { "D4_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D4 },
    { "D5_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D5 },
    { "D6_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_D6 },
    { "serialVersionUID_", NULL, 0x1a, "J", NULL, NULL, .constantValue.asLong = OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_serialVersionUID },
    { "v1_", NULL, 0x2, "[D", NULL, NULL,  },
    { "v2_", NULL, 0x2, "[D", NULL, NULL,  },
    { "v3_", NULL, 0x2, "[D", NULL, NULL,  },
    { "v4_", NULL, 0x2, "[D", NULL, NULL,  },
    { "vectorsInitialized_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator = { 2, "DormandPrince54StepInterpolator", "org.apache.commons.math.ode.nonstiff", NULL, 0x0, 6, methods, 17, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator;
}

@end

void OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_init(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *self) {
  OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_init(self);
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v1_(self, nil);
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v2_(self, nil);
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v3_(self, nil);
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v4_(self, nil);
  self->vectorsInitialized_ = NO;
}

OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *new_OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_init() {
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *self = [OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator alloc];
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_init(self);
  return self;
}

void OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_initWithOrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *self, OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *interpolator) {
  OrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_initWithOrgApacheCommonsMathOdeNonstiffRungeKuttaStepInterpolator_(self, interpolator);
  if (((OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *) nil_chk(interpolator))->v1_ == nil) {
    OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v1_(self, nil);
    OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v2_(self, nil);
    OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v3_(self, nil);
    OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v4_(self, nil);
    self->vectorsInitialized_ = NO;
  }
  else {
    OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v1_(self, [interpolator->v1_ clone]);
    OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v2_(self, [((IOSDoubleArray *) nil_chk(interpolator->v2_)) clone]);
    OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v3_(self, [((IOSDoubleArray *) nil_chk(interpolator->v3_)) clone]);
    OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_set_v4_(self, [((IOSDoubleArray *) nil_chk(interpolator->v4_)) clone]);
    self->vectorsInitialized_ = interpolator->vectorsInitialized_;
  }
}

OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *new_OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_initWithOrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *interpolator) {
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator *self = [OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator alloc];
  OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_initWithOrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator_(self, interpolator);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathOdeNonstiffDormandPrince54StepInterpolator)
