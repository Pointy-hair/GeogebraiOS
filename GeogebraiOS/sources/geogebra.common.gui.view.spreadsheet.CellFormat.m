//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/gui/view/spreadsheet/CellFormat.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/awt/GColor.h"
#include "geogebra/common/awt/GFont.h"
#include "geogebra/common/awt/GPoint.h"
#include "geogebra/common/factories/AwtFactory.h"
#include "geogebra/common/gui/view/spreadsheet/CellFormat.h"
#include "geogebra/common/gui/view/spreadsheet/CellRange.h"
#include "geogebra/common/gui/view/spreadsheet/CellRangeProcessor.h"
#include "geogebra/common/gui/view/spreadsheet/MyTableInterface.h"
#include "geogebra/common/main/App.h"
#include "java/lang/Byte.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/StringBuilder.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/HashSet.h"
#include "java/util/Map.h"
#include "java/util/Set.h"

@class GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap;

@interface GeogebraCommonGuiViewSpreadsheetCellFormat () {
 @public
  jint highestIndexRow_;
  jint highestIndexColumn_;
  NSString *cellFormatString_;
  IOSObjectArray *formatMapArray_;
  jint formatCount_;
}

- (void)shiftRowsUpWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                    withInt:(jint)rowStart
                                                                    withInt:(jint)shiftAmount;

- (void)shiftRowsDownWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                      withInt:(jint)rowStart
                                                                      withInt:(jint)shiftAmount;

- (void)clearRowsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                  withInt:(jint)rowStart
                                                                  withInt:(jint)rowEnd;

- (void)shiftColumnsLeftWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                         withInt:(jint)columnStart
                                                                         withInt:(jint)shiftAmount;

- (void)shiftColumnsRightWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                          withInt:(jint)columnStart
                                                                          withInt:(jint)shiftAmount;

- (void)clearColumnsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                     withInt:(jint)columnStart
                                                                     withInt:(jint)columnEnd;

+ (void)printMapWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap;

- (void)setCellFormatString;

- (void)processCellFormatStringWithNSString:(NSString *)formatStr;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, cellFormatString_, NSString *)
J2OBJC_FIELD_SETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, formatMapArray_, IOSObjectArray *)

static NSString *GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_ = @",";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, formatDelimiter_, NSString *)

static NSString *GeogebraCommonGuiViewSpreadsheetCellFormat_cellDelimiter_ = @":";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, cellDelimiter_, NSString *)

static NSString *GeogebraCommonGuiViewSpreadsheetCellFormat_alignToken_ = @"a";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, alignToken_, NSString *)

static NSString *GeogebraCommonGuiViewSpreadsheetCellFormat_borderToken_ = @"b";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, borderToken_, NSString *)

static NSString *GeogebraCommonGuiViewSpreadsheetCellFormat_fontStyleToken_ = @"f";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, fontStyleToken_, NSString *)

static NSString *GeogebraCommonGuiViewSpreadsheetCellFormat_bgColorToken_ = @"c";
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, bgColorToken_, NSString *)

static JavaUtilHashMap *GeogebraCommonGuiViewSpreadsheetCellFormat_formatTokenMap_;
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, formatTokenMap_, JavaUtilHashMap *)
J2OBJC_STATIC_FIELD_SETTER(GeogebraCommonGuiViewSpreadsheetCellFormat, formatTokenMap_, JavaUtilHashMap *)

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_shiftRowsUpWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint rowStart, jint shiftAmount);

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_shiftRowsDownWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint rowStart, jint shiftAmount);

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_clearRowsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint rowStart, jint rowEnd);

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_shiftColumnsLeftWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint columnStart, jint shiftAmount);

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_shiftColumnsRightWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint columnStart, jint shiftAmount);

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_clearColumnsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint columnStart, jint columnEnd);

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_printMapWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap);

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_setCellFormatString(GeogebraCommonGuiViewSpreadsheetCellFormat *self);

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_processCellFormatStringWithNSString_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, NSString *formatStr);

#define GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_serialVersionUID 1LL

@interface GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap : JavaUtilHashMap

- (instancetype)init;

- (id)putWithId:(GeogebraCommonAwtGPoint *)key
         withId:(id)value;

@end

J2OBJC_EMPTY_STATIC_INIT(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap, serialVersionUID, jlong)

__attribute__((unused)) static void GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_init(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *self);

__attribute__((unused)) static GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *new_GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap)

J2OBJC_INITIALIZED_DEFN(GeogebraCommonGuiViewSpreadsheetCellFormat)

@implementation GeogebraCommonGuiViewSpreadsheetCellFormat

- (instancetype)initWithGeogebraCommonGuiViewSpreadsheetMyTableInterface:(id<GeogebraCommonGuiViewSpreadsheetMyTableInterface>)table {
  GeogebraCommonGuiViewSpreadsheetCellFormat_initWithGeogebraCommonGuiViewSpreadsheetMyTableInterface_(self, table);
  return self;
}

- (void)clearAll {
  highestIndexRow_ = 0;
  highestIndexColumn_ = 0;
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(formatMapArray_))->size_; i++) [((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(IOSObjectArray_Get(formatMapArray_, i))) clear];
}

- (void)shiftFormatsWithInt:(jint)startIndex
                    withInt:(jint)shiftAmount
withGeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum:(GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum *)direction {
  if (startIndex - shiftAmount < 0) {
    return;
  }
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(formatMapArray_))->size_; i++) {
    if (direction == GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum_get_Up()) {
      GeogebraCommonGuiViewSpreadsheetCellFormat_shiftRowsUpWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, IOSObjectArray_Get(formatMapArray_, i), startIndex, shiftAmount);
    }
    if (direction == GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum_get_Down()) {
      GeogebraCommonGuiViewSpreadsheetCellFormat_shiftRowsDownWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, IOSObjectArray_Get(formatMapArray_, i), startIndex, shiftAmount);
    }
    if (direction == GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum_get_Left()) {
      GeogebraCommonGuiViewSpreadsheetCellFormat_shiftColumnsLeftWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, IOSObjectArray_Get(formatMapArray_, i), startIndex, shiftAmount);
    }
    else if (direction == GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum_get_Right()) {
      GeogebraCommonGuiViewSpreadsheetCellFormat_shiftColumnsRightWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, IOSObjectArray_Get(formatMapArray_, i), startIndex, shiftAmount);
    }
  }
  if (direction == GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum_get_Left()) {
    highestIndexColumn_ = highestIndexColumn_ - shiftAmount;
  }
  else if (direction == GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum_get_Right()) {
    highestIndexColumn_ = highestIndexColumn_ + shiftAmount;
  }
  else if (direction == GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum_get_Up()) {
    highestIndexRow_ = highestIndexRow_ - shiftAmount;
  }
  else if (direction == GeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum_get_Down()) {
    highestIndexRow_ = highestIndexRow_ + shiftAmount;
  }
}

- (void)shiftRowsUpWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                    withInt:(jint)rowStart
                                                                    withInt:(jint)shiftAmount {
  GeogebraCommonGuiViewSpreadsheetCellFormat_shiftRowsUpWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, formatMap, rowStart, shiftAmount);
}

- (void)shiftRowsDownWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                      withInt:(jint)rowStart
                                                                      withInt:(jint)shiftAmount {
  GeogebraCommonGuiViewSpreadsheetCellFormat_shiftRowsDownWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, formatMap, rowStart, shiftAmount);
}

- (void)clearRowsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                  withInt:(jint)rowStart
                                                                  withInt:(jint)rowEnd {
  GeogebraCommonGuiViewSpreadsheetCellFormat_clearRowsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, formatMap, rowStart, rowEnd);
}

- (void)shiftColumnsLeftWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                         withInt:(jint)columnStart
                                                                         withInt:(jint)shiftAmount {
  GeogebraCommonGuiViewSpreadsheetCellFormat_shiftColumnsLeftWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, formatMap, columnStart, shiftAmount);
}

- (void)shiftColumnsRightWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                          withInt:(jint)columnStart
                                                                          withInt:(jint)shiftAmount {
  GeogebraCommonGuiViewSpreadsheetCellFormat_shiftColumnsRightWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, formatMap, columnStart, shiftAmount);
}

- (void)clearColumnsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap
                                                                     withInt:(jint)columnStart
                                                                     withInt:(jint)columnEnd {
  GeogebraCommonGuiViewSpreadsheetCellFormat_clearColumnsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, formatMap, columnStart, columnEnd);
}

+ (void)printMapWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *)formatMap {
  GeogebraCommonGuiViewSpreadsheetCellFormat_printMapWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_(formatMap);
}

- (JavaUtilHashMap *)getFormatMapWithInt:(jint)formatType {
  return IOSObjectArray_Get(nil_chk(formatMapArray_), formatType);
}

- (id)getCellFormatWithInt:(jint)x
                   withInt:(jint)y
                   withInt:(jint)formatType {
  GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap = IOSObjectArray_Get(nil_chk(formatMapArray_), formatType);
  if (formatMap == nil || [formatMap isEmpty]) {
    return nil;
  }
  id formatObject = nil;
  GeogebraCommonAwtGPoint *rowKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(-1, y) autorelease];
  GeogebraCommonAwtGPoint *columnKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(x, -1) autorelease];
  GeogebraCommonAwtGPoint *cellKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(x, y) autorelease];
  if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:cellKey]) {
    formatObject = [formatMap getWithId:cellKey];
  }
  else if ([formatMap containsKeyWithId:rowKey]) {
    formatObject = [formatMap getWithId:rowKey];
  }
  else if ([formatMap containsKeyWithId:columnKey]) {
    formatObject = [formatMap getWithId:columnKey];
  }
  return formatObject;
}

- (id)getCellFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:(GeogebraCommonGuiViewSpreadsheetCellRange *)cr
                                                         withInt:(jint)formatType {
  id format = [self getCellFormatWithInt:[((GeogebraCommonGuiViewSpreadsheetCellRange *) nil_chk(cr)) getMinColumn] withInt:[cr getMinRow] withInt:formatType];
  if (format == nil) return nil;
  for (jint r = 0; r > [cr getMaxRow]; r++) {
    for (jint c = 0; c > [cr getMaxColumn]; c++) {
      if (![nil_chk(format) isEqual:[self getCellFormatWithInt:c withInt:r withInt:formatType]]) {
        format = nil;
        break;
      }
    }
  }
  return format;
}

- (void)setFormatWithGeogebraCommonAwtGPoint:(GeogebraCommonAwtGPoint *)cell
                                     withInt:(jint)formatType
                                      withId:(id)formatValue {
  JavaUtilArrayList *crList = [new_JavaUtilArrayList_init() autorelease];
  [crList addWithId:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_(app_, ((GeogebraCommonAwtGPoint *) nil_chk(cell))->x_, cell->y_) autorelease]];
  [self setFormatWithJavaUtilArrayList:crList withInt:formatType withId:formatValue];
}

- (void)setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:(GeogebraCommonGuiViewSpreadsheetCellRange *)cr
                                                       withInt:(jint)formatType
                                                        withId:(id)formatValue {
  JavaUtilArrayList *crList = [new_JavaUtilArrayList_init() autorelease];
  [crList addWithId:cr];
  [self setFormatWithJavaUtilArrayList:crList withInt:formatType withId:formatValue];
}

- (void)setFormatWithJavaUtilArrayList:(JavaUtilArrayList *)crList
                               withInt:(jint)formatType
                                withId:(id)value {
  JavaUtilHashMap *formatTable = IOSObjectArray_Get(nil_chk(formatMapArray_), formatType);
  if ([((id<GeogebraCommonGuiViewSpreadsheetMyTableInterface>) nil_chk(table_)) isSelectAll] && value == nil) {
    [((JavaUtilHashMap *) nil_chk(formatTable)) clear];
    return;
  }
  GeogebraCommonAwtGPoint *testCell = [new_GeogebraCommonAwtGPoint_init() autorelease];
  GeogebraCommonAwtGPoint *testRow = [new_GeogebraCommonAwtGPoint_init() autorelease];
  GeogebraCommonAwtGPoint *testColumn = [new_GeogebraCommonAwtGPoint_init() autorelease];
  for (GeogebraCommonGuiViewSpreadsheetCellRange * __strong cr in nil_chk(crList)) {
    if ([((GeogebraCommonGuiViewSpreadsheetCellRange *) nil_chk(cr)) isRow]) {
      if (highestIndexRow_ < [cr getMaxRow]) highestIndexRow_ = [cr getMaxRow];
      for (jint r = [cr getMinRow]; r <= [cr getMaxRow]; ++r) {
        [((JavaUtilHashMap *) nil_chk(formatTable)) putWithId:[new_GeogebraCommonAwtGPoint_initWithInt_withInt_(-1, r) autorelease] withId:value];
        for (jint col = 0; col < highestIndexColumn_; col++) {
          [testCell setLocationWithInt:col withInt:r];
          [testColumn setLocationWithInt:col withInt:-1];
          [formatTable removeWithId:testCell];
          if ([formatTable containsKeyWithId:testColumn]) {
            [formatTable putWithId:testCell withId:value];
          }
        }
      }
    }
    else if ([cr isColumn]) {
      if (highestIndexColumn_ < [cr getMaxColumn]) highestIndexColumn_ = [cr getMaxColumn];
      for (jint c = [cr getMinColumn]; c <= [cr getMaxColumn]; ++c) {
        [((JavaUtilHashMap *) nil_chk(formatTable)) putWithId:[new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, -1) autorelease] withId:value];
        for (jint row = 0; row < highestIndexRow_; row++) {
          [testCell setLocationWithInt:c withInt:row];
          [testRow setLocationWithInt:-1 withInt:row];
          [formatTable removeWithId:testCell];
          if ([formatTable containsKeyWithId:testRow]) {
            [formatTable putWithId:testCell withId:value];
          }
        }
      }
    }
    else {
      if (highestIndexRow_ < [cr getMaxRow]) highestIndexRow_ = [cr getMaxRow];
      if (highestIndexColumn_ < [cr getMaxColumn]) highestIndexColumn_ = [cr getMaxColumn];
      for (GeogebraCommonAwtGPoint * __strong cellPoint in nil_chk([cr toCellListWithBoolean:YES])) [((JavaUtilHashMap *) nil_chk(formatTable)) putWithId:cellPoint withId:value];
    }
  }
  GeogebraCommonGuiViewSpreadsheetCellFormat_setCellFormatString(self);
  [table_ repaint];
}

- (void)setCellFormatString {
  GeogebraCommonGuiViewSpreadsheetCellFormat_setCellFormatString(self);
}

- (void)setBorderStyleWithJavaUtilArrayList:(JavaUtilArrayList *)list
                                    withInt:(jint)borderStyle {
  for (GeogebraCommonGuiViewSpreadsheetCellRange * __strong cr in nil_chk(list)) [self setBorderStyleWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:borderStyle];
}

- (void)setBorderStyleWithGeogebraCommonGuiViewSpreadsheetCellRange:(GeogebraCommonGuiViewSpreadsheetCellRange *)cr
                                                            withInt:(jint)borderStyle {
  jint r1 = [((GeogebraCommonGuiViewSpreadsheetCellRange *) nil_chk(cr)) getMinRow];
  jint r2 = [cr getMaxRow];
  jint c1 = [cr getMinColumn];
  jint c2 = [cr getMaxColumn];
  GeogebraCommonAwtGPoint *cell = [new_GeogebraCommonAwtGPoint_init() autorelease];
  GeogebraCommonAwtGPoint *cell2 = [new_GeogebraCommonAwtGPoint_init() autorelease];
  if ([((id<GeogebraCommonGuiViewSpreadsheetMyTableInterface>) nil_chk(table_)) isSelectAll] && borderStyle == GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_NONE) {
    [((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(IOSObjectArray_Get(nil_chk(formatMapArray_), GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER))) clear];
    return;
  }
  if ([cr isRow]) {
    switch (borderStyle) {
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_NONE:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:nil];
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_LEFT:
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_RIGHT:
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_TOP:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP)];
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_BOTTOM:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM)];
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_ALL:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_ALL)];
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_INSIDE:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_withInt_withInt_(app_, -1, [cr getMinRow], -1, [cr getMinRow]) autorelease] withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT)];
      if ([cr getMinRow] < [cr getMaxRow]) {
        jbyte b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP;
        [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_withInt_withInt_(app_, -1, [cr getMinRow] + 1, -1, [cr getMaxRow]) autorelease] withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      }
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_FRAME:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_withInt_withInt_(app_, -1, [cr getMinRow], -1, [cr getMinRow]) autorelease] withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP)];
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_withInt_withInt_(app_, -1, [cr getMaxRow], -1, [cr getMaxRow]) autorelease] withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM)];
      break;
    }
    return;
  }
  if ([cr isColumn]) {
    switch (borderStyle) {
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_NONE:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:nil];
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_TOP:
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_BOTTOM:
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_LEFT:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT)];
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_RIGHT:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT)];
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_ALL:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_ALL)];
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_INSIDE:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_withInt_withInt_(app_, [cr getMinColumn], -1, [cr getMinColumn], -1) autorelease] withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP)];
      if ([cr getMinColumn] < [cr getMaxColumn]) {
        jbyte b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP;
        [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_withInt_withInt_(app_, [cr getMinColumn] + 1, -1, [cr getMaxColumn], -1) autorelease] withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      }
      break;
      case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_FRAME:
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_withInt_withInt_(app_, [cr getMinColumn], -1, [cr getMinColumn], -1) autorelease] withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT)];
      [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:[new_GeogebraCommonGuiViewSpreadsheetCellRange_initWithGeogebraCommonMainApp_withInt_withInt_withInt_withInt_(app_, [cr getMaxColumn], -1, [cr getMaxColumn], -1) autorelease] withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT)];
      break;
    }
    return;
  }
  switch (borderStyle) {
    case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_NONE:
    for (jint r = r1; r <= r2; r++) for (jint c = c1; c <= c2; c++) [self setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:cr withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:nil];
    break;
    case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_ALL:
    for (jint r = r1; r <= r2; r++) for (jint c = c1; c <= c2; c++) {
      cell->x_ = c;
      cell->y_ = r;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_ALL)];
    }
    break;
    case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_FRAME:
    if (r1 == r2 && c1 == c2) {
      cell->x_ = c1;
      cell->y_ = r1;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_ALL)];
      return;
    }
    cell->y_ = r1;
    cell2->y_ = r2;
    for (jint c = c1 + 1; c <= c2 - 1; c++) {
      cell->x_ = c;
      cell2->x_ = c;
      if (r1 == r2) {
        jbyte b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM;
        [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      }
      else {
        [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP)];
        [self setFormatWithGeogebraCommonAwtGPoint:cell2 withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM)];
      }
    }
    cell->x_ = c1;
    cell2->x_ = c2;
    for (jint r = r1 + 1; r <= r2 - 1; r++) {
      cell->y_ = r;
      cell2->y_ = r;
      if (c1 == c2) {
        jbyte b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT;
        [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      }
      else {
        [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT)];
        [self setFormatWithGeogebraCommonAwtGPoint:cell2 withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT)];
      }
    }
    if (c1 == c2) {
      cell->x_ = c1;
      cell->y_ = r1;
      jbyte b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      cell->x_ = c1;
      cell->y_ = r2;
      b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
    }
    else if (r1 == r2) {
      cell->x_ = c1;
      cell->y_ = r1;
      jbyte b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      cell->x_ = c2;
      cell->y_ = r1;
      b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
    }
    else {
      cell->y_ = r1;
      cell->x_ = c1;
      jbyte b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      cell->y_ = r1;
      cell->x_ = c2;
      b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      cell->y_ = r2;
      cell->x_ = c2;
      b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      cell->y_ = r2;
      cell->x_ = c1;
      b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
    }
    break;
    case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_INSIDE:
    for (jint r = r1 + 1; r <= r2; r++) {
      cell->x_ = c1;
      cell->y_ = r;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP)];
    }
    for (jint c = c1 + 1; c <= c2; c++) {
      cell->x_ = c;
      cell->y_ = r1;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT)];
    }
    for (jint r = r1 + 1; r <= r2; r++) {
      for (jint c = c1 + 1; c <= c2; c++) {
        cell->x_ = c;
        cell->y_ = r;
        jbyte b = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT + GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP;
        [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(b)];
      }
    }
    break;
    case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_TOP:
    cell->y_ = r1;
    for (jint c = c1; c <= c2; c++) {
      cell->x_ = c;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP)];
    }
    break;
    case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_BOTTOM:
    cell->y_ = r2;
    for (jint c = c1; c <= c2; c++) {
      cell->x_ = c;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM)];
    }
    break;
    case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_LEFT:
    cell->x_ = c1;
    for (jint r = r1; r <= r2; r++) {
      cell->y_ = r;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT)];
    }
    break;
    case GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_RIGHT:
    cell->x_ = c2;
    for (jint r = r1; r <= r2; r++) {
      cell->y_ = r;
      [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER withId:JavaLangByte_valueOfWithByte_(GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT)];
    }
    break;
  }
}

- (void)getXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb {
  JavaLangStringBuilder *cellFormat = [self encodeFormats];
  if (cellFormat == nil) return;
  [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"\t<spreadsheetCellFormat "];
  [sb appendWithNSString:@" formatMap=\""];
  [sb appendWithJavaLangCharSequence:cellFormat];
  [sb appendWithNSString:@"\""];
  [sb appendWithNSString:@"/>\n"];
}

- (JavaLangStringBuilder *)encodeFormats {
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_init() autorelease];
  JavaUtilHashSet *masterKeySet = [new_JavaUtilHashSet_init() autorelease];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(formatMapArray_))->size_; i++) [masterKeySet addAllWithJavaUtilCollection:[((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(IOSObjectArray_Get(formatMapArray_, i))) keySet]];
  if ([masterKeySet size] == 0) return nil;
  for (GeogebraCommonAwtGPoint * __strong cell in masterKeySet) {
    [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_cellDelimiter_];
    [sb appendWithInt:((GeogebraCommonAwtGPoint *) nil_chk(cell))->x_];
    [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
    [sb appendWithInt:cell->y_];
    JavaLangInteger *align = (JavaLangInteger *) check_class_cast([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(IOSObjectArray_Get(formatMapArray_, GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_ALIGN))) getWithId:cell], [JavaLangInteger class]);
    if (align != nil) {
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_alignToken_];
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
      [sb appendWithId:align];
    }
    JavaLangByte *border = (JavaLangByte *) check_class_cast([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(IOSObjectArray_Get(formatMapArray_, GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER))) getWithId:cell], [JavaLangByte class]);
    if (border != nil) {
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_borderToken_];
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
      [sb appendWithId:border];
    }
    GeogebraCommonAwtGColor *bgColor = (GeogebraCommonAwtGColor *) check_class_cast([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(IOSObjectArray_Get(formatMapArray_, GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BGCOLOR))) getWithId:cell], [GeogebraCommonAwtGColor class]);
    if (bgColor != nil) {
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_bgColorToken_];
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
      [sb appendWithInt:[bgColor getRGB]];
    }
    JavaLangInteger *fStyle = (JavaLangInteger *) check_class_cast([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(IOSObjectArray_Get(formatMapArray_, GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_FONTSTYLE))) getWithId:cell], [JavaLangInteger class]);
    if (fStyle != nil) {
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_fontStyleToken_];
      [sb appendWithNSString:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
      [sb appendWithId:fStyle];
    }
  }
  [sb deleteCharAtWithInt:0];
  return sb;
}

- (void)processXMLStringWithNSString:(NSString *)xml {
  [self clearAll];
  if (xml == nil) return;
  IOSObjectArray *cellGroup = [((NSString *) nil_chk(xml)) split:GeogebraCommonGuiViewSpreadsheetCellFormat_cellDelimiter_];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(cellGroup))->size_; i++) {
    if (cellGroup->size_ > 0) GeogebraCommonGuiViewSpreadsheetCellFormat_processCellFormatStringWithNSString_(self, IOSObjectArray_Get(cellGroup, i));
  }
}

- (void)processCellFormatStringWithNSString:(NSString *)formatStr {
  GeogebraCommonGuiViewSpreadsheetCellFormat_processCellFormatStringWithNSString_(self, formatStr);
}

- (void)dealloc {
  RELEASE_(table_);
  RELEASE_(app_);
  RELEASE_(cellFormatString_);
  RELEASE_(formatMapArray_);
  [super dealloc];
}

+ (void)initialize {
  if (self == [GeogebraCommonGuiViewSpreadsheetCellFormat class]) {
    JreStrongAssignAndConsume(&GeogebraCommonGuiViewSpreadsheetCellFormat_formatTokenMap_, nil, new_JavaUtilHashMap_init());
    {
      [GeogebraCommonGuiViewSpreadsheetCellFormat_formatTokenMap_ putWithId:GeogebraCommonGuiViewSpreadsheetCellFormat_alignToken_ withId:JavaLangInteger_valueOfWithInt_(GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_ALIGN)];
      [GeogebraCommonGuiViewSpreadsheetCellFormat_formatTokenMap_ putWithId:GeogebraCommonGuiViewSpreadsheetCellFormat_borderToken_ withId:JavaLangInteger_valueOfWithInt_(GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER)];
      [GeogebraCommonGuiViewSpreadsheetCellFormat_formatTokenMap_ putWithId:GeogebraCommonGuiViewSpreadsheetCellFormat_fontStyleToken_ withId:JavaLangInteger_valueOfWithInt_(GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_FONTSTYLE)];
      [GeogebraCommonGuiViewSpreadsheetCellFormat_formatTokenMap_ putWithId:GeogebraCommonGuiViewSpreadsheetCellFormat_bgColorToken_ withId:JavaLangInteger_valueOfWithInt_(GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BGCOLOR)];
    }
    J2OBJC_SET_INITIALIZED(GeogebraCommonGuiViewSpreadsheetCellFormat)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonGuiViewSpreadsheetMyTableInterface:", "CellFormat", NULL, 0x1, NULL, NULL },
    { "clearAll", NULL, "V", 0x1, NULL, NULL },
    { "shiftFormatsWithInt:withInt:withGeogebraCommonGuiViewSpreadsheetCellRangeProcessor_DirectionEnum:", "shiftFormats", "V", 0x1, NULL, NULL },
    { "shiftRowsUpWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:withInt:withInt:", "shiftRowsUp", "V", 0x2, NULL, NULL },
    { "shiftRowsDownWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:withInt:withInt:", "shiftRowsDown", "V", 0x2, NULL, NULL },
    { "clearRowsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:withInt:withInt:", "clearRows", "V", 0x2, NULL, NULL },
    { "shiftColumnsLeftWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:withInt:withInt:", "shiftColumnsLeft", "V", 0x2, NULL, NULL },
    { "shiftColumnsRightWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:withInt:withInt:", "shiftColumnsRight", "V", 0x2, NULL, NULL },
    { "clearColumnsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:withInt:withInt:", "clearColumns", "V", 0x2, NULL, NULL },
    { "printMapWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap:", "printMap", "V", 0xa, NULL, NULL },
    { "getFormatMapWithInt:", "getFormatMap", "Ljava.util.HashMap;", 0x1, NULL, NULL },
    { "getCellFormatWithInt:withInt:withInt:", "getCellFormat", "Ljava.lang.Object;", 0x1, NULL, NULL },
    { "getCellFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:withInt:", "getCellFormat", "Ljava.lang.Object;", 0x1, NULL, NULL },
    { "setFormatWithGeogebraCommonAwtGPoint:withInt:withId:", "setFormat", "V", 0x1, NULL, NULL },
    { "setFormatWithGeogebraCommonGuiViewSpreadsheetCellRange:withInt:withId:", "setFormat", "V", 0x1, NULL, NULL },
    { "setFormatWithJavaUtilArrayList:withInt:withId:", "setFormat", "V", 0x1, NULL, NULL },
    { "setCellFormatString", NULL, "V", 0x2, NULL, NULL },
    { "setBorderStyleWithJavaUtilArrayList:withInt:", "setBorderStyle", "V", 0x1, NULL, NULL },
    { "setBorderStyleWithGeogebraCommonGuiViewSpreadsheetCellRange:withInt:", "setBorderStyle", "V", 0x1, NULL, NULL },
    { "getXMLWithJavaLangStringBuilder:", "getXML", "V", 0x1, NULL, NULL },
    { "encodeFormats", NULL, "Ljava.lang.StringBuilder;", 0x1, NULL, NULL },
    { "processXMLStringWithNSString:", "processXMLString", "V", 0x1, NULL, NULL },
    { "processCellFormatStringWithNSString:", "processCellFormatString", "V", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "table_", NULL, 0x0, "Lgeogebra.common.gui.view.spreadsheet.MyTableInterface;", NULL, NULL,  },
    { "app_", NULL, 0x0, "Lgeogebra.common.main.App;", NULL, NULL,  },
    { "highestIndexRow_", NULL, 0x2, "I", NULL, NULL,  },
    { "highestIndexColumn_", NULL, 0x2, "I", NULL, NULL,  },
    { "cellFormatString_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "formatMapArray_", NULL, 0x2, "[Lgeogebra.common.gui.view.spreadsheet.CellFormat$MyHashMap;", NULL, NULL,  },
    { "FORMAT_ALIGN_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_ALIGN },
    { "FORMAT_BORDER_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER },
    { "FORMAT_BGCOLOR_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BGCOLOR },
    { "FORMAT_FONTSTYLE_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_FONTSTYLE },
    { "formatCount_", NULL, 0x2, "I", NULL, NULL,  },
    { "ALIGN_LEFT_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_ALIGN_LEFT },
    { "ALIGN_CENTER_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_ALIGN_CENTER },
    { "ALIGN_RIGHT_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_ALIGN_RIGHT },
    { "STYLE_PLAIN_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_STYLE_PLAIN },
    { "STYLE_BOLD_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_STYLE_BOLD },
    { "STYLE_ITALIC_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_STYLE_ITALIC },
    { "STYLE_BOLD_ITALIC_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_STYLE_BOLD_ITALIC },
    { "BORDER_STYLE_NONE_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_NONE },
    { "BORDER_STYLE_FRAME_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_FRAME },
    { "BORDER_STYLE_INSIDE_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_INSIDE },
    { "BORDER_STYLE_ALL_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_ALL },
    { "BORDER_STYLE_TOP_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_TOP },
    { "BORDER_STYLE_BOTTOM_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_BOTTOM },
    { "BORDER_STYLE_LEFT_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_LEFT },
    { "BORDER_STYLE_RIGHT_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_STYLE_RIGHT },
    { "BORDER_LEFT_", NULL, 0x19, "B", NULL, NULL, .constantValue.asChar = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_LEFT },
    { "BORDER_TOP_", NULL, 0x19, "B", NULL, NULL, .constantValue.asChar = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_TOP },
    { "BORDER_RIGHT_", NULL, 0x19, "B", NULL, NULL, .constantValue.asChar = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_RIGHT },
    { "BORDER_BOTTOM_", NULL, 0x19, "B", NULL, NULL, .constantValue.asChar = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_BOTTOM },
    { "BORDER_ALL_", NULL, 0x19, "B", NULL, NULL, .constantValue.asChar = GeogebraCommonGuiViewSpreadsheetCellFormat_BORDER_ALL },
    { "formatDelimiter_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_, NULL,  },
    { "cellDelimiter_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiViewSpreadsheetCellFormat_cellDelimiter_, NULL,  },
    { "alignToken_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiViewSpreadsheetCellFormat_alignToken_, NULL,  },
    { "borderToken_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiViewSpreadsheetCellFormat_borderToken_, NULL,  },
    { "fontStyleToken_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiViewSpreadsheetCellFormat_fontStyleToken_, NULL,  },
    { "bgColorToken_", NULL, 0x1a, "Ljava.lang.String;", &GeogebraCommonGuiViewSpreadsheetCellFormat_bgColorToken_, NULL,  },
    { "formatTokenMap_", NULL, 0xa, "Ljava.util.HashMap;", &GeogebraCommonGuiViewSpreadsheetCellFormat_formatTokenMap_, "Ljava/util/HashMap<Ljava/lang/String;Ljava/lang/Integer;>;",  },
  };
  static const char *inner_classes[] = {"Lgeogebra.common.gui.view.spreadsheet.CellFormat$MyHashMap;"};
  static const J2ObjcClassInfo _GeogebraCommonGuiViewSpreadsheetCellFormat = { 2, "CellFormat", "geogebra.common.gui.view.spreadsheet", NULL, 0x1, 23, methods, 38, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_GeogebraCommonGuiViewSpreadsheetCellFormat;
}

@end

void GeogebraCommonGuiViewSpreadsheetCellFormat_initWithGeogebraCommonGuiViewSpreadsheetMyTableInterface_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, id<GeogebraCommonGuiViewSpreadsheetMyTableInterface> table) {
  NSObject_init(self);
  self->highestIndexRow_ = 0;
  self->highestIndexColumn_ = 0;
  self->formatCount_ = 5;
  GeogebraCommonGuiViewSpreadsheetCellFormat_set_table_(self, table);
  GeogebraCommonGuiViewSpreadsheetCellFormat_set_app_(self, [((id<GeogebraCommonGuiViewSpreadsheetMyTableInterface>) nil_chk(table)) getApplication]);
  GeogebraCommonGuiViewSpreadsheetCellFormat_setAndConsume_formatMapArray_(self, [IOSObjectArray newArrayWithLength:self->formatCount_ type:GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_class_()]);
  for (jint i = 0; i < self->formatCount_; i++) {
    IOSObjectArray_SetAndConsume(self->formatMapArray_, i, new_GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_init());
  }
}

GeogebraCommonGuiViewSpreadsheetCellFormat *new_GeogebraCommonGuiViewSpreadsheetCellFormat_initWithGeogebraCommonGuiViewSpreadsheetMyTableInterface_(id<GeogebraCommonGuiViewSpreadsheetMyTableInterface> table) {
  GeogebraCommonGuiViewSpreadsheetCellFormat *self = [GeogebraCommonGuiViewSpreadsheetCellFormat alloc];
  GeogebraCommonGuiViewSpreadsheetCellFormat_initWithGeogebraCommonGuiViewSpreadsheetMyTableInterface_(self, table);
  return self;
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_shiftRowsUpWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint rowStart, jint shiftAmount) {
  if (formatMap == nil || [formatMap isEmpty]) {
    return;
  }
  GeogebraCommonAwtGPoint *key = nil;
  GeogebraCommonAwtGPoint *shiftKey = nil;
  GeogebraCommonGuiViewSpreadsheetCellFormat_clearRowsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, formatMap, rowStart - shiftAmount, rowStart - shiftAmount);
  for (jint r = rowStart; r <= self->highestIndexRow_; r++) {
    key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(-1, r) autorelease];
    if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
      shiftKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(-1, r - shiftAmount) autorelease];
      [formatMap putWithId:shiftKey withId:[formatMap removeWithId:key]];
    }
  }
  for (jint r = rowStart; r <= self->highestIndexRow_; r++) {
    for (jint c = 0; c <= self->highestIndexColumn_; c++) {
      key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, r) autorelease];
      if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
        shiftKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, r - shiftAmount) autorelease];
        [formatMap putWithId:shiftKey withId:[formatMap removeWithId:key]];
      }
    }
  }
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_shiftRowsDownWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint rowStart, jint shiftAmount) {
  if (formatMap == nil || [formatMap isEmpty]) {
    return;
  }
  GeogebraCommonAwtGPoint *key = nil;
  GeogebraCommonAwtGPoint *shiftKey = nil;
  for (jint r = self->highestIndexRow_; r >= rowStart; r--) {
    key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(-1, r) autorelease];
    if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
      shiftKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(-1, r + shiftAmount) autorelease];
      [formatMap putWithId:shiftKey withId:[formatMap removeWithId:key]];
    }
  }
  for (jint r = self->highestIndexRow_; r >= rowStart; r--) {
    for (jint c = 0; c <= self->highestIndexColumn_; c++) {
      key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, r) autorelease];
      if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
        shiftKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, r + shiftAmount) autorelease];
        [formatMap putWithId:shiftKey withId:[formatMap removeWithId:key]];
      }
    }
  }
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_clearRowsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint rowStart, jint rowEnd) {
  if (formatMap == nil || [formatMap isEmpty]) {
    return;
  }
  GeogebraCommonAwtGPoint *key = nil;
  for (jint r = rowStart; r <= rowEnd; r++) {
    key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(-1, r) autorelease];
    if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
      [formatMap removeWithId:key];
    }
  }
  for (jint r = rowStart; r <= rowEnd; r++) {
    for (jint c = 0; c <= self->highestIndexColumn_; c++) {
      key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, r) autorelease];
      if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
        [formatMap removeWithId:key];
      }
    }
  }
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_shiftColumnsLeftWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint columnStart, jint shiftAmount) {
  if (formatMap == nil || [formatMap isEmpty]) {
    return;
  }
  GeogebraCommonAwtGPoint *key = nil;
  GeogebraCommonAwtGPoint *shiftKey = nil;
  GeogebraCommonGuiViewSpreadsheetCellFormat_clearColumnsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(self, formatMap, columnStart - shiftAmount, columnStart - shiftAmount);
  for (jint c = columnStart; c <= self->highestIndexColumn_; c++) {
    key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, -1) autorelease];
    if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
      shiftKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c - shiftAmount, -1) autorelease];
      [formatMap putWithId:shiftKey withId:[formatMap removeWithId:key]];
    }
  }
  for (jint c = columnStart; c <= self->highestIndexColumn_; c++) {
    for (jint r = 0; r <= self->highestIndexRow_; r++) {
      key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, r) autorelease];
      if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
        shiftKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c - shiftAmount, r) autorelease];
        [formatMap putWithId:shiftKey withId:[formatMap removeWithId:key]];
      }
    }
  }
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_shiftColumnsRightWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint columnStart, jint shiftAmount) {
  if (formatMap == nil || [formatMap isEmpty]) {
    return;
  }
  GeogebraCommonAwtGPoint *key = nil;
  GeogebraCommonAwtGPoint *shiftKey = nil;
  for (jint c = self->highestIndexColumn_; c >= columnStart; c--) {
    key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, -1) autorelease];
    if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
      shiftKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c + shiftAmount, -1) autorelease];
      [formatMap putWithId:shiftKey withId:[formatMap removeWithId:key]];
    }
  }
  for (jint c = self->highestIndexColumn_; c >= columnStart; c--) {
    for (jint r = 0; r <= self->highestIndexRow_; r++) {
      key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, r) autorelease];
      if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
        shiftKey = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c + shiftAmount, r) autorelease];
        [formatMap putWithId:shiftKey withId:[formatMap removeWithId:key]];
      }
    }
  }
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_clearColumnsWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_withInt_withInt_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap, jint columnStart, jint columnEnd) {
  if (formatMap == nil || [formatMap isEmpty]) {
    return;
  }
  GeogebraCommonAwtGPoint *key = nil;
  for (jint c = columnStart; c <= columnEnd; c++) {
    key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, -1) autorelease];
    if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
      [formatMap removeWithId:key];
    }
  }
  for (jint c = columnStart; c <= columnEnd; c++) {
    for (jint r = 0; r <= self->highestIndexRow_; r++) {
      key = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(c, r) autorelease];
      if ([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) containsKeyWithId:key]) {
        [formatMap removeWithId:key];
      }
    }
  }
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_printMapWithGeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *formatMap) {
  GeogebraCommonGuiViewSpreadsheetCellFormat_initialize();
  GeogebraCommonMainApp_debugWithNSString_(@" =========  map contents ==========");
  for (id<JavaUtilMap_Entry> __strong entry_ in nil_chk([((GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *) nil_chk(formatMap)) entrySet])) {
    GeogebraCommonAwtGPoint *key = [((id<JavaUtilMap_Entry>) nil_chk(entry_)) getKey];
    id value = [entry_ getValue];
    GeogebraCommonMainApp_debugWithNSString_(JreStrcat("$I$I$$", @" key: ", ((GeogebraCommonAwtGPoint *) nil_chk(key))->x_, @" , ", key->y_, @"  value: ", [nil_chk(value) description]));
  }
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_setCellFormatString(GeogebraCommonGuiViewSpreadsheetCellFormat *self) {
  JavaLangStringBuilder *sb = [self encodeFormats];
  if (sb == nil) {
    GeogebraCommonGuiViewSpreadsheetCellFormat_set_cellFormatString_(self, nil);
  }
  else {
    GeogebraCommonGuiViewSpreadsheetCellFormat_set_cellFormatString_(self, [sb description]);
  }
  [((id<GeogebraCommonGuiViewSpreadsheetMyTableInterface>) nil_chk(self->table_)) updateCellFormatWithNSString:self->cellFormatString_];
}

void GeogebraCommonGuiViewSpreadsheetCellFormat_processCellFormatStringWithNSString_(GeogebraCommonGuiViewSpreadsheetCellFormat *self, NSString *formatStr) {
  if ([((NSString *) nil_chk(formatStr)) isEqual:@"null"]) {
    return;
  }
  IOSObjectArray *f = [formatStr split:GeogebraCommonGuiViewSpreadsheetCellFormat_formatDelimiter_];
  GeogebraCommonAwtGPoint *cell = [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(JavaLangInteger_parseIntWithNSString_(IOSObjectArray_Get(nil_chk(f), 0)), JavaLangInteger_parseIntWithNSString_(IOSObjectArray_Get(f, 1))) autorelease];
  jint formatType;
  id formatValue;
  for (jint i = 2; i < f->size_; i = i + 2) {
    formatType = [((JavaLangInteger *) nil_chk([((JavaUtilHashMap *) nil_chk(GeogebraCommonGuiViewSpreadsheetCellFormat_formatTokenMap_)) getWithId:IOSObjectArray_Get(f, i)])) intValue];
    if (formatType == GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BGCOLOR) {
      jint fv = (jint) (JavaLangLong_parseLongWithNSString_(IOSObjectArray_Get(f, i + 1)) & (jint) 0x00ffffff);
      formatValue = [((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newColorWithInt:fv];
    }
    else if (formatType == GeogebraCommonGuiViewSpreadsheetCellFormat_FORMAT_BORDER) {
      jlong b = JavaLangLong_parseLongWithNSString_(IOSObjectArray_Get(f, i + 1));
      formatValue = JavaLangByte_valueOfWithByte_((jbyte) b);
    }
    else {
      formatValue = JavaLangInteger_valueOfWithInt_(JavaLangInteger_parseIntWithNSString_(IOSObjectArray_Get(f, i + 1)));
    }
    [self setFormatWithGeogebraCommonAwtGPoint:cell withInt:formatType withId:formatValue];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGuiViewSpreadsheetCellFormat)

@implementation GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap

- (instancetype)init {
  GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_init(self);
  return self;
}

- (id)putWithId:(GeogebraCommonAwtGPoint *)key
         withId:(id)value {
  if (value == nil) {
    [super removeWithId:key];
    return nil;
  }
  return [super putWithId:key withId:value];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "MyHashMap", NULL, 0x1, NULL, NULL },
    { "putWithId:withId:", "put", "Ljava.lang.Object;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID_", NULL, 0x1a, "J", NULL, NULL, .constantValue.asLong = GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_serialVersionUID },
  };
  static const char *superclass_type_args[] = {"Lgeogebra.common.awt.GPoint;", "Ljava.lang.Object;"};
  static const J2ObjcClassInfo _GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap = { 2, "MyHashMap", "geogebra.common.gui.view.spreadsheet", "CellFormat", 0xa, 2, methods, 1, fields, 2, superclass_type_args, 0, NULL, NULL, "Ljava/util/HashMap<Lgeogebra/common/awt/GPoint;Ljava/lang/Object;>;" };
  return &_GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap;
}

@end

void GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_init(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *self) {
  JavaUtilHashMap_init(self);
}

GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *new_GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_init() {
  GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap *self = [GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap alloc];
  GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGuiViewSpreadsheetCellFormat_MyHashMap)
