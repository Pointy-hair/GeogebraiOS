//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/algos/AlgoAngleVector.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/euclidian/draw/DrawAngle.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Matrix/Coords.h"
#include "geogebra/common/kernel/algos/AlgoAngle.h"
#include "geogebra/common/kernel/algos/AlgoAngleVector.h"
#include "geogebra/common/kernel/algos/AlgoAngleVectorND.h"
#include "geogebra/common/kernel/geos/GeoAngle.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoPoint.h"
#include "geogebra/common/kernel/geos/GeoVec3D.h"
#include "geogebra/common/kernel/geos/GeoVector.h"
#include "geogebra/common/kernel/kernelND/GeoPointND.h"
#include "java/lang/Math.h"

@interface GeogebraCommonKernelAlgosAlgoAngleVector () {
 @public
  IOSDoubleArray *coords_AlgoAngleVector_;
}

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoAngleVector, coords_AlgoAngleVector_, IOSDoubleArray *)

@implementation GeogebraCommonKernelAlgosAlgoAngleVector

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
                    withGeogebraCommonKernelGeosGeoVec3D:(GeogebraCommonKernelGeosGeoVec3D *)vec {
  GeogebraCommonKernelAlgosAlgoAngleVector_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoVec3D_(self, cons, label, vec);
  return self;
}

- (GeogebraCommonKernelGeosGeoVec3D *)getVec3D {
  return (GeogebraCommonKernelGeosGeoVec3D *) check_class_cast(vec_, [GeogebraCommonKernelGeosGeoVec3D class]);
}

- (void)compute {
  if (coords_AlgoAngleVector_ == nil) {
    GeogebraCommonKernelAlgosAlgoAngleVector_setAndConsume_coords_AlgoAngleVector_(self, [IOSDoubleArray newArrayWithLength:2]);
  }
  [((GeogebraCommonKernelGeosGeoVec3D *) nil_chk(((GeogebraCommonKernelGeosGeoVec3D *) check_class_cast(vec_, [GeogebraCommonKernelGeosGeoVec3D class])))) getInhomCoordsWithDoubleArray:coords_AlgoAngleVector_];
  [((GeogebraCommonKernelGeosGeoAngle *) nil_chk(angle_)) setValueWithDouble:JavaLangMath_atan2WithDouble_withDouble_(IOSDoubleArray_Get(nil_chk(coords_AlgoAngleVector_), 1), IOSDoubleArray_Get(coords_AlgoAngleVector_, 0))];
}

- (jboolean)updateDrawInfoWithDoubleArray:(IOSDoubleArray *)m
                          withDoubleArray:(IOSDoubleArray *)firstVec
 withGeogebraCommonEuclidianDrawDrawAngle:(GeogebraCommonEuclidianDrawDrawAngle *)drawable {
  if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(vec_)) isGeoVector]) {
    id<GeogebraCommonKernelKernelNDGeoPointND> vertex = [((GeogebraCommonKernelGeosGeoVector *) check_class_cast(vec_, [GeogebraCommonKernelGeosGeoVector class])) getStartPoint];
    if (vertex != nil) [vertex getInhomCoordsWithDoubleArray:m];
    return vertex != nil && [vertex isDefined] && ![vertex isInfinite];
  }
  *IOSDoubleArray_GetRef(nil_chk(m), 0) = 0;
  *IOSDoubleArray_GetRef(m, 1) = 0;
  return [vec_ isDefined];
}

- (jboolean)getCoordsInD3WithGeogebraCommonKernelMatrixCoordsArray:(IOSObjectArray *)drawCoords {
  if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(vec_)) isGeoVector]) {
    id<GeogebraCommonKernelKernelNDGeoPointND> vertex = [((GeogebraCommonKernelGeosGeoVector *) check_class_cast(vec_, [GeogebraCommonKernelGeosGeoVector class])) getStartPoint];
    if (GeogebraCommonKernelAlgosAlgoAngle_centerIsNotDrawableWithGeogebraCommonKernelKernelNDGeoPointND_(vertex)) {
      return NO;
    }
    IOSObjectArray_Set(nil_chk(drawCoords), 0, [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(vertex)) getInhomCoordsInD3]);
    IOSObjectArray_Set(drawCoords, 2, [((GeogebraCommonKernelGeosGeoVector *) check_class_cast(vec_, [GeogebraCommonKernelGeosGeoVector class])) getCoordsInD3]);
  }
  else {
    IOSObjectArray_Set(nil_chk(drawCoords), 0, GeogebraCommonKernelMatrixCoords_get_O_());
    IOSObjectArray_Set(drawCoords, 2, [((GeogebraCommonKernelGeosGeoPoint *) check_class_cast(vec_, [GeogebraCommonKernelGeosGeoPoint class])) getCoordsInD3]);
    [((GeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(drawCoords, 2))) setWWithDouble:0];
  }
  IOSObjectArray_Set(nil_chk(drawCoords), 1, GeogebraCommonKernelMatrixCoords_get_VX_());
  return YES;
}

- (void)dealloc {
  RELEASE_(coords_AlgoAngleVector_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelGeosGeoVec3D:", "AlgoAngleVector", NULL, 0x1, NULL, NULL },
    { "getVec3D", NULL, "Lgeogebra.common.kernel.geos.GeoVec3D;", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "updateDrawInfoWithDoubleArray:withDoubleArray:withGeogebraCommonEuclidianDrawDrawAngle:", "updateDrawInfo", "Z", 0x1, NULL, NULL },
    { "getCoordsInD3WithGeogebraCommonKernelMatrixCoordsArray:", "getCoordsInD3", "Z", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "coords_AlgoAngleVector_", "coords", 0x2, "[D", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelAlgosAlgoAngleVector = { 2, "AlgoAngleVector", "geogebra.common.kernel.algos", NULL, 0x1, 5, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelAlgosAlgoAngleVector;
}

@end

void GeogebraCommonKernelAlgosAlgoAngleVector_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoVec3D_(GeogebraCommonKernelAlgosAlgoAngleVector *self, GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoVec3D *vec) {
  GeogebraCommonKernelAlgosAlgoAngleVectorND_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoElement_(self, cons, label, vec);
}

GeogebraCommonKernelAlgosAlgoAngleVector *new_GeogebraCommonKernelAlgosAlgoAngleVector_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoVec3D_(GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoVec3D *vec) {
  GeogebraCommonKernelAlgosAlgoAngleVector *self = [GeogebraCommonKernelAlgosAlgoAngleVector alloc];
  GeogebraCommonKernelAlgosAlgoAngleVector_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoVec3D_(self, cons, label, vec);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelAlgosAlgoAngleVector)
