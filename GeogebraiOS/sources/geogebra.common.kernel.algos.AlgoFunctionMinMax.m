//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/algos/AlgoFunctionMinMax.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/algos/AlgoFunctionMinMax.h"
#include "geogebra/common/kernel/arithmetic/NumberValue.h"
#include "geogebra/common/kernel/commands/Commands.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoFunction.h"
#include "geogebra/common/kernel/geos/GeoFunctionable.h"
#include "geogebra/common/kernel/geos/GeoPoint.h"
#include "geogebra/common/kernel/optimization/ExtremumFinder.h"
#include "geogebra/common/kernel/roots/RealRootFunction.h"

@interface GeogebraCommonKernelAlgosAlgoFunctionMinMax () {
 @public
  id<GeogebraCommonKernelGeosGeoFunctionable> function_;
  GeogebraCommonKernelGeosGeoFunction *f_;
  id<GeogebraCommonKernelArithmeticNumberValue> left_;
  GeogebraCommonKernelGeosGeoElement *geoleft_;
  id<GeogebraCommonKernelArithmeticNumberValue> right_;
  GeogebraCommonKernelGeosGeoElement *georight_;
  GeogebraCommonKernelGeosGeoPoint *E_;
  GeogebraCommonKernelOptimizationExtremumFinder *extrFinder_;
  jboolean isMin_;
}

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoFunctionMinMax, function_, id<GeogebraCommonKernelGeosGeoFunctionable>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoFunctionMinMax, f_, GeogebraCommonKernelGeosGeoFunction *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoFunctionMinMax, left_, id<GeogebraCommonKernelArithmeticNumberValue>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoFunctionMinMax, geoleft_, GeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoFunctionMinMax, right_, id<GeogebraCommonKernelArithmeticNumberValue>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoFunctionMinMax, georight_, GeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoFunctionMinMax, E_, GeogebraCommonKernelGeosGeoPoint *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoFunctionMinMax, extrFinder_, GeogebraCommonKernelOptimizationExtremumFinder *)

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoFunctionMinMax_compute(GeogebraCommonKernelAlgosAlgoFunctionMinMax *self);

@implementation GeogebraCommonKernelAlgosAlgoFunctionMinMax

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
             withGeogebraCommonKernelGeosGeoFunctionable:(id<GeogebraCommonKernelGeosGeoFunctionable>)function
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)left
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)right
                                             withBoolean:(jboolean)isMin {
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunctionable_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withBoolean_(self, cons, label, function, left, right, isMin);
  return self;
}

- (GeogebraCommonKernelCommandsCommandsEnum *)getClassName {
  return self->isMin_ ? GeogebraCommonKernelCommandsCommandsEnum_get_Min() : GeogebraCommonKernelCommandsCommandsEnum_get_Max();
}

- (void)setInputOutput {
  GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:3 type:GeogebraCommonKernelGeosGeoElement_class_()]);
  IOSObjectArray_Set(input_, 0, [((id<GeogebraCommonKernelGeosGeoFunctionable>) nil_chk(function_)) toGeoElement]);
  IOSObjectArray_Set(input_, 1, geoleft_);
  IOSObjectArray_Set(input_, 2, georight_);
  [self setOutputLengthWithInt:1];
  [self setOutputWithInt:0 withGeogebraCommonKernelGeosGeoElement:E_];
  [self setDependencies];
}

- (GeogebraCommonKernelGeosGeoPoint *)getPoint {
  return E_;
}

- (void)compute {
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_compute(self);
}

- (void)dealloc {
  RELEASE_(function_);
  RELEASE_(f_);
  RELEASE_(left_);
  RELEASE_(geoleft_);
  RELEASE_(right_);
  RELEASE_(georight_);
  RELEASE_(E_);
  RELEASE_(extrFinder_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelGeosGeoFunctionable:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelArithmeticNumberValue:withBoolean:", "AlgoFunctionMinMax", NULL, 0x1, NULL, NULL },
    { "getClassName", NULL, "Lgeogebra.common.kernel.commands.Commands;", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "getPoint", NULL, "Lgeogebra.common.kernel.geos.GeoPoint;", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "function_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoFunctionable;", NULL, NULL,  },
    { "f_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoFunction;", NULL, NULL,  },
    { "left_", NULL, 0x2, "Lgeogebra.common.kernel.arithmetic.NumberValue;", NULL, NULL,  },
    { "geoleft_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "right_", NULL, 0x2, "Lgeogebra.common.kernel.arithmetic.NumberValue;", NULL, NULL,  },
    { "georight_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "E_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "extrFinder_", NULL, 0x2, "Lgeogebra.common.kernel.optimization.ExtremumFinder;", NULL, NULL,  },
    { "isMin_", NULL, 0x2, "Z", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelAlgosAlgoFunctionMinMax = { 2, "AlgoFunctionMinMax", "geogebra.common.kernel.algos", NULL, 0x1, 5, methods, 9, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelAlgosAlgoFunctionMinMax;
}

@end

void GeogebraCommonKernelAlgosAlgoFunctionMinMax_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunctionable_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withBoolean_(GeogebraCommonKernelAlgosAlgoFunctionMinMax *self, GeogebraCommonKernelConstruction *cons, NSString *label, id<GeogebraCommonKernelGeosGeoFunctionable> function, id<GeogebraCommonKernelArithmeticNumberValue> left, id<GeogebraCommonKernelArithmeticNumberValue> right, jboolean isMin) {
  GeogebraCommonKernelAlgosAlgoElement_initWithGeogebraCommonKernelConstruction_(self, cons);
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_set_extrFinder_(self, nil);
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_set_function_(self, function);
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_set_f_(self, [((id<GeogebraCommonKernelGeosGeoFunctionable>) nil_chk(function)) getGeoFunction]);
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_set_left_(self, left);
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_set_geoleft_(self, [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(left)) toGeoElement]);
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_set_right_(self, right);
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_set_georight_(self, [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(right)) toGeoElement]);
  self->isMin_ = isMin;
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_setAndConsume_E_(self, new_GeogebraCommonKernelGeosGeoPoint_initWithGeogebraCommonKernelConstruction_(cons));
  [self->E_ setCoordsWithDouble:0.0 withDouble:0.0 withDouble:1.0];
  [self setInputOutput];
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_compute(self);
  [self->E_ setLabelWithNSString:label];
}

GeogebraCommonKernelAlgosAlgoFunctionMinMax *new_GeogebraCommonKernelAlgosAlgoFunctionMinMax_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunctionable_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withBoolean_(GeogebraCommonKernelConstruction *cons, NSString *label, id<GeogebraCommonKernelGeosGeoFunctionable> function, id<GeogebraCommonKernelArithmeticNumberValue> left, id<GeogebraCommonKernelArithmeticNumberValue> right, jboolean isMin) {
  GeogebraCommonKernelAlgosAlgoFunctionMinMax *self = [GeogebraCommonKernelAlgosAlgoFunctionMinMax alloc];
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoFunctionable_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelArithmeticNumberValue_withBoolean_(self, cons, label, function, left, right, isMin);
  return self;
}

void GeogebraCommonKernelAlgosAlgoFunctionMinMax_compute(GeogebraCommonKernelAlgosAlgoFunctionMinMax *self) {
  jdouble l = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(self->left_)) getDouble];
  jdouble r = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(self->right_)) getDouble];
  jdouble min = 0.0;
  if (![((GeogebraCommonKernelGeosGeoElement *) nil_chk([((id<GeogebraCommonKernelGeosGeoFunctionable>) nil_chk(self->function_)) toGeoElement])) isDefined] || ![((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->geoleft_)) isDefined] || ![((GeogebraCommonKernelGeosGeoElement *) nil_chk(self->georight_)) isDefined] || ([self->right_ getDouble] <= [self->left_ getDouble])) {
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(self->E_)) setUndefined];
    return;
  }
  GeogebraCommonKernelAlgosAlgoFunctionMinMax_setAndConsume_extrFinder_(self, new_GeogebraCommonKernelOptimizationExtremumFinder_init());
  id<GeogebraCommonKernelRootsRealRootFunction> fun = [((GeogebraCommonKernelGeosGeoFunction *) nil_chk(self->f_)) getRealRootFunctionY];
  min = self->isMin_ ? [self->extrFinder_ findMinimumWithDouble:l withDouble:r withGeogebraCommonKernelRootsRealRootFunction:fun withDouble:5.0E-8] : [self->extrFinder_ findMaximumWithDouble:l withDouble:r withGeogebraCommonKernelRootsRealRootFunction:fun withDouble:5.0E-8];
  [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(self->E_)) setCoordsWithDouble:min withDouble:[self->f_ evaluateWithDouble:min] withDouble:1.0];
  [self->E_ updateRepaint];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelAlgosAlgoFunctionMinMax)
