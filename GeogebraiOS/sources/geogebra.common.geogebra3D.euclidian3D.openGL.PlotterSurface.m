//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/geogebra3D/euclidian3D/openGL/PlotterSurface.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/geogebra3D/euclidian3D/EuclidianView3D.h"
#include "geogebra/common/geogebra3D/euclidian3D/openGL/Manager.h"
#include "geogebra/common/geogebra3D/euclidian3D/openGL/PlotterSurface.h"
#include "geogebra/common/geogebra3D/euclidian3D/plots/SurfaceMesh2.h"
#include "geogebra/common/geogebra3D/euclidian3D/plots/java/nio/Buffer.h"
#include "geogebra/common/geogebra3D/euclidian3D/plots/java/nio/FloatBuffer.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/Matrix/Coords.h"
#include "geogebra/common/kernel/Matrix/Coords3.h"
#include "geogebra/common/kernel/arithmetic/Functional2Var.h"
#include "geogebra/common/kernel/geos/GeoFunctionNVar.h"
#include "java/lang/Math.h"

#define GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_OUT 0.75f
#define GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_IN 0.0f

@interface GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface () {
 @public
  GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *manager_;
  jint index_;
  id<GeogebraCommonKernelArithmeticFunctional2Var> functional2Var_;
  GeogebraCommonKernelGeosGeoFunctionNVar *function_;
  jfloat uMin_, uMax_, vMin_, vMax_;
  jint uNb_, vNb_;
  jfloat du_, dv_;
  jfloat uMinFade_, uMaxFade_, vMinFade_, vMaxFade_;
  jfloat uMinFadeNb_, uMaxFadeNb_, vMinFadeNb_, vMaxFadeNb_;
  IOSObjectArray *coordsArray_;
  GeogebraCommonKernelMatrixCoords *m_;
  GeogebraCommonKernelMatrixCoords *tmpCoords_, *tmpCoords2_, *tmpCoords3_, *center1_, *center2_, *n_;
  GeogebraCommonKernelMatrixCoords *coords1_;
  GeogebraCommonKernelMatrixCoords *normal2_;
}

+ (void)cosSinWithInt:(jint)vi
              withInt:(jint)latitude
      withDoubleArray:(IOSDoubleArray *)ret;

+ (void)sphericalCoordsWithInt:(jint)ui
                       withInt:(jint)longitude
                    withDouble:(jdouble)longitudeStart
               withDoubleArray:(IOSDoubleArray *)cosSinV
withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)n;

+ (GeogebraCommonKernelMatrixCoords *)sphericalCoordsWithInt:(jint)ui
                                                     withInt:(jint)vi
                                                     withInt:(jint)longitude
                                                     withInt:(jint)latitude;

- (GeogebraCommonKernelMatrixCoords *)calcNormalWithFloat:(jfloat)x
                                                withFloat:(jfloat)y
                                                withFloat:(jfloat)z;

- (void)drawQuadWithInt:(jint)ui
                withInt:(jint)vi;

- (void)drawTNVWithInt:(jint)ui
               withInt:(jint)vi;

- (void)drawNCrWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)normal
               withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                                         withDouble:(jdouble)radius;

- (void)drawNCrmWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)normal
                withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                                          withDouble:(jdouble)radius;

- (void)drawNVWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)normal
              withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)point;

+ (jfloat)getTextureCoordWithInt:(jint)i
                         withInt:(jint)n
                       withFloat:(jfloat)fadeMin
                       withFloat:(jfloat)fadeMax;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, manager_, GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, functional2Var_, id<GeogebraCommonKernelArithmeticFunctional2Var>)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, function_, GeogebraCommonKernelGeosGeoFunctionNVar *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, coordsArray_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, m_, GeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, tmpCoords_, GeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, tmpCoords2_, GeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, tmpCoords3_, GeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, center1_, GeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, center2_, GeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, n_, GeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, coords1_, GeogebraCommonKernelMatrixCoords *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, normal2_, GeogebraCommonKernelMatrixCoords *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, TEXTURE_FADE_OUT, jfloat)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface, TEXTURE_FADE_IN, jfloat)

__attribute__((unused)) static void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_cosSinWithInt_withInt_withDoubleArray_(jint vi, jint latitude, IOSDoubleArray *ret);

__attribute__((unused)) static void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(jint ui, jint longitude, jdouble longitudeStart, IOSDoubleArray *cosSinV, GeogebraCommonKernelMatrixCoords *n);

__attribute__((unused)) static GeogebraCommonKernelMatrixCoords *GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withInt_withInt_(jint ui, jint vi, jint longitude, jint latitude);

__attribute__((unused)) static void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawQuadWithInt_withInt_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, jint ui, jint vi);

__attribute__((unused)) static void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, jint ui, jint vi);

__attribute__((unused)) static void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, GeogebraCommonKernelMatrixCoords *normal, GeogebraCommonKernelMatrixCoords *center, jdouble radius);

__attribute__((unused)) static void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, GeogebraCommonKernelMatrixCoords *normal, GeogebraCommonKernelMatrixCoords *center, jdouble radius);

__attribute__((unused)) static void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, GeogebraCommonKernelMatrixCoords *normal, GeogebraCommonKernelMatrixCoords *point);

__attribute__((unused)) static jfloat GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(jint i, jint n, jfloat fadeMin, jfloat fadeMax);

@implementation GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface

- (instancetype)initWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager:(GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *)manager {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_initWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_(self, manager);
  return self;
}

- (void)startWithInt:(jint)old {
  index_ = [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startNewListWithInt:old];
}

- (void)startWithGeogebraCommonKernelArithmeticFunctional2Var:(id<GeogebraCommonKernelArithmeticFunctional2Var>)function
                                                      withInt:(jint)old {
  index_ = [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startNewListWithInt:old];
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_set_functional2Var_(self, function);
  uMinFade_ = 0;
  vMinFade_ = 0;
  uMaxFade_ = 0;
  vMaxFade_ = 0;
}

- (void)startWithGeogebraCommonKernelGeosGeoFunctionNVar:(GeogebraCommonKernelGeosGeoFunctionNVar *)function
                                                 withInt:(jint)old {
  index_ = [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startNewListWithInt:old];
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_set_function_(self, function);
  uMinFade_ = 0;
  vMinFade_ = 0;
  uMaxFade_ = 0;
  vMaxFade_ = 0;
}

- (jint)end {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) endList];
  return index_;
}

- (void)setUWithFloat:(jfloat)min
            withFloat:(jfloat)max {
  self->uMin_ = min;
  self->uMax_ = max;
}

- (void)setVWithFloat:(jfloat)min
            withFloat:(jfloat)max {
  self->vMin_ = min;
  self->vMax_ = max;
}

- (void)setNbUWithInt:(jint)n {
  self->uNb_ = n;
}

- (void)setNbVWithInt:(jint)n {
  self->vNb_ = n;
}

- (void)setUFadingWithFloat:(jfloat)min
                  withFloat:(jfloat)max {
  self->uMinFade_ = min;
  self->uMaxFade_ = max;
}

- (void)setVFadingWithFloat:(jfloat)min
                  withFloat:(jfloat)max {
  self->vMinFade_ = min;
  self->vMaxFade_ = max;
}

- (void)drawTriangleWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p1
                    withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p2
                    withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p3 {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_STRIP()];
  jfloat uT = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(1, uNb_, uMinFadeNb_, uMaxFadeNb_);
  jfloat vT = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(1, vNb_, vMinFadeNb_, vMaxFadeNb_);
  [manager_ textureWithDouble:uT withDouble:vT];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p1];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p3];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p2];
  [manager_ endGeometry];
}

- (void)drawQuadWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p1
                withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p2
                withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p3
                withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p4 {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_STRIP()];
  jfloat uT = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(1, uNb_, uMinFadeNb_, uMaxFadeNb_);
  jfloat vT = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(1, vNb_, vMinFadeNb_, vMaxFadeNb_);
  [manager_ textureWithDouble:uT withDouble:vT];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p1];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p2];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p4];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p3];
  [manager_ endGeometry];
}

- (void)drawQuadNoTextureWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p1
                         withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p2
                         withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p3
                         withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p4 {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_STRIP()];
  [manager_ setDummyTexture];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p1];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p2];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p4];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p3];
  [manager_ endGeometry];
}

- (void)drawQuadWireFrameWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p1
                         withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p2
                         withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p3
                         withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)p4 {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_LINE_LOOP()];
  [manager_ setDummyTexture];
  [manager_ colorWithDouble:0.0f withDouble:0.0f withDouble:0.0f withDouble:1.0f];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p1];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p2];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p3];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p4];
  [manager_ endGeometry];
  [manager_ startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_STRIP()];
  [manager_ setDummyTexture];
  [manager_ colorWithDouble:1.0f withDouble:0.0f withDouble:0.0f withDouble:0.5f];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p1];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p2];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p4];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:p3];
  [manager_ endGeometry];
}

- (void)startTrianglesWireFrame {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_LINE_LOOP()];
  [manager_ setDummyTexture];
  [manager_ colorWithDouble:0.0f withDouble:0.0f withDouble:0.0f withDouble:1.0f];
}

- (void)startTrianglesWireFrameSurface {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES()];
  [manager_ setDummyTexture];
  [manager_ colorWithDouble:1.0f withDouble:0.0f withDouble:0.0f withDouble:0.25f];
}

- (void)startTrianglesWireFrameSurfaceBoundary {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES()];
  [manager_ setDummyTexture];
  [manager_ colorWithDouble:0.0f withDouble:0.0f withDouble:1.0f withDouble:0.25f];
}

- (void)startTriangles {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES()];
  [manager_ setDummyTexture];
}

- (void)startTrianglesWithInt:(jint)size {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryDirectWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES() withInt:size];
  [manager_ setDummyTexture];
}

- (void)vertexDirectWithGeogebraCommonKernelMatrixCoords3:(GeogebraCommonKernelMatrixCoords3 *)p {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) vertexDirectWithGeogebraCommonKernelMatrixCoords3:p];
}

- (void)normalDirectWithGeogebraCommonKernelMatrixCoords3:(GeogebraCommonKernelMatrixCoords3 *)n {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) normalDirectWithGeogebraCommonKernelMatrixCoords3:n];
}

- (void)endGeometryDirect {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) endGeometryDirect];
}

- (jint)calcSphereLongitudesNeededWithDouble:(jdouble)radius
                                  withDouble:(jdouble)viewScale {
  jint longitude = 8;
  jdouble size = radius * viewScale;
  while (longitude * longitude <= 16 * size && longitude < [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) getLongitudeMax]) {
    longitude *= 2;
  }
  return longitude;
}

- (void)drawSphereWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                                            withDouble:(jdouble)radius
                                               withInt:(jint)longitude {
  [self drawSphereWithGeogebraCommonKernelMatrixCoords:center withDouble:radius withInt:longitude withDouble:0 withInt:longitude];
}

- (void)drawSphereWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                                            withDouble:(jdouble)radius
                                               withInt:(jint)longitude
                                            withDouble:(jdouble)longitudeStart
                                               withInt:(jint)longitudeLength {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES()];
  [manager_ setDummyTexture];
  jint latitude = longitude / 4;
  GeogebraCommonKernelMatrixCoords *o = [((GeogebraCommonGeogebra3DEuclidian3DEuclidianView3D *) nil_chk([manager_ getView3D])) getCenter];
  jdouble frustumRadius = [((GeogebraCommonGeogebra3DEuclidian3DEuclidianView3D *) nil_chk([manager_ getView3D])) getFrustumRadius];
  jdouble z = [((GeogebraCommonKernelMatrixCoords *) nil_chk(center)) getZ];
  jdouble zMin = [((GeogebraCommonKernelMatrixCoords *) nil_chk(o)) getZ] - frustumRadius;
  jdouble zMax = [o getZ] + frustumRadius;
  jint latitudeMaxTop = 0;
  latitudeMaxTop = latitude;
  if (GeogebraCommonKernelKernel_isGreaterWithDouble_withDouble_(z + radius, zMax)) {
    jdouble angle = JavaLangMath_asinWithDouble_((zMax - z) / radius);
    latitudeMaxTop = J2ObjCFpToInt((latitude * 2 * angle / JavaLangMath_PI)) + 2;
  }
  jint latitudeMaxBottom = 0;
  latitudeMaxBottom = latitude;
  if (GeogebraCommonKernelKernel_isGreaterWithDouble_withDouble_(zMin, z - radius)) {
    jdouble angle = JavaLangMath_asinWithDouble_((z - zMin) / radius);
    latitudeMaxBottom = J2ObjCFpToInt((latitude * 2 * angle / JavaLangMath_PI)) + 2;
  }
  jint latitudeMax = JavaLangMath_maxWithInt_withInt_(latitudeMaxTop, latitudeMaxBottom);
  jint latitudeMin = 0;
  if (latitudeMaxTop < 0) {
    latitudeMin = -latitudeMaxTop;
  }
  else if (latitudeMaxBottom < 0) {
    latitudeMin = -latitudeMaxBottom;
  }
  if (((IOSObjectArray *) nil_chk(coordsArray_))->size_ <= longitudeLength) {
    GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_coordsArray_(self, [IOSObjectArray newArrayWithLength:longitudeLength + 1 type:GeogebraCommonKernelMatrixCoords_class_()]);
    for (jint ui = 0; ui <= longitudeLength; ui++) {
      IOSObjectArray_SetAndConsume(coordsArray_, ui, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
    }
  }
  GeogebraCommonKernelMatrixCoords *n1 = [new_GeogebraCommonKernelMatrixCoords_initWithInt_(4) autorelease], *n2 = [new_GeogebraCommonKernelMatrixCoords_initWithInt_(4) autorelease], *n1b = [new_GeogebraCommonKernelMatrixCoords_initWithInt_(4) autorelease], *n2b = [new_GeogebraCommonKernelMatrixCoords_initWithInt_(4) autorelease];
  IOSDoubleArray *cosSinV = [IOSDoubleArray arrayWithLength:2];
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_cosSinWithInt_withInt_withDoubleArray_(latitudeMin, latitude, cosSinV);
  jdouble lastCos = 1;
  for (jint ui = 0; ui <= longitudeLength; ui++) {
    GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(ui, longitude, longitudeStart, cosSinV, IOSObjectArray_Get(coordsArray_, ui));
  }
  jint shift = 1;
  jboolean jumpNeeded = NO;
  for (jint vi = latitudeMin + 1; vi < latitudeMax; vi++) {
    GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_cosSinWithInt_withInt_withDoubleArray_(vi, latitude, cosSinV);
    if (2 * IOSDoubleArray_Get(cosSinV, 0) < lastCos) {
      lastCos = lastCos / 2;
      jumpNeeded = YES;
    }
    else {
      jumpNeeded = NO;
    }
    [n2 setWithGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(coordsArray_, 0)];
    GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(0, longitude, longitudeStart, cosSinV, n2b);
    jboolean jump = jumpNeeded;
    for (jint ui = shift; ui <= longitudeLength; ui += shift) {
      [n1 setWithGeogebraCommonKernelMatrixCoords:n2];
      [n2 setWithGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(coordsArray_, ui)];
      [n1b setWithGeogebraCommonKernelMatrixCoords:n2b];
      if (jumpNeeded) {
        if (jump) {
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(ui + shift, longitude, longitudeStart, cosSinV, n2b);
          if (vi < latitudeMaxTop) {
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2b, center, radius);
          }
          if (vi < latitudeMaxBottom) {
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2b, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
          }
        }
        else {
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(ui, longitude, longitudeStart, cosSinV, n2b);
          if (vi < latitudeMaxTop) {
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
          }
          if (vi < latitudeMaxBottom) {
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
            GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
          }
        }
      }
      else {
        GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(ui, longitude, longitudeStart, cosSinV, n2b);
        if (vi < latitudeMaxTop) {
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2b, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
        }
        if (vi < latitudeMaxBottom) {
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1b, center, radius);
          GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2b, center, radius);
        }
      }
      [((GeogebraCommonKernelMatrixCoords *) nil_chk(IOSObjectArray_Get(coordsArray_, ui))) setWithGeogebraCommonKernelMatrixCoords:n2b];
      if (jumpNeeded) {
        jump = !jump;
      }
    }
    if (jumpNeeded) {
      shift = shift * 2;
    }
    GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(0, longitude, longitudeStart, cosSinV, IOSObjectArray_Get(coordsArray_, 0));
  }
  if (latitudeMax == latitude) {
    [n2 setWithGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(coordsArray_, 0)];
    for (jint ui = shift; ui <= longitudeLength; ui += shift) {
      [n1 setWithGeogebraCommonKernelMatrixCoords:n2];
      [n2 setWithGeogebraCommonKernelMatrixCoords:IOSObjectArray_Get(coordsArray_, ui)];
      if (latitudeMaxTop == latitude) {
        GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1, center, radius);
        GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
        GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, GeogebraCommonKernelMatrixCoords_get_VZ_(), center, radius);
      }
      if (latitudeMaxBottom == latitude) {
        GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n1, center, radius);
        GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, GeogebraCommonKernelMatrixCoords_get_VZ_(), center, radius);
        GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, n2, center, radius);
      }
    }
  }
  [manager_ endGeometry];
}

- (void)draw {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES()];
  du_ = (uMax_ - uMin_) / uNb_;
  dv_ = (vMax_ - vMin_) / vNb_;
  uMinFadeNb_ = uMinFade_ / du_;
  uMaxFadeNb_ = uMaxFade_ / du_;
  vMinFadeNb_ = vMinFade_ / dv_;
  vMaxFadeNb_ = vMaxFade_ / dv_;
  for (jint ui = 0; ui < uNb_; ui++) {
    for (jint vi = 0; vi < vNb_; vi++) {
      GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawQuadWithInt_withInt_(self, ui, vi);
    }
  }
  [manager_ endGeometry];
}

- (void)drawSphereWithInt:(jint)size
withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
               withDouble:(jdouble)radius {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES()];
  GeogebraCommonKernelMatrixCoords *n1, *n2, *n3, *n4, *v1, *v2, *v3, *v4;
  jint longitude = 6;
  size += 3;
  while (longitude * 6 <= size * size) {
    longitude *= 2;
  }
  jint latitude = longitude / 2;
  for (jint ui = 0; ui < longitude; ui++) {
    for (jint vi = -latitude; vi < latitude; vi++) {
      n1 = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withInt_withInt_(ui, vi, longitude, latitude);
      n2 = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withInt_withInt_(ui + 1, vi, longitude, latitude);
      n3 = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withInt_withInt_(ui + 1, vi + 1, longitude, latitude);
      n4 = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withInt_withInt_(ui, vi + 1, longitude, latitude);
      v1 = [((GeogebraCommonKernelMatrixCoords *) nil_chk(center)) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(n1)) mulWithDouble:radius]];
      v2 = [center addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(n2)) mulWithDouble:radius]];
      v3 = [center addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(n3)) mulWithDouble:radius]];
      v4 = [center addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(n4)) mulWithDouble:radius]];
      GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, n1, v1);
      GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, n2, v2);
      GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, n3, v3);
      GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, n1, v1);
      GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, n3, v3);
      GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, n4, v4);
    }
  }
  [manager_ endGeometry];
}

+ (void)cosSinWithInt:(jint)vi
              withInt:(jint)latitude
      withDoubleArray:(IOSDoubleArray *)ret {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_cosSinWithInt_withInt_withDoubleArray_(vi, latitude, ret);
}

+ (void)sphericalCoordsWithInt:(jint)ui
                       withInt:(jint)longitude
                    withDouble:(jdouble)longitudeStart
               withDoubleArray:(IOSDoubleArray *)cosSinV
withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)n {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(ui, longitude, longitudeStart, cosSinV, n);
}

+ (GeogebraCommonKernelMatrixCoords *)sphericalCoordsWithInt:(jint)ui
                                                     withInt:(jint)vi
                                                     withInt:(jint)longitude
                                                     withInt:(jint)latitude {
  return GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withInt_withInt_(ui, vi, longitude, latitude);
}

- (void)drawWithGeogebraCommonGeogebra3DEuclidian3DPlotsSurfaceMesh2:(GeogebraCommonGeogebra3DEuclidian3DPlotsSurfaceMesh2 *)tree {
  GeogebraCommonGeogebra3DEuclidian3DPlotsJavaNioFloatBuffer *b1 = [((GeogebraCommonGeogebra3DEuclidian3DPlotsSurfaceMesh2 *) nil_chk(tree)) getVertices];
  GeogebraCommonGeogebra3DEuclidian3DPlotsJavaNioFloatBuffer *b2 = [tree getNormals];
  jint cnt = [tree getTriangleCount];
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES()];
  [manager_ textureWithDouble:0 withDouble:0];
  IOSFloatArray *f = [IOSFloatArray arrayWithLength:9];
  IOSFloatArray *n = [IOSFloatArray arrayWithLength:9];
  [((GeogebraCommonGeogebra3DEuclidian3DPlotsJavaNioFloatBuffer *) nil_chk(b1)) rewind];
  [((GeogebraCommonGeogebra3DEuclidian3DPlotsJavaNioFloatBuffer *) nil_chk(b2)) rewind];
  for (jint i = 0; i < cnt; i++) {
    [b1 getWithFloatArray:f];
    [b2 getWithFloatArray:n];
    [manager_ normalWithDouble:IOSFloatArray_Get(n, 0) withDouble:IOSFloatArray_Get(n, 1) withDouble:IOSFloatArray_Get(n, 2)];
    [manager_ vertexWithDouble:IOSFloatArray_Get(f, 0) withDouble:IOSFloatArray_Get(f, 1) withDouble:IOSFloatArray_Get(f, 2)];
    [manager_ normalWithDouble:IOSFloatArray_Get(n, 3) withDouble:IOSFloatArray_Get(n, 4) withDouble:IOSFloatArray_Get(n, 5)];
    [manager_ vertexWithDouble:IOSFloatArray_Get(f, 3) withDouble:IOSFloatArray_Get(f, 4) withDouble:IOSFloatArray_Get(f, 5)];
    [manager_ normalWithDouble:IOSFloatArray_Get(n, 6) withDouble:IOSFloatArray_Get(n, 7) withDouble:IOSFloatArray_Get(n, 8)];
    [manager_ vertexWithDouble:IOSFloatArray_Get(f, 6) withDouble:IOSFloatArray_Get(f, 7) withDouble:IOSFloatArray_Get(f, 8)];
  }
  [manager_ endGeometry];
}

- (void)discWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
            withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v1
            withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v2
                                      withDouble:(jdouble)radius {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_FAN()];
  jint longitude = [manager_ getLongitudeDefault];
  GeogebraCommonKernelMatrixCoords *vn;
  jfloat dt = (jfloat) 1 / longitude;
  jfloat da = (jfloat) (2 * JavaLangMath_PI * dt);
  [manager_ textureWithDouble:0 withDouble:0];
  [manager_ normalWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v1)) crossProductWithGeogebraCommonKernelMatrixCoords:v2]];
  [manager_ triangleFanApexWithGeogebraCommonKernelMatrixCoords:center];
  jfloat u = 1, v = 0;
  vn = [((GeogebraCommonKernelMatrixCoords *) nil_chk([v1 mulWithDouble:u])) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v2)) mulWithDouble:v]];
  [manager_ triangleFanVertexWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(center)) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(vn)) mulWithDouble:radius]]];
  for (jint i = 1; i <= longitude; i++) {
    u = (jfloat) JavaLangMath_cosWithDouble_(i * da);
    v = (jfloat) JavaLangMath_sinWithDouble_(i * da);
    vn = [((GeogebraCommonKernelMatrixCoords *) nil_chk([v1 mulWithDouble:u])) addWithGeogebraCommonKernelMatrixCoords:[v2 mulWithDouble:v]];
    [manager_ triangleFanVertexWithGeogebraCommonKernelMatrixCoords:[center addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(vn)) mulWithDouble:radius]]];
  }
  [manager_ endGeometry];
}

- (void)parallelogramWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                     withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v1
                     withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v2
                                               withDouble:(jdouble)l1
                                               withDouble:(jdouble)l2 {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLES()];
  [manager_ setDummyTexture];
  [manager_ normalWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v1)) crossProductWithGeogebraCommonKernelMatrixCoords:v2]];
  [tmpCoords_ setAddWithGeogebraCommonKernelMatrixCoords:center withGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords_)) setMulWithGeogebraCommonKernelMatrixCoords:v1 withDouble:l1]];
  [tmpCoords2_ setAddWithGeogebraCommonKernelMatrixCoords:tmpCoords_ withGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords2_)) setMulWithGeogebraCommonKernelMatrixCoords:v2 withDouble:l2]];
  [tmpCoords3_ setAddWithGeogebraCommonKernelMatrixCoords:center withGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords3_)) setMulWithGeogebraCommonKernelMatrixCoords:v2 withDouble:l2]];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:center];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:tmpCoords_];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:tmpCoords2_];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:center];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:tmpCoords2_];
  [manager_ vertexWithGeogebraCommonKernelMatrixCoords:tmpCoords3_];
  [manager_ endGeometry];
}

- (void)ellipsePartWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                   withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v1
                   withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v2
                                             withDouble:(jdouble)a
                                             withDouble:(jdouble)b
                                             withDouble:(jdouble)start
                                             withDouble:(jdouble)extent {
  [self ellipsePartWithGeogebraCommonKernelMatrixCoords:center withGeogebraCommonKernelMatrixCoords:v1 withGeogebraCommonKernelMatrixCoords:v2 withDouble:a withDouble:b withDouble:start withDouble:extent withBoolean:YES];
}

- (void)ellipsePartWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                   withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v1
                   withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v2
                                             withDouble:(jdouble)a
                                             withDouble:(jdouble)b
                                             withDouble:(jdouble)start
                                             withDouble:(jdouble)extent
                                            withBoolean:(jboolean)fromEllipseCenter {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_FAN()];
  jint longitude = [manager_ getLongitudeDefault];
  jfloat u, v;
  jfloat dt = (jfloat) 1 / longitude;
  jfloat da = (jfloat) (extent * dt);
  [manager_ setDummyTexture];
  [manager_ normalWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v1)) crossProductWithGeogebraCommonKernelMatrixCoords:v2]];
  u = (jfloat) JavaLangMath_cosWithDouble_(start);
  v = (jfloat) JavaLangMath_sinWithDouble_(start);
  [v1 mulWithDouble:a * u withGeogebraCommonKernelMatrixCoords:m_];
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(v2)) mulWithDouble:b * v withGeogebraCommonKernelMatrixCoords:tmpCoords_];
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(m_)) addWithGeogebraCommonKernelMatrixCoords:tmpCoords_ withGeogebraCommonKernelMatrixCoords:m_];
  if (fromEllipseCenter) {
    [manager_ triangleFanApexWithGeogebraCommonKernelMatrixCoords:center];
  }
  else {
    u = (jfloat) JavaLangMath_cosWithDouble_(start + extent);
    v = (jfloat) JavaLangMath_sinWithDouble_(start + extent);
    [v1 mulWithDouble:a * u withGeogebraCommonKernelMatrixCoords:tmpCoords2_];
    [v2 mulWithDouble:b * v withGeogebraCommonKernelMatrixCoords:tmpCoords_];
    [((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords2_)) addWithGeogebraCommonKernelMatrixCoords:tmpCoords_ withGeogebraCommonKernelMatrixCoords:tmpCoords2_];
    [tmpCoords2_ addWithGeogebraCommonKernelMatrixCoords:m_ withGeogebraCommonKernelMatrixCoords:tmpCoords2_];
    [tmpCoords2_ mulWithDouble:0.5 withGeogebraCommonKernelMatrixCoords:tmpCoords2_];
    [((GeogebraCommonKernelMatrixCoords *) nil_chk(center)) addWithGeogebraCommonKernelMatrixCoords:tmpCoords2_ withGeogebraCommonKernelMatrixCoords:tmpCoords2_];
    [manager_ triangleFanApexWithGeogebraCommonKernelMatrixCoords:tmpCoords2_];
  }
  [manager_ triangleFanVertexWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(center)) addWithGeogebraCommonKernelMatrixCoords:m_]];
  for (jint i = 1; i <= longitude; i++) {
    u = (jfloat) JavaLangMath_cosWithDouble_(start + i * da);
    v = (jfloat) JavaLangMath_sinWithDouble_(start + i * da);
    [v1 mulWithDouble:a * u withGeogebraCommonKernelMatrixCoords:m_];
    [v2 mulWithDouble:b * v withGeogebraCommonKernelMatrixCoords:tmpCoords_];
    [m_ addWithGeogebraCommonKernelMatrixCoords:tmpCoords_ withGeogebraCommonKernelMatrixCoords:m_];
    [center addWithGeogebraCommonKernelMatrixCoords:m_ withGeogebraCommonKernelMatrixCoords:m_];
    [manager_ triangleFanVertexWithGeogebraCommonKernelMatrixCoords:m_];
  }
  [manager_ endGeometry];
}

- (GeogebraCommonKernelMatrixCoords *)coneWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                                          withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vx
                                          withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vy
                                          withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vz
                                                                    withDouble:(jdouble)radius
                                                                    withDouble:(jdouble)start
                                                                    withDouble:(jdouble)extent
                                                                    withDouble:(jdouble)height
                                                                     withFloat:(jfloat)fading {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_STRIP()];
  jint longitude = [manager_ getLongitudeDefault];
  jfloat u, v;
  jfloat dt = (jfloat) 1 / longitude;
  jfloat da = (jfloat) (extent * dt);
  if (fading == 1) {
    [manager_ setDummyTexture];
  }
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(center2_)) setWithGeogebraCommonKernelMatrixCoords:vz];
  [center2_ mulInside3WithDouble:height];
  [center2_ addInsideWithGeogebraCommonKernelMatrixCoords:center];
  jdouble r = radius * -height;
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords_)) setMulWithGeogebraCommonKernelMatrixCoords:vz withDouble:radius];
  for (jint i = 0; i <= longitude; i++) {
    u = (jfloat) JavaLangMath_cosWithDouble_(start + i * da);
    v = (jfloat) JavaLangMath_sinWithDouble_(start + i * da);
    [((GeogebraCommonKernelMatrixCoords *) nil_chk(m_)) setAddWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords2_)) setMulWithGeogebraCommonKernelMatrixCoords:vx withDouble:u] withGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords3_)) setMulWithGeogebraCommonKernelMatrixCoords:vy withDouble:v]];
    [((GeogebraCommonKernelMatrixCoords *) nil_chk(n_)) setAddWithGeogebraCommonKernelMatrixCoords:m_ withGeogebraCommonKernelMatrixCoords:tmpCoords_];
    [n_ normalize];
    if (fading < 1) {
      [manager_ textureWithDouble:0 withDouble:fading];
    }
    [manager_ normalWithGeogebraCommonKernelMatrixCoords:n_];
    [manager_ vertexWithGeogebraCommonKernelMatrixCoords:center];
    if (fading < 1) {
      [manager_ textureWithDouble:0 withDouble:1];
    }
    [manager_ normalWithGeogebraCommonKernelMatrixCoords:n_];
    [manager_ vertexWithGeogebraCommonKernelMatrixCoords:[tmpCoords2_ setAddWithGeogebraCommonKernelMatrixCoords:center2_ withGeogebraCommonKernelMatrixCoords:[tmpCoords3_ setMulWithGeogebraCommonKernelMatrixCoords:m_ withDouble:r]]];
  }
  [manager_ endGeometry];
  return center2_;
}

- (void)coneWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
            withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vx
            withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vy
            withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vz
                                      withDouble:(jdouble)radius
                                      withDouble:(jdouble)start
                                      withDouble:(jdouble)extent
                                      withDouble:(jdouble)min
                                      withDouble:(jdouble)max
                                     withBoolean:(jboolean)minFading
                                     withBoolean:(jboolean)maxFading {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_STRIP()];
  jint longitude = [manager_ getLongitudeDefault];
  jfloat u, v;
  jfloat dt = (jfloat) 1 / longitude;
  jfloat da = (jfloat) (extent * dt);
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(center1_)) setWithGeogebraCommonKernelMatrixCoords:vz];
  [center1_ mulInside3WithDouble:min];
  [center1_ addInsideWithGeogebraCommonKernelMatrixCoords:center];
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(center2_)) setWithGeogebraCommonKernelMatrixCoords:vz];
  [center2_ mulInside3WithDouble:max];
  [center2_ addInsideWithGeogebraCommonKernelMatrixCoords:center];
  jdouble r1 = radius * min;
  jdouble r2 = radius * max;
  jint sgn = 1;
  if (max > 0) {
    sgn = -1;
  }
  else {
    r1 *= -1;
    r2 *= -1;
  }
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords_)) setMulWithGeogebraCommonKernelMatrixCoords:vz withDouble:radius * sgn];
  jboolean fading = minFading || maxFading;
  if (!fading) {
    [manager_ setDummyTexture];
  }
  for (jint i = 0; i <= longitude; i++) {
    u = (jfloat) JavaLangMath_cosWithDouble_(start + i * da);
    v = (jfloat) JavaLangMath_sinWithDouble_(start + i * da);
    [((GeogebraCommonKernelMatrixCoords *) nil_chk(m_)) setAddWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords2_)) setMulWithGeogebraCommonKernelMatrixCoords:vx withDouble:u] withGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords3_)) setMulWithGeogebraCommonKernelMatrixCoords:vy withDouble:v]];
    [((GeogebraCommonKernelMatrixCoords *) nil_chk(n_)) setAddWithGeogebraCommonKernelMatrixCoords:m_ withGeogebraCommonKernelMatrixCoords:tmpCoords_];
    [n_ normalize];
    if (fading) {
      if (maxFading) {
        [manager_ textureWithDouble:0 withDouble:1];
      }
      else {
        [manager_ textureWithDouble:0 withDouble:0];
      }
    }
    [manager_ normalWithGeogebraCommonKernelMatrixCoords:n_];
    [manager_ vertexWithGeogebraCommonKernelMatrixCoords:[tmpCoords2_ setAddWithGeogebraCommonKernelMatrixCoords:center2_ withGeogebraCommonKernelMatrixCoords:[tmpCoords3_ setMulWithGeogebraCommonKernelMatrixCoords:m_ withDouble:r2]]];
    if (fading) {
      if (minFading) {
        [manager_ textureWithDouble:0 withDouble:1];
      }
      else {
        [manager_ textureWithDouble:0 withDouble:0];
      }
    }
    [manager_ normalWithGeogebraCommonKernelMatrixCoords:n_];
    [manager_ vertexWithGeogebraCommonKernelMatrixCoords:[tmpCoords2_ setAddWithGeogebraCommonKernelMatrixCoords:center1_ withGeogebraCommonKernelMatrixCoords:[tmpCoords3_ setMulWithGeogebraCommonKernelMatrixCoords:m_ withDouble:r1]]];
  }
  [manager_ endGeometry];
}

- (GeogebraCommonKernelMatrixCoords *)cylinderWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                                              withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vx
                                              withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vy
                                              withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)vz
                                                                        withDouble:(jdouble)radius
                                                                        withDouble:(jdouble)start
                                                                        withDouble:(jdouble)extent
                                                                        withDouble:(jdouble)min
                                                                        withDouble:(jdouble)max
                                                                       withBoolean:(jboolean)minFading
                                                                       withBoolean:(jboolean)maxFading
                                                                           withInt:(jint)longitude {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_STRIP()];
  jfloat u, v;
  jfloat dt = (jfloat) 1 / longitude;
  jfloat da = (jfloat) (extent * dt);
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(center1_)) setWithGeogebraCommonKernelMatrixCoords:vz];
  [center1_ mulInside3WithDouble:min];
  [center1_ addInsideWithGeogebraCommonKernelMatrixCoords:center];
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(center2_)) setWithGeogebraCommonKernelMatrixCoords:vz];
  [center2_ mulInside3WithDouble:max];
  [center2_ addInsideWithGeogebraCommonKernelMatrixCoords:center];
  jboolean fading = minFading || maxFading;
  if (!fading) {
    [manager_ setDummyTexture];
  }
  for (jint i = 0; i <= longitude; i++) {
    u = (jfloat) JavaLangMath_cosWithDouble_(start + i * da);
    v = (jfloat) JavaLangMath_sinWithDouble_(start + i * da);
    [((GeogebraCommonKernelMatrixCoords *) nil_chk(n_)) setAddWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords_)) setMulWithGeogebraCommonKernelMatrixCoords:vx withDouble:u] withGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(tmpCoords2_)) setMulWithGeogebraCommonKernelMatrixCoords:vy withDouble:v]];
    if (fading) {
      if (maxFading) {
        [manager_ textureWithDouble:0 withDouble:1];
      }
      else {
        [manager_ textureWithDouble:0 withDouble:0];
      }
    }
    [manager_ normalWithGeogebraCommonKernelMatrixCoords:n_];
    [manager_ vertexWithGeogebraCommonKernelMatrixCoords:[tmpCoords_ setAddWithGeogebraCommonKernelMatrixCoords:center2_ withGeogebraCommonKernelMatrixCoords:[tmpCoords2_ setMulWithGeogebraCommonKernelMatrixCoords:n_ withDouble:radius]]];
    if (fading) {
      if (minFading) {
        [manager_ textureWithDouble:0 withDouble:1];
      }
      else {
        [manager_ textureWithDouble:0 withDouble:0];
      }
    }
    [manager_ normalWithGeogebraCommonKernelMatrixCoords:n_];
    [manager_ vertexWithGeogebraCommonKernelMatrixCoords:[tmpCoords_ setAddWithGeogebraCommonKernelMatrixCoords:center1_ withGeogebraCommonKernelMatrixCoords:[tmpCoords2_ setMulWithGeogebraCommonKernelMatrixCoords:n_ withDouble:radius]]];
  }
  [manager_ endGeometry];
  return center2_;
}

- (void)hyperbolaPartWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                     withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v1
                     withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v2
                                               withDouble:(jdouble)a
                                               withDouble:(jdouble)b
                                               withDouble:(jdouble)tMin
                                               withDouble:(jdouble)tMax {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_FAN()];
  [manager_ textureWithDouble:0 withDouble:0];
  [manager_ normalWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v1)) crossProductWithGeogebraCommonKernelMatrixCoords:v2]];
  jint longitude = [manager_ getLongitudeDefault];
  GeogebraCommonKernelMatrixCoords *m;
  jfloat dt = (jfloat) (tMax - tMin) / longitude;
  jfloat u, v;
  u = (jfloat) JavaLangMath_coshWithDouble_(tMin);
  v = (jfloat) JavaLangMath_sinhWithDouble_(tMin);
  m = [((GeogebraCommonKernelMatrixCoords *) nil_chk([v1 mulWithDouble:a * u])) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v2)) mulWithDouble:b * v]];
  u = (jfloat) JavaLangMath_coshWithDouble_(tMax);
  v = (jfloat) JavaLangMath_sinhWithDouble_(tMax);
  [manager_ triangleFanApexWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(center)) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(([((GeogebraCommonKernelMatrixCoords *) nil_chk(m)) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk([v1 mulWithDouble:a * u])) addWithGeogebraCommonKernelMatrixCoords:[v2 mulWithDouble:b * v]]]))) mulWithDouble:0.5]]];
  [manager_ triangleFanVertexWithGeogebraCommonKernelMatrixCoords:[center addWithGeogebraCommonKernelMatrixCoords:m]];
  for (jint i = 1; i <= longitude; i++) {
    u = (jfloat) JavaLangMath_coshWithDouble_(tMin + i * dt);
    v = (jfloat) JavaLangMath_sinhWithDouble_(tMin + i * dt);
    m = [((GeogebraCommonKernelMatrixCoords *) nil_chk([v1 mulWithDouble:a * u])) addWithGeogebraCommonKernelMatrixCoords:[v2 mulWithDouble:b * v]];
    [manager_ triangleFanVertexWithGeogebraCommonKernelMatrixCoords:[center addWithGeogebraCommonKernelMatrixCoords:m]];
  }
  [manager_ endGeometry];
}

- (void)parabolaWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v1
                withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)v2
                                          withDouble:(jdouble)p
                                          withDouble:(jdouble)tMin
                                          withDouble:(jdouble)tMax {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_FAN()];
  [manager_ textureWithDouble:0 withDouble:0];
  [manager_ normalWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v1)) crossProductWithGeogebraCommonKernelMatrixCoords:v2]];
  jint longitude = [manager_ getLongitudeDefault];
  GeogebraCommonKernelMatrixCoords *m;
  jfloat dt = (jfloat) (tMax - tMin) / longitude;
  jfloat u, v;
  jdouble t;
  t = tMin;
  u = (jfloat) (p * t * t / 2);
  v = (jfloat) (p * t);
  m = [((GeogebraCommonKernelMatrixCoords *) nil_chk([v1 mulWithDouble:u])) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v2)) mulWithDouble:v]];
  t = tMax;
  u = (jfloat) (p * t * t / 2);
  v = (jfloat) (p * t);
  [manager_ triangleFanApexWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(center)) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(([((GeogebraCommonKernelMatrixCoords *) nil_chk(m)) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk([v1 mulWithDouble:u])) addWithGeogebraCommonKernelMatrixCoords:[v2 mulWithDouble:v]]]))) mulWithDouble:0.5]]];
  [manager_ triangleFanVertexWithGeogebraCommonKernelMatrixCoords:[center addWithGeogebraCommonKernelMatrixCoords:m]];
  for (jint i = 1; i <= longitude; i++) {
    t = tMin + i * dt;
    u = (jfloat) (p * t * t / 2);
    v = (jfloat) (p * t);
    m = [((GeogebraCommonKernelMatrixCoords *) nil_chk([v1 mulWithDouble:u])) addWithGeogebraCommonKernelMatrixCoords:[v2 mulWithDouble:v]];
    [manager_ triangleFanVertexWithGeogebraCommonKernelMatrixCoords:[center addWithGeogebraCommonKernelMatrixCoords:m]];
  }
  [manager_ endGeometry];
}

- (GeogebraCommonKernelMatrixCoords *)calcNormalWithFloat:(jfloat)x
                                                withFloat:(jfloat)y
                                                withFloat:(jfloat)z {
  IOSDoubleArray *n = [IOSDoubleArray arrayWithLength:3];
  GeogebraCommonKernelMatrixCoords *v0 = [new_GeogebraCommonKernelMatrixCoords_initWithDouble_withDouble_withDouble_withDouble_(x, y, z, 0) autorelease];
  GeogebraCommonKernelMatrixCoords *v1 = [((GeogebraCommonKernelGeosGeoFunctionNVar *) nil_chk(function_)) evaluatePointWithDouble:x + 1e-9 withDouble:y];
  GeogebraCommonKernelMatrixCoords *v2 = [function_ evaluatePointWithDouble:x withDouble:y + 1e-9];
  return [((GeogebraCommonKernelMatrixCoords *) nil_chk([((GeogebraCommonKernelMatrixCoords *) nil_chk([((GeogebraCommonKernelMatrixCoords *) nil_chk(v1)) subWithGeogebraCommonKernelMatrixCoords:v0])) crossProductWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(v2)) subWithGeogebraCommonKernelMatrixCoords:v0]])) normalized];
}

- (void)drawTriangleWithGeogebraCommonGeogebra3DEuclidian3DPlotsJavaNioFloatBuffer:(GeogebraCommonGeogebra3DEuclidian3DPlotsJavaNioFloatBuffer *)d {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(manager_)) startGeometryWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum:GeogebraCommonGeogebra3DEuclidian3DOpenGLManager_TypeEnum_get_TRIANGLE_STRIP()];
  jfloat uT = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(1, uNb_, uMinFadeNb_, uMaxFadeNb_);
  jfloat vT = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(1, vNb_, vMinFadeNb_, vMaxFadeNb_);
  [manager_ textureWithDouble:uT withDouble:vT];
  IOSFloatArray *f = [IOSFloatArray arrayWithLength:9];
  [((GeogebraCommonGeogebra3DEuclidian3DPlotsJavaNioFloatBuffer *) nil_chk(d)) getWithFloatArray:f];
  [manager_ vertexWithDouble:IOSFloatArray_Get(f, 0) withDouble:IOSFloatArray_Get(f, 1) withDouble:IOSFloatArray_Get(f, 2)];
  [manager_ vertexWithDouble:IOSFloatArray_Get(f, 3) withDouble:IOSFloatArray_Get(f, 4) withDouble:IOSFloatArray_Get(f, 5)];
  [manager_ vertexWithDouble:IOSFloatArray_Get(f, 6) withDouble:IOSFloatArray_Get(f, 7) withDouble:IOSFloatArray_Get(f, 8)];
  [manager_ endGeometry];
  [d flip];
  [manager_ endGeometry];
}

- (void)drawQuadWithInt:(jint)ui
                withInt:(jint)vi {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawQuadWithInt_withInt_(self, ui, vi);
}

- (void)drawTNVWithInt:(jint)ui
               withInt:(jint)vi {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(self, ui, vi);
}

- (void)drawNCrWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)normal
               withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                                         withDouble:(jdouble)radius {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, normal, center, radius);
}

- (void)drawNCrmWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)normal
                withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)center
                                          withDouble:(jdouble)radius {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, normal, center, radius);
}

- (void)drawNVWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)normal
              withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)point {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, normal, point);
}

+ (jfloat)getTextureCoordWithInt:(jint)i
                         withInt:(jint)n
                       withFloat:(jfloat)fadeMin
                       withFloat:(jfloat)fadeMax {
  return GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(i, n, fadeMin, fadeMax);
}

- (void)dealloc {
  RELEASE_(manager_);
  RELEASE_(functional2Var_);
  RELEASE_(function_);
  RELEASE_(coordsArray_);
  RELEASE_(m_);
  RELEASE_(tmpCoords_);
  RELEASE_(tmpCoords2_);
  RELEASE_(tmpCoords3_);
  RELEASE_(center1_);
  RELEASE_(center2_);
  RELEASE_(n_);
  RELEASE_(coords1_);
  RELEASE_(normal2_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager:", "PlotterSurface", NULL, 0x1, NULL, NULL },
    { "startWithInt:", "start", "V", 0x1, NULL, NULL },
    { "startWithGeogebraCommonKernelArithmeticFunctional2Var:withInt:", "start", "V", 0x1, NULL, NULL },
    { "startWithGeogebraCommonKernelGeosGeoFunctionNVar:withInt:", "start", "V", 0x1, NULL, NULL },
    { "end", NULL, "I", 0x1, NULL, NULL },
    { "setUWithFloat:withFloat:", "setU", "V", 0x1, NULL, NULL },
    { "setVWithFloat:withFloat:", "setV", "V", 0x1, NULL, NULL },
    { "setNbUWithInt:", "setNbU", "V", 0x1, NULL, NULL },
    { "setNbVWithInt:", "setNbV", "V", 0x1, NULL, NULL },
    { "setUFadingWithFloat:withFloat:", "setUFading", "V", 0x1, NULL, NULL },
    { "setVFadingWithFloat:withFloat:", "setVFading", "V", 0x1, NULL, NULL },
    { "drawTriangleWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:", "drawTriangle", "V", 0x1, NULL, NULL },
    { "drawQuadWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:", "drawQuad", "V", 0x1, NULL, NULL },
    { "drawQuadNoTextureWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:", "drawQuadNoTexture", "V", 0x1, NULL, NULL },
    { "drawQuadWireFrameWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:", "drawQuadWireFrame", "V", 0x1, NULL, NULL },
    { "startTrianglesWireFrame", NULL, "V", 0x1, NULL, NULL },
    { "startTrianglesWireFrameSurface", NULL, "V", 0x1, NULL, NULL },
    { "startTrianglesWireFrameSurfaceBoundary", NULL, "V", 0x1, NULL, NULL },
    { "startTriangles", NULL, "V", 0x1, NULL, NULL },
    { "startTrianglesWithInt:", "startTriangles", "V", 0x1, NULL, NULL },
    { "vertexDirectWithGeogebraCommonKernelMatrixCoords3:", "vertexDirect", "V", 0x1, NULL, NULL },
    { "normalDirectWithGeogebraCommonKernelMatrixCoords3:", "normalDirect", "V", 0x1, NULL, NULL },
    { "endGeometryDirect", NULL, "V", 0x1, NULL, NULL },
    { "calcSphereLongitudesNeededWithDouble:withDouble:", "calcSphereLongitudesNeeded", "I", 0x1, NULL, NULL },
    { "drawSphereWithGeogebraCommonKernelMatrixCoords:withDouble:withInt:", "drawSphere", "V", 0x1, NULL, NULL },
    { "drawSphereWithGeogebraCommonKernelMatrixCoords:withDouble:withInt:withDouble:withInt:", "drawSphere", "V", 0x1, NULL, NULL },
    { "draw", NULL, "V", 0x1, NULL, NULL },
    { "drawSphereWithInt:withGeogebraCommonKernelMatrixCoords:withDouble:", "drawSphere", "V", 0x1, NULL, NULL },
    { "cosSinWithInt:withInt:withDoubleArray:", "cosSin", "V", 0xa, NULL, NULL },
    { "sphericalCoordsWithInt:withInt:withDouble:withDoubleArray:withGeogebraCommonKernelMatrixCoords:", "sphericalCoords", "V", 0x1a, NULL, NULL },
    { "sphericalCoordsWithInt:withInt:withInt:withInt:", "sphericalCoords", "Lgeogebra.common.kernel.Matrix.Coords;", 0xa, NULL, NULL },
    { "drawWithGeogebraCommonGeogebra3DEuclidian3DPlotsSurfaceMesh2:", "draw", "V", 0x1, NULL, NULL },
    { "discWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:", "disc", "V", 0x1, NULL, NULL },
    { "parallelogramWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:", "parallelogram", "V", 0x1, NULL, NULL },
    { "ellipsePartWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:withDouble:withDouble:", "ellipsePart", "V", 0x1, NULL, NULL },
    { "ellipsePartWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:withDouble:withDouble:withBoolean:", "ellipsePart", "V", 0x1, NULL, NULL },
    { "coneWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:withDouble:withDouble:withFloat:", "cone", "Lgeogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "coneWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:withDouble:withDouble:withDouble:withBoolean:withBoolean:", "cone", "V", 0x1, NULL, NULL },
    { "cylinderWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:withDouble:withDouble:withDouble:withBoolean:withBoolean:withInt:", "cylinder", "Lgeogebra.common.kernel.Matrix.Coords;", 0x1, NULL, NULL },
    { "hyperbolaPartWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:withDouble:withDouble:", "hyperbolaPart", "V", 0x1, NULL, NULL },
    { "parabolaWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:withDouble:", "parabola", "V", 0x1, NULL, NULL },
    { "calcNormalWithFloat:withFloat:withFloat:", "calcNormal", "Lgeogebra.common.kernel.Matrix.Coords;", 0x2, NULL, NULL },
    { "drawTriangleWithGeogebraCommonGeogebra3DEuclidian3DPlotsJavaNioFloatBuffer:", "drawTriangle", "V", 0x1, NULL, NULL },
    { "drawQuadWithInt:withInt:", "drawQuad", "V", 0x2, NULL, NULL },
    { "drawTNVWithInt:withInt:", "drawTNV", "V", 0x2, NULL, NULL },
    { "drawNCrWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:", "drawNCr", "V", 0x2, NULL, NULL },
    { "drawNCrmWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:", "drawNCrm", "V", 0x2, NULL, NULL },
    { "drawNVWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:", "drawNV", "V", 0x2, NULL, NULL },
    { "getTextureCoordWithInt:withInt:withFloat:withFloat:", "getTextureCoord", "F", 0xa, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "manager_", NULL, 0x2, "Lgeogebra.common.geogebra3D.euclidian3D.openGL.Manager;", NULL, NULL,  },
    { "index_", NULL, 0x2, "I", NULL, NULL,  },
    { "functional2Var_", NULL, 0x2, "Lgeogebra.common.kernel.arithmetic.Functional2Var;", NULL, NULL,  },
    { "function_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoFunctionNVar;", NULL, NULL,  },
    { "uMin_", NULL, 0x2, "F", NULL, NULL,  },
    { "uMax_", NULL, 0x2, "F", NULL, NULL,  },
    { "vMin_", NULL, 0x2, "F", NULL, NULL,  },
    { "vMax_", NULL, 0x2, "F", NULL, NULL,  },
    { "uNb_", NULL, 0x2, "I", NULL, NULL,  },
    { "vNb_", NULL, 0x2, "I", NULL, NULL,  },
    { "du_", NULL, 0x2, "F", NULL, NULL,  },
    { "dv_", NULL, 0x2, "F", NULL, NULL,  },
    { "uMinFade_", NULL, 0x2, "F", NULL, NULL,  },
    { "uMaxFade_", NULL, 0x2, "F", NULL, NULL,  },
    { "vMinFade_", NULL, 0x2, "F", NULL, NULL,  },
    { "vMaxFade_", NULL, 0x2, "F", NULL, NULL,  },
    { "uMinFadeNb_", NULL, 0x2, "F", NULL, NULL,  },
    { "uMaxFadeNb_", NULL, 0x2, "F", NULL, NULL,  },
    { "vMinFadeNb_", NULL, 0x2, "F", NULL, NULL,  },
    { "vMaxFadeNb_", NULL, 0x2, "F", NULL, NULL,  },
    { "TEXTURE_FADE_OUT_", NULL, 0x1a, "F", NULL, NULL, .constantValue.asFloat = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_OUT },
    { "TEXTURE_FADE_IN_", NULL, 0x1a, "F", NULL, NULL, .constantValue.asFloat = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_IN },
    { "coordsArray_", NULL, 0x2, "[Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "m_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "tmpCoords_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "tmpCoords2_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "tmpCoords3_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "center1_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "center2_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "n_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "coords1_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
    { "normal2_", NULL, 0x2, "Lgeogebra.common.kernel.Matrix.Coords;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface = { 2, "PlotterSurface", "geogebra.common.geogebra3D.euclidian3D.openGL", NULL, 0x1, 49, methods, 32, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface;
}

@end

void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_initWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *manager) {
  NSObject_init(self);
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_coordsArray_(self, [IOSObjectArray newArrayWithLength:0 type:GeogebraCommonKernelMatrixCoords_class_()]);
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_m_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_tmpCoords_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_tmpCoords2_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_tmpCoords3_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_center1_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_center2_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_n_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_coords1_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_setAndConsume_normal2_(self, new_GeogebraCommonKernelMatrixCoords_initWithInt_(4));
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_set_manager_(self, manager);
}

GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *new_GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_initWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_(GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *manager) {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self = [GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface alloc];
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_initWithGeogebraCommonGeogebra3DEuclidian3DOpenGLManager_(self, manager);
  return self;
}

void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_cosSinWithInt_withInt_withDoubleArray_(jint vi, jint latitude, IOSDoubleArray *ret) {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_initialize();
  jdouble v = ((jdouble) vi / latitude) * JavaLangMath_PI / 2;
  *IOSDoubleArray_GetRef(nil_chk(ret), 0) = JavaLangMath_cosWithDouble_(v);
  *IOSDoubleArray_GetRef(ret, 1) = JavaLangMath_sinWithDouble_(v);
}

void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withDouble_withDoubleArray_withGeogebraCommonKernelMatrixCoords_(jint ui, jint longitude, jdouble longitudeStart, IOSDoubleArray *cosSinV, GeogebraCommonKernelMatrixCoords *n) {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_initialize();
  jdouble u = ((jdouble) ui / longitude) * 2 * JavaLangMath_PI + longitudeStart;
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(n)) setXWithDouble:JavaLangMath_cosWithDouble_(u) * IOSDoubleArray_Get(nil_chk(cosSinV), 0)];
  [n setYWithDouble:JavaLangMath_sinWithDouble_(u) * IOSDoubleArray_Get(cosSinV, 0)];
  [n setZWithDouble:IOSDoubleArray_Get(cosSinV, 1)];
}

GeogebraCommonKernelMatrixCoords *GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_sphericalCoordsWithInt_withInt_withInt_withInt_(jint ui, jint vi, jint longitude, jint latitude) {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_initialize();
  jdouble u = ((jdouble) ui / longitude) * 2 * JavaLangMath_PI;
  jdouble v = ((jdouble) vi / latitude) * JavaLangMath_PI / 2;
  return [new_GeogebraCommonKernelMatrixCoords_initWithDouble_withDouble_withDouble_withDouble_(JavaLangMath_cosWithDouble_(u) * JavaLangMath_cosWithDouble_(v), JavaLangMath_sinWithDouble_(u) * JavaLangMath_cosWithDouble_(v), JavaLangMath_sinWithDouble_(v), 0) autorelease];
}

void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawQuadWithInt_withInt_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, jint ui, jint vi) {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(self, ui, vi);
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(self, ui + 1, vi);
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(self, ui + 1, vi + 1);
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(self, ui, vi);
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(self, ui + 1, vi + 1);
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(self, ui, vi + 1);
}

void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawTNVWithInt_withInt_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, jint ui, jint vi) {
  jfloat uT = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(ui, self->uNb_, self->uMinFadeNb_, self->uMaxFadeNb_);
  jfloat vT = GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(vi, self->vNb_, self->vMinFadeNb_, self->vMaxFadeNb_);
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(self->manager_)) textureWithDouble:uT withDouble:vT];
  jfloat u = self->uMin_ + ui * self->du_;
  jfloat v = self->vMin_ + vi * self->dv_;
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, [((id<GeogebraCommonKernelArithmeticFunctional2Var>) nil_chk(self->functional2Var_)) evaluateNormalWithDouble:u withDouble:v], [self->functional2Var_ evaluatePointWithDouble:u withDouble:v]);
}

void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, GeogebraCommonKernelMatrixCoords *normal, GeogebraCommonKernelMatrixCoords *center, jdouble radius) {
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(normal)) mulWithDouble:radius withGeogebraCommonKernelMatrixCoords:self->coords1_];
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(center)) addWithGeogebraCommonKernelMatrixCoords:self->coords1_ withGeogebraCommonKernelMatrixCoords:self->coords1_];
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(self, normal, self->coords1_);
}

void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrmWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, GeogebraCommonKernelMatrixCoords *normal, GeogebraCommonKernelMatrixCoords *center, jdouble radius) {
  [((GeogebraCommonKernelMatrixCoords *) nil_chk(self->normal2_)) setXWithDouble:[((GeogebraCommonKernelMatrixCoords *) nil_chk(normal)) getX]];
  [self->normal2_ setYWithDouble:[normal getY]];
  [self->normal2_ setZWithDouble:-[normal getZ]];
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNCrWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_withDouble_(self, self->normal2_, center, radius);
}

void GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_drawNVWithGeogebraCommonKernelMatrixCoords_withGeogebraCommonKernelMatrixCoords_(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface *self, GeogebraCommonKernelMatrixCoords *normal, GeogebraCommonKernelMatrixCoords *point) {
  [((GeogebraCommonGeogebra3DEuclidian3DOpenGLManager *) nil_chk(self->manager_)) normalWithGeogebraCommonKernelMatrixCoords:normal];
  [self->manager_ vertexWithGeogebraCommonKernelMatrixCoords:point];
}

jfloat GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_getTextureCoordWithInt_withInt_withFloat_withFloat_(jint i, jint n, jfloat fadeMin, jfloat fadeMax) {
  GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_initialize();
  jfloat t;
  if (fadeMin != 0) {
    if (i <= n / 2) {
      t = i / fadeMin;
      return GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_OUT * (1 - t) + GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_IN * t;
    }
  }
  if (fadeMax != 0) {
    if (i >= n / 2) {
      t = (n - i) / fadeMax;
      return GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_OUT * (1 - t) + GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_IN * t;
    }
  }
  return GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface_TEXTURE_FADE_IN;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGeogebra3DEuclidian3DOpenGLPlotterSurface)
