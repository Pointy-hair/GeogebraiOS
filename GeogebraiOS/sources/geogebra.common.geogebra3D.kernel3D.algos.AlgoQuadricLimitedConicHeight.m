//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/geogebra3D/kernel3D/algos/AlgoQuadricLimitedConicHeight.java
//


#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/geogebra3D/kernel3D/algos/AlgoElement3D.h"
#include "geogebra/common/geogebra3D/kernel3D/algos/AlgoQuadricEndTop.h"
#include "geogebra/common/geogebra3D/kernel3D/algos/AlgoQuadricLimitedConicHeight.h"
#include "geogebra/common/geogebra3D/kernel3D/algos/AlgoQuadricSide.h"
#include "geogebra/common/geogebra3D/kernel3D/geos/GeoConic3D.h"
#include "geogebra/common/geogebra3D/kernel3D/geos/GeoQuadric3D.h"
#include "geogebra/common/geogebra3D/kernel3D/geos/GeoQuadric3DLimited.h"
#include "geogebra/common/geogebra3D/kernel3D/geos/GeoQuadric3DPart.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/Matrix/Coords.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/algos/ConstructionElement.h"
#include "geogebra/common/kernel/arithmetic/NumberValue.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoNumeric.h"
#include "geogebra/common/kernel/kernelND/GeoConicND.h"
#include "java/lang/StringBuilder.h"

@interface GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight () {
 @public
  GeogebraCommonKernelKernelNDGeoConicND *bottom_;
  id<GeogebraCommonKernelArithmeticNumberValue> height_;
  GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DPart *side_;
  GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *quadric_;
}

@end

J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight, bottom_, GeogebraCommonKernelKernelNDGeoConicND *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight, height_, id<GeogebraCommonKernelArithmeticNumberValue>)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight, side_, GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DPart *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight, quadric_, GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *)

__attribute__((unused)) static void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_createTop(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight *self);

__attribute__((unused)) static void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_setOutput(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight *self);

@implementation GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)c
                                       withNSStringArray:(IOSObjectArray *)labels
              withGeogebraCommonKernelKernelNDGeoConicND:(GeogebraCommonKernelKernelNDGeoConicND *)bottom
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)height
                                                 withInt:(jint)type {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_initWithGeogebraCommonKernelConstruction_withNSStringArray_withGeogebraCommonKernelKernelNDGeoConicND_withGeogebraCommonKernelArithmeticNumberValue_withInt_(self, c, labels, bottom, height, type);
  return self;
}

- (void)createTop {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_createTop(self);
}

- (void)setOutput {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_setOutput(self);
}

- (void)compute {
  GeogebraCommonKernelMatrixCoords *o = [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(bottom_)) getMidpoint3D];
  jdouble r = [bottom_ getHalfAxisWithInt:0];
  jdouble altitude = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(height_)) getDouble];
  GeogebraCommonKernelMatrixCoords *d = [((GeogebraCommonKernelMatrixCoords *) nil_chk([bottom_ getMainDirection])) normalize];
  GeogebraCommonKernelMatrixCoords *o2 = [((GeogebraCommonKernelMatrixCoords *) nil_chk(o)) addWithGeogebraCommonKernelMatrixCoords:[((GeogebraCommonKernelMatrixCoords *) nil_chk(d)) mulWithDouble:altitude]];
  [((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk(quadric_)) setDefined];
  [self setQuadricWithGeogebraCommonKernelMatrixCoords:o withGeogebraCommonKernelMatrixCoords:o2 withGeogebraCommonKernelMatrixCoords:d withDouble:r withDouble:0 withDouble:altitude];
  [quadric_ calcVolume];
}

- (void)setQuadricWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)o1
                  withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)o2
                  withGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)d
                                            withDouble:(jdouble)r
                                            withDouble:(jdouble)min
                                            withDouble:(jdouble)max {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *)getQuadric {
  return quadric_;
}

- (void)update {
  if (stopUpdateCascade_) {
    return;
  }
  [self compute];
  [((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk(quadric_)) update];
  if (![((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk([self getQuadric])) isLabelSet]) {
    [((GeogebraCommonKernelAlgosAlgoElement *) nil_chk([((GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk([((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk([self getQuadric])) getTop])) getParentAlgorithm])) update];
    [((GeogebraCommonKernelAlgosAlgoElement *) nil_chk([((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DPart *) nil_chk([((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk([self getQuadric])) getSide])) getParentAlgorithm])) update];
  }
}

- (void)getOutputXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb {
  [super getOutputXMLWithJavaLangStringBuilder:sb];
  [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(bottom_)) getXMLWithBoolean:NO withJavaLangStringBuilder:sb];
}

- (void)setOutputPointsEuclidianVisibleWithBoolean:(jboolean)b {
}

- (void)notifyUpdateOutputPoints {
}

- (GeogebraCommonKernelGeosGeoElement *)getTopFace {
  return top_;
}

- (void)setOutputOtherEuclidianVisibleWithBoolean:(jboolean)b {
  [((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DPart *) nil_chk(side_)) setEuclidianVisibleWithBoolean:b];
  [((GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk(top_)) setEuclidianVisibleWithBoolean:b];
}

- (void)notifyUpdateOutputOther {
  [((GeogebraCommonKernelKernel *) nil_chk([self getKernel])) notifyUpdateWithGeogebraCommonKernelGeosGeoElement:side_];
  [((GeogebraCommonKernelKernel *) nil_chk([self getKernel])) notifyUpdateWithGeogebraCommonKernelGeosGeoElement:top_];
}

- (void)dealloc {
  RELEASE_(bottom_);
  RELEASE_(height_);
  RELEASE_(side_);
  RELEASE_(top_);
  RELEASE_(quadric_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSStringArray:withGeogebraCommonKernelKernelNDGeoConicND:withGeogebraCommonKernelArithmeticNumberValue:withInt:", "AlgoQuadricLimitedConicHeight", NULL, 0x1, NULL, NULL },
    { "createTop", NULL, "V", 0x14, NULL, NULL },
    { "setOutput", NULL, "V", 0x14, NULL, NULL },
    { "compute", NULL, "V", 0x1, NULL, NULL },
    { "setQuadricWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelMatrixCoords:withDouble:withDouble:withDouble:", "setQuadric", "V", 0x404, NULL, NULL },
    { "getQuadric", NULL, "Lgeogebra.common.geogebra3D.kernel3D.geos.GeoQuadric3DLimited;", 0x1, NULL, NULL },
    { "update", NULL, "V", 0x1, NULL, NULL },
    { "getOutputXMLWithJavaLangStringBuilder:", "getOutputXML", "V", 0x4, NULL, NULL },
    { "setOutputPointsEuclidianVisibleWithBoolean:", "setOutputPointsEuclidianVisible", "V", 0x1, NULL, NULL },
    { "notifyUpdateOutputPoints", NULL, "V", 0x1, NULL, NULL },
    { "getTopFace", NULL, "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "setOutputOtherEuclidianVisibleWithBoolean:", "setOutputOtherEuclidianVisible", "V", 0x1, NULL, NULL },
    { "notifyUpdateOutputOther", NULL, "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "bottom_", NULL, 0x2, "Lgeogebra.common.kernel.kernelND.GeoConicND;", NULL, NULL,  },
    { "height_", NULL, 0x2, "Lgeogebra.common.kernel.arithmetic.NumberValue;", NULL, NULL,  },
    { "side_", NULL, 0x2, "Lgeogebra.common.geogebra3D.kernel3D.geos.GeoQuadric3DPart;", NULL, NULL,  },
    { "top_", NULL, 0x4, "Lgeogebra.common.geogebra3D.kernel3D.geos.GeoConic3D;", NULL, NULL,  },
    { "quadric_", NULL, 0x2, "Lgeogebra.common.geogebra3D.kernel3D.geos.GeoQuadric3DLimited;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight = { 2, "AlgoQuadricLimitedConicHeight", "geogebra.common.geogebra3D.kernel3D.algos", NULL, 0x401, 13, methods, 5, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight;
}

@end

void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_initWithGeogebraCommonKernelConstruction_withNSStringArray_withGeogebraCommonKernelKernelNDGeoConicND_withGeogebraCommonKernelArithmeticNumberValue_withInt_(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight *self, GeogebraCommonKernelConstruction *c, IOSObjectArray *labels, GeogebraCommonKernelKernelNDGeoConicND *bottom, id<GeogebraCommonKernelArithmeticNumberValue> height, jint type) {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoElement3D_initWithGeogebraCommonKernelConstruction_(self, c);
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_set_bottom_(self, bottom);
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_set_height_(self, height);
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_setAndConsume_quadric_(self, new_GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_initWithGeogebraCommonKernelConstruction_(c));
  [self->quadric_ setTypeWithInt:type];
  GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithObjects:(id[]){ bottom, (GeogebraCommonKernelGeosGeoElement *) check_class_cast(height, [GeogebraCommonKernelGeosGeoElement class]) } count:2 type:GeogebraCommonKernelGeosGeoElement_class_()]);
  [((GeogebraCommonKernelGeosGeoElement *) nil_chk((bottom))) addAlgorithmWithGeogebraCommonKernelAlgosAlgoElement:self];
  [((GeogebraCommonKernelGeosGeoElement *) nil_chk(((GeogebraCommonKernelGeosGeoElement *) check_class_cast(height, [GeogebraCommonKernelGeosGeoElement class])))) addAlgorithmWithGeogebraCommonKernelAlgosAlgoElement:self];
  [self->quadric_ setParentAlgorithmWithGeogebraCommonKernelAlgosAlgoElement:self];
  [((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) addToAlgorithmListWithGeogebraCommonKernelAlgosAlgoElement:self];
  [self compute];
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricSide *algo = [new_GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricSide_initWithGeogebraCommonKernelConstruction_withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_withBoolean_(self->cons_, self->quadric_, YES) autorelease];
  [self->cons_ removeFromConstructionListWithGeogebraCommonKernelAlgosConstructionElement:algo];
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_set_side_(self, (GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DPart *) check_class_cast([algo getQuadric], [GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DPart class]));
  [self->quadric_ setSideWithGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DPart:self->side_];
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_createTop(self);
  [self->quadric_ setBottomTopWithGeogebraCommonKernelKernelNDGeoConicND:bottom withGeogebraCommonGeogebra3DKernel3DGeosGeoConic3D:self->top_];
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_setOutput(self);
  [self->quadric_ initLabelsNoBottomWithNSStringArray:labels];
  [self->quadric_ updatePartsVisualStyle];
  if ([height isKindOfClass:[GeogebraCommonKernelGeosGeoNumeric class]]) {
    if ([((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(((GeogebraCommonKernelGeosGeoNumeric *) check_class_cast(height, [GeogebraCommonKernelGeosGeoNumeric class])))) isIndependent]) {
      [((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DPart *) nil_chk(self->side_)) setChangeableCoordParentWithGeogebraCommonKernelGeosGeoNumeric:(GeogebraCommonKernelGeosGeoNumeric *) check_class_cast(height, [GeogebraCommonKernelGeosGeoNumeric class]) withGeogebraCommonKernelGeosGeoElement:bottom];
      [((GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D *) nil_chk(self->top_)) setChangeableCoordParentWithGeogebraCommonKernelGeosGeoNumeric:(GeogebraCommonKernelGeosGeoNumeric *) check_class_cast(height, [GeogebraCommonKernelGeosGeoNumeric class]) withGeogebraCommonKernelGeosGeoElement:bottom];
    }
  }
}

void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_createTop(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight *self) {
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEndTop *algo2 = [new_GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricEndTop_initWithGeogebraCommonKernelConstruction_withGeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited_(self->cons_, [self getQuadric]) autorelease];
  [algo2 setIsHelperAlgo];
  [((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) removeFromConstructionListWithGeogebraCommonKernelAlgosConstructionElement:algo2];
  GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_set_top_(self, [algo2 getSection]);
}

void GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight_setOutput(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight *self) {
  [self setOutputWithGeogebraCommonKernelGeosGeoElementArray:[IOSObjectArray arrayWithObjects:(id[]){ [self getQuadric], [((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk([self getQuadric])) getTop], [((GeogebraCommonGeogebra3DKernel3DGeosGeoQuadric3DLimited *) nil_chk([self getQuadric])) getSide] } count:3 type:GeogebraCommonKernelGeosGeoElement_class_()]];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGeogebra3DKernel3DAlgosAlgoQuadricLimitedConicHeight)
