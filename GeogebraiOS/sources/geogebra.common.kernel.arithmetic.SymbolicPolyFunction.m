//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/arithmetic/SymbolicPolyFunction.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/StringTemplate.h"
#include "geogebra/common/kernel/arithmetic/ExpressionNode.h"
#include "geogebra/common/kernel/arithmetic/ExpressionValue.h"
#include "geogebra/common/kernel/arithmetic/NumberValue.h"
#include "geogebra/common/kernel/arithmetic/PolyFunction.h"
#include "geogebra/common/kernel/arithmetic/SymbolicPolyFunction.h"
#include "geogebra/common/main/App.h"
#include "java/lang/Double.h"
#include "java/lang/Error.h"
#include "java/lang/Exception.h"

@interface GeogebraCommonKernelArithmeticSymbolicPolyFunction () {
 @public
  IOSObjectArray *symbCoeffs_;
}

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelArithmeticSymbolicPolyFunction, symbCoeffs_, IOSObjectArray *)

@implementation GeogebraCommonKernelArithmeticSymbolicPolyFunction

- (instancetype)initWithInt:(jint)degree {
  GeogebraCommonKernelArithmeticSymbolicPolyFunction_initWithInt_(self, degree);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelArithmeticExpressionNodeArray:(IOSObjectArray *)coeff {
  GeogebraCommonKernelArithmeticSymbolicPolyFunction_initWithGeogebraCommonKernelArithmeticExpressionNodeArray_(self, coeff);
  return self;
}

- (IOSObjectArray *)getSymbolicCoeffs {
  return symbCoeffs_;
}

- (jboolean)updateCoeffValues {
  @try {
    jdouble coeff;
    for (jint i = 0; i < ((IOSObjectArray *) nil_chk(symbCoeffs_))->size_; i++) {
      id<GeogebraCommonKernelArithmeticExpressionValue> eval = [((GeogebraCommonKernelArithmeticExpressionNode *) nil_chk(IOSObjectArray_Get(symbCoeffs_, i))) evaluateWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()];
      coeff = [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(((id<GeogebraCommonKernelArithmeticNumberValue>) check_protocol_cast(eval, @protocol(GeogebraCommonKernelArithmeticNumberValue))))) getDouble];
      if (JavaLangDouble_isNaNWithDouble_(coeff) || JavaLangDouble_isInfiniteWithDouble_(coeff)) return NO;
      *IOSDoubleArray_GetRef(nil_chk(coeffs_), i) = coeff;
    }
    return YES;
  }
  @catch (JavaLangException *e) {
    GeogebraCommonMainApp_debugWithNSString_(@"updateCoeffValues: ");
    [((JavaLangException *) nil_chk(e)) printStackTrace];
    return NO;
  }
  @catch (JavaLangError *err) {
    GeogebraCommonMainApp_debugWithNSString_(@"updateCoeffValues: ");
    [((JavaLangError *) nil_chk(err)) printStackTrace];
    return NO;
  }
}

- (void)dealloc {
  RELEASE_(symbCoeffs_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "SymbolicPolyFunction", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelArithmeticExpressionNodeArray:", "SymbolicPolyFunction", NULL, 0x1, NULL, NULL },
    { "getSymbolicCoeffs", NULL, "[Lgeogebra.common.kernel.arithmetic.ExpressionNode;", 0x1, NULL, NULL },
    { "updateCoeffValues", NULL, "Z", 0x11, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "symbCoeffs_", NULL, 0x2, "[Lgeogebra.common.kernel.arithmetic.ExpressionNode;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelArithmeticSymbolicPolyFunction = { 2, "SymbolicPolyFunction", "geogebra.common.kernel.arithmetic", NULL, 0x1, 4, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelArithmeticSymbolicPolyFunction;
}

@end

void GeogebraCommonKernelArithmeticSymbolicPolyFunction_initWithInt_(GeogebraCommonKernelArithmeticSymbolicPolyFunction *self, jint degree) {
  GeogebraCommonKernelArithmeticPolyFunction_initWithInt_(self, degree);
  GeogebraCommonKernelArithmeticSymbolicPolyFunction_setAndConsume_symbCoeffs_(self, [IOSObjectArray newArrayWithLength:degree + 1 type:GeogebraCommonKernelArithmeticExpressionNode_class_()]);
}

GeogebraCommonKernelArithmeticSymbolicPolyFunction *new_GeogebraCommonKernelArithmeticSymbolicPolyFunction_initWithInt_(jint degree) {
  GeogebraCommonKernelArithmeticSymbolicPolyFunction *self = [GeogebraCommonKernelArithmeticSymbolicPolyFunction alloc];
  GeogebraCommonKernelArithmeticSymbolicPolyFunction_initWithInt_(self, degree);
  return self;
}

void GeogebraCommonKernelArithmeticSymbolicPolyFunction_initWithGeogebraCommonKernelArithmeticExpressionNodeArray_(GeogebraCommonKernelArithmeticSymbolicPolyFunction *self, IOSObjectArray *coeff) {
  GeogebraCommonKernelArithmeticPolyFunction_initWithInt_(self, ((IOSObjectArray *) nil_chk(coeff))->size_ - 1);
  GeogebraCommonKernelArithmeticSymbolicPolyFunction_set_symbCoeffs_(self, coeff);
}

GeogebraCommonKernelArithmeticSymbolicPolyFunction *new_GeogebraCommonKernelArithmeticSymbolicPolyFunction_initWithGeogebraCommonKernelArithmeticExpressionNodeArray_(IOSObjectArray *coeff) {
  GeogebraCommonKernelArithmeticSymbolicPolyFunction *self = [GeogebraCommonKernelArithmeticSymbolicPolyFunction alloc];
  GeogebraCommonKernelArithmeticSymbolicPolyFunction_initWithGeogebraCommonKernelArithmeticExpressionNodeArray_(self, coeff);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelArithmeticSymbolicPolyFunction)
