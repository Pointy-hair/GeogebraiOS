//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/locusequ/MPReducePolynomialParser.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/cas/GeoGebraCAS.h"
#include "geogebra/common/kernel/locusequ/MPReducePolynomialParser.h"
#include "java/lang/Comparable.h"
#include "java/lang/Double.h"
#include "java/lang/Integer.h"
#include "java/util/ArrayList.h"
#include "java/util/Collections.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"

@interface GeogebraCommonKernelLocusequMPReducePolynomialParser ()

+ (IOSObjectArray *)mapToArrayWithJavaUtilMap:(id<JavaUtilMap>)map;

+ (void)addCoefficientsWithJavaUtilMap:(id<JavaUtilMap>)map
                               withInt:(jint)x
                               withInt:(jint)y
                            withDouble:(jdouble)parsedCoefficient;

@end

__attribute__((unused)) static IOSObjectArray *GeogebraCommonKernelLocusequMPReducePolynomialParser_mapToArrayWithJavaUtilMap_(id<JavaUtilMap> map);

__attribute__((unused)) static void GeogebraCommonKernelLocusequMPReducePolynomialParser_addCoefficientsWithJavaUtilMap_withInt_withInt_withDouble_(id<JavaUtilMap> map, jint x, jint y, jdouble parsedCoefficient);

@implementation GeogebraCommonKernelLocusequMPReducePolynomialParser

+ (IOSObjectArray *)parsePolynomialWithNSString:(NSString *)result
               withGeogebraCommonCasGeoGebraCAS:(GeogebraCommonCasGeoGebraCAS *)cas {
  return GeogebraCommonKernelLocusequMPReducePolynomialParser_parsePolynomialWithNSString_withGeogebraCommonCasGeoGebraCAS_(result, cas);
}

+ (IOSObjectArray *)mapToArrayWithJavaUtilMap:(id<JavaUtilMap>)map {
  return GeogebraCommonKernelLocusequMPReducePolynomialParser_mapToArrayWithJavaUtilMap_(map);
}

+ (void)addCoefficientsWithJavaUtilMap:(id<JavaUtilMap>)map
                               withInt:(jint)x
                               withInt:(jint)y
                            withDouble:(jdouble)parsedCoefficient {
  GeogebraCommonKernelLocusequMPReducePolynomialParser_addCoefficientsWithJavaUtilMap_withInt_withInt_withDouble_(map, x, y, parsedCoefficient);
}

- (instancetype)init {
  GeogebraCommonKernelLocusequMPReducePolynomialParser_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "parsePolynomialWithNSString:withGeogebraCommonCasGeoGebraCAS:", "parsePolynomial", "[[D", 0x9, NULL, NULL },
    { "mapToArrayWithJavaUtilMap:", "mapToArray", "[[D", 0xa, NULL, NULL },
    { "addCoefficientsWithJavaUtilMap:withInt:withInt:withDouble:", "addCoefficients", "V", 0xa, NULL, NULL },
    { "init", NULL, NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelLocusequMPReducePolynomialParser = { 2, "MPReducePolynomialParser", "geogebra.common.kernel.locusequ", NULL, 0x1, 4, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelLocusequMPReducePolynomialParser;
}

@end

IOSObjectArray *GeogebraCommonKernelLocusequMPReducePolynomialParser_parsePolynomialWithNSString_withGeogebraCommonCasGeoGebraCAS_(NSString *result, GeogebraCommonCasGeoGebraCAS *cas) {
  GeogebraCommonKernelLocusequMPReducePolynomialParser_initialize();
  id<JavaUtilMap> coeff = [new_JavaUtilHashMap_init() autorelease];
  IOSObjectArray *xCoeffs = [((GeogebraCommonCasGeoGebraCAS *) nil_chk(cas)) getPolynomialCoeffsWithNSString:result withNSString:@"x"];
  for (jint x = 0; x < ((IOSObjectArray *) nil_chk(xCoeffs))->size_; x++) {
    IOSObjectArray *yCoeffs = [cas getPolynomialCoeffsWithNSString:IOSObjectArray_Get(xCoeffs, x) withNSString:@"y"];
    for (jint y = 0; y < ((IOSObjectArray *) nil_chk(yCoeffs))->size_; y++) {
      GeogebraCommonKernelLocusequMPReducePolynomialParser_addCoefficientsWithJavaUtilMap_withInt_withInt_withDouble_(coeff, x, y, JavaLangDouble_parseDoubleWithNSString_(IOSObjectArray_Get(yCoeffs, y)));
    }
  }
  return GeogebraCommonKernelLocusequMPReducePolynomialParser_mapToArrayWithJavaUtilMap_(coeff);
}

IOSObjectArray *GeogebraCommonKernelLocusequMPReducePolynomialParser_mapToArrayWithJavaUtilMap_(id<JavaUtilMap> map) {
  GeogebraCommonKernelLocusequMPReducePolynomialParser_initialize();
  JavaLangInteger *xMax = ((JavaLangInteger *) JavaUtilCollections_maxWithJavaUtilCollection_([((id<JavaUtilMap>) nil_chk(map)) keySet]));
  id<JavaUtilList> ys = [new_JavaUtilArrayList_init() autorelease];
  for (JavaLangInteger * __strong x in nil_chk([map keySet])) {
    [ys addAllWithJavaUtilCollection:[((id<JavaUtilMap>) nil_chk([map getWithId:x])) keySet]];
  }
  JavaLangInteger *yMax = ((JavaLangInteger *) JavaUtilCollections_maxWithJavaUtilCollection_(ys));
  IOSObjectArray *coeffs = [IOSDoubleArray arrayWithDimensions:2 lengths:(jint[]){ [((JavaLangInteger *) nil_chk(xMax)) intValue] + 1, [((JavaLangInteger *) nil_chk(yMax)) intValue] + 1 }];
  for (JavaLangInteger * __strong x in nil_chk([map keySet])) {
    id<JavaUtilMap> yMap = [map getWithId:x];
    for (JavaLangInteger * __strong y in nil_chk([((id<JavaUtilMap>) nil_chk(yMap)) keySet])) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(coeffs, [((JavaLangInteger *) nil_chk(x)) intValue])), [((JavaLangInteger *) nil_chk(y)) intValue]) = [((JavaLangDouble *) nil_chk([yMap getWithId:y])) doubleValue];
    }
  }
  return coeffs;
}

void GeogebraCommonKernelLocusequMPReducePolynomialParser_addCoefficientsWithJavaUtilMap_withInt_withInt_withDouble_(id<JavaUtilMap> map, jint x, jint y, jdouble parsedCoefficient) {
  GeogebraCommonKernelLocusequMPReducePolynomialParser_initialize();
  JavaLangInteger *xInt = JavaLangInteger_valueOfWithInt_(x);
  JavaLangInteger *yInt = JavaLangInteger_valueOfWithInt_(y);
  id<JavaUtilMap> yMap = [((id<JavaUtilMap>) nil_chk(map)) getWithId:xInt];
  if (yMap == nil) {
    yMap = [new_JavaUtilHashMap_init() autorelease];
    [map putWithId:xInt withId:yMap];
  }
  JavaLangDouble *coef = [((id<JavaUtilMap>) nil_chk(yMap)) getWithId:yInt];
  if (coef == nil) {
    coef = JavaLangDouble_valueOfWithDouble_(0);
  }
  coef = JavaLangDouble_valueOfWithDouble_([((JavaLangDouble *) nil_chk(coef)) doubleValue] + parsedCoefficient);
  [yMap putWithId:yInt withId:coef];
}

void GeogebraCommonKernelLocusequMPReducePolynomialParser_init(GeogebraCommonKernelLocusequMPReducePolynomialParser *self) {
  NSObject_init(self);
}

GeogebraCommonKernelLocusequMPReducePolynomialParser *new_GeogebraCommonKernelLocusequMPReducePolynomialParser_init() {
  GeogebraCommonKernelLocusequMPReducePolynomialParser *self = [GeogebraCommonKernelLocusequMPReducePolynomialParser alloc];
  GeogebraCommonKernelLocusequMPReducePolynomialParser_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelLocusequMPReducePolynomialParser)
