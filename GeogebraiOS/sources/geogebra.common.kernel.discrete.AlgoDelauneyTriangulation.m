//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/discrete/AlgoDelauneyTriangulation.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/awt/GPoint2D.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/MyPoint.h"
#include "geogebra/common/kernel/commands/Commands.h"
#include "geogebra/common/kernel/discrete/AlgoDelauneyTriangulation.h"
#include "geogebra/common/kernel/discrete/AlgoHull.h"
#include "geogebra/common/kernel/discrete/MyLine.h"
#include "geogebra/common/kernel/discrete/delaunay/Delaunay_Triangulation.h"
#include "geogebra/common/kernel/discrete/delaunay/Point_dt.h"
#include "geogebra/common/kernel/discrete/delaunay/Triangle_dt.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoList.h"
#include "geogebra/common/kernel/geos/GeoLocus.h"
#include "geogebra/common/kernel/kernelND/GeoPointND.h"
#include "java/util/ArrayList.h"
#include "java/util/Comparator.h"
#include "java/util/Iterator.h"
#include "java/util/TreeSet.h"

static id<JavaUtilComparator> GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_lineComparator_;
J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation, lineComparator_, id<JavaUtilComparator>)
J2OBJC_STATIC_FIELD_SETTER(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation, lineComparator_, id<JavaUtilComparator>)

@interface GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1 : NSObject < JavaUtilComparator >

- (jint)compareWithId:(GeogebraCommonKernelDiscreteMyLine *)itemA
               withId:(GeogebraCommonKernelDiscreteMyLine *)itemB;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1)

__attribute__((unused)) static void GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1_init(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1 *self);

__attribute__((unused)) static GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1 *new_GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1_init() NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1)

@implementation GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
                     withGeogebraCommonKernelGeosGeoList:(GeogebraCommonKernelGeosGeoList *)inputList {
  GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_(self, cons, label, inputList);
  return self;
}

- (GeogebraCommonKernelCommandsCommandsEnum *)getClassName {
  return GeogebraCommonKernelCommandsCommandsEnum_get_DelauneyTriangulation();
}

- (void)compute {
  size_ = [((GeogebraCommonKernelGeosGeoList *) nil_chk(inputList_)) size];
  if (![inputList_ isDefined] || size_ == 0) {
    [((GeogebraCommonKernelGeosGeoLocus *) nil_chk(locus_)) setUndefined];
    return;
  }
  IOSDoubleArray *inhom = [IOSDoubleArray arrayWithLength:2];
  IOSObjectArray *points = [IOSObjectArray arrayWithLength:size_ type:GeogebraCommonKernelDiscreteDelaunayPoint_dt_class_()];
  for (jint i = 0; i < size_; i++) {
    GeogebraCommonKernelGeosGeoElement *geo = [inputList_ getWithInt:i];
    if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isDefined] && [geo isGeoPoint]) {
      id<GeogebraCommonKernelKernelNDGeoPointND> p = (id<GeogebraCommonKernelKernelNDGeoPointND>) check_protocol_cast(geo, @protocol(GeogebraCommonKernelKernelNDGeoPointND));
      [p getInhomCoordsWithDoubleArray:inhom];
      IOSObjectArray_SetAndConsume(points, i, new_GeogebraCommonKernelDiscreteDelaunayPoint_dt_initWithDouble_withDouble_(IOSDoubleArray_Get(inhom, 0), IOSDoubleArray_Get(inhom, 1)));
    }
  }
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *dt = [new_GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray_(points) autorelease];
  if (dt->allCollinear_) {
    [((GeogebraCommonKernelGeosGeoLocus *) nil_chk(locus_)) setUndefined];
    return;
  }
  id<JavaUtilIterator> it = [dt trianglesIterator];
  if (al_ == nil) {
    GeogebraCommonKernelDiscreteAlgoHull_setAndConsume_al_(self, new_JavaUtilArrayList_init());
  }
  else {
    [al_ clear];
  }
  JavaUtilTreeSet *tree = [new_JavaUtilTreeSet_initWithJavaUtilComparator_(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_getComparator()) autorelease];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *triangle = [it next];
    [tree addWithId:[new_GeogebraCommonKernelDiscreteMyLine_initWithGeogebraCommonAwtGPoint2D_withGeogebraCommonAwtGPoint2D_([new_GeogebraCommonAwtGPoint2D_Double_initWithDouble_withDouble_([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(triangle)) p1])) x], [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p1])) y]) autorelease], [new_GeogebraCommonAwtGPoint2D_Double_initWithDouble_withDouble_([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p2])) x], [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p2])) y]) autorelease]) autorelease]];
    if ([triangle p3] != nil) {
      [tree addWithId:[new_GeogebraCommonKernelDiscreteMyLine_initWithGeogebraCommonAwtGPoint2D_withGeogebraCommonAwtGPoint2D_([new_GeogebraCommonAwtGPoint2D_Double_initWithDouble_withDouble_([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p2])) x], [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p2])) y]) autorelease], [new_GeogebraCommonAwtGPoint2D_Double_initWithDouble_withDouble_([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p3])) x], [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p3])) y]) autorelease]) autorelease]];
      [tree addWithId:[new_GeogebraCommonKernelDiscreteMyLine_initWithGeogebraCommonAwtGPoint2D_withGeogebraCommonAwtGPoint2D_([new_GeogebraCommonAwtGPoint2D_Double_initWithDouble_withDouble_([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p3])) x], [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p3])) y]) autorelease], [new_GeogebraCommonAwtGPoint2D_Double_initWithDouble_withDouble_([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p1])) x], [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([triangle p1])) y]) autorelease]) autorelease]];
    }
  }
  id<JavaUtilIterator> it2 = [tree iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it2)) hasNext]) {
    GeogebraCommonKernelDiscreteMyLine *line = [it2 next];
    [((JavaUtilArrayList *) nil_chk(al_)) addWithId:[new_GeogebraCommonKernelMyPoint_initWithDouble_withDouble_withBoolean_([((GeogebraCommonAwtGPoint2D *) nil_chk(((GeogebraCommonKernelDiscreteMyLine *) nil_chk(line))->p1_)) getX], [line->p1_ getY], NO) autorelease]];
    [al_ addWithId:[new_GeogebraCommonKernelMyPoint_initWithDouble_withDouble_withBoolean_([((GeogebraCommonAwtGPoint2D *) nil_chk(line->p2_)) getX], [line->p2_ getY], YES) autorelease]];
  }
  [((GeogebraCommonKernelGeosGeoLocus *) nil_chk(locus_)) setPointsWithJavaUtilArrayList:al_];
  [locus_ setDefinedWithBoolean:YES];
}

+ (id<JavaUtilComparator>)getComparator {
  return GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_getComparator();
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelGeosGeoList:", "AlgoDelauneyTriangulation", NULL, 0x1, NULL, NULL },
    { "getClassName", NULL, "Lgeogebra.common.kernel.commands.Commands;", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "getComparator", NULL, "Ljava.util.Comparator;", 0x9, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "lineComparator_", NULL, 0xa, "Ljava.util.Comparator;", &GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_lineComparator_, "Ljava/util/Comparator<Lgeogebra/common/kernel/discrete/MyLine;>;",  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation = { 2, "AlgoDelauneyTriangulation", "geogebra.common.kernel.discrete", NULL, 0x1, 4, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation;
}

@end

void GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation *self, GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoList *inputList) {
  GeogebraCommonKernelDiscreteAlgoHull_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_withGeogebraCommonKernelGeosGeoNumeric_(self, cons, label, inputList, nil);
}

GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation *new_GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_(GeogebraCommonKernelConstruction *cons, NSString *label, GeogebraCommonKernelGeosGeoList *inputList) {
  GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation *self = [GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation alloc];
  GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelGeosGeoList_(self, cons, label, inputList);
  return self;
}

id<JavaUtilComparator> GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_getComparator() {
  GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_initialize();
  if (GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_lineComparator_ == nil) {
    JreStrongAssignAndConsume(&GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_lineComparator_, nil, new_GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1_init());
  }
  return GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_lineComparator_;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation)

@implementation GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1

- (jint)compareWithId:(GeogebraCommonKernelDiscreteMyLine *)itemA
               withId:(GeogebraCommonKernelDiscreteMyLine *)itemB {
  GeogebraCommonAwtGPoint2D *p1A = ((GeogebraCommonKernelDiscreteMyLine *) nil_chk(itemA))->p1_;
  GeogebraCommonAwtGPoint2D *p2A = itemA->p2_;
  GeogebraCommonAwtGPoint2D *p1B = ((GeogebraCommonKernelDiscreteMyLine *) nil_chk(itemB))->p1_;
  GeogebraCommonAwtGPoint2D *p2B = itemB->p2_;
  if (GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([((GeogebraCommonAwtGPoint2D *) nil_chk(p1A)) getX], [((GeogebraCommonAwtGPoint2D *) nil_chk(p2B)) getX]) && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([p1A getY], [p2B getY]) && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([((GeogebraCommonAwtGPoint2D *) nil_chk(p2A)) getX], [((GeogebraCommonAwtGPoint2D *) nil_chk(p1B)) getX]) && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([p2A getY], [p1B getY])) {
    return 0;
  }
  if (GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([p1A getX], [((GeogebraCommonAwtGPoint2D *) nil_chk(p1B)) getX]) && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([p1A getY], [p1B getY]) && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([((GeogebraCommonAwtGPoint2D *) nil_chk(p2A)) getX], [p2B getX]) && GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_([p2A getY], [p2B getY])) {
    return 0;
  }
  return [itemA lengthSquared] > [itemB lengthSquared] ? -1 : 1;
}

- (instancetype)init {
  GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1_init(self);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "compareWithId:withId:", "compare", "I", 0x1, NULL, NULL },
    { "init", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation", "getComparator" };
  static const J2ObjcClassInfo _GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1 = { 2, "", "geogebra.common.kernel.discrete", "AlgoDelauneyTriangulation", 0x8008, 2, methods, 0, NULL, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Ljava/util/Comparator<Lgeogebra/common/kernel/discrete/MyLine;>;" };
  return &_GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1;
}

@end

void GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1_init(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1 *self) {
  NSObject_init(self);
}

GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1 *new_GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1_init() {
  GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1 *self = [GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1 alloc];
  GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1_init(self);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelDiscreteAlgoDelauneyTriangulation_$1)
