//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/discrete/delaunay/Delaunay_Triangulation.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/discrete/delaunay/BoundingBox.h"
#include "geogebra/common/kernel/discrete/delaunay/Circle_dt.h"
#include "geogebra/common/kernel/discrete/delaunay/Delaunay_Triangulation.h"
#include "geogebra/common/kernel/discrete/delaunay/Point_dt.h"
#include "geogebra/common/kernel/discrete/delaunay/Triangle_dt.h"
#include "java/io/PrintStream.h"
#include "java/lang/RuntimeException.h"
#include "java/lang/System.h"
#include "java/util/Comparator.h"
#include "java/util/HashSet.h"
#include "java/util/Iterator.h"
#include "java/util/Set.h"
#include "java/util/TreeSet.h"
#include "java/util/Vector.h"

@interface GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation () {
 @public
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *firstP_;
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *lastP_;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *firstT_, *lastT_, *currT_;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *startTriangle_;
  jint nPoints_;
  id<JavaUtilSet> _vertices_;
  JavaUtilVector *_triangles_;
  JavaUtilVector *deletedTriangles_;
  JavaUtilVector *addedTriangles_;
  jint _modCount_, _modCount2_;
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *_bb_min_, *_bb_max_;
}

- (void)deleteUpdateWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)pointToDelete;

- (jboolean)shareSegmentWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t1
                        withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t2;

- (void)updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)addedTriangle
                      withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)deletedTriangle
                         withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)pointToDelete;

- (void)updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)addedTriangle1
                      withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)addedTriangle2;

- (GeogebraCommonKernelDiscreteDelaunayPoint_dt *)findDiagonalWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)triangle
                                                                 withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)point;

- (void)allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)curr
                                                     withJavaUtilVector:(JavaUtilVector *)front
                                                                withInt:(jint)mc;

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)insertPointSimpleWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

- (void)insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p
                                                                withInt:(jint)res;

- (void)startTriangulationWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p1
                          withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p2;

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)extendInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                    withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)treatDegeneracyInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                             withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                     withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)extendcounterclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                          withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)extendclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                   withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

- (void)flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                        withInt:(jint)mc;

+ (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)curr
                                                            withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

+ (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findnext1WithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p
                                                           withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)v;

+ (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findnext2WithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p
                                                           withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)v;

- (JavaUtilVector *)findConnectedVerticesWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)point
                                                                              withBoolean:(jboolean)saveTriangles;

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findTriangleWithJavaUtilVector:(JavaUtilVector *)pointsVec
                                   withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

+ (jdouble)calcDetWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)A
                  withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)B
                  withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)P;

- (void)updateBoundingBoxWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p;

- (void)initTriangles OBJC_METHOD_FAMILY_NONE;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, firstP_, GeogebraCommonKernelDiscreteDelaunayPoint_dt *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, lastP_, GeogebraCommonKernelDiscreteDelaunayPoint_dt *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, firstT_, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, lastT_, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, currT_, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, startTriangle_, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, _vertices_, id<JavaUtilSet>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, _triangles_, JavaUtilVector *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, deletedTriangles_, JavaUtilVector *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, addedTriangles_, JavaUtilVector *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, _bb_min_, GeogebraCommonKernelDiscreteDelaunayPoint_dt *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation, _bb_max_, GeogebraCommonKernelDiscreteDelaunayPoint_dt *)

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_deleteUpdateWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *pointToDelete);

__attribute__((unused)) static jboolean GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_shareSegmentWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t1, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t2);

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *addedTriangle, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *deletedTriangle, GeogebraCommonKernelDiscreteDelaunayPoint_dt *pointToDelete);

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *addedTriangle1, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *addedTriangle2);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayPoint_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findDiagonalWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *triangle, GeogebraCommonKernelDiscreteDelaunayPoint_dt *point);

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withJavaUtilVector_withInt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *curr, JavaUtilVector *front, jint mc);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertPointSimpleWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withInt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p, jint res);

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_startTriangulationWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p1, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p2);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_treatDegeneracyInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendcounterclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withInt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, jint mc);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *curr, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findnext1WithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(GeogebraCommonKernelDiscreteDelaunayPoint_dt *p, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *v);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findnext2WithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(GeogebraCommonKernelDiscreteDelaunayPoint_dt *p, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *v);

__attribute__((unused)) static JavaUtilVector *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findConnectedVerticesWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withBoolean_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *point, jboolean saveTriangles);

__attribute__((unused)) static GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findTriangleWithJavaUtilVector_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, JavaUtilVector *pointsVec, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static jdouble GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_calcDetWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayPoint_dt *A, GeogebraCommonKernelDiscreteDelaunayPoint_dt *B, GeogebraCommonKernelDiscreteDelaunayPoint_dt *P);

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateBoundingBoxWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p);

__attribute__((unused)) static void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initTriangles(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self);

@implementation GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation

- (instancetype)init {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_init(self);
  return self;
}

- (instancetype)initWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray:(IOSObjectArray *)ps {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray_(self, ps);
  return self;
}

- (jint)size {
  if (_vertices_ == nil) {
    return 0;
  }
  return [((id<JavaUtilSet>) nil_chk(_vertices_)) size];
}

- (jint)trianglesSize {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initTriangles(self);
  return [((JavaUtilVector *) nil_chk(_triangles_)) size];
}

- (jint)getModeCounter {
  return self->_modCount_;
}

- (void)insertPointWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  if ([((id<JavaUtilSet>) nil_chk(self->_vertices_)) containsWithId:p]) return;
  _modCount_++;
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateBoundingBoxWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, p);
  [self->_vertices_ addWithId:p];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertPointSimpleWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, p);
  if (t == nil) return;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *tt = t;
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_currT_(self, t);
  do {
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withInt_(self, tt, _modCount_);
    tt = ((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(tt))->canext_;
  }
  while (tt != t && !((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(tt))->halfplane_);
}

- (void)deletePointWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)pointToDelete {
  JavaUtilVector *pointsVec = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findConnectedVerticesWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withBoolean_(self, pointToDelete, YES);
  if (pointsVec == nil) {
    return;
  }
  while ([((JavaUtilVector *) nil_chk(pointsVec)) size] >= 3) {
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *triangle = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findTriangleWithJavaUtilVector_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, pointsVec, pointToDelete);
    [((JavaUtilVector *) nil_chk(addedTriangles_)) addWithId:triangle];
    GeogebraCommonKernelDiscreteDelaunayPoint_dt *p = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findDiagonalWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, triangle, pointToDelete);
    for (GeogebraCommonKernelDiscreteDelaunayPoint_dt * __strong tmpP in pointsVec) {
      if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(tmpP)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:p]) {
        [pointsVec removeElementWithId:tmpP];
        break;
      }
    }
  }
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_deleteUpdateWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, pointToDelete);
  for (GeogebraCommonKernelDiscreteDelaunayTriangle_dt * __strong t in nil_chk(deletedTriangles_)) {
    if (t == startTriangle_) {
      GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_startTriangle_(self, [((JavaUtilVector *) nil_chk(addedTriangles_)) elementAtWithInt:0]);
      break;
    }
  }
  [((JavaUtilVector *) nil_chk(_triangles_)) removeAllWithJavaUtilCollection:deletedTriangles_];
  [_triangles_ addAllWithJavaUtilCollection:addedTriangles_];
  [((id<JavaUtilSet>) nil_chk(_vertices_)) removeWithId:pointToDelete];
  nPoints_ = nPoints_ + [((JavaUtilVector *) nil_chk(addedTriangles_)) size] - [deletedTriangles_ size];
  [addedTriangles_ removeAllElements];
  [deletedTriangles_ removeAllElements];
}

- (GeogebraCommonKernelDiscreteDelaunayPoint_dt *)findClosePointWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)pointToDelete {
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *triangle = [self findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:pointToDelete];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *p1 = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(triangle)) p1];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *p2 = [triangle p2];
  jdouble d1 = [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p1)) distanceWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:pointToDelete];
  jdouble d2 = [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p2)) distanceWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:pointToDelete];
  if ([triangle isHalfplane]) {
    if (d1 <= d2) {
      return p1;
    }
    else {
      return p2;
    }
  }
  else {
    GeogebraCommonKernelDiscreteDelaunayPoint_dt *p3 = [triangle p3];
    jdouble d3 = [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p3)) distanceWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:pointToDelete];
    if (d1 <= d2 && d1 <= d3) {
      return p1;
    }
    else if (d2 <= d1 && d2 <= d3) {
      return p2;
    }
    else {
      return p3;
    }
  }
}

- (void)deleteUpdateWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)pointToDelete {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_deleteUpdateWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, pointToDelete);
}

- (jboolean)shareSegmentWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t1
                        withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t2 {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_shareSegmentWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(self, t1, t2);
}

- (void)updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)addedTriangle
                      withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)deletedTriangle
                         withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)pointToDelete {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, addedTriangle, deletedTriangle, pointToDelete);
}

- (void)updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)addedTriangle1
                      withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)addedTriangle2 {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(self, addedTriangle1, addedTriangle2);
}

- (GeogebraCommonKernelDiscreteDelaunayPoint_dt *)findDiagonalWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)triangle
                                                                 withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)point {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findDiagonalWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, triangle, point);
}

- (IOSObjectArray *)calcVoronoiCellWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)triangle
                                      withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  if (![((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(triangle)) isHalfplane]) {
    JavaUtilVector *neighbors = [self findTriangleNeighborhoodWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:triangle withGeogebraCommonKernelDiscreteDelaunayPoint_dt:p];
    if (neighbors == nil) {
      return nil;
    }
    id<JavaUtilIterator> itn = [((JavaUtilVector *) nil_chk(neighbors)) iterator];
    IOSObjectArray *vertices = [IOSObjectArray arrayWithLength:[neighbors size] type:GeogebraCommonKernelDiscreteDelaunayPoint_dt_class_()];
    jint index = 0;
    while ([((id<JavaUtilIterator>) nil_chk(itn)) hasNext]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt *tmp = [itn next];
      IOSObjectArray_Set(vertices, index++, [((GeogebraCommonKernelDiscreteDelaunayCircle_dt *) nil_chk([((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(tmp)) circumcircle])) Center]);
    }
    return vertices;
  }
  else {
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *halfplane = triangle;
    GeogebraCommonKernelDiscreteDelaunayPoint_dt *third = nil;
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *neighbor = nil;
    if (![((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk([halfplane next_12])) isHalfplane]) {
      neighbor = [halfplane next_12];
    }
    else if (![((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk([halfplane next_23])) isHalfplane]) {
      neighbor = [halfplane next_23];
    }
    else if (![((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk([halfplane next_23])) isHalfplane]) {
      neighbor = [halfplane next_31];
    }
    if (![((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(neighbor)) p1])) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:[halfplane p1]] && ![((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([neighbor p1])) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:[halfplane p2]]) third = [neighbor p1];
    if (![((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([neighbor p2])) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:[halfplane p1]] && ![((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([neighbor p2])) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:[halfplane p2]]) third = [neighbor p2];
    if (![((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([neighbor p3])) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:[halfplane p1]] && ![((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([neighbor p3])) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:[halfplane p2]]) third = [neighbor p3];
    jdouble halfplane_delta = ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([halfplane p1])) y] - [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([halfplane p2])) y]) / ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([halfplane p1])) x] - [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([halfplane p2])) x]);
    jdouble perp_delta = (1.0 / halfplane_delta) * (-1.0);
    jdouble y_orient = halfplane_delta * ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(third)) x] - [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([halfplane p1])) x]) + [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([halfplane p1])) y];
    jboolean above = YES;
    if (y_orient > [third y]) above = NO;
    jdouble sign = 1.0;
    if ((perp_delta < 0 && !above) || (perp_delta > 0 && above)) sign = -1.0;
    GeogebraCommonKernelDiscreteDelaunayPoint_dt *circumcircle = [((GeogebraCommonKernelDiscreteDelaunayCircle_dt *) nil_chk([neighbor circumcircle])) Center];
    jdouble x_cell_line = ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(circumcircle)) x] + (500.0 * sign));
    jdouble y_cell_line = perp_delta * (x_cell_line - [circumcircle x]) + [circumcircle y];
    IOSObjectArray *result = [IOSObjectArray arrayWithLength:2 type:GeogebraCommonKernelDiscreteDelaunayPoint_dt_class_()];
    IOSObjectArray_Set(result, 0, circumcircle);
    IOSObjectArray_SetAndConsume(result, 1, new_GeogebraCommonKernelDiscreteDelaunayPoint_dt_initWithDouble_withDouble_(x_cell_line, y_cell_line));
    return result;
  }
}

- (id<JavaUtilIterator>)getLastUpdatedTriangles {
  JavaUtilVector *tmp = [new_JavaUtilVector_init() autorelease];
  if ([self trianglesSize] > 1) {
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t = currT_;
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withJavaUtilVector_withInt_(self, t, tmp, self->_modCount_);
  }
  return [tmp iterator];
}

- (void)allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)curr
                                                     withJavaUtilVector:(JavaUtilVector *)front
                                                                withInt:(jint)mc {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withJavaUtilVector_withInt_(self, curr, front, mc);
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)insertPointSimpleWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertPointSimpleWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, p);
}

- (void)insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p
                                                                withInt:(jint)res {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withInt_(self, p, res);
}

- (void)startTriangulationWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p1
                          withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p2 {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_startTriangulationWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, p1, p2);
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)extendInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                    withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p);
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)treatDegeneracyInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                             withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_treatDegeneracyInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p);
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                     withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p);
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)extendcounterclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                          withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendcounterclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p);
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)extendclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                                   withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p);
}

- (void)flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)t
                                                        withInt:(jint)mc {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withInt_(self, t, mc);
}

- (jint)CH_size {
  jint ans = 0;
  id<JavaUtilIterator> it = [self CH_vertices_Iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    ans++;
    [it next];
  }
  return ans;
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *searchTriangle = startTriangle_;
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(searchTriangle, p);
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p
                                                      withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)start {
  if (start == nil) start = self->startTriangle_;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *T = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(start, p);
  return T;
}

+ (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)curr
                                                            withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(curr, p);
}

+ (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findnext1WithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p
                                                           withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)v {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findnext1WithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(p, v);
}

+ (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findnext2WithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p
                                                           withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)v {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findnext2WithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(p, v);
}

- (JavaUtilVector *)findConnectedVerticesWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)point
                                                                              withBoolean:(jboolean)saveTriangles {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findConnectedVerticesWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withBoolean_(self, point, saveTriangles);
}

- (JavaUtilVector *)findTriangleNeighborhoodWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)firstTriangle
                                               withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)point {
  JavaUtilVector *triangles = [new_JavaUtilVector_initWithInt_(30) autorelease];
  [triangles addWithId:firstTriangle];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *prevTriangle = nil;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *currentTriangle = firstTriangle;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *nextTriangle = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(currentTriangle)) nextNeighborWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:prevTriangle];
  while (nextTriangle != firstTriangle) {
    if ([((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(nextTriangle)) isHalfplane]) {
      return nil;
    }
    [triangles addWithId:nextTriangle];
    prevTriangle = currentTriangle;
    currentTriangle = nextTriangle;
    nextTriangle = [currentTriangle nextNeighborWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:prevTriangle];
  }
  return triangles;
}

- (GeogebraCommonKernelDiscreteDelaunayTriangle_dt *)findTriangleWithJavaUtilVector:(JavaUtilVector *)pointsVec
                                   withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findTriangleWithJavaUtilVector_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, pointsVec, p);
}

+ (jdouble)calcDetWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)A
                  withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)B
                  withGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)P {
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_calcDetWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(A, B, P);
}

- (jboolean)containsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *tt = [self findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:p];
  return !((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(tt))->halfplane_;
}

- (jboolean)containsWithDouble:(jdouble)x
                    withDouble:(jdouble)y {
  return [self containsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:[new_GeogebraCommonKernelDiscreteDelaunayPoint_dt_initWithDouble_withDouble_(x, y) autorelease]];
}

- (GeogebraCommonKernelDiscreteDelaunayPoint_dt *)zWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)q {
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t = [self findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:q];
  return [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t)) zWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:q];
}

- (jdouble)zWithDouble:(jdouble)x
            withDouble:(jdouble)y {
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *q = [new_GeogebraCommonKernelDiscreteDelaunayPoint_dt_initWithDouble_withDouble_(x, y) autorelease];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t = [self findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:q];
  return [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t)) z_valueWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:q];
}

- (void)updateBoundingBoxWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:(GeogebraCommonKernelDiscreteDelaunayPoint_dt *)p {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateBoundingBoxWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, p);
}

- (GeogebraCommonKernelDiscreteDelaunayBoundingBox *)getBoundingBox {
  return [new_GeogebraCommonKernelDiscreteDelaunayBoundingBox_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(_bb_min_, _bb_max_) autorelease];
}

- (GeogebraCommonKernelDiscreteDelaunayPoint_dt *)minBoundingBox {
  return _bb_min_;
}

- (GeogebraCommonKernelDiscreteDelaunayPoint_dt *)maxBoundingBox {
  return _bb_max_;
}

- (id<JavaUtilIterator>)trianglesIterator {
  if ([self size] <= 2) GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_setAndConsume__triangles_(self, new_JavaUtilVector_init());
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initTriangles(self);
  return [((JavaUtilVector *) nil_chk(_triangles_)) iterator];
}

- (id<JavaUtilIterator>)CH_vertices_Iterator {
  JavaUtilVector *ans = [new_JavaUtilVector_init() autorelease];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *curr = self->startTriangleHull_;
  jboolean cont = YES;
  jdouble x0 = [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(_bb_min_)) x], x1 = [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(_bb_max_)) x];
  jdouble y0 = [_bb_min_ y], y1 = [_bb_max_ y];
  jboolean sx, sy;
  while (cont) {
    sx = ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(curr)) p1])) x] == x0 || [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([curr p1])) x] == x1);
    sy = ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([curr p1])) y] == y0 || [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk([curr p1])) y] == y1);
    if ((sx & sy) | (!sx & !sy)) {
      [ans addWithId:[curr p1]];
    }
    if (curr->bcnext_ != nil && curr->bcnext_->halfplane_) curr = curr->bcnext_;
    if (curr == self->startTriangleHull_) cont = NO;
  }
  return [ans iterator];
}

- (id<JavaUtilIterator>)verticesIterator {
  return [((id<JavaUtilSet>) nil_chk(self->_vertices_)) iterator];
}

- (void)initTriangles {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initTriangles(self);
}

- (void)dealloc {
  RELEASE_(firstP_);
  RELEASE_(lastP_);
  RELEASE_(firstT_);
  RELEASE_(lastT_);
  RELEASE_(currT_);
  RELEASE_(startTriangle_);
  RELEASE_(startTriangleHull_);
  RELEASE_(_vertices_);
  RELEASE_(_triangles_);
  RELEASE_(deletedTriangles_);
  RELEASE_(addedTriangles_);
  RELEASE_(_bb_min_);
  RELEASE_(_bb_max_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "Delaunay_Triangulation", NULL, 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray:", "Delaunay_Triangulation", NULL, 0x1, NULL, NULL },
    { "size", NULL, "I", 0x1, NULL, NULL },
    { "trianglesSize", NULL, "I", 0x1, NULL, NULL },
    { "getModeCounter", NULL, "I", 0x1, NULL, NULL },
    { "insertPointWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "insertPoint", "V", 0x1, NULL, NULL },
    { "deletePointWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "deletePoint", "V", 0x1, NULL, NULL },
    { "findClosePointWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "findClosePoint", "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", 0x1, NULL, NULL },
    { "deleteUpdateWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "deleteUpdate", "V", 0x2, NULL, NULL },
    { "shareSegmentWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:", "shareSegment", "Z", 0x2, NULL, NULL },
    { "updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "updateNeighbor", "V", 0x2, NULL, NULL },
    { "updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:", "updateNeighbor", "V", 0x2, NULL, NULL },
    { "findDiagonalWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "findDiagonal", "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", 0x2, NULL, NULL },
    { "calcVoronoiCellWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "calcVoronoiCell", "[Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", 0x1, NULL, NULL },
    { "getLastUpdatedTriangles", NULL, "Ljava.util.Iterator;", 0x1, NULL, NULL },
    { "allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withJavaUtilVector:withInt:", "allTriangles", "V", 0x2, NULL, NULL },
    { "insertPointSimpleWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "insertPointSimple", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x2, NULL, NULL },
    { "insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:withInt:", "insertCollinear", "V", 0x2, NULL, NULL },
    { "startTriangulationWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "startTriangulation", "V", 0x2, NULL, NULL },
    { "extendInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "extendInside", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x2, NULL, NULL },
    { "treatDegeneracyInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "treatDegeneracyInside", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x2, NULL, NULL },
    { "extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "extendOutside", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x2, NULL, NULL },
    { "extendcounterclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "extendcounterclock", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x2, NULL, NULL },
    { "extendclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "extendclock", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x2, NULL, NULL },
    { "flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withInt:", "flip", "V", 0x2, NULL, NULL },
    { "CH_size", NULL, "I", 0x1, NULL, NULL },
    { "findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "find", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x1, NULL, NULL },
    { "findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:", "find", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x1, NULL, NULL },
    { "findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "find", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0xa, NULL, NULL },
    { "findnext1WithGeogebraCommonKernelDiscreteDelaunayPoint_dt:withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:", "findnext1", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0xa, NULL, NULL },
    { "findnext2WithGeogebraCommonKernelDiscreteDelaunayPoint_dt:withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:", "findnext2", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0xa, NULL, NULL },
    { "findConnectedVerticesWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:withBoolean:", "findConnectedVertices", "Ljava.util.Vector;", 0x2, NULL, NULL },
    { "findTriangleNeighborhoodWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "findTriangleNeighborhood", "Ljava.util.Vector;", 0x1, NULL, NULL },
    { "findTriangleWithJavaUtilVector:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "findTriangle", "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", 0x2, NULL, NULL },
    { "calcDetWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:withGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "calcDet", "D", 0xa, NULL, NULL },
    { "containsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "contains", "Z", 0x1, NULL, NULL },
    { "containsWithDouble:withDouble:", "contains", "Z", 0x1, NULL, NULL },
    { "zWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "z", "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", 0x1, NULL, NULL },
    { "zWithDouble:withDouble:", "z", "D", 0x1, NULL, NULL },
    { "updateBoundingBoxWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:", "updateBoundingBox", "V", 0x2, NULL, NULL },
    { "getBoundingBox", NULL, "Lgeogebra.common.kernel.discrete.delaunay.BoundingBox;", 0x1, NULL, NULL },
    { "minBoundingBox", NULL, "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", 0x1, NULL, NULL },
    { "maxBoundingBox", NULL, "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", 0x1, NULL, NULL },
    { "trianglesIterator", NULL, "Ljava.util.Iterator;", 0x1, NULL, NULL },
    { "CH_vertices_Iterator", NULL, "Ljava.util.Iterator;", 0x1, NULL, NULL },
    { "verticesIterator", NULL, "Ljava.util.Iterator;", 0x1, NULL, NULL },
    { "initTriangles", NULL, "V", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "firstP_", NULL, 0x2, "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", NULL, NULL,  },
    { "lastP_", NULL, 0x2, "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", NULL, NULL,  },
    { "allCollinear_", NULL, 0x1, "Z", NULL, NULL,  },
    { "firstT_", NULL, 0x2, "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", NULL, NULL,  },
    { "lastT_", NULL, 0x2, "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", NULL, NULL,  },
    { "currT_", NULL, 0x2, "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", NULL, NULL,  },
    { "startTriangle_", NULL, 0x2, "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", NULL, NULL,  },
    { "startTriangleHull_", NULL, 0x1, "Lgeogebra.common.kernel.discrete.delaunay.Triangle_dt;", NULL, NULL,  },
    { "nPoints_", NULL, 0x2, "I", NULL, NULL,  },
    { "_vertices_", NULL, 0x2, "Ljava.util.Set;", NULL, "Ljava/util/Set<Lgeogebra/common/kernel/discrete/delaunay/Point_dt;>;",  },
    { "_triangles_", NULL, 0x2, "Ljava.util.Vector;", NULL, "Ljava/util/Vector<Lgeogebra/common/kernel/discrete/delaunay/Triangle_dt;>;",  },
    { "deletedTriangles_", NULL, 0x2, "Ljava.util.Vector;", NULL, "Ljava/util/Vector<Lgeogebra/common/kernel/discrete/delaunay/Triangle_dt;>;",  },
    { "addedTriangles_", NULL, 0x2, "Ljava.util.Vector;", NULL, "Ljava/util/Vector<Lgeogebra/common/kernel/discrete/delaunay/Triangle_dt;>;",  },
    { "_modCount_", NULL, 0x2, "I", NULL, NULL,  },
    { "_modCount2_", NULL, 0x2, "I", NULL, NULL,  },
    { "_bb_min_", NULL, 0x2, "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", NULL, NULL,  },
    { "_bb_max_", NULL, 0x2, "Lgeogebra.common.kernel.discrete.delaunay.Point_dt;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation = { 2, "Delaunay_Triangulation", "geogebra.common.kernel.discrete.delaunay", NULL, 0x1, 47, methods, 17, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation;
}

@end

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_init(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self) {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray_(self, [IOSObjectArray arrayWithObjects:(id[]){  } count:0 type:GeogebraCommonKernelDiscreteDelaunayPoint_dt_class_()]);
}

GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *new_GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_init() {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self = [GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation alloc];
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_init(self);
  return self;
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, IOSObjectArray *ps) {
  NSObject_init(self);
  self->nPoints_ = 0;
  self->_modCount_ = 0;
  self->_modCount2_ = 0;
  self->_modCount_ = 0;
  self->_modCount2_ = 0;
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set__bb_min_(self, nil);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set__bb_max_(self, nil);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_setAndConsume__vertices_(self, new_JavaUtilTreeSet_initWithJavaUtilComparator_(GeogebraCommonKernelDiscreteDelaunayPoint_dt_getComparator()));
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_setAndConsume__triangles_(self, new_JavaUtilVector_init());
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_deletedTriangles_(self, nil);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_setAndConsume_addedTriangles_(self, new_JavaUtilVector_init());
  self->allCollinear_ = YES;
  for (jint i = 0; ps != nil && i < ps->size_ && IOSObjectArray_Get(ps, i) != nil; i++) {
    [self insertPointWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:IOSObjectArray_Get(nil_chk(ps), i)];
  }
}

GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *new_GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray_(IOSObjectArray *ps) {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self = [GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation alloc];
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray_(self, ps);
  return self;
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_deleteUpdateWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *pointToDelete) {
  for (GeogebraCommonKernelDiscreteDelaunayTriangle_dt * __strong addedTriangle1 in nil_chk(self->addedTriangles_)) {
    for (GeogebraCommonKernelDiscreteDelaunayTriangle_dt * __strong deletedTriangle in nil_chk(self->deletedTriangles_)) {
      if (GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_shareSegmentWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(self, addedTriangle1, deletedTriangle)) {
        GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, addedTriangle1, deletedTriangle, pointToDelete);
      }
    }
  }
  for (GeogebraCommonKernelDiscreteDelaunayTriangle_dt * __strong addedTriangle1 in self->addedTriangles_) {
    for (GeogebraCommonKernelDiscreteDelaunayTriangle_dt * __strong addedTriangle2 in self->addedTriangles_) {
      if ((addedTriangle1 != addedTriangle2) && (GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_shareSegmentWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(self, addedTriangle1, addedTriangle2))) {
        GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(self, addedTriangle1, addedTriangle2);
      }
    }
  }
}

jboolean GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_shareSegmentWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t1, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t2) {
  jint counter = 0;
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *t1P1 = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t1)) p1];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *t1P2 = [t1 p2];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *t1P3 = [t1 p3];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *t2P1 = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t2)) p1];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *t2P2 = [t2 p2];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *t2P3 = [t2 p3];
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(t1P1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P1]) {
    counter++;
  }
  if ([t1P1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P2]) {
    counter++;
  }
  if ([t1P1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P3]) {
    counter++;
  }
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(t1P2)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P1]) {
    counter++;
  }
  if ([t1P2 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P2]) {
    counter++;
  }
  if ([t1P2 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P3]) {
    counter++;
  }
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(t1P3)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P1]) {
    counter++;
  }
  if ([t1P3 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P2]) {
    counter++;
  }
  if ([t1P3 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t2P3]) {
    counter++;
  }
  if (counter >= 2) return YES;
  else return NO;
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *addedTriangle, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *deletedTriangle, GeogebraCommonKernelDiscreteDelaunayPoint_dt *pointToDelete) {
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *delA = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(deletedTriangle)) p1];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *delB = [deletedTriangle p2];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *delC = [deletedTriangle p3];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *addA = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(addedTriangle)) p1];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *addB = [addedTriangle p2];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *addC = [addedTriangle p3];
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(pointToDelete)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA]) {
    [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk([deletedTriangle next_23])) switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:deletedTriangle withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:addedTriangle];
    if (([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addA)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB] && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addB)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delC]) || ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addB)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB] && [addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delC])) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle, [deletedTriangle next_23]);
    }
    else if (([addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB] && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addC)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delC]) || ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addC)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB] && [addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delC])) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle, [deletedTriangle next_23]);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle, [deletedTriangle next_23]);
    }
  }
  else if ([pointToDelete equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB]) {
    [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk([deletedTriangle next_31])) switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:deletedTriangle withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:addedTriangle];
    if (([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addA)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA] && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addB)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delC]) || ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addB)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA] && [addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delC])) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle, [deletedTriangle next_31]);
    }
    else if (([addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA] && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addC)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delC]) || ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addC)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA] && [addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delC])) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle, [deletedTriangle next_31]);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle, [deletedTriangle next_31]);
    }
  }
  else {
    [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk([deletedTriangle next_12])) switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:deletedTriangle withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:addedTriangle];
    if (([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addA)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA] && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addB)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB]) || ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addB)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA] && [addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB])) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle, [deletedTriangle next_12]);
    }
    else if (([addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA] && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addC)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB]) || ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(addC)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delA] && [addA equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:delB])) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle, [deletedTriangle next_12]);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle, [deletedTriangle next_12]);
    }
  }
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateNeighborWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *addedTriangle1, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *addedTriangle2) {
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *A1 = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(addedTriangle1)) p1];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *B1 = [addedTriangle1 p2];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *C1 = [addedTriangle1 p3];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *A2 = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(addedTriangle2)) p1];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *B2 = [addedTriangle2 p2];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *C2 = [addedTriangle2 p3];
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(A1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
    if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(B1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else if ([B1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    else if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(C1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
  }
  else if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
    if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(B1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else if ([B1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
    else if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(C1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
  }
  else if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
    if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(B1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    if ([B1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
    if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(C1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
  }
  else if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(B1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
    if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    else if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(C1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
  }
  else if ([B1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
    if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
    else if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(C1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
  }
  else if ([B1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
    if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
    if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(C1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
  }
  else if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(C1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
    if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    else if ([B1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
  }
  else if ([C1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
    if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
    else if ([B1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
  }
  else if ([C1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:C2]) {
    if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    if ([A1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:B2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
    if ([B1 equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:A2]) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(addedTriangle2, addedTriangle1);
    }
    else {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle1, addedTriangle2);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(addedTriangle2, addedTriangle1);
    }
  }
}

GeogebraCommonKernelDiscreteDelaunayPoint_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findDiagonalWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *triangle, GeogebraCommonKernelDiscreteDelaunayPoint_dt *point) {
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *p1 = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(triangle)) p1];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *p2 = [triangle p2];
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *p3 = [triangle p3];
  if (([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p1)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point withGeogebraCommonKernelDiscreteDelaunayPoint_dt:p3] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_LEFT) && ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p2)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point withGeogebraCommonKernelDiscreteDelaunayPoint_dt:p3] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT)) return p3;
  if (([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p3)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point withGeogebraCommonKernelDiscreteDelaunayPoint_dt:p2] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_LEFT) && ([p1 pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point withGeogebraCommonKernelDiscreteDelaunayPoint_dt:p2] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT)) return p2;
  if (([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p2)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point withGeogebraCommonKernelDiscreteDelaunayPoint_dt:p1] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_LEFT) && ([p3 pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point withGeogebraCommonKernelDiscreteDelaunayPoint_dt:p1] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT)) return p1;
  return nil;
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withJavaUtilVector_withInt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *curr, JavaUtilVector *front, jint mc) {
  if (curr != nil && curr->_mc_ == mc && ![((JavaUtilVector *) nil_chk(front)) containsWithId:curr]) {
    [front addWithId:curr];
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withJavaUtilVector_withInt_(self, curr->abnext_, front, mc);
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withJavaUtilVector_withInt_(self, curr->bcnext_, front, mc);
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_allTrianglesWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withJavaUtilVector_withInt_(self, curr->canext_, front, mc);
  }
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertPointSimpleWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  self->nPoints_++;
  if (!self->allCollinear_) {
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self->startTriangle_, p);
    if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t))->halfplane_) GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_startTriangle_(self, GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p));
    else GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_startTriangle_(self, GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p));
    return self->startTriangle_;
  }
  if (self->nPoints_ == 1) {
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_firstP_(self, p);
    return nil;
  }
  if (self->nPoints_ == 2) {
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_startTriangulationWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, self->firstP_, p);
    return nil;
  }
  switch ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:self->firstP_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:self->lastP_]) {
    case GeogebraCommonKernelDiscreteDelaunayPoint_dt_LEFT:
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_startTriangle_(self, GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, ((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(self->firstT_))->abnext_, p));
    self->allCollinear_ = NO;
    break;
    case GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT:
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_startTriangle_(self, GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, self->firstT_, p));
    self->allCollinear_ = NO;
    break;
    case GeogebraCommonKernelDiscreteDelaunayPoint_dt_ONSEGMENT:
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withInt_(self, p, GeogebraCommonKernelDiscreteDelaunayPoint_dt_ONSEGMENT);
    break;
    case GeogebraCommonKernelDiscreteDelaunayPoint_dt_INFRONTOFA:
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withInt_(self, p, GeogebraCommonKernelDiscreteDelaunayPoint_dt_INFRONTOFA);
    break;
    case GeogebraCommonKernelDiscreteDelaunayPoint_dt_BEHINDB:
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withInt_(self, p, GeogebraCommonKernelDiscreteDelaunayPoint_dt_BEHINDB);
    break;
  }
  return nil;
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_insertCollinearWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withInt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p, jint res) {
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, *tp, *u;
  switch (res) {
    case GeogebraCommonKernelDiscreteDelaunayPoint_dt_INFRONTOFA:
    t = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self->firstP_, p) autorelease];
    tp = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p, self->firstP_) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(t, tp);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(tp, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(t, tp);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(tp, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(t, self->firstT_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(nil_chk(self->firstT_), t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(tp, self->firstT_->abnext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(self->firstT_->abnext_, tp);
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_firstT_(self, t);
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_firstP_(self, p);
    break;
    case GeogebraCommonKernelDiscreteDelaunayPoint_dt_BEHINDB:
    t = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p, self->lastP_) autorelease];
    tp = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self->lastP_, p) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(t, tp);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(tp, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(t, self->lastT_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(nil_chk(self->lastT_), t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(t, tp);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(tp, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(tp, self->lastT_->abnext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(self->lastT_->abnext_, tp);
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_lastT_(self, t);
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_lastP_(self, p);
    break;
    case GeogebraCommonKernelDiscreteDelaunayPoint_dt_ONSEGMENT:
    u = self->firstT_;
    while ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) isGreaterWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(u))->a_]) u = u->canext_;
    t = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p, ((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(u))->b_) autorelease];
    tp = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(u->b_, p) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_b_(u, p);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_a_(nil_chk(u->abnext_), p);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(t, tp);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(tp, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(t, u->bcnext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(nil_chk(u->bcnext_), t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(t, u);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(u, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(tp, u->abnext_->canext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(u->abnext_->canext_, tp);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(tp, u->abnext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(u->abnext_, tp);
    if (self->firstT_ == u) {
      GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_firstT_(self, t);
    }
    break;
  }
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_startTriangulationWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p1, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p2) {
  GeogebraCommonKernelDiscreteDelaunayPoint_dt *ps, *pb;
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p1)) isLessWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:p2]) {
    ps = p1;
    pb = p2;
  }
  else {
    ps = p2;
    pb = p1;
  }
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_setAndConsume_firstT_(self, new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(pb, ps));
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_lastT_(self, self->firstT_);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(ps, pb) autorelease];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(self->firstT_, t);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(t, self->firstT_);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(self->firstT_, t);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(t, self->firstT_);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(self->firstT_, t);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(t, self->firstT_);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_firstP_(self, self->firstT_->b_);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_lastP_(self, self->lastT_->a_);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_startTriangleHull_(self, self->firstT_);
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *h1, *h2;
  h1 = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_treatDegeneracyInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p);
  if (h1 != nil) return h1;
  h1 = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t))->c_, t->a_, p) autorelease];
  h2 = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(t->b_, t->c_, p) autorelease];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_c_(t, p);
  [t circumcircle];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(h1, t->canext_);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(h1, t);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(h1, h2);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(h2, t->bcnext_);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(h2, h1);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(h2, t);
  [h1->abnext_ switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:t withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:h1];
  [h2->abnext_ switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:t withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:h2];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(t, h2);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(t, h1);
  return t;
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_treatDegeneracyInsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t))->abnext_))->halfplane_ && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t->b_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:t->a_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_ONSEGMENT) return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t->abnext_, p);
  if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t->bcnext_))->halfplane_ && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t->c_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:t->b_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_ONSEGMENT) return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t->bcnext_, p);
  if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t->canext_))->halfplane_ && [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t->a_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:t->c_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_ONSEGMENT) return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t->canext_, p);
  return nil;
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendOutsideWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t))->a_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:t->b_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_ONSEGMENT) {
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *dg = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(t->a_, t->b_, p) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *hp = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p, t->b_) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_b_(t, p);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(dg, t->abnext_);
    [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(dg->abnext_)) switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:t withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:dg];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(dg, hp);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(hp, dg);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(dg, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(t, dg);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(hp, t->bcnext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(hp->bcnext_, hp);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(hp, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(t, hp);
    return dg;
  }
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *ccT = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendcounterclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *cT = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, t, p);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(nil_chk(ccT), cT);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(nil_chk(cT), ccT);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_startTriangleHull_(self, cT);
  return cT->abnext_;
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendcounterclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  ((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t))->halfplane_ = NO;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_c_(t, p);
  [t circumcircle];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *tca = t->canext_;
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(tca))->a_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:tca->b_] >= GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT) {
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *nT = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(t->a_, p) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(nT, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(t, nT);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(nT, tca);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(tca, nT);
    return nT;
  }
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendcounterclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, tca, p);
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  ((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t))->halfplane_ = NO;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_c_(t, p);
  [t circumcircle];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *tbc = t->bcnext_;
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(tbc))->a_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:tbc->b_] >= GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT) {
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt *nT = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p, t->b_) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(nT, t);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(t, nT);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(nT, tbc);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(tbc, nT);
    return nT;
  }
  return GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_extendclockWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(self, tbc, p);
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withInt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t, jint mc) {
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *u = ((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t))->abnext_, *v;
  t->_mc_ = mc;
  if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(u))->halfplane_ || ![u circumcircle_containsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:t->c_]) return;
  if (t->a_ == u->a_) {
    v = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(u->b_, t->b_, t->c_) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(v, u->bcnext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(t, u->abnext_);
  }
  else if (t->a_ == u->b_) {
    v = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(u->c_, t->b_, t->c_) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(v, u->canext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(t, u->bcnext_);
  }
  else if (t->a_ == u->c_) {
    v = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(u->a_, t->b_, t->c_) autorelease];
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(v, u->abnext_);
    GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_abnext_(t, u->canext_);
  }
  else {
    @throw [new_JavaLangRuntimeException_initWithNSString_(@"Error in flip.") autorelease];
  }
  ((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(v))->_mc_ = mc;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(v, t->bcnext_);
  [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(v->abnext_)) switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:u withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:v];
  [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(v->bcnext_)) switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:t withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:v];
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_bcnext_(t, v);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_canext_(v, t);
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt_set_b_(t, v->a_);
  [t->abnext_ switchneighborsWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:u withGeogebraCommonKernelDiscreteDelaunayTriangle_dt:t];
  [t circumcircle];
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_currT_(self, v);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withInt_(self, t, mc);
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_flipWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withInt_(self, v, mc);
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayTriangle_dt *curr, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initialize();
  if (p == nil) return nil;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *next_t;
  if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(curr))->halfplane_) {
    next_t = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findnext2WithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(p, curr);
    if (next_t == nil || next_t->halfplane_) return curr;
    curr = next_t;
  }
  while (YES) {
    next_t = GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findnext1WithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(p, curr);
    if (next_t == nil) return curr;
    if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(next_t))->halfplane_) return next_t;
    curr = next_t;
  }
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findnext1WithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(GeogebraCommonKernelDiscreteDelaunayPoint_dt *p, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *v) {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initialize();
  if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(v))->a_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->b_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT && !((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(v->abnext_))->halfplane_) return v->abnext_;
  if ([p pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->b_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->c_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT && !((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(v->bcnext_))->halfplane_) return v->bcnext_;
  if ([p pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->c_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->a_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT && !((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(v->canext_))->halfplane_) return v->canext_;
  if ([p pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->a_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->b_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT) return v->abnext_;
  if ([p pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->b_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->c_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT) return v->bcnext_;
  if ([p pointLineTestWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->c_ withGeogebraCommonKernelDiscreteDelaunayPoint_dt:v->a_] == GeogebraCommonKernelDiscreteDelaunayPoint_dt_RIGHT) return v->canext_;
  return nil;
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findnext2WithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayTriangle_dt_(GeogebraCommonKernelDiscreteDelaunayPoint_dt *p, GeogebraCommonKernelDiscreteDelaunayTriangle_dt *v) {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initialize();
  if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(v))->abnext_ != nil && !v->abnext_->halfplane_) return v->abnext_;
  if (v->bcnext_ != nil && !v->bcnext_->halfplane_) return v->bcnext_;
  if (v->canext_ != nil && !v->canext_->halfplane_) return v->canext_;
  return nil;
}

JavaUtilVector *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findConnectedVerticesWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withBoolean_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *point, jboolean saveTriangles) {
  id<JavaUtilSet> pointsSet = [new_JavaUtilHashSet_init() autorelease];
  JavaUtilVector *pointsVec = [new_JavaUtilVector_init() autorelease];
  JavaUtilVector *triangles = nil;
  GeogebraCommonKernelDiscreteDelaunayTriangle_dt *triangle = [self findWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point];
  if (![((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(triangle)) isCornerWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point]) {
    [((JavaIoPrintStream *) nil_chk(JavaLangSystem_get_err_())) printlnWithNSString:@"findConnectedVertices: Could not find connected vertices since the first found triangle doesn't share the given point."];
    return nil;
  }
  triangles = [self findTriangleNeighborhoodWithGeogebraCommonKernelDiscreteDelaunayTriangle_dt:triangle withGeogebraCommonKernelDiscreteDelaunayPoint_dt:point];
  if (triangles == nil) {
    [((JavaIoPrintStream *) nil_chk(JavaLangSystem_get_err_())) printlnWithNSString:@"Error: can't delete a point on the perimeter"];
    return nil;
  }
  if (saveTriangles) {
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_set_deletedTriangles_(self, triangles);
  }
  for (GeogebraCommonKernelDiscreteDelaunayTriangle_dt * __strong tmpTriangle in nil_chk(triangles)) {
    GeogebraCommonKernelDiscreteDelaunayPoint_dt *point1 = [((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(tmpTriangle)) p1];
    GeogebraCommonKernelDiscreteDelaunayPoint_dt *point2 = [tmpTriangle p2];
    GeogebraCommonKernelDiscreteDelaunayPoint_dt *point3 = [tmpTriangle p3];
    if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(point1)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point] && ![pointsSet containsWithId:point2]) {
      [pointsSet addWithId:point2];
      [pointsVec addWithId:point2];
    }
    if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(point2)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point] && ![pointsSet containsWithId:point3]) {
      [pointsSet addWithId:point3];
      [pointsVec addWithId:point3];
    }
    if ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(point3)) equalsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:point] && ![pointsSet containsWithId:point1]) {
      [pointsSet addWithId:point1];
      [pointsVec addWithId:point1];
    }
  }
  return pointsVec;
}

GeogebraCommonKernelDiscreteDelaunayTriangle_dt *GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_findTriangleWithJavaUtilVector_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, JavaUtilVector *pointsVec, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  IOSObjectArray *arrayPoints = [IOSObjectArray arrayWithLength:[((JavaUtilVector *) nil_chk(pointsVec)) size] type:GeogebraCommonKernelDiscreteDelaunayPoint_dt_class_()];
  [pointsVec toArrayWithNSObjectArray:arrayPoints];
  jint size = arrayPoints->size_;
  if (size < 3) {
    return nil;
  }
  else if (size == 3) {
    return [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(IOSObjectArray_Get(arrayPoints, 0), IOSObjectArray_Get(arrayPoints, 1), IOSObjectArray_Get(arrayPoints, 2)) autorelease];
  }
  else {
    for (jint i = 0; i <= size - 1; i++) {
      GeogebraCommonKernelDiscreteDelaunayPoint_dt *p1 = IOSObjectArray_Get(arrayPoints, i);
      jint j = i + 1;
      jint k = i + 2;
      if (j >= size) {
        j = 0;
        k = 1;
      }
      else if (k >= size) k = 0;
      GeogebraCommonKernelDiscreteDelaunayPoint_dt *p2 = IOSObjectArray_Get(arrayPoints, j);
      GeogebraCommonKernelDiscreteDelaunayPoint_dt *p3 = IOSObjectArray_Get(arrayPoints, k);
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t = [new_GeogebraCommonKernelDiscreteDelaunayTriangle_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p1, p2, p3) autorelease];
      if ((GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_calcDetWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p1, p2, p3) >= 0) && ![t containsWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:p]) {
        if (![t fallInsideCircumcircleWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray:arrayPoints]) return t;
      }
      if (size == 4 && (GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_calcDetWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p1, p2, p3) >= 0) && ![t contains_BoundaryIsOutsideWithGeogebraCommonKernelDiscreteDelaunayPoint_dt:p]) {
        if (![t fallInsideCircumcircleWithGeogebraCommonKernelDiscreteDelaunayPoint_dtArray:arrayPoints]) return t;
      }
    }
  }
  return nil;
}

jdouble GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_calcDetWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_withGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayPoint_dt *A, GeogebraCommonKernelDiscreteDelaunayPoint_dt *B, GeogebraCommonKernelDiscreteDelaunayPoint_dt *P) {
  GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initialize();
  return ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(A)) x] * ([((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(B)) y] - [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(P)) y])) - ([A y] * ([B x] - [P x])) + ([B x] * [P y] - [B y] * [P x]);
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_updateBoundingBoxWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self, GeogebraCommonKernelDiscreteDelaunayPoint_dt *p) {
  jdouble x = [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(p)) x], y = [p y], z = [p z];
  if (self->_bb_min_ == nil) {
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_setAndConsume__bb_min_(self, new_GeogebraCommonKernelDiscreteDelaunayPoint_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p));
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_setAndConsume__bb_max_(self, new_GeogebraCommonKernelDiscreteDelaunayPoint_dt_initWithGeogebraCommonKernelDiscreteDelaunayPoint_dt_(p));
  }
  else {
    if (x < [self->_bb_min_ x]) self->_bb_min_->x__ = x;
    else if (x > [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(self->_bb_max_)) x]) self->_bb_max_->x__ = x;
    if (y < self->_bb_min_->y__) self->_bb_min_->y__ = y;
    else if (y > [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(self->_bb_max_)) y]) self->_bb_max_->y__ = y;
    if (z < self->_bb_min_->z__) self->_bb_min_->z__ = z;
    else if (z > [((GeogebraCommonKernelDiscreteDelaunayPoint_dt *) nil_chk(self->_bb_max_)) z]) self->_bb_max_->z__ = z;
  }
}

void GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_initTriangles(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation *self) {
  if (self->_modCount_ == self->_modCount2_) return;
  if ([self size] > 2) {
    self->_modCount2_ = self->_modCount_;
    JavaUtilVector *front = [new_JavaUtilVector_init() autorelease];
    GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation_setAndConsume__triangles_(self, new_JavaUtilVector_init());
    [front addWithId:self->startTriangle_];
    while ([front size] > 0) {
      GeogebraCommonKernelDiscreteDelaunayTriangle_dt *t = [front removeWithInt:0];
      if (((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk(t))->_mark_ == NO) {
        t->_mark_ = YES;
        [self->_triangles_ addWithId:t];
        if (t->abnext_ != nil && !t->abnext_->_mark_) {
          [front addWithId:t->abnext_];
        }
        if (t->bcnext_ != nil && !t->bcnext_->_mark_) {
          [front addWithId:t->bcnext_];
        }
        if (t->canext_ != nil && !t->canext_->_mark_) {
          [front addWithId:t->canext_];
        }
      }
    }
    for (jint i = 0; i < [self->_triangles_ size]; i++) {
      ((GeogebraCommonKernelDiscreteDelaunayTriangle_dt *) nil_chk([self->_triangles_ elementAtWithInt:i]))->_mark_ = NO;
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelDiscreteDelaunayDelaunay_Triangulation)
