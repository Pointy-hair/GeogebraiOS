//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/geogebra3D/kernel3D/geos/GeoConicSection.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/geogebra3D/kernel3D/geos/GeoConic3D.h"
#include "geogebra/common/geogebra3D/kernel3D/geos/GeoConicSection.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/Matrix/Coords.h"
#include "geogebra/common/kernel/PathNormalizer.h"
#include "geogebra/common/kernel/PathParameter.h"
#include "geogebra/common/kernel/geos/GeoVec2D.h"
#include "geogebra/common/kernel/kernelND/GeoConicND.h"
#include "geogebra/common/kernel/kernelND/GeoConicNDConstants.h"
#include "geogebra/common/kernel/kernelND/GeoQuadricND.h"
#include "geogebra/common/plugin/GeoClass.h"
#include "geogebra/common/util/MyMath.h"
#include "java/lang/Comparable.h"
#include "java/lang/Double.h"
#include "java/lang/Math.h"
#include "java/util/TreeSet.h"

@interface GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection () {
 @public
  IOSDoubleArray *paramStart_, *paramEnd_, *paramExtent_;
  IOSDoubleArray *edgeStartX_, *edgeStartY_, *edgeEndX_, *edgeEndY_, *edgeStartParam_, *edgeEndParam_;
  IOSBooleanArray *edgeExists_;
  JavaUtilTreeSet *parametersTree_;
  IOSObjectArray *parametersArray_;
}

- (void)sortParameters;

+ (void)setInfParameterWithDoubleArray:(IOSDoubleArray *)param
                            withDouble:(jdouble)value;

- (jboolean)isInsideEdgesWithDouble:(jdouble)x0
                         withDouble:(jdouble)y0;

+ (jdouble)getParameterOnSegmentWithDouble:(jdouble)x
                                withDouble:(jdouble)y
                                withDouble:(jdouble)startX
                                withDouble:(jdouble)startY
                                withDouble:(jdouble)endX
                                withDouble:(jdouble)endY;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, paramStart_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, paramEnd_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, paramExtent_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, edgeStartX_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, edgeStartY_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, edgeEndX_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, edgeEndY_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, edgeStartParam_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, edgeEndParam_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, edgeExists_, IOSBooleanArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, parametersTree_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection, parametersArray_, IOSObjectArray *)

__attribute__((unused)) static void GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_sortParameters(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *self);

__attribute__((unused)) static void GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setInfParameterWithDoubleArray_withDouble_(IOSDoubleArray *param, jdouble value);

__attribute__((unused)) static jboolean GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_isInsideEdgesWithDouble_withDouble_(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *self, jdouble x0, jdouble y0);

__attribute__((unused)) static jdouble GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_getParameterOnSegmentWithDouble_withDouble_withDouble_withDouble_withDouble_withDouble_(jdouble x, jdouble y, jdouble startX, jdouble startY, jdouble endX, jdouble endY);

@interface GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter : NSObject < JavaLangComparable > {
 @public
  jdouble value_;
  jint index_;
}

- (instancetype)initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection:(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *)outer$
                                                                 withDouble:(jdouble)value
                                                                    withInt:(jint)index;

- (jint)compareToWithId:(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *)parameter;

@end

J2OBJC_EMPTY_STATIC_INIT(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter)

__attribute__((unused)) static void GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *self, GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *outer$, jdouble value, jint index);

__attribute__((unused)) static GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *new_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *outer$, jdouble value, jint index) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter)

@implementation GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)c
                                             withBoolean:(jboolean)isIntersection {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_initWithGeogebraCommonKernelConstruction_withBoolean_(self, c, isIntersection);
  return self;
}

- (void)setParametersWithDouble:(jdouble)bottom0
                     withDouble:(jdouble)bottom1
                     withDouble:(jdouble)top0
                     withDouble:(jdouble)top1 {
  for (jint i = 0; i < 2; i++) {
    *IOSBooleanArray_GetRef(nil_chk(edgeExists_), i) = NO;
  }
  {
    jdouble start1, end1, start2, end2;
    jdouble y;
    jdouble x;
    switch (type_) {
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_CIRCLE:
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_ELLIPSE:
      [((JavaUtilTreeSet *) nil_chk(parametersTree_)) clear];
      [parametersTree_ addWithId:[new_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(self, bottom0, 1) autorelease]];
      [parametersTree_ addWithId:[new_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(self, bottom1, 1) autorelease]];
      [parametersTree_ addWithId:[new_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(self, top0, 2) autorelease]];
      [parametersTree_ addWithId:[new_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(self, top1, 2) autorelease]];
      [parametersTree_ toArrayWithNSObjectArray:parametersArray_];
      if (((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(nil_chk(parametersArray_), 0)))->index_ == ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 1)))->index_) {
        start1 = ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 0)))->value_;
        end1 = ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 1)))->value_;
        start2 = ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 2)))->value_;
        end2 = ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 3)))->value_;
      }
      else {
        start1 = ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 1)))->value_;
        end1 = ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 2)))->value_;
        start2 = ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 3)))->value_;
        end2 = ((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(IOSObjectArray_Get(parametersArray_, 0)))->value_;
      }
      if (start2 == end2) {
        start2 = start1;
        end2 = JavaLangDouble_NaN;
        start1 = JavaLangDouble_NaN;
      }
      else if (start1 == end1) {
        end1 = end2;
        end2 = JavaLangDouble_NaN;
        start1 = JavaLangDouble_NaN;
      }
      *IOSDoubleArray_GetRef(nil_chk(paramStart_), 0) = GeogebraCommonKernelKernel_convertToAngleValueWithDouble_(end1);
      *IOSDoubleArray_GetRef(nil_chk(paramEnd_), 0) = GeogebraCommonKernelKernel_convertToAngleValueWithDouble_(start2);
      *IOSDoubleArray_GetRef(nil_chk(paramExtent_), 0) = IOSDoubleArray_Get(paramEnd_, 0) - IOSDoubleArray_Get(paramStart_, 0);
      if (IOSDoubleArray_Get(paramExtent_, 0) < 0) *IOSDoubleArray_GetRef(paramExtent_, 0) += GeogebraCommonKernelKernel_PI_2;
      *IOSDoubleArray_GetRef(paramStart_, 1) = GeogebraCommonKernelKernel_convertToAngleValueWithDouble_(end2);
      *IOSDoubleArray_GetRef(paramEnd_, 1) = GeogebraCommonKernelKernel_convertToAngleValueWithDouble_(start1);
      *IOSDoubleArray_GetRef(paramExtent_, 1) = IOSDoubleArray_Get(paramEnd_, 1) - IOSDoubleArray_Get(paramStart_, 1);
      if (IOSDoubleArray_Get(paramExtent_, 1) < 0) *IOSDoubleArray_GetRef(paramExtent_, 1) += GeogebraCommonKernelKernel_PI_2;
      if (!JavaLangDouble_isNaNWithDouble_(IOSDoubleArray_Get(paramStart_, 0))) {
        jdouble x0 = [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getX] * [self getHalfAxisWithInt:0];
        jdouble y0 = [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getY] * [self getHalfAxisWithInt:0];
        jdouble x1 = [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getX] * [self getHalfAxisWithInt:1];
        jdouble y1 = [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getY] * [self getHalfAxisWithInt:1];
        if (JavaLangDouble_isNaNWithDouble_(IOSDoubleArray_Get(paramStart_, 1))) {
          *IOSDoubleArray_GetRef(nil_chk(edgeEndX_), 0) = [((GeogebraCommonKernelGeosGeoVec2D *) nil_chk(b_)) getX] + x0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramStart_, 0)) + x1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramStart_, 0));
          *IOSDoubleArray_GetRef(nil_chk(edgeEndY_), 0) = [b_ getY] + y0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramStart_, 0)) + y1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramStart_, 0));
          *IOSDoubleArray_GetRef(nil_chk(edgeEndParam_), 0) = IOSDoubleArray_Get(paramStart_, 0);
          *IOSDoubleArray_GetRef(nil_chk(edgeStartX_), 0) = [b_ getX] + x0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramEnd_, 0)) + x1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramEnd_, 0));
          *IOSDoubleArray_GetRef(nil_chk(edgeStartY_), 0) = [b_ getY] + y0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramEnd_, 0)) + y1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramEnd_, 0));
          *IOSDoubleArray_GetRef(nil_chk(edgeStartParam_), 0) = IOSDoubleArray_Get(paramEnd_, 0);
          if (IOSDoubleArray_Get(edgeStartParam_, 0) > IOSDoubleArray_Get(edgeEndParam_, 0)) {
            *IOSDoubleArray_GetRef(edgeStartParam_, 0) -= 2 * JavaLangMath_PI;
          }
          *IOSBooleanArray_GetRef(nil_chk(edgeExists_), 0) = YES;
        }
        else {
          *IOSDoubleArray_GetRef(nil_chk(edgeEndX_), 0) = [((GeogebraCommonKernelGeosGeoVec2D *) nil_chk(b_)) getX] + x0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramStart_, 0)) + x1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramStart_, 0));
          *IOSDoubleArray_GetRef(nil_chk(edgeEndY_), 0) = [b_ getY] + y0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramStart_, 0)) + y1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramStart_, 0));
          *IOSDoubleArray_GetRef(nil_chk(edgeEndParam_), 0) = IOSDoubleArray_Get(paramStart_, 0);
          *IOSDoubleArray_GetRef(nil_chk(edgeStartX_), 0) = [b_ getX] + x0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramEnd_, 1)) + x1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramEnd_, 1));
          *IOSDoubleArray_GetRef(nil_chk(edgeStartY_), 0) = [b_ getY] + y0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramEnd_, 1)) + y1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramEnd_, 1));
          *IOSDoubleArray_GetRef(nil_chk(edgeStartParam_), 0) = IOSDoubleArray_Get(paramEnd_, 1);
          if (IOSDoubleArray_Get(edgeStartParam_, 0) > IOSDoubleArray_Get(edgeEndParam_, 0)) {
            *IOSDoubleArray_GetRef(edgeStartParam_, 0) -= 2 * JavaLangMath_PI;
          }
          *IOSBooleanArray_GetRef(nil_chk(edgeExists_), 0) = YES;
          *IOSDoubleArray_GetRef(edgeEndX_, 1) = [b_ getX] + x0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramStart_, 1)) + x1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramStart_, 1));
          *IOSDoubleArray_GetRef(edgeEndY_, 1) = [b_ getY] + y0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramStart_, 1)) + y1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramStart_, 1));
          *IOSDoubleArray_GetRef(edgeEndParam_, 1) = IOSDoubleArray_Get(paramStart_, 1);
          *IOSDoubleArray_GetRef(edgeStartX_, 1) = [b_ getX] + x0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramEnd_, 0)) + x1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramEnd_, 0));
          *IOSDoubleArray_GetRef(edgeStartY_, 1) = [b_ getY] + y0 * JavaLangMath_cosWithDouble_(IOSDoubleArray_Get(paramEnd_, 0)) + y1 * JavaLangMath_sinWithDouble_(IOSDoubleArray_Get(paramEnd_, 0));
          *IOSDoubleArray_GetRef(edgeStartParam_, 1) = IOSDoubleArray_Get(paramEnd_, 0);
          if (IOSDoubleArray_Get(edgeStartParam_, 1) > IOSDoubleArray_Get(edgeEndParam_, 1)) {
            *IOSDoubleArray_GetRef(edgeStartParam_, 1) -= 2 * JavaLangMath_PI;
          }
          *IOSBooleanArray_GetRef(edgeExists_, 1) = YES;
        }
      }
      break;
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_INTERSECTING_LINES:
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PARALLEL_LINES:
      if (bottom0 < bottom1) {
        start1 = bottom0;
        start2 = bottom1;
      }
      else {
        start1 = bottom1;
        start2 = bottom0;
      }
      if (top0 < top1) {
        end1 = top0;
        end2 = top1;
      }
      else {
        end1 = top1;
        end2 = top0;
      }
      *IOSDoubleArray_GetRef(nil_chk(paramStart_), 0) = GeogebraCommonKernelPathNormalizer_infFunctionWithDouble_(start1);
      *IOSDoubleArray_GetRef(nil_chk(paramEnd_), 0) = GeogebraCommonKernelPathNormalizer_infFunctionWithDouble_(end1);
      *IOSDoubleArray_GetRef(paramStart_, 1) = GeogebraCommonKernelPathNormalizer_infFunctionWithDouble_(start2 - 2);
      *IOSDoubleArray_GetRef(paramEnd_, 1) = GeogebraCommonKernelPathNormalizer_infFunctionWithDouble_(end2 - 2);
      break;
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_DOUBLE_LINE:
      *IOSDoubleArray_GetRef(nil_chk(paramStart_), 0) = bottom0;
      *IOSDoubleArray_GetRef(nil_chk(paramEnd_), 0) = top0;
      break;
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_HYPERBOLA:
      *IOSDoubleArray_GetRef(nil_chk(paramStart_), 0) = JavaLangDouble_NaN;
      *IOSDoubleArray_GetRef(nil_chk(paramEnd_), 0) = JavaLangDouble_NaN;
      *IOSDoubleArray_GetRef(paramStart_, 1) = JavaLangDouble_NaN;
      *IOSDoubleArray_GetRef(paramEnd_, 1) = JavaLangDouble_NaN;
      GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setInfParameterWithDoubleArray_withDouble_(paramStart_, bottom0);
      GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setInfParameterWithDoubleArray_withDouble_(paramStart_, top0);
      GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setInfParameterWithDoubleArray_withDouble_(paramEnd_, bottom1);
      GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setInfParameterWithDoubleArray_withDouble_(paramEnd_, top1);
      GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_sortParameters(self);
      for (jint i = 0; i < 2; i++) {
        if (!JavaLangDouble_isNaNWithDouble_(IOSDoubleArray_Get(paramStart_, i))) {
          jdouble s = IOSDoubleArray_Get(paramEnd_, i);
          jdouble x = (1 - 2 * i) * IOSDoubleArray_Get(nil_chk(halfAxes_), 0) * GeogebraCommonUtilMyMath_coshWithDouble_(s);
          jdouble y = IOSDoubleArray_Get(halfAxes_, 1) * GeogebraCommonUtilMyMath_sinhWithDouble_(s);
          jdouble x1 = [((GeogebraCommonKernelGeosGeoVec2D *) nil_chk(b_)) getX] + x * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getX] + y * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getX];
          jdouble y1 = [b_ getY] + x * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getY] + y * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getY];
          s = IOSDoubleArray_Get(paramStart_, i);
          x = (1 - 2 * i) * IOSDoubleArray_Get(halfAxes_, 0) * GeogebraCommonUtilMyMath_coshWithDouble_(s);
          y = IOSDoubleArray_Get(halfAxes_, 1) * GeogebraCommonUtilMyMath_sinhWithDouble_(s);
          jdouble x2 = [b_ getX] + x * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getX] + y * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getX];
          jdouble y2 = [b_ getY] + x * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getY] + y * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getY];
          if (i == 0) {
            *IOSDoubleArray_GetRef(nil_chk(edgeStartX_), i) = x2;
            *IOSDoubleArray_GetRef(nil_chk(edgeStartY_), i) = y2;
            *IOSDoubleArray_GetRef(nil_chk(edgeStartParam_), i) = GeogebraCommonKernelPathNormalizer_inverseInfFunctionWithDouble_(IOSDoubleArray_Get(paramStart_, i));
            *IOSDoubleArray_GetRef(nil_chk(edgeEndX_), i) = x1;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndY_), i) = y1;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndParam_), i) = GeogebraCommonKernelPathNormalizer_inverseInfFunctionWithDouble_(IOSDoubleArray_Get(paramEnd_, i));
          }
          else {
            *IOSDoubleArray_GetRef(nil_chk(edgeStartX_), i) = x1;
            *IOSDoubleArray_GetRef(nil_chk(edgeStartY_), i) = y1;
            *IOSDoubleArray_GetRef(nil_chk(edgeStartParam_), i) = GeogebraCommonKernelPathNormalizer_inverseInfFunctionWithDouble_(IOSDoubleArray_Get(paramEnd_, i)) + 2;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndX_), i) = x2;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndY_), i) = y2;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndParam_), i) = GeogebraCommonKernelPathNormalizer_inverseInfFunctionWithDouble_(IOSDoubleArray_Get(paramStart_, i)) + 2;
          }
          *IOSBooleanArray_GetRef(nil_chk(edgeExists_), i) = YES;
        }
        else {
          jdouble x1 = [((GeogebraCommonKernelGeosGeoVec2D *) nil_chk(b_)) getX] - [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getX];
          jdouble y1 = [b_ getY] - [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getY];
          jdouble x2 = [b_ getX] + [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getX];
          jdouble y2 = [b_ getY] + [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getY];
          if (i == 0) {
            *IOSDoubleArray_GetRef(nil_chk(edgeStartX_), i) = x1;
            *IOSDoubleArray_GetRef(nil_chk(edgeStartY_), i) = y1;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndX_), i) = x2;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndY_), i) = y2;
          }
          else {
            *IOSDoubleArray_GetRef(nil_chk(edgeStartX_), i) = x2;
            *IOSDoubleArray_GetRef(nil_chk(edgeStartY_), i) = y2;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndX_), i) = x1;
            *IOSDoubleArray_GetRef(nil_chk(edgeEndY_), i) = y1;
          }
        }
      }
      break;
      case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PARABOLA:
      if (bottom0 < bottom1) {
        *IOSDoubleArray_GetRef(nil_chk(paramStart_), 0) = bottom0;
        *IOSDoubleArray_GetRef(nil_chk(paramEnd_), 0) = bottom1;
      }
      else {
        *IOSDoubleArray_GetRef(nil_chk(paramStart_), 0) = bottom1;
        *IOSDoubleArray_GetRef(nil_chk(paramEnd_), 0) = bottom0;
      }
      y = bottom0 * p_;
      x = y * bottom0 / 2.0;
      *IOSDoubleArray_GetRef(nil_chk(edgeEndX_), 0) = [((GeogebraCommonKernelGeosGeoVec2D *) nil_chk(b_)) getX] + x * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getX] + y * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getX];
      *IOSDoubleArray_GetRef(nil_chk(edgeEndY_), 0) = [b_ getY] + x * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getY] + y * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getY];
      *IOSDoubleArray_GetRef(nil_chk(edgeEndParam_), 0) = bottom0;
      y = bottom1 * p_;
      x = y * bottom1 / 2.0;
      *IOSDoubleArray_GetRef(nil_chk(edgeStartX_), 0) = [b_ getX] + x * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getX] + y * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getX];
      *IOSDoubleArray_GetRef(nil_chk(edgeStartY_), 0) = [b_ getY] + x * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:0])) getY] + y * [((GeogebraCommonKernelMatrixCoords *) nil_chk([self getEigenvecWithInt:1])) getY];
      *IOSDoubleArray_GetRef(nil_chk(edgeStartParam_), 0) = bottom1;
      *IOSBooleanArray_GetRef(nil_chk(edgeExists_), 0) = YES;
      break;
    }
  }
}

- (void)sortParameters {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_sortParameters(self);
}

+ (void)setInfParameterWithDoubleArray:(IOSDoubleArray *)param
                            withDouble:(jdouble)value {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setInfParameterWithDoubleArray_withDouble_(param, value);
}

- (jdouble)getParameterStartWithInt:(jint)index {
  return IOSDoubleArray_Get(nil_chk(paramStart_), index);
}

- (jdouble)getParameterEndWithInt:(jint)index {
  return IOSDoubleArray_Get(nil_chk(paramEnd_), index);
}

- (jdouble)getParameterExtentWithInt:(jint)index {
  return IOSDoubleArray_Get(nil_chk(paramExtent_), index);
}

- (GeogebraCommonPluginGeoClassEnum *)getGeoClassType {
  return GeogebraCommonPluginGeoClassEnum_get_CONICSECTION();
}

- (jboolean)isInRegionWithDouble:(jdouble)x0
                      withDouble:(jdouble)y0 {
  if (![super isInRegionWithDouble:x0 withDouble:y0]) {
    return NO;
  }
  return GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_isInsideEdgesWithDouble_withDouble_(self, x0, y0);
}

- (jboolean)isInsideEdgesWithDouble:(jdouble)x0
                         withDouble:(jdouble)y0 {
  return GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_isInsideEdgesWithDouble_withDouble_(self, x0, y0);
}

- (void)pointChangedWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)P
                   withGeogebraCommonKernelPathParameter:(GeogebraCommonKernelPathParameter *)pp
                                             withBoolean:(jboolean)checkSection {
  if (checkSection) {
    jdouble xOld = [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) getX] / [P getZ];
    jdouble yOld = [P getY] / [P getZ];
    jdouble distance = JavaLangDouble_POSITIVE_INFINITY;
    [super pointChangedWithGeogebraCommonKernelMatrixCoords:P withGeogebraCommonKernelPathParameter:pp withBoolean:checkSection];
    if (type_ == GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_HYPERBOLA) {
      if (IOSBooleanArray_Get(nil_chk(edgeExists_), 0)) {
        if (((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_ > 1) {
          pp->t_ = 0;
          [P setXWithDouble:[self getHalfAxisWithInt:0]];
          [P setYWithDouble:0];
          [P setZWithDouble:1.0];
          [self coordsEVtoRWWithGeogebraCommonKernelMatrixCoords:P];
        }
      }
      else {
        if (((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_ < 1) {
          pp->t_ = 2;
          [P setXWithDouble:-[self getHalfAxisWithInt:0]];
          [P setYWithDouble:0];
          [P setZWithDouble:1.0];
          [self coordsEVtoRWWithGeogebraCommonKernelMatrixCoords:P];
        }
      }
    }
    [P setInhomCoords];
    if (GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_isInsideEdgesWithDouble_withDouble_(self, [P getX], [P getY])) {
      jdouble dx = [P getX] - xOld;
      jdouble dy = [P getY] - yOld;
      distance = dx * dx + dy * dy;
    }
    for (jint i = 0; i < 2; i++) {
      if (IOSBooleanArray_Get(nil_chk(edgeExists_), i)) {
        jdouble parameter = GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_getParameterOnSegmentWithDouble_withDouble_withDouble_withDouble_withDouble_withDouble_(xOld, yOld, IOSDoubleArray_Get(nil_chk(edgeStartX_), i), IOSDoubleArray_Get(nil_chk(edgeStartY_), i), IOSDoubleArray_Get(nil_chk(edgeEndX_), i), IOSDoubleArray_Get(nil_chk(edgeEndY_), i));
        jdouble x = IOSDoubleArray_Get(edgeStartX_, i) * (1 - parameter) + IOSDoubleArray_Get(edgeEndX_, i) * parameter;
        jdouble y = IOSDoubleArray_Get(edgeStartY_, i) * (1 - parameter) + IOSDoubleArray_Get(edgeEndY_, i) * parameter;
        jdouble dx = x - xOld;
        jdouble dy = y - yOld;
        jdouble d = dx * dx + dy * dy;
        if (d < distance) {
          distance = d;
          [P setXWithDouble:x];
          [P setYWithDouble:y];
          [P setZWithDouble:1];
          switch (type_) {
            case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_CIRCLE:
            case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_ELLIPSE:
            ((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_ = IOSDoubleArray_Get(nil_chk(edgeStartParam_), i) * (1 - parameter) + IOSDoubleArray_Get(nil_chk(edgeEndParam_), i) * parameter;
            if (pp->t_ > JavaLangMath_PI) {
              pp->t_ -= GeogebraCommonKernelKernel_PI_2;
            }
            break;
            case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PARABOLA:
            if (IOSDoubleArray_Get(nil_chk(edgeStartParam_), 0) < IOSDoubleArray_Get(nil_chk(edgeEndParam_), 0)) {
              parameter = -parameter;
            }
            ((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_ = IOSDoubleArray_Get(edgeStartParam_, 0) + parameter;
            break;
            case GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_HYPERBOLA:
            ((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_ = IOSDoubleArray_Get(nil_chk(edgeEndParam_), i) * parameter + (1 - parameter);
            break;
          }
        }
      }
    }
  }
  else {
    [super pointChangedWithGeogebraCommonKernelMatrixCoords:P withGeogebraCommonKernelPathParameter:pp withBoolean:checkSection];
  }
}

+ (jdouble)getParameterOnSegmentWithDouble:(jdouble)x
                                withDouble:(jdouble)y
                                withDouble:(jdouble)startX
                                withDouble:(jdouble)startY
                                withDouble:(jdouble)endX
                                withDouble:(jdouble)endY {
  return GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_getParameterOnSegmentWithDouble_withDouble_withDouble_withDouble_withDouble_withDouble_(x, y, startX, startY, endX, endY);
}

- (void)pathChangedWithoutCheckEllipseWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)P
                                     withGeogebraCommonKernelPathParameter:(GeogebraCommonKernelPathParameter *)pp
                                                               withBoolean:(jboolean)checkSection {
  if (checkSection) {
    for (jint i = 0; i < 2; i++) {
      if (IOSBooleanArray_Get(nil_chk(edgeExists_), i)) {
        jdouble parameter = fmod(((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_, GeogebraCommonKernelKernel_PI_2);
        if (parameter > JavaLangMath_PI) {
          parameter -= GeogebraCommonKernelKernel_PI_2;
        }
        jboolean inEdge = NO;
        if (IOSDoubleArray_Get(nil_chk(edgeStartParam_), i) > JavaLangMath_PI) {
          parameter += GeogebraCommonKernelKernel_PI_2;
          inEdge = (parameter >= IOSDoubleArray_Get(edgeStartParam_, i) && parameter <= IOSDoubleArray_Get(nil_chk(edgeEndParam_), i));
        }
        else if (IOSDoubleArray_Get(nil_chk(edgeEndParam_), i) > JavaLangMath_PI) {
          if (parameter >= IOSDoubleArray_Get(edgeStartParam_, i)) {
            inEdge = YES;
          }
          else {
            parameter += GeogebraCommonKernelKernel_PI_2;
            inEdge = (parameter <= IOSDoubleArray_Get(edgeEndParam_, i));
          }
        }
        else {
          inEdge = (parameter >= IOSDoubleArray_Get(edgeStartParam_, i) && parameter <= IOSDoubleArray_Get(edgeEndParam_, i));
        }
        if (inEdge) {
          jdouble a = (parameter - IOSDoubleArray_Get(edgeStartParam_, i)) / (IOSDoubleArray_Get(nil_chk(edgeEndParam_), i) - IOSDoubleArray_Get(edgeStartParam_, i));
          [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeStartX_), i) * (1 - a) + IOSDoubleArray_Get(nil_chk(edgeEndX_), i) * a];
          [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeStartY_), i) * (1 - a) + IOSDoubleArray_Get(nil_chk(edgeEndY_), i) * a];
          [P setZWithDouble:1];
          return;
        }
      }
    }
  }
  [super pathChangedWithoutCheckEllipseWithGeogebraCommonKernelMatrixCoords:P withGeogebraCommonKernelPathParameter:pp withBoolean:checkSection];
}

- (void)pathChangedWithoutCheckParabolaWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)P
                                      withGeogebraCommonKernelPathParameter:(GeogebraCommonKernelPathParameter *)pp
                                                                withBoolean:(jboolean)checkSection {
  if (checkSection) {
    if (IOSBooleanArray_Get(nil_chk(edgeExists_), 0)) {
      if (IOSDoubleArray_Get(nil_chk(edgeStartParam_), 0) < IOSDoubleArray_Get(nil_chk(edgeEndParam_), 0)) {
        if (((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_ < IOSDoubleArray_Get(edgeStartParam_, 0)) {
          jdouble a = -pp->t_ + IOSDoubleArray_Get(edgeStartParam_, 0);
          if (a < 1) {
            [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeStartX_), 0) * (1 - a) + IOSDoubleArray_Get(nil_chk(edgeEndX_), 0) * a];
            [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeStartY_), 0) * (1 - a) + IOSDoubleArray_Get(nil_chk(edgeEndY_), 0) * a];
          }
          else {
            [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndX_), 0)];
            [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndY_), 0)];
          }
          [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setZWithDouble:1];
          return;
        }
        else if (pp->t_ > IOSDoubleArray_Get(edgeEndParam_, 0)) {
          [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndX_), 0)];
          [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndY_), 0)];
          [P setZWithDouble:1];
          return;
        }
      }
      else {
        if (((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_ > IOSDoubleArray_Get(edgeStartParam_, 0)) {
          jdouble a = pp->t_ - IOSDoubleArray_Get(edgeStartParam_, 0);
          if (a < 1) {
            [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeStartX_), 0) * (1 - a) + IOSDoubleArray_Get(nil_chk(edgeEndX_), 0) * a];
            [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeStartY_), 0) * (1 - a) + IOSDoubleArray_Get(nil_chk(edgeEndY_), 0) * a];
          }
          else {
            [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndX_), 0)];
            [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndY_), 0)];
          }
          [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setZWithDouble:1];
          return;
        }
        else if (pp->t_ < IOSDoubleArray_Get(edgeEndParam_, 0)) {
          [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndX_), 0)];
          [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndY_), 0)];
          [P setZWithDouble:1];
          return;
        }
      }
    }
  }
  [super pathChangedWithoutCheckParabolaWithGeogebraCommonKernelMatrixCoords:P withGeogebraCommonKernelPathParameter:pp withBoolean:checkSection];
}

- (void)pathChangedWithoutCheckHyperbolaWithGeogebraCommonKernelMatrixCoords:(GeogebraCommonKernelMatrixCoords *)P
                                       withGeogebraCommonKernelPathParameter:(GeogebraCommonKernelPathParameter *)pp
                                                                 withBoolean:(jboolean)checkSection {
  jdouble oldParameter = ((GeogebraCommonKernelPathParameter *) nil_chk(pp))->t_;
  if (checkSection) {
    jint i;
    if (pp->t_ < 1) {
      if (IOSBooleanArray_Get(nil_chk(edgeExists_), 0)) {
        i = 0;
      }
      else {
        i = 1;
        pp->t_ = 2 - pp->t_;
      }
    }
    else {
      if (IOSBooleanArray_Get(nil_chk(edgeExists_), 1)) {
        i = 1;
      }
      else {
        i = 0;
        pp->t_ = 2 - pp->t_;
      }
    }
    if (i == 0 ^ pp->t_ < IOSDoubleArray_Get(nil_chk(edgeEndParam_), i)) {
      jdouble a = (pp->t_ - IOSDoubleArray_Get(edgeEndParam_, i)) / (1 - IOSDoubleArray_Get(edgeEndParam_, i));
      if (a < 1) {
        [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeStartX_), i) * a + IOSDoubleArray_Get(nil_chk(edgeEndX_), i) * (1 - a)];
        [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeStartY_), i) * a + IOSDoubleArray_Get(nil_chk(edgeEndY_), i) * (1 - a)];
      }
      else {
        [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setXWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndX_), i)];
        [P setYWithDouble:IOSDoubleArray_Get(nil_chk(edgeEndY_), i)];
      }
      [((GeogebraCommonKernelMatrixCoords *) nil_chk(P)) setZWithDouble:1];
      return;
    }
  }
  [super pathChangedWithoutCheckHyperbolaWithGeogebraCommonKernelMatrixCoords:P withGeogebraCommonKernelPathParameter:pp withBoolean:checkSection];
  if (checkSection) {
    pp->t_ = oldParameter;
  }
}

- (void)dealloc {
  RELEASE_(paramStart_);
  RELEASE_(paramEnd_);
  RELEASE_(paramExtent_);
  RELEASE_(edgeStartX_);
  RELEASE_(edgeStartY_);
  RELEASE_(edgeEndX_);
  RELEASE_(edgeEndY_);
  RELEASE_(edgeStartParam_);
  RELEASE_(edgeEndParam_);
  RELEASE_(edgeExists_);
  RELEASE_(parametersTree_);
  RELEASE_(parametersArray_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withBoolean:", "GeoConicSection", NULL, 0x1, NULL, NULL },
    { "setParametersWithDouble:withDouble:withDouble:withDouble:", "setParameters", "V", 0x11, NULL, NULL },
    { "sortParameters", NULL, "V", 0x2, NULL, NULL },
    { "setInfParameterWithDoubleArray:withDouble:", "setInfParameter", "V", 0xa, NULL, NULL },
    { "getParameterStartWithInt:", "getParameterStart", "D", 0x11, NULL, NULL },
    { "getParameterEndWithInt:", "getParameterEnd", "D", 0x11, NULL, NULL },
    { "getParameterExtentWithInt:", "getParameterExtent", "D", 0x11, NULL, NULL },
    { "getGeoClassType", NULL, "Lgeogebra.common.plugin.GeoClass;", 0x1, NULL, NULL },
    { "isInRegionWithDouble:withDouble:", "isInRegion", "Z", 0x1, NULL, NULL },
    { "isInsideEdgesWithDouble:withDouble:", "isInsideEdges", "Z", 0x2, NULL, NULL },
    { "pointChangedWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelPathParameter:withBoolean:", "pointChanged", "V", 0x1, NULL, NULL },
    { "getParameterOnSegmentWithDouble:withDouble:withDouble:withDouble:withDouble:withDouble:", "getParameterOnSegment", "D", 0xa, NULL, NULL },
    { "pathChangedWithoutCheckEllipseWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelPathParameter:withBoolean:", "pathChangedWithoutCheckEllipse", "V", 0x4, NULL, NULL },
    { "pathChangedWithoutCheckParabolaWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelPathParameter:withBoolean:", "pathChangedWithoutCheckParabola", "V", 0x4, NULL, NULL },
    { "pathChangedWithoutCheckHyperbolaWithGeogebraCommonKernelMatrixCoords:withGeogebraCommonKernelPathParameter:withBoolean:", "pathChangedWithoutCheckHyperbola", "V", 0x4, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "paramStart_", NULL, 0x2, "[D", NULL, NULL,  },
    { "paramEnd_", NULL, 0x2, "[D", NULL, NULL,  },
    { "paramExtent_", NULL, 0x2, "[D", NULL, NULL,  },
    { "edgeStartX_", NULL, 0x2, "[D", NULL, NULL,  },
    { "edgeStartY_", NULL, 0x2, "[D", NULL, NULL,  },
    { "edgeEndX_", NULL, 0x2, "[D", NULL, NULL,  },
    { "edgeEndY_", NULL, 0x2, "[D", NULL, NULL,  },
    { "edgeStartParam_", NULL, 0x2, "[D", NULL, NULL,  },
    { "edgeEndParam_", NULL, 0x2, "[D", NULL, NULL,  },
    { "edgeExists_", NULL, 0x2, "[Z", NULL, NULL,  },
    { "parametersTree_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Lgeogebra/common/geogebra3D/kernel3D/geos/GeoConicSection$IndexedParameter;>;",  },
    { "parametersArray_", NULL, 0x2, "[Lgeogebra.common.geogebra3D.kernel3D.geos.GeoConicSection$IndexedParameter;", NULL, NULL,  },
  };
  static const char *inner_classes[] = {"Lgeogebra.common.geogebra3D.kernel3D.geos.GeoConicSection$IndexedParameter;"};
  static const J2ObjcClassInfo _GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection = { 2, "GeoConicSection", "geogebra.common.geogebra3D.kernel3D.geos", NULL, 0x1, 15, methods, 12, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection;
}

@end

void GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_initWithGeogebraCommonKernelConstruction_withBoolean_(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *self, GeogebraCommonKernelConstruction *c, jboolean isIntersection) {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConic3D_initWithGeogebraCommonKernelConstruction_withBoolean_(self, c, isIntersection);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_parametersTree_(self, new_JavaUtilTreeSet_init());
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_parametersArray_(self, [IOSObjectArray newArrayWithLength:4 type:GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_class_()]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_paramStart_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_paramEnd_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_paramExtent_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_edgeStartX_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_edgeStartY_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_edgeEndX_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_edgeEndY_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_edgeStartParam_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_edgeEndParam_(self, [IOSDoubleArray newArrayWithLength:2]);
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setAndConsume_edgeExists_(self, [IOSBooleanArray newArrayWithLength:2]);
}

GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *new_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_initWithGeogebraCommonKernelConstruction_withBoolean_(GeogebraCommonKernelConstruction *c, jboolean isIntersection) {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *self = [GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection alloc];
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_initWithGeogebraCommonKernelConstruction_withBoolean_(self, c, isIntersection);
  return self;
}

void GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_sortParameters(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *self) {
  for (jint i = 0; i < 2; i++) {
    if (GeogebraCommonKernelKernel_isZeroWithDouble_(IOSDoubleArray_Get(nil_chk(self->paramStart_), i))) {
      *IOSDoubleArray_GetRef(self->paramStart_, i) = 0;
    }
    if (GeogebraCommonKernelKernel_isZeroWithDouble_(IOSDoubleArray_Get(nil_chk(self->paramEnd_), i))) {
      *IOSDoubleArray_GetRef(self->paramEnd_, i) = 0;
    }
    if (IOSDoubleArray_Get(self->paramStart_, i) > IOSDoubleArray_Get(self->paramEnd_, i)) {
      jdouble tmp = IOSDoubleArray_Get(self->paramStart_, i);
      *IOSDoubleArray_GetRef(self->paramStart_, i) = IOSDoubleArray_Get(self->paramEnd_, i);
      *IOSDoubleArray_GetRef(self->paramEnd_, i) = tmp;
    }
  }
}

void GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_setInfParameterWithDoubleArray_withDouble_(IOSDoubleArray *param, jdouble value) {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_initialize();
  if (JavaLangDouble_isNaNWithDouble_(value)) {
    return;
  }
  if (value < 1) {
    *IOSDoubleArray_GetRef(nil_chk(param), 0) = GeogebraCommonKernelPathNormalizer_infFunctionWithDouble_(value);
  }
  else {
    *IOSDoubleArray_GetRef(nil_chk(param), 1) = GeogebraCommonKernelPathNormalizer_infFunctionWithDouble_(value - 2);
  }
}

jboolean GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_isInsideEdgesWithDouble_withDouble_(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *self, jdouble x0, jdouble y0) {
  for (jint i = 0; i < 2; i++) {
    if (IOSBooleanArray_Get(nil_chk(self->edgeExists_), i) || self->type_ == GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_HYPERBOLA) {
      if ((IOSDoubleArray_Get(nil_chk(self->edgeStartX_), i) - x0) * (IOSDoubleArray_Get(nil_chk(self->edgeEndY_), i) - y0) - (IOSDoubleArray_Get(nil_chk(self->edgeEndX_), i) - x0) * (IOSDoubleArray_Get(nil_chk(self->edgeStartY_), i) - y0) < 0) {
        return NO;
      }
    }
  }
  return YES;
}

jdouble GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_getParameterOnSegmentWithDouble_withDouble_withDouble_withDouble_withDouble_withDouble_(jdouble x, jdouble y, jdouble startX, jdouble startY, jdouble endX, jdouble endY) {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_initialize();
  jdouble dx = endX - startX;
  jdouble dy = endY - startY;
  jdouble parameter = ((x - startX) * (endX - startX) + (y - startY) * (endY - startY)) / (dx * dx + dy * dy);
  if (parameter < 0) {
    return 0;
  }
  if (parameter > 1) {
    return 1;
  }
  return parameter;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection)

@implementation GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter

- (instancetype)initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection:(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *)outer$
                                                                 withDouble:(jdouble)value
                                                                    withInt:(jint)index {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(self, outer$, value, index);
  return self;
}

- (jint)compareToWithId:(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *)parameter {
  check_class_cast(parameter, [GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter class]);
  if (JavaLangDouble_isNaNWithDouble_(value_)) return 1;
  if (JavaLangDouble_isNaNWithDouble_(((GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *) nil_chk(parameter))->value_)) return -1;
  if (value_ < parameter->value_) return -1;
  if (value_ > parameter->value_) return 1;
  if (index_ < parameter->index_) return -1;
  return 1;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection:withDouble:withInt:", "IndexedParameter", NULL, 0x1, NULL, NULL },
    { "compareToWithId:", "compareTo", "I", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "value_", NULL, 0x4, "D", NULL, NULL,  },
    { "index_", NULL, 0x4, "I", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter = { 2, "IndexedParameter", "geogebra.common.geogebra3D.kernel3D.geos", "GeoConicSection", 0x2, 2, methods, 2, fields, 0, NULL, 0, NULL, NULL, "Ljava/lang/Object;Ljava/lang/Comparable<Lgeogebra/common/geogebra3D/kernel3D/geos/GeoConicSection$IndexedParameter;>;" };
  return &_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter;
}

@end

void GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *self, GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *outer$, jdouble value, jint index) {
  NSObject_init(self);
  self->value_ = value;
  self->index_ = index;
}

GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *new_GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection *outer$, jdouble value, jint index) {
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter *self = [GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter alloc];
  GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter_initWithGeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_withDouble_withInt_(self, outer$, value, index);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonGeogebra3DKernel3DGeosGeoConicSection_IndexedParameter)
