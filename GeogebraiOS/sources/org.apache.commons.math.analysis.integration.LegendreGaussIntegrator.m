//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/org/apache/commons/math/analysis/integration/LegendreGaussIntegrator.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Deprecated.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "org/apache/commons/math/ConvergenceException.h"
#include "org/apache/commons/math/FunctionEvaluationException.h"
#include "org/apache/commons/math/MathRuntimeException.h"
#include "org/apache/commons/math/MaxIterationsExceededException.h"
#include "org/apache/commons/math/analysis/UnivariateRealFunction.h"
#include "org/apache/commons/math/analysis/integration/LegendreGaussIntegrator.h"
#include "org/apache/commons/math/analysis/integration/UnivariateRealIntegratorImpl.h"
#include "org/apache/commons/math/exception/util/LocalizedFormats.h"
#include "org/apache/commons/math/util/FastMath.h"

@interface OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator () {
 @public
  IOSDoubleArray *abscissas_;
  IOSDoubleArray *weights_;
}

- (jdouble)stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:(id<OrgApacheCommonsMathAnalysisUnivariateRealFunction>)f
                                                            withDouble:(jdouble)min
                                                            withDouble:(jdouble)max
                                                               withInt:(jint)n;

@end

J2OBJC_FIELD_SETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, abscissas_, IOSDoubleArray *)
J2OBJC_FIELD_SETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, weights_, IOSDoubleArray *)

static IOSDoubleArray *OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_2_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, ABSCISSAS_2_, IOSDoubleArray *)

static IOSDoubleArray *OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_2_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, WEIGHTS_2_, IOSDoubleArray *)

static IOSDoubleArray *OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_3_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, ABSCISSAS_3_, IOSDoubleArray *)

static IOSDoubleArray *OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_3_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, WEIGHTS_3_, IOSDoubleArray *)

static IOSDoubleArray *OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_4_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, ABSCISSAS_4_, IOSDoubleArray *)

static IOSDoubleArray *OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_4_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, WEIGHTS_4_, IOSDoubleArray *)

static IOSDoubleArray *OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_5_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, ABSCISSAS_5_, IOSDoubleArray *)

static IOSDoubleArray *OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_5_;
J2OBJC_STATIC_FIELD_GETTER(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator, WEIGHTS_5_, IOSDoubleArray *)

__attribute__((unused)) static jdouble OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_withDouble_withDouble_withInt_(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *self, id<OrgApacheCommonsMathAnalysisUnivariateRealFunction> f, jdouble min, jdouble max, jint n);

J2OBJC_INITIALIZED_DEFN(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator)

@implementation OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator

- (instancetype)initWithInt:(jint)n
                    withInt:(jint)defaultMaximalIterationCount {
  OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_initWithInt_withInt_(self, n, defaultMaximalIterationCount);
  return self;
}

- (jdouble)integrateWithDouble:(jdouble)min
                    withDouble:(jdouble)max {
  return [self integrateWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:f_ withDouble:min withDouble:max];
}

- (jdouble)integrateWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:(id<OrgApacheCommonsMathAnalysisUnivariateRealFunction>)f
                                                                withDouble:(jdouble)min
                                                                withDouble:(jdouble)max {
  [self clearResult];
  [self verifyIntervalWithDouble:min withDouble:max];
  [self verifyIterationCount];
  jdouble oldt = OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_withDouble_withDouble_withInt_(self, f, min, max, 1);
  jint n = 2;
  for (jint i = 0; i < maximalIterationCount_; ++i) {
    jdouble t = OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_withDouble_withDouble_withInt_(self, f, min, max, n);
    jdouble delta = OrgApacheCommonsMathUtilFastMath_absWithDouble_(t - oldt);
    jdouble limit = OrgApacheCommonsMathUtilFastMath_maxWithDouble_withDouble_(absoluteAccuracy_, relativeAccuracy_ * (OrgApacheCommonsMathUtilFastMath_absWithDouble_(oldt) + OrgApacheCommonsMathUtilFastMath_absWithDouble_(t)) * 0.5);
    if ((i + 1 >= minimalIterationCount_) && (delta <= limit)) {
      [self setResultWithDouble:t withInt:i];
      return result_;
    }
    jdouble ratio = OrgApacheCommonsMathUtilFastMath_minWithDouble_withDouble_(4, OrgApacheCommonsMathUtilFastMath_powWithDouble_withDouble_(delta / limit, 0.5 / ((IOSDoubleArray *) nil_chk(abscissas_))->size_));
    n = OrgApacheCommonsMathUtilFastMath_maxWithInt_withInt_(J2ObjCFpToInt((ratio * n)), n + 1);
    oldt = t;
  }
  @throw [new_OrgApacheCommonsMathMaxIterationsExceededException_initWithInt_(maximalIterationCount_) autorelease];
}

- (jdouble)stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:(id<OrgApacheCommonsMathAnalysisUnivariateRealFunction>)f
                                                            withDouble:(jdouble)min
                                                            withDouble:(jdouble)max
                                                               withInt:(jint)n {
  return OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_withDouble_withDouble_withInt_(self, f, min, max, n);
}

- (void)dealloc {
  RELEASE_(abscissas_);
  RELEASE_(weights_);
  [super dealloc];
}

+ (void)initialize {
  if (self == [OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator class]) {
    JreStrongAssignAndConsume(&OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_2_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ -1.0 / OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(3.0), 1.0 / OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(3.0) } count:2]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_2_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ 1.0, 1.0 } count:2]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_3_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ -OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(0.6), 0.0, OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(0.6) } count:3]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_3_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ 5.0 / 9.0, 8.0 / 9.0, 5.0 / 9.0 } count:3]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_4_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ -OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_((15.0 + 2.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(30.0)) / 35.0), -OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_((15.0 - 2.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(30.0)) / 35.0), OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_((15.0 - 2.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(30.0)) / 35.0), OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_((15.0 + 2.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(30.0)) / 35.0) } count:4]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_4_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ (90.0 - 5.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(30.0)) / 180.0, (90.0 + 5.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(30.0)) / 180.0, (90.0 + 5.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(30.0)) / 180.0, (90.0 - 5.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(30.0)) / 180.0 } count:4]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_5_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ -OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_((35.0 + 2.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(70.0)) / 63.0), -OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_((35.0 - 2.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(70.0)) / 63.0), 0.0, OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_((35.0 - 2.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(70.0)) / 63.0), OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_((35.0 + 2.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(70.0)) / 63.0) } count:5]);
    JreStrongAssignAndConsume(&OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_5_, nil, [IOSDoubleArray newArrayWithDoubles:(jdouble[]){ (322.0 - 13.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(70.0)) / 900.0, (322.0 + 13.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(70.0)) / 900.0, 128.0 / 225.0, (322.0 + 13.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(70.0)) / 900.0, (322.0 - 13.0 * OrgApacheCommonsMathUtilFastMath_sqrtWithDouble_(70.0)) / 900.0 } count:5]);
    J2OBJC_SET_INITIALIZED(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator)
  }
}

+ (IOSObjectArray *)__annotations_integrateWithDouble_withDouble_ {
  return [IOSObjectArray arrayWithObjects:(id[]) { [[[JavaLangDeprecated alloc] init] autorelease] } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withInt:", "LegendreGaussIntegrator", NULL, 0x1, "Ljava.lang.IllegalArgumentException;", NULL },
    { "integrateWithDouble:withDouble:", "integrate", "D", 0x1, "Lorg.apache.commons.math.ConvergenceException;Lorg.apache.commons.math.FunctionEvaluationException;Ljava.lang.IllegalArgumentException;", NULL },
    { "integrateWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:withDouble:withDouble:", "integrate", "D", 0x1, "Lorg.apache.commons.math.ConvergenceException;Lorg.apache.commons.math.FunctionEvaluationException;Ljava.lang.IllegalArgumentException;", NULL },
    { "stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction:withDouble:withDouble:withInt:", "stage", "D", 0x2, "Lorg.apache.commons.math.FunctionEvaluationException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "ABSCISSAS_2_", NULL, 0x1a, "[D", &OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_2_, NULL,  },
    { "WEIGHTS_2_", NULL, 0x1a, "[D", &OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_2_, NULL,  },
    { "ABSCISSAS_3_", NULL, 0x1a, "[D", &OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_3_, NULL,  },
    { "WEIGHTS_3_", NULL, 0x1a, "[D", &OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_3_, NULL,  },
    { "ABSCISSAS_4_", NULL, 0x1a, "[D", &OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_4_, NULL,  },
    { "WEIGHTS_4_", NULL, 0x1a, "[D", &OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_4_, NULL,  },
    { "ABSCISSAS_5_", NULL, 0x1a, "[D", &OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_5_, NULL,  },
    { "WEIGHTS_5_", NULL, 0x1a, "[D", &OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_5_, NULL,  },
    { "abscissas_", NULL, 0x12, "[D", NULL, NULL,  },
    { "weights_", NULL, 0x12, "[D", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator = { 2, "LegendreGaussIntegrator", "org.apache.commons.math.analysis.integration", NULL, 0x1, 4, methods, 10, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator;
}

@end

void OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_initWithInt_withInt_(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *self, jint n, jint defaultMaximalIterationCount) {
  OrgApacheCommonsMathAnalysisIntegrationUnivariateRealIntegratorImpl_initWithInt_(self, defaultMaximalIterationCount);
  switch (n) {
    case 2:
    OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_set_abscissas_(self, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_2_);
    OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_set_weights_(self, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_2_);
    break;
    case 3:
    OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_set_abscissas_(self, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_3_);
    OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_set_weights_(self, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_3_);
    break;
    case 4:
    OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_set_abscissas_(self, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_4_);
    OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_set_weights_(self, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_4_);
    break;
    case 5:
    OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_set_abscissas_(self, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_ABSCISSAS_5_);
    OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_set_weights_(self, OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_WEIGHTS_5_);
    break;
    default:
    @throw OrgApacheCommonsMathMathRuntimeException_createIllegalArgumentExceptionWithOrgApacheCommonsMathExceptionUtilLocalizable_withNSObjectArray_(OrgApacheCommonsMathExceptionUtilLocalizedFormatsEnum_get_N_POINTS_GAUSS_LEGENDRE_INTEGRATOR_NOT_SUPPORTED(), [IOSObjectArray arrayWithObjects:(id[]){ JavaLangInteger_valueOfWithInt_(n), JavaLangInteger_valueOfWithInt_(2), JavaLangInteger_valueOfWithInt_(5) } count:3 type:NSObject_class_()]);
  }
}

OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *new_OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_initWithInt_withInt_(jint n, jint defaultMaximalIterationCount) {
  OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *self = [OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator alloc];
  OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_initWithInt_withInt_(self, n, defaultMaximalIterationCount);
  return self;
}

jdouble OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator_stageWithOrgApacheCommonsMathAnalysisUnivariateRealFunction_withDouble_withDouble_withInt_(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator *self, id<OrgApacheCommonsMathAnalysisUnivariateRealFunction> f, jdouble min, jdouble max, jint n) {
  jdouble step = (max - min) / n;
  jdouble halfStep = step / 2.0;
  jdouble midPoint = min + halfStep;
  jdouble sum = 0.0;
  for (jint i = 0; i < n; ++i) {
    for (jint j = 0; j < ((IOSDoubleArray *) nil_chk(self->abscissas_))->size_; ++j) {
      sum += IOSDoubleArray_Get(nil_chk(self->weights_), j) * [((id<OrgApacheCommonsMathAnalysisUnivariateRealFunction>) nil_chk(f)) valueWithDouble:midPoint + halfStep * IOSDoubleArray_Get(self->abscissas_, j)];
    }
    midPoint += step;
  }
  return halfStep * sum;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsMathAnalysisIntegrationLegendreGaussIntegrator)
