//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/euclidian/EuclidianStatic.java
//


#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/awt/GBasicStroke.h"
#include "geogebra/common/awt/GBufferedImage.h"
#include "geogebra/common/awt/GColor.h"
#include "geogebra/common/awt/GFont.h"
#include "geogebra/common/awt/GFontRenderContext.h"
#include "geogebra/common/awt/GGraphics2D.h"
#include "geogebra/common/awt/GPoint.h"
#include "geogebra/common/awt/GRectangle.h"
#include "geogebra/common/awt/GShape.h"
#include "geogebra/common/awt/font/GTextLayout.h"
#include "geogebra/common/euclidian/EuclidianStatic.h"
#include "geogebra/common/factories/AwtFactory.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/main/App.h"
#include "geogebra/common/plugin/EuclidianStyleConstants.h"
#include "geogebra/common/util/StringUtil.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuilder.h"

@interface GeogebraCommonEuclidianEuclidianStatic ()

+ (GeogebraCommonAwtGFont *)getIndexFontWithGeogebraCommonAwtGFont:(GeogebraCommonAwtGFont *)f;

+ (jdouble)measureStringWithNSString:(NSString *)tempStr
          withGeogebraCommonAwtGFont:(GeogebraCommonAwtGFont *)font
withGeogebraCommonAwtGFontRenderContext:(GeogebraCommonAwtGFontRenderContext *)frc;

@end

__attribute__((unused)) static GeogebraCommonAwtGFont *GeogebraCommonEuclidianEuclidianStatic_getIndexFontWithGeogebraCommonAwtGFont_(GeogebraCommonAwtGFont *f);

__attribute__((unused)) static jdouble GeogebraCommonEuclidianEuclidianStatic_measureStringWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(NSString *tempStr, GeogebraCommonAwtGFont *font, GeogebraCommonAwtGFontRenderContext *frc);

J2OBJC_INITIALIZED_DEFN(GeogebraCommonEuclidianEuclidianStatic)

GeogebraCommonEuclidianEuclidianStatic *GeogebraCommonEuclidianEuclidianStatic_prototype_;
id<GeogebraCommonAwtGBasicStroke> GeogebraCommonEuclidianEuclidianStatic_standardStroke_;
id<GeogebraCommonAwtGBasicStroke> GeogebraCommonEuclidianEuclidianStatic_selStroke_;

@implementation GeogebraCommonEuclidianEuclidianStatic

+ (id<GeogebraCommonAwtGBasicStroke>)getDefaultStroke {
  return GeogebraCommonEuclidianEuclidianStatic_getDefaultStroke();
}

+ (id<GeogebraCommonAwtGBasicStroke>)getDefaultSelectionStroke {
  return GeogebraCommonEuclidianEuclidianStatic_getDefaultSelectionStroke();
}

+ (jfloat)textWidthWithNSString:(NSString *)str
     withGeogebraCommonAwtGFont:(GeogebraCommonAwtGFont *)font
withGeogebraCommonAwtGFontRenderContext:(GeogebraCommonAwtGFontRenderContext *)frc {
  return GeogebraCommonEuclidianEuclidianStatic_textWidthWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(str, font, frc);
}

+ (id<GeogebraCommonAwtGBasicStroke>)getStrokeWithFloat:(jfloat)width
                                                withInt:(jint)type {
  return GeogebraCommonEuclidianEuclidianStatic_getStrokeWithFloat_withInt_(width, type);
}

+ (NSString *)addPossibleBreaksWithNSString:(NSString *)latex {
  return GeogebraCommonEuclidianEuclidianStatic_addPossibleBreaksWithNSString_(latex);
}

+ (id<GeogebraCommonAwtGRectangle>)drawMultilineLaTeXWithGeogebraCommonMainApp:(GeogebraCommonMainApp *)app
                                              withGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)tempGraphics
                                        withGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo
                                              withGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g2
                                                    withGeogebraCommonAwtGFont:(GeogebraCommonAwtGFont *)font
                                                   withGeogebraCommonAwtGColor:(GeogebraCommonAwtGColor *)fgColor
                                                   withGeogebraCommonAwtGColor:(GeogebraCommonAwtGColor *)bgColor
                                                                  withNSString:(NSString *)labelDesc
                                                                       withInt:(jint)xLabel
                                                                       withInt:(jint)yLabel
                                                                   withBoolean:(jboolean)serif {
  return GeogebraCommonEuclidianEuclidianStatic_drawMultilineLaTeXWithGeogebraCommonMainApp_withGeogebraCommonAwtGGraphics2D_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonAwtGGraphics2D_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGColor_withGeogebraCommonAwtGColor_withNSString_withInt_withInt_withBoolean_(app, tempGraphics, geo, g2, font, fgColor, bgColor, labelDesc, xLabel, yLabel, serif);
}

- (id<GeogebraCommonAwtGRectangle>)doDrawMultilineLaTeXWithGeogebraCommonMainApp:(GeogebraCommonMainApp *)app
                                                withGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)tempGraphics
                                          withGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo
                                                withGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g2
                                                      withGeogebraCommonAwtGFont:(GeogebraCommonAwtGFont *)font
                                                     withGeogebraCommonAwtGColor:(GeogebraCommonAwtGColor *)fgColor
                                                     withGeogebraCommonAwtGColor:(GeogebraCommonAwtGColor *)bgColor
                                                                    withNSString:(NSString *)labelDesc
                                                                         withInt:(jint)xLabel
                                                                         withInt:(jint)yLabel
                                                                     withBoolean:(jboolean)serif {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

+ (GeogebraCommonAwtGFont *)getIndexFontWithGeogebraCommonAwtGFont:(GeogebraCommonAwtGFont *)f {
  return GeogebraCommonEuclidianEuclidianStatic_getIndexFontWithGeogebraCommonAwtGFont_(f);
}

+ (GeogebraCommonAwtGPoint *)drawIndexedStringWithGeogebraCommonMainApp:(GeogebraCommonMainApp *)app
                                       withGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g3
                                                           withNSString:(NSString *)str
                                                              withFloat:(jfloat)xPos
                                                              withFloat:(jfloat)yPos
                                                            withBoolean:(jboolean)serif
                                                            withBoolean:(jboolean)precise {
  return GeogebraCommonEuclidianEuclidianStatic_drawIndexedStringWithGeogebraCommonMainApp_withGeogebraCommonAwtGGraphics2D_withNSString_withFloat_withFloat_withBoolean_withBoolean_(app, g3, str, xPos, yPos, serif, precise);
}

+ (jdouble)measureStringWithNSString:(NSString *)tempStr
          withGeogebraCommonAwtGFont:(GeogebraCommonAwtGFont *)font
withGeogebraCommonAwtGFontRenderContext:(GeogebraCommonAwtGFontRenderContext *)frc {
  return GeogebraCommonEuclidianEuclidianStatic_measureStringWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(tempStr, font, frc);
}

- (void)doFillAfterImageLoadedWithGeogebraCommonAwtGShape:(id<GeogebraCommonAwtGShape>)shape
                         withGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g3
                      withGeogebraCommonAwtGBufferedImage:(id<GeogebraCommonAwtGBufferedImage>)gi
                                withGeogebraCommonMainApp:(GeogebraCommonMainApp *)app {
}

+ (void)fillAfterImageLoadedWithGeogebraCommonAwtGShape:(id<GeogebraCommonAwtGShape>)shape
                       withGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g3
                    withGeogebraCommonAwtGBufferedImage:(id<GeogebraCommonAwtGBufferedImage>)gi
                              withGeogebraCommonMainApp:(GeogebraCommonMainApp *)app {
  GeogebraCommonEuclidianEuclidianStatic_fillAfterImageLoadedWithGeogebraCommonAwtGShape_withGeogebraCommonAwtGGraphics2D_withGeogebraCommonAwtGBufferedImage_withGeogebraCommonMainApp_(shape, g3, gi, app);
}

+ (id<GeogebraCommonAwtGRectangle>)drawMultiLineTextWithGeogebraCommonMainApp:(GeogebraCommonMainApp *)app
                                                                 withNSString:(NSString *)labelDesc
                                                                      withInt:(jint)xLabel
                                                                      withInt:(jint)yLabel
                                             withGeogebraCommonAwtGGraphics2D:(id<GeogebraCommonAwtGGraphics2D>)g2
                                                                  withBoolean:(jboolean)serif
                                                   withGeogebraCommonAwtGFont:(GeogebraCommonAwtGFont *)textFont {
  return GeogebraCommonEuclidianEuclidianStatic_drawMultiLineTextWithGeogebraCommonMainApp_withNSString_withInt_withInt_withGeogebraCommonAwtGGraphics2D_withBoolean_withGeogebraCommonAwtGFont_(app, labelDesc, xLabel, yLabel, g2, serif, textFont);
}

- (instancetype)init {
  GeogebraCommonEuclidianEuclidianStatic_init(self);
  return self;
}

+ (void)initialize {
  if (self == [GeogebraCommonEuclidianEuclidianStatic class]) {
    JreStrongAssign(&GeogebraCommonEuclidianEuclidianStatic_standardStroke_, nil, [((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newMyBasicStrokeWithFloat:1.0f]);
    JreStrongAssign(&GeogebraCommonEuclidianEuclidianStatic_selStroke_, nil, [GeogebraCommonFactoriesAwtFactory_get_prototype_() newMyBasicStrokeWithFloat:1.0f + GeogebraCommonPluginEuclidianStyleConstants_SELECTION_ADD]);
    J2OBJC_SET_INITIALIZED(GeogebraCommonEuclidianEuclidianStatic)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "getDefaultStroke", NULL, "Lgeogebra.common.awt.GBasicStroke;", 0x9, NULL, NULL },
    { "getDefaultSelectionStroke", NULL, "Lgeogebra.common.awt.GBasicStroke;", 0x9, NULL, NULL },
    { "textWidthWithNSString:withGeogebraCommonAwtGFont:withGeogebraCommonAwtGFontRenderContext:", "textWidth", "F", 0x19, NULL, NULL },
    { "getStrokeWithFloat:withInt:", "getStroke", "Lgeogebra.common.awt.GBasicStroke;", 0x9, NULL, NULL },
    { "addPossibleBreaksWithNSString:", "addPossibleBreaks", "Ljava.lang.String;", 0xc, NULL, NULL },
    { "drawMultilineLaTeXWithGeogebraCommonMainApp:withGeogebraCommonAwtGGraphics2D:withGeogebraCommonKernelGeosGeoElement:withGeogebraCommonAwtGGraphics2D:withGeogebraCommonAwtGFont:withGeogebraCommonAwtGColor:withGeogebraCommonAwtGColor:withNSString:withInt:withInt:withBoolean:", "drawMultilineLaTeX", "Lgeogebra.common.awt.GRectangle;", 0x19, NULL, NULL },
    { "doDrawMultilineLaTeXWithGeogebraCommonMainApp:withGeogebraCommonAwtGGraphics2D:withGeogebraCommonKernelGeosGeoElement:withGeogebraCommonAwtGGraphics2D:withGeogebraCommonAwtGFont:withGeogebraCommonAwtGColor:withGeogebraCommonAwtGColor:withNSString:withInt:withInt:withBoolean:", "doDrawMultilineLaTeX", "Lgeogebra.common.awt.GRectangle;", 0x404, NULL, NULL },
    { "getIndexFontWithGeogebraCommonAwtGFont:", "getIndexFont", "Lgeogebra.common.awt.GFont;", 0xa, NULL, NULL },
    { "drawIndexedStringWithGeogebraCommonMainApp:withGeogebraCommonAwtGGraphics2D:withNSString:withFloat:withFloat:withBoolean:withBoolean:", "drawIndexedString", "Lgeogebra.common.awt.GPoint;", 0x9, NULL, NULL },
    { "measureStringWithNSString:withGeogebraCommonAwtGFont:withGeogebraCommonAwtGFontRenderContext:", "measureString", "D", 0xa, NULL, NULL },
    { "doFillAfterImageLoadedWithGeogebraCommonAwtGShape:withGeogebraCommonAwtGGraphics2D:withGeogebraCommonAwtGBufferedImage:withGeogebraCommonMainApp:", "doFillAfterImageLoaded", "V", 0x4, NULL, NULL },
    { "fillAfterImageLoadedWithGeogebraCommonAwtGShape:withGeogebraCommonAwtGGraphics2D:withGeogebraCommonAwtGBufferedImage:withGeogebraCommonMainApp:", "fillAfterImageLoaded", "V", 0x9, NULL, NULL },
    { "drawMultiLineTextWithGeogebraCommonMainApp:withNSString:withInt:withInt:withGeogebraCommonAwtGGraphics2D:withBoolean:withGeogebraCommonAwtGFont:", "drawMultiLineText", "Lgeogebra.common.awt.GRectangle;", 0x19, NULL, NULL },
    { "init", NULL, NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "CLIP_DISTANCE_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonEuclidianEuclidianStatic_CLIP_DISTANCE },
    { "prototype_", NULL, 0x9, "Lgeogebra.common.euclidian.EuclidianStatic;", &GeogebraCommonEuclidianEuclidianStatic_prototype_, NULL,  },
    { "standardStroke_", NULL, 0xc, "Lgeogebra.common.awt.GBasicStroke;", &GeogebraCommonEuclidianEuclidianStatic_standardStroke_, NULL,  },
    { "selStroke_", NULL, 0xc, "Lgeogebra.common.awt.GBasicStroke;", &GeogebraCommonEuclidianEuclidianStatic_selStroke_, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonEuclidianEuclidianStatic = { 2, "EuclidianStatic", "geogebra.common.euclidian", NULL, 0x401, 14, methods, 4, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonEuclidianEuclidianStatic;
}

@end

id<GeogebraCommonAwtGBasicStroke> GeogebraCommonEuclidianEuclidianStatic_getDefaultStroke() {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  return GeogebraCommonEuclidianEuclidianStatic_standardStroke_;
}

id<GeogebraCommonAwtGBasicStroke> GeogebraCommonEuclidianEuclidianStatic_getDefaultSelectionStroke() {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  return GeogebraCommonEuclidianEuclidianStatic_selStroke_;
}

jfloat GeogebraCommonEuclidianEuclidianStatic_textWidthWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(NSString *str, GeogebraCommonAwtGFont *font, GeogebraCommonAwtGFontRenderContext *frc) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  if ([((NSString *) nil_chk(str)) isEqual:@""]) return 0.0f;
  id<GeogebraCommonAwtFontGTextLayout> layout = [((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newTextLayoutWithNSString:str withGeogebraCommonAwtGFont:font withGeogebraCommonAwtGFontRenderContext:frc];
  return [((id<GeogebraCommonAwtFontGTextLayout>) nil_chk(layout)) getAdvance];
}

id<GeogebraCommonAwtGBasicStroke> GeogebraCommonEuclidianEuclidianStatic_getStrokeWithFloat_withInt_(jfloat width, jint type) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  IOSFloatArray *dash;
  switch (type) {
    case GeogebraCommonPluginEuclidianStyleConstants_LINE_TYPE_DOTTED:
    dash = [IOSFloatArray arrayWithLength:2];
    *IOSFloatArray_GetRef(dash, 0) = width;
    *IOSFloatArray_GetRef(dash, 1) = 3.0f;
    break;
    case GeogebraCommonPluginEuclidianStyleConstants_LINE_TYPE_DASHED_SHORT:
    dash = [IOSFloatArray arrayWithLength:2];
    *IOSFloatArray_GetRef(dash, 0) = 4.0f + width;
    *IOSFloatArray_GetRef(dash, 1) = 4.0f;
    break;
    case GeogebraCommonPluginEuclidianStyleConstants_LINE_TYPE_DASHED_LONG:
    dash = [IOSFloatArray arrayWithLength:2];
    *IOSFloatArray_GetRef(dash, 0) = 8.0f + width;
    *IOSFloatArray_GetRef(dash, 1) = 8.0f;
    break;
    case GeogebraCommonPluginEuclidianStyleConstants_LINE_TYPE_DASHED_DOTTED:
    dash = [IOSFloatArray arrayWithLength:4];
    *IOSFloatArray_GetRef(dash, 0) = 8.0f + width;
    *IOSFloatArray_GetRef(dash, 1) = 4.0f;
    *IOSFloatArray_GetRef(dash, 2) = width;
    *IOSFloatArray_GetRef(dash, 3) = IOSFloatArray_Get(dash, 1);
    break;
    default:
    dash = nil;
  }
  jint endCap = dash != nil ? GeogebraCommonAwtGBasicStroke_CAP_BUTT : [((id<GeogebraCommonAwtGBasicStroke>) nil_chk(GeogebraCommonEuclidianEuclidianStatic_standardStroke_)) getEndCap];
  return [((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newBasicStrokeWithFloat:width withInt:endCap withInt:[((id<GeogebraCommonAwtGBasicStroke>) nil_chk(GeogebraCommonEuclidianEuclidianStatic_standardStroke_)) getLineJoin] withFloat:[GeogebraCommonEuclidianEuclidianStatic_standardStroke_ getMiterLimit] withFloatArray:dash withFloat:0.0f];
}

NSString *GeogebraCommonEuclidianEuclidianStatic_addPossibleBreaksWithNSString_(NSString *latex) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  JavaLangStringBuilder *latexTmp = [new_JavaLangStringBuilder_initWithNSString_(latex) autorelease];
  jint depth = 0;
  jboolean no_addition = YES;
  for (jint i = 0; i < [latexTmp length] - 2; i++) {
    jchar character = [latexTmp charAtWithInt:i];
    switch (character) {
      case '(':
      case '[':
      case '{':
      depth++;
      break;
      case ')':
      case ']':
      case '}':
      depth--;
      break;
      case '\\':
      if ([latexTmp charAtWithInt:i + 1] != ';') break;
      i++;
      [latexTmp insertWithInt:i + 1 withNSString:@"\\?"];
      i = i + 2;
      break;
      case ' ':
      if ([latexTmp charAtWithInt:i + 1] != ' ') break;
      i++;
      case '*':
      if (depth != 0) break;
      [latexTmp insertWithInt:i + 1 withNSString:@"\\?"];
      i = i + 2;
      break;
      case '+':
      case '-':
      if (depth != 0) break;
      [latexTmp insertWithInt:i + 1 withNSString:@"\\-"];
      i = i + 2;
      no_addition = NO;
    }
  }
  if (no_addition) {
    return [((NSString *) nil_chk([latexTmp description])) replaceAll:@"\\?" withReplacement:@"\\-"];
  }
  return [((NSString *) nil_chk([latexTmp description])) replaceAll:@"\\?" withReplacement:@""];
}

id<GeogebraCommonAwtGRectangle> GeogebraCommonEuclidianEuclidianStatic_drawMultilineLaTeXWithGeogebraCommonMainApp_withGeogebraCommonAwtGGraphics2D_withGeogebraCommonKernelGeosGeoElement_withGeogebraCommonAwtGGraphics2D_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGColor_withGeogebraCommonAwtGColor_withNSString_withInt_withInt_withBoolean_(GeogebraCommonMainApp *app, id<GeogebraCommonAwtGGraphics2D> tempGraphics, GeogebraCommonKernelGeosGeoElement *geo, id<GeogebraCommonAwtGGraphics2D> g2, GeogebraCommonAwtGFont *font, GeogebraCommonAwtGColor *fgColor, GeogebraCommonAwtGColor *bgColor, NSString *labelDesc, jint xLabel, jint yLabel, jboolean serif) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  return [((GeogebraCommonEuclidianEuclidianStatic *) nil_chk(GeogebraCommonEuclidianEuclidianStatic_prototype_)) doDrawMultilineLaTeXWithGeogebraCommonMainApp:app withGeogebraCommonAwtGGraphics2D:tempGraphics withGeogebraCommonKernelGeosGeoElement:geo withGeogebraCommonAwtGGraphics2D:g2 withGeogebraCommonAwtGFont:font withGeogebraCommonAwtGColor:fgColor withGeogebraCommonAwtGColor:bgColor withNSString:labelDesc withInt:xLabel withInt:yLabel withBoolean:serif];
}

GeogebraCommonAwtGFont *GeogebraCommonEuclidianEuclidianStatic_getIndexFontWithGeogebraCommonAwtGFont_(GeogebraCommonAwtGFont *f) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  jint newSize = JavaLangMath_maxWithInt_withInt_(J2ObjCFpToInt(([((GeogebraCommonAwtGFont *) nil_chk(f)) getSize] * 0.9)), 8);
  return [f deriveFontWithInt:[f getStyle] withInt:newSize];
}

GeogebraCommonAwtGPoint *GeogebraCommonEuclidianEuclidianStatic_drawIndexedStringWithGeogebraCommonMainApp_withGeogebraCommonAwtGGraphics2D_withNSString_withFloat_withFloat_withBoolean_withBoolean_(GeogebraCommonMainApp *app, id<GeogebraCommonAwtGGraphics2D> g3, NSString *str, jfloat xPos, jfloat yPos, jboolean serif, jboolean precise) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  GeogebraCommonAwtGFont *g2font = [((id<GeogebraCommonAwtGGraphics2D>) nil_chk(g3)) getFont];
  g2font = [((GeogebraCommonMainApp *) nil_chk(app)) getFontCanDisplayWithNSString:str withBoolean:serif withInt:[((GeogebraCommonAwtGFont *) nil_chk(g2font)) getStyle] withInt:[g2font getSize]];
  GeogebraCommonAwtGFont *indexFont = GeogebraCommonEuclidianEuclidianStatic_getIndexFontWithGeogebraCommonAwtGFont_(g2font);
  GeogebraCommonAwtGFont *font = g2font;
  GeogebraCommonAwtGFontRenderContext *frc = [g3 getFontRenderContext];
  jint indexOffset = [((GeogebraCommonAwtGFont *) nil_chk(indexFont)) getSize] / 2;
  jfloat maxY = 0;
  jint depth = 0;
  jfloat x = xPos;
  jfloat y = yPos;
  jint startPos = 0;
  if (str == nil) return nil;
  jint length = ((jint) [((NSString *) nil_chk(str)) length]);
  for (jint i = 0; i < length; i++) {
    switch ([str charAtWithInt:i]) {
      case '_':
      if (i > startPos) {
        font = (depth == 0) ? g2font : indexFont;
        y = yPos + depth * indexOffset;
        if (y > maxY) maxY = y;
        NSString *tempStr = [str substring:startPos endIndex:i];
        [g3 setFontWithGeogebraCommonAwtGFont:font];
        [g3 drawStringWithNSString:tempStr withFloat:x withFloat:y];
        x += GeogebraCommonEuclidianEuclidianStatic_measureStringWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(tempStr, font, frc);
      }
      startPos = i + 1;
      depth++;
      if (startPos < length && [str charAtWithInt:startPos] != '{') {
        font = (depth == 0) ? g2font : indexFont;
        y = yPos + depth * indexOffset;
        if (y > maxY) maxY = y;
        NSString *tempStr = [str substring:startPos endIndex:startPos + 1];
        [g3 setFontWithGeogebraCommonAwtGFont:font];
        [g3 drawStringWithNSString:tempStr withFloat:x withFloat:y];
        x += GeogebraCommonEuclidianEuclidianStatic_measureStringWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(tempStr, font, frc);
        depth--;
      }
      i++;
      startPos++;
      break;
      case '}':
      if (depth > 0) {
        if (i > startPos) {
          font = (depth == 0) ? g2font : indexFont;
          y = yPos + depth * indexOffset;
          if (y > maxY) maxY = y;
          NSString *tempStr = [str substring:startPos endIndex:i];
          [g3 setFontWithGeogebraCommonAwtGFont:font];
          [g3 drawStringWithNSString:tempStr withFloat:x withFloat:y];
          x += GeogebraCommonEuclidianEuclidianStatic_measureStringWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(tempStr, font, frc);
        }
        startPos = i + 1;
        depth--;
      }
      break;
    }
  }
  if (startPos < length) {
    font = (depth == 0) ? g2font : indexFont;
    y = yPos + depth * indexOffset;
    if (y > maxY) maxY = y;
    NSString *tempStr = [str substring:startPos];
    [g3 setFontWithGeogebraCommonAwtGFont:font];
    [g3 drawStringWithNSString:tempStr withFloat:x withFloat:y];
    x += GeogebraCommonEuclidianEuclidianStatic_measureStringWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(tempStr, font, frc);
  }
  [g3 setFontWithGeogebraCommonAwtGFont:g2font];
  return [new_GeogebraCommonAwtGPoint_initWithInt_withInt_(JavaLangMath_roundWithFloat_(x - xPos), JavaLangMath_roundWithFloat_(maxY - yPos)) autorelease];
}

jdouble GeogebraCommonEuclidianEuclidianStatic_measureStringWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_(NSString *tempStr, GeogebraCommonAwtGFont *font, GeogebraCommonAwtGFontRenderContext *frc) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  if (frc != nil) return [((id<GeogebraCommonAwtFontGTextLayout>) nil_chk([((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newTextLayoutWithNSString:tempStr withGeogebraCommonAwtGFont:font withGeogebraCommonAwtGFontRenderContext:frc])) getAdvance];
  return GeogebraCommonUtilStringUtil_estimateLengthWithNSString_withGeogebraCommonAwtGFont_(tempStr, font);
}

void GeogebraCommonEuclidianEuclidianStatic_fillAfterImageLoadedWithGeogebraCommonAwtGShape_withGeogebraCommonAwtGGraphics2D_withGeogebraCommonAwtGBufferedImage_withGeogebraCommonMainApp_(id<GeogebraCommonAwtGShape> shape, id<GeogebraCommonAwtGGraphics2D> g3, id<GeogebraCommonAwtGBufferedImage> gi, GeogebraCommonMainApp *app) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  [((GeogebraCommonEuclidianEuclidianStatic *) nil_chk(GeogebraCommonEuclidianEuclidianStatic_prototype_)) doFillAfterImageLoadedWithGeogebraCommonAwtGShape:shape withGeogebraCommonAwtGGraphics2D:g3 withGeogebraCommonAwtGBufferedImage:gi withGeogebraCommonMainApp:app];
}

id<GeogebraCommonAwtGRectangle> GeogebraCommonEuclidianEuclidianStatic_drawMultiLineTextWithGeogebraCommonMainApp_withNSString_withInt_withInt_withGeogebraCommonAwtGGraphics2D_withBoolean_withGeogebraCommonAwtGFont_(GeogebraCommonMainApp *app, NSString *labelDesc, jint xLabel, jint yLabel, id<GeogebraCommonAwtGGraphics2D> g2, jboolean serif, GeogebraCommonAwtGFont *textFont) {
  GeogebraCommonEuclidianEuclidianStatic_initialize();
  jint lines = 0;
  jint fontSize = [((GeogebraCommonAwtGFont *) nil_chk(textFont)) getSize];
  jfloat lineSpread = fontSize * 1.5f;
  GeogebraCommonAwtGFont *font = [((GeogebraCommonMainApp *) nil_chk(app)) getFontCanDisplayWithNSString:labelDesc withBoolean:serif withInt:[textFont getStyle] withInt:fontSize];
  GeogebraCommonAwtGFontRenderContext *frc = [((id<GeogebraCommonAwtGGraphics2D>) nil_chk(g2)) getFontRenderContext];
  jint xoffset = 0;
  jint lineBegin = 0;
  jint length = ((jint) [((NSString *) nil_chk(labelDesc)) length]);
  for (jint i = 0; i < length - 1; i++) {
    if ([labelDesc charAtWithInt:i] == 0x000a) {
      [g2 setFontWithGeogebraCommonAwtGFont:font];
      [g2 drawStringWithNSString:[labelDesc substring:lineBegin endIndex:i] withFloat:xLabel withFloat:yLabel + lines * lineSpread];
      jint width = J2ObjCFpToInt(GeogebraCommonEuclidianEuclidianStatic_textWidthWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_([labelDesc substring:lineBegin endIndex:i], font, frc));
      if (width > xoffset) xoffset = width;
      lines++;
      lineBegin = i + 1;
    }
  }
  jfloat ypos = yLabel + lines * lineSpread;
  [g2 setFontWithGeogebraCommonAwtGFont:font];
  [g2 drawStringWithNSString:[labelDesc substring:lineBegin] withFloat:xLabel withFloat:ypos];
  jint width = J2ObjCFpToInt(GeogebraCommonEuclidianEuclidianStatic_textWidthWithNSString_withGeogebraCommonAwtGFont_withGeogebraCommonAwtGFontRenderContext_([labelDesc substring:lineBegin], font, frc));
  if (width > xoffset) xoffset = width;
  jint height = J2ObjCFpToInt(((lines + 1) * lineSpread));
  return [((GeogebraCommonFactoriesAwtFactory *) nil_chk(GeogebraCommonFactoriesAwtFactory_get_prototype_())) newRectangleWithInt:xLabel - 3 withInt:yLabel - fontSize - 3 withInt:xoffset + 6 withInt:height + 6];
}

void GeogebraCommonEuclidianEuclidianStatic_init(GeogebraCommonEuclidianEuclidianStatic *self) {
  NSObject_init(self);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonEuclidianEuclidianStatic)
