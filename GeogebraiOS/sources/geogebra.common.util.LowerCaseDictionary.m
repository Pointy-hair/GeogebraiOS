//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/util/LowerCaseDictionary.java
//


#include "J2ObjC_source.h"
#include "geogebra/common/util/Korean.h"
#include "geogebra/common/util/LowerCaseDictionary.h"
#include "geogebra/common/util/NormalizerMinimal.h"
#include "java/lang/Exception.h"
#include "java/util/ArrayList.h"
#include "java/util/HashMap.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/SortedSet.h"
#include "java/util/TreeSet.h"

#define GeogebraCommonUtilLowerCaseDictionary_serialVersionUID 1LL

@interface GeogebraCommonUtilLowerCaseDictionary () {
 @public
  JavaUtilTreeSet *treeSet_;
  GeogebraCommonUtilNormalizerMinimal *normalizer_;
}

@end

J2OBJC_FIELD_SETTER(GeogebraCommonUtilLowerCaseDictionary, treeSet_, JavaUtilTreeSet *)
J2OBJC_FIELD_SETTER(GeogebraCommonUtilLowerCaseDictionary, normalizer_, GeogebraCommonUtilNormalizerMinimal *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonUtilLowerCaseDictionary, serialVersionUID, jlong)

@implementation GeogebraCommonUtilLowerCaseDictionary

- (instancetype)initWithGeogebraCommonUtilNormalizerMinimal:(GeogebraCommonUtilNormalizerMinimal *)normalizer {
  GeogebraCommonUtilLowerCaseDictionary_initWithGeogebraCommonUtilNormalizerMinimal_(self, normalizer);
  return self;
}

- (void)addEntryWithNSString:(NSString *)s {
  NSString *lowerCase = [((GeogebraCommonUtilNormalizerMinimal *) nil_chk(normalizer_)) transformWithNSString:s];
  [self putWithId:lowerCase withId:s];
  [((JavaUtilTreeSet *) nil_chk(treeSet_)) addWithId:lowerCase];
}

- (jboolean)removeEntryWithNSString:(NSString *)s {
  NSString *lowerCase = [((NSString *) nil_chk(s)) lowercaseString];
  [self removeWithId:lowerCase];
  return [((JavaUtilTreeSet *) nil_chk(treeSet_)) removeWithId:lowerCase];
}

- (id<JavaUtilIterator>)getIterator {
  return [((JavaUtilTreeSet *) nil_chk(treeSet_)) iterator];
}

- (NSString *)lookupWithNSString:(NSString *)curr {
  if (curr == nil || [@"" isEqual:curr]) {
    return nil;
  }
  NSString *currLowerCase = [((NSString *) nil_chk(curr)) lowercaseString];
  @try {
    id<JavaUtilSortedSet> tailSet = [((JavaUtilTreeSet *) nil_chk(treeSet_)) tailSetWithId:currLowerCase];
    if (tailSet != nil) {
      NSString *firstObj = [tailSet first];
      if (firstObj != nil) {
        NSString *first = firstObj;
        if ([first hasPrefix:currLowerCase]) {
          NSString *ret = [self getWithId:first];
          return ret;
        }
      }
    }
  }
  @catch (JavaLangException *e) {
    return nil;
  }
  return nil;
}

- (id<JavaUtilList>)getCompletionsWithNSString:(NSString *)curr {
  if (curr == nil || [@"" isEqual:curr]) return nil;
  NSString *currLowerCase = [((GeogebraCommonUtilNormalizerMinimal *) nil_chk(normalizer_)) transformWithNSString:curr];
  @try {
    id<JavaUtilSortedSet> tailSet = [((JavaUtilTreeSet *) nil_chk(treeSet_)) tailSetWithId:currLowerCase];
    JavaUtilArrayList *completions = [new_JavaUtilArrayList_init() autorelease];
    id<JavaUtilIterator> compIter = [((id<JavaUtilSortedSet>) nil_chk(tailSet)) iterator];
    while ([((id<JavaUtilIterator>) nil_chk(compIter)) hasNext]) {
      NSString *comp = [compIter next];
      if (![((NSString *) nil_chk(comp)) hasPrefix:currLowerCase]) {
        break;
      }
      [completions addWithId:[self getWithId:comp]];
    }
    if ([completions isEmpty]) {
      return nil;
    }
    return completions;
  }
  @catch (JavaLangException *e) {
    return nil;
  }
}

- (id<JavaUtilList>)getCompletionsKoreanWithNSString:(NSString *)curr {
  if (curr == nil || [@"" isEqual:curr]) {
    return nil;
  }
  JavaUtilArrayList *completions = [new_JavaUtilArrayList_init() autorelease];
  NSString *koreanCurr = GeogebraCommonUtilKorean_flattenKoreanWithNSString_(curr);
  id<JavaUtilIterator> it = [self getIterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    NSString *str = [it next];
    if ([((NSString *) nil_chk(GeogebraCommonUtilKorean_flattenKoreanWithNSString_(str))) hasPrefix:koreanCurr]) {
      [completions addWithId:str];
    }
  }
  return [completions isEmpty] ? nil : completions;
}

- (void)clear {
  [super clear];
  [((JavaUtilTreeSet *) nil_chk(self->treeSet_)) clear];
}

- (void)dealloc {
  RELEASE_(treeSet_);
  RELEASE_(normalizer_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonUtilNormalizerMinimal:", "LowerCaseDictionary", NULL, 0x1, NULL, NULL },
    { "addEntryWithNSString:", "addEntry", "V", 0x1, NULL, NULL },
    { "removeEntryWithNSString:", "removeEntry", "Z", 0x1, NULL, NULL },
    { "getIterator", NULL, "Ljava.util.Iterator;", 0x1, NULL, NULL },
    { "lookupWithNSString:", "lookup", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "getCompletionsWithNSString:", "getCompletions", "Ljava.util.List;", 0x1, NULL, NULL },
    { "getCompletionsKoreanWithNSString:", "getCompletionsKorean", "Ljava.util.List;", 0x1, NULL, NULL },
    { "clear", NULL, "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "serialVersionUID_", NULL, 0x1a, "J", NULL, NULL, .constantValue.asLong = GeogebraCommonUtilLowerCaseDictionary_serialVersionUID },
    { "treeSet_", NULL, 0x2, "Ljava.util.TreeSet;", NULL, "Ljava/util/TreeSet<Ljava/lang/String;>;",  },
    { "normalizer_", NULL, 0x2, "Lgeogebra.common.util.NormalizerMinimal;", NULL, NULL,  },
  };
  static const char *superclass_type_args[] = {"Ljava.lang.String;", "Ljava.lang.String;"};
  static const J2ObjcClassInfo _GeogebraCommonUtilLowerCaseDictionary = { 2, "LowerCaseDictionary", "geogebra.common.util", NULL, 0x1, 8, methods, 3, fields, 2, superclass_type_args, 0, NULL, NULL, "Ljava/util/HashMap<Ljava/lang/String;Ljava/lang/String;>;Lgeogebra/common/util/AutoCompleteDictionary;" };
  return &_GeogebraCommonUtilLowerCaseDictionary;
}

@end

void GeogebraCommonUtilLowerCaseDictionary_initWithGeogebraCommonUtilNormalizerMinimal_(GeogebraCommonUtilLowerCaseDictionary *self, GeogebraCommonUtilNormalizerMinimal *normalizer) {
  JavaUtilHashMap_init(self);
  GeogebraCommonUtilLowerCaseDictionary_setAndConsume_treeSet_(self, new_JavaUtilTreeSet_init());
  GeogebraCommonUtilLowerCaseDictionary_set_normalizer_(self, normalizer);
}

GeogebraCommonUtilLowerCaseDictionary *new_GeogebraCommonUtilLowerCaseDictionary_initWithGeogebraCommonUtilNormalizerMinimal_(GeogebraCommonUtilNormalizerMinimal *normalizer) {
  GeogebraCommonUtilLowerCaseDictionary *self = [GeogebraCommonUtilLowerCaseDictionary alloc];
  GeogebraCommonUtilLowerCaseDictionary_initWithGeogebraCommonUtilNormalizerMinimal_(self, normalizer);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonUtilLowerCaseDictionary)
