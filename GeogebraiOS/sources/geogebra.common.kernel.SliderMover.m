//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/SliderMover.java
//


#include "J2ObjC_source.h"
#include "geogebra/common/kernel/PathMover.h"
#include "geogebra/common/kernel/PathMoverGeneric.h"
#include "geogebra/common/kernel/PathNormalizer.h"
#include "geogebra/common/kernel/SliderMover.h"
#include "geogebra/common/kernel/geos/GeoNumeric.h"
#include "java/lang/Double.h"

#define GeogebraCommonKernelSliderMover_BOUNDS_FIXED 1
#define GeogebraCommonKernelSliderMover_BOUNDS_INFINITE 2
#define GeogebraCommonKernelSliderMover_BOUNDS_FIXED_INFINITE 3
#define GeogebraCommonKernelSliderMover_BOUNDS_INFINITE_FIXED 4

@interface GeogebraCommonKernelSliderMover () {
 @public
  GeogebraCommonKernelGeosGeoNumeric *slider_;
}

- (void)init__WithDouble:(jdouble)param OBJC_METHOD_FAMILY_NONE;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelSliderMover, slider_, GeogebraCommonKernelGeosGeoNumeric *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelSliderMover, BOUNDS_FIXED, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelSliderMover, BOUNDS_INFINITE, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelSliderMover, BOUNDS_FIXED_INFINITE, jint)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelSliderMover, BOUNDS_INFINITE_FIXED, jint)

__attribute__((unused)) static void GeogebraCommonKernelSliderMover_init__WithDouble_(GeogebraCommonKernelSliderMover *self, jdouble param);

@implementation GeogebraCommonKernelSliderMover

- (instancetype)initWithGeogebraCommonKernelGeosGeoNumeric:(GeogebraCommonKernelGeosGeoNumeric *)path {
  GeogebraCommonKernelSliderMover_initWithGeogebraCommonKernelGeosGeoNumeric_(self, path);
  return self;
}

- (void)init__WithGeogebraCommonKernelGeosGeoNumeric:(GeogebraCommonKernelGeosGeoNumeric *)p {
  GeogebraCommonKernelSliderMover_init__WithDouble_(self, [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(p)) getValue]);
}

- (void)init__WithDouble:(jdouble)param {
  GeogebraCommonKernelSliderMover_init__WithDouble_(self, param);
}

- (void)getCurrentPositionWithGeogebraCommonKernelGeosGeoNumeric:(GeogebraCommonKernelGeosGeoNumeric *)p {
  [self calcPointWithGeogebraCommonKernelGeosGeoNumeric:p];
}

- (jboolean)getNextWithGeogebraCommonKernelGeosGeoNumeric:(GeogebraCommonKernelGeosGeoNumeric *)p {
  jboolean lineTo = YES;
  last_param_ = curr_param_;
  lastMaxBorderSet_ = maxBorderSet_;
  lastMinBorderSet_ = minBorderSet_;
  if (maxBorderSet_) {
    curr_param_ = min_param_;
    lineTo = NO;
    maxBorderSet_ = NO;
  }
  else if (minBorderSet_) {
    curr_param_ = max_param_;
    lineTo = NO;
    minBorderSet_ = NO;
  }
  else {
    jdouble new_param = curr_param_ + step_width_;
    if (new_param >= max_param_) {
      while (new_param >= max_param_ && [self smallerStep]) {
        new_param = curr_param_ + step_width_;
      }
      if (new_param >= max_param_) {
        new_param = max_param_;
        maxBorderSet_ = YES;
      }
    }
    else if (new_param <= min_param_) {
      while (new_param <= min_param_ && [self smallerStep]) {
        new_param = curr_param_ + step_width_;
      }
      if (new_param <= min_param_) {
        new_param = min_param_;
        minBorderSet_ = YES;
      }
    }
    curr_param_ = new_param;
  }
  [self calcPointWithGeogebraCommonKernelGeosGeoNumeric:p];
  return lineTo;
}

- (void)calcPointWithGeogebraCommonKernelGeosGeoNumeric:(GeogebraCommonKernelGeosGeoNumeric *)p {
  jdouble param;
  switch (mode_) {
    case GeogebraCommonKernelSliderMover_BOUNDS_FIXED:
    param = curr_param_;
    break;
    case GeogebraCommonKernelSliderMover_BOUNDS_INFINITE:
    param = GeogebraCommonKernelPathNormalizer_infFunctionWithDouble_(curr_param_);
    break;
    case GeogebraCommonKernelSliderMover_BOUNDS_FIXED_INFINITE:
    case GeogebraCommonKernelSliderMover_BOUNDS_INFINITE_FIXED:
    param = offset_ + GeogebraCommonKernelPathNormalizer_infFunctionWithDouble_(curr_param_);
    break;
    default:
    param = JavaLangDouble_NaN;
  }
  [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(p)) setValueWithDouble:param];
}

- (void)dealloc {
  RELEASE_(slider_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelGeosGeoNumeric:", "SliderMover", NULL, 0x1, NULL, NULL },
    { "init__WithGeogebraCommonKernelGeosGeoNumeric:", "init", "V", 0x1, NULL, NULL },
    { "init__WithDouble:", "init", "V", 0x2, NULL, NULL },
    { "getCurrentPositionWithGeogebraCommonKernelGeosGeoNumeric:", "getCurrentPosition", "V", 0x1, NULL, NULL },
    { "getNextWithGeogebraCommonKernelGeosGeoNumeric:", "getNext", "Z", 0x1, NULL, NULL },
    { "calcPointWithGeogebraCommonKernelGeosGeoNumeric:", "calcPoint", "V", 0x4, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "BOUNDS_FIXED_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelSliderMover_BOUNDS_FIXED },
    { "BOUNDS_INFINITE_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelSliderMover_BOUNDS_INFINITE },
    { "BOUNDS_FIXED_INFINITE_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelSliderMover_BOUNDS_FIXED_INFINITE },
    { "BOUNDS_INFINITE_FIXED_", NULL, 0x1a, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelSliderMover_BOUNDS_INFINITE_FIXED },
    { "slider_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoNumeric;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelSliderMover = { 2, "SliderMover", "geogebra.common.kernel", NULL, 0x1, 6, methods, 5, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelSliderMover;
}

@end

void GeogebraCommonKernelSliderMover_initWithGeogebraCommonKernelGeosGeoNumeric_(GeogebraCommonKernelSliderMover *self, GeogebraCommonKernelGeosGeoNumeric *path) {
  GeogebraCommonKernelPathMoverGeneric_init(self);
  GeogebraCommonKernelSliderMover_set_slider_(self, path);
}

GeogebraCommonKernelSliderMover *new_GeogebraCommonKernelSliderMover_initWithGeogebraCommonKernelGeosGeoNumeric_(GeogebraCommonKernelGeosGeoNumeric *path) {
  GeogebraCommonKernelSliderMover *self = [GeogebraCommonKernelSliderMover alloc];
  GeogebraCommonKernelSliderMover_initWithGeogebraCommonKernelGeosGeoNumeric_(self, path);
  return self;
}

void GeogebraCommonKernelSliderMover_init__WithDouble_(GeogebraCommonKernelSliderMover *self, jdouble param) {
  self->start_param_ = param;
  self->min_param_ = [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->slider_)) getIntervalMin];
  self->max_param_ = [self->slider_ getIntervalMax];
  if (self->start_param_ < self->min_param_ || self->start_param_ > self->max_param_) {
    self->param_extent_ = self->max_param_ - self->min_param_;
    self->start_param_ = fmod((self->start_param_ - self->min_param_), self->param_extent_);
    if (self->start_param_ < self->min_param_) self->start_param_ += self->param_extent_;
  }
  if (self->min_param_ == JavaLangDouble_NEGATIVE_INFINITY) {
    if (self->max_param_ == JavaLangDouble_POSITIVE_INFINITY) {
      self->mode_ = GeogebraCommonKernelSliderMover_BOUNDS_INFINITE;
      self->min_param_ = -1 + GeogebraCommonKernelPathMover_OPEN_BORDER_OFFSET;
      self->max_param_ = 1 - GeogebraCommonKernelPathMover_OPEN_BORDER_OFFSET;
      self->start_param_ = GeogebraCommonKernelPathNormalizer_inverseInfFunctionWithDouble_(self->start_param_);
    }
    else {
      self->mode_ = GeogebraCommonKernelSliderMover_BOUNDS_INFINITE_FIXED;
      self->start_param_ = 0;
      self->offset_ = self->max_param_;
      self->min_param_ = -1 + GeogebraCommonKernelPathMover_OPEN_BORDER_OFFSET;
      self->max_param_ = 0;
    }
  }
  else {
    if (self->max_param_ == JavaLangDouble_POSITIVE_INFINITY) {
      self->mode_ = GeogebraCommonKernelSliderMover_BOUNDS_FIXED_INFINITE;
      self->start_param_ = 0;
      self->offset_ = self->min_param_;
      self->min_param_ = 0;
      self->max_param_ = 1 - GeogebraCommonKernelPathMover_OPEN_BORDER_OFFSET;
    }
    else {
      self->mode_ = GeogebraCommonKernelSliderMover_BOUNDS_FIXED;
    }
  }
  self->param_extent_ = self->max_param_ - self->min_param_;
  self->start_paramUP_ = self->start_param_ + self->param_extent_;
  self->start_paramDOWN_ = self->start_param_ - self->param_extent_;
  self->max_step_width_ = self->param_extent_ / GeogebraCommonKernelPathMover_MIN_STEPS;
  self->posOrientation_ = YES;
  [self resetStartParameter];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelSliderMover)
