//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/Kernel.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/GeoGebraConstants.h"
#include "geogebra/common/cas/GeoGebraCAS.h"
#include "geogebra/common/euclidian/EuclidianConstants.h"
#include "geogebra/common/euclidian/EuclidianController.h"
#include "geogebra/common/euclidian/EuclidianView.h"
#include "geogebra/common/euclidian/EuclidianViewInterfaceCommon.h"
#include "geogebra/common/euclidian/EuclidianViewInterfaceSlim.h"
#include "geogebra/common/factories/FormatFactory.h"
#include "geogebra/common/gui/SetLabels.h"
#include "geogebra/common/gui/SetOrientation.h"
#include "geogebra/common/io/MyXMLHandler.h"
#include "geogebra/common/kernel/AlgoCasCellInterface.h"
#include "geogebra/common/kernel/AnimationManager.h"
#include "geogebra/common/kernel/AsynchronousCommand.h"
#include "geogebra/common/kernel/CASException.h"
#include "geogebra/common/kernel/CASGenericInterface.h"
#include "geogebra/common/kernel/ClientView.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/EquationSolver.h"
#include "geogebra/common/kernel/EquationSolverInterface.h"
#include "geogebra/common/kernel/GeoGebraCasInterface.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/KernelCAS.h"
#include "geogebra/common/kernel/LayerView.h"
#include "geogebra/common/kernel/Macro.h"
#include "geogebra/common/kernel/MacroKernel.h"
#include "geogebra/common/kernel/MacroManager.h"
#include "geogebra/common/kernel/Manager3DInterface.h"
#include "geogebra/common/kernel/ModeSetter.h"
#include "geogebra/common/kernel/PathRegionHandling.h"
#include "geogebra/common/kernel/StringTemplate.h"
#include "geogebra/common/kernel/SystemOfEquationsSolver.h"
#include "geogebra/common/kernel/UndoManager.h"
#include "geogebra/common/kernel/UpdateLocationView.h"
#include "geogebra/common/kernel/UserAwarenessListener.h"
#include "geogebra/common/kernel/View.h"
#include "geogebra/common/kernel/algos/AlgoCasBase.h"
#include "geogebra/common/kernel/algos/AlgoDependentBoolean.h"
#include "geogebra/common/kernel/algos/AlgoDependentNumber.h"
#include "geogebra/common/kernel/algos/AlgoDispatcher.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/algos/AlgoIf.h"
#include "geogebra/common/kernel/algos/AlgoMacro.h"
#include "geogebra/common/kernel/algos/AlgoPolygon.h"
#include "geogebra/common/kernel/algos/AlgoVectorPoint.h"
#include "geogebra/common/kernel/algos/ConstructionElement.h"
#include "geogebra/common/kernel/arithmetic/ExpressionNode.h"
#include "geogebra/common/kernel/arithmetic/ExpressionNodeConstants.h"
#include "geogebra/common/kernel/arithmetic/ExpressionNodeEvaluator.h"
#include "geogebra/common/kernel/arithmetic/ExpressionValue.h"
#include "geogebra/common/kernel/arithmetic/Function.h"
#include "geogebra/common/kernel/arithmetic/FunctionNVar.h"
#include "geogebra/common/kernel/arithmetic/FunctionVariable.h"
#include "geogebra/common/kernel/arithmetic/FunctionalNVar.h"
#include "geogebra/common/kernel/arithmetic/MyArbitraryConstant.h"
#include "geogebra/common/kernel/arithmetic/MyDouble.h"
#include "geogebra/common/kernel/arithmetic/Traversing.h"
#include "geogebra/common/kernel/arithmetic/Variable.h"
#include "geogebra/common/kernel/cas/AlgoUsingTempCASalgo.h"
#include "geogebra/common/kernel/cas/UsesCAS.h"
#include "geogebra/common/kernel/commands/AlgebraProcessor.h"
#include "geogebra/common/kernel/commands/CommandDispatcher.h"
#include "geogebra/common/kernel/geos/GeoAngle.h"
#include "geogebra/common/kernel/geos/GeoAxis.h"
#include "geogebra/common/kernel/geos/GeoBoolean.h"
#include "geogebra/common/kernel/geos/GeoButton.h"
#include "geogebra/common/kernel/geos/GeoCasCell.h"
#include "geogebra/common/kernel/geos/GeoConic.h"
#include "geogebra/common/kernel/geos/GeoConicPart.h"
#include "geogebra/common/kernel/geos/GeoCurveCartesian.h"
#include "geogebra/common/kernel/geos/GeoDummyVariable.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoElementSpreadsheet.h"
#include "geogebra/common/kernel/geos/GeoFunction.h"
#include "geogebra/common/kernel/geos/GeoFunctionNVar.h"
#include "geogebra/common/kernel/geos/GeoImage.h"
#include "geogebra/common/kernel/geos/GeoInterval.h"
#include "geogebra/common/kernel/geos/GeoLine.h"
#include "geogebra/common/kernel/geos/GeoList.h"
#include "geogebra/common/kernel/geos/GeoLocus.h"
#include "geogebra/common/kernel/geos/GeoNumeric.h"
#include "geogebra/common/kernel/geos/GeoPoint.h"
#include "geogebra/common/kernel/geos/GeoPolyLine.h"
#include "geogebra/common/kernel/geos/GeoPolygon.h"
#include "geogebra/common/kernel/geos/GeoRay.h"
#include "geogebra/common/kernel/geos/GeoSegment.h"
#include "geogebra/common/kernel/geos/GeoText.h"
#include "geogebra/common/kernel/geos/GeoTextField.h"
#include "geogebra/common/kernel/geos/GeoVec2D.h"
#include "geogebra/common/kernel/geos/GeoVec3D.h"
#include "geogebra/common/kernel/geos/GeoVector.h"
#include "geogebra/common/kernel/implicit/GeoImplicitPoly.h"
#include "geogebra/common/kernel/kernelND/GeoAxisND.h"
#include "geogebra/common/kernel/kernelND/GeoConicND.h"
#include "geogebra/common/kernel/kernelND/GeoCoordSys2D.h"
#include "geogebra/common/kernel/kernelND/GeoDirectionND.h"
#include "geogebra/common/kernel/kernelND/GeoLineND.h"
#include "geogebra/common/kernel/kernelND/GeoPlaneND.h"
#include "geogebra/common/kernel/kernelND/GeoPointND.h"
#include "geogebra/common/kernel/kernelND/GeoRayND.h"
#include "geogebra/common/kernel/kernelND/GeoSegmentND.h"
#include "geogebra/common/kernel/kernelND/GeoVectorND.h"
#include "geogebra/common/kernel/optimization/ExtremumFinder.h"
#include "geogebra/common/kernel/parser/Parser.h"
#include "geogebra/common/kernel/parser/cashandlers/ParserFunctions.h"
#include "geogebra/common/main/App.h"
#include "geogebra/common/main/AppCompanion.h"
#include "geogebra/common/main/GuiManagerInterface.h"
#include "geogebra/common/main/Localization.h"
#include "geogebra/common/main/MyError.h"
#include "geogebra/common/main/SelectionManager.h"
#include "geogebra/common/main/settings/CASSettings.h"
#include "geogebra/common/main/settings/Settings.h"
#include "geogebra/common/plugin/EventType.h"
#include "geogebra/common/plugin/GeoClass.h"
#include "geogebra/common/plugin/Operation.h"
#include "geogebra/common/plugin/ScriptManager.h"
#include "geogebra/common/plugin/script/GgbScript.h"
#include "geogebra/common/plugin/script/Script.h"
#include "geogebra/common/util/MaxSizeHashMap.h"
#include "geogebra/common/util/MyMath.h"
#include "geogebra/common/util/NumberFormatAdapter.h"
#include "geogebra/common/util/ScientificFormatAdapter.h"
#include "geogebra/common/util/StringUtil.h"
#include "geogebra/common/util/Unicode.h"
#include "java/lang/Double.h"
#include "java/lang/Error.h"
#include "java/lang/Exception.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/Math.h"
#include "java/lang/StringBuilder.h"
#include "java/lang/System.h"
#include "java/lang/Throwable.h"
#include "java/util/ArrayList.h"
#include "java/util/Comparator.h"
#include "java/util/Iterator.h"
#include "java/util/LinkedHashMap.h"
#include "java/util/List.h"
#include "java/util/TreeSet.h"

#define GeogebraCommonKernelKernel_INV_MIN_PRECISION 100000.0
#define GeogebraCommonKernelKernel_AXES_PRECISION 1.0E-14

@interface GeogebraCommonKernelKernel () {
 @public
  jint algebraStyle_;
  GeogebraCommonKernelMacroManager *macroManager_;
  jint angleUnit_;
  jboolean viewReiniting_;
  jboolean undoActive_;
  jboolean continuous_;
  id<GeogebraCommonKernelGeoGebraCasInterface> ggbCAS_;
  id<GeogebraCommonUtilNumberFormatAdapter> nf_;
  id<GeogebraCommonUtilScientificFormatAdapter> sf_;
  jint coordStyle_;
  jboolean useInternalCommandNames_;
  jboolean notifyConstructionProtocolViewAboutAddRemoveActive_;
  jboolean allowVisibilitySideEffects_;
  jboolean saveScriptsToXML_;
  jboolean elementDefaultAllowed_;
  jboolean silentMode_;
  jboolean wantAnimationStarted__;
  jboolean resolveUnkownVarsAsDummyGeos_;
  jboolean updateEVAgain_;
  jboolean forceUpdatingBoundingBox_;
  JavaLangStringBuilder *sbBuildExplicitLineEquation_;
  GeogebraCommonKernelEquationSolver *eqnSolver_;
  GeogebraCommonKernelSystemOfEquationsSolver *sysEqSolv_;
  GeogebraCommonKernelOptimizationExtremumFinder *extrFinder_;
  id<GeogebraCommonKernelManager3DInterface> manager3D_;
  id concurrentModificationLock_;
  jboolean showAnimationButton_;
  jboolean loadingMode_;
  JavaLangStringBuilder *sbFormat_;
  JavaLangStringBuilder *formatSB_;
  JavaLangStringBuilder *sbBuildImplicitEquation_;
  JavaLangStringBuilder *sbBuildLHS_;
  JavaLangStringBuilder *sbBuildExplicitConicEquation_;
  JavaLangStringBuilder *sbFormatSF_;
  NSString *libraryJavaScript_;
  jboolean isSaving__;
  JavaLangStringBuilder *sbFormatAngle_;
  jboolean arcusFunctionCreatesAngle_;
  GeogebraCommonUtilMaxSizeHashMap *ggbCasCache_;
  jboolean graphicsView2showing_;
  jboolean notifyRepaint__;
  jboolean notifyViewsActive_;
  JavaUtilArrayList *renameListenerAlgos_;
  jboolean spreadsheetBatchRunning_;
  jboolean isGettingUndo__;
  JavaUtilArrayList *selectedGeosNames_;
  GeogebraCommonKernelGeosGeoVec2D *imaginaryUnit_;
  GeogebraCommonKernelGeosGeoElementSpreadsheet *ges_;
  GeogebraCommonKernelAlgosAlgoDispatcher *algoDispatcher_;
}

- (jint)getNextBreakpointWithInt:(jint)initStep;

- (jint)getPreviousBreakpointWithInt:(jint)initStep;

+ (jchar)signWithDouble:(jdouble)x;

- (NSString *)formatPiERawWithDouble:(jdouble)x
withGeogebraCommonUtilNumberFormatAdapter:(id<GeogebraCommonUtilNumberFormatAdapter>)numF
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl;

- (NSString *)formatNFWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl;

- (IOSDoubleArray *)buildImplicitVarPartWithJavaLangStringBuilder:(JavaLangStringBuilder *)sbBuildImplicitVarPart
                                                  withDoubleArray:(IOSDoubleArray *)numbers
                                                withNSStringArray:(IOSObjectArray *)vars
                                                      withBoolean:(jboolean)KEEP_LEADING_SIGN
                                                      withBoolean:(jboolean)CANCEL_DOWN
                                                      withBoolean:(jboolean)needsZ
                           withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl;

- (jboolean)isZeroFigureWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl;

- (NSString *)formatSFWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl;

- (NSString *)formatCoeffWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl;

- (NSString *)evaluateGeoGebraCASWithNSString:(NSString *)exp
                                  withBoolean:(jboolean)useCaching
withGeogebraCommonKernelArithmeticMyArbitraryConstant:(GeogebraCommonKernelArithmeticMyArbitraryConstant *)arbconst
       withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl;

- (void)addViewsWithJavaLangInteger:(JavaLangInteger *)id_
                    withDoubleArray:(IOSDoubleArray *)viewBounds;

- (void)printAttachedViews;

- (void)notifyRenameListenerAlgos;

- (jboolean)kernelHas3DObjects;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, macroManager_, GeogebraCommonKernelMacroManager *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, ggbCAS_, id<GeogebraCommonKernelGeoGebraCasInterface>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, nf_, id<GeogebraCommonUtilNumberFormatAdapter>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sf_, id<GeogebraCommonUtilScientificFormatAdapter>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sbBuildExplicitLineEquation_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, eqnSolver_, GeogebraCommonKernelEquationSolver *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sysEqSolv_, GeogebraCommonKernelSystemOfEquationsSolver *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, extrFinder_, GeogebraCommonKernelOptimizationExtremumFinder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, manager3D_, id<GeogebraCommonKernelManager3DInterface>)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, concurrentModificationLock_, id)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sbFormat_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, formatSB_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sbBuildImplicitEquation_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sbBuildLHS_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sbBuildExplicitConicEquation_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sbFormatSF_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, libraryJavaScript_, NSString *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, sbFormatAngle_, JavaLangStringBuilder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, ggbCasCache_, GeogebraCommonUtilMaxSizeHashMap *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, renameListenerAlgos_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, selectedGeosNames_, JavaUtilArrayList *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, imaginaryUnit_, GeogebraCommonKernelGeosGeoVec2D *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, ges_, GeogebraCommonKernelGeosGeoElementSpreadsheet *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel, algoDispatcher_, GeogebraCommonKernelAlgosAlgoDispatcher *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelKernel, INV_MIN_PRECISION, jdouble)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelKernel, AXES_PRECISION, jdouble)

__attribute__((unused)) static GeogebraCommonMainApp *GeogebraCommonKernelKernel_getApplication(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static jboolean GeogebraCommonKernelKernel_isAnimationRunning(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static jint GeogebraCommonKernelKernel_getNextBreakpointWithInt_(GeogebraCommonKernelKernel *self, jint initStep);

__attribute__((unused)) static jint GeogebraCommonKernelKernel_getPreviousBreakpointWithInt_(GeogebraCommonKernelKernel *self, jint initStep);

__attribute__((unused)) static jboolean GeogebraCommonKernelKernel_isContinuous(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static jchar GeogebraCommonKernelKernel_signWithDouble_(jdouble x);

__attribute__((unused)) static JavaLangStringBuilder *GeogebraCommonKernelKernel_buildImplicitEquationWithDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withChar_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, IOSDoubleArray *numbers, IOSObjectArray *vars, jboolean KEEP_LEADING_SIGN, jboolean CANCEL_DOWN, jboolean needsZ, jchar op, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static void GeogebraCommonKernelKernel_formatSignedCoefficientWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, JavaLangStringBuilder *sb, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static void GeogebraCommonKernelKernel_formatSignedWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, JavaLangStringBuilder *sb, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static void GeogebraCommonKernelKernel_formatSignedCoefficientPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, JavaLangStringBuilder *sb, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static void GeogebraCommonKernelKernel_formatSignedPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, JavaLangStringBuilder *sb, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static NSString *GeogebraCommonKernelKernel_formatPiERawWithDouble_withGeogebraCommonUtilNumberFormatAdapter_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, id<GeogebraCommonUtilNumberFormatAdapter> numF, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static NSString *GeogebraCommonKernelKernel_formatRawWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble number, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static NSString *GeogebraCommonKernelKernel_formatNFWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static NSString *GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static IOSDoubleArray *GeogebraCommonKernelKernel_buildImplicitVarPartWithJavaLangStringBuilder_withDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, JavaLangStringBuilder *sbBuildImplicitVarPart, IOSDoubleArray *numbers, IOSObjectArray *vars, jboolean KEEP_LEADING_SIGN, jboolean CANCEL_DOWN, jboolean needsZ, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static jboolean GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static NSString *GeogebraCommonKernelKernel_formatSFWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static NSString *GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static JavaLangStringBuilder *GeogebraCommonKernelKernel_formatAngleWithDouble_withDouble_withGeogebraCommonKernelStringTemplate_withBoolean_(GeogebraCommonKernelKernel *self, jdouble alpha, jdouble precision, GeogebraCommonKernelStringTemplate *tpl, jboolean unbounded);

__attribute__((unused)) static jint GeogebraCommonKernelKernel_getAngleUnit(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static jint GeogebraCommonKernelKernel_getPrintDecimals(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static jint GeogebraCommonKernelKernel_getPrintFigures(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static jboolean GeogebraCommonKernelKernel_isResolveUnkownVarsAsDummyGeos(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static NSString *GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, NSString *exp, GeogebraCommonKernelArithmeticMyArbitraryConstant *arbconst, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static NSString *GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withBoolean_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, NSString *exp, jboolean useCaching, GeogebraCommonKernelArithmeticMyArbitraryConstant *arbconst, GeogebraCommonKernelStringTemplate *tpl);

__attribute__((unused)) static jint GeogebraCommonKernelKernel_getCoordStyle(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static GeogebraCommonKernelGeosGeoElement *GeogebraCommonKernelKernel_lookupLabelWithNSString_(GeogebraCommonKernelKernel *self, NSString *label);

__attribute__((unused)) static GeogebraCommonKernelGeosGeoCasCell *GeogebraCommonKernelKernel_lookupCasCellLabelWithNSString_(GeogebraCommonKernelKernel *self, NSString *label);

__attribute__((unused)) static GeogebraCommonKernelGeosGeoElement *GeogebraCommonKernelKernel_lookupLabelWithNSString_withBoolean_(GeogebraCommonKernelKernel *self, NSString *label, jboolean autoCreate);

__attribute__((unused)) static void GeogebraCommonKernelKernel_addViewsWithJavaLangInteger_withDoubleArray_(GeogebraCommonKernelKernel *self, JavaLangInteger *id_, IOSDoubleArray *viewBounds);

__attribute__((unused)) static void GeogebraCommonKernelKernel_notifyRepaint(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static void GeogebraCommonKernelKernel_notifyReset(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static void GeogebraCommonKernelKernel_notifyClearView(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static void GeogebraCommonKernelKernel_printAttachedViews(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static void GeogebraCommonKernelKernel_notifyAddAllWithGeogebraCommonKernelView_(GeogebraCommonKernelKernel *self, id<GeogebraCommonKernelView> view);

__attribute__((unused)) static void GeogebraCommonKernelKernel_notifyRenameListenerAlgos(GeogebraCommonKernelKernel *self);

__attribute__((unused)) static void GeogebraCommonKernelKernel_notifyAddAllWithGeogebraCommonKernelView_withInt_(GeogebraCommonKernelKernel *self, id<GeogebraCommonKernelView> view, jint consStep);

__attribute__((unused)) static GeogebraCommonKernelArithmeticMyDouble *GeogebraCommonKernelKernel_convertIndexToNumberWithNSString_(GeogebraCommonKernelKernel *self, NSString *str);

__attribute__((unused)) static jboolean GeogebraCommonKernelKernel_kernelHas3DObjects(GeogebraCommonKernelKernel *self);

@interface GeogebraCommonKernelKernel_$1 : NSObject < JavaUtilComparator > {
 @public
  jdouble val$eps_;
}

- (jint)compareWithId:(JavaLangDouble *)d1
               withId:(JavaLangDouble *)d2;

- (instancetype)initWithDouble:(jdouble)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(GeogebraCommonKernelKernel_$1)

__attribute__((unused)) static void GeogebraCommonKernelKernel_$1_initWithDouble_(GeogebraCommonKernelKernel_$1 *self, jdouble capture$0);

__attribute__((unused)) static GeogebraCommonKernelKernel_$1 *new_GeogebraCommonKernelKernel_$1_initWithDouble_(jdouble capture$0) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(GeogebraCommonKernelKernel_$1)

@interface GeogebraCommonKernelKernel_$2 : NSObject < GeogebraCommonKernelArithmeticTraversing > {
 @public
  GeogebraCommonKernelKernel *this$0_;
}

- (id<GeogebraCommonKernelArithmeticExpressionValue>)processWithGeogebraCommonKernelArithmeticExpressionValue:(id<GeogebraCommonKernelArithmeticExpressionValue>)ev;

- (instancetype)initWithGeogebraCommonKernelKernel:(GeogebraCommonKernelKernel *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(GeogebraCommonKernelKernel_$2)

J2OBJC_FIELD_SETTER(GeogebraCommonKernelKernel_$2, this$0_, GeogebraCommonKernelKernel *)

__attribute__((unused)) static void GeogebraCommonKernelKernel_$2_initWithGeogebraCommonKernelKernel_(GeogebraCommonKernelKernel_$2 *self, GeogebraCommonKernelKernel *outer$);

__attribute__((unused)) static GeogebraCommonKernelKernel_$2 *new_GeogebraCommonKernelKernel_$2_initWithGeogebraCommonKernelKernel_(GeogebraCommonKernelKernel *outer$) NS_RETURNS_RETAINED;

J2OBJC_TYPE_LITERAL_HEADER(GeogebraCommonKernelKernel_$2)

J2OBJC_INITIALIZED_DEFN(GeogebraCommonKernelKernel)

jint GeogebraCommonKernelKernel_MAX_SPREADSHEET_COLUMNS_DESKTOP_ = 9999;
jint GeogebraCommonKernelKernel_MAX_SPREADSHEET_ROWS_DESKTOP_ = 9999;
jint GeogebraCommonKernelKernel_MAX_SPREADSHEET_COLUMNS_VISIBLE_;
jint GeogebraCommonKernelKernel_MAX_SPREADSHEET_ROWS_VISIBLE_;
NSString *GeogebraCommonKernelKernel_STRING_PLUS_MINUS_ = @"\u00b1 ";
NSString *GeogebraCommonKernelKernel_STRING_MINUS_PLUS_ = @"\u2213 ";
NSString *GeogebraCommonKernelKernel_TMP_VARIABLE_PREFIX_ = @"ggbtmpvar";
jdouble GeogebraCommonKernelKernel_SQRT_2_HALF_;
jint GeogebraCommonKernelKernel_GEOGEBRA_CAS_CACHE_SIZE_ = 500;
NSString *GeogebraCommonKernelKernel_defaultLibraryJavaScript_ = @"function ggbOnInit() {}";

@implementation GeogebraCommonKernelKernel

- (instancetype)initWithGeogebraCommonMainApp:(GeogebraCommonMainApp *)app {
  GeogebraCommonKernelKernel_initWithGeogebraCommonMainApp_(self, app);
  return self;
}

- (instancetype)init {
  GeogebraCommonKernelKernel_init(self);
  return self;
}

- (GeogebraCommonKernelCommandsAlgebraProcessor *)getAlgebraProcessor {
  if (algProcessor_ == nil) {
    GeogebraCommonKernelKernel_set_algProcessor_(self, [self newAlgebraProcessorWithGeogebraCommonKernelKernel:self]);
  }
  return algProcessor_;
}

- (GeogebraCommonKernelCommandsAlgebraProcessor *)newAlgebraProcessorWithGeogebraCommonKernelKernel:(GeogebraCommonKernelKernel *)kernel {
  return [new_GeogebraCommonKernelCommandsAlgebraProcessor_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelCommandsCommandDispatcher_(kernel, [((GeogebraCommonMainApp *) nil_chk(app_)) getCommandDispatcherWithGeogebraCommonKernelKernel:kernel]) autorelease];
}

- (id<GeogebraCommonKernelManager3DInterface>)newManager3DWithGeogebraCommonKernelKernel:(GeogebraCommonKernelKernel *)kernel {
  return nil;
}

- (id)getConcurrentModificationLock {
  return concurrentModificationLock_;
}

- (void)setManager3DWithGeogebraCommonKernelManager3DInterface:(id<GeogebraCommonKernelManager3DInterface>)manager {
  GeogebraCommonKernelKernel_set_manager3D_(self, manager);
}

- (id<GeogebraCommonKernelKernelNDGeoPlaneND>)getDefaultPlane {
  return nil;
}

- (id<GeogebraCommonKernelManager3DInterface>)getManager3D {
  return manager3D_;
}

- (void)newConstruction {
  GeogebraCommonKernelKernel_setAndConsume_cons_(self, new_GeogebraCommonKernelConstruction_initWithGeogebraCommonKernelKernel_(self));
}

- (GeogebraCommonIoMyXMLHandler *)newMyXMLHandlerWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons1 {
  return [self newMyXMLHandlerWithGeogebraCommonKernelKernel:self withGeogebraCommonKernelConstruction:cons1];
}

- (GeogebraCommonIoMyXMLHandler *)newMyXMLHandlerWithGeogebraCommonKernelKernel:(GeogebraCommonKernelKernel *)kernel
                                           withGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons1 {
  return [new_GeogebraCommonIoMyXMLHandler_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelConstruction_(kernel, cons1) autorelease];
}

- (GeogebraCommonMainApp *)getApplication {
  return GeogebraCommonKernelKernel_getApplication(self);
}

- (GeogebraCommonKernelEquationSolver *)getEquationSolver {
  if (eqnSolver_ == nil) GeogebraCommonKernelKernel_setAndConsume_eqnSolver_(self, new_GeogebraCommonKernelEquationSolver_initWithGeogebraCommonKernelKernel_(self));
  return eqnSolver_;
}

- (GeogebraCommonKernelSystemOfEquationsSolver *)getSystemOfEquationsSolverWithGeogebraCommonKernelEquationSolverInterface:(id<GeogebraCommonKernelEquationSolverInterface>)eSolver {
  if (sysEqSolv_ == nil) GeogebraCommonKernelKernel_setAndConsume_sysEqSolv_(self, new_GeogebraCommonKernelSystemOfEquationsSolver_initWithGeogebraCommonKernelEquationSolverInterface_(eSolver));
  return sysEqSolv_;
}

- (GeogebraCommonKernelOptimizationExtremumFinder *)getExtremumFinder {
  if (extrFinder_ == nil) GeogebraCommonKernelKernel_setAndConsume_extrFinder_(self, new_GeogebraCommonKernelOptimizationExtremumFinder_init());
  return extrFinder_;
}

- (GeogebraCommonKernelParserParser *)getParser {
  if (parser_ == nil) GeogebraCommonKernelKernel_setAndConsume_parser_(self, new_GeogebraCommonKernelParserParser_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelConstruction_(self, cons_));
  return parser_;
}

- (GeogebraCommonKernelArithmeticExpressionNodeEvaluator *)newExpressionNodeEvaluatorWithGeogebraCommonKernelKernel:(GeogebraCommonKernelKernel *)kernel {
  return [new_GeogebraCommonKernelArithmeticExpressionNodeEvaluator_initWithGeogebraCommonMainLocalization_withGeogebraCommonKernelKernel_([((GeogebraCommonMainApp *) nil_chk(app_)) getLocalization], kernel) autorelease];
}

- (GeogebraCommonKernelArithmeticExpressionNodeEvaluator *)getExpressionNodeEvaluator {
  if (expressionNodeEvaluator_ == nil) {
    GeogebraCommonKernelKernel_set_expressionNodeEvaluator_(self, [self newExpressionNodeEvaluatorWithGeogebraCommonKernelKernel:self]);
  }
  return expressionNodeEvaluator_;
}

+ (id<JavaUtilComparator>)DoubleComparatorWithDouble:(jdouble)precision {
  return GeogebraCommonKernelKernel_DoubleComparatorWithDouble_(precision);
}

- (void)setShowAnimationButtonWithBoolean:(jboolean)showAB {
  showAnimationButton_ = showAB;
}

- (jboolean)isAnimationRunning {
  return GeogebraCommonKernelKernel_isAnimationRunning(self);
}

- (jboolean)isAnimationPaused {
  return animationManager_ != nil && [animationManager_ isPaused];
}

- (jboolean)needToShowAnimationButton {
  if (!showAnimationButton_) return NO;
  return animationManager_ != nil && [animationManager_ needToShowAnimationButton];
}

- (void)udpateNeedToShowAnimationButton {
  if (animationManager_ != nil) [animationManager_ updateNeedToShowAnimationButton];
}

- (jboolean)handleCoordsWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo
                                     withJavaUtilLinkedHashMap:(JavaUtilLinkedHashMap *)attrs {
  if (!([geo isKindOfClass:[GeogebraCommonKernelGeosGeoVec3D class]])) {
    GeogebraCommonMainApp_debugWithNSString_(JreStrcat("$@", @"wrong element type for <coords>: ", [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getClass]));
    return NO;
  }
  GeogebraCommonKernelGeosGeoVec3D *v = (GeogebraCommonKernelGeosGeoVec3D *) check_class_cast(geo, [GeogebraCommonKernelGeosGeoVec3D class]);
  @try {
    jdouble x = GeogebraCommonUtilStringUtil_parseDoubleWithNSString_([((JavaUtilLinkedHashMap *) nil_chk(attrs)) getWithId:@"x"]);
    jdouble y = GeogebraCommonUtilStringUtil_parseDoubleWithNSString_([attrs getWithId:@"y"]);
    jdouble z = GeogebraCommonUtilStringUtil_parseDoubleWithNSString_([attrs getWithId:@"z"]);
    ((GeogebraCommonKernelGeosGeoVec3D *) nil_chk(v))->hasUpdatePrevilege_ = YES;
    [v setCoordsWithDouble:x withDouble:y withDouble:z];
    return YES;
  }
  @catch (JavaLangException *e) {
    return NO;
  }
}

+ (GeogebraCommonKernelAlgosConstructionElement *)getConstructionElementWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return GeogebraCommonKernelKernel_getConstructionElementWithGeogebraCommonKernelGeosGeoElement_(geo);
}

- (GeogebraCommonKernelConstruction *)getConstruction {
  return cons_;
}

- (GeogebraCommonKernelAlgosConstructionElement *)getConstructionElementWithInt:(jint)index {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getConstructionElementWithInt:index];
}

- (GeogebraCommonKernelGeosGeoElement *)getFirstGeo {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getFirstGeo];
}

- (void)setConstructionStepWithInt:(jint)step {
  if ([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getStep] != step) {
    [cons_ setStepWithInt:step];
    [((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) setUnsaved];
  }
}

- (jint)getConstructionStep {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getStep];
}

- (jint)getLastConstructionStep {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) steps] - 1;
}

- (void)firstStep {
  jint step = 0;
  if ([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) showOnlyBreakpoints]) {
    [self setConstructionStepWithInt:GeogebraCommonKernelKernel_getNextBreakpointWithInt_(self, step)];
  }
  else {
    [self setConstructionStepWithInt:step];
  }
}

- (void)lastStep {
  jint step = [self getLastConstructionStep];
  if ([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) showOnlyBreakpoints]) {
    [self setConstructionStepWithInt:GeogebraCommonKernelKernel_getPreviousBreakpointWithInt_(self, step)];
  }
  else {
    [self setConstructionStepWithInt:step];
  }
}

- (void)nextStep {
  jint step = [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getStep] + 1;
  if ([cons_ showOnlyBreakpoints]) {
    [self setConstructionStepWithInt:GeogebraCommonKernelKernel_getNextBreakpointWithInt_(self, step)];
  }
  else {
    [self setConstructionStepWithInt:step];
  }
}

- (jint)getNextBreakpointWithInt:(jint)initStep {
  return GeogebraCommonKernelKernel_getNextBreakpointWithInt_(self, initStep);
}

- (void)previousStep {
  jint step = [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getStep] - 1;
  if ([cons_ showOnlyBreakpoints]) {
    [cons_ setStepWithInt:GeogebraCommonKernelKernel_getPreviousBreakpointWithInt_(self, step)];
  }
  else {
    [cons_ setStepWithInt:step];
  }
}

- (jint)getPreviousBreakpointWithInt:(jint)initStep {
  return GeogebraCommonKernelKernel_getPreviousBreakpointWithInt_(self, initStep);
}

- (jboolean)moveInConstructionListWithInt:(jint)from
                                  withInt:(jint)to {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) moveInConstructionListWithInt:from withInt:to];
}

- (void)setVisualStylesWithGeogebraCommonKernelKernel:(GeogebraCommonKernelKernel *)otherKernel {
  JavaUtilTreeSet *okts = [((GeogebraCommonKernelConstruction *) nil_chk([((GeogebraCommonKernelKernel *) nil_chk(otherKernel)) getConstruction])) getGeoSetWithCasCellsConstructionOrder];
  JavaUtilArrayList *selected = [((GeogebraCommonMainSelectionManager *) nil_chk([((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) getSelectionManager])) getSelectedGeos];
  id<JavaUtilIterator> okit = [((JavaUtilTreeSet *) nil_chk(okts)) iterator];
  GeogebraCommonKernelGeosGeoElement *okactual;
  NSString *okcapt;
  jint okpos;
  while ([((id<JavaUtilIterator>) nil_chk(okit)) hasNext]) {
    okactual = [okit next];
    okcapt = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(okactual)) getCaptionSimple];
    if (okcapt == nil) {
      okpos = -1;
    }
    else {
      okpos = [okcapt indexOfString:@"%style="];
    }
    if (okpos < 0) {
      [okit remove];
    }
  }
  id<JavaUtilIterator> it;
  if ([((JavaUtilArrayList *) nil_chk(selected)) isEmpty]) {
    it = [((JavaUtilTreeSet *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getGeoSetWithCasCellsConstructionOrder])) iterator];
  }
  else {
    it = [selected iterator];
  }
  GeogebraCommonKernelGeosGeoElement *actual;
  NSString *capt;
  jint pos;
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    actual = [it next];
    GeogebraCommonPluginGeoClassEnum *gc = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(actual)) getGeoClassType];
    okit = [okts iterator];
    while ([((id<JavaUtilIterator>) nil_chk(okit)) hasNext]) {
      okactual = [okit next];
      okcapt = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(okactual)) getCaptionSimple];
      okpos = [((NSString *) nil_chk(okcapt)) indexOfString:@"%style=defaultStyle"];
      if (okpos > -1 && [okactual getGeoClassType] == gc) {
        [actual setVisualStyleWithGeogebraCommonKernelGeosGeoElement:okactual];
      }
    }
    capt = [actual getCaptionSimple];
    if (capt == nil) {
      pos = -1;
    }
    else {
      pos = [capt indexOfString:@"%style="];
    }
    if (pos > -1) {
      capt = [((NSString *) nil_chk(capt)) substring:pos];
      okit = [okts iterator];
      while ([((id<JavaUtilIterator>) nil_chk(okit)) hasNext]) {
        okactual = [okit next];
        okcapt = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(okactual)) getCaptionSimple];
        okpos = [((NSString *) nil_chk(okcapt)) indexOfString:@"%style="];
        okcapt = [okcapt substring:okpos];
        if ([((NSString *) nil_chk(capt)) isEqual:okcapt]) {
          [actual setVisualStyleWithGeogebraCommonKernelGeosGeoElement:okactual];
        }
      }
    }
  }
}

- (void)setSaveScriptsToXMLWithBoolean:(jboolean)flag {
  saveScriptsToXML_ = flag;
}

- (jboolean)getSaveScriptsToXML {
  return saveScriptsToXML_;
}

- (void)setElementDefaultAllowedWithBoolean:(jboolean)flag {
  elementDefaultAllowed_ = flag;
}

- (jboolean)getElementDefaultAllowed {
  return elementDefaultAllowed_;
}

- (jboolean)isContinuous {
  return GeogebraCommonKernelKernel_isContinuous(self);
}

- (void)setContinuousWithBoolean:(jboolean)continuous {
  self->continuous_ = continuous;
}

- (jboolean)usePathAndRegionParametersWithGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)point {
  return usePathAndRegionParameters__ == GeogebraCommonKernelPathRegionHandlingEnum_get_ON() || (![((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(point)) isDefined]);
}

- (void)setUsePathAndRegionParametersWithGeogebraCommonKernelPathRegionHandlingEnum:(GeogebraCommonKernelPathRegionHandlingEnum *)flag {
  GeogebraCommonKernelKernel_set_usePathAndRegionParameters__(self, flag);
}

- (void)setLoadingModeWithBoolean:(jboolean)b {
  loadingMode_ = b;
}

- (void)notifyOpeningFileWithNSString:(NSString *)fileName {
  for (id<GeogebraCommonKernelUserAwarenessListener> __strong listener in nil_chk(self->userAwarenessListeners_)) {
    [((id<GeogebraCommonKernelUserAwarenessListener>) nil_chk(listener)) fileLoadingWithNSString:fileName];
  }
}

- (void)notifyFileOpenCompleteWithBoolean:(jboolean)success {
  for (id<GeogebraCommonKernelUserAwarenessListener> __strong listener in nil_chk(self->userAwarenessListeners_)) {
    [((id<GeogebraCommonKernelUserAwarenessListener>) nil_chk(listener)) fileLoadCompleteWithBoolean:success];
  }
}

- (jboolean)getLoadingMode {
  return loadingMode_;
}

+ (jchar)signWithDouble:(jdouble)x {
  return GeogebraCommonKernelKernel_signWithDouble_(x);
}

- (void)setNotifyConstructionProtocolViewAboutAddRemoveActiveWithBoolean:(jboolean)flag {
  notifyConstructionProtocolViewAboutAddRemoveActive_ = flag;
}

- (jboolean)isNotifyConstructionProtocolViewAboutAddRemoveActive {
  return notifyConstructionProtocolViewAboutAddRemoveActive_;
}

- (JavaLangStringBuilder *)buildImplicitEquationWithDoubleArray:(IOSDoubleArray *)numbers
                                              withNSStringArray:(IOSObjectArray *)vars
                                                    withBoolean:(jboolean)KEEP_LEADING_SIGN
                                                    withBoolean:(jboolean)CANCEL_DOWN
                                                    withBoolean:(jboolean)needsZ
                                                       withChar:(jchar)op
                         withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_buildImplicitEquationWithDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withChar_withGeogebraCommonKernelStringTemplate_(self, numbers, vars, KEEP_LEADING_SIGN, CANCEL_DOWN, needsZ, op, tpl);
}

- (void)formatSignedCoefficientWithDouble:(jdouble)x
                withJavaLangStringBuilder:(JavaLangStringBuilder *)sb
   withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  GeogebraCommonKernelKernel_formatSignedCoefficientWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, x, sb, tpl);
}

- (void)formatSignedWithDouble:(jdouble)x
     withJavaLangStringBuilder:(JavaLangStringBuilder *)sb
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  GeogebraCommonKernelKernel_formatSignedWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, x, sb, tpl);
}

- (void)formatSignedCoefficientPlusMinusWithDouble:(jdouble)x
                         withJavaLangStringBuilder:(JavaLangStringBuilder *)sb
            withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  GeogebraCommonKernelKernel_formatSignedCoefficientPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, x, sb, tpl);
}

- (void)formatSignedPlusMinusWithDouble:(jdouble)x
              withJavaLangStringBuilder:(JavaLangStringBuilder *)sb
 withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  GeogebraCommonKernelKernel_formatSignedPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, x, sb, tpl);
}

- (NSString *)formatPiERawWithDouble:(jdouble)x
withGeogebraCommonUtilNumberFormatAdapter:(id<GeogebraCommonUtilNumberFormatAdapter>)numF
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_formatPiERawWithDouble_withGeogebraCommonUtilNumberFormatAdapter_withGeogebraCommonKernelStringTemplate_(self, x, numF, tpl);
}

- (NSString *)formatRawWithDouble:(jdouble)number
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_formatRawWithDouble_withGeogebraCommonKernelStringTemplate_(self, number, tpl);
}

- (NSString *)formatNFWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_formatNFWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
}

- (NSString *)formatWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
}

- (NSString *)internationalizeDigitsWithNSString:(NSString *)num
          withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  if (![((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) internationalizeDigits] || ![((GeogebraCommonMainLocalization *) nil_chk([self getLocalization])) isUsingLocalizedDigits]) {
    return num;
  }
  if (formatSB_ == nil) {
    GeogebraCommonKernelKernel_setAndConsume_formatSB_(self, new_JavaLangStringBuilder_initWithInt_(17));
  }
  else {
    [formatSB_ setLengthWithInt:0];
  }
  jboolean negative = [((NSString *) nil_chk(num)) charAtWithInt:0] == '-';
  jint start = 0;
  jboolean RTL = [((GeogebraCommonMainLocalization *) nil_chk([self getLocalization])) isRightToLeftDigitsWithGeogebraCommonKernelStringTemplate:tpl];
  if (RTL) {
    [((JavaLangStringBuilder *) nil_chk(formatSB_)) appendWithChar:GeogebraCommonUtilUnicode_RightToLeftMark];
    if (negative) {
      [formatSB_ appendWithNSString:GeogebraCommonUtilUnicode_get_RightToLeftUnaryMinusSign_()];
      start = 1;
    }
  }
  for (jint i = start; i < ((jint) [num length]); i++) {
    jchar c = RTL ? [num charAtWithInt:((jint) [num length]) - (negative ? 0 : 1) - i] : [num charAtWithInt:i];
    if (c == '.') {
      c = ((GeogebraCommonMainLocalization *) nil_chk([self getLocalization]))->unicodeDecimalPoint_;
    }
    else if ((c >= '0') && (c <= '9')) {
      c += ((GeogebraCommonMainLocalization *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getLocalization]))->unicodeZero_ - '0';
    }
    [((JavaLangStringBuilder *) nil_chk(formatSB_)) appendWithChar:c];
  }
  if (RTL) {
    [((JavaLangStringBuilder *) nil_chk(formatSB_)) appendWithChar:GeogebraCommonUtilUnicode_RightToLeftMark];
  }
  return [((JavaLangStringBuilder *) nil_chk(formatSB_)) description];
}

- (NSString *)formatPiEWithDouble:(jdouble)x
withGeogebraCommonUtilNumberFormatAdapter:(id<GeogebraCommonUtilNumberFormatAdapter>)numF
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  if (((GeogebraCommonMainLocalization *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getLocalization]))->unicodeZero_ != '0') {
    NSString *num = GeogebraCommonKernelKernel_formatPiERawWithDouble_withGeogebraCommonUtilNumberFormatAdapter_withGeogebraCommonKernelStringTemplate_(self, x, numF, tpl);
    return [self internationalizeDigitsWithNSString:num withGeogebraCommonKernelStringTemplate:tpl];
  }
  return GeogebraCommonKernelKernel_formatPiERawWithDouble_withGeogebraCommonUtilNumberFormatAdapter_withGeogebraCommonKernelStringTemplate_(self, x, numF, tpl);
}

+ (void)copy__WithDoubleArray:(IOSDoubleArray *)a
              withDoubleArray:(IOSDoubleArray *)b {
  GeogebraCommonKernelKernel_copy__WithDoubleArray_withDoubleArray_(a, b);
}

+ (void)negativeWithDoubleArray:(IOSDoubleArray *)a
                withDoubleArray:(IOSDoubleArray *)b {
  GeogebraCommonKernelKernel_negativeWithDoubleArray_withDoubleArray_(a, b);
}

+ (void)divideWithDoubleArray:(IOSDoubleArray *)a
                   withDouble:(jdouble)b
              withDoubleArray:(IOSDoubleArray *)c {
  GeogebraCommonKernelKernel_divideWithDoubleArray_withDouble_withDoubleArray_(a, b, c);
}

+ (jlong)gcdWithLong:(jlong)m
            withLong:(jlong)n {
  return GeogebraCommonKernelKernel_gcdWithLong_withLong_(m, n);
}

+ (jdouble)gcdWithDoubleArray:(IOSDoubleArray *)numbers {
  return GeogebraCommonKernelKernel_gcdWithDoubleArray_(numbers);
}

+ (jdouble)roundToScaleWithDouble:(jdouble)x
                       withDouble:(jdouble)scale_ {
  return GeogebraCommonKernelKernel_roundToScaleWithDouble_withDouble_(x, scale_);
}

+ (jboolean)isEqualWithDoubleArray:(IOSDoubleArray *)a
                   withDoubleArray:(IOSDoubleArray *)b {
  return GeogebraCommonKernelKernel_isEqualWithDoubleArray_withDoubleArray_(a, b);
}

+ (jdouble)maxAbsWithDoubleArray:(IOSDoubleArray *)a {
  return GeogebraCommonKernelKernel_maxAbsWithDoubleArray_(a);
}

- (JavaLangStringBuilder *)buildLHSWithDoubleArray:(IOSDoubleArray *)numbers
                                 withNSStringArray:(IOSObjectArray *)vars
                                       withBoolean:(jboolean)KEEP_LEADING_SIGN
                                       withBoolean:(jboolean)CANCEL_DOWN
                                       withBoolean:(jboolean)needsZ
            withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  [((JavaLangStringBuilder *) nil_chk(sbBuildLHS_)) setLengthWithInt:0];
  IOSDoubleArray *temp = GeogebraCommonKernelKernel_buildImplicitVarPartWithJavaLangStringBuilder_withDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withGeogebraCommonKernelStringTemplate_(self, sbBuildLHS_, numbers, vars, KEEP_LEADING_SIGN, CANCEL_DOWN, needsZ, tpl);
  jdouble coeff = IOSDoubleArray_Get(nil_chk(temp), ((IOSObjectArray *) nil_chk(vars))->size_);
  if ((JavaLangMath_absWithDouble_(coeff) >= [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:nf_]) || useSignificantFigures_) {
    [sbBuildLHS_ appendWithChar:' '];
    [sbBuildLHS_ appendWithChar:GeogebraCommonKernelKernel_signWithDouble_(coeff)];
    [sbBuildLHS_ appendWithChar:' '];
    [sbBuildLHS_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, JavaLangMath_absWithDouble_(coeff), tpl)];
  }
  return sbBuildLHS_;
}

+ (jchar)oppositeSignWithChar:(jchar)op {
  return GeogebraCommonKernelKernel_oppositeSignWithChar_(op);
}

- (IOSDoubleArray *)buildImplicitVarPartWithJavaLangStringBuilder:(JavaLangStringBuilder *)sbBuildImplicitVarPart
                                                  withDoubleArray:(IOSDoubleArray *)numbers
                                                withNSStringArray:(IOSObjectArray *)vars
                                                      withBoolean:(jboolean)KEEP_LEADING_SIGN
                                                      withBoolean:(jboolean)CANCEL_DOWN
                                                      withBoolean:(jboolean)needsZ
                           withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_buildImplicitVarPartWithJavaLangStringBuilder_withDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withGeogebraCommonKernelStringTemplate_(self, sbBuildImplicitVarPart, numbers, vars, KEEP_LEADING_SIGN, CANCEL_DOWN, needsZ, tpl);
}

- (jboolean)isZeroFigureWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
}

- (JavaLangStringBuilder *)buildExplicitConicEquationWithDoubleArray:(IOSDoubleArray *)numbers
                                                   withNSStringArray:(IOSObjectArray *)vars
                                                             withInt:(jint)pos
                                                         withBoolean:(jboolean)KEEP_LEADING_SIGN
                              withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  jdouble d, dabs, q = IOSDoubleArray_Get(nil_chk(numbers), pos);
  if (GeogebraCommonKernelKernel_isZeroWithDouble_(q)) {
    return GeogebraCommonKernelKernel_buildImplicitEquationWithDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withChar_withGeogebraCommonKernelStringTemplate_(self, numbers, vars, KEEP_LEADING_SIGN, YES, NO, '=', tpl);
  }
  jint i, leadingNonZero = numbers->size_;
  for (i = 0; i < numbers->size_; i++) {
    if ((i != pos) && ((JavaLangMath_absWithDouble_(IOSDoubleArray_Get(numbers, i)) >= [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:nf_]) || useSignificantFigures_)) {
      leadingNonZero = i;
      break;
    }
  }
  [((JavaLangStringBuilder *) nil_chk(sbBuildExplicitConicEquation_)) setLengthWithInt:0];
  [sbBuildExplicitConicEquation_ appendWithNSString:IOSObjectArray_Get(nil_chk(vars), pos)];
  [sbBuildExplicitConicEquation_ appendWithNSString:@" = "];
  if (leadingNonZero == numbers->size_) {
    [sbBuildExplicitConicEquation_ appendWithNSString:@"0"];
    return sbBuildExplicitConicEquation_;
  }
  else if (leadingNonZero == (numbers->size_ - 1)) {
    d = -IOSDoubleArray_Get(numbers, leadingNonZero) / q;
    [sbBuildExplicitConicEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, d, tpl)];
    return sbBuildExplicitConicEquation_;
  }
  else {
    d = -IOSDoubleArray_Get(numbers, leadingNonZero) / q;
    [sbBuildExplicitConicEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(self, d, tpl)];
    [sbBuildExplicitConicEquation_ appendWithNSString:IOSObjectArray_Get(vars, leadingNonZero)];
    for (i = leadingNonZero + 1; i < vars->size_; i++) {
      if (i != pos) {
        d = -IOSDoubleArray_Get(numbers, i) / q;
        dabs = JavaLangMath_absWithDouble_(d);
        if ((dabs >= [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:nf_]) || useSignificantFigures_) {
          [sbBuildExplicitConicEquation_ appendWithChar:' '];
          [sbBuildExplicitConicEquation_ appendWithChar:GeogebraCommonKernelKernel_signWithDouble_(d)];
          [sbBuildExplicitConicEquation_ appendWithChar:' '];
          [sbBuildExplicitConicEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(self, dabs, tpl)];
          [sbBuildExplicitConicEquation_ appendWithNSString:IOSObjectArray_Get(vars, i)];
        }
      }
    }
    d = -IOSDoubleArray_Get(numbers, i) / q;
    dabs = JavaLangMath_absWithDouble_(d);
    if ((dabs >= [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:nf_]) || useSignificantFigures_) {
      [sbBuildExplicitConicEquation_ appendWithChar:' '];
      [sbBuildExplicitConicEquation_ appendWithChar:GeogebraCommonKernelKernel_signWithDouble_(d)];
      [sbBuildExplicitConicEquation_ appendWithChar:' '];
      [sbBuildExplicitConicEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, dabs, tpl)];
    }
    return sbBuildExplicitConicEquation_;
  }
}

- (NSString *)formatSFWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_formatSFWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
}

- (void)appendTwoCoeffsWithBoolean:(jboolean)plusMinusX
                        withDouble:(jdouble)x
                        withDouble:(jdouble)y
                      withNSString:(NSString *)s1
                      withNSString:(NSString *)s2
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl
         withJavaLangStringBuilder:(JavaLangStringBuilder *)sbBuildValueString {
  if (GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl)) {
    if (GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(self, y, tpl)) {
      [((JavaLangStringBuilder *) nil_chk(sbBuildValueString)) appendWithNSString:@"0"];
    }
    else {
      NSString *coeff = GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(self, y, tpl);
      [((JavaLangStringBuilder *) nil_chk(sbBuildValueString)) appendWithNSString:coeff];
      if (((jint) [((NSString *) nil_chk(coeff)) length]) > 0) {
        [sbBuildValueString appendWithNSString:@" "];
      }
      [sbBuildValueString appendWithNSString:s2];
    }
  }
  else {
    if (plusMinusX) {
      GeogebraCommonKernelKernel_formatSignedCoefficientPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, x, sbBuildValueString, tpl);
      [((JavaLangStringBuilder *) nil_chk(sbBuildValueString)) appendWithNSString:@" "];
    }
    else {
      NSString *coeff = GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
      [((JavaLangStringBuilder *) nil_chk(sbBuildValueString)) appendWithNSString:coeff];
      if (((jint) [((NSString *) nil_chk(coeff)) length]) > 0) {
        [sbBuildValueString appendWithNSString:@" "];
      }
    }
    [((JavaLangStringBuilder *) nil_chk(sbBuildValueString)) appendWithNSString:s1];
    if (!GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(self, y, tpl)) {
      [sbBuildValueString appendWithNSString:@" "];
      GeogebraCommonKernelKernel_formatSignedCoefficientWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, y, sbBuildValueString, tpl);
      [sbBuildValueString appendWithNSString:@" "];
      [sbBuildValueString appendWithNSString:s2];
    }
  }
}

- (void)appendTwoCoeffsWithDouble:(jdouble)x
                       withDouble:(jdouble)y
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl
        withJavaLangStringBuilder:(JavaLangStringBuilder *)sbBuildValueString {
  if (GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl)) {
    if (GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(self, y, tpl)) {
      [((JavaLangStringBuilder *) nil_chk(sbBuildValueString)) appendWithNSString:@"0"];
    }
    else {
      GeogebraCommonKernelKernel_formatSignedPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, y, sbBuildValueString, tpl);
    }
  }
  else {
    [((JavaLangStringBuilder *) nil_chk(sbBuildValueString)) appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl)];
    if (!GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(self, y, tpl)) {
      [sbBuildValueString appendWithNSString:@" "];
      GeogebraCommonKernelKernel_formatSignedPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, y, sbBuildValueString, tpl);
    }
  }
}

- (NSString *)formatCoeffWithDouble:(jdouble)x
withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
}

- (JavaLangStringBuilder *)buildExplicitLineEquationWithDoubleArray:(IOSDoubleArray *)numbers
                                                  withNSStringArray:(IOSObjectArray *)vars
                                                           withChar:(jchar)opDefault
                             withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  jchar op = opDefault;
  jdouble d, dabs, q = IOSDoubleArray_Get(nil_chk(numbers), 1);
  [((JavaLangStringBuilder *) nil_chk(sbBuildExplicitLineEquation_)) setLengthWithInt:0];
  if (GeogebraCommonKernelKernel_isZeroWithDouble_(q)) {
    [sbBuildExplicitLineEquation_ appendWithNSString:IOSObjectArray_Get(nil_chk(vars), 0)];
    [sbBuildExplicitLineEquation_ appendWithChar:' '];
    if (IOSDoubleArray_Get(numbers, 0) < GeogebraCommonKernelKernel_MIN_PRECISION) {
      op = GeogebraCommonKernelKernel_oppositeSignWithChar_(op);
    }
    [sbBuildExplicitLineEquation_ appendWithChar:op];
    [sbBuildExplicitLineEquation_ appendWithChar:' '];
    [sbBuildExplicitLineEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, -IOSDoubleArray_Get(numbers, 2) / IOSDoubleArray_Get(numbers, 0), tpl)];
    return sbBuildExplicitLineEquation_;
  }
  [sbBuildExplicitLineEquation_ appendWithNSString:IOSObjectArray_Get(nil_chk(vars), 1)];
  [sbBuildExplicitLineEquation_ appendWithChar:' '];
  if (IOSDoubleArray_Get(numbers, 1) < GeogebraCommonKernelKernel_MIN_PRECISION) {
    op = GeogebraCommonKernelKernel_oppositeSignWithChar_(op);
  }
  [sbBuildExplicitLineEquation_ appendWithChar:op];
  [sbBuildExplicitLineEquation_ appendWithChar:' '];
  d = -IOSDoubleArray_Get(numbers, 0) / q;
  dabs = JavaLangMath_absWithDouble_(d);
  if ((dabs >= [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:nf_]) || useSignificantFigures_) {
    [sbBuildExplicitLineEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(self, d, tpl)];
    [sbBuildExplicitLineEquation_ appendWithNSString:IOSObjectArray_Get(vars, 0)];
    d = -IOSDoubleArray_Get(numbers, 2) / q;
    dabs = JavaLangMath_absWithDouble_(d);
    if ((dabs >= [tpl getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:nf_]) || useSignificantFigures_) {
      [sbBuildExplicitLineEquation_ appendWithChar:' '];
      [sbBuildExplicitLineEquation_ appendWithChar:GeogebraCommonKernelKernel_signWithDouble_(d)];
      [sbBuildExplicitLineEquation_ appendWithChar:' '];
      [sbBuildExplicitLineEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, dabs, tpl)];
    }
  }
  else {
    [sbBuildExplicitLineEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, -IOSDoubleArray_Get(numbers, 2) / q, tpl)];
  }
  return sbBuildExplicitLineEquation_;
}

+ (jdouble)chopWithDouble:(jdouble)x {
  return GeogebraCommonKernelKernel_chopWithDouble_(x);
}

+ (jboolean)isZeroWithDouble:(jdouble)x {
  return GeogebraCommonKernelKernel_isZeroWithDouble_(x);
}

+ (jboolean)isZeroWithDouble:(jdouble)x
                  withDouble:(jdouble)eps {
  return GeogebraCommonKernelKernel_isZeroWithDouble_withDouble_(x, eps);
}

+ (jboolean)isZeroWithDoubleArray:(IOSDoubleArray *)a {
  return GeogebraCommonKernelKernel_isZeroWithDoubleArray_(a);
}

+ (jboolean)isIntegerWithDouble:(jdouble)x {
  return GeogebraCommonKernelKernel_isIntegerWithDouble_(x);
}

+ (jboolean)isEqualWithDouble:(jdouble)x
                   withDouble:(jdouble)y {
  return GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_(x, y);
}

+ (jboolean)isEqualWithDouble:(jdouble)x
                   withDouble:(jdouble)y
                   withDouble:(jdouble)eps {
  return GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_withDouble_(x, y, eps);
}

+ (jboolean)isGreaterWithDouble:(jdouble)x
                     withDouble:(jdouble)y {
  return GeogebraCommonKernelKernel_isGreaterWithDouble_withDouble_(x, y);
}

+ (jint)compareWithDouble:(jdouble)x
               withDouble:(jdouble)y {
  return GeogebraCommonKernelKernel_compareWithDouble_withDouble_(x, y);
}

+ (jboolean)isGreaterWithDouble:(jdouble)x
                     withDouble:(jdouble)y
                     withDouble:(jdouble)eps {
  return GeogebraCommonKernelKernel_isGreaterWithDouble_withDouble_withDouble_(x, y, eps);
}

+ (jboolean)isGreaterEqualWithDouble:(jdouble)x
                          withDouble:(jdouble)y {
  return GeogebraCommonKernelKernel_isGreaterEqualWithDouble_withDouble_(x, y);
}

+ (jdouble)convertToAngleValueWithDouble:(jdouble)val {
  return GeogebraCommonKernelKernel_convertToAngleValueWithDouble_(val);
}

+ (jdouble)checkDecimalFractionWithDouble:(jdouble)x
                               withDouble:(jdouble)precision {
  return GeogebraCommonKernelKernel_checkDecimalFractionWithDouble_withDouble_(x, precision);
}

+ (jdouble)checkDecimalFractionWithDouble:(jdouble)x {
  return GeogebraCommonKernelKernel_checkDecimalFractionWithDouble_(x);
}

+ (jdouble)checkIntegerWithDouble:(jdouble)x {
  return GeogebraCommonKernelKernel_checkIntegerWithDouble_(x);
}

- (JavaLangStringBuilder *)formatAngleWithDouble:(jdouble)phi
          withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl
                                     withBoolean:(jboolean)unbounded {
  JavaLangStringBuilder *ret = GeogebraCommonKernelKernel_formatAngleWithDouble_withDouble_withGeogebraCommonKernelStringTemplate_withBoolean_(self, phi, 10, tpl, unbounded);
  return ret;
}

- (JavaLangStringBuilder *)formatAngleWithDouble:(jdouble)alpha
                                      withDouble:(jdouble)precision
          withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl
                                     withBoolean:(jboolean)unbounded {
  return GeogebraCommonKernelKernel_formatAngleWithDouble_withDouble_withGeogebraCommonKernelStringTemplate_withBoolean_(self, alpha, precision, tpl, unbounded);
}

- (void)resetLibraryJavaScript {
  [self setLibraryJavaScriptWithNSString:GeogebraCommonKernelKernel_defaultLibraryJavaScript_];
}

- (void)setLibraryJavaScriptWithNSString:(NSString *)str {
  GeogebraCommonMainApp_debugWithNSString_(str);
  GeogebraCommonKernelKernel_set_libraryJavaScript_(self, str);
  [((GeogebraCommonPluginScriptManager *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getScriptManager])) setGlobalScript];
}

- (NSString *)getLibraryJavaScript {
  return libraryJavaScript_;
}

- (JavaUtilTreeSet *)getPointSet {
  return [((GeogebraCommonKernelConstruction *) nil_chk([self getConstruction])) getGeoSetLabelOrderWithGeogebraCommonPluginGeoClassEnum:GeogebraCommonPluginGeoClassEnum_get_POINT()];
}

- (jboolean)isSaving {
  @synchronized(self) {
    return isSaving__;
  }
}

- (void)setSavingWithBoolean:(jboolean)saving {
  @synchronized(self) {
    isSaving__ = saving;
  }
}

- (void)setInverseTrigReturnsAngleWithBoolean:(jboolean)selected {
  arcusFunctionCreatesAngle_ = selected;
}

- (jboolean)getInverseTrigReturnsAngle {
  return arcusFunctionCreatesAngle_;
}

- (void)setAngleUnitWithInt:(jint)unit {
  angleUnit_ = unit;
}

- (jint)getAngleUnit {
  return GeogebraCommonKernelKernel_getAngleUnit(self);
}

- (jboolean)isZvarAllowed {
  return YES;
}

+ (NSString *)removeCASVariablePrefixWithNSString:(NSString *)str {
  return GeogebraCommonKernelKernel_removeCASVariablePrefixWithNSString_(str);
}

+ (NSString *)removeCASVariablePrefixWithNSString:(NSString *)str
                                     withNSString:(NSString *)replace {
  return GeogebraCommonKernelKernel_removeCASVariablePrefixWithNSString_withNSString_(str, replace);
}

- (void)setPrintFiguresWithInt:(jint)figures {
  if (figures >= 0) {
    useSignificantFigures_ = YES;
    [((id<GeogebraCommonUtilScientificFormatAdapter>) nil_chk(sf_)) setSigDigitsWithInt:figures];
    [sf_ setMaxWidthWithInt:16];
  }
}

- (void)setPrintDecimalsWithInt:(jint)decimals {
  if (decimals >= 0) {
    useSignificantFigures_ = NO;
    GeogebraCommonKernelKernel_set_nf_(self, [((GeogebraCommonFactoriesFormatFactory *) nil_chk(GeogebraCommonFactoriesFormatFactory_get_prototype_())) getNumberFormatWithInt:decimals]);
  }
}

- (jint)getPrintDecimals {
  return GeogebraCommonKernelKernel_getPrintDecimals(self);
}

- (jint)getPrintFigures {
  return GeogebraCommonKernelKernel_getPrintFigures(self);
}

- (jboolean)isUsingInternalCommandNames {
  return useInternalCommandNames_;
}

- (void)setUseInternalCommandNamesWithBoolean:(jboolean)b {
  useInternalCommandNames_ = b;
}

- (jboolean)isAllowVisibilitySideEffects {
  return allowVisibilitySideEffects_;
}

- (void)setAllowVisibilitySideEffectsWithBoolean:(jboolean)allowVisibilitySideEffects {
  self->allowVisibilitySideEffects_ = allowVisibilitySideEffects;
}

- (jboolean)isMacroKernel {
  return NO;
}

- (jboolean)isSilentMode {
  return silentMode_;
}

- (jboolean)isGeoGebraCASready {
  @synchronized(self) {
    return ggbCAS_ != nil;
  }
}

- (void)setSilentModeWithBoolean:(jboolean)silentMode {
  self->silentMode_ = silentMode;
  [((GeogebraCommonKernelConstruction *) nil_chk([self getConstruction])) setSuppressLabelCreationWithBoolean:silentMode];
}

- (void)setResolveUnkownVarsAsDummyGeosWithBoolean:(jboolean)resolveUnkownVarsAsDummyGeos {
  self->resolveUnkownVarsAsDummyGeos_ = resolveUnkownVarsAsDummyGeos;
}

- (jboolean)isResolveUnkownVarsAsDummyGeos {
  return GeogebraCommonKernelKernel_isResolveUnkownVarsAsDummyGeos(self);
}

- (NSString *)evaluateGeoGebraCASWithNSString:(NSString *)casString
withGeogebraCommonKernelArithmeticMyArbitraryConstant:(GeogebraCommonKernelArithmeticMyArbitraryConstant *)arbconst {
  return GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(self, casString, arbconst, GeogebraCommonKernelStringTemplate_get_numericNoLocal_());
}

- (NSString *)evaluateGeoGebraCASWithNSString:(NSString *)exp
withGeogebraCommonKernelArithmeticMyArbitraryConstant:(GeogebraCommonKernelArithmeticMyArbitraryConstant *)arbconst
       withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(self, exp, arbconst, tpl);
}

- (NSString *)evaluateCachedGeoGebraCASWithNSString:(NSString *)exp
withGeogebraCommonKernelArithmeticMyArbitraryConstant:(GeogebraCommonKernelArithmeticMyArbitraryConstant *)arbconst {
  return GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withBoolean_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(self, exp, YES, arbconst, GeogebraCommonKernelStringTemplate_get_numericNoLocal_());
}

- (NSString *)evaluateGeoGebraCASWithNSString:(NSString *)exp
                                  withBoolean:(jboolean)useCaching
withGeogebraCommonKernelArithmeticMyArbitraryConstant:(GeogebraCommonKernelArithmeticMyArbitraryConstant *)arbconst
       withGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withBoolean_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(self, exp, useCaching, arbconst, tpl);
}

- (NSString *)evaluateRawGeoGebraCASWithNSString:(NSString *)exp {
  NSString *result = nil;
  if ([self hasCasCache]) {
    result = [((GeogebraCommonUtilMaxSizeHashMap *) nil_chk([self getCasCache])) getWithId:exp];
    if (result != nil) {
      return result;
    }
  }
  result = [((id<GeogebraCommonKernelGeoGebraCasInterface>) nil_chk([self getGeoGebraCAS])) evaluateRawWithNSString:exp];
  [((GeogebraCommonUtilMaxSizeHashMap *) nil_chk([self getCasCache])) putWithId:exp withId:result];
  return result;
}

- (void)evaluateGeoGebraCASAsyncWithGeogebraCommonKernelAsynchronousCommand:(id<GeogebraCommonKernelAsynchronousCommand>)c {
  NSString *result = nil;
  NSString *exp = [((id<GeogebraCommonKernelAsynchronousCommand>) nil_chk(c)) getCasInput];
  if ([c useCacheing] && [self hasCasCache]) {
    result = [((GeogebraCommonUtilMaxSizeHashMap *) nil_chk([self getCasCache])) getWithId:exp];
    if (result != nil) {
      [c handleCASoutputWithNSString:result withInt:((jint) [((NSString *) nil_chk(exp)) hash])];
      return;
    }
  }
  [((id<GeogebraCommonKernelGeoGebraCasInterface>) nil_chk([self getGeoGebraCAS])) evaluateGeoGebraCASAsyncWithGeogebraCommonKernelAsynchronousCommand:c];
}

- (void)putToCasCacheWithNSString:(NSString *)exp
                     withNSString:(NSString *)result {
  [((GeogebraCommonUtilMaxSizeHashMap *) nil_chk([self getCasCache])) putWithId:exp withId:result];
}

- (void)setAlgebraStyleWithInt:(jint)style {
  algebraStyle_ = style;
}

- (jint)getAlgebraStyle {
  return algebraStyle_;
}

- (GeogebraCommonUtilMaxSizeHashMap *)getCasCache {
  if (ggbCasCache_ == nil) {
    GeogebraCommonKernelKernel_setAndConsume_ggbCasCache_(self, new_GeogebraCommonUtilMaxSizeHashMap_initWithInt_(GeogebraCommonKernelKernel_GEOGEBRA_CAS_CACHE_SIZE_));
  }
  return ggbCasCache_;
}

- (jboolean)hasCasCache {
  return ggbCasCache_ != nil;
}

- (void)setEuclidianViewBoundsWithInt:(jint)viewNo
                           withDouble:(jdouble)xmin
                           withDouble:(jdouble)xmax
                           withDouble:(jdouble)ymin
                           withDouble:(jdouble)ymax
                           withDouble:(jdouble)xscale
                           withDouble:(jdouble)yscale {
  jint view = viewNo - 1;
  if (view < 0 || viewNo < 0) {
    return;
  }
  if (view >= ((IOSDoubleArray *) nil_chk(self->xmin_))->size_) {
    GeogebraCommonKernelKernel_set_xmin_(self, [self prolongWithDoubleArray:self->xmin_ withInt:viewNo]);
    GeogebraCommonKernelKernel_set_xmax_(self, [self prolongWithDoubleArray:self->xmin_ withInt:viewNo]);
    GeogebraCommonKernelKernel_set_ymin_(self, [self prolongWithDoubleArray:self->ymin_ withInt:viewNo]);
    GeogebraCommonKernelKernel_set_ymax_(self, [self prolongWithDoubleArray:self->ymax_ withInt:viewNo]);
    GeogebraCommonKernelKernel_set_xscale_(self, [self prolongWithDoubleArray:self->xscale_ withInt:viewNo]);
    GeogebraCommonKernelKernel_set_yscale_(self, [self prolongWithDoubleArray:self->yscale_ withInt:viewNo]);
  }
  *IOSDoubleArray_GetRef(nil_chk(self->xmin_), view) = xmin;
  *IOSDoubleArray_GetRef(nil_chk(self->xmax_), view) = xmax;
  *IOSDoubleArray_GetRef(nil_chk(self->ymin_), view) = ymin;
  *IOSDoubleArray_GetRef(nil_chk(self->ymax_), view) = ymax;
  *IOSDoubleArray_GetRef(nil_chk(self->xscale_), view) = xscale;
  *IOSDoubleArray_GetRef(nil_chk(self->yscale_), view) = yscale;
  graphicsView2showing_ = [((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) isShowingMultipleEVs];
  [self notifyEuclidianViewCE];
}

- (IOSDoubleArray *)prolongWithDoubleArray:(IOSDoubleArray *)xmin2
                                   withInt:(jint)viewNo {
  IOSDoubleArray *ret = [IOSDoubleArray arrayWithLength:viewNo];
  JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(xmin2, 0, ret, 0, ((IOSDoubleArray *) nil_chk(xmin2))->size_);
  return ret;
}

- (jdouble)getViewsXMinWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return IOSDoubleArray_Get(nil_chk([self getViewBoundsForGeoWithGeogebraCommonKernelGeosGeoElement:geo]), 0);
}

- (jdouble)getViewsXMaxWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return IOSDoubleArray_Get(nil_chk([self getViewBoundsForGeoWithGeogebraCommonKernelGeosGeoElement:geo]), 1);
}

- (jdouble)getViewsYMinWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return IOSDoubleArray_Get(nil_chk([self getViewBoundsForGeoWithGeogebraCommonKernelGeosGeoElement:geo]), 2);
}

- (jdouble)getViewsYMaxWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return IOSDoubleArray_Get(nil_chk([self getViewBoundsForGeoWithGeogebraCommonKernelGeosGeoElement:geo]), 3);
}

- (jdouble)getViewsXScaleWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return IOSDoubleArray_Get(nil_chk([self getViewBoundsForGeoWithGeogebraCommonKernelGeosGeoElement:geo]), 4);
}

- (jdouble)getViewsYScaleWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return IOSDoubleArray_Get(nil_chk([self getViewBoundsForGeoWithGeogebraCommonKernelGeosGeoElement:geo]), 5);
}

- (void)notifyEuclidianViewCE {
  if (macroManager_ != nil) [macroManager_ notifyEuclidianViewCE];
  [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) notifyEuclidianViewCEWithBoolean:NO];
}

- (void)clearConstructionWithBoolean:(jboolean)clearScripts {
  if (clearScripts) {
    [self resetLibraryJavaScript];
  }
  if (self->ggbCAS_ != nil) {
    [((id<GeogebraCommonKernelCASGenericInterface>) nil_chk([self->ggbCAS_ getCurrentCAS])) clearResult];
  }
  if (macroManager_ != nil) [macroManager_ setAllMacrosUnused];
  if (animationManager_ != nil) {
    [animationManager_ stopAnimation];
    [animationManager_ clearAnimatedGeos];
  }
  [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) clearConstruction];
  GeogebraCommonKernelKernel_notifyClearView(self);
  GeogebraCommonKernelKernel_notifyRepaint(self);
}

- (jdouble)getXmax {
  if (graphicsView2showing_) {
    return GeogebraCommonUtilMyMath_maxWithDoubleArray_(xmax_);
  }
  return IOSDoubleArray_Get(nil_chk(xmax_), 0);
}

- (jdouble)getXmin {
  if (graphicsView2showing_) {
    return GeogebraCommonUtilMyMath_minWithDoubleArray_(xmin_);
  }
  return IOSDoubleArray_Get(nil_chk(xmin_), 0);
}

- (jdouble)getXscale {
  if (graphicsView2showing_) {
    return GeogebraCommonUtilMyMath_maxWithDoubleArray_(xscale_);
  }
  return IOSDoubleArray_Get(nil_chk(xscale_), 0);
}

- (jdouble)getYmax {
  if (graphicsView2showing_) {
    return GeogebraCommonUtilMyMath_maxWithDoubleArray_(ymax_);
  }
  return IOSDoubleArray_Get(nil_chk(ymax_), 0);
}

- (jdouble)getYmin {
  if (graphicsView2showing_) {
    return GeogebraCommonUtilMyMath_minWithDoubleArray_(ymin_);
  }
  return IOSDoubleArray_Get(nil_chk(ymin_), 0);
}

- (jdouble)getYscale {
  if (graphicsView2showing_) {
    return GeogebraCommonUtilMyMath_maxWithDoubleArray_(yscale_);
  }
  return IOSDoubleArray_Get(nil_chk(yscale_), 0);
}

- (jdouble)getXmaxWithBoolean:(jboolean)ev1
                  withBoolean:(jboolean)ev2 {
  if (ev2 && !ev1) {
    return IOSDoubleArray_Get(nil_chk(xmax_), 1);
  }
  else if (ev1 && !ev2) {
    return IOSDoubleArray_Get(nil_chk(xmax_), 0);
  }
  return [self getXmax];
}

- (jdouble)getXmaxWithInt:(jint)i {
  return IOSDoubleArray_Get(nil_chk(xmax_), i);
}

- (jdouble)getXminWithInt:(jint)i {
  return IOSDoubleArray_Get(nil_chk(xmin_), i);
}

- (jdouble)getYmaxWithInt:(jint)i {
  return IOSDoubleArray_Get(nil_chk(ymax_), i);
}

- (jdouble)getYminWithInt:(jint)i {
  return IOSDoubleArray_Get(nil_chk(ymin_), i);
}

- (jdouble)getYscaleWithInt:(jint)i {
  return IOSDoubleArray_Get(nil_chk(yscale_), i);
}

- (jdouble)getXscaleWithInt:(jint)i {
  return IOSDoubleArray_Get(nil_chk(xscale_), i);
}

- (jdouble)getZmaxWithInt:(jint)i {
  return 0;
}

- (jdouble)getZminWithInt:(jint)i {
  return 0;
}

- (jdouble)getZscaleWithInt:(jint)i {
  return [self getXscale];
}

- (jdouble)getXminWithBoolean:(jboolean)ev1
                  withBoolean:(jboolean)ev2 {
  if (ev2 && !ev1) {
    return IOSDoubleArray_Get(nil_chk(xmin_), 1);
  }
  else if (ev1 && !ev2) {
    return IOSDoubleArray_Get(nil_chk(xmin_), 0);
  }
  return [self getXmin];
}

- (jdouble)getXscaleWithBoolean:(jboolean)ev1
                    withBoolean:(jboolean)ev2 {
  if (ev2 && !ev1) {
    return IOSDoubleArray_Get(nil_chk(xscale_), 1);
  }
  else if (ev1 && !ev2) {
    return IOSDoubleArray_Get(nil_chk(xscale_), 0);
  }
  return [self getXscale];
}

- (jdouble)getYmaxWithBoolean:(jboolean)ev1
                  withBoolean:(jboolean)ev2 {
  if (ev2 && !ev1) {
    return IOSDoubleArray_Get(nil_chk(ymax_), 1);
  }
  else if (ev1 && !ev2) {
    return IOSDoubleArray_Get(nil_chk(ymax_), 0);
  }
  return [self getYmax];
}

- (jdouble)getYminWithBoolean:(jboolean)ev1
                  withBoolean:(jboolean)ev2 {
  if (ev2 && !ev1) {
    return IOSDoubleArray_Get(nil_chk(ymin_), 1);
  }
  else if (ev1 && !ev2) {
    return IOSDoubleArray_Get(nil_chk(ymin_), 0);
  }
  return [self getYmin];
}

- (jdouble)getYscaleWithBoolean:(jboolean)ev1
                    withBoolean:(jboolean)ev2 {
  if (ev2 && !ev1) {
    return IOSDoubleArray_Get(nil_chk(yscale_), 1);
  }
  else if (ev1 && !ev2) {
    return IOSDoubleArray_Get(nil_chk(yscale_), 0);
  }
  return [self getYscale];
}

- (id<GeogebraCommonKernelGeoGebraCasInterface>)getGeoGebraCAS {
  @synchronized(self) {
    if (ggbCAS_ == nil) {
      GeogebraCommonKernelKernel_setAndConsume_ggbCAS_(self, new_GeogebraCommonCasGeoGebraCAS_initWithGeogebraCommonKernelKernel_(self));
    }
    return ggbCAS_;
  }
}

- (jint)getCoordStyle {
  return GeogebraCommonKernelKernel_getCoordStyle(self);
}

- (void)setCoordStyleWithInt:(jint)coordStlye {
  coordStyle_ = coordStlye;
}

- (GeogebraCommonKernelGeosGeoElement *)lookupLabelWithNSString:(NSString *)label {
  return GeogebraCommonKernelKernel_lookupLabelWithNSString_(self, label);
}

- (GeogebraCommonKernelGeosGeoCasCell *)lookupCasCellLabelWithNSString:(NSString *)label {
  return GeogebraCommonKernelKernel_lookupCasCellLabelWithNSString_(self, label);
}

- (GeogebraCommonKernelGeosGeoCasCell *)lookupCasRowReferenceWithNSString:(NSString *)label {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) lookupCasRowReferenceWithNSString:label];
}

- (GeogebraCommonKernelGeosGeoElement *)lookupLabelWithNSString:(NSString *)label
                                                    withBoolean:(jboolean)autoCreate {
  return GeogebraCommonKernelKernel_lookupLabelWithNSString_withBoolean_(self, label, autoCreate);
}

- (GeogebraCommonPluginGeoClassEnum *)getClassTypeWithNSString:(NSString *)type {
  switch ([((NSString *) nil_chk(type)) charAtWithInt:0]) {
    case 'a':
    return GeogebraCommonPluginGeoClassEnum_get_ANGLE();
    case 'b':
    if ([type isEqual:@"boolean"]) {
      return GeogebraCommonPluginGeoClassEnum_get_BOOLEAN();
    }
    return GeogebraCommonPluginGeoClassEnum_get_BUTTON();
    case 'c':
    if ([type isEqual:@"conic"]) {
      return GeogebraCommonPluginGeoClassEnum_get_CONIC();
    }
    else if ([type isEqual:@"conicpart"]) {
      return GeogebraCommonPluginGeoClassEnum_get_CONICPART();
    }
    else if ([type isEqual:@"circle"]) {
      return GeogebraCommonPluginGeoClassEnum_get_CONIC();
    }
    case 'd':
    return GeogebraCommonPluginGeoClassEnum_get_CONIC();
    case 'e':
    return GeogebraCommonPluginGeoClassEnum_get_CONIC();
    case 'f':
    return GeogebraCommonPluginGeoClassEnum_get_FUNCTION();
    case 'h':
    return GeogebraCommonPluginGeoClassEnum_get_CONIC();
    case 'i':
    if ([type isEqual:@"image"]) {
      return GeogebraCommonPluginGeoClassEnum_get_IMAGE();
    }
    else if ([type isEqual:@"intersectinglines"]) {
      return GeogebraCommonPluginGeoClassEnum_get_CONIC();
    }
    else if ([type isEqual:@"implicitpoly"]) {
      return GeogebraCommonPluginGeoClassEnum_get_IMPLICIT_POLY();
    }
    case 'l':
    if ([type isEqual:@"line"]) {
      return GeogebraCommonPluginGeoClassEnum_get_LINE();
    }
    else if ([type isEqual:@"list"]) {
      return GeogebraCommonPluginGeoClassEnum_get_LIST();
    }
    else {
      return GeogebraCommonPluginGeoClassEnum_get_LOCUS();
    }
    case 'n':
    return GeogebraCommonPluginGeoClassEnum_get_NUMERIC();
    case 'p':
    if ([type isEqual:@"point"]) {
      return GeogebraCommonPluginGeoClassEnum_get_POINT();
    }
    else if ([type isEqual:@"polygon"]) {
      return GeogebraCommonPluginGeoClassEnum_get_POLYGON();
    }
    else if ([type isEqual:@"polyline"]) {
      return GeogebraCommonPluginGeoClassEnum_get_POLYLINE();
    }
    else if ([type isEqual:@"penstroke"]) {
      return GeogebraCommonPluginGeoClassEnum_get_PENSTROKE();
    }
    else {
      return GeogebraCommonPluginGeoClassEnum_get_CONIC();
    }
    case 'r':
    return GeogebraCommonPluginGeoClassEnum_get_RAY();
    case 's':
    return GeogebraCommonPluginGeoClassEnum_get_SEGMENT();
    case 't':
    if ([type isEqual:@"text"]) {
      return GeogebraCommonPluginGeoClassEnum_get_TEXT();
    }
    return GeogebraCommonPluginGeoClassEnum_get_TEXTFIELD();
    case 'v':
    return GeogebraCommonPluginGeoClassEnum_get_VECTOR();
    default:
    @throw [new_GeogebraCommonMainMyError_initWithGeogebraCommonMainLocalization_withNSString_([((GeogebraCommonMainApp *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getApplication])) getLocalization], JreStrcat("$$$", @"Kernel: GeoElement of type ", type, @" could not be created.")) autorelease];
  }
}

- (NSString *)getModeTextWithInt:(jint)mode {
  switch (mode) {
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SELECTION_LISTENER:
    return @"Select";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_MOVE:
    return @"Move";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_POINT:
    return @"Point";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_COMPLEX_NUMBER:
    return @"ComplexNumber";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_POINT_ON_OBJECT:
    return @"PointOnObject";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_JOIN:
    return @"Join";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SEGMENT:
    return @"Segment";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SEGMENT_FIXED:
    return @"SegmentFixed";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_RAY:
    return @"Ray";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_POLYGON:
    return @"Polygon";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_POLYLINE:
    return @"PolyLine";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_RIGID_POLYGON:
    return @"RigidPolygon";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_VECTOR_POLYGON:
    return @"VectorPolygon";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_PARALLEL:
    return @"Parallel";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ORTHOGONAL:
    return @"Orthogonal";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_INTERSECT:
    return @"Intersect";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_INTERSECTION_CURVE:
    return @"IntersectionCurve";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_LINE_BISECTOR:
    return @"LineBisector";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ANGULAR_BISECTOR:
    return @"AngularBisector";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_TANGENTS:
    return @"Tangent";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_POLAR_DIAMETER:
    return @"PolarDiameter";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCLE_TWO_POINTS:
    return @"Circle2";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCLE_THREE_POINTS:
    return @"Circle3";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ELLIPSE_THREE_POINTS:
    return @"Ellipse3";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_PARABOLA:
    return @"Parabola";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_HYPERBOLA_THREE_POINTS:
    return @"Hyperbola3";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_COMPASSES:
    return @"Compasses";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CONIC_FIVE_POINTS:
    return @"Conic5";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_RELATION:
    return @"Relation";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_TRANSLATEVIEW:
    return @"TranslateView";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SHOW_HIDE_OBJECT:
    return @"ShowHideObject";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SHOW_HIDE_LABEL:
    return @"ShowHideLabel";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_COPY_VISUAL_STYLE:
    return @"CopyVisualStyle";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_DELETE:
    return @"Delete";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_VECTOR:
    return @"Vector";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_TEXT:
    return @"Text";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_IMAGE:
    return @"Image";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_MIDPOINT:
    return @"Midpoint";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SEMICIRCLE:
    return @"Semicircle";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCLE_ARC_THREE_POINTS:
    return @"CircleArc3";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCLE_SECTOR_THREE_POINTS:
    return @"CircleSector3";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCUMCIRCLE_ARC_THREE_POINTS:
    return @"CircumcircleArc3";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCUMCIRCLE_SECTOR_THREE_POINTS:
    return @"CircumcircleSector3";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SLIDER:
    return @"Slider";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_MIRROR_AT_POINT:
    return @"MirrorAtPoint";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_MIRROR_AT_LINE:
    return @"MirrorAtLine";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_MIRROR_AT_CIRCLE:
    return @"MirrorAtCircle";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_TRANSLATE_BY_VECTOR:
    return @"TranslateByVector";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ROTATE_BY_ANGLE:
    return @"RotateByAngle";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_DILATE_FROM_POINT:
    return @"DilateFromPoint";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CIRCLE_POINT_RADIUS:
    return @"CirclePointRadius";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ANGLE:
    return @"Angle";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ANGLE_FIXED:
    return @"AngleFixed";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_VECTOR_FROM_POINT:
    return @"VectorFromPoint";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_DISTANCE:
    return @"Distance";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_MOVE_ROTATE:
    return @"MoveRotate";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ZOOM_IN:
    return @"ZoomIn";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ZOOM_OUT:
    return @"ZoomOut";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_LOCUS:
    return @"Locus";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_AREA:
    return @"Area";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SLOPE:
    return @"Slope";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_REGULAR_POLYGON:
    return @"RegularPolygon";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SHOW_HIDE_CHECKBOX:
    return @"ShowCheckBox";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_BUTTON_ACTION:
    return @"ButtonAction";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_TEXTFIELD_ACTION:
    return @"TextFieldAction";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_PEN:
    return @"Pen";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_FREEHAND_SHAPE:
    return @"FreehandShape";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_FREEHAND_CIRCLE:
    return @"FreehandCircle";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_FITLINE:
    return @"FitLine";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CREATE_LIST:
    return @"CreateListGraphicsView";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_PROBABILITY_CALCULATOR:
    return @"ProbabilityCalculator";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_FUNCTION_INSPECTOR:
    return @"FunctionInspector";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_EVALUATE:
    return @"Evaluate";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_NUMERIC:
    return @"Numeric";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_KEEP_INPUT:
    return @"KeepInput";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_EXPAND:
    return @"Expand";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_FACTOR:
    return @"Factor";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_SUBSTITUTE:
    return @"Substitute";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_SOLVE:
    return @"Solve";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_NUMERICAL_SOLVE:
    return @"NSolve";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_DERIVATIVE:
    return @"Derivative";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_CAS_INTEGRAL:
    return @"Integral";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_ATTACH_DETACH:
    return @"AttachDetachPoint";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_ONEVARSTATS:
    return @"OneVarStats";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_TWOVARSTATS:
    return @"TwoVarStats";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_MULTIVARSTATS:
    return @"MultiVarStats";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_CREATE_LIST:
    return @"CreateList";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_CREATE_LISTOFPOINTS:
    return @"CreateListOfPoints";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_CREATE_MATRIX:
    return @"CreateMatrix";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_CREATE_TABLETEXT:
    return @"CreateTable";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_CREATE_POLYLINE:
    return @"CreatePolyLine";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_SUM:
    return @"SumCells";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_AVERAGE:
    return @"MeanCells";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_COUNT:
    return @"CountCells";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_MIN:
    return @"MinCells";
    case GeogebraCommonEuclidianEuclidianConstants_MODE_SPREADSHEET_MAX:
    return @"MaxCells";
    default:
    return @"";
  }
}

- (IOSObjectArray *)getPolynomialCoeffsWithNSString:(NSString *)exp
                                       withNSString:(NSString *)variable {
  return [((id<GeogebraCommonKernelGeoGebraCasInterface>) nil_chk([self getGeoGebraCAS])) getPolynomialCoeffsWithNSString:exp withNSString:variable];
}

- (GeogebraCommonKernelGeosGeoElement *)getGeoAtWithInt:(jint)col
                                                withInt:(jint)row {
  return GeogebraCommonKernelKernel_lookupLabelWithNSString_(self, GeogebraCommonKernelGeosGeoElementSpreadsheet_getSpreadsheetCellNameWithInt_withInt_(col, row));
}

- (GeogebraCommonKernelAnimationManager *)getAnimatonManager {
  if (animationManager_ == nil) {
    GeogebraCommonKernelKernel_set_animationManager_(self, [((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) newAnimationManagerWithGeogebraCommonKernelKernel:self]);
  }
  return animationManager_;
}

- (IOSDoubleArray *)getViewBoundsForGeoWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  id<JavaUtilList> viewSet = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getViewSet];
  IOSDoubleArray *viewBounds = [IOSDoubleArray arrayWithLength:6];
  for (jint i = 0; i < 6; i++) {
    *IOSDoubleArray_GetRef(viewBounds, i) = JavaLangDouble_NEGATIVE_INFINITY;
  }
  *IOSDoubleArray_GetRef(viewBounds, 0) = *IOSDoubleArray_GetRef(viewBounds, 2) = JavaLangDouble_POSITIVE_INFINITY;
  if (viewSet == nil) {
    GeogebraCommonKernelKernel_addViewsWithJavaLangInteger_withDoubleArray_(self, JavaLangInteger_valueOfWithInt_(GeogebraCommonMainApp_VIEW_EUCLIDIAN), viewBounds);
    return viewBounds;
  }
  for (jint i = 0; i < [((id<JavaUtilList>) nil_chk(viewSet)) size]; i++) {
    GeogebraCommonKernelKernel_addViewsWithJavaLangInteger_withDoubleArray_(self, [viewSet getWithInt:i], viewBounds);
  }
  return viewBounds;
}

- (void)addViewsWithJavaLangInteger:(JavaLangInteger *)id_
                    withDoubleArray:(IOSDoubleArray *)viewBounds {
  GeogebraCommonKernelKernel_addViewsWithJavaLangInteger_withDoubleArray_(self, id_, viewBounds);
}

- (GeogebraCommonKernelGeosGeoAxis *)getXAxis {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getXAxis];
}

- (GeogebraCommonKernelGeosGeoAxis *)getYAxis {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getYAxis];
}

- (jboolean)isAxisWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return ((geo == [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getXAxis]) || (geo == [cons_ getYAxis]));
}

- (void)updateLocalAxesNames {
  [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) updateLocalAxesNames];
}

- (void)setNotifyRepaintActiveWithBoolean:(jboolean)flag {
  if (flag != notifyRepaint__) {
    notifyRepaint__ = flag;
    if (notifyRepaint__) {
      GeogebraCommonKernelKernel_notifyRepaint(self);
    }
  }
}

- (jboolean)isNotifyRepaintActive {
  return notifyRepaint__;
}

- (void)notifyRepaint {
  GeogebraCommonKernelKernel_notifyRepaint(self);
}

- (void)notifyControllersMoveIfWaiting {
  if (notifyRepaint__ && notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([view isKindOfClass:[GeogebraCommonEuclidianEuclidianView class]]) {
        [((GeogebraCommonEuclidianEuclidianController *) nil_chk([((GeogebraCommonEuclidianEuclidianView *) nil_chk(((GeogebraCommonEuclidianEuclidianView *) check_class_cast(view, [GeogebraCommonEuclidianEuclidianView class])))) getEuclidianController])) moveIfWaiting];
      }
    }
  }
}

- (jboolean)notifySuggestRepaint {
  jboolean needed = NO;
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      needed = ([((id<GeogebraCommonKernelView>) nil_chk(view)) suggestRepaint] || needed);
    }
  }
  return needed;
}

- (void)notifyReset {
  GeogebraCommonKernelKernel_notifyReset(self);
}

- (void)notifyClearView {
  GeogebraCommonKernelKernel_notifyClearView(self);
}

- (void)clearJustCreatedGeosInViews {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonEuclidianEuclidianViewInterfaceSlim_class_() isInstance:view]) {
        [((GeogebraCommonEuclidianEuclidianController *) nil_chk([((id<GeogebraCommonEuclidianEuclidianViewInterfaceSlim>) nil_chk(((id<GeogebraCommonEuclidianEuclidianViewInterfaceSlim>) check_protocol_cast(view, @protocol(GeogebraCommonEuclidianEuclidianViewInterfaceSlim))))) getEuclidianController])) clearJustCreatedGeos];
      }
    }
  }
}

- (void)setNotifyViewsActiveWithBoolean:(jboolean)flag {
  if (flag != notifyViewsActive_) {
    notifyViewsActive_ = flag;
    if (flag) {
      viewReiniting_ = YES;
      for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
        GeogebraCommonKernelKernel_notifyAddAllWithGeogebraCommonKernelView_(self, view);
      }
      [self notifyEuclidianViewCE];
      GeogebraCommonKernelKernel_notifyReset(self);
      if ([((GeogebraCommonMainApp *) nil_chk(app_)) getGuiManager] != nil) [((id<GeogebraCommonMainGuiManagerInterface>) nil_chk([app_ getGuiManager])) applyAlgebraViewSettings];
      viewReiniting_ = NO;
    }
    else {
      GeogebraCommonKernelKernel_notifyClearView(self);
    }
  }
}

- (void)attachWithGeogebraCommonKernelView:(id<GeogebraCommonKernelView>)view {
  if (![((JavaUtilArrayList *) nil_chk(views_)) containsWithId:view]) {
    [views_ addWithId:view];
  }
  GeogebraCommonKernelKernel_printAttachedViews(self);
}

- (void)printAttachedViews {
  GeogebraCommonKernelKernel_printAttachedViews(self);
}

- (void)detachWithGeogebraCommonKernelView:(id<GeogebraCommonKernelView>)view {
  [((JavaUtilArrayList *) nil_chk(views_)) removeWithId:view];
  GeogebraCommonKernelKernel_printAttachedViews(self);
}

- (void)notifyModeChangedWithInt:(jint)mode
withGeogebraCommonKernelModeSetterEnum:(GeogebraCommonKernelModeSetterEnum *)m {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) setModeWithInt:mode withGeogebraCommonKernelModeSetterEnum:m];
    }
  }
}

- (void)notifyAddAllWithGeogebraCommonKernelView:(id<GeogebraCommonKernelView>)view {
  GeogebraCommonKernelKernel_notifyAddAllWithGeogebraCommonKernelView_(self, view);
}

- (void)registerRenameListenerAlgoWithGeogebraCommonKernelAlgosAlgoElement:(GeogebraCommonKernelAlgosAlgoElement *)algo {
  if (renameListenerAlgos_ == nil) {
    GeogebraCommonKernelKernel_setAndConsume_renameListenerAlgos_(self, new_JavaUtilArrayList_init());
  }
  if (![((JavaUtilArrayList *) nil_chk(renameListenerAlgos_)) containsWithId:algo]) {
    [renameListenerAlgos_ addWithId:algo];
  }
}

- (void)unregisterRenameListenerAlgoWithGeogebraCommonKernelAlgosAlgoElement:(GeogebraCommonKernelAlgosAlgoElement *)algo {
  if (renameListenerAlgos_ != nil) {
    [renameListenerAlgos_ removeWithId:algo];
  }
}

- (void)notifyRenameListenerAlgos {
  GeogebraCommonKernelKernel_notifyRenameListenerAlgos(self);
}

- (jboolean)isSpreadsheetBatchRunning {
  return self->spreadsheetBatchRunning_;
}

- (void)setSpreadsheetBatchRunningWithBoolean:(jboolean)b {
  self->spreadsheetBatchRunning_ = b;
  if (!b) {
    GeogebraCommonKernelKernel_notifyRenameListenerAlgos(self);
  }
}

- (jboolean)renameLabelInScriptsWithNSString:(NSString *)oldLabel
                                withNSString:(NSString *)newLabel {
  GeogebraCommonPluginScriptScript *work;
  jboolean somethingHappened = NO;
  for (GeogebraCommonKernelGeosGeoElement * __strong geo in nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getGeoSetWithCasCellsConstructionOrder])) {
    work = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getScriptWithGeogebraCommonPluginEventTypeEnum:GeogebraCommonPluginEventTypeEnum_get_UPDATE()];
    if ([work isKindOfClass:[GeogebraCommonPluginScriptGgbScript class]]) {
      somethingHappened |= [((GeogebraCommonPluginScriptScript *) nil_chk(work)) renameGeoWithNSString:oldLabel withNSString:newLabel];
    }
    work = [geo getScriptWithGeogebraCommonPluginEventTypeEnum:GeogebraCommonPluginEventTypeEnum_get_CLICK()];
    if ([work isKindOfClass:[GeogebraCommonPluginScriptGgbScript class]]) {
      somethingHappened |= [((GeogebraCommonPluginScriptScript *) nil_chk(work)) renameGeoWithNSString:oldLabel withNSString:newLabel];
    }
  }
  return somethingHappened;
}

- (void)notifyAddAllWithGeogebraCommonKernelView:(id<GeogebraCommonKernelView>)view
                                         withInt:(jint)consStep {
  GeogebraCommonKernelKernel_notifyAddAllWithGeogebraCommonKernelView_withInt_(self, view, consStep);
}

- (void)notifyAddWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  if (notifyViewsActive_) {
    if (addingPolygon__ && ((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo))->labelSet_) {
      if ([((NSString *) nil_chk([geo getXMLtypeString])) equalsIgnoreCase:@"Polygon"]) {
        GeogebraCommonKernelKernel_set_newPolygon_(self, geo);
      }
    }
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if (([((id<GeogebraCommonKernelView>) nil_chk(view)) getViewID] != GeogebraCommonMainApp_VIEW_CONSTRUCTION_PROTOCOL) || [self isNotifyConstructionProtocolViewAboutAddRemoveActive]) {
        [view addWithGeogebraCommonKernelGeosGeoElement:geo];
      }
    }
  }
  GeogebraCommonKernelKernel_notifyRenameListenerAlgos(self);
}

- (void)addingPolygon {
  if (notifyViewsActive_) {
    self->addingPolygon__ = YES;
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelClientView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelClientView>) nil_chk(((id<GeogebraCommonKernelClientView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelClientView))))) addingPolygon];
      }
    }
  }
}

- (void)notifyPolygonAdded {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelClientView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelClientView>) nil_chk(((id<GeogebraCommonKernelClientView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelClientView))))) addPolygonCompleteWithGeogebraCommonKernelGeosGeoElement:self->newPolygon_];
      }
    }
  }
}

- (void)notifyRemoveGroup {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelClientView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelClientView>) nil_chk(((id<GeogebraCommonKernelClientView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelClientView))))) deleteGeosWithJavaUtilArrayList:deleteList_];
      }
    }
  }
  [((JavaUtilArrayList *) nil_chk(self->deleteList_)) clear];
}

- (void)notifyRemoveWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  if (notifyViewsActive_) {
    [((JavaUtilArrayList *) nil_chk(self->deleteList_)) addWithId:geo];
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if (([((id<GeogebraCommonKernelView>) nil_chk(view)) getViewID] != GeogebraCommonMainApp_VIEW_CONSTRUCTION_PROTOCOL) || [self isNotifyConstructionProtocolViewAboutAddRemoveActive]) {
        [view removeWithGeogebraCommonKernelGeosGeoElement:geo];
      }
    }
  }
  GeogebraCommonKernelKernel_notifyRenameListenerAlgos(self);
}

- (void)movingGeoSet {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelClientView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelClientView>) nil_chk(((id<GeogebraCommonKernelClientView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelClientView))))) movingGeos];
      }
    }
  }
}

- (void)movedGeoSetWithJavaUtilArrayList:(JavaUtilArrayList *)elmSet {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelClientView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelClientView>) nil_chk(((id<GeogebraCommonKernelClientView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelClientView))))) movedGeosWithJavaUtilArrayList:elmSet];
      }
    }
  }
}

- (void)notifyUpdateWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) updateWithGeogebraCommonKernelGeosGeoElement:geo];
    }
  }
}

- (void)notifyUpdateLocationWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelUpdateLocationView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelUpdateLocationView>) nil_chk(((id<GeogebraCommonKernelUpdateLocationView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelUpdateLocationView))))) updateLocationWithGeogebraCommonKernelGeosGeoElement:geo];
      }
      else {
        [((id<GeogebraCommonKernelView>) nil_chk(view)) updateWithGeogebraCommonKernelGeosGeoElement:geo];
      }
    }
  }
}

- (void)notifyUpdateVisualStyleWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) updateVisualStyleWithGeogebraCommonKernelGeosGeoElement:geo];
    }
  }
}

- (void)notifyUpdateAuxiliaryObjectWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) updateAuxiliaryObjectWithGeogebraCommonKernelGeosGeoElement:geo];
    }
  }
}

- (void)notifyRenameWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) renameWithGeogebraCommonKernelGeosGeoElement:geo];
    }
  }
  GeogebraCommonKernelKernel_notifyRenameListenerAlgos(self);
}

- (void)notifyRenameUpdatesComplete {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelClientView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelClientView>) nil_chk(((id<GeogebraCommonKernelClientView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelClientView))))) renameUpdatesComplete];
      }
    }
  }
}

- (void)notifyPerspectiveChangedWithNSString:(NSString *)perspectiveId {
  for (id<GeogebraCommonKernelUserAwarenessListener> __strong listener in nil_chk(self->userAwarenessListeners_)) {
    [((id<GeogebraCommonKernelUserAwarenessListener>) nil_chk(listener)) perspectiveChangedWithNSString:perspectiveId];
  }
}

- (void)notifyPaste {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelClientView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelClientView>) nil_chk(((id<GeogebraCommonKernelClientView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelClientView))))) pasteElms];
      }
    }
  }
}

- (void)notifyPasteComplete {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelClientView_class_() isInstance:view]) {
        [((id<GeogebraCommonKernelClientView>) nil_chk(((id<GeogebraCommonKernelClientView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelClientView))))) pasteElmsCompleteWithJavaUtilArrayList:[((GeogebraCommonMainSelectionManager *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getSelectionManager])) getSelectedGeos]];
      }
    }
  }
}

- (jboolean)isNotifyViewsActive {
  return notifyViewsActive_ && !viewReiniting_;
}

- (jboolean)isViewReiniting {
  return viewReiniting_;
}

- (void)addUserAwarenessListenerWithGeogebraCommonKernelUserAwarenessListener:(id<GeogebraCommonKernelUserAwarenessListener>)listener {
  [((JavaUtilArrayList *) nil_chk(self->userAwarenessListeners_)) addWithId:listener];
}

- (void)removeUserAwarenessListenerWithGeogebraCommonKernelUserAwarenessListener:(id<GeogebraCommonKernelUserAwarenessListener>)listener {
  [((JavaUtilArrayList *) nil_chk(self->userAwarenessListeners_)) removeWithId:listener];
}

- (void)updateConstruction {
  [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) updateConstruction];
  if ([self getUpdateAgain]) {
    [self setUpdateAgainWithBoolean:NO withGeogebraCommonKernelGeosGeoElement:nil];
    [((GeogebraCommonMainApp *) nil_chk(app_)) scheduleUpdateConstruction];
  }
  else {
    GeogebraCommonKernelKernel_notifyRepaint(self);
  }
}

- (void)updateConstructionLanguage {
  [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) updateConstructionLanguage];
  if ([self getUpdateAgain]) {
    [self setUpdateAgainWithBoolean:NO withGeogebraCommonKernelGeosGeoElement:nil];
    [((GeogebraCommonMainApp *) nil_chk(app_)) scheduleUpdateConstruction];
  }
  else {
    GeogebraCommonKernelKernel_notifyRepaint(self);
  }
}

- (void)updateConstructionWithInt:(jint)n {
  for (jint i = 0; i < n; i++) {
    [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) updateConstruction];
  }
  if ([self getUpdateAgain]) {
    [self setUpdateAgainWithBoolean:NO withGeogebraCommonKernelGeosGeoElement:nil];
    [((GeogebraCommonMainApp *) nil_chk(app_)) scheduleUpdateConstruction];
  }
  else {
    GeogebraCommonKernelKernel_notifyRepaint(self);
  }
}

- (jboolean)isEmpty {
  return [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) isEmpty];
}

- (jboolean)isGettingUndo {
  @synchronized(self) {
    return isGettingUndo__;
  }
}

- (void)setIsGettingUndoWithBoolean:(jboolean)flag {
  @synchronized(self) {
    isGettingUndo__ = flag;
  }
}

- (void)setUndoActiveWithBoolean:(jboolean)flag {
  undoActive_ = flag;
}

- (jboolean)isUndoActive {
  return undoActive_;
}

- (void)storeUndoInfo {
  if (undoActive_) {
    [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) storeUndoInfo];
  }
}

- (void)restoreCurrentUndoInfo {
  if (undoActive_) {
    [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) restoreCurrentUndoInfo];
  }
}

- (void)initUndoInfo {
  if (undoActive_) {
    [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) initUndoInfo];
  }
}

- (void)storeSelectedGeosNames {
  [((JavaUtilArrayList *) nil_chk(selectedGeosNames_)) clear];
  for (GeogebraCommonKernelGeosGeoElement * __strong geo in nil_chk([((GeogebraCommonMainSelectionManager *) nil_chk([((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) getSelectionManager])) getSelectedGeos])) [selectedGeosNames_ addWithId:[((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getLabelSimple]];
}

- (void)recallSelectedGeosNames {
  JavaUtilArrayList *list = [new_JavaUtilArrayList_init() autorelease];
  for (NSString * __strong name in nil_chk(selectedGeosNames_)) {
    GeogebraCommonKernelGeosGeoElement *geo = GeogebraCommonKernelKernel_lookupLabelWithNSString_(self, name);
    if (geo != nil) [list addWithId:geo];
  }
  [((GeogebraCommonMainSelectionManager *) nil_chk([((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) getSelectionManager])) setSelectedGeosWithJavaUtilArrayList:list];
}

- (void)redo {
  if (undoActive_ && [((GeogebraCommonKernelUndoManager *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getUndoManager])) redoPossible]) {
    [((GeogebraCommonMainApp *) nil_chk(app_)) startCollectingRepaints];
    [self storeSelectedGeosNames];
    [((GeogebraCommonMainAppCompanion *) nil_chk([app_ getCompanion])) storeViewCreators];
    GeogebraCommonKernelKernel_notifyReset(self);
    [self clearJustCreatedGeosInViews];
    [cons_ redo];
    GeogebraCommonKernelKernel_notifyReset(self);
    [((GeogebraCommonMainAppCompanion *) nil_chk([app_ getCompanion])) recallViewCreators];
    [self recallSelectedGeosNames];
    [app_ stopCollectingRepaints];
  }
}

- (void)undo {
  if (undoActive_ && [((GeogebraCommonKernelUndoManager *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) getUndoManager])) undoPossible]) {
    [((GeogebraCommonMainApp *) nil_chk(app_)) startCollectingRepaints];
    [self storeSelectedGeosNames];
    [((GeogebraCommonMainAppCompanion *) nil_chk([app_ getCompanion])) storeViewCreators];
    GeogebraCommonKernelKernel_notifyReset(self);
    [self clearJustCreatedGeosInViews];
    [((GeogebraCommonEuclidianEuclidianController *) nil_chk([((id<GeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) getActiveEuclidianView])) getEuclidianController])) clearSelections];
    [cons_ undo];
    GeogebraCommonKernelKernel_notifyReset(self);
    [((GeogebraCommonMainAppCompanion *) nil_chk([app_ getCompanion])) recallViewCreators];
    [self recallSelectedGeosNames];
    if (![self undoPossible]) {
      GeogebraCommonKernelKernel_notifyRepaint(self);
    }
    [app_ stopCollectingRepaints];
  }
}

- (jboolean)undoPossible {
  return undoActive_ && [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) undoPossible];
}

- (jboolean)redoPossible {
  return undoActive_ && [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) redoPossible];
}

- (jboolean)isInsertLineBreaks {
  return insertLineBreaks_;
}

- (NSString *)getXMLFileFormat {
  return GeogebraCommonGeoGebraConstants_get_XML_FILE_FORMAT_();
}

- (void)setInsertLineBreaksWithBoolean:(jboolean)insertLineBreaks {
  self->insertLineBreaks_ = insertLineBreaks;
}

- (GeogebraCommonKernelArithmeticExpressionNode *)handleTrigPowerWithNSString:(NSString *)image
                             withGeogebraCommonKernelArithmeticExpressionNode:(GeogebraCommonKernelArithmeticExpressionNode *)en
                                                                 withNSString:(NSString *)operation {
  if ([@"x" isEqual:operation] || [@"y" isEqual:operation] || [@"z" isEqual:operation]) {
    return [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, [new_GeogebraCommonKernelArithmeticFunctionVariable_initWithGeogebraCommonKernelKernel_withNSString_(self, operation) autorelease], GeogebraCommonPluginOperationEnum_get_POWER(), GeogebraCommonKernelKernel_convertIndexToNumberWithNSString_(self, image)) autorelease], GeogebraCommonPluginOperationEnum_get_MULTIPLY_OR_FUNCTION(), en) autorelease];
  }
  GeogebraCommonKernelGeosGeoElement *ge = GeogebraCommonKernelKernel_lookupLabelWithNSString_(self, operation);
  GeogebraCommonPluginOperationEnum *type = [((GeogebraCommonKernelParserCashandlersParserFunctions *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getParserFunctions])) getWithNSString:operation withInt:1];
  if (ge != nil || type == nil) {
    return [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, [new_GeogebraCommonKernelArithmeticVariable_initWithGeogebraCommonKernelKernel_withNSString_(self, operation) autorelease], GeogebraCommonPluginOperationEnum_get_POWER(), GeogebraCommonKernelKernel_convertIndexToNumberWithNSString_(self, image)) autorelease], GeogebraCommonPluginOperationEnum_get_MULTIPLY_OR_FUNCTION(), en) autorelease];
  }
  if ([((NSString *) nil_chk(image)) indexOf:GeogebraCommonUtilUnicode_Superscript_Minus] > -1) {
    if ([((NSString *) nil_chk([image substring:3 endIndex:6])) isEqual:GeogebraCommonUtilUnicode_get_superscriptMinusOneBracket_()]) {
      switch ([type ordinal]) {
        case GeogebraCommonPluginOperation_SIN:
        return [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, en, GeogebraCommonPluginOperationEnum_get_ARCSIN(), nil) autorelease];
        case GeogebraCommonPluginOperation_COS:
        return [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, en, GeogebraCommonPluginOperationEnum_get_ARCCOS(), nil) autorelease];
        case GeogebraCommonPluginOperation_TAN:
        return [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, en, GeogebraCommonPluginOperationEnum_get_ARCTAN(), nil) autorelease];
        default:
        @throw [new_JavaLangError_initWithNSString_(@"Inverse not supported for trig function") autorelease];
      }
    }
    @throw [new_JavaLangError_initWithNSString_(@"Bad index for trig function") autorelease];
  }
  return [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_withGeogebraCommonPluginOperationEnum_withGeogebraCommonKernelArithmeticExpressionValue_(self, en, type, nil) autorelease], GeogebraCommonPluginOperationEnum_get_POWER(), GeogebraCommonKernelKernel_convertIndexToNumberWithNSString_(self, image)) autorelease];
}

- (GeogebraCommonKernelArithmeticMyDouble *)convertIndexToNumberWithNSString:(NSString *)str {
  return GeogebraCommonKernelKernel_convertIndexToNumberWithNSString_(self, str);
}

- (GeogebraCommonKernelGeosGeoVec2D *)getImaginaryUnit {
  if (imaginaryUnit_ == nil) {
    GeogebraCommonKernelKernel_setAndConsume_imaginaryUnit_(self, new_GeogebraCommonKernelGeosGeoVec2D_initWithGeogebraCommonKernelKernel_withDouble_withDouble_(self, 0, 1));
    [imaginaryUnit_ setModeWithInt:GeogebraCommonKernelKernel_COORD_COMPLEX];
  }
  return imaginaryUnit_;
}

- (IOSObjectArray *)useMacroWithNSStringArray:(IOSObjectArray *)labels
                withGeogebraCommonKernelMacro:(GeogebraCommonKernelMacro *)macro
  withGeogebraCommonKernelGeosGeoElementArray:(IOSObjectArray *)input {
  @try {
    GeogebraCommonKernelAlgosAlgoMacro *algo = [new_GeogebraCommonKernelAlgosAlgoMacro_initWithGeogebraCommonKernelConstruction_withNSStringArray_withGeogebraCommonKernelMacro_withGeogebraCommonKernelGeosGeoElementArray_(cons_, labels, macro, input) autorelease];
    return [algo getOutput];
  }
  @catch (JavaLangException *e) {
    [((JavaLangException *) nil_chk(e)) printStackTrace];
    return nil;
  }
}

- (GeogebraCommonMainLocalization *)getLocalization {
  return [((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) getLocalization];
}

- (jboolean)kernelHas3DObjects {
  return GeogebraCommonKernelKernel_kernelHas3DObjects(self);
}

- (void)getKernelXMLWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                                  withBoolean:(jboolean)asPreference {
  [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"<kernel>\n"];
  if (GeogebraCommonKernelKernel_kernelHas3DObjects(self)) {
    [sb appendWithNSString:@"\t<uses3D val=\"true\"/>\n"];
  }
  [sb appendWithNSString:@"\t<continuous val=\""];
  [sb appendWithBoolean:GeogebraCommonKernelKernel_isContinuous(self)];
  [sb appendWithNSString:@"\"/>\n"];
  [sb appendWithNSString:@"\t<usePathAndRegionParameters val=\""];
  [sb appendWithNSString:[((GeogebraCommonKernelPathRegionHandlingEnum *) nil_chk(usePathAndRegionParameters__)) getXML]];
  [sb appendWithNSString:@"\"/>\n"];
  if (useSignificantFigures_) {
    [sb appendWithNSString:@"\t<significantfigures val=\""];
    [sb appendWithInt:GeogebraCommonKernelKernel_getPrintFigures(self)];
    [sb appendWithNSString:@"\"/>\n"];
  }
  else {
    [sb appendWithNSString:@"\t<decimals val=\""];
    [sb appendWithInt:GeogebraCommonKernelKernel_getPrintDecimals(self)];
    [sb appendWithNSString:@"\"/>\n"];
  }
  [sb appendWithNSString:@"\t<angleUnit val=\""];
  [sb appendWithNSString:GeogebraCommonKernelKernel_getAngleUnit(self) == GeogebraCommonKernelKernel_ANGLE_RADIANT ? @"radiant" : @"degree"];
  [sb appendWithNSString:@"\"/>\n"];
  [sb appendWithNSString:@"\t<algebraStyle val=\""];
  [sb appendWithInt:algebraStyle_];
  [sb appendWithNSString:@"\"/>\n"];
  [sb appendWithNSString:@"\t<coordStyle val=\""];
  [sb appendWithInt:GeogebraCommonKernelKernel_getCoordStyle(self)];
  [sb appendWithNSString:@"\"/>\n"];
  if (!asPreference) {
    [sb appendWithNSString:@"\t<angleFromInvTrig val=\""];
    [sb appendWithBoolean:[self getInverseTrigReturnsAngle]];
    [sb appendWithNSString:@"\"/>\n"];
  }
  if (GeogebraCommonKernelKernel_isAnimationRunning(self)) {
    [sb appendWithNSString:@"\t<startAnimation val=\""];
    [sb appendWithBoolean:GeogebraCommonKernelKernel_isAnimationRunning(self)];
    [sb appendWithNSString:@"\"/>\n"];
  }
  if (asPreference) {
    [sb appendWithNSString:@"\t<localization"];
    [sb appendWithNSString:@" digits=\""];
    [sb appendWithBoolean:[((GeogebraCommonMainLocalization *) nil_chk([self getLocalization])) isUsingLocalizedDigits]];
    [sb appendWithNSString:@"\""];
    [sb appendWithNSString:@" labels=\""];
    [sb appendWithBoolean:[((GeogebraCommonMainLocalization *) nil_chk([self getLocalization])) isUsingLocalizedLabels]];
    [sb appendWithNSString:@"\""];
    [sb appendWithNSString:@"/>\n"];
    [sb appendWithNSString:@"\t<casSettings"];
    [sb appendWithNSString:@" timeout=\""];
    [sb appendWithId:GeogebraCommonIoMyXMLHandler_getTimeoutOptionWithLong_([((GeogebraCommonMainSettingsCASSettings *) nil_chk([((GeogebraCommonMainSettingsSettings *) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getSettings])) getCasSettings])) getTimeoutMilliseconds] / 1000)];
    [sb appendWithNSString:@"\""];
    [sb appendWithNSString:@" expRoots=\""];
    [sb appendWithBoolean:[((GeogebraCommonMainSettingsCASSettings *) nil_chk([((GeogebraCommonMainSettingsSettings *) nil_chk([app_ getSettings])) getCasSettings])) getShowExpAsRoots]];
    [sb appendWithNSString:@"\""];
    [sb appendWithNSString:@"/>\n"];
  }
  [sb appendWithNSString:@"</kernel>\n"];
}

- (void)addMacroWithGeogebraCommonKernelMacro:(GeogebraCommonKernelMacro *)macro {
  if (macroManager_ == nil) {
    GeogebraCommonKernelKernel_setAndConsume_macroManager_(self, new_GeogebraCommonKernelMacroManager_initWithGeogebraCommonMainApp_(GeogebraCommonKernelKernel_getApplication(self)));
  }
  [((GeogebraCommonKernelMacroManager *) nil_chk(macroManager_)) addMacroWithGeogebraCommonKernelMacro:macro];
  for (id<GeogebraCommonKernelUserAwarenessListener> __strong listener in nil_chk(self->userAwarenessListeners_)) {
    [((id<GeogebraCommonKernelUserAwarenessListener>) nil_chk(listener)) addMacroWithGeogebraCommonKernelMacro:macro];
  }
}

- (void)removeMacroWithGeogebraCommonKernelMacro:(GeogebraCommonKernelMacro *)macro {
  if (macroManager_ != nil) [macroManager_ removeMacroWithGeogebraCommonKernelMacro:macro];
  for (id<GeogebraCommonKernelUserAwarenessListener> __strong listener in nil_chk(self->userAwarenessListeners_)) {
    [((id<GeogebraCommonKernelUserAwarenessListener>) nil_chk(listener)) removeMacroWithGeogebraCommonKernelMacro:macro];
  }
}

- (void)removeAllMacros {
  if (macroManager_ != nil) {
    [((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) removeMacroCommands];
    [macroManager_ removeAllMacros];
  }
  for (id<GeogebraCommonKernelUserAwarenessListener> __strong listener in nil_chk(self->userAwarenessListeners_)) {
    [((id<GeogebraCommonKernelUserAwarenessListener>) nil_chk(listener)) removeAllMacros];
  }
}

- (jboolean)setMacroCommandNameWithGeogebraCommonKernelMacro:(GeogebraCommonKernelMacro *)macro
                                                withNSString:(NSString *)cmdName {
  jboolean nameUsed = [((GeogebraCommonKernelMacroManager *) nil_chk(macroManager_)) getMacroWithNSString:cmdName] != nil;
  if (nameUsed || cmdName == nil || ((jint) [cmdName length]) == 0) return NO;
  for (id<GeogebraCommonKernelUserAwarenessListener> __strong listener in nil_chk(self->userAwarenessListeners_)) {
    [((id<GeogebraCommonKernelUserAwarenessListener>) nil_chk(listener)) setMacroCommandNameWithGeogebraCommonKernelMacro:macro withNSString:cmdName];
  }
  [macroManager_ setMacroCommandNameWithGeogebraCommonKernelMacro:macro withNSString:cmdName];
  return YES;
}

- (GeogebraCommonKernelMacro *)getMacroWithNSString:(NSString *)name {
  return (macroManager_ == nil) ? nil : [macroManager_ getMacroWithNSString:name];
}

- (NSString *)getMacroXMLWithJavaUtilArrayList:(JavaUtilArrayList *)macros {
  if ([self hasMacros]) return GeogebraCommonKernelMacroManager_getMacroXMLWithJavaUtilArrayList_(macros);
  return @"";
}

- (jboolean)hasMacros {
  return (macroManager_ != nil && [macroManager_ getMacroNumber] > 0);
}

- (jint)getMacroNumber {
  if (macroManager_ == nil) return 0;
  return [((GeogebraCommonKernelMacroManager *) nil_chk(macroManager_)) getMacroNumber];
}

- (JavaUtilArrayList *)getAllMacros {
  if (macroManager_ == nil) {
    return nil;
  }
  return [((GeogebraCommonKernelMacroManager *) nil_chk(macroManager_)) getAllMacros];
}

- (GeogebraCommonKernelMacro *)getMacroWithInt:(jint)i {
  @try {
    return [((GeogebraCommonKernelMacroManager *) nil_chk(macroManager_)) getMacroWithInt:i];
  }
  @catch (JavaLangException *e) {
    return nil;
  }
}

- (jint)getMacroIDWithGeogebraCommonKernelMacro:(GeogebraCommonKernelMacro *)macro {
  return (macroManager_ == nil) ? -1 : [macroManager_ getMacroIDWithGeogebraCommonKernelMacro:macro];
}

- (GeogebraCommonKernelGeosGeoElement *)createGeoElementWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons1
                                                                                withNSString:(NSString *)type {
  switch ([((NSString *) nil_chk(type)) charAtWithInt:0]) {
    case 'a':
    if ([type isEqual:@"angle"]) return [new_GeogebraCommonKernelGeosGeoAngle_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    return [new_GeogebraCommonKernelGeosGeoAxis_initWithGeogebraCommonKernelConstruction_withInt_(cons1, 1) autorelease];
    case 'b':
    if ([type isEqual:@"boolean"]) {
      return [new_GeogebraCommonKernelGeosGeoBoolean_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    }
    return [new_GeogebraCommonKernelGeosGeoButton_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    case 'c':
    if ([type isEqual:@"conic"]) return [new_GeogebraCommonKernelGeosGeoConic_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else if ([type isEqual:@"conicpart"]) return [new_GeogebraCommonKernelGeosGeoConicPart_initWithGeogebraCommonKernelConstruction_withInt_(cons1, 0) autorelease];
    else if ([type isEqual:@"curvecartesian"]) return [new_GeogebraCommonKernelGeosGeoCurveCartesian_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else if ([type isEqual:@"cascell"]) return [new_GeogebraCommonKernelGeosGeoCasCell_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else if ([type isEqual:@"circle"]) {
      return [new_GeogebraCommonKernelGeosGeoConic_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    }
    case 'd':
    return [new_GeogebraCommonKernelGeosGeoConic_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    case 'e':
    return [new_GeogebraCommonKernelGeosGeoConic_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    case 'f':
    if ([type isEqual:@"function"]) {
      return [new_GeogebraCommonKernelGeosGeoFunction_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    }
    else if ([type isEqual:@"functionconditional"]) {
      return [new_GeogebraCommonKernelGeosGeoFunction_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    }
    else {
      return [new_GeogebraCommonKernelGeosGeoFunctionNVar_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    }
    case 'h':
    return [new_GeogebraCommonKernelGeosGeoConic_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    case 'i':
    if ([type isEqual:@"image"]) return [new_GeogebraCommonKernelGeosGeoImage_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else if ([type isEqual:@"intersectinglines"]) return [new_GeogebraCommonKernelGeosGeoConic_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else if ([type isEqual:@"implicitpoly"]) return [new_GeogebraCommonKernelImplicitGeoImplicitPoly_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else if ([type isEqual:@"interval"]) {
      return [new_GeogebraCommonKernelGeosGeoInterval_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    }
    case 'l':
    if ([type isEqual:@"line"]) return [new_GeogebraCommonKernelGeosGeoLine_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else if ([type isEqual:@"list"]) return [new_GeogebraCommonKernelGeosGeoList_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else return [new_GeogebraCommonKernelGeosGeoLocus_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    case 'n':
    return [new_GeogebraCommonKernelGeosGeoNumeric_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    case 'p':
    if ([type isEqual:@"point"]) return [new_GeogebraCommonKernelGeosGeoPoint_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    else if ([type isEqual:@"polygon"]) return [new_GeogebraCommonKernelGeosGeoPolygon_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelKernelNDGeoPointNDArray_(cons1, nil) autorelease];
    else if ([type isEqual:@"polyline"]) return [new_GeogebraCommonKernelGeosGeoPolyLine_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelKernelNDGeoPointNDArray_(cons1, [IOSObjectArray arrayWithObjects:(id[]){  } count:0 type:GeogebraCommonKernelKernelNDGeoPointND_class_()]) autorelease];
    else return [new_GeogebraCommonKernelGeosGeoConic_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    case 'r':
    return [new_GeogebraCommonKernelGeosGeoRay_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoPoint_(cons1, nil) autorelease];
    case 's':
    return [new_GeogebraCommonKernelGeosGeoSegment_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelGeosGeoPoint_withGeogebraCommonKernelGeosGeoPoint_(cons1, nil, nil) autorelease];
    case 't':
    if ([type isEqual:@"text"]) {
      return [new_GeogebraCommonKernelGeosGeoText_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    }
    return [new_GeogebraCommonKernelGeosGeoTextField_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    case 'v':
    return [new_GeogebraCommonKernelGeosGeoVector_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
    default:
    @throw [new_GeogebraCommonMainMyError_initWithGeogebraCommonMainLocalization_withNSString_([((GeogebraCommonMainApp *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(cons1)) getApplication])) getLocalization], JreStrcat("$$$", @"Kernel: GeoElement of type ", type, @" could not be created.")) autorelease];
  }
}

- (void)setWantAnimationStarted {
  wantAnimationStarted__ = YES;
}

- (jboolean)wantAnimationStarted {
  return wantAnimationStarted__;
}

- (GeogebraCommonKernelArithmeticExpressionNode *)convertNumberValueToExpressionNodeWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  GeogebraCommonKernelAlgosAlgoElement *algo = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getParentAlgorithm];
  id<GeogebraCommonKernelArithmeticTraversing> ifReplacer = [new_GeogebraCommonKernelKernel_$2_initWithGeogebraCommonKernelKernel_(self) autorelease];
  if (![geo isLabelSet] && algo != nil && [algo isKindOfClass:[GeogebraCommonKernelAlgosAlgoDependentNumber class]]) {
    GeogebraCommonKernelAlgosAlgoDependentNumber *algoDep = (GeogebraCommonKernelAlgosAlgoDependentNumber *) check_class_cast(algo, [GeogebraCommonKernelAlgosAlgoDependentNumber class]);
    return [((id<GeogebraCommonKernelArithmeticExpressionValue>) nil_chk([((GeogebraCommonKernelArithmeticExpressionNode *) nil_chk([((GeogebraCommonKernelArithmeticExpressionNode *) nil_chk([algoDep getExpression])) getCopyWithGeogebraCommonKernelKernel:self])) traverseWithGeogebraCommonKernelArithmeticTraversing:ifReplacer])) wrap];
  }
  if (![geo isLabelSet] && algo != nil && [algo isKindOfClass:[GeogebraCommonKernelAlgosAlgoDependentBoolean class]]) {
    GeogebraCommonKernelAlgosAlgoDependentBoolean *algoDep = (GeogebraCommonKernelAlgosAlgoDependentBoolean *) check_class_cast(algo, [GeogebraCommonKernelAlgosAlgoDependentBoolean class]);
    return [((GeogebraCommonKernelArithmeticExpressionNode *) nil_chk([algoDep getExpression])) getCopyWithGeogebraCommonKernelKernel:self];
  }
  if (![geo isLabelSet] && algo != nil && [algo isKindOfClass:[GeogebraCommonKernelAlgosAlgoIf class]]) {
    return [((GeogebraCommonKernelAlgosAlgoIf *) check_class_cast(algo, [GeogebraCommonKernelAlgosAlgoIf class])) toExpression];
  }
  return [new_GeogebraCommonKernelArithmeticExpressionNode_initWithGeogebraCommonKernelKernel_withGeogebraCommonKernelArithmeticExpressionValue_(self, geo) autorelease];
}

- (IOSObjectArray *)VectorPolygonWithNSStringArray:(IOSObjectArray *)labels
   withGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)points {
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_init() autorelease];
  jdouble xA = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(nil_chk(points), 0))) getInhomX];
  jdouble yA = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) getInhomY];
  for (jint i = 1; i < points->size_; i++) {
    jdouble xC = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) getInhomX];
    jdouble yC = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) getInhomY];
    GeogebraCommonKernelGeosGeoNumeric *nx = [new_GeogebraCommonKernelGeosGeoNumeric_initWithGeogebraCommonKernelConstruction_withNSString_withDouble_(cons_, nil, xC - xA) autorelease];
    GeogebraCommonKernelGeosGeoNumeric *ny = [new_GeogebraCommonKernelGeosGeoNumeric_initWithGeogebraCommonKernelConstruction_withNSString_withDouble_(cons_, nil, yC - yA) autorelease];
    GeogebraCommonKernelStringTemplate *tpl = GeogebraCommonKernelStringTemplate_get_maxPrecision_();
    [sb setLengthWithInt:0];
    [sb appendWithChar:'('];
    [sb appendWithNSString:[nx getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [sb appendWithNSString:@"+x("];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [sb appendWithNSString:@"),"];
    [sb appendWithNSString:[ny getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [sb appendWithNSString:@"+y("];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [sb appendWithNSString:@"))"];
    GeogebraCommonKernelGeosGeoPoint *pp = (GeogebraCommonKernelGeosGeoPoint *) check_class_cast([((GeogebraCommonKernelCommandsAlgebraProcessor *) nil_chk([self getAlgebraProcessor])) evaluateToPointWithNSString:[sb description] withBoolean:YES withBoolean:YES], [GeogebraCommonKernelGeosGeoPoint class]);
    @try {
      [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) replaceWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(IOSObjectArray_Get(points, i), [GeogebraCommonKernelGeosGeoElement class]) withGeogebraCommonKernelGeosGeoElement:pp];
      IOSObjectArray_Set(points, i, pp);
      [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) update];
    }
    @catch (JavaLangException *e) {
      [((JavaLangException *) nil_chk(e)) printStackTrace];
      return nil;
    }
  }
  [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) update];
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) PolygonWithNSStringArray:labels withGeogebraCommonKernelKernelNDGeoPointNDArray:points];
}

- (IOSObjectArray *)RigidPolygonWithGeogebraCommonKernelGeosGeoPolygon:(GeogebraCommonKernelGeosGeoPolygon *)poly
                                                            withDouble:(jdouble)offsetX
                                                            withDouble:(jdouble)offsetY {
  IOSObjectArray *p = [IOSObjectArray arrayWithLength:[((GeogebraCommonKernelGeosGeoPolygon *) nil_chk(poly)) getPointsLength] type:GeogebraCommonKernelKernelNDGeoPointND_class_()];
  IOSObjectArray_Set(p, 0, [((GeogebraCommonKernelGeosGeoPoint *) nil_chk([poly getPointWithInt:0])) copy__]);
  [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, 0))) setLabelWithNSString:nil];
  IOSObjectArray *segs = [poly getSegments];
  IOSObjectArray *pts = [poly getPoints];
  jboolean oldMacroMode = [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) isSuppressLabelsActive];
  [cons_ setSuppressLabelCreationWithBoolean:YES];
  GeogebraCommonKernelKernelNDGeoConicND *circle = [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) CircleWithNSString:nil withGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(p, 0) withGeogebraCommonKernelArithmeticNumberValue:IOSObjectArray_Get(nil_chk([poly getSegments]), 0)];
  [cons_ setSuppressLabelCreationWithBoolean:oldMacroMode];
  IOSObjectArray_Set(p, 1, [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) PointWithNSString:nil withGeogebraCommonKernelPath:circle withDouble:((GeogebraCommonKernelGeosGeoPoint *) nil_chk([poly getPointWithInt:1]))->inhomX_ withDouble:((GeogebraCommonKernelGeosGeoPoint *) nil_chk([poly getPointWithInt:1]))->inhomY_ withBoolean:YES withBoolean:NO withBoolean:YES]);
  [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, 1))) setLabelWithNSString:nil];
  jboolean oldVal = [self isUsingInternalCommandNames];
  [self setUseInternalCommandNamesWithBoolean:YES];
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_init() autorelease];
  for (jint i = 2; i < [poly getPointsLength]; i++) {
    [sb setLengthWithInt:0];
    [sb appendWithNSString:@"Rotate["];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, i - 1))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@"+ ("];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoSegmentND>) nil_chk(IOSObjectArray_Get(nil_chk(segs), i - 1))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@", 0), Angle["];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(nil_chk(pts), i))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@"-"];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(pts, i - 1))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@"] + Angle["];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, i - 1))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@"-"];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, i - 2))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@"] - Angle["];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(pts, i - 1))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@"-"];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(pts, i - 2))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@"],"];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, i - 1))) getLabelWithGeogebraCommonKernelStringTemplate:GeogebraCommonKernelStringTemplate_get_defaultTemplate_()]];
    [sb appendWithNSString:@"]"];
    IOSObjectArray_Set(p, i, [((GeogebraCommonKernelCommandsAlgebraProcessor *) nil_chk([self getAlgebraProcessor])) evaluateToPointWithNSString:[sb description] withBoolean:YES withBoolean:NO]);
    [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, i))) setLabelWithNSString:nil];
    [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, i))) setEuclidianVisibleWithBoolean:NO];
    [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(p, i))) update];
  }
  [self setUseInternalCommandNamesWithBoolean:oldVal];
  GeogebraCommonKernelAlgosAlgoPolygon *algo = [new_GeogebraCommonKernelAlgosAlgoPolygon_initWithGeogebraCommonKernelConstruction_withNSStringArray_withGeogebraCommonKernelKernelNDGeoPointNDArray_(cons_, nil, p) autorelease];
  IOSObjectArray *ret = [IOSObjectArray arrayWithObjects:(id[]){ IOSObjectArray_Get(nil_chk([algo getGeoElements]), 0) } count:1 type:GeogebraCommonKernelGeosGeoElement_class_()];
  id<GeogebraCommonKernelKernelNDGeoPointND> firstPoint = IOSObjectArray_Get(nil_chk([((GeogebraCommonKernelGeosGeoPolygon *) nil_chk(((GeogebraCommonKernelGeosGeoPolygon *) check_class_cast(IOSObjectArray_Get(ret, 0), [GeogebraCommonKernelGeosGeoPolygon class])))) getPoints]), 0);
  [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(firstPoint)) updateCoords2D];
  [firstPoint setCoordsWithDouble:[firstPoint getX2D] + offsetX withDouble:[firstPoint getY2D] + offsetY withDouble:1.0];
  [firstPoint updateRepaint];
  return ret;
}

- (id<GeogebraCommonKernelKernelNDGeoPointND>)RigidPolygonPointOnCircleWithGeogebraCommonKernelKernelNDGeoConicND:(GeogebraCommonKernelKernelNDGeoConicND *)circle
                                                                       withGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)point1 {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) PointWithNSString:nil withGeogebraCommonKernelPath:circle withDouble:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(point1)) getInhomX] withDouble:[point1 getInhomY] withBoolean:YES withBoolean:NO withBoolean:YES];
}

- (IOSObjectArray *)RigidPolygonWithNSStringArray:(IOSObjectArray *)labels
  withGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)points {
  jboolean oldMacroMode = [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) isSuppressLabelsActive];
  [cons_ setSuppressLabelCreationWithBoolean:YES];
  GeogebraCommonKernelKernelNDGeoConicND *circle = [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) CircleWithNSString:nil withGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(nil_chk(points), 0) withGeogebraCommonKernelArithmeticNumberValue:[new_GeogebraCommonKernelArithmeticMyDouble_initWithGeogebraCommonKernelKernel_withDouble_(self, [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) distanceWithGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(points, 1)]) autorelease]];
  [cons_ setSuppressLabelCreationWithBoolean:oldMacroMode];
  id<GeogebraCommonKernelKernelNDGeoPointND> p = [self RigidPolygonPointOnCircleWithGeogebraCommonKernelKernelNDGeoConicND:circle withGeogebraCommonKernelKernelNDGeoPointND:IOSObjectArray_Get(points, 1)];
  @try {
    [(cons_) replaceWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(IOSObjectArray_Get(points, 1), [GeogebraCommonKernelGeosGeoElement class]) withGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(p, [GeogebraCommonKernelGeosGeoElement class])];
    IOSObjectArray_Set(points, 1, p);
  }
  @catch (JavaLangException *e) {
    [((JavaLangException *) nil_chk(e)) printStackTrace];
    return nil;
  }
  JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_init() autorelease];
  jdouble xA = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) getInhomX];
  jdouble yA = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) getInhomY];
  jdouble xB = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 1))) getInhomX];
  jdouble yB = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 1))) getInhomY];
  GeogebraCommonKernelGeosGeoVec2D *a = [new_GeogebraCommonKernelGeosGeoVec2D_initWithGeogebraCommonKernelKernel_withDouble_withDouble_([cons_ getKernel], xB - xA, yB - yA) autorelease];
  GeogebraCommonKernelGeosGeoVec2D *b = [new_GeogebraCommonKernelGeosGeoVec2D_initWithGeogebraCommonKernelKernel_withDouble_withDouble_([cons_ getKernel], yA - yB, xB - xA) autorelease];
  jdouble aLength = JavaLangMath_sqrtWithDouble_([a innerWithGeogebraCommonKernelGeosGeoVec2D:a]);
  jboolean oldVal = [self isUsingInternalCommandNames];
  [self setUseInternalCommandNamesWithBoolean:YES];
  [a makeUnitVector];
  [b makeUnitVector];
  GeogebraCommonKernelStringTemplate *tpl = GeogebraCommonKernelStringTemplate_get_maxPrecision_();
  jboolean is3D = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) isGeoElement3D] || [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 1))) isGeoElement3D];
  for (jint i = 2; i < points->size_; i++) {
    jdouble xC = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) getInhomX];
    jdouble yC = [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) getInhomY];
    GeogebraCommonKernelGeosGeoVec2D *d = [new_GeogebraCommonKernelGeosGeoVec2D_initWithGeogebraCommonKernelKernel_withDouble_withDouble_([cons_ getKernel], xC - xA, yC - yA) autorelease];
    [sb setLengthWithInt:0];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [sb appendWithChar:'+'];
    [sb appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, [a innerWithGeogebraCommonKernelGeosGeoVec2D:d] / aLength, tpl)];
    [sb appendWithNSString:@"Vector["];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [sb appendWithChar:','];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 1))) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [sb appendWithNSString:@"]+"];
    [sb appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, [b innerWithGeogebraCommonKernelGeosGeoVec2D:d] / aLength, tpl)];
    [sb appendWithNSString:@"OrthogonalVector[Segment["];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [sb appendWithChar:','];
    [sb appendWithNSString:[((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 1))) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
    [self RigidPolygonAddEndOfCommandWithJavaLangStringBuilder:sb withBoolean:is3D];
    id<GeogebraCommonKernelKernelNDGeoPointND> pp = [((GeogebraCommonKernelCommandsAlgebraProcessor *) nil_chk([self getAlgebraProcessor])) evaluateToPointWithNSString:[sb description] withBoolean:YES withBoolean:YES];
    @try {
      [(cons_) replaceWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(IOSObjectArray_Get(points, i), [GeogebraCommonKernelGeosGeoElement class]) withGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(pp, [GeogebraCommonKernelGeosGeoElement class])];
      IOSObjectArray_Set(points, i, pp);
      [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) setEuclidianVisibleWithBoolean:NO];
      [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, i))) update];
    }
    @catch (JavaLangException *e) {
      [((JavaLangException *) nil_chk(e)) printStackTrace];
      return nil;
    }
  }
  [self setUseInternalCommandNamesWithBoolean:oldVal];
  [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(IOSObjectArray_Get(points, 0))) update];
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) PolygonWithNSStringArray:labels withGeogebraCommonKernelKernelNDGeoPointNDArray:points];
}

- (void)RigidPolygonAddEndOfCommandWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                                                 withBoolean:(jboolean)is3D {
  [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"]]"];
}

- (GeogebraCommonKernelGeosGeoLine *)TangentWithNSString:(NSString *)label
              withGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)P
           withGeogebraCommonKernelGeosGeoCurveCartesian:(GeogebraCommonKernelGeosGeoCurveCartesian *)f {
  return GeogebraCommonKernelKernelCAS_TangentWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelKernelNDGeoPointND_withGeogebraCommonKernelGeosGeoCurveCartesian_(cons_, label, P, f);
}

- (GeogebraCommonKernelGeosGeoElementSpreadsheet *)getGeoElementSpreadsheet {
  return ges_;
}

- (GeogebraCommonKernelMacroKernel *)newMacroKernel {
  return [new_GeogebraCommonKernelMacroKernel_initWithGeogebraCommonKernelKernel_(self) autorelease];
}

- (void)notifyChangeLayerWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)ge
                                                        withInt:(jint)layer
                                                        withInt:(jint)layer2 {
  [((GeogebraCommonMainApp *) nil_chk(app_)) updateMaxLayerUsedWithInt:layer2];
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonKernelLayerView_class_() isInstance:view]) [((id<GeogebraCommonKernelLayerView>) nil_chk(((id<GeogebraCommonKernelLayerView>) check_protocol_cast(view, @protocol(GeogebraCommonKernelLayerView))))) changeLayerWithGeogebraCommonKernelGeosGeoElement:ge withInt:layer withInt:layer2];
    }
  }
}

- (jdouble)getXmaxForFunctions {
  return (((2 * [self getXmax]) - [self getXmin]) + [self getYmax]) - [self getYmin];
}

- (jdouble)getXminForFunctions {
  return (((2 * [self getXmin]) - [self getXmax]) + [self getYmin]) - [self getYmax];
}

- (void)clearCasCache {
  if (ggbCasCache_ != nil) {
    [ggbCasCache_ clear];
  }
  if (ggbCAS_ != nil) {
    [ggbCAS_ clearCache];
  }
}

- (void)refreshCASCommands {
  [self clearCasCache];
  [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) recomputeCASalgos];
  JavaUtilTreeSet *treeset = [new_JavaUtilTreeSet_initWithJavaUtilSortedSet_([((GeogebraCommonKernelConstruction *) nil_chk([self getConstruction])) getGeoSetWithCasCellsConstructionOrder]) autorelease];
  JavaUtilArrayList *al = [new_JavaUtilArrayList_init() autorelease];
  id<JavaUtilIterator> it = [treeset iterator];
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    GeogebraCommonKernelGeosGeoElement *geo = [it next];
    if ([GeogebraCommonKernelArithmeticFunctionalNVar_class_() isInstance:geo]) {
      GeogebraCommonKernelArithmeticFunctionNVar *fun = [((id<GeogebraCommonKernelArithmeticFunctionalNVar>) nil_chk(((id<GeogebraCommonKernelArithmeticFunctionalNVar>) check_protocol_cast(geo, @protocol(GeogebraCommonKernelArithmeticFunctionalNVar))))) getFunction];
      if (fun != nil) {
        [fun clearCasEvalMapWithNSString:@""];
      }
    }
    else if ([geo isKindOfClass:[GeogebraCommonKernelGeosGeoCurveCartesian class]]) {
      GeogebraCommonKernelGeosGeoCurveCartesian *curve = (GeogebraCommonKernelGeosGeoCurveCartesian *) check_class_cast(geo, [GeogebraCommonKernelGeosGeoCurveCartesian class]);
      GeogebraCommonKernelArithmeticFunctionNVar *fun1 = [((GeogebraCommonKernelGeosGeoCurveCartesian *) nil_chk(curve)) getFunX];
      GeogebraCommonKernelArithmeticFunctionNVar *fun2 = [curve getFunY];
      if (fun1 != nil) {
        [fun1 clearCasEvalMapWithNSString:@""];
      }
      if (fun2 != nil) {
        [fun2 clearCasEvalMapWithNSString:@""];
      }
    }
    GeogebraCommonKernelAlgosAlgoElement *algo = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getParentAlgorithm];
    if ([algo isKindOfClass:[GeogebraCommonKernelAlgosAlgoCasBase class]]) {
      [((GeogebraCommonKernelAlgosAlgoCasBase *) nil_chk(((GeogebraCommonKernelAlgosAlgoCasBase *) check_class_cast(algo, [GeogebraCommonKernelAlgosAlgoCasBase class])))) clearCasEvalMapWithNSString:@""];
      [((GeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) compute];
    }
    else if ([algo isKindOfClass:[GeogebraCommonKernelCasAlgoUsingTempCASalgo class]]) {
      [((GeogebraCommonKernelCasAlgoUsingTempCASalgo *) nil_chk(((GeogebraCommonKernelCasAlgoUsingTempCASalgo *) check_class_cast(algo, [GeogebraCommonKernelCasAlgoUsingTempCASalgo class])))) refreshCASResults];
      [((GeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) compute];
    }
    else if ([GeogebraCommonKernelCasUsesCAS_class_() isInstance:algo] || [GeogebraCommonKernelAlgoCasCellInterface_class_() isInstance:algo]) {
      [((GeogebraCommonKernelAlgosAlgoElement *) nil_chk(algo)) compute];
    }
    if ([geo isGeoCasCell] && algo == nil) {
      [((GeogebraCommonKernelGeosGeoCasCell *) check_class_cast(geo, [GeogebraCommonKernelGeosGeoCasCell class])) computeOutput];
    }
    [al addWithId:geo];
  }
  [cons_ setUpdateConstructionRunningWithBoolean:YES];
  GeogebraCommonKernelGeosGeoElement_updateCascadeWithJavaUtilArrayList_withJavaUtilTreeSet_withBoolean_(al, [new_JavaUtilTreeSet_init() autorelease], YES);
  [cons_ setUpdateConstructionRunningWithBoolean:NO];
}

- (IOSObjectArray *)PolygonNDWithNSStringArray:(IOSObjectArray *)labels
withGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)P {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) PolygonWithNSStringArray:labels withGeogebraCommonKernelKernelNDGeoPointNDArray:P];
}

- (IOSObjectArray *)PolyLineNDWithNSStringArray:(IOSObjectArray *)labels
withGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)P {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) PolyLineWithNSStringArray:labels withGeogebraCommonKernelKernelNDGeoPointNDArray:P withBoolean:NO];
}

- (id<GeogebraCommonKernelKernelNDGeoRayND>)RayNDWithNSString:(NSString *)transformedLabel
                   withGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)geoPointND
                   withGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)geoPointND2 {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) RayWithNSString:transformedLabel withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *) check_class_cast(geoPointND, [GeogebraCommonKernelGeosGeoPoint class]) withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *) check_class_cast(geoPointND2, [GeogebraCommonKernelGeosGeoPoint class])];
}

- (id<GeogebraCommonKernelKernelNDGeoLineND>)OrthogonalLineWithNSString:(NSString *)label
                             withGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)P
                              withGeogebraCommonKernelKernelNDGeoLineND:(id<GeogebraCommonKernelKernelNDGeoLineND>)l
                         withGeogebraCommonKernelKernelNDGeoDirectionND:(id<GeogebraCommonKernelKernelNDGeoDirectionND>)direction {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) OrthogonalLineWithNSString:label withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *) check_class_cast(P, [GeogebraCommonKernelGeosGeoPoint class]) withGeogebraCommonKernelGeosGeoLine:(GeogebraCommonKernelGeosGeoLine *) check_class_cast(l, [GeogebraCommonKernelGeosGeoLine class])];
}

- (id<GeogebraCommonKernelKernelNDGeoSegmentND>)SegmentNDWithNSString:(NSString *)label
                           withGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)P
                           withGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)Q {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) SegmentWithNSString:label withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *) check_class_cast(P, [GeogebraCommonKernelGeosGeoPoint class]) withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *) check_class_cast(Q, [GeogebraCommonKernelGeosGeoPoint class])];
}

- (GeogebraCommonKernelAlgosAlgoDispatcher *)getAlgoDispatcher {
  if (algoDispatcher_ == nil) {
    GeogebraCommonKernelKernel_set_algoDispatcher_(self, [self newAlgoDispatcherWithGeogebraCommonKernelConstruction:cons_]);
  }
  return algoDispatcher_;
}

- (GeogebraCommonKernelAlgosAlgoDispatcher *)newAlgoDispatcherWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons1 {
  return [new_GeogebraCommonKernelAlgosAlgoDispatcher_initWithGeogebraCommonKernelConstruction_(cons1) autorelease];
}

- (id<GeogebraCommonKernelKernelNDGeoRayND>)RayWithNSString:(NSString *)label
                       withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *)p
                       withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *)q {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) RayWithNSString:label withGeogebraCommonKernelGeosGeoPoint:p withGeogebraCommonKernelGeosGeoPoint:q];
}

- (id<GeogebraCommonKernelKernelNDGeoSegmentND>)SegmentWithNSString:(NSString *)label
                               withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *)p
                               withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *)q {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) SegmentWithNSString:label withGeogebraCommonKernelGeosGeoPoint:p withGeogebraCommonKernelGeosGeoPoint:q];
}

- (IOSObjectArray *)PolygonWithNSStringArray:(IOSObjectArray *)labels
withGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)p {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) PolygonWithNSStringArray:labels withGeogebraCommonKernelKernelNDGeoPointNDArray:p];
}

- (IOSObjectArray *)PolyLineWithNSStringArray:(IOSObjectArray *)labels
withGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)p
                                  withBoolean:(jboolean)b {
  return [((GeogebraCommonKernelAlgosAlgoDispatcher *) nil_chk([self getAlgoDispatcher])) PolyLineWithNSStringArray:labels withGeogebraCommonKernelKernelNDGeoPointNDArray:p withBoolean:b];
}

- (void)initAfterAsyncWithGeogebraCommonMainApp:(GeogebraCommonMainApp *)app1 {
  GeogebraCommonKernelKernel_set_app_(self, app1);
  [self newConstruction];
  [self getExpressionNodeEvaluator];
  [self setManager3DWithGeogebraCommonKernelManager3DInterface:[self newManager3DWithGeogebraCommonKernelKernel:self]];
}

- (jboolean)hasAlgebraProcessor {
  return algProcessor_ != nil;
}

- (void)setAlgebraProcessorWithGeogebraCommonKernelCommandsAlgebraProcessor:(GeogebraCommonKernelCommandsAlgebraProcessor *)algebraProcessor {
  GeogebraCommonKernelKernel_set_algProcessor_(self, algebraProcessor);
}

- (GeogebraCommonKernelCommandsAlgebraProcessor *)getAlgPForAsync {
  return algProcessor_;
}

- (id<GeogebraCommonKernelKernelNDGeoCoordSys2D>)getXOYPlane {
  return nil;
}

- (id<GeogebraCommonKernelKernelNDGeoDirectionND>)getSpace {
  return nil;
}

- (void)setUpdateAgainWithBoolean:(jboolean)value
withGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  updateEVAgain_ = value;
  if (value) {
    [((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) addLaTeXGeoWithGeogebraCommonKernelGeosGeoElement:geo];
  }
}

- (jboolean)getUpdateAgain {
  return updateEVAgain_ && [((GeogebraCommonMainApp *) nil_chk(app_)) isHTML5Applet];
}

- (void)setForceUpdatingBoundingBoxWithBoolean:(jboolean)value {
  forceUpdatingBoundingBox_ = value;
}

- (jboolean)getForceUpdatingBoundingBox {
  return forceUpdatingBoundingBox_ && [((GeogebraCommonMainApp *) nil_chk(app_)) isHTML5Applet];
}

- (jboolean)useCASforDerivatives {
  return ![((GeogebraCommonMainApp *) nil_chk(app_)) isScreenshotGenerator];
}

- (jboolean)useCASforIntegrals {
  return ![((GeogebraCommonMainApp *) nil_chk(app_)) isScreenshotGenerator];
}

- (void)notifyBatchUpdate {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) startBatchUpdate];
    }
  }
}

- (void)notifyEndBatchUpdate {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) endBatchUpdate];
    }
  }
}

- (void)setViewsLabels {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonGuiSetLabels_class_() isInstance:view]) {
        [((id<GeogebraCommonGuiSetLabels>) nil_chk(((id<GeogebraCommonGuiSetLabels>) check_protocol_cast(view, @protocol(GeogebraCommonGuiSetLabels))))) setLabels];
      }
    }
  }
}

- (void)setViewsOrientation {
  if (notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(views_)) {
      if ([GeogebraCommonGuiSetOrientation_class_() isInstance:view]) {
        [((id<GeogebraCommonGuiSetOrientation>) nil_chk(((id<GeogebraCommonGuiSetOrientation>) check_protocol_cast(view, @protocol(GeogebraCommonGuiSetOrientation))))) setOrientation];
      }
    }
  }
}

- (jboolean)noNeedToSpecifyXOYPlane {
  return [self getXOYPlane] == nil || [((id<GeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) getActiveEuclidianView])) isDefault2D];
}

- (GeogebraCommonKernelGeosGeoElement *)copy3DWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) copy__];
}

- (GeogebraCommonKernelGeosGeoElement *)copyInternal3DWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons1
                                                    withGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo {
  return [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) copyInternalWithGeogebraCommonKernelConstruction:cons1];
}

- (void)setStringModeWithGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)point {
  if ([((GeogebraCommonKernelConstruction *) nil_chk(cons_)) isFileLoading]) {
    return;
  }
  if ([((id<GeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk([((GeogebraCommonMainApp *) nil_chk(app_)) getActiveEuclidianView])) isEuclidianView3D]) {
    [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(point)) setCartesian3D];
  }
  else {
    [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(point)) setCartesian];
  }
  [((id<GeogebraCommonKernelKernelNDGeoPointND>) nil_chk(point)) update];
}

- (jboolean)isParsingFor3D {
  if ([self getLoadingMode]) {
    return NO;
  }
  id<GeogebraCommonEuclidianEuclidianViewInterfaceCommon> ev = [((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) getActiveEuclidianView];
  if ([((id<GeogebraCommonEuclidianEuclidianViewInterfaceCommon>) nil_chk(ev)) isEuclidianView3D] || [ev isShowing]) {
    return [ev isEuclidianView3D];
  }
  return [((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) showViewWithInt:GeogebraCommonMainApp_VIEW_EUCLIDIAN3D];
}

- (GeogebraCommonKernelGeosGeoElement *)wrapInVectorWithGeogebraCommonKernelKernelNDGeoPointND:(id<GeogebraCommonKernelKernelNDGeoPointND>)pt {
  GeogebraCommonKernelAlgosAlgoVectorPoint *algo = [new_GeogebraCommonKernelAlgosAlgoVectorPoint_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelKernelNDGeoPointND_(cons_, pt) autorelease];
  [((GeogebraCommonKernelConstruction *) nil_chk(cons_)) removeFromConstructionListWithGeogebraCommonKernelAlgosConstructionElement:algo];
  return (GeogebraCommonKernelGeosGeoElement *) check_class_cast([algo getVector], [GeogebraCommonKernelGeosGeoElement class]);
}

- (id<GeogebraCommonKernelKernelNDGeoAxisND>)getXAxis3D {
  return nil;
}

- (id<GeogebraCommonKernelKernelNDGeoAxisND>)getYAxis3D {
  return nil;
}

- (id<GeogebraCommonKernelKernelNDGeoAxisND>)getZAxis3D {
  return nil;
}

- (GeogebraCommonKernelGeosGeoElement *)getClippingCube {
  return nil;
}

- (void)dealloc {
  RELEASE_(macroManager_);
  RELEASE_(views_);
  RELEASE_(newPolygon_);
  RELEASE_(deleteList_);
  RELEASE_(userAwarenessListeners_);
  RELEASE_(cons_);
  RELEASE_(algProcessor_);
  RELEASE_(expressionNodeEvaluator_);
  RELEASE_(usePathAndRegionParameters__);
  RELEASE_(ggbCAS_);
  RELEASE_(nf_);
  RELEASE_(sf_);
  RELEASE_(sbBuildExplicitLineEquation_);
  RELEASE_(app_);
  RELEASE_(eqnSolver_);
  RELEASE_(sysEqSolv_);
  RELEASE_(extrFinder_);
  RELEASE_(parser_);
  RELEASE_(manager3D_);
  RELEASE_(concurrentModificationLock_);
  RELEASE_(animationManager_);
  RELEASE_(sbFormat_);
  RELEASE_(formatSB_);
  RELEASE_(sbBuildImplicitEquation_);
  RELEASE_(sbBuildLHS_);
  RELEASE_(sbBuildExplicitConicEquation_);
  RELEASE_(sbFormatSF_);
  RELEASE_(libraryJavaScript_);
  RELEASE_(sbFormatAngle_);
  RELEASE_(ggbCasCache_);
  RELEASE_(xmin_);
  RELEASE_(xmax_);
  RELEASE_(ymin_);
  RELEASE_(ymax_);
  RELEASE_(xscale_);
  RELEASE_(yscale_);
  RELEASE_(renameListenerAlgos_);
  RELEASE_(selectedGeosNames_);
  RELEASE_(imaginaryUnit_);
  RELEASE_(ges_);
  RELEASE_(algoDispatcher_);
  [super dealloc];
}

+ (void)initialize {
  if (self == [GeogebraCommonKernelKernel class]) {
    GeogebraCommonKernelKernel_MAX_SPREADSHEET_COLUMNS_VISIBLE_ = GeogebraCommonKernelKernel_MAX_SPREADSHEET_COLUMNS_DESKTOP_;
    GeogebraCommonKernelKernel_MAX_SPREADSHEET_ROWS_VISIBLE_ = GeogebraCommonKernelKernel_MAX_SPREADSHEET_ROWS_DESKTOP_;
    GeogebraCommonKernelKernel_SQRT_2_HALF_ = JavaLangMath_sqrtWithDouble_(2.0) / 2.0;
    J2OBJC_SET_INITIALIZED(GeogebraCommonKernelKernel)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonMainApp:", "Kernel", NULL, 0x1, NULL, NULL },
    { "init", "Kernel", NULL, 0x4, NULL, NULL },
    { "getAlgebraProcessor", NULL, "Lgeogebra.common.kernel.commands.AlgebraProcessor;", 0x1, NULL, NULL },
    { "newAlgebraProcessorWithGeogebraCommonKernelKernel:", "newAlgebraProcessor", "Lgeogebra.common.kernel.commands.AlgebraProcessor;", 0x1, NULL, NULL },
    { "newManager3DWithGeogebraCommonKernelKernel:", "newManager3D", "Lgeogebra.common.kernel.Manager3DInterface;", 0x1, NULL, NULL },
    { "getConcurrentModificationLock", NULL, "Ljava.lang.Object;", 0x1, NULL, NULL },
    { "setManager3DWithGeogebraCommonKernelManager3DInterface:", "setManager3D", "V", 0x1, NULL, NULL },
    { "getDefaultPlane", NULL, "Lgeogebra.common.kernel.kernelND.GeoPlaneND;", 0x1, NULL, NULL },
    { "getManager3D", NULL, "Lgeogebra.common.kernel.Manager3DInterface;", 0x1, NULL, NULL },
    { "newConstruction", NULL, "V", 0x4, NULL, NULL },
    { "newMyXMLHandlerWithGeogebraCommonKernelConstruction:", "newMyXMLHandler", "Lgeogebra.common.io.MyXMLHandler;", 0x1, NULL, NULL },
    { "newMyXMLHandlerWithGeogebraCommonKernelKernel:withGeogebraCommonKernelConstruction:", "newMyXMLHandler", "Lgeogebra.common.io.MyXMLHandler;", 0x1, NULL, NULL },
    { "getApplication", NULL, "Lgeogebra.common.main.App;", 0x11, NULL, NULL },
    { "getEquationSolver", NULL, "Lgeogebra.common.kernel.EquationSolver;", 0x11, NULL, NULL },
    { "getSystemOfEquationsSolverWithGeogebraCommonKernelEquationSolverInterface:", "getSystemOfEquationsSolver", "Lgeogebra.common.kernel.SystemOfEquationsSolver;", 0x11, NULL, NULL },
    { "getExtremumFinder", NULL, "Lgeogebra.common.kernel.optimization.ExtremumFinder;", 0x11, NULL, NULL },
    { "getParser", NULL, "Lgeogebra.common.kernel.parser.Parser;", 0x11, NULL, NULL },
    { "newExpressionNodeEvaluatorWithGeogebraCommonKernelKernel:", "newExpressionNodeEvaluator", "Lgeogebra.common.kernel.arithmetic.ExpressionNodeEvaluator;", 0x1, NULL, NULL },
    { "getExpressionNodeEvaluator", NULL, "Lgeogebra.common.kernel.arithmetic.ExpressionNodeEvaluator;", 0x1, NULL, NULL },
    { "DoubleComparatorWithDouble:", "DoubleComparator", "Ljava.util.Comparator;", 0x19, NULL, NULL },
    { "setShowAnimationButtonWithBoolean:", "setShowAnimationButton", "V", 0x1, NULL, NULL },
    { "isAnimationRunning", NULL, "Z", 0x11, NULL, NULL },
    { "isAnimationPaused", NULL, "Z", 0x11, NULL, NULL },
    { "needToShowAnimationButton", NULL, "Z", 0x11, NULL, NULL },
    { "udpateNeedToShowAnimationButton", NULL, "V", 0x11, NULL, NULL },
    { "handleCoordsWithGeogebraCommonKernelGeosGeoElement:withJavaUtilLinkedHashMap:", "handleCoords", "Z", 0x1, NULL, NULL },
    { "getConstructionElementWithGeogebraCommonKernelGeosGeoElement:", "getConstructionElement", "Lgeogebra.common.kernel.algos.ConstructionElement;", 0x9, NULL, NULL },
    { "getConstruction", NULL, "Lgeogebra.common.kernel.Construction;", 0x1, NULL, NULL },
    { "getConstructionElementWithInt:", "getConstructionElement", "Lgeogebra.common.kernel.algos.ConstructionElement;", 0x1, NULL, NULL },
    { "getFirstGeo", NULL, "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "setConstructionStepWithInt:", "setConstructionStep", "V", 0x1, NULL, NULL },
    { "getConstructionStep", NULL, "I", 0x1, NULL, NULL },
    { "getLastConstructionStep", NULL, "I", 0x1, NULL, NULL },
    { "firstStep", NULL, "V", 0x1, NULL, NULL },
    { "lastStep", NULL, "V", 0x1, NULL, NULL },
    { "nextStep", NULL, "V", 0x1, NULL, NULL },
    { "getNextBreakpointWithInt:", "getNextBreakpoint", "I", 0x2, NULL, NULL },
    { "previousStep", NULL, "V", 0x1, NULL, NULL },
    { "getPreviousBreakpointWithInt:", "getPreviousBreakpoint", "I", 0x2, NULL, NULL },
    { "moveInConstructionListWithInt:withInt:", "moveInConstructionList", "Z", 0x1, NULL, NULL },
    { "setVisualStylesWithGeogebraCommonKernelKernel:", "setVisualStyles", "V", 0x1, NULL, NULL },
    { "setSaveScriptsToXMLWithBoolean:", "setSaveScriptsToXML", "V", 0x1, NULL, NULL },
    { "getSaveScriptsToXML", NULL, "Z", 0x1, NULL, NULL },
    { "setElementDefaultAllowedWithBoolean:", "setElementDefaultAllowed", "V", 0x1, NULL, NULL },
    { "getElementDefaultAllowed", NULL, "Z", 0x1, NULL, NULL },
    { "isContinuous", NULL, "Z", 0x11, NULL, NULL },
    { "setContinuousWithBoolean:", "setContinuous", "V", 0x1, NULL, NULL },
    { "usePathAndRegionParametersWithGeogebraCommonKernelKernelNDGeoPointND:", "usePathAndRegionParameters", "Z", 0x11, NULL, NULL },
    { "setUsePathAndRegionParametersWithGeogebraCommonKernelPathRegionHandlingEnum:", "setUsePathAndRegionParameters", "V", 0x1, NULL, NULL },
    { "setLoadingModeWithBoolean:", "setLoadingMode", "V", 0x1, NULL, NULL },
    { "notifyOpeningFileWithNSString:", "notifyOpeningFile", "V", 0x1, NULL, NULL },
    { "notifyFileOpenCompleteWithBoolean:", "notifyFileOpenComplete", "V", 0x1, NULL, NULL },
    { "getLoadingMode", NULL, "Z", 0x1, NULL, NULL },
    { "signWithDouble:", "sign", "C", 0x1a, NULL, NULL },
    { "setNotifyConstructionProtocolViewAboutAddRemoveActiveWithBoolean:", "setNotifyConstructionProtocolViewAboutAddRemoveActive", "V", 0x1, NULL, NULL },
    { "isNotifyConstructionProtocolViewAboutAddRemoveActive", NULL, "Z", 0x1, NULL, NULL },
    { "buildImplicitEquationWithDoubleArray:withNSStringArray:withBoolean:withBoolean:withBoolean:withChar:withGeogebraCommonKernelStringTemplate:", "buildImplicitEquation", "Ljava.lang.StringBuilder;", 0x11, NULL, NULL },
    { "formatSignedCoefficientWithDouble:withJavaLangStringBuilder:withGeogebraCommonKernelStringTemplate:", "formatSignedCoefficient", "V", 0x11, NULL, NULL },
    { "formatSignedWithDouble:withJavaLangStringBuilder:withGeogebraCommonKernelStringTemplate:", "formatSigned", "V", 0x11, NULL, NULL },
    { "formatSignedCoefficientPlusMinusWithDouble:withJavaLangStringBuilder:withGeogebraCommonKernelStringTemplate:", "formatSignedCoefficientPlusMinus", "V", 0x11, NULL, NULL },
    { "formatSignedPlusMinusWithDouble:withJavaLangStringBuilder:withGeogebraCommonKernelStringTemplate:", "formatSignedPlusMinus", "V", 0x11, NULL, NULL },
    { "formatPiERawWithDouble:withGeogebraCommonUtilNumberFormatAdapter:withGeogebraCommonKernelStringTemplate:", "formatPiERaw", "Ljava.lang.String;", 0x12, NULL, NULL },
    { "formatRawWithDouble:withGeogebraCommonKernelStringTemplate:", "formatRaw", "Ljava.lang.String;", 0x11, NULL, NULL },
    { "formatNFWithDouble:withGeogebraCommonKernelStringTemplate:", "formatNF", "Ljava.lang.String;", 0x12, NULL, NULL },
    { "formatWithDouble:withGeogebraCommonKernelStringTemplate:", "format", "Ljava.lang.String;", 0x11, NULL, NULL },
    { "internationalizeDigitsWithNSString:withGeogebraCommonKernelStringTemplate:", "internationalizeDigits", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "formatPiEWithDouble:withGeogebraCommonUtilNumberFormatAdapter:withGeogebraCommonKernelStringTemplate:", "formatPiE", "Ljava.lang.String;", 0x11, NULL, NULL },
    { "copy__WithDoubleArray:withDoubleArray:", "copy", "V", 0x18, NULL, NULL },
    { "negativeWithDoubleArray:withDoubleArray:", "negative", "V", 0x18, NULL, NULL },
    { "divideWithDoubleArray:withDouble:withDoubleArray:", "divide", "V", 0x18, NULL, NULL },
    { "gcdWithLong:withLong:", "gcd", "J", 0x19, NULL, NULL },
    { "gcdWithDoubleArray:", "gcd", "D", 0x19, NULL, NULL },
    { "roundToScaleWithDouble:withDouble:", "roundToScale", "D", 0x19, NULL, NULL },
    { "isEqualWithDoubleArray:withDoubleArray:", "isEqual", "Z", 0x18, NULL, NULL },
    { "maxAbsWithDoubleArray:", "maxAbs", "D", 0x18, NULL, NULL },
    { "buildLHSWithDoubleArray:withNSStringArray:withBoolean:withBoolean:withBoolean:withGeogebraCommonKernelStringTemplate:", "buildLHS", "Ljava.lang.StringBuilder;", 0x11, NULL, NULL },
    { "oppositeSignWithChar:", "oppositeSign", "C", 0x9, NULL, NULL },
    { "buildImplicitVarPartWithJavaLangStringBuilder:withDoubleArray:withNSStringArray:withBoolean:withBoolean:withBoolean:withGeogebraCommonKernelStringTemplate:", "buildImplicitVarPart", "[D", 0x12, NULL, NULL },
    { "isZeroFigureWithDouble:withGeogebraCommonKernelStringTemplate:", "isZeroFigure", "Z", 0x2, NULL, NULL },
    { "buildExplicitConicEquationWithDoubleArray:withNSStringArray:withInt:withBoolean:withGeogebraCommonKernelStringTemplate:", "buildExplicitConicEquation", "Ljava.lang.StringBuilder;", 0x11, NULL, NULL },
    { "formatSFWithDouble:withGeogebraCommonKernelStringTemplate:", "formatSF", "Ljava.lang.String;", 0x12, NULL, NULL },
    { "appendTwoCoeffsWithBoolean:withDouble:withDouble:withNSString:withNSString:withGeogebraCommonKernelStringTemplate:withJavaLangStringBuilder:", "appendTwoCoeffs", "V", 0x11, NULL, NULL },
    { "appendTwoCoeffsWithDouble:withDouble:withGeogebraCommonKernelStringTemplate:withJavaLangStringBuilder:", "appendTwoCoeffs", "V", 0x11, NULL, NULL },
    { "formatCoeffWithDouble:withGeogebraCommonKernelStringTemplate:", "formatCoeff", "Ljava.lang.String;", 0x12, NULL, NULL },
    { "buildExplicitLineEquationWithDoubleArray:withNSStringArray:withChar:withGeogebraCommonKernelStringTemplate:", "buildExplicitLineEquation", "Ljava.lang.StringBuilder;", 0x11, NULL, NULL },
    { "chopWithDouble:", "chop", "D", 0x19, NULL, NULL },
    { "isZeroWithDouble:", "isZero", "Z", 0x19, NULL, NULL },
    { "isZeroWithDouble:withDouble:", "isZero", "Z", 0x19, NULL, NULL },
    { "isZeroWithDoubleArray:", "isZero", "Z", 0x18, NULL, NULL },
    { "isIntegerWithDouble:", "isInteger", "Z", 0x19, NULL, NULL },
    { "isEqualWithDouble:withDouble:", "isEqual", "Z", 0x19, NULL, NULL },
    { "isEqualWithDouble:withDouble:withDouble:", "isEqual", "Z", 0x19, NULL, NULL },
    { "isGreaterWithDouble:withDouble:", "isGreater", "Z", 0x19, NULL, NULL },
    { "compareWithDouble:withDouble:", "compare", "I", 0x19, NULL, NULL },
    { "isGreaterWithDouble:withDouble:withDouble:", "isGreater", "Z", 0x19, NULL, NULL },
    { "isGreaterEqualWithDouble:withDouble:", "isGreaterEqual", "Z", 0x19, NULL, NULL },
    { "convertToAngleValueWithDouble:", "convertToAngleValue", "D", 0x19, NULL, NULL },
    { "checkDecimalFractionWithDouble:withDouble:", "checkDecimalFraction", "D", 0x19, NULL, NULL },
    { "checkDecimalFractionWithDouble:", "checkDecimalFraction", "D", 0x19, NULL, NULL },
    { "checkIntegerWithDouble:", "checkInteger", "D", 0x19, NULL, NULL },
    { "formatAngleWithDouble:withGeogebraCommonKernelStringTemplate:withBoolean:", "formatAngle", "Ljava.lang.StringBuilder;", 0x11, NULL, NULL },
    { "formatAngleWithDouble:withDouble:withGeogebraCommonKernelStringTemplate:withBoolean:", "formatAngle", "Ljava.lang.StringBuilder;", 0x11, NULL, NULL },
    { "resetLibraryJavaScript", NULL, "V", 0x1, NULL, NULL },
    { "setLibraryJavaScriptWithNSString:", "setLibraryJavaScript", "V", 0x1, NULL, NULL },
    { "getLibraryJavaScript", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "getPointSet", NULL, "Ljava.util.TreeSet;", 0x1, NULL, NULL },
    { "isSaving", NULL, "Z", 0x21, NULL, NULL },
    { "setSavingWithBoolean:", "setSaving", "V", 0x21, NULL, NULL },
    { "setInverseTrigReturnsAngleWithBoolean:", "setInverseTrigReturnsAngle", "V", 0x1, NULL, NULL },
    { "getInverseTrigReturnsAngle", NULL, "Z", 0x1, NULL, NULL },
    { "setAngleUnitWithInt:", "setAngleUnit", "V", 0x11, NULL, NULL },
    { "getAngleUnit", NULL, "I", 0x11, NULL, NULL },
    { "isZvarAllowed", NULL, "Z", 0x1, NULL, NULL },
    { "removeCASVariablePrefixWithNSString:", "removeCASVariablePrefix", "Ljava.lang.String;", 0x19, NULL, NULL },
    { "removeCASVariablePrefixWithNSString:withNSString:", "removeCASVariablePrefix", "Ljava.lang.String;", 0x19, NULL, NULL },
    { "setPrintFiguresWithInt:", "setPrintFigures", "V", 0x11, NULL, NULL },
    { "setPrintDecimalsWithInt:", "setPrintDecimals", "V", 0x11, NULL, NULL },
    { "getPrintDecimals", NULL, "I", 0x11, NULL, NULL },
    { "getPrintFigures", NULL, "I", 0x11, NULL, NULL },
    { "isUsingInternalCommandNames", NULL, "Z", 0x1, NULL, NULL },
    { "setUseInternalCommandNamesWithBoolean:", "setUseInternalCommandNames", "V", 0x1, NULL, NULL },
    { "isAllowVisibilitySideEffects", NULL, "Z", 0x11, NULL, NULL },
    { "setAllowVisibilitySideEffectsWithBoolean:", "setAllowVisibilitySideEffects", "V", 0x11, NULL, NULL },
    { "isMacroKernel", NULL, "Z", 0x1, NULL, NULL },
    { "isSilentMode", NULL, "Z", 0x11, NULL, NULL },
    { "isGeoGebraCASready", NULL, "Z", 0x21, NULL, NULL },
    { "setSilentModeWithBoolean:", "setSilentMode", "V", 0x11, NULL, NULL },
    { "setResolveUnkownVarsAsDummyGeosWithBoolean:", "setResolveUnkownVarsAsDummyGeos", "V", 0x11, NULL, NULL },
    { "isResolveUnkownVarsAsDummyGeos", NULL, "Z", 0x11, NULL, NULL },
    { "evaluateGeoGebraCASWithNSString:withGeogebraCommonKernelArithmeticMyArbitraryConstant:", "evaluateGeoGebraCAS", "Ljava.lang.String;", 0x1, "Ljava.lang.Throwable;", NULL },
    { "evaluateGeoGebraCASWithNSString:withGeogebraCommonKernelArithmeticMyArbitraryConstant:withGeogebraCommonKernelStringTemplate:", "evaluateGeoGebraCAS", "Ljava.lang.String;", 0x11, "Ljava.lang.Throwable;", NULL },
    { "evaluateCachedGeoGebraCASWithNSString:withGeogebraCommonKernelArithmeticMyArbitraryConstant:", "evaluateCachedGeoGebraCAS", "Ljava.lang.String;", 0x11, "Ljava.lang.Throwable;", NULL },
    { "evaluateGeoGebraCASWithNSString:withBoolean:withGeogebraCommonKernelArithmeticMyArbitraryConstant:withGeogebraCommonKernelStringTemplate:", "evaluateGeoGebraCAS", "Ljava.lang.String;", 0x2, "Ljava.lang.Throwable;", NULL },
    { "evaluateRawGeoGebraCASWithNSString:", "evaluateRawGeoGebraCAS", "Ljava.lang.String;", 0x1, "Ljava.lang.Throwable;", NULL },
    { "evaluateGeoGebraCASAsyncWithGeogebraCommonKernelAsynchronousCommand:", "evaluateGeoGebraCASAsync", "V", 0x1, NULL, NULL },
    { "putToCasCacheWithNSString:withNSString:", "putToCasCache", "V", 0x1, NULL, NULL },
    { "setAlgebraStyleWithInt:", "setAlgebraStyle", "V", 0x11, NULL, NULL },
    { "getAlgebraStyle", NULL, "I", 0x11, NULL, NULL },
    { "getCasCache", NULL, "Lgeogebra.common.util.MaxSizeHashMap;", 0x1, NULL, NULL },
    { "hasCasCache", NULL, "Z", 0x1, NULL, NULL },
    { "setEuclidianViewBoundsWithInt:withDouble:withDouble:withDouble:withDouble:withDouble:withDouble:", "setEuclidianViewBounds", "V", 0x11, NULL, NULL },
    { "prolongWithDoubleArray:withInt:", "prolong", "[D", 0x4, NULL, NULL },
    { "getViewsXMinWithGeogebraCommonKernelGeosGeoElement:", "getViewsXMin", "D", 0x1, NULL, NULL },
    { "getViewsXMaxWithGeogebraCommonKernelGeosGeoElement:", "getViewsXMax", "D", 0x1, NULL, NULL },
    { "getViewsYMinWithGeogebraCommonKernelGeosGeoElement:", "getViewsYMin", "D", 0x1, NULL, NULL },
    { "getViewsYMaxWithGeogebraCommonKernelGeosGeoElement:", "getViewsYMax", "D", 0x1, NULL, NULL },
    { "getViewsXScaleWithGeogebraCommonKernelGeosGeoElement:", "getViewsXScale", "D", 0x1, NULL, NULL },
    { "getViewsYScaleWithGeogebraCommonKernelGeosGeoElement:", "getViewsYScale", "D", 0x1, NULL, NULL },
    { "notifyEuclidianViewCE", NULL, "V", 0x1, NULL, NULL },
    { "clearConstructionWithBoolean:", "clearConstruction", "V", 0x1, NULL, NULL },
    { "getXmax", NULL, "D", 0x1, NULL, NULL },
    { "getXmin", NULL, "D", 0x1, NULL, NULL },
    { "getXscale", NULL, "D", 0x1, NULL, NULL },
    { "getYmax", NULL, "D", 0x1, NULL, NULL },
    { "getYmin", NULL, "D", 0x1, NULL, NULL },
    { "getYscale", NULL, "D", 0x1, NULL, NULL },
    { "getXmaxWithBoolean:withBoolean:", "getXmax", "D", 0x1, NULL, NULL },
    { "getXmaxWithInt:", "getXmax", "D", 0x11, NULL, NULL },
    { "getXminWithInt:", "getXmin", "D", 0x11, NULL, NULL },
    { "getYmaxWithInt:", "getYmax", "D", 0x11, NULL, NULL },
    { "getYminWithInt:", "getYmin", "D", 0x11, NULL, NULL },
    { "getYscaleWithInt:", "getYscale", "D", 0x11, NULL, NULL },
    { "getXscaleWithInt:", "getXscale", "D", 0x11, NULL, NULL },
    { "getZmaxWithInt:", "getZmax", "D", 0x1, NULL, NULL },
    { "getZminWithInt:", "getZmin", "D", 0x1, NULL, NULL },
    { "getZscaleWithInt:", "getZscale", "D", 0x1, NULL, NULL },
    { "getXminWithBoolean:withBoolean:", "getXmin", "D", 0x1, NULL, NULL },
    { "getXscaleWithBoolean:withBoolean:", "getXscale", "D", 0x1, NULL, NULL },
    { "getYmaxWithBoolean:withBoolean:", "getYmax", "D", 0x1, NULL, NULL },
    { "getYminWithBoolean:withBoolean:", "getYmin", "D", 0x1, NULL, NULL },
    { "getYscaleWithBoolean:withBoolean:", "getYscale", "D", 0x1, NULL, NULL },
    { "getGeoGebraCAS", NULL, "Lgeogebra.common.kernel.GeoGebraCasInterface;", 0x21, NULL, NULL },
    { "getCoordStyle", NULL, "I", 0x11, NULL, NULL },
    { "setCoordStyleWithInt:", "setCoordStyle", "V", 0x1, NULL, NULL },
    { "lookupLabelWithNSString:", "lookupLabel", "Lgeogebra.common.kernel.geos.GeoElement;", 0x11, NULL, NULL },
    { "lookupCasCellLabelWithNSString:", "lookupCasCellLabel", "Lgeogebra.common.kernel.geos.GeoCasCell;", 0x11, NULL, NULL },
    { "lookupCasRowReferenceWithNSString:", "lookupCasRowReference", "Lgeogebra.common.kernel.geos.GeoCasCell;", 0x11, "Lgeogebra.common.kernel.CASException;", NULL },
    { "lookupLabelWithNSString:withBoolean:", "lookupLabel", "Lgeogebra.common.kernel.geos.GeoElement;", 0x11, NULL, NULL },
    { "getClassTypeWithNSString:", "getClassType", "Lgeogebra.common.plugin.GeoClass;", 0x1, "Lgeogebra.common.main.MyError;", NULL },
    { "getModeTextWithInt:", "getModeText", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "getPolynomialCoeffsWithNSString:withNSString:", "getPolynomialCoeffs", "[Ljava.lang.String;", 0x11, NULL, NULL },
    { "getGeoAtWithInt:withInt:", "getGeoAt", "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "getAnimatonManager", NULL, "Lgeogebra.common.kernel.AnimationManager;", 0x11, NULL, NULL },
    { "getViewBoundsForGeoWithGeogebraCommonKernelGeosGeoElement:", "getViewBoundsForGeo", "[D", 0x1, NULL, NULL },
    { "addViewsWithJavaLangInteger:withDoubleArray:", "addViews", "V", 0x2, NULL, NULL },
    { "getXAxis", NULL, "Lgeogebra.common.kernel.geos.GeoAxis;", 0x11, NULL, NULL },
    { "getYAxis", NULL, "Lgeogebra.common.kernel.geos.GeoAxis;", 0x11, NULL, NULL },
    { "isAxisWithGeogebraCommonKernelGeosGeoElement:", "isAxis", "Z", 0x11, NULL, NULL },
    { "updateLocalAxesNames", NULL, "V", 0x1, NULL, NULL },
    { "setNotifyRepaintActiveWithBoolean:", "setNotifyRepaintActive", "V", 0x1, NULL, NULL },
    { "isNotifyRepaintActive", NULL, "Z", 0x11, NULL, NULL },
    { "notifyRepaint", NULL, "V", 0x11, NULL, NULL },
    { "notifyControllersMoveIfWaiting", NULL, "V", 0x11, NULL, NULL },
    { "notifySuggestRepaint", NULL, "Z", 0x11, NULL, NULL },
    { "notifyReset", NULL, "V", 0x11, NULL, NULL },
    { "notifyClearView", NULL, "V", 0x14, NULL, NULL },
    { "clearJustCreatedGeosInViews", NULL, "V", 0x1, NULL, NULL },
    { "setNotifyViewsActiveWithBoolean:", "setNotifyViewsActive", "V", 0x1, NULL, NULL },
    { "attachWithGeogebraCommonKernelView:", "attach", "V", 0x1, NULL, NULL },
    { "printAttachedViews", NULL, "V", 0x2, NULL, NULL },
    { "detachWithGeogebraCommonKernelView:", "detach", "V", 0x1, NULL, NULL },
    { "notifyModeChangedWithInt:withGeogebraCommonKernelModeSetterEnum:", "notifyModeChanged", "V", 0x11, NULL, NULL },
    { "notifyAddAllWithGeogebraCommonKernelView:", "notifyAddAll", "V", 0x11, NULL, NULL },
    { "registerRenameListenerAlgoWithGeogebraCommonKernelAlgosAlgoElement:", "registerRenameListenerAlgo", "V", 0x1, NULL, NULL },
    { "unregisterRenameListenerAlgoWithGeogebraCommonKernelAlgosAlgoElement:", "unregisterRenameListenerAlgo", "V", 0x0, NULL, NULL },
    { "notifyRenameListenerAlgos", NULL, "V", 0x2, NULL, NULL },
    { "isSpreadsheetBatchRunning", NULL, "Z", 0x1, NULL, NULL },
    { "setSpreadsheetBatchRunningWithBoolean:", "setSpreadsheetBatchRunning", "V", 0x1, NULL, NULL },
    { "renameLabelInScriptsWithNSString:withNSString:", "renameLabelInScripts", "Z", 0x11, NULL, NULL },
    { "notifyAddAllWithGeogebraCommonKernelView:withInt:", "notifyAddAll", "V", 0x11, NULL, NULL },
    { "notifyAddWithGeogebraCommonKernelGeosGeoElement:", "notifyAdd", "V", 0x11, NULL, NULL },
    { "addingPolygon", NULL, "V", 0x11, NULL, NULL },
    { "notifyPolygonAdded", NULL, "V", 0x11, NULL, NULL },
    { "notifyRemoveGroup", NULL, "V", 0x11, NULL, NULL },
    { "notifyRemoveWithGeogebraCommonKernelGeosGeoElement:", "notifyRemove", "V", 0x11, NULL, NULL },
    { "movingGeoSet", NULL, "V", 0x11, NULL, NULL },
    { "movedGeoSetWithJavaUtilArrayList:", "movedGeoSet", "V", 0x11, NULL, NULL },
    { "notifyUpdateWithGeogebraCommonKernelGeosGeoElement:", "notifyUpdate", "V", 0x11, NULL, NULL },
    { "notifyUpdateLocationWithGeogebraCommonKernelGeosGeoElement:", "notifyUpdateLocation", "V", 0x11, NULL, NULL },
    { "notifyUpdateVisualStyleWithGeogebraCommonKernelGeosGeoElement:", "notifyUpdateVisualStyle", "V", 0x11, NULL, NULL },
    { "notifyUpdateAuxiliaryObjectWithGeogebraCommonKernelGeosGeoElement:", "notifyUpdateAuxiliaryObject", "V", 0x11, NULL, NULL },
    { "notifyRenameWithGeogebraCommonKernelGeosGeoElement:", "notifyRename", "V", 0x11, NULL, NULL },
    { "notifyRenameUpdatesComplete", NULL, "V", 0x11, NULL, NULL },
    { "notifyPerspectiveChangedWithNSString:", "notifyPerspectiveChanged", "V", 0x1, NULL, NULL },
    { "notifyPaste", NULL, "V", 0x1, NULL, NULL },
    { "notifyPasteComplete", NULL, "V", 0x1, NULL, NULL },
    { "isNotifyViewsActive", NULL, "Z", 0x1, NULL, NULL },
    { "isViewReiniting", NULL, "Z", 0x1, NULL, NULL },
    { "addUserAwarenessListenerWithGeogebraCommonKernelUserAwarenessListener:", "addUserAwarenessListener", "V", 0x1, NULL, NULL },
    { "removeUserAwarenessListenerWithGeogebraCommonKernelUserAwarenessListener:", "removeUserAwarenessListener", "V", 0x1, NULL, NULL },
    { "updateConstruction", NULL, "V", 0x1, NULL, NULL },
    { "updateConstructionLanguage", NULL, "V", 0x1, NULL, NULL },
    { "updateConstructionWithInt:", "updateConstruction", "V", 0x1, NULL, NULL },
    { "isEmpty", NULL, "Z", 0x1, NULL, NULL },
    { "isGettingUndo", NULL, "Z", 0x21, NULL, NULL },
    { "setIsGettingUndoWithBoolean:", "setIsGettingUndo", "V", 0x21, NULL, NULL },
    { "setUndoActiveWithBoolean:", "setUndoActive", "V", 0x1, NULL, NULL },
    { "isUndoActive", NULL, "Z", 0x1, NULL, NULL },
    { "storeUndoInfo", NULL, "V", 0x1, NULL, NULL },
    { "restoreCurrentUndoInfo", NULL, "V", 0x1, NULL, NULL },
    { "initUndoInfo", NULL, "V", 0x1, NULL, NULL },
    { "storeSelectedGeosNames", NULL, "V", 0x1, NULL, NULL },
    { "recallSelectedGeosNames", NULL, "V", 0x1, NULL, NULL },
    { "redo", NULL, "V", 0x1, NULL, NULL },
    { "undo", NULL, "V", 0x1, NULL, NULL },
    { "undoPossible", NULL, "Z", 0x1, NULL, NULL },
    { "redoPossible", NULL, "Z", 0x1, NULL, NULL },
    { "isInsertLineBreaks", NULL, "Z", 0x1, NULL, NULL },
    { "getXMLFileFormat", NULL, "Ljava.lang.String;", 0x1, NULL, NULL },
    { "setInsertLineBreaksWithBoolean:", "setInsertLineBreaks", "V", 0x1, NULL, NULL },
    { "handleTrigPowerWithNSString:withGeogebraCommonKernelArithmeticExpressionNode:withNSString:", "handleTrigPower", "Lgeogebra.common.kernel.arithmetic.ExpressionNode;", 0x11, NULL, NULL },
    { "convertIndexToNumberWithNSString:", "convertIndexToNumber", "Lgeogebra.common.kernel.arithmetic.MyDouble;", 0x11, NULL, NULL },
    { "getImaginaryUnit", NULL, "Lgeogebra.common.kernel.geos.GeoVec2D;", 0x1, NULL, NULL },
    { "useMacroWithNSStringArray:withGeogebraCommonKernelMacro:withGeogebraCommonKernelGeosGeoElementArray:", "useMacro", "[Lgeogebra.common.kernel.geos.GeoElement;", 0x11, NULL, NULL },
    { "getLocalization", NULL, "Lgeogebra.common.main.Localization;", 0x1, NULL, NULL },
    { "kernelHas3DObjects", NULL, "Z", 0x2, NULL, NULL },
    { "getKernelXMLWithJavaLangStringBuilder:withBoolean:", "getKernelXML", "V", 0x1, NULL, NULL },
    { "addMacroWithGeogebraCommonKernelMacro:", "addMacro", "V", 0x1, NULL, NULL },
    { "removeMacroWithGeogebraCommonKernelMacro:", "removeMacro", "V", 0x1, NULL, NULL },
    { "removeAllMacros", NULL, "V", 0x1, NULL, NULL },
    { "setMacroCommandNameWithGeogebraCommonKernelMacro:withNSString:", "setMacroCommandName", "Z", 0x1, NULL, NULL },
    { "getMacroWithNSString:", "getMacro", "Lgeogebra.common.kernel.Macro;", 0x1, NULL, NULL },
    { "getMacroXMLWithJavaUtilArrayList:", "getMacroXML", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "hasMacros", NULL, "Z", 0x1, NULL, NULL },
    { "getMacroNumber", NULL, "I", 0x1, NULL, NULL },
    { "getAllMacros", NULL, "Ljava.util.ArrayList;", 0x1, NULL, NULL },
    { "getMacroWithInt:", "getMacro", "Lgeogebra.common.kernel.Macro;", 0x1, NULL, NULL },
    { "getMacroIDWithGeogebraCommonKernelMacro:", "getMacroID", "I", 0x1, NULL, NULL },
    { "createGeoElementWithGeogebraCommonKernelConstruction:withNSString:", "createGeoElement", "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, "Lgeogebra.common.main.MyError;", NULL },
    { "setWantAnimationStarted", NULL, "V", 0x1, NULL, NULL },
    { "wantAnimationStarted", NULL, "Z", 0x1, NULL, NULL },
    { "convertNumberValueToExpressionNodeWithGeogebraCommonKernelGeosGeoElement:", "convertNumberValueToExpressionNode", "Lgeogebra.common.kernel.arithmetic.ExpressionNode;", 0x1, NULL, NULL },
    { "VectorPolygonWithNSStringArray:withGeogebraCommonKernelKernelNDGeoPointNDArray:", "VectorPolygon", "[Lgeogebra.common.kernel.geos.GeoElement;", 0x11, NULL, NULL },
    { "RigidPolygonWithGeogebraCommonKernelGeosGeoPolygon:withDouble:withDouble:", "RigidPolygon", "[Lgeogebra.common.kernel.geos.GeoElement;", 0x11, NULL, NULL },
    { "RigidPolygonPointOnCircleWithGeogebraCommonKernelKernelNDGeoConicND:withGeogebraCommonKernelKernelNDGeoPointND:", "RigidPolygonPointOnCircle", "Lgeogebra.common.kernel.kernelND.GeoPointND;", 0x4, NULL, NULL },
    { "RigidPolygonWithNSStringArray:withGeogebraCommonKernelKernelNDGeoPointNDArray:", "RigidPolygon", "[Lgeogebra.common.kernel.geos.GeoElement;", 0x11, NULL, NULL },
    { "RigidPolygonAddEndOfCommandWithJavaLangStringBuilder:withBoolean:", "RigidPolygonAddEndOfCommand", "V", 0x4, NULL, NULL },
    { "TangentWithNSString:withGeogebraCommonKernelKernelNDGeoPointND:withGeogebraCommonKernelGeosGeoCurveCartesian:", "Tangent", "Lgeogebra.common.kernel.geos.GeoLine;", 0x11, NULL, NULL },
    { "getGeoElementSpreadsheet", NULL, "Lgeogebra.common.kernel.geos.GeoElementSpreadsheet;", 0x1, NULL, NULL },
    { "newMacroKernel", NULL, "Lgeogebra.common.kernel.MacroKernel;", 0x1, NULL, NULL },
    { "notifyChangeLayerWithGeogebraCommonKernelGeosGeoElement:withInt:withInt:", "notifyChangeLayer", "V", 0x1, NULL, NULL },
    { "getXmaxForFunctions", NULL, "D", 0x1, NULL, NULL },
    { "getXminForFunctions", NULL, "D", 0x1, NULL, NULL },
    { "clearCasCache", NULL, "V", 0x1, NULL, NULL },
    { "refreshCASCommands", NULL, "V", 0x1, NULL, NULL },
    { "PolygonNDWithNSStringArray:withGeogebraCommonKernelKernelNDGeoPointNDArray:", "PolygonND", "[Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "PolyLineNDWithNSStringArray:withGeogebraCommonKernelKernelNDGeoPointNDArray:", "PolyLineND", "[Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "RayNDWithNSString:withGeogebraCommonKernelKernelNDGeoPointND:withGeogebraCommonKernelKernelNDGeoPointND:", "RayND", "Lgeogebra.common.kernel.kernelND.GeoRayND;", 0x1, NULL, NULL },
    { "OrthogonalLineWithNSString:withGeogebraCommonKernelKernelNDGeoPointND:withGeogebraCommonKernelKernelNDGeoLineND:withGeogebraCommonKernelKernelNDGeoDirectionND:", "OrthogonalLine", "Lgeogebra.common.kernel.kernelND.GeoLineND;", 0x1, NULL, NULL },
    { "SegmentNDWithNSString:withGeogebraCommonKernelKernelNDGeoPointND:withGeogebraCommonKernelKernelNDGeoPointND:", "SegmentND", "Lgeogebra.common.kernel.kernelND.GeoSegmentND;", 0x1, NULL, NULL },
    { "getAlgoDispatcher", NULL, "Lgeogebra.common.kernel.algos.AlgoDispatcher;", 0x1, NULL, NULL },
    { "newAlgoDispatcherWithGeogebraCommonKernelConstruction:", "newAlgoDispatcher", "Lgeogebra.common.kernel.algos.AlgoDispatcher;", 0x4, NULL, NULL },
    { "RayWithNSString:withGeogebraCommonKernelGeosGeoPoint:withGeogebraCommonKernelGeosGeoPoint:", "Ray", "Lgeogebra.common.kernel.kernelND.GeoRayND;", 0x1, NULL, NULL },
    { "SegmentWithNSString:withGeogebraCommonKernelGeosGeoPoint:withGeogebraCommonKernelGeosGeoPoint:", "Segment", "Lgeogebra.common.kernel.kernelND.GeoSegmentND;", 0x1, NULL, NULL },
    { "PolygonWithNSStringArray:withGeogebraCommonKernelKernelNDGeoPointNDArray:", "Polygon", "[Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "PolyLineWithNSStringArray:withGeogebraCommonKernelKernelNDGeoPointNDArray:withBoolean:", "PolyLine", "[Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "initAfterAsyncWithGeogebraCommonMainApp:", "initAfterAsync", "V", 0x1, NULL, NULL },
    { "hasAlgebraProcessor", NULL, "Z", 0x1, NULL, NULL },
    { "setAlgebraProcessorWithGeogebraCommonKernelCommandsAlgebraProcessor:", "setAlgebraProcessor", "V", 0x1, NULL, NULL },
    { "getAlgPForAsync", NULL, "Lgeogebra.common.kernel.commands.AlgebraProcessor;", 0x1, NULL, NULL },
    { "getXOYPlane", NULL, "Lgeogebra.common.kernel.kernelND.GeoCoordSys2D;", 0x1, NULL, NULL },
    { "getSpace", NULL, "Lgeogebra.common.kernel.kernelND.GeoDirectionND;", 0x1, NULL, NULL },
    { "setUpdateAgainWithBoolean:withGeogebraCommonKernelGeosGeoElement:", "setUpdateAgain", "V", 0x1, NULL, NULL },
    { "getUpdateAgain", NULL, "Z", 0x1, NULL, NULL },
    { "setForceUpdatingBoundingBoxWithBoolean:", "setForceUpdatingBoundingBox", "V", 0x1, NULL, NULL },
    { "getForceUpdatingBoundingBox", NULL, "Z", 0x1, NULL, NULL },
    { "useCASforDerivatives", NULL, "Z", 0x1, NULL, NULL },
    { "useCASforIntegrals", NULL, "Z", 0x1, NULL, NULL },
    { "notifyBatchUpdate", NULL, "V", 0x1, NULL, NULL },
    { "notifyEndBatchUpdate", NULL, "V", 0x1, NULL, NULL },
    { "setViewsLabels", NULL, "V", 0x1, NULL, NULL },
    { "setViewsOrientation", NULL, "V", 0x1, NULL, NULL },
    { "noNeedToSpecifyXOYPlane", NULL, "Z", 0x11, NULL, NULL },
    { "copy3DWithGeogebraCommonKernelGeosGeoElement:", "copy3D", "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "copyInternal3DWithGeogebraCommonKernelConstruction:withGeogebraCommonKernelGeosGeoElement:", "copyInternal3D", "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "setStringModeWithGeogebraCommonKernelKernelNDGeoPointND:", "setStringMode", "V", 0x1, NULL, NULL },
    { "isParsingFor3D", NULL, "Z", 0x1, NULL, NULL },
    { "wrapInVectorWithGeogebraCommonKernelKernelNDGeoPointND:", "wrapInVector", "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "getXAxis3D", NULL, "Lgeogebra.common.kernel.kernelND.GeoAxisND;", 0x1, NULL, NULL },
    { "getYAxis3D", NULL, "Lgeogebra.common.kernel.kernelND.GeoAxisND;", 0x1, NULL, NULL },
    { "getZAxis3D", NULL, "Lgeogebra.common.kernel.kernelND.GeoAxisND;", 0x1, NULL, NULL },
    { "getClippingCube", NULL, "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "MAX_SPREADSHEET_COLUMNS_DESKTOP_", NULL, 0x9, "I", &GeogebraCommonKernelKernel_MAX_SPREADSHEET_COLUMNS_DESKTOP_, NULL,  },
    { "MAX_SPREADSHEET_ROWS_DESKTOP_", NULL, 0x9, "I", &GeogebraCommonKernelKernel_MAX_SPREADSHEET_ROWS_DESKTOP_, NULL,  },
    { "MAX_SPREADSHEET_COLUMNS_VISIBLE_", NULL, 0x9, "I", &GeogebraCommonKernelKernel_MAX_SPREADSHEET_COLUMNS_VISIBLE_, NULL,  },
    { "MAX_SPREADSHEET_ROWS_VISIBLE_", NULL, 0x9, "I", &GeogebraCommonKernelKernel_MAX_SPREADSHEET_ROWS_VISIBLE_, NULL,  },
    { "STRING_PLUS_MINUS_", NULL, 0x9, "Ljava.lang.String;", &GeogebraCommonKernelKernel_STRING_PLUS_MINUS_, NULL,  },
    { "STRING_MINUS_PLUS_", NULL, 0x9, "Ljava.lang.String;", &GeogebraCommonKernelKernel_STRING_MINUS_PLUS_, NULL,  },
    { "ALGEBRA_STYLE_VALUE_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_ALGEBRA_STYLE_VALUE },
    { "ALGEBRA_STYLE_DEFINITION_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_ALGEBRA_STYLE_DEFINITION },
    { "ALGEBRA_STYLE_COMMAND_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_ALGEBRA_STYLE_COMMAND },
    { "algebraStyle_", NULL, 0x2, "I", NULL, NULL,  },
    { "macroManager_", NULL, 0x2, "Lgeogebra.common.kernel.MacroManager;", NULL, NULL,  },
    { "insertLineBreaks_", NULL, 0x4, "Z", NULL, NULL,  },
    { "angleUnit_", NULL, 0x2, "I", NULL, NULL,  },
    { "viewReiniting_", NULL, 0x2, "Z", NULL, NULL,  },
    { "undoActive_", NULL, 0x2, "Z", NULL, NULL,  },
    { "views_", NULL, 0x4, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lgeogebra/common/kernel/View;>;",  },
    { "addingPolygon__", "addingPolygon", 0x4, "Z", NULL, NULL,  },
    { "newPolygon_", NULL, 0x4, "Lgeogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "deleteList_", NULL, 0x4, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lgeogebra/common/kernel/geos/GeoElement;>;",  },
    { "userAwarenessListeners_", NULL, 0x4, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lgeogebra/common/kernel/UserAwarenessListener;>;",  },
    { "cons_", NULL, 0x4, "Lgeogebra.common.kernel.Construction;", NULL, NULL,  },
    { "algProcessor_", NULL, 0x4, "Lgeogebra.common.kernel.commands.AlgebraProcessor;", NULL, NULL,  },
    { "expressionNodeEvaluator_", NULL, 0x4, "Lgeogebra.common.kernel.arithmetic.ExpressionNodeEvaluator;", NULL, NULL,  },
    { "TMP_VARIABLE_PREFIX_", NULL, 0x19, "Ljava.lang.String;", &GeogebraCommonKernelKernel_TMP_VARIABLE_PREFIX_, NULL,  },
    { "continuous_", NULL, 0x2, "Z", NULL, NULL,  },
    { "usePathAndRegionParameters__", "usePathAndRegionParameters", 0x1, "Lgeogebra.common.kernel.PathRegionHandling;", NULL, NULL,  },
    { "ggbCAS_", NULL, 0x2, "Lgeogebra.common.kernel.GeoGebraCasInterface;", NULL, NULL,  },
    { "ANGLE_RADIANT_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_ANGLE_RADIANT },
    { "ANGLE_DEGREE_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_ANGLE_DEGREE },
    { "COORD_CARTESIAN_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_COORD_CARTESIAN },
    { "COORD_POLAR_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_COORD_POLAR },
    { "COORD_COMPLEX_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_COORD_COMPLEX },
    { "COORD_CARTESIAN_3D_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_COORD_CARTESIAN_3D },
    { "COORD_SPHERICAL_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_COORD_SPHERICAL },
    { "PI_2_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_PI_2 },
    { "PI_HALF_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_PI_HALF },
    { "SQRT_2_HALF_", NULL, 0x19, "D", &GeogebraCommonKernelKernel_SQRT_2_HALF_, NULL,  },
    { "PI_180_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_PI_180 },
    { "CONST_180_PI_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_CONST_180_PI },
    { "MAX_DOUBLE_PRECISION_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_MAX_DOUBLE_PRECISION },
    { "INV_MAX_DOUBLE_PRECISION_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_INV_MAX_DOUBLE_PRECISION },
    { "GEOGEBRA_CAS_CACHE_SIZE_", NULL, 0x9, "I", &GeogebraCommonKernelKernel_GEOGEBRA_CAS_CACHE_SIZE_, NULL,  },
    { "STANDARD_PRINT_DECIMALS_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_STANDARD_PRINT_DECIMALS },
    { "nf_", NULL, 0x2, "Lgeogebra.common.util.NumberFormatAdapter;", NULL, NULL,  },
    { "sf_", NULL, 0x12, "Lgeogebra.common.util.ScientificFormatAdapter;", NULL, NULL,  },
    { "useSignificantFigures_", NULL, 0x1, "Z", NULL, NULL,  },
    { "COORD_STYLE_DEFAULT_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_COORD_STYLE_DEFAULT },
    { "COORD_STYLE_AUSTRIAN_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_COORD_STYLE_AUSTRIAN },
    { "COORD_STYLE_FRENCH_", NULL, 0x19, "I", NULL, NULL, .constantValue.asInt = GeogebraCommonKernelKernel_COORD_STYLE_FRENCH },
    { "coordStyle_", NULL, 0x2, "I", NULL, NULL,  },
    { "STANDARD_PRECISION_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_STANDARD_PRECISION },
    { "STANDARD_PRECISION_SQRT_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_STANDARD_PRECISION_SQRT },
    { "STANDARD_PRECISION_SQUARE_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_STANDARD_PRECISION_SQUARE },
    { "MIN_PRECISION_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_MIN_PRECISION },
    { "INV_MIN_PRECISION_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_INV_MIN_PRECISION },
    { "MAX_PRECISION_", NULL, 0x19, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_MAX_PRECISION },
    { "AXES_PRECISION_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelKernel_AXES_PRECISION },
    { "useInternalCommandNames_", NULL, 0x2, "Z", NULL, NULL,  },
    { "notifyConstructionProtocolViewAboutAddRemoveActive_", NULL, 0x2, "Z", NULL, NULL,  },
    { "allowVisibilitySideEffects_", NULL, 0x2, "Z", NULL, NULL,  },
    { "saveScriptsToXML_", NULL, 0x2, "Z", NULL, NULL,  },
    { "elementDefaultAllowed_", NULL, 0x2, "Z", NULL, NULL,  },
    { "silentMode_", NULL, 0x2, "Z", NULL, NULL,  },
    { "wantAnimationStarted__", "wantAnimationStarted", 0x2, "Z", NULL, NULL,  },
    { "resolveUnkownVarsAsDummyGeos_", NULL, 0x2, "Z", NULL, NULL,  },
    { "updateEVAgain_", NULL, 0x2, "Z", NULL, NULL,  },
    { "forceUpdatingBoundingBox_", NULL, 0x2, "Z", NULL, NULL,  },
    { "sbBuildExplicitLineEquation_", NULL, 0x12, "Ljava.lang.StringBuilder;", NULL, NULL,  },
    { "app_", NULL, 0x4, "Lgeogebra.common.main.App;", NULL, NULL,  },
    { "eqnSolver_", NULL, 0x2, "Lgeogebra.common.kernel.EquationSolver;", NULL, NULL,  },
    { "sysEqSolv_", NULL, 0x2, "Lgeogebra.common.kernel.SystemOfEquationsSolver;", NULL, NULL,  },
    { "extrFinder_", NULL, 0x2, "Lgeogebra.common.kernel.optimization.ExtremumFinder;", NULL, NULL,  },
    { "parser_", NULL, 0x4, "Lgeogebra.common.kernel.parser.Parser;", NULL, NULL,  },
    { "manager3D_", NULL, 0x2, "Lgeogebra.common.kernel.Manager3DInterface;", NULL, NULL,  },
    { "concurrentModificationLock_", NULL, 0x2, "Ljava.lang.Object;", NULL, NULL,  },
    { "animationManager_", NULL, 0x4, "Lgeogebra.common.kernel.AnimationManager;", NULL, NULL,  },
    { "showAnimationButton_", NULL, 0x2, "Z", NULL, NULL,  },
    { "loadingMode_", NULL, 0x2, "Z", NULL, NULL,  },
    { "sbFormat_", NULL, 0x2, "Ljava.lang.StringBuilder;", NULL, NULL,  },
    { "formatSB_", NULL, 0x2, "Ljava.lang.StringBuilder;", NULL, NULL,  },
    { "sbBuildImplicitEquation_", NULL, 0x12, "Ljava.lang.StringBuilder;", NULL, NULL,  },
    { "sbBuildLHS_", NULL, 0x12, "Ljava.lang.StringBuilder;", NULL, NULL,  },
    { "sbBuildExplicitConicEquation_", NULL, 0x12, "Ljava.lang.StringBuilder;", NULL, NULL,  },
    { "sbFormatSF_", NULL, 0x2, "Ljava.lang.StringBuilder;", NULL, NULL,  },
    { "defaultLibraryJavaScript_", NULL, 0x19, "Ljava.lang.String;", &GeogebraCommonKernelKernel_defaultLibraryJavaScript_, NULL,  },
    { "libraryJavaScript_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL,  },
    { "isSaving__", "isSaving", 0x2, "Z", NULL, NULL,  },
    { "sbFormatAngle_", NULL, 0x12, "Ljava.lang.StringBuilder;", NULL, NULL,  },
    { "arcusFunctionCreatesAngle_", NULL, 0x2, "Z", NULL, NULL,  },
    { "ggbCasCache_", NULL, 0x2, "Lgeogebra.common.util.MaxSizeHashMap;", NULL, "Lgeogebra/common/util/MaxSizeHashMap<Ljava/lang/String;Ljava/lang/String;>;",  },
    { "xmin_", NULL, 0x4, "[D", NULL, NULL,  },
    { "xmax_", NULL, 0x4, "[D", NULL, NULL,  },
    { "ymin_", NULL, 0x4, "[D", NULL, NULL,  },
    { "ymax_", NULL, 0x4, "[D", NULL, NULL,  },
    { "xscale_", NULL, 0x4, "[D", NULL, NULL,  },
    { "yscale_", NULL, 0x4, "[D", NULL, NULL,  },
    { "graphicsView2showing_", NULL, 0x2, "Z", NULL, NULL,  },
    { "notifyRepaint__", "notifyRepaint", 0x2, "Z", NULL, NULL,  },
    { "notifyViewsActive_", NULL, 0x2, "Z", NULL, NULL,  },
    { "renameListenerAlgos_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Lgeogebra/common/kernel/algos/AlgoElement;>;",  },
    { "spreadsheetBatchRunning_", NULL, 0x2, "Z", NULL, NULL,  },
    { "isGettingUndo__", "isGettingUndo", 0x2, "Z", NULL, NULL,  },
    { "selectedGeosNames_", NULL, 0x2, "Ljava.util.ArrayList;", NULL, "Ljava/util/ArrayList<Ljava/lang/String;>;",  },
    { "imaginaryUnit_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoVec2D;", NULL, NULL,  },
    { "ges_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoElementSpreadsheet;", NULL, NULL,  },
    { "algoDispatcher_", NULL, 0x2, "Lgeogebra.common.kernel.algos.AlgoDispatcher;", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelKernel = { 2, "Kernel", "geogebra.common.kernel", NULL, 0x1, 322, methods, 106, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelKernel;
}

@end

void GeogebraCommonKernelKernel_initWithGeogebraCommonMainApp_(GeogebraCommonKernelKernel *self, GeogebraCommonMainApp *app) {
  GeogebraCommonKernelKernel_init(self);
  GeogebraCommonKernelKernel_set_app_(self, app);
  [self newConstruction];
  [self getExpressionNodeEvaluator];
  [self setManager3DWithGeogebraCommonKernelManager3DInterface:[self newManager3DWithGeogebraCommonKernelKernel:self]];
}

GeogebraCommonKernelKernel *new_GeogebraCommonKernelKernel_initWithGeogebraCommonMainApp_(GeogebraCommonMainApp *app) {
  GeogebraCommonKernelKernel *self = [GeogebraCommonKernelKernel alloc];
  GeogebraCommonKernelKernel_initWithGeogebraCommonMainApp_(self, app);
  return self;
}

void GeogebraCommonKernelKernel_init(GeogebraCommonKernelKernel *self) {
  NSObject_init(self);
  self->algebraStyle_ = GeogebraCommonKernelKernel_ALGEBRA_STYLE_VALUE;
  self->insertLineBreaks_ = NO;
  self->angleUnit_ = GeogebraCommonKernelKernel_ANGLE_DEGREE;
  self->viewReiniting_ = NO;
  self->undoActive_ = NO;
  GeogebraCommonKernelKernel_setAndConsume_views_(self, new_JavaUtilArrayList_init());
  self->addingPolygon__ = NO;
  self->continuous_ = NO;
  GeogebraCommonKernelKernel_set_usePathAndRegionParameters__(self, GeogebraCommonKernelPathRegionHandlingEnum_get_ON());
  self->useSignificantFigures_ = NO;
  self->coordStyle_ = 0;
  self->useInternalCommandNames_ = NO;
  self->notifyConstructionProtocolViewAboutAddRemoveActive_ = YES;
  self->allowVisibilitySideEffects_ = YES;
  self->saveScriptsToXML_ = YES;
  self->elementDefaultAllowed_ = NO;
  self->silentMode_ = NO;
  self->wantAnimationStarted__ = NO;
  self->resolveUnkownVarsAsDummyGeos_ = NO;
  self->updateEVAgain_ = NO;
  self->forceUpdatingBoundingBox_ = NO;
  GeogebraCommonKernelKernel_setAndConsume_sbBuildExplicitLineEquation_(self, new_JavaLangStringBuilder_initWithInt_(50));
  GeogebraCommonKernelKernel_setAndConsume_concurrentModificationLock_(self, new_NSObject_init());
  self->showAnimationButton_ = YES;
  GeogebraCommonKernelKernel_setAndConsume_sbBuildImplicitEquation_(self, new_JavaLangStringBuilder_initWithInt_(80));
  GeogebraCommonKernelKernel_setAndConsume_sbBuildLHS_(self, new_JavaLangStringBuilder_initWithInt_(80));
  GeogebraCommonKernelKernel_setAndConsume_sbBuildExplicitConicEquation_(self, new_JavaLangStringBuilder_initWithInt_(80));
  GeogebraCommonKernelKernel_set_libraryJavaScript_(self, GeogebraCommonKernelKernel_defaultLibraryJavaScript_);
  GeogebraCommonKernelKernel_setAndConsume_sbFormatAngle_(self, new_JavaLangStringBuilder_initWithInt_(40));
  GeogebraCommonKernelKernel_setAndConsume_xmin_(self, [IOSDoubleArray newArrayWithLength:1]);
  GeogebraCommonKernelKernel_setAndConsume_xmax_(self, [IOSDoubleArray newArrayWithLength:1]);
  GeogebraCommonKernelKernel_setAndConsume_ymin_(self, [IOSDoubleArray newArrayWithLength:1]);
  GeogebraCommonKernelKernel_setAndConsume_ymax_(self, [IOSDoubleArray newArrayWithLength:1]);
  GeogebraCommonKernelKernel_setAndConsume_xscale_(self, [IOSDoubleArray newArrayWithLength:1]);
  GeogebraCommonKernelKernel_setAndConsume_yscale_(self, [IOSDoubleArray newArrayWithLength:1]);
  self->graphicsView2showing_ = NO;
  self->notifyRepaint__ = YES;
  self->notifyViewsActive_ = YES;
  GeogebraCommonKernelKernel_setAndConsume_selectedGeosNames_(self, new_JavaUtilArrayList_init());
  GeogebraCommonKernelKernel_setAndConsume_ges_(self, new_GeogebraCommonKernelGeosGeoElementSpreadsheet_init());
  GeogebraCommonKernelKernel_set_nf_(self, [((GeogebraCommonFactoriesFormatFactory *) nil_chk(GeogebraCommonFactoriesFormatFactory_get_prototype_())) getNumberFormatWithInt:2]);
  GeogebraCommonKernelKernel_set_sf_(self, [GeogebraCommonFactoriesFormatFactory_get_prototype_() getScientificFormatWithInt:5 withInt:16 withBoolean:NO]);
  GeogebraCommonKernelKernel_setAndConsume_userAwarenessListeners_(self, new_JavaUtilArrayList_init());
  GeogebraCommonKernelKernel_setAndConsume_deleteList_(self, new_JavaUtilArrayList_init());
}

GeogebraCommonKernelKernel *new_GeogebraCommonKernelKernel_init() {
  GeogebraCommonKernelKernel *self = [GeogebraCommonKernelKernel alloc];
  GeogebraCommonKernelKernel_init(self);
  return self;
}

GeogebraCommonMainApp *GeogebraCommonKernelKernel_getApplication(GeogebraCommonKernelKernel *self) {
  return self->app_;
}

id<JavaUtilComparator> GeogebraCommonKernelKernel_DoubleComparatorWithDouble_(jdouble precision) {
  GeogebraCommonKernelKernel_initialize();
  jdouble eps = precision;
  id<JavaUtilComparator> ret = [new_GeogebraCommonKernelKernel_$1_initWithDouble_(eps) autorelease];
  return ret;
}

jboolean GeogebraCommonKernelKernel_isAnimationRunning(GeogebraCommonKernelKernel *self) {
  return self->animationManager_ != nil && [self->animationManager_ isRunning];
}

GeogebraCommonKernelAlgosConstructionElement *GeogebraCommonKernelKernel_getConstructionElementWithGeogebraCommonKernelGeosGeoElement_(GeogebraCommonKernelGeosGeoElement *geo) {
  GeogebraCommonKernelKernel_initialize();
  GeogebraCommonKernelAlgosAlgoElement *algo = [((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) getParentAlgorithm];
  if (algo == nil) {
    return geo;
  }
  return algo;
}

jint GeogebraCommonKernelKernel_getNextBreakpointWithInt_(GeogebraCommonKernelKernel *self, jint initStep) {
  jint step = initStep;
  jint lastStep = [self getLastConstructionStep];
  while (step <= lastStep) {
    if ([((GeogebraCommonKernelAlgosConstructionElement *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) getConstructionElementWithInt:step])) isConsProtocolBreakpoint]) {
      return step;
    }
    step++;
  }
  return lastStep;
}

jint GeogebraCommonKernelKernel_getPreviousBreakpointWithInt_(GeogebraCommonKernelKernel *self, jint initStep) {
  jint step = initStep;
  while (step >= 0) {
    if ([((GeogebraCommonKernelAlgosConstructionElement *) nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) getConstructionElementWithInt:step])) isConsProtocolBreakpoint]) {
      return step;
    }
    step--;
  }
  return -1;
}

jboolean GeogebraCommonKernelKernel_isContinuous(GeogebraCommonKernelKernel *self) {
  return self->continuous_;
}

jchar GeogebraCommonKernelKernel_signWithDouble_(jdouble x) {
  GeogebraCommonKernelKernel_initialize();
  if (x > 0) {
    return '+';
  }
  return '-';
}

JavaLangStringBuilder *GeogebraCommonKernelKernel_buildImplicitEquationWithDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withChar_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, IOSDoubleArray *numbers, IOSObjectArray *vars, jboolean KEEP_LEADING_SIGN, jboolean CANCEL_DOWN, jboolean needsZ, jchar op, GeogebraCommonKernelStringTemplate *tpl) {
  [((JavaLangStringBuilder *) nil_chk(self->sbBuildImplicitEquation_)) setLengthWithInt:0];
  IOSDoubleArray *temp = GeogebraCommonKernelKernel_buildImplicitVarPartWithJavaLangStringBuilder_withDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withGeogebraCommonKernelStringTemplate_(self, self->sbBuildImplicitEquation_, numbers, vars, KEEP_LEADING_SIGN || (op == '='), CANCEL_DOWN, needsZ, tpl);
  [self->sbBuildImplicitEquation_ appendWithChar:' '];
  [self->sbBuildImplicitEquation_ appendWithChar:op];
  [self->sbBuildImplicitEquation_ appendWithChar:' '];
  [self->sbBuildImplicitEquation_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, -IOSDoubleArray_Get(nil_chk(temp), ((IOSObjectArray *) nil_chk(vars))->size_), tpl)];
  return self->sbBuildImplicitEquation_;
}

void GeogebraCommonKernelKernel_formatSignedCoefficientWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, JavaLangStringBuilder *sb, GeogebraCommonKernelStringTemplate *tpl) {
  if (x == -1.0) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"- "];
    return;
  }
  if (x == 1.0) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"+ "];
    return;
  }
  GeogebraCommonKernelKernel_formatSignedWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, x, sb, tpl);
}

void GeogebraCommonKernelKernel_formatSignedWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, JavaLangStringBuilder *sb, GeogebraCommonKernelStringTemplate *tpl) {
  if (x >= 0.0) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"+ "];
    [sb appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl)];
    return;
  }
  [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:@"- "];
  [sb appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, -x, tpl)];
  return;
}

void GeogebraCommonKernelKernel_formatSignedCoefficientPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, JavaLangStringBuilder *sb, GeogebraCommonKernelStringTemplate *tpl) {
  if (x == -1.0) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:GeogebraCommonKernelKernel_STRING_MINUS_PLUS_];
    return;
  }
  if (x == 1.0) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:GeogebraCommonKernelKernel_STRING_PLUS_MINUS_];
    return;
  }
  GeogebraCommonKernelKernel_formatSignedPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(self, x, sb, tpl);
}

void GeogebraCommonKernelKernel_formatSignedPlusMinusWithDouble_withJavaLangStringBuilder_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, JavaLangStringBuilder *sb, GeogebraCommonKernelStringTemplate *tpl) {
  if (x >= 0.0) {
    [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:GeogebraCommonKernelKernel_STRING_PLUS_MINUS_];
    [sb appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl)];
    return;
  }
  [((JavaLangStringBuilder *) nil_chk(sb)) appendWithNSString:GeogebraCommonKernelKernel_STRING_MINUS_PLUS_];
  [sb appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, -x, tpl)];
  return;
}

NSString *GeogebraCommonKernelKernel_formatPiERawWithDouble_withGeogebraCommonUtilNumberFormatAdapter_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, id<GeogebraCommonUtilNumberFormatAdapter> numF, GeogebraCommonKernelStringTemplate *tpl) {
  if (x == JavaLangMath_PI) {
    return [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPi];
  }
  jdouble a = (2 * x) / JavaLangMath_PI;
  jint aint = (jint) JavaLangMath_roundWithDouble_(a);
  if (self->sbFormat_ == nil) {
    GeogebraCommonKernelKernel_setAndConsume_sbFormat_(self, new_JavaLangStringBuilder_init());
  }
  [((JavaLangStringBuilder *) nil_chk(self->sbFormat_)) setLengthWithInt:0];
  if (GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_withDouble_(a, aint, GeogebraCommonKernelKernel_AXES_PRECISION)) {
    {
      jlong half;
      switch (aint) {
        case 0:
        return @"0";
        case 1:
        [self->sbFormat_ appendWithNSString:[((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPi]];
        [self->sbFormat_ appendWithNSString:@"/2"];
        return [self->sbFormat_ description];
        case -1:
        [self->sbFormat_ appendWithChar:'-'];
        [self->sbFormat_ appendWithNSString:[((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPi]];
        [self->sbFormat_ appendWithNSString:@"/2"];
        return [self->sbFormat_ description];
        case 2:
        return [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPi];
        case -2:
        [self->sbFormat_ appendWithChar:'-'];
        [self->sbFormat_ appendWithNSString:[((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPi]];
        return [self->sbFormat_ description];
        default:
        half = aint / 2;
        if (aint == (2 * half)) {
          [self->sbFormat_ appendWithLong:half];
          if (![((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) hasTypeWithGeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum:GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_get_GEOGEBRA()]) {
            [self->sbFormat_ appendWithNSString:@"*"];
          }
          [self->sbFormat_ appendWithNSString:[tpl getPi]];
          return [self->sbFormat_ description];
        }
        [self->sbFormat_ appendWithInt:aint];
        if (![((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) hasTypeWithGeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum:GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_get_GEOGEBRA()]) {
          [self->sbFormat_ appendWithNSString:@"*"];
        }
        [self->sbFormat_ appendWithNSString:[tpl getPi]];
        [self->sbFormat_ appendWithNSString:@"/2"];
        return [self->sbFormat_ description];
      }
    }
  }
  NSString *str = [((id<GeogebraCommonUtilNumberFormatAdapter>) nil_chk(numF)) formatWithDouble:GeogebraCommonKernelKernel_checkDecimalFractionWithDouble_(x)];
  [self->sbFormat_ appendWithNSString:str];
  if ([((NSString *) nil_chk(str)) hasSuffix:@"E0"]) {
    [self->sbFormat_ setLengthWithInt:[self->sbFormat_ length] - 2];
  }
  return [self->sbFormat_ description];
}

NSString *GeogebraCommonKernelKernel_formatRawWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble number, GeogebraCommonKernelStringTemplate *tpl) {
  jdouble x = number;
  jboolean isLongInteger = NO;
  jlong rounded = JavaLangMath_roundWithDouble_(x);
  if ((x == rounded) && (x >= JavaLangLong_MIN_VALUE) && (x < JavaLangLong_MAX_VALUE)) {
    isLongInteger = YES;
  }
  GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum *casPrintForm = [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getStringType];
  {
    jboolean useSF;
    switch ([casPrintForm ordinal]) {
      case GeogebraCommonKernelArithmeticExpressionNodeConstants_StringType_PSTRICKS:
      case GeogebraCommonKernelArithmeticExpressionNodeConstants_StringType_PGF:
      return JavaLangDouble_toStringWithDouble_(x);
      case GeogebraCommonKernelArithmeticExpressionNodeConstants_StringType_GEOGEBRA_XML:
      if (isLongInteger) {
        return JavaLangLong_toStringWithLong_(rounded);
      }
      return JavaLangDouble_toStringWithDouble_(x);
      case GeogebraCommonKernelArithmeticExpressionNodeConstants_StringType_GIAC:
      if (JavaLangDouble_isNaNWithDouble_(x)) {
        return @"?";
      }
      else if (JavaLangDouble_isInfiniteWithDouble_(x)) {
        if ([((GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum *) nil_chk(casPrintForm)) isEqual:GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_get_GIAC()]) {
          return (x < 0) ? @"-inf" : @"inf";
        }
        return JavaLangDouble_toStringWithDouble_(x);
      }
      else if (isLongInteger) {
        return JavaLangLong_toStringWithLong_(rounded);
      }
      else if (GeogebraCommonKernelKernel_isZeroWithDouble_withDouble_(x, GeogebraCommonKernelKernel_MAX_PRECISION)) {
        return @"0";
      }
      else {
        jdouble abs = JavaLangMath_absWithDouble_(x);
        if ((abs >= 10E-3) && (abs < 10E7)) {
          NSString *ret = JavaLangDouble_toStringWithDouble_(x);
          if ([((GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum *) nil_chk(casPrintForm)) isEqual:GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_get_GIAC()] && [((NSString *) nil_chk(ret)) indexOf:'.'] > -1) {
            return GeogebraCommonUtilStringUtil_wrapInExactWithNSString_(ret);
          }
          return ret;
        }
        NSString *scientificStr = JavaLangDouble_toStringWithDouble_(x);
        return [tpl convertScientificNotationWithNSString:scientificStr];
      }
      default:
      if (JavaLangDouble_isNaNWithDouble_(x)) {
        return @"?";
      }
      else if (JavaLangDouble_isInfiniteWithDouble_(x)) {
        return (x > 0) ? @"\u221e" : @"-\u221e";
      }
      else if (x == JavaLangMath_PI) {
        return [tpl getPi];
      }
      useSF = [tpl useScientificWithBoolean:self->useSignificantFigures_];
      if (!isLongInteger) {
        jdouble abs = JavaLangMath_absWithDouble_(x);
        x = x * [tpl getRoundHalfUpFactorWithDouble:abs withGeogebraCommonUtilNumberFormatAdapter:self->nf_ withGeogebraCommonUtilScientificFormatAdapter:self->sf_ withBoolean:useSF];
      }
      if (useSF) {
        return GeogebraCommonKernelKernel_formatSFWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
      }
      return GeogebraCommonKernelKernel_formatNFWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
    }
  }
}

NSString *GeogebraCommonKernelKernel_formatNFWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl) {
  jdouble printPrecision = [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:self->nf_];
  if (((-printPrecision / 2) <= x) && (x < (printPrecision / 2))) {
    return @"0";
  }
  id<GeogebraCommonUtilNumberFormatAdapter> nfa = [tpl getNFWithGeogebraCommonUtilNumberFormatAdapter:self->nf_];
  return [((id<GeogebraCommonUtilNumberFormatAdapter>) nil_chk(nfa)) formatWithDouble:x];
}

NSString *GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl) {
  NSString *ret = GeogebraCommonKernelKernel_formatRawWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
  if (((GeogebraCommonMainLocalization *) nil_chk([((GeogebraCommonMainApp *) nil_chk(self->app_)) getLocalization]))->unicodeZero_ != '0') {
    ret = [self internationalizeDigitsWithNSString:ret withGeogebraCommonKernelStringTemplate:tpl];
  }
  return ret;
}

void GeogebraCommonKernelKernel_copy__WithDoubleArray_withDoubleArray_(IOSDoubleArray *a, IOSDoubleArray *b) {
  GeogebraCommonKernelKernel_initialize();
  for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(a))->size_; i++) {
    *IOSDoubleArray_GetRef(nil_chk(b), i) = IOSDoubleArray_Get(a, i);
  }
}

void GeogebraCommonKernelKernel_negativeWithDoubleArray_withDoubleArray_(IOSDoubleArray *a, IOSDoubleArray *b) {
  GeogebraCommonKernelKernel_initialize();
  for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(a))->size_; i++) {
    *IOSDoubleArray_GetRef(nil_chk(b), i) = -IOSDoubleArray_Get(a, i);
  }
}

void GeogebraCommonKernelKernel_divideWithDoubleArray_withDouble_withDoubleArray_(IOSDoubleArray *a, jdouble b, IOSDoubleArray *c) {
  GeogebraCommonKernelKernel_initialize();
  for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(a))->size_; i++) {
    *IOSDoubleArray_GetRef(nil_chk(c), i) = IOSDoubleArray_Get(a, i) / b;
  }
}

jlong GeogebraCommonKernelKernel_gcdWithLong_withLong_(jlong m, jlong n) {
  GeogebraCommonKernelKernel_initialize();
  if ((m == 0) || (n == 0)) {
    return JavaLangMath_maxWithLong_withLong_(JavaLangMath_absWithLong_(m), JavaLangMath_absWithLong_(n));
  }
  jlong p = m, q = n;
  while ((p % q) != 0) {
    jlong r = p % q;
    p = q;
    q = r;
  }
  return q;
}

jdouble GeogebraCommonKernelKernel_gcdWithDoubleArray_(IOSDoubleArray *numbers) {
  GeogebraCommonKernelKernel_initialize();
  jlong gcd = J2ObjCFpToLong(IOSDoubleArray_Get(nil_chk(numbers), 0));
  for (jint i = 0; i < numbers->size_; i++) {
    gcd = GeogebraCommonKernelKernel_gcdWithLong_withLong_(J2ObjCFpToLong(IOSDoubleArray_Get(numbers, i)), gcd);
  }
  return JavaLangMath_absWithLong_(gcd);
}

jdouble GeogebraCommonKernelKernel_roundToScaleWithDouble_withDouble_(jdouble x, jdouble scale_) {
  GeogebraCommonKernelKernel_initialize();
  if (scale_ == 1.0) {
    return JavaLangMath_roundWithDouble_(x);
  }
  return JavaLangMath_roundWithDouble_(x / scale_) * scale_;
}

jboolean GeogebraCommonKernelKernel_isEqualWithDoubleArray_withDoubleArray_(IOSDoubleArray *a, IOSDoubleArray *b) {
  GeogebraCommonKernelKernel_initialize();
  for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(a))->size_; ++i) {
    if (!GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_(IOSDoubleArray_Get(a, i), IOSDoubleArray_Get(nil_chk(b), i))) {
      return NO;
    }
  }
  return YES;
}

jdouble GeogebraCommonKernelKernel_maxAbsWithDoubleArray_(IOSDoubleArray *a) {
  GeogebraCommonKernelKernel_initialize();
  jdouble temp, max = JavaLangMath_absWithDouble_(IOSDoubleArray_Get(nil_chk(a), 0));
  for (jint i = 1; i < a->size_; i++) {
    temp = JavaLangMath_absWithDouble_(IOSDoubleArray_Get(a, i));
    if (temp > max) {
      max = temp;
    }
  }
  return max;
}

jchar GeogebraCommonKernelKernel_oppositeSignWithChar_(jchar op) {
  GeogebraCommonKernelKernel_initialize();
  switch (op) {
    case '=':
    return '=';
    case '<':
    return '>';
    case '>':
    return '<';
    case 0x2264:
    return 0x2265;
    case 0x2265:
    return 0x2264;
    default:
    return '?';
  }
}

IOSDoubleArray *GeogebraCommonKernelKernel_buildImplicitVarPartWithJavaLangStringBuilder_withDoubleArray_withNSStringArray_withBoolean_withBoolean_withBoolean_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, JavaLangStringBuilder *sbBuildImplicitVarPart, IOSDoubleArray *numbers, IOSObjectArray *vars, jboolean KEEP_LEADING_SIGN, jboolean CANCEL_DOWN, jboolean needsZ, GeogebraCommonKernelStringTemplate *tpl) {
  IOSDoubleArray *temp = [IOSDoubleArray arrayWithLength:((IOSDoubleArray *) nil_chk(numbers))->size_];
  jint leadingNonZero = -1;
  [((JavaLangStringBuilder *) nil_chk(sbBuildImplicitVarPart)) setLengthWithInt:0];
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(vars))->size_; i++) {
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_(IOSDoubleArray_Get(numbers, i))) {
      leadingNonZero = i;
      break;
    }
  }
  if (CANCEL_DOWN) {
    jboolean allIntegers = YES;
    for (jint i = 0; i < numbers->size_; i++) {
      allIntegers = (allIntegers && GeogebraCommonKernelKernel_isIntegerWithDouble_(IOSDoubleArray_Get(numbers, i)));
    }
    if (allIntegers) {
      GeogebraCommonKernelKernel_divideWithDoubleArray_withDouble_withDoubleArray_(numbers, GeogebraCommonKernelKernel_gcdWithDoubleArray_(numbers), numbers);
    }
  }
  if (leadingNonZero == -1) {
    [sbBuildImplicitVarPart appendWithNSString:@"0"];
    return temp;
  }
  if (KEEP_LEADING_SIGN) {
    GeogebraCommonKernelKernel_copy__WithDoubleArray_withDoubleArray_(numbers, temp);
  }
  else {
    if (IOSDoubleArray_Get(numbers, leadingNonZero) < 0) {
      GeogebraCommonKernelKernel_negativeWithDoubleArray_withDoubleArray_(numbers, temp);
    }
    else {
      GeogebraCommonKernelKernel_copy__WithDoubleArray_withDoubleArray_(numbers, temp);
    }
  }
  NSString *strCoeff = GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(self, IOSDoubleArray_Get(temp, leadingNonZero), tpl);
  [sbBuildImplicitVarPart appendWithNSString:strCoeff];
  [sbBuildImplicitVarPart appendWithNSString:IOSObjectArray_Get(vars, leadingNonZero)];
  NSString *sign;
  jdouble abs;
  for (jint i = leadingNonZero + 1; i < vars->size_; i++) {
    if (IOSDoubleArray_Get(temp, i) < 0.0) {
      sign = @" - ";
      abs = -IOSDoubleArray_Get(temp, i);
    }
    else {
      sign = @" + ";
      abs = IOSDoubleArray_Get(temp, i);
    }
    if ((abs >= [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:self->nf_]) || self->useSignificantFigures_ || (needsZ && i == 2)) {
      [sbBuildImplicitVarPart appendWithNSString:sign];
      [sbBuildImplicitVarPart appendWithNSString:GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(self, abs, tpl)];
      [sbBuildImplicitVarPart appendWithNSString:IOSObjectArray_Get(vars, i)];
    }
  }
  return temp;
}

jboolean GeogebraCommonKernelKernel_isZeroFigureWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl) {
  return !self->useSignificantFigures_ && (JavaLangMath_absWithDouble_(x) <= [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getPrecisionWithGeogebraCommonUtilNumberFormatAdapter:self->nf_]);
}

NSString *GeogebraCommonKernelKernel_formatSFWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl) {
  if (self->sbFormatSF_ == nil) {
    GeogebraCommonKernelKernel_setAndConsume_sbFormatSF_(self, new_JavaLangStringBuilder_init());
  }
  else {
    [self->sbFormatSF_ setLengthWithInt:0];
  }
  id<GeogebraCommonUtilScientificFormatAdapter> sfa = [((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getSFWithGeogebraCommonUtilScientificFormatAdapter:self->sf_];
  NSString *absStr;
  if (x == 0) {
    absStr = [((id<GeogebraCommonUtilScientificFormatAdapter>) nil_chk(sfa)) formatWithDouble:0];
  }
  else if (x > 0) {
    absStr = [((id<GeogebraCommonUtilScientificFormatAdapter>) nil_chk(sfa)) formatWithDouble:x];
  }
  else {
    [((JavaLangStringBuilder *) nil_chk(self->sbFormatSF_)) appendWithChar:'-'];
    absStr = [((id<GeogebraCommonUtilScientificFormatAdapter>) nil_chk(sfa)) formatWithDouble:-x];
  }
  if ([((NSString *) nil_chk(absStr)) charAtWithInt:0] == '.') {
    [((JavaLangStringBuilder *) nil_chk(self->sbFormatSF_)) appendWithChar:'0'];
  }
  [((JavaLangStringBuilder *) nil_chk(self->sbFormatSF_)) appendWithNSString:absStr];
  return [self->sbFormatSF_ description];
}

NSString *GeogebraCommonKernelKernel_formatCoeffWithDouble_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, jdouble x, GeogebraCommonKernelStringTemplate *tpl) {
  if (JavaLangMath_absWithDouble_(x) == 1.0) {
    if (x > 0.0) {
      return @"";
    }
    return @"-";
  }
  NSString *numberStr = GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, x, tpl);
  switch ([[((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getStringType] ordinal]) {
    case GeogebraCommonKernelArithmeticExpressionNodeConstants_StringType_GIAC:
    return JreStrcat("$C", numberStr, '*');
    default:
    return numberStr;
  }
}

jdouble GeogebraCommonKernelKernel_chopWithDouble_(jdouble x) {
  GeogebraCommonKernelKernel_initialize();
  if (GeogebraCommonKernelKernel_isZeroWithDouble_(x)) {
    return 0.0;
  }
  return x;
}

jboolean GeogebraCommonKernelKernel_isZeroWithDouble_(jdouble x) {
  GeogebraCommonKernelKernel_initialize();
  return (-GeogebraCommonKernelKernel_STANDARD_PRECISION < x) && (x < GeogebraCommonKernelKernel_STANDARD_PRECISION);
}

jboolean GeogebraCommonKernelKernel_isZeroWithDouble_withDouble_(jdouble x, jdouble eps) {
  GeogebraCommonKernelKernel_initialize();
  return (-eps < x) && (x < eps);
}

jboolean GeogebraCommonKernelKernel_isZeroWithDoubleArray_(IOSDoubleArray *a) {
  GeogebraCommonKernelKernel_initialize();
  for (jint i = 0; i < ((IOSDoubleArray *) nil_chk(a))->size_; i++) {
    if (!GeogebraCommonKernelKernel_isZeroWithDouble_(IOSDoubleArray_Get(a, i))) {
      return NO;
    }
  }
  return YES;
}

jboolean GeogebraCommonKernelKernel_isIntegerWithDouble_(jdouble x) {
  GeogebraCommonKernelKernel_initialize();
  if (JavaLangDouble_isInfiniteWithDouble_(x) || JavaLangDouble_isNaNWithDouble_(x)) {
    return NO;
  }
  if (x > 1E17 || x < -1E17) {
    return YES;
  }
  return GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_(x, JavaLangMath_roundWithDouble_(x));
}

jboolean GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_(jdouble x, jdouble y) {
  GeogebraCommonKernelKernel_initialize();
  if (x == y) {
    return YES;
  }
  return ((x - GeogebraCommonKernelKernel_STANDARD_PRECISION) <= y) && (y <= (x + GeogebraCommonKernelKernel_STANDARD_PRECISION));
}

jboolean GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_withDouble_(jdouble x, jdouble y, jdouble eps) {
  GeogebraCommonKernelKernel_initialize();
  if (x == y) {
    return YES;
  }
  return ((x - eps) < y) && (y < (x + eps));
}

jboolean GeogebraCommonKernelKernel_isGreaterWithDouble_withDouble_(jdouble x, jdouble y) {
  GeogebraCommonKernelKernel_initialize();
  return x > (y + GeogebraCommonKernelKernel_STANDARD_PRECISION);
}

jint GeogebraCommonKernelKernel_compareWithDouble_withDouble_(jdouble x, jdouble y) {
  GeogebraCommonKernelKernel_initialize();
  if (GeogebraCommonKernelKernel_isGreaterWithDouble_withDouble_(x, y)) {
    return 1;
  }
  if (GeogebraCommonKernelKernel_isGreaterWithDouble_withDouble_(y, x)) {
    return -1;
  }
  return 0;
}

jboolean GeogebraCommonKernelKernel_isGreaterWithDouble_withDouble_withDouble_(jdouble x, jdouble y, jdouble eps) {
  GeogebraCommonKernelKernel_initialize();
  return x > (y + eps);
}

jboolean GeogebraCommonKernelKernel_isGreaterEqualWithDouble_withDouble_(jdouble x, jdouble y) {
  GeogebraCommonKernelKernel_initialize();
  return (x + GeogebraCommonKernelKernel_STANDARD_PRECISION) > y;
}

jdouble GeogebraCommonKernelKernel_convertToAngleValueWithDouble_(jdouble val) {
  GeogebraCommonKernelKernel_initialize();
  if ((val > GeogebraCommonKernelKernel_STANDARD_PRECISION) && (val < GeogebraCommonKernelKernel_PI_2)) {
    return val;
  }
  jdouble value = fmod(val, GeogebraCommonKernelKernel_PI_2);
  if (GeogebraCommonKernelKernel_isZeroWithDouble_(value)) {
    if (val < 1.0) {
      value = 0.0;
    }
    else {
      value = GeogebraCommonKernelKernel_PI_2;
    }
  }
  else if (value < 0.0) {
    value += GeogebraCommonKernelKernel_PI_2;
  }
  return value;
}

jdouble GeogebraCommonKernelKernel_checkDecimalFractionWithDouble_withDouble_(jdouble x, jdouble precision) {
  GeogebraCommonKernelKernel_initialize();
  jdouble prec = precision;
  prec = JavaLangMath_powWithDouble_withDouble_(10, JavaLangMath_floorWithDouble_(JavaLangMath_logWithDouble_(JavaLangMath_absWithDouble_(prec)) / JavaLangMath_logWithDouble_(10)));
  jdouble fracVal = x * GeogebraCommonKernelKernel_INV_MIN_PRECISION;
  jdouble roundVal = JavaLangMath_roundWithDouble_(fracVal);
  if (GeogebraCommonKernelKernel_isEqualWithDouble_withDouble_withDouble_(fracVal, roundVal, GeogebraCommonKernelKernel_STANDARD_PRECISION * prec)) {
    return roundVal / GeogebraCommonKernelKernel_INV_MIN_PRECISION;
  }
  return x;
}

jdouble GeogebraCommonKernelKernel_checkDecimalFractionWithDouble_(jdouble x) {
  GeogebraCommonKernelKernel_initialize();
  return GeogebraCommonKernelKernel_checkDecimalFractionWithDouble_withDouble_(x, 1);
}

jdouble GeogebraCommonKernelKernel_checkIntegerWithDouble_(jdouble x) {
  GeogebraCommonKernelKernel_initialize();
  jdouble roundVal = JavaLangMath_roundWithDouble_(x);
  if (JavaLangMath_absWithDouble_(x - roundVal) < GeogebraCommonKernelKernel_STANDARD_PRECISION) {
    return roundVal;
  }
  return x;
}

JavaLangStringBuilder *GeogebraCommonKernelKernel_formatAngleWithDouble_withDouble_withGeogebraCommonKernelStringTemplate_withBoolean_(GeogebraCommonKernelKernel *self, jdouble alpha, jdouble precision, GeogebraCommonKernelStringTemplate *tpl, jboolean unbounded) {
  jdouble phi = alpha;
  [((JavaLangStringBuilder *) nil_chk(self->sbFormatAngle_)) setLengthWithInt:0];
  switch ([[((GeogebraCommonKernelStringTemplate *) nil_chk(tpl)) getStringType] ordinal]) {
    default:
    if (JavaLangDouble_isNaNWithDouble_(phi)) {
      [self->sbFormatAngle_ appendWithNSString:@"?"];
      return self->sbFormatAngle_;
    }
    if (GeogebraCommonKernelKernel_getAngleUnit(self) == GeogebraCommonKernelKernel_ANGLE_DEGREE) {
      jboolean rtl = [((GeogebraCommonMainLocalization *) nil_chk([self getLocalization])) isRightToLeftDigitsWithGeogebraCommonKernelStringTemplate:tpl];
      if (rtl) {
        if ([tpl hasCASType]) {
          [self->sbFormatAngle_ appendWithNSString:@"pi/180*"];
        }
        else {
          [self->sbFormatAngle_ appendWithChar:GeogebraCommonUtilUnicode_degreeChar];
        }
      }
      phi = JavaLangMath_toDegreesWithDouble_(phi);
      phi = GeogebraCommonKernelKernel_checkIntegerWithDouble_(phi);
      if (!unbounded) {
        if (phi < 0) {
          phi += 360;
        }
        else if (phi > 360) {
          phi = fmod(phi, 360);
        }
      }
      [self->sbFormatAngle_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, GeogebraCommonKernelKernel_checkDecimalFractionWithDouble_withDouble_(phi, precision), tpl)];
      if ([tpl hasTypeWithGeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum:GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_get_GEOGEBRA_XML()]) {
        [self->sbFormatAngle_ appendWithNSString:@"*"];
      }
      if (!rtl) {
        if ([tpl hasCASType]) {
          [self->sbFormatAngle_ appendWithNSString:@"*pi/180"];
        }
        else {
          [self->sbFormatAngle_ appendWithChar:GeogebraCommonUtilUnicode_degreeChar];
        }
      }
      return self->sbFormatAngle_;
    }
    [self->sbFormatAngle_ appendWithNSString:GeogebraCommonKernelKernel_formatWithDouble_withGeogebraCommonKernelStringTemplate_(self, phi, tpl)];
    if (![tpl hasTypeWithGeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum:GeogebraCommonKernelArithmeticExpressionNodeConstants_StringTypeEnum_get_GEOGEBRA_XML()]) {
      [self->sbFormatAngle_ appendWithNSString:@" rad"];
    }
    return self->sbFormatAngle_;
  }
}

jint GeogebraCommonKernelKernel_getAngleUnit(GeogebraCommonKernelKernel *self) {
  return self->angleUnit_;
}

NSString *GeogebraCommonKernelKernel_removeCASVariablePrefixWithNSString_(NSString *str) {
  GeogebraCommonKernelKernel_initialize();
  return GeogebraCommonKernelKernel_removeCASVariablePrefixWithNSString_withNSString_(str, @"");
}

NSString *GeogebraCommonKernelKernel_removeCASVariablePrefixWithNSString_withNSString_(NSString *str, NSString *replace) {
  GeogebraCommonKernelKernel_initialize();
  return [((NSString *) nil_chk(str)) replace:GeogebraCommonKernelKernel_TMP_VARIABLE_PREFIX_ withSequence:replace];
}

jint GeogebraCommonKernelKernel_getPrintDecimals(GeogebraCommonKernelKernel *self) {
  if (self->nf_ == nil) return 5;
  return [((id<GeogebraCommonUtilNumberFormatAdapter>) nil_chk(self->nf_)) getMaximumFractionDigits];
}

jint GeogebraCommonKernelKernel_getPrintFigures(GeogebraCommonKernelKernel *self) {
  if (!self->useSignificantFigures_) {
    return -1;
  }
  return [((id<GeogebraCommonUtilScientificFormatAdapter>) nil_chk(self->sf_)) getSigDigits];
}

jboolean GeogebraCommonKernelKernel_isResolveUnkownVarsAsDummyGeos(GeogebraCommonKernelKernel *self) {
  return self->resolveUnkownVarsAsDummyGeos_;
}

NSString *GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, NSString *exp, GeogebraCommonKernelArithmeticMyArbitraryConstant *arbconst, GeogebraCommonKernelStringTemplate *tpl) {
  return GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withBoolean_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(self, exp, NO, arbconst, tpl);
}

NSString *GeogebraCommonKernelKernel_evaluateGeoGebraCASWithNSString_withBoolean_withGeogebraCommonKernelArithmeticMyArbitraryConstant_withGeogebraCommonKernelStringTemplate_(GeogebraCommonKernelKernel *self, NSString *exp, jboolean useCaching, GeogebraCommonKernelArithmeticMyArbitraryConstant *arbconst, GeogebraCommonKernelStringTemplate *tpl) {
  NSString *result = nil;
  if (useCaching && [self hasCasCache]) {
    result = [((GeogebraCommonUtilMaxSizeHashMap *) nil_chk([self getCasCache])) getWithId:exp];
    if (result != nil) {
      return result;
    }
  }
  result = [((id<GeogebraCommonKernelGeoGebraCasInterface>) nil_chk([self getGeoGebraCAS])) evaluateGeoGebraCASWithNSString:exp withGeogebraCommonKernelArithmeticMyArbitraryConstant:arbconst withGeogebraCommonKernelStringTemplate:tpl withGeogebraCommonKernelKernel:self];
  if (useCaching) {
    [((GeogebraCommonUtilMaxSizeHashMap *) nil_chk([self getCasCache])) putWithId:exp withId:result];
  }
  return result;
}

jint GeogebraCommonKernelKernel_getCoordStyle(GeogebraCommonKernelKernel *self) {
  return self->coordStyle_;
}

GeogebraCommonKernelGeosGeoElement *GeogebraCommonKernelKernel_lookupLabelWithNSString_(GeogebraCommonKernelKernel *self, NSString *label) {
  return GeogebraCommonKernelKernel_lookupLabelWithNSString_withBoolean_(self, label, NO);
}

GeogebraCommonKernelGeosGeoCasCell *GeogebraCommonKernelKernel_lookupCasCellLabelWithNSString_(GeogebraCommonKernelKernel *self, NSString *label) {
  return [((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) lookupCasCellLabelWithNSString:label];
}

GeogebraCommonKernelGeosGeoElement *GeogebraCommonKernelKernel_lookupLabelWithNSString_withBoolean_(GeogebraCommonKernelKernel *self, NSString *label, jboolean autoCreate) {
  GeogebraCommonKernelGeosGeoElement *geo = [((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) lookupLabelWithNSString:label withBoolean:autoCreate];
  if ((geo == nil) && GeogebraCommonKernelKernel_isResolveUnkownVarsAsDummyGeos(self)) {
    geo = GeogebraCommonKernelKernel_lookupCasCellLabelWithNSString_(self, label);
    if (geo == nil) {
      geo = [new_GeogebraCommonKernelGeosGeoDummyVariable_initWithGeogebraCommonKernelConstruction_withNSString_(self->cons_, label) autorelease];
    }
  }
  return geo;
}

void GeogebraCommonKernelKernel_addViewsWithJavaLangInteger_withDoubleArray_(GeogebraCommonKernelKernel *self, JavaLangInteger *id_, IOSDoubleArray *viewBounds) {
  id<GeogebraCommonKernelView> view = [((GeogebraCommonMainApp *) nil_chk(GeogebraCommonKernelKernel_getApplication(self))) getViewWithInt:[((JavaLangInteger *) nil_chk(id_)) intValue]];
  if ((view != nil) && ([GeogebraCommonEuclidianEuclidianViewInterfaceSlim_class_() isInstance:view])) {
    id<GeogebraCommonEuclidianEuclidianViewInterfaceSlim> ev = (id<GeogebraCommonEuclidianEuclidianViewInterfaceSlim>) check_protocol_cast(view, @protocol(GeogebraCommonEuclidianEuclidianViewInterfaceSlim));
    *IOSDoubleArray_GetRef(nil_chk(viewBounds), 0) = JavaLangMath_minWithDouble_withDouble_(IOSDoubleArray_Get(viewBounds, 0), [ev getXmin]);
    *IOSDoubleArray_GetRef(viewBounds, 1) = JavaLangMath_maxWithDouble_withDouble_(IOSDoubleArray_Get(viewBounds, 1), [ev getXmax]);
    *IOSDoubleArray_GetRef(viewBounds, 2) = JavaLangMath_minWithDouble_withDouble_(IOSDoubleArray_Get(viewBounds, 2), [ev getYmin]);
    *IOSDoubleArray_GetRef(viewBounds, 3) = JavaLangMath_maxWithDouble_withDouble_(IOSDoubleArray_Get(viewBounds, 3), [ev getYmax]);
    *IOSDoubleArray_GetRef(viewBounds, 4) = JavaLangMath_maxWithDouble_withDouble_(IOSDoubleArray_Get(viewBounds, 4), [ev getXscale]);
    *IOSDoubleArray_GetRef(viewBounds, 5) = JavaLangMath_maxWithDouble_withDouble_(IOSDoubleArray_Get(viewBounds, 5), [ev getYscale]);
  }
}

void GeogebraCommonKernelKernel_notifyRepaint(GeogebraCommonKernelKernel *self) {
  if (self->notifyRepaint__ && self->notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(self->views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) repaintView];
    }
  }
}

void GeogebraCommonKernelKernel_notifyReset(GeogebraCommonKernelKernel *self) {
  if (self->notifyViewsActive_) {
    for (id<GeogebraCommonKernelView> __strong view in nil_chk(self->views_)) {
      [((id<GeogebraCommonKernelView>) nil_chk(view)) reset];
    }
  }
}

void GeogebraCommonKernelKernel_notifyClearView(GeogebraCommonKernelKernel *self) {
  for (id<GeogebraCommonKernelView> __strong view in nil_chk(self->views_)) {
    [((id<GeogebraCommonKernelView>) nil_chk(view)) clearView];
  }
}

void GeogebraCommonKernelKernel_printAttachedViews(GeogebraCommonKernelKernel *self) {
  @try {
    if (!self->notifyViewsActive_) {
      GeogebraCommonMainApp_debugWithNSString_(@"Number of registered views = 0");
    }
    else {
      JavaLangStringBuilder *sb = [new_JavaLangStringBuilder_init() autorelease];
      [sb appendWithNSString:@"Number of registered views = "];
      [sb appendWithInt:[((JavaUtilArrayList *) nil_chk(self->views_)) size]];
      for (id<GeogebraCommonKernelView> __strong view in self->views_) {
        [sb appendWithNSString:@"\n * "];
        [sb appendWithId:[((id<GeogebraCommonKernelView>) nil_chk(view)) getClass]];
      }
      GeogebraCommonMainApp_debugWithNSString_([sb description]);
    }
  }
  @catch (JavaLangException *e) {
    GeogebraCommonMainApp_debugWithNSString_([((JavaLangException *) nil_chk(e)) getMessage]);
  }
}

void GeogebraCommonKernelKernel_notifyAddAllWithGeogebraCommonKernelView_(GeogebraCommonKernelKernel *self, id<GeogebraCommonKernelView> view) {
  jint consStep = [((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) getStep];
  GeogebraCommonKernelKernel_notifyAddAllWithGeogebraCommonKernelView_withInt_(self, view, consStep);
}

void GeogebraCommonKernelKernel_notifyRenameListenerAlgos(GeogebraCommonKernelKernel *self) {
  if (self->cons_ != nil && ![self->cons_ isFileLoading] && ![self isSpreadsheetBatchRunning]) {
    GeogebraCommonKernelAlgosAlgoElement_updateCascadeAlgosWithJavaUtilArrayList_(self->renameListenerAlgos_);
  }
}

void GeogebraCommonKernelKernel_notifyAddAllWithGeogebraCommonKernelView_withInt_(GeogebraCommonKernelKernel *self, id<GeogebraCommonKernelView> view, jint consStep) {
  if (!self->notifyViewsActive_) {
    return;
  }
  for (GeogebraCommonKernelGeosGeoElement * __strong geo in nil_chk([((GeogebraCommonKernelConstruction *) nil_chk(self->cons_)) getGeoSetWithCasCellsConstructionOrder])) {
    if (![((GeogebraCommonKernelGeosGeoElement *) nil_chk(geo)) isAvailableAtConstructionStepWithInt:consStep]) {
      break;
    }
    [((id<GeogebraCommonKernelView>) nil_chk(view)) addWithGeogebraCommonKernelGeosGeoElement:geo];
  }
  if ([self getUpdateAgain]) {
    [self setUpdateAgainWithBoolean:NO withGeogebraCommonKernelGeosGeoElement:nil];
    [((GeogebraCommonMainApp *) nil_chk(self->app_)) scheduleUpdateConstruction];
  }
}

GeogebraCommonKernelArithmeticMyDouble *GeogebraCommonKernelKernel_convertIndexToNumberWithNSString_(GeogebraCommonKernelKernel *self, NSString *str) {
  jint i = 0;
  while ((i < ((jint) [((NSString *) nil_chk(str)) length])) && !GeogebraCommonUtilUnicode_isSuperscriptDigitWithChar_([str charAtWithInt:i])) {
    i++;
  }
  GeogebraCommonKernelArithmeticMyDouble *md = [new_GeogebraCommonKernelArithmeticMyDouble_initWithGeogebraCommonKernelKernel_withNSString_(self, [str substring:i endIndex:((jint) [str length]) - 1]) autorelease];
  return md;
}

jboolean GeogebraCommonKernelKernel_kernelHas3DObjects(GeogebraCommonKernelKernel *self) {
  id<JavaUtilIterator> it = [((JavaUtilTreeSet *) nil_chk(((GeogebraCommonKernelConstruction *) nil_chk(self->cons_))->usedGeos_)) iterator];
  jboolean kernelHas3DObjects = NO;
  while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
    GeogebraCommonPluginGeoClassEnum *geoType = [it next];
    if (((GeogebraCommonPluginGeoClassEnum *) nil_chk(geoType))->is3D_) {
      GeogebraCommonMainApp_debugWithNSString_(JreStrcat("$$", @"found 3D geo: ", geoType->xmlName_));
      kernelHas3DObjects = YES;
      break;
    }
  }
  if (kernelHas3DObjects) {
    GeogebraCommonMainApp_errorWithNSString_(@"kernel has 3D objects");
  }
  return kernelHas3DObjects;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelKernel)

@implementation GeogebraCommonKernelKernel_$1

- (jint)compareWithId:(JavaLangDouble *)d1
               withId:(JavaLangDouble *)d2 {
  if (JavaLangMath_absWithDouble_([((JavaLangDouble *) nil_chk(d1)) doubleValue] - [((JavaLangDouble *) nil_chk(d2)) doubleValue]) < val$eps_) {
    return 0;
  }
  else if ([d1 doubleValue] < [d2 doubleValue]) {
    return -1;
  }
  else {
    return 1;
  }
}

- (instancetype)initWithDouble:(jdouble)capture$0 {
  GeogebraCommonKernelKernel_$1_initWithDouble_(self, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "compareWithId:withId:", "compare", "I", 0x1, NULL, NULL },
    { "initWithDouble:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$eps_", NULL, 0x1012, "D", NULL, NULL,  },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "GeogebraCommonKernelKernel", "DoubleComparatorWithDouble:" };
  static const J2ObjcClassInfo _GeogebraCommonKernelKernel_$1 = { 2, "", "geogebra.common.kernel", "Kernel", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Ljava/util/Comparator<Ljava/lang/Double;>;" };
  return &_GeogebraCommonKernelKernel_$1;
}

@end

void GeogebraCommonKernelKernel_$1_initWithDouble_(GeogebraCommonKernelKernel_$1 *self, jdouble capture$0) {
  self->val$eps_ = capture$0;
  NSObject_init(self);
}

GeogebraCommonKernelKernel_$1 *new_GeogebraCommonKernelKernel_$1_initWithDouble_(jdouble capture$0) {
  GeogebraCommonKernelKernel_$1 *self = [GeogebraCommonKernelKernel_$1 alloc];
  GeogebraCommonKernelKernel_$1_initWithDouble_(self, capture$0);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelKernel_$1)

@implementation GeogebraCommonKernelKernel_$2

- (id<GeogebraCommonKernelArithmeticExpressionValue>)processWithGeogebraCommonKernelArithmeticExpressionValue:(id<GeogebraCommonKernelArithmeticExpressionValue>)ev {
  if ([ev isKindOfClass:[GeogebraCommonKernelGeosGeoElement class]]) {
    return [((GeogebraCommonKernelArithmeticExpressionNode *) nil_chk([this$0_ convertNumberValueToExpressionNodeWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *) check_class_cast(ev, [GeogebraCommonKernelGeosGeoElement class])])) unwrap];
  }
  return ev;
}

- (instancetype)initWithGeogebraCommonKernelKernel:(GeogebraCommonKernelKernel *)outer$ {
  GeogebraCommonKernelKernel_$2_initWithGeogebraCommonKernelKernel_(self, outer$);
  return self;
}

- (void)dealloc {
  RELEASE_(this$0_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "processWithGeogebraCommonKernelArithmeticExpressionValue:", "process", "Lgeogebra.common.kernel.arithmetic.ExpressionValue;", 0x1, NULL, NULL },
    { "initWithGeogebraCommonKernelKernel:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lgeogebra.common.kernel.Kernel;", NULL, NULL,  },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "GeogebraCommonKernelKernel", "convertNumberValueToExpressionNodeWithGeogebraCommonKernelGeosGeoElement:" };
  static const J2ObjcClassInfo _GeogebraCommonKernelKernel_$2 = { 2, "", "geogebra.common.kernel", "Kernel", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_GeogebraCommonKernelKernel_$2;
}

@end

void GeogebraCommonKernelKernel_$2_initWithGeogebraCommonKernelKernel_(GeogebraCommonKernelKernel_$2 *self, GeogebraCommonKernelKernel *outer$) {
  GeogebraCommonKernelKernel_$2_set_this$0_(self, outer$);
  NSObject_init(self);
}

GeogebraCommonKernelKernel_$2 *new_GeogebraCommonKernelKernel_$2_initWithGeogebraCommonKernelKernel_(GeogebraCommonKernelKernel *outer$) {
  GeogebraCommonKernelKernel_$2 *self = [GeogebraCommonKernelKernel_$2 alloc];
  GeogebraCommonKernelKernel_$2_initWithGeogebraCommonKernelKernel_(self, outer$);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelKernel_$2)
