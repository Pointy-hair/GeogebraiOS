//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/advanced/AlgoOptimize.java
//


#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/advanced/AlgoOptimize.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/arithmetic/NumberValue.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoNumeric.h"
#include "geogebra/common/kernel/optimization/ExtremumFinder.h"
#include "geogebra/common/kernel/optimization/RealRootFunctionVariable.h"
#include "java/io/PrintStream.h"
#include "java/lang/Enum.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/System.h"

#define GeogebraCommonKernelAdvancedAlgoOptimize_DEBUG YES

@interface GeogebraCommonKernelAdvancedAlgoOptimize () {
 @public
  GeogebraCommonKernelConstruction *optCons_;
  GeogebraCommonKernelOptimizationExtremumFinder *extrFinder_;
  GeogebraCommonKernelOptimizationRealRootFunctionVariable *i_am_not_a_real_function_;
  GeogebraCommonKernelGeosGeoElement *dep_;
  GeogebraCommonKernelGeosGeoNumeric *indep_;
  GeogebraCommonKernelGeosGeoNumeric *result_;
  GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *type_;
  jboolean isrunning_;
}

+ (void)debugWithNSString:(NSString *)s;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoOptimize, optCons_, GeogebraCommonKernelConstruction *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoOptimize, extrFinder_, GeogebraCommonKernelOptimizationExtremumFinder *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoOptimize, i_am_not_a_real_function_, GeogebraCommonKernelOptimizationRealRootFunctionVariable *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoOptimize, dep_, GeogebraCommonKernelGeosGeoElement *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoOptimize, indep_, GeogebraCommonKernelGeosGeoNumeric *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoOptimize, result_, GeogebraCommonKernelGeosGeoNumeric *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAdvancedAlgoOptimize, type_, GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelAdvancedAlgoOptimize, DEBUG, jboolean)

__attribute__((unused)) static void GeogebraCommonKernelAdvancedAlgoOptimize_compute(GeogebraCommonKernelAdvancedAlgoOptimize *self);

__attribute__((unused)) static void GeogebraCommonKernelAdvancedAlgoOptimize_debugWithNSString_(NSString *s);

__attribute__((unused)) static void GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initWithNSString_withInt_(GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *self, NSString *__name, jint __ordinal);

__attribute__((unused)) static GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *new_GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initWithNSString_withInt_(NSString *__name, jint __ordinal) NS_RETURNS_RETAINED;

@implementation GeogebraCommonKernelAdvancedAlgoOptimize

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
           withGeogebraCommonKernelArithmeticNumberValue:(id<GeogebraCommonKernelArithmeticNumberValue>)dep
                  withGeogebraCommonKernelGeosGeoNumeric:(GeogebraCommonKernelGeosGeoNumeric *)indep
withGeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum:(GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *)type {
  GeogebraCommonKernelAdvancedAlgoOptimize_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoNumeric_withGeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_(self, cons, label, dep, indep, type);
  return self;
}

- (void)setInputOutput {
  GeogebraCommonKernelAlgosAlgoElement_setAndConsume_input_(self, [IOSObjectArray newArrayWithLength:2 type:GeogebraCommonKernelGeosGeoElement_class_()]);
  IOSObjectArray_Set(input_, 0, dep_);
  IOSObjectArray_Set(input_, 1, indep_);
  [super setOutputLengthWithInt:1];
  [super setOutputWithInt:0 withGeogebraCommonKernelGeosGeoElement:result_];
  [self setDependencies];
}

- (void)compute {
  GeogebraCommonKernelAdvancedAlgoOptimize_compute(self);
}

- (GeogebraCommonKernelGeosGeoElement *)getResult {
  return result_;
}

+ (void)debugWithNSString:(NSString *)s {
  GeogebraCommonKernelAdvancedAlgoOptimize_debugWithNSString_(s);
}

- (void)dealloc {
  RELEASE_(optCons_);
  RELEASE_(extrFinder_);
  RELEASE_(i_am_not_a_real_function_);
  RELEASE_(dep_);
  RELEASE_(indep_);
  RELEASE_(result_);
  RELEASE_(type_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelArithmeticNumberValue:withGeogebraCommonKernelGeosGeoNumeric:withGeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum:", "AlgoOptimize", NULL, 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "compute", NULL, "V", 0x11, NULL, NULL },
    { "getResult", NULL, "Lgeogebra.common.kernel.geos.GeoElement;", 0x1, NULL, NULL },
    { "debugWithNSString:", "debug", "V", 0x1a, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "optCons_", NULL, 0x2, "Lgeogebra.common.kernel.Construction;", NULL, NULL,  },
    { "extrFinder_", NULL, 0x2, "Lgeogebra.common.kernel.optimization.ExtremumFinder;", NULL, NULL,  },
    { "i_am_not_a_real_function_", NULL, 0x2, "Lgeogebra.common.kernel.optimization.RealRootFunctionVariable;", NULL, NULL,  },
    { "dep_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoElement;", NULL, NULL,  },
    { "indep_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoNumeric;", NULL, NULL,  },
    { "result_", NULL, 0x2, "Lgeogebra.common.kernel.geos.GeoNumeric;", NULL, NULL,  },
    { "type_", NULL, 0x2, "Lgeogebra.common.kernel.advanced.AlgoOptimize$OptimizationType;", NULL, NULL,  },
    { "isrunning_", NULL, 0x2, "Z", NULL, NULL,  },
    { "DEBUG__", "DEBUG", 0x1a, "Z", NULL, NULL, .constantValue.asBOOL = GeogebraCommonKernelAdvancedAlgoOptimize_DEBUG },
  };
  static const char *inner_classes[] = {"Lgeogebra.common.kernel.advanced.AlgoOptimize$OptimizationType;"};
  static const J2ObjcClassInfo _GeogebraCommonKernelAdvancedAlgoOptimize = { 2, "AlgoOptimize", "geogebra.common.kernel.advanced", NULL, 0x401, 5, methods, 9, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_GeogebraCommonKernelAdvancedAlgoOptimize;
}

@end

void GeogebraCommonKernelAdvancedAlgoOptimize_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoNumeric_withGeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_(GeogebraCommonKernelAdvancedAlgoOptimize *self, GeogebraCommonKernelConstruction *cons, NSString *label, id<GeogebraCommonKernelArithmeticNumberValue> dep, GeogebraCommonKernelGeosGeoNumeric *indep, GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *type) {
  GeogebraCommonKernelAlgosAlgoElement_initWithGeogebraCommonKernelConstruction_(self, cons);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_optCons_(self, nil);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_extrFinder_(self, nil);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_i_am_not_a_real_function_(self, nil);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_dep_(self, nil);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_indep_(self, nil);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_result_(self, nil);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_type_(self, GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_get_MINIMIZE());
  self->isrunning_ = NO;
  GeogebraCommonKernelAdvancedAlgoOptimize_set_optCons_(self, cons);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_dep_(self, [((id<GeogebraCommonKernelArithmeticNumberValue>) nil_chk(dep)) toGeoElement]);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_indep_(self, indep);
  GeogebraCommonKernelAdvancedAlgoOptimize_set_type_(self, type);
  GeogebraCommonKernelAdvancedAlgoOptimize_setAndConsume_extrFinder_(self, new_GeogebraCommonKernelOptimizationExtremumFinder_init());
  GeogebraCommonKernelAdvancedAlgoOptimize_setAndConsume_i_am_not_a_real_function_(self, new_GeogebraCommonKernelOptimizationRealRootFunctionVariable_initWithGeogebraCommonKernelArithmeticNumberValue_withGeogebraCommonKernelGeosGeoNumeric_(dep, indep));
  GeogebraCommonKernelAdvancedAlgoOptimize_setAndConsume_result_(self, new_GeogebraCommonKernelGeosGeoNumeric_initWithGeogebraCommonKernelConstruction_(cons));
  [self setInputOutput];
  GeogebraCommonKernelAdvancedAlgoOptimize_compute(self);
  [self->result_ setLabelWithNSString:label];
}

void GeogebraCommonKernelAdvancedAlgoOptimize_compute(GeogebraCommonKernelAdvancedAlgoOptimize *self) {
  jdouble old = 0.0, res = 0.0;
  if (self->isrunning_) {
    return;
  }
  old = [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->indep_)) getValue];
  self->isrunning_ = YES;
  if ([self->indep_ getIntervalMaxObject] == nil || [self->indep_ getIntervalMinObject] == nil) {
    [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->result_)) setUndefined];
    return;
  }
  if (self->type_ == GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_get_MINIMIZE()) {
    res = [((GeogebraCommonKernelOptimizationExtremumFinder *) nil_chk(self->extrFinder_)) findMinimumWithDouble:[self->indep_ getIntervalMin] withDouble:[self->indep_ getIntervalMax] withGeogebraCommonKernelRootsRealRootFunction:self->i_am_not_a_real_function_ withDouble:5.0E-8];
  }
  else {
    res = [((GeogebraCommonKernelOptimizationExtremumFinder *) nil_chk(self->extrFinder_)) findMaximumWithDouble:[self->indep_ getIntervalMin] withDouble:[self->indep_ getIntervalMax] withGeogebraCommonKernelRootsRealRootFunction:self->i_am_not_a_real_function_ withDouble:5.0E-8];
  }
  [((GeogebraCommonKernelGeosGeoNumeric *) nil_chk(self->result_)) setValueWithDouble:res];
  [self->indep_ setValueWithDouble:old];
  [((GeogebraCommonKernelConstruction *) nil_chk(self->optCons_)) updateConstruction];
  self->isrunning_ = NO;
  return;
}

void GeogebraCommonKernelAdvancedAlgoOptimize_debugWithNSString_(NSString *s) {
  GeogebraCommonKernelAdvancedAlgoOptimize_initialize();
  {
    [((JavaIoPrintStream *) nil_chk(JavaLangSystem_get_out_())) printlnWithNSString:s];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelAdvancedAlgoOptimize)

J2OBJC_INITIALIZED_DEFN(GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum)

GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_values_[2];

@implementation GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum

- (instancetype)initWithNSString:(NSString *)__name
                         withInt:(jint)__ordinal {
  GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initWithNSString_withInt_(self, __name, __ordinal);
  return self;
}

IOSObjectArray *GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_values() {
  GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initialize();
  return [IOSObjectArray arrayWithObjects:GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_values_ count:2 type:GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_class_()];
}

+ (IOSObjectArray *)values {
  return GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_values();
}

+ (GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *)valueOfWithNSString:(NSString *)name {
  return GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_valueOfWithNSString_(name);
}

GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_valueOfWithNSString_(NSString *name) {
  GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initialize();
  for (int i = 0; i < 2; i++) {
    GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *e = GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_values_[i];
    if ([name isEqual:[e name]]) {
      return e;
    }
  }
  @throw [[[JavaLangIllegalArgumentException alloc] initWithNSString:name] autorelease];
  return nil;
}

- (id)copyWithZone:(NSZone *)zone {
  return [self retain];
}

+ (void)initialize {
  if (self == [GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum class]) {
    GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_MINIMIZE = new_GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initWithNSString_withInt_(@"MINIMIZE", 0);
    GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_MAXIMIZE = new_GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initWithNSString_withInt_(@"MAXIMIZE", 1);
    J2OBJC_SET_INITIALIZED(GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcFieldInfo fields[] = {
    { "MINIMIZE", "MINIMIZE", 0x4019, "Lgeogebra.common.kernel.advanced.AlgoOptimize$OptimizationType;", &GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_MINIMIZE, NULL,  },
    { "MAXIMIZE", "MAXIMIZE", 0x4019, "Lgeogebra.common.kernel.advanced.AlgoOptimize$OptimizationType;", &GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_MAXIMIZE, NULL,  },
  };
  static const char *superclass_type_args[] = {"Lgeogebra.common.kernel.advanced.AlgoOptimize$OptimizationType;"};
  static const J2ObjcClassInfo _GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum = { 2, "OptimizationType", "geogebra.common.kernel.advanced", "AlgoOptimize", 0x4019, 0, NULL, 2, fields, 1, superclass_type_args, 0, NULL, NULL, "Ljava/lang/Enum<Lgeogebra/common/kernel/advanced/AlgoOptimize$OptimizationType;>;" };
  return &_GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum;
}

@end

void GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initWithNSString_withInt_(GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *self, NSString *__name, jint __ordinal) {
  JavaLangEnum_initWithNSString_withInt_(self, __name, __ordinal);
}

GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *new_GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initWithNSString_withInt_(NSString *__name, jint __ordinal) {
  GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum *self = [GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum alloc];
  GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum_initWithNSString_withInt_(self, __name, __ordinal);
  return self;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelAdvancedAlgoOptimize_OptimizationTypeEnum)
