//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/jacky/GSoC/geogebra_iOS/geogebra/geogebra/common/src/geogebra/common/kernel/algos/AlgoConicFivePoints.java
//


#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "geogebra/common/euclidian/EuclidianConstants.h"
#include "geogebra/common/kernel/Construction.h"
#include "geogebra/common/kernel/Kernel.h"
#include "geogebra/common/kernel/LocusEquation.h"
#include "geogebra/common/kernel/StringTemplate.h"
#include "geogebra/common/kernel/algos/AlgoConicFivePoints.h"
#include "geogebra/common/kernel/algos/AlgoElement.h"
#include "geogebra/common/kernel/algos/ConstructionElement.h"
#include "geogebra/common/kernel/algos/EquationElementInterface.h"
#include "geogebra/common/kernel/algos/EquationScopeInterface.h"
#include "geogebra/common/kernel/commands/Commands.h"
#include "geogebra/common/kernel/geos/GeoConic.h"
#include "geogebra/common/kernel/geos/GeoElement.h"
#include "geogebra/common/kernel/geos/GeoLine.h"
#include "geogebra/common/kernel/geos/GeoPoint.h"
#include "geogebra/common/kernel/geos/GeoVec3D.h"
#include "geogebra/common/kernel/kernelND/GeoConicND.h"
#include "geogebra/common/kernel/kernelND/GeoConicNDConstants.h"
#include "geogebra/common/main/Localization.h"
#include "java/lang/Double.h"
#include "java/lang/Math.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"

#define GeogebraCommonKernelAlgosAlgoConicFivePoints_MULTIPLIER_MIN 0.001
#define GeogebraCommonKernelAlgosAlgoConicFivePoints_MULTIPLIER_MAX 1000.0

@interface GeogebraCommonKernelAlgosAlgoConicFivePoints () {
 @public
  jboolean criticalCase_;
  IOSObjectArray *A_, *B_, *C_;
  jdouble e1_, e2_;
  IOSObjectArray *line_;
  jint i_, j_;
}

- (void)checkCriticalCase;

- (void)addIncidence;

- (jboolean)shouldInvertWithDouble:(jdouble)d;

+ (void)degConeWithGeogebraCommonKernelGeosGeoVec3D:(GeogebraCommonKernelGeosGeoVec3D *)a
               withGeogebraCommonKernelGeosGeoVec3D:(GeogebraCommonKernelGeosGeoVec3D *)b
                                   withDoubleArray2:(IOSObjectArray *)A;

+ (jdouble)evalMatrixWithDoubleArray2:(IOSObjectArray *)A
 withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *)P;

- (void)linCombWithDoubleArray2:(IOSObjectArray *)A
               withDoubleArray2:(IOSObjectArray *)B
                     withDouble:(jdouble)l
                     withDouble:(jdouble)m
               withDoubleArray2:(IOSObjectArray *)C;

@end

J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoConicFivePoints, A_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoConicFivePoints, B_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoConicFivePoints, C_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(GeogebraCommonKernelAlgosAlgoConicFivePoints, line_, IOSObjectArray *)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelAlgosAlgoConicFivePoints, MULTIPLIER_MIN, jdouble)

J2OBJC_STATIC_FIELD_GETTER(GeogebraCommonKernelAlgosAlgoConicFivePoints, MULTIPLIER_MAX, jdouble)

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoConicFivePoints_checkCriticalCase(GeogebraCommonKernelAlgosAlgoConicFivePoints *self);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoConicFivePoints_addIncidence(GeogebraCommonKernelAlgosAlgoConicFivePoints *self);

__attribute__((unused)) static jboolean GeogebraCommonKernelAlgosAlgoConicFivePoints_shouldInvertWithDouble_(GeogebraCommonKernelAlgosAlgoConicFivePoints *self, jdouble d);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoConicFivePoints_degConeWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withDoubleArray2_(GeogebraCommonKernelGeosGeoVec3D *a, GeogebraCommonKernelGeosGeoVec3D *b, IOSObjectArray *A);

__attribute__((unused)) static jdouble GeogebraCommonKernelAlgosAlgoConicFivePoints_evalMatrixWithDoubleArray2_withGeogebraCommonKernelGeosGeoPoint_(IOSObjectArray *A, GeogebraCommonKernelGeosGeoPoint *P);

__attribute__((unused)) static void GeogebraCommonKernelAlgosAlgoConicFivePoints_linCombWithDoubleArray2_withDoubleArray2_withDouble_withDouble_withDoubleArray2_(GeogebraCommonKernelAlgosAlgoConicFivePoints *self, IOSObjectArray *A, IOSObjectArray *B, jdouble l, jdouble m, IOSObjectArray *C);

@implementation GeogebraCommonKernelAlgosAlgoConicFivePoints

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
                                            withNSString:(NSString *)label
         withGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)inputP {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelKernelNDGeoPointNDArray_(self, cons, label, inputP);
  return self;
}

- (void)setInputPoints {
  GeogebraCommonKernelAlgosAlgoElement_set_input_(self, P_);
}

- (IOSObjectArray *)createPoints2DWithGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)inputP {
  return (IOSObjectArray *) check_class_cast(inputP, [IOSObjectArray class]);
}

- (instancetype)initWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons
         withGeogebraCommonKernelKernelNDGeoPointNDArray:(IOSObjectArray *)inputP {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelKernelNDGeoPointNDArray_(self, cons, inputP);
  return self;
}

- (void)initCoords {
}

- (GeogebraCommonKernelKernelNDGeoConicND *)newGeoConicWithGeogebraCommonKernelConstruction:(GeogebraCommonKernelConstruction *)cons {
  return [new_GeogebraCommonKernelGeosGeoConic_initWithGeogebraCommonKernelConstruction_(cons) autorelease];
}

- (void)checkCriticalCase {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_checkCriticalCase(self);
}

- (void)addIncidence {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_addIncidence(self);
}

- (GeogebraCommonKernelCommandsCommandsEnum *)getClassName {
  return GeogebraCommonKernelCommandsCommandsEnum_get_Conic();
}

- (jint)getRelatedModeID {
  return GeogebraCommonEuclidianEuclidianConstants_MODE_CONIC_FIVE_POINTS;
}

- (void)setInputOutput {
  [self setInputPoints];
  [super setOutputLengthWithInt:1];
  [super setOutputWithInt:0 withGeogebraCommonKernelGeosGeoElement:conic_];
  [self setDependencies];
}

- (GeogebraCommonKernelKernelNDGeoConicND *)getConic {
  return conic_;
}

- (IOSObjectArray *)getPoints {
  return P_;
}

- (IOSObjectArray *)getAllPoints {
  IOSObjectArray *copy_ = [IOSObjectArray arrayWithLength:((IOSObjectArray *) nil_chk([self getPoints]))->size_ type:GeogebraCommonKernelGeosGeoPoint_class_()];
  JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_([self getPoints], 0, copy_, 0, copy_->size_);
  return copy_;
}

- (void)compute {
  GeogebraCommonKernelGeosGeoVec3D_crossWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_(IOSObjectArray_Get(nil_chk(P_), 0), IOSObjectArray_Get(P_, 1), IOSObjectArray_Get(nil_chk(line_), 0));
  GeogebraCommonKernelGeosGeoVec3D_crossWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_(IOSObjectArray_Get(P_, 2), IOSObjectArray_Get(P_, 3), IOSObjectArray_Get(line_, 1));
  GeogebraCommonKernelGeosGeoVec3D_crossWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_(IOSObjectArray_Get(P_, 0), IOSObjectArray_Get(P_, 2), IOSObjectArray_Get(line_, 2));
  GeogebraCommonKernelGeosGeoVec3D_crossWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_(IOSObjectArray_Get(P_, 1), IOSObjectArray_Get(P_, 3), IOSObjectArray_Get(line_, 3));
  GeogebraCommonKernelAlgosAlgoConicFivePoints_degConeWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withDoubleArray2_(IOSObjectArray_Get(line_, 0), IOSObjectArray_Get(line_, 1), A_);
  GeogebraCommonKernelAlgosAlgoConicFivePoints_degConeWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withDoubleArray2_(IOSObjectArray_Get(line_, 2), IOSObjectArray_Get(line_, 3), B_);
  e1_ = GeogebraCommonKernelAlgosAlgoConicFivePoints_evalMatrixWithDoubleArray2_withGeogebraCommonKernelGeosGeoPoint_(B_, IOSObjectArray_Get(P_, 4));
  e2_ = -GeogebraCommonKernelAlgosAlgoConicFivePoints_evalMatrixWithDoubleArray2_withGeogebraCommonKernelGeosGeoPoint_(A_, IOSObjectArray_Get(P_, 4));
  if (GeogebraCommonKernelAlgosAlgoConicFivePoints_shouldInvertWithDouble_(self, e1_) && GeogebraCommonKernelAlgosAlgoConicFivePoints_shouldInvertWithDouble_(self, e2_)) {
    jdouble tmp = e1_;
    e1_ = 1 / e2_;
    e2_ = 1 / tmp;
  }
  GeogebraCommonKernelAlgosAlgoConicFivePoints_linCombWithDoubleArray2_withDoubleArray2_withDouble_withDouble_withDoubleArray2_(self, A_, B_, e1_, e2_, C_);
  if (criticalCase_) {
    ((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(conic_))->errDetS_ = JavaLangDouble_POSITIVE_INFINITY;
  }
  else {
    ((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(conic_))->errDetS_ = GeogebraCommonKernelKernel_MIN_PRECISION;
  }
  [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(conic_)) setMatrixWithDoubleArray2:C_];
}

- (jboolean)shouldInvertWithDouble:(jdouble)d {
  return GeogebraCommonKernelAlgosAlgoConicFivePoints_shouldInvertWithDouble_(self, d);
}

+ (void)degConeWithGeogebraCommonKernelGeosGeoVec3D:(GeogebraCommonKernelGeosGeoVec3D *)a
               withGeogebraCommonKernelGeosGeoVec3D:(GeogebraCommonKernelGeosGeoVec3D *)b
                                   withDoubleArray2:(IOSObjectArray *)A {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_degConeWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withDoubleArray2_(a, b, A);
}

+ (jdouble)evalMatrixWithDoubleArray2:(IOSObjectArray *)A
 withGeogebraCommonKernelGeosGeoPoint:(GeogebraCommonKernelGeosGeoPoint *)P {
  return GeogebraCommonKernelAlgosAlgoConicFivePoints_evalMatrixWithDoubleArray2_withGeogebraCommonKernelGeosGeoPoint_(A, P);
}

- (void)linCombWithDoubleArray2:(IOSObjectArray *)A
               withDoubleArray2:(IOSObjectArray *)B
                     withDouble:(jdouble)l
                     withDouble:(jdouble)m
               withDoubleArray2:(IOSObjectArray *)C {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_linCombWithDoubleArray2_withDoubleArray2_withDouble_withDouble_withDoubleArray2_(self, A, B, l, m, C);
}

- (NSString *)toStringWithGeogebraCommonKernelStringTemplate:(GeogebraCommonKernelStringTemplate *)tpl {
  return [((GeogebraCommonMainLocalization *) nil_chk([self getLoc])) getPlainWithNSString:@"ConicThroughABCDE" withNSString:[((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(nil_chk(P_), 0))) getLabelWithGeogebraCommonKernelStringTemplate:tpl] withNSString:[((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(P_, 1))) getLabelWithGeogebraCommonKernelStringTemplate:tpl] withNSString:[((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(P_, 2))) getLabelWithGeogebraCommonKernelStringTemplate:tpl] withNSString:[((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(P_, 3))) getLabelWithGeogebraCommonKernelStringTemplate:tpl] withNSString:[((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(P_, 4))) getLabelWithGeogebraCommonKernelStringTemplate:tpl]];
}

- (jboolean)isLocusEquable {
  return YES;
}

- (id<GeogebraCommonKernelAlgosEquationElementInterface>)buildEquationElementForGeoWithGeogebraCommonKernelGeosGeoElement:(GeogebraCommonKernelGeosGeoElement *)geo
                                                                      withGeogebraCommonKernelAlgosEquationScopeInterface:(id<GeogebraCommonKernelAlgosEquationScopeInterface>)scope {
  return GeogebraCommonKernelLocusEquation_eqnConicFivePointsWithGeogebraCommonKernelGeosGeoElement_withGeogebraCommonKernelAlgosAlgoElement_withGeogebraCommonKernelAlgosEquationScopeInterface_(geo, self, scope);
}

- (void)dealloc {
  RELEASE_(P_);
  RELEASE_(conic_);
  RELEASE_(A_);
  RELEASE_(B_);
  RELEASE_(C_);
  RELEASE_(line_);
  [super dealloc];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithGeogebraCommonKernelConstruction:withNSString:withGeogebraCommonKernelKernelNDGeoPointNDArray:", "AlgoConicFivePoints", NULL, 0x1, NULL, NULL },
    { "setInputPoints", NULL, "V", 0x4, NULL, NULL },
    { "createPoints2DWithGeogebraCommonKernelKernelNDGeoPointNDArray:", "createPoints2D", "[Lgeogebra.common.kernel.geos.GeoPoint;", 0x4, NULL, NULL },
    { "initWithGeogebraCommonKernelConstruction:withGeogebraCommonKernelKernelNDGeoPointNDArray:", "AlgoConicFivePoints", NULL, 0x1, NULL, NULL },
    { "initCoords", NULL, "V", 0x4, NULL, NULL },
    { "newGeoConicWithGeogebraCommonKernelConstruction:", "newGeoConic", "Lgeogebra.common.kernel.kernelND.GeoConicND;", 0x4, NULL, NULL },
    { "checkCriticalCase", NULL, "V", 0x2, NULL, NULL },
    { "addIncidence", NULL, "V", 0x2, NULL, NULL },
    { "getClassName", NULL, "Lgeogebra.common.kernel.commands.Commands;", 0x1, NULL, NULL },
    { "getRelatedModeID", NULL, "I", 0x1, NULL, NULL },
    { "setInputOutput", NULL, "V", 0x4, NULL, NULL },
    { "getConic", NULL, "Lgeogebra.common.kernel.kernelND.GeoConicND;", 0x1, NULL, NULL },
    { "getPoints", NULL, "[Lgeogebra.common.kernel.geos.GeoPoint;", 0x0, NULL, NULL },
    { "getAllPoints", NULL, "[Lgeogebra.common.kernel.geos.GeoPoint;", 0x1, NULL, NULL },
    { "compute", NULL, "V", 0x1, NULL, NULL },
    { "shouldInvertWithDouble:", "shouldInvert", "Z", 0x2, NULL, NULL },
    { "degConeWithGeogebraCommonKernelGeosGeoVec3D:withGeogebraCommonKernelGeosGeoVec3D:withDoubleArray2:", "degCone", "V", 0x1a, NULL, NULL },
    { "evalMatrixWithDoubleArray2:withGeogebraCommonKernelGeosGeoPoint:", "evalMatrix", "D", 0x1a, NULL, NULL },
    { "linCombWithDoubleArray2:withDoubleArray2:withDouble:withDouble:withDoubleArray2:", "linComb", "V", 0x12, NULL, NULL },
    { "toStringWithGeogebraCommonKernelStringTemplate:", "toString", "Ljava.lang.String;", 0x11, NULL, NULL },
    { "isLocusEquable", NULL, "Z", 0x1, NULL, NULL },
    { "buildEquationElementForGeoWithGeogebraCommonKernelGeosGeoElement:withGeogebraCommonKernelAlgosEquationScopeInterface:", "buildEquationElementForGeo", "Lgeogebra.common.kernel.algos.EquationElementInterface;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "MULTIPLIER_MIN_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelAlgosAlgoConicFivePoints_MULTIPLIER_MIN },
    { "MULTIPLIER_MAX_", NULL, 0x1a, "D", NULL, NULL, .constantValue.asDouble = GeogebraCommonKernelAlgosAlgoConicFivePoints_MULTIPLIER_MAX },
    { "P_", NULL, 0x4, "[Lgeogebra.common.kernel.geos.GeoPoint;", NULL, NULL,  },
    { "conic_", NULL, 0x4, "Lgeogebra.common.kernel.kernelND.GeoConicND;", NULL, NULL,  },
    { "criticalCase_", NULL, 0x2, "Z", NULL, NULL,  },
    { "A_", NULL, 0x2, "[[D", NULL, NULL,  },
    { "B_", NULL, 0x2, "[[D", NULL, NULL,  },
    { "C_", NULL, 0x2, "[[D", NULL, NULL,  },
    { "e1_", NULL, 0x2, "D", NULL, NULL,  },
    { "e2_", NULL, 0x2, "D", NULL, NULL,  },
    { "line_", NULL, 0x2, "[Lgeogebra.common.kernel.geos.GeoVec3D;", NULL, NULL,  },
    { "i_", NULL, 0x2, "I", NULL, NULL,  },
    { "j_", NULL, 0x2, "I", NULL, NULL,  },
  };
  static const J2ObjcClassInfo _GeogebraCommonKernelAlgosAlgoConicFivePoints = { 2, "AlgoConicFivePoints", "geogebra.common.kernel.algos", NULL, 0x1, 22, methods, 13, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_GeogebraCommonKernelAlgosAlgoConicFivePoints;
}

@end

void GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelKernelNDGeoPointNDArray_(GeogebraCommonKernelAlgosAlgoConicFivePoints *self, GeogebraCommonKernelConstruction *cons, NSString *label, IOSObjectArray *inputP) {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelKernelNDGeoPointNDArray_(self, cons, inputP);
  [((GeogebraCommonKernelKernelNDGeoConicND *) nil_chk(self->conic_)) setLabelWithNSString:label];
}

GeogebraCommonKernelAlgosAlgoConicFivePoints *new_GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelKernelNDGeoPointNDArray_(GeogebraCommonKernelConstruction *cons, NSString *label, IOSObjectArray *inputP) {
  GeogebraCommonKernelAlgosAlgoConicFivePoints *self = [GeogebraCommonKernelAlgosAlgoConicFivePoints alloc];
  GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withNSString_withGeogebraCommonKernelKernelNDGeoPointNDArray_(self, cons, label, inputP);
  return self;
}

void GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelKernelNDGeoPointNDArray_(GeogebraCommonKernelAlgosAlgoConicFivePoints *self, GeogebraCommonKernelConstruction *cons, IOSObjectArray *inputP) {
  GeogebraCommonKernelAlgosAlgoElement_initWithGeogebraCommonKernelConstruction_(self, cons);
  GeogebraCommonKernelAlgosAlgoConicFivePoints_set_P_(self, [self createPoints2DWithGeogebraCommonKernelKernelNDGeoPointNDArray:inputP]);
  GeogebraCommonKernelAlgosAlgoConicFivePoints_set_conic_(self, [self newGeoConicWithGeogebraCommonKernelConstruction:cons]);
  [self setInputOutput];
  GeogebraCommonKernelAlgosAlgoConicFivePoints_setAndConsume_line_(self, [IOSObjectArray newArrayWithLength:4 type:GeogebraCommonKernelGeosGeoVec3D_class_()]);
  for (self->i_ = 0; self->i_ < 4; self->i_++) {
    IOSObjectArray_SetAndConsume(self->line_, self->i_, new_GeogebraCommonKernelGeosGeoLine_initWithGeogebraCommonKernelConstruction_(cons));
  }
  GeogebraCommonKernelAlgosAlgoConicFivePoints_setAndConsume_A_(self, [IOSDoubleArray newArrayWithDimensions:2 lengths:(jint[]){ 3, 3 }]);
  GeogebraCommonKernelAlgosAlgoConicFivePoints_setAndConsume_B_(self, [IOSDoubleArray newArrayWithDimensions:2 lengths:(jint[]){ 3, 3 }]);
  GeogebraCommonKernelAlgosAlgoConicFivePoints_setAndConsume_C_(self, [IOSDoubleArray newArrayWithDimensions:2 lengths:(jint[]){ 3, 3 }]);
  GeogebraCommonKernelAlgosAlgoConicFivePoints_checkCriticalCase(self);
  [self initCoords];
  [self compute];
  GeogebraCommonKernelAlgosAlgoConicFivePoints_addIncidence(self);
}

GeogebraCommonKernelAlgosAlgoConicFivePoints *new_GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelKernelNDGeoPointNDArray_(GeogebraCommonKernelConstruction *cons, IOSObjectArray *inputP) {
  GeogebraCommonKernelAlgosAlgoConicFivePoints *self = [GeogebraCommonKernelAlgosAlgoConicFivePoints alloc];
  GeogebraCommonKernelAlgosAlgoConicFivePoints_initWithGeogebraCommonKernelConstruction_withGeogebraCommonKernelKernelNDGeoPointNDArray_(self, cons, inputP);
  return self;
}

void GeogebraCommonKernelAlgosAlgoConicFivePoints_checkCriticalCase(GeogebraCommonKernelAlgosAlgoConicFivePoints *self) {
  self->criticalCase_ = NO;
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(self->P_))->size_; i++) {
    if ([((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->P_, i))) getIncidenceList] == nil) return;
  }
  JavaUtilArrayList *firstList = [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->P_, 0))) getIncidenceList];
  for (jint j = 0; j < [((JavaUtilArrayList *) nil_chk(firstList)) size]; j++) {
    if ([((GeogebraCommonKernelGeosGeoElement *) nil_chk([firstList getWithInt:j])) isGeoConic]) {
      GeogebraCommonKernelGeosGeoConic *p = (GeogebraCommonKernelGeosGeoConic *) check_class_cast([firstList getWithInt:j], [GeogebraCommonKernelGeosGeoConic class]);
      if ([((GeogebraCommonKernelGeosGeoConic *) nil_chk(p)) getType] == GeogebraCommonKernelKernelNDGeoConicNDConstants_CONIC_PARABOLA) {
        self->criticalCase_ = YES;
        for (jint i = 1; i < 5; i++) {
          if (![((JavaUtilArrayList *) nil_chk([((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->P_, i))) getIncidenceList])) containsWithId:p]) {
            self->criticalCase_ = NO;
            break;
          }
        }
      }
    }
    if (self->criticalCase_) {
      break;
    }
  }
}

void GeogebraCommonKernelAlgosAlgoConicFivePoints_addIncidence(GeogebraCommonKernelAlgosAlgoConicFivePoints *self) {
  for (jint i = 0; i < ((IOSObjectArray *) nil_chk(self->P_))->size_; ++i) {
    [((GeogebraCommonKernelGeosGeoPoint *) nil_chk(IOSObjectArray_Get(self->P_, i))) addIncidenceWithGeogebraCommonKernelGeosGeoElement:self->conic_ withBoolean:NO];
  }
}

jboolean GeogebraCommonKernelAlgosAlgoConicFivePoints_shouldInvertWithDouble_(GeogebraCommonKernelAlgosAlgoConicFivePoints *self, jdouble d) {
  return (!GeogebraCommonKernelKernel_isZeroWithDouble_(d) && JavaLangMath_absWithDouble_(d) < GeogebraCommonKernelAlgosAlgoConicFivePoints_MULTIPLIER_MIN) || JavaLangMath_absWithDouble_(d) > GeogebraCommonKernelAlgosAlgoConicFivePoints_MULTIPLIER_MAX;
}

void GeogebraCommonKernelAlgosAlgoConicFivePoints_degConeWithGeogebraCommonKernelGeosGeoVec3D_withGeogebraCommonKernelGeosGeoVec3D_withDoubleArray2_(GeogebraCommonKernelGeosGeoVec3D *a, GeogebraCommonKernelGeosGeoVec3D *b, IOSObjectArray *A) {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_initialize();
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(nil_chk(A), 0)), 0) = ((GeogebraCommonKernelGeosGeoVec3D *) nil_chk(a))->x_ * ((GeogebraCommonKernelGeosGeoVec3D *) nil_chk(b))->x_;
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(A, 0)), 1) = a->x_ * b->y_;
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(A, 0)), 2) = a->x_ * b->z_;
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(A, 1)), 0) = a->y_ * b->x_;
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(A, 1)), 1) = a->y_ * b->y_;
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(A, 1)), 2) = a->y_ * b->z_;
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(A, 2)), 0) = a->z_ * b->x_;
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(A, 2)), 1) = a->z_ * b->y_;
  *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(A, 2)), 2) = a->z_ * b->z_;
}

jdouble GeogebraCommonKernelAlgosAlgoConicFivePoints_evalMatrixWithDoubleArray2_withGeogebraCommonKernelGeosGeoPoint_(IOSObjectArray *A, GeogebraCommonKernelGeosGeoPoint *P) {
  GeogebraCommonKernelAlgosAlgoConicFivePoints_initialize();
  return IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(A), 0)), 0) * ((GeogebraCommonKernelGeosGeoPoint *) nil_chk(P))->x_ * P->x_ + IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(A, 1)), 1) * P->y_ * P->y_ + IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(A, 2)), 2) * P->z_ * P->z_ + (IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(A, 0)), 1) + IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(A, 1)), 0)) * P->x_ * P->y_ + (IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(A, 0)), 2) + IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(A, 2)), 0)) * P->x_ * P->z_ + (IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(A, 1)), 2) + IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(A, 2)), 1)) * P->y_ * P->z_;
}

void GeogebraCommonKernelAlgosAlgoConicFivePoints_linCombWithDoubleArray2_withDoubleArray2_withDouble_withDouble_withDoubleArray2_(GeogebraCommonKernelAlgosAlgoConicFivePoints *self, IOSObjectArray *A, IOSObjectArray *B, jdouble l, jdouble m, IOSObjectArray *C) {
  for (self->i_ = 0; self->i_ < 3; self->i_++) {
    for (self->j_ = 0; self->j_ < 3; self->j_++) {
      *IOSDoubleArray_GetRef(nil_chk(IOSObjectArray_Get(nil_chk(C), self->i_)), self->j_) = l * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(A), self->i_)), self->j_) + m * IOSDoubleArray_Get(nil_chk(IOSObjectArray_Get(nil_chk(B), self->i_)), self->j_);
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GeogebraCommonKernelAlgosAlgoConicFivePoints)
